function oP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Ru(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var og={exports:{}},$l={};var qw;function rP(){if(qw)return $l;qw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:u,ref:r!==void 0?r:null,props:a}}return $l.Fragment=e,$l.jsx=n,$l.jsxs=n,$l}var jw;function sP(){return jw||(jw=1,og.exports=rP()),og.exports}var b=sP(),rg={exports:{}},Re={};var Jw;function aP(){if(Jw)return Re;Jw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function M(P,K,se){this.props=P,this.context=K,this.refs=A,this.updater=se||C}M.prototype.isReactComponent={},M.prototype.setState=function(P,K){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,K,"setState")},M.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function I(){}I.prototype=M.prototype;function N(P,K,se){this.props=P,this.context=K,this.refs=A,this.updater=se||C}var D=N.prototype=new I;D.constructor=N,x(D,M.prototype),D.isPureReactComponent=!0;var L=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function j(P,K,se){var le=se.ref;return{$$typeof:t,type:P,key:K,ref:le!==void 0?le:null,props:se}}function Y(P,K){return j(P.type,K,P.props)}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function re(P){var K={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(se){return K[se]})}var ie=/\/+/g;function ae(P,K){return typeof P=="object"&&P!==null&&P.key!=null?re(""+P.key):K.toString(36)}function de(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(U,U):(P.status="pending",P.then(function(K){P.status==="pending"&&(P.status="fulfilled",P.value=K)},function(K){P.status==="pending"&&(P.status="rejected",P.reason=K)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function B(P,K,se,le,me){var be=typeof P;(be==="undefined"||be==="boolean")&&(P=null);var ve=!1;if(P===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(P.$$typeof){case t:case e:ve=!0;break;case m:return ve=P._init,B(ve(P._payload),K,se,le,me)}}if(ve)return me=me(P),ve=le===""?"."+ae(P,0):le,L(me)?(se="",ve!=null&&(se=ve.replace(ie,"$&/")+"/"),B(me,K,se,"",function(sn){return sn})):me!=null&&(W(me)&&(me=Y(me,se+(me.key==null||P&&P.key===me.key?"":(""+me.key).replace(ie,"$&/")+"/")+ve)),K.push(me)),1;ve=0;var Je=le===""?".":le+":";if(L(P))for(var Ke=0;Ke<P.length;Ke++)le=P[Ke],be=Je+ae(le,Ke),ve+=B(le,K,se,be,me);else if(Ke=w(P),typeof Ke=="function")for(P=Ke.call(P),Ke=0;!(le=P.next()).done;)le=le.value,be=Je+ae(le,Ke++),ve+=B(le,K,se,be,me);else if(be==="object"){if(typeof P.then=="function")return B(de(P),K,se,le,me);throw K=String(P),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ve}function Q(P,K,se){if(P==null)return P;var le=[],me=0;return B(P,le,"","",function(be){return K.call(se,be,me++)}),le}function ee(P){if(P._status===-1){var K=P._result;K=K(),K.then(function(se){(P._status===0||P._status===-1)&&(P._status=1,P._result=se)},function(se){(P._status===0||P._status===-1)&&(P._status=2,P._result=se)}),P._status===-1&&(P._status=0,P._result=K)}if(P._status===1)return P._result.default;throw P._result}var ne=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ce={map:Q,forEach:function(P,K,se){Q(P,function(){K.apply(this,arguments)},se)},count:function(P){var K=0;return Q(P,function(){K++}),K},toArray:function(P){return Q(P,function(K){return K})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=y,Re.Children=ce,Re.Component=M,Re.Fragment=n,Re.Profiler=r,Re.PureComponent=N,Re.StrictMode=i,Re.Suspense=h,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return O.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,K,se){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var le=x({},P.props),me=P.key;if(K!=null)for(be in K.key!==void 0&&(me=""+K.key),K)!q.call(K,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&K.ref===void 0||(le[be]=K[be]);var be=arguments.length-2;if(be===1)le.children=se;else if(1<be){for(var ve=Array(be),Je=0;Je<be;Je++)ve[Je]=arguments[Je+2];le.children=ve}return j(P.type,me,le)},Re.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},Re.createElement=function(P,K,se){var le,me={},be=null;if(K!=null)for(le in K.key!==void 0&&(be=""+K.key),K)q.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=K[le]);var ve=arguments.length-2;if(ve===1)me.children=se;else if(1<ve){for(var Je=Array(ve),Ke=0;Ke<ve;Ke++)Je[Ke]=arguments[Ke+2];me.children=Je}if(P&&P.defaultProps)for(le in ve=P.defaultProps,ve)me[le]===void 0&&(me[le]=ve[le]);return j(P,be,me)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:c,render:P}},Re.isValidElement=W,Re.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:ee}},Re.memo=function(P,K){return{$$typeof:d,type:P,compare:K===void 0?null:K}},Re.startTransition=function(P){var K=O.T,se={};O.T=se;try{var le=P(),me=O.S;me!==null&&me(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(U,ne)}catch(be){ne(be)}finally{K!==null&&se.types!==null&&(K.types=se.types),O.T=K}},Re.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Re.use=function(P){return O.H.use(P)},Re.useActionState=function(P,K,se){return O.H.useActionState(P,K,se)},Re.useCallback=function(P,K){return O.H.useCallback(P,K)},Re.useContext=function(P){return O.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,K){return O.H.useDeferredValue(P,K)},Re.useEffect=function(P,K){return O.H.useEffect(P,K)},Re.useEffectEvent=function(P){return O.H.useEffectEvent(P)},Re.useId=function(){return O.H.useId()},Re.useImperativeHandle=function(P,K,se){return O.H.useImperativeHandle(P,K,se)},Re.useInsertionEffect=function(P,K){return O.H.useInsertionEffect(P,K)},Re.useLayoutEffect=function(P,K){return O.H.useLayoutEffect(P,K)},Re.useMemo=function(P,K){return O.H.useMemo(P,K)},Re.useOptimistic=function(P,K){return O.H.useOptimistic(P,K)},Re.useReducer=function(P,K,se){return O.H.useReducer(P,K,se)},Re.useRef=function(P){return O.H.useRef(P)},Re.useState=function(P){return O.H.useState(P)},Re.useSyncExternalStore=function(P,K,se){return O.H.useSyncExternalStore(P,K,se)},Re.useTransition=function(){return O.H.useTransition()},Re.version="19.2.1",Re}var Kw;function nh(){return Kw||(Kw=1,rg.exports=aP()),rg.exports}var E=nh();const ot=Ru(E),Zx=oP({__proto__:null,default:ot},[E]);var sg={exports:{}},Gl={},ag={exports:{}},lg={};var Yw;function lP(){return Yw||(Yw=1,(function(t){function e(B,Q){var ee=B.length;B.push(Q);e:for(;0<ee;){var ne=ee-1>>>1,ce=B[ne];if(0<r(ce,Q))B[ne]=Q,B[ee]=ce,ee=ne;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Q=B[0],ee=B.pop();if(ee!==Q){B[0]=ee;e:for(var ne=0,ce=B.length,P=ce>>>1;ne<P;){var K=2*(ne+1)-1,se=B[K],le=K+1,me=B[le];if(0>r(se,ee))le<ce&&0>r(me,se)?(B[ne]=me,B[le]=ee,ne=le):(B[ne]=se,B[K]=ee,ne=K);else if(le<ce&&0>r(me,ee))B[ne]=me,B[le]=ee,ne=le;else break e}}return Q}function r(B,Q){var ee=B.sortIndex-Q.sortIndex;return ee!==0?ee:B.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var h=[],d=[],m=1,y=null,S=3,w=!1,C=!1,x=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var Q=n(d);Q!==null;){if(Q.callback===null)i(d);else if(Q.startTime<=B)i(d),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=n(d)}}function L(B){if(x=!1,D(B),!C)if(n(h)!==null)C=!0,U||(U=!0,re());else{var Q=n(d);Q!==null&&de(L,Q.startTime-B)}}var U=!1,O=-1,q=5,j=-1;function Y(){return A?!0:!(t.unstable_now()-j<q)}function W(){if(A=!1,U){var B=t.unstable_now();j=B;var Q=!0;try{e:{C=!1,x&&(x=!1,I(O),O=-1),w=!0;var ee=S;try{t:{for(D(B),y=n(h);y!==null&&!(y.expirationTime>B&&Y());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,S=y.priorityLevel;var ce=ne(y.expirationTime<=B);if(B=t.unstable_now(),typeof ce=="function"){y.callback=ce,D(B),Q=!0;break t}y===n(h)&&i(h),D(B)}else i(h);y=n(h)}if(y!==null)Q=!0;else{var P=n(d);P!==null&&de(L,P.startTime-B),Q=!1}}break e}finally{y=null,S=ee,w=!1}Q=void 0}}finally{Q?re():U=!1}}}var re;if(typeof N=="function")re=function(){N(W)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=W,re=function(){ae.postMessage(null)}}else re=function(){M(W,0)};function de(B,Q){O=M(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(B){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ee=S;S=Q;try{return B()}finally{S=ee}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=S;S=B;try{return Q()}finally{S=ee}},t.unstable_scheduleCallback=function(B,Q,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,B={id:m++,callback:Q,priorityLevel:B,startTime:ee,expirationTime:ce,sortIndex:-1},ee>ne?(B.sortIndex=ee,e(d,B),n(h)===null&&B===n(d)&&(x?(I(O),O=-1):x=!0,de(L,ee-ne))):(B.sortIndex=ce,e(h,B),C||w||(C=!0,U||(U=!0,re()))),B},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(B){var Q=S;return function(){var ee=S;S=Q;try{return B.apply(this,arguments)}finally{S=ee}}}})(lg)),lg}var Xw;function uP(){return Xw||(Xw=1,ag.exports=lP()),ag.exports}var ug={exports:{}},Lt={};var Ww;function cP(){if(Ww)return Lt;Ww=1;var t=nh();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:d,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Lt.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,m)},Lt.flushSync=function(h){var d=u.T,m=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=d,i.p=m,i.d.f()}},Lt.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},Lt.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Lt.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),S=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:w}):m==="script"&&i.d.X(h,{crossOrigin:y,integrity:S,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Lt.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},Lt.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);i.d.L(h,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Lt.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},Lt.requestFormReset=function(h){i.d.r(h)},Lt.unstable_batchedUpdates=function(h,d){return h(d)},Lt.useFormState=function(h,d,m){return u.H.useFormState(h,d,m)},Lt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Lt.version="19.2.1",Lt}var Qw;function eA(){if(Qw)return ug.exports;Qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ug.exports=cP(),ug.exports}var Zw;function fP(){if(Zw)return Gl;Zw=1;var t=uP(),e=nh(),n=eA();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function c(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function d(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,f=s;;){var v=l.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===l)return h(v),o;if(_===f)return h(v),s;_=_.sibling}throw Error(i(188))}if(l.return!==f.return)l=v,f=_;else{for(var T=!1,R=v.child;R;){if(R===l){T=!0,l=v,f=_;break}if(R===f){T=!0,f=v,l=_;break}R=R.sibling}if(!T){for(R=_.child;R;){if(R===l){T=!0,l=_,f=v;break}if(R===f){T=!0,f=_,l=v;break}R=R.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==f)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function m(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=m(o),s!==null)return s;o=o.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var ie=Symbol.for("react.client.reference");function ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ie?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case U:return"SuspenseList";case j:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case C:return"Portal";case N:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case D:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return s=o.displayName||null,s!==null?s:ae(o.type)||"Memo";case q:s=o._payload,o=o._init;try{return ae(o(s))}catch{}}return null}var de=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ne=[],ce=-1;function P(o){return{current:o}}function K(o){0>ce||(o.current=ne[ce],ne[ce]=null,ce--)}function se(o,s){ce++,ne[ce]=o.current,o.current=s}var le=P(null),me=P(null),be=P(null),ve=P(null);function Je(o,s){switch(se(be,s),se(me,o),se(le,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?pw(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=pw(s),o=mw(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}K(le),se(le,o)}function Ke(){K(le),K(me),K(be)}function sn(o){o.memoizedState!==null&&se(ve,o);var s=le.current,l=mw(s,o.type);s!==l&&(se(me,o),se(le,l))}function Cn(o){me.current===o&&(K(le),K(me)),ve.current===o&&(K(ve),Ll._currentValue=ee)}var pi,jt;function Jt(o){if(pi===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);pi=s&&s[1]||"",jt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pi+o+jt}var nt=!1;function Bi(o,s){if(!o||nt)return"";nt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(J){var z=J}Reflect.construct(o,[],te)}else{try{te.call()}catch(J){z=J}o.call(te.prototype)}}else{try{throw Error()}catch(J){z=J}(te=o())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(J){if(J&&z&&typeof J.stack=="string")return[J.stack,z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),T=_[0],R=_[1];if(T&&R){var k=T.split(`
`),H=R.split(`
`);for(v=f=0;f<k.length&&!k[f].includes("DetermineComponentFrameRoot");)f++;for(;v<H.length&&!H[v].includes("DetermineComponentFrameRoot");)v++;if(f===k.length||v===H.length)for(f=k.length-1,v=H.length-1;1<=f&&0<=v&&k[f]!==H[v];)v--;for(;1<=f&&0<=v;f--,v--)if(k[f]!==H[v]){if(f!==1||v!==1)do if(f--,v--,0>v||k[f]!==H[v]){var X=`
`+k[f].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=f&&0<=v);break}}}finally{nt=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?Jt(l):""}function xo(o,s){switch(o.tag){case 26:case 27:case 5:return Jt(o.type);case 16:return Jt("Lazy");case 13:return o.child!==s&&s!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Bi(o.type,!1);case 11:return Bi(o.type.render,!1);case 1:return Bi(o.type,!0);case 31:return Jt("Activity");default:return""}}function oc(o){try{var s="",l=null;do s+=xo(o,l),l=o,o=o.return;while(o);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var qa=Object.prototype.hasOwnProperty,Yn=t.unstable_scheduleCallback,Ao=t.unstable_cancelCallback,rc=t.unstable_shouldYield,sc=t.unstable_requestPaint,At=t.unstable_now,ac=t.unstable_getCurrentPriorityLevel,ja=t.unstable_ImmediatePriority,Ja=t.unstable_UserBlockingPriority,Er=t.unstable_NormalPriority,B1=t.unstable_LowPriority,K_=t.unstable_IdlePriority,$1=t.log,G1=t.unstable_setDisableYieldValue,Ka=null,an=null;function Ro(o){if(typeof $1=="function"&&G1(o),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ka,o)}catch{}}var ln=Math.clz32?Math.clz32:z1,H1=Math.log,V1=Math.LN2;function z1(o){return o>>>=0,o===0?32:31-(H1(o)/V1|0)|0}var lc=256,uc=262144,cc=4194304;function Tr(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function fc(o,s,l){var f=o.pendingLanes;if(f===0)return 0;var v=0,_=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var R=f&134217727;return R!==0?(f=R&~_,f!==0?v=Tr(f):(T&=R,T!==0?v=Tr(T):l||(l=R&~o,l!==0&&(v=Tr(l))))):(R=f&~_,R!==0?v=Tr(R):T!==0?v=Tr(T):l||(l=f&~o,l!==0&&(v=Tr(l)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:v}function Ya(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function q1(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y_(){var o=cc;return cc<<=1,(cc&62914560)===0&&(cc=4194304),o}function jh(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function Xa(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function j1(o,s,l,f,v,_){var T=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var R=o.entanglements,k=o.expirationTimes,H=o.hiddenUpdates;for(l=T&~l;0<l;){var X=31-ln(l),te=1<<X;R[X]=0,k[X]=-1;var z=H[X];if(z!==null)for(H[X]=null,X=0;X<z.length;X++){var J=z[X];J!==null&&(J.lane&=-536870913)}l&=~te}f!==0&&X_(o,f,0),_!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=_&~(T&~s))}function X_(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var f=31-ln(s);o.entangledLanes|=s,o.entanglements[f]=o.entanglements[f]|1073741824|l&261930}function W_(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var f=31-ln(l),v=1<<f;v&s|o[f]&s&&(o[f]|=s),l&=~v}}function Q_(o,s){var l=s&-s;return l=(l&42)!==0?1:Jh(l),(l&(o.suspendedLanes|s))!==0?0:l}function Jh(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Kh(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Z_(){var o=Q.p;return o!==0?o:(o=window.event,o===void 0?32:Fw(o.type))}function e0(o,s){var l=Q.p;try{return Q.p=o,s()}finally{Q.p=l}}var Mo=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Mo,Kt="__reactProps$"+Mo,ps="__reactContainer$"+Mo,Yh="__reactEvents$"+Mo,J1="__reactListeners$"+Mo,K1="__reactHandles$"+Mo,t0="__reactResources$"+Mo,Wa="__reactMarker$"+Mo;function Xh(o){delete o[Rt],delete o[Kt],delete o[Yh],delete o[J1],delete o[K1]}function ms(o){var s=o[Rt];if(s)return s;for(var l=o.parentNode;l;){if(s=l[ps]||l[Rt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=ww(o);o!==null;){if(l=o[Rt])return l;o=ww(o)}return s}o=l,l=o.parentNode}return null}function gs(o){if(o=o[Rt]||o[ps]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function Qa(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function vs(o){var s=o[t0];return s||(s=o[t0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(o){o[Wa]=!0}var n0=new Set,i0={};function Cr(o,s){ys(o,s),ys(o+"Capture",s)}function ys(o,s){for(i0[o]=s,o=0;o<s.length;o++)n0.add(s[o])}var Y1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),o0={},r0={};function X1(o){return qa.call(r0,o)?!0:qa.call(o0,o)?!1:Y1.test(o)?r0[o]=!0:(o0[o]=!0,!1)}function dc(o,s,l){if(X1(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function hc(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function $i(o,s,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+f)}}function xn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function s0(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function W1(o,s,l){var f=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(T){l=""+T,_.call(this,T)}}),Object.defineProperty(o,s,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Wh(o){if(!o._valueTracker){var s=s0(o)?"checked":"value";o._valueTracker=W1(o,s,""+o[s])}}function a0(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),f="";return o&&(f=s0(o)?o.checked?"true":"false":o.value),o=f,o!==l?(s.setValue(o),!0):!1}function pc(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Q1=/[\n"\\]/g;function An(o){return o.replace(Q1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Qh(o,s,l,f,v,_,T,R){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),s!=null?T==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+xn(s)):o.value!==""+xn(s)&&(o.value=""+xn(s)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),s!=null?Zh(o,T,xn(s)):l!=null?Zh(o,T,xn(l)):f!=null&&o.removeAttribute("value"),v==null&&_!=null&&(o.defaultChecked=!!_),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+xn(R):o.removeAttribute("name")}function l0(o,s,l,f,v,_,T,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Wh(o);return}l=l!=null?""+xn(l):"",s=s!=null?""+xn(s):l,R||s===o.value||(o.value=s),o.defaultValue=s}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=R?o.checked:!!f,o.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T),Wh(o)}function Zh(o,s,l){s==="number"&&pc(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function _s(o,s,l,f){if(o=o.options,s){s={};for(var v=0;v<l.length;v++)s["$"+l[v]]=!0;for(l=0;l<o.length;l++)v=s.hasOwnProperty("$"+o[l].value),o[l].selected!==v&&(o[l].selected=v),v&&f&&(o[l].defaultSelected=!0)}else{for(l=""+xn(l),s=null,v=0;v<o.length;v++){if(o[v].value===l){o[v].selected=!0,f&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function u0(o,s,l){if(s!=null&&(s=""+xn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+xn(l):""}function c0(o,s,l,f){if(s==null){if(f!=null){if(l!=null)throw Error(i(92));if(de(f)){if(1<f.length)throw Error(i(93));f=f[0]}l=f}l==null&&(l=""),s=l}l=xn(s),o.defaultValue=l,f=o.textContent,f===l&&f!==""&&f!==null&&(o.value=f),Wh(o)}function Ss(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var Z1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function f0(o,s,l){var f=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":f?o.setProperty(s,l):typeof l!="number"||l===0||Z1.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function d0(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var v in s)f=s[v],s.hasOwnProperty(v)&&l[v]!==f&&f0(o,v,f)}else for(var _ in s)s.hasOwnProperty(_)&&f0(o,_,s[_])}function ep(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mc(o){return tO.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Gi(){}var tp=null;function np(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var bs=null,ws=null;function h0(o){var s=gs(o);if(s&&(o=s.stateNode)){var l=o[Kt]||null;e:switch(o=s.stateNode,s.type){case"input":if(Qh(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+An(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var f=l[s];if(f!==o&&f.form===o.form){var v=f[Kt]||null;if(!v)throw Error(i(90));Qh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<l.length;s++)f=l[s],f.form===o.form&&a0(f)}break e;case"textarea":u0(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&_s(o,!!l.multiple,s,!1)}}}var ip=!1;function p0(o,s,l){if(ip)return o(s,l);ip=!0;try{var f=o(s);return f}finally{if(ip=!1,(bs!==null||ws!==null)&&(nf(),bs&&(s=bs,o=ws,ws=bs=null,h0(s),o)))for(s=0;s<o.length;s++)h0(o[s])}}function Za(o,s){var l=o.stateNode;if(l===null)return null;var f=l[Kt]||null;if(f===null)return null;l=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=!1;if(Hi)try{var el={};Object.defineProperty(el,"passive",{get:function(){op=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{op=!1}var No=null,rp=null,gc=null;function m0(){if(gc)return gc;var o,s=rp,l=s.length,f,v="value"in No?No.value:No.textContent,_=v.length;for(o=0;o<l&&s[o]===v[o];o++);var T=l-o;for(f=1;f<=T&&s[l-f]===v[_-f];f++);return gc=v.slice(o,1<f?1-f:void 0)}function vc(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function yc(){return!0}function g0(){return!1}function Yt(o){function s(l,f,v,_,T){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(l=o[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?yc:g0,this.isPropagationStopped=g0,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),s}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=Yt(xr),tl=y({},xr,{view:0,detail:0}),nO=Yt(tl),sp,ap,nl,Sc=y({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==nl&&(nl&&o.type==="mousemove"?(sp=o.screenX-nl.screenX,ap=o.screenY-nl.screenY):ap=sp=0,nl=o),sp)},movementY:function(o){return"movementY"in o?o.movementY:ap}}),v0=Yt(Sc),iO=y({},Sc,{dataTransfer:0}),oO=Yt(iO),rO=y({},tl,{relatedTarget:0}),lp=Yt(rO),sO=y({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),aO=Yt(sO),lO=y({},xr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),uO=Yt(lO),cO=y({},xr,{data:0}),y0=Yt(cO),fO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pO(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=hO[o])?!!s[o]:!1}function up(){return pO}var mO=y({},tl,{key:function(o){if(o.key){var s=fO[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=vc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?dO[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(o){return o.type==="keypress"?vc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?vc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),gO=Yt(mO),vO=y({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=Yt(vO),yO=y({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),_O=Yt(yO),SO=y({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bO=Yt(SO),wO=y({},Sc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),EO=Yt(wO),TO=y({},xr,{newState:0,oldState:0}),CO=Yt(TO),xO=[9,13,27,32],cp=Hi&&"CompositionEvent"in window,il=null;Hi&&"documentMode"in document&&(il=document.documentMode);var AO=Hi&&"TextEvent"in window&&!il,S0=Hi&&(!cp||il&&8<il&&11>=il),b0=" ",w0=!1;function E0(o,s){switch(o){case"keyup":return xO.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Es=!1;function RO(o,s){switch(o){case"compositionend":return T0(s);case"keypress":return s.which!==32?null:(w0=!0,b0);case"textInput":return o=s.data,o===b0&&w0?null:o;default:return null}}function MO(o,s){if(Es)return o==="compositionend"||!cp&&E0(o,s)?(o=m0(),gc=rp=No=null,Es=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return S0&&s.locale!=="ko"?null:s.data;default:return null}}var NO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C0(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!NO[o.type]:s==="textarea"}function x0(o,s,l,f){bs?ws?ws.push(f):ws=[f]:bs=f,s=cf(s,"onChange"),0<s.length&&(l=new _c("onChange","change",null,l,f),o.push({event:l,listeners:s}))}var ol=null,rl=null;function IO(o){lw(o,0)}function bc(o){var s=Qa(o);if(a0(s))return o}function A0(o,s){if(o==="change")return s}var R0=!1;if(Hi){var fp;if(Hi){var dp="oninput"in document;if(!dp){var M0=document.createElement("div");M0.setAttribute("oninput","return;"),dp=typeof M0.oninput=="function"}fp=dp}else fp=!1;R0=fp&&(!document.documentMode||9<document.documentMode)}function N0(){ol&&(ol.detachEvent("onpropertychange",I0),rl=ol=null)}function I0(o){if(o.propertyName==="value"&&bc(rl)){var s=[];x0(s,rl,o,np(o)),p0(IO,s)}}function DO(o,s,l){o==="focusin"?(N0(),ol=s,rl=l,ol.attachEvent("onpropertychange",I0)):o==="focusout"&&N0()}function OO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return bc(rl)}function kO(o,s){if(o==="click")return bc(s)}function PO(o,s){if(o==="input"||o==="change")return bc(s)}function LO(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var un=typeof Object.is=="function"?Object.is:LO;function sl(o,s){if(un(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),f=Object.keys(s);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!qa.call(s,v)||!un(o[v],s[v]))return!1}return!0}function D0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function O0(o,s){var l=D0(o);o=0;for(var f;l;){if(l.nodeType===3){if(f=o+l.textContent.length,o<=s&&f>=s)return{node:l,offset:s-o};o=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=D0(l)}}function k0(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?k0(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function P0(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=pc(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=pc(o.document)}return s}function hp(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var UO=Hi&&"documentMode"in document&&11>=document.documentMode,Ts=null,pp=null,al=null,mp=!1;function L0(o,s,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mp||Ts==null||Ts!==pc(f)||(f=Ts,"selectionStart"in f&&hp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),al&&sl(al,f)||(al=f,f=cf(pp,"onSelect"),0<f.length&&(s=new _c("onSelect","select",null,s,l),o.push({event:s,listeners:f}),s.target=Ts)))}function Ar(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Cs={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionrun:Ar("Transition","TransitionRun"),transitionstart:Ar("Transition","TransitionStart"),transitioncancel:Ar("Transition","TransitionCancel"),transitionend:Ar("Transition","TransitionEnd")},gp={},U0={};Hi&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function Rr(o){if(gp[o])return gp[o];if(!Cs[o])return o;var s=Cs[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in U0)return gp[o]=s[l];return o}var F0=Rr("animationend"),B0=Rr("animationiteration"),$0=Rr("animationstart"),FO=Rr("transitionrun"),BO=Rr("transitionstart"),$O=Rr("transitioncancel"),G0=Rr("transitionend"),H0=new Map,vp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vp.push("scrollEnd");function Xn(o,s){H0.set(o,s),Cr(s,[o])}var wc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Rn=[],xs=0,yp=0;function Ec(){for(var o=xs,s=yp=xs=0;s<o;){var l=Rn[s];Rn[s++]=null;var f=Rn[s];Rn[s++]=null;var v=Rn[s];Rn[s++]=null;var _=Rn[s];if(Rn[s++]=null,f!==null&&v!==null){var T=f.pending;T===null?v.next=v:(v.next=T.next,T.next=v),f.pending=v}_!==0&&V0(l,v,_)}}function Tc(o,s,l,f){Rn[xs++]=o,Rn[xs++]=s,Rn[xs++]=l,Rn[xs++]=f,yp|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function _p(o,s,l,f){return Tc(o,s,l,f),Cc(o)}function Mr(o,s){return Tc(o,null,null,s),Cc(o)}function V0(o,s,l){o.lanes|=l;var f=o.alternate;f!==null&&(f.lanes|=l);for(var v=!1,_=o.return;_!==null;)_.childLanes|=l,f=_.alternate,f!==null&&(f.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(v=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,v&&s!==null&&(v=31-ln(l),o=_.hiddenUpdates,f=o[v],f===null?o[v]=[s]:f.push(s),s.lane=l|536870912),_):null}function Cc(o){if(50<Ml)throw Ml=0,Rm=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var As={};function GO(o,s,l,f){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(o,s,l,f){return new GO(o,s,l,f)}function Sp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Vi(o,s){var l=o.alternate;return l===null?(l=cn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function z0(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function xc(o,s,l,f,v,_){var T=0;if(f=o,typeof o=="function")Sp(o)&&(T=1);else if(typeof o=="string")T=jk(o,l,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case j:return o=cn(31,l,s,v),o.elementType=j,o.lanes=_,o;case x:return Nr(l.children,v,_,s);case A:T=8,v|=24;break;case M:return o=cn(12,l,s,v|2),o.elementType=M,o.lanes=_,o;case L:return o=cn(13,l,s,v),o.elementType=L,o.lanes=_,o;case U:return o=cn(19,l,s,v),o.elementType=U,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:T=10;break e;case I:T=9;break e;case D:T=11;break e;case O:T=14;break e;case q:T=16,f=null;break e}T=29,l=Error(i(130,o===null?"null":typeof o,"")),f=null}return s=cn(T,l,s,v),s.elementType=o,s.type=f,s.lanes=_,s}function Nr(o,s,l,f){return o=cn(7,o,f,s),o.lanes=l,o}function bp(o,s,l){return o=cn(6,o,null,s),o.lanes=l,o}function q0(o){var s=cn(18,null,null,0);return s.stateNode=o,s}function wp(o,s,l){return s=cn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var j0=new WeakMap;function Mn(o,s){if(typeof o=="object"&&o!==null){var l=j0.get(o);return l!==void 0?l:(s={value:o,source:s,stack:oc(s)},j0.set(o,s),s)}return{value:o,source:s,stack:oc(s)}}var Rs=[],Ms=0,Ac=null,ll=0,Nn=[],In=0,Io=null,mi=1,gi="";function zi(o,s){Rs[Ms++]=ll,Rs[Ms++]=Ac,Ac=o,ll=s}function J0(o,s,l){Nn[In++]=mi,Nn[In++]=gi,Nn[In++]=Io,Io=o;var f=mi;o=gi;var v=32-ln(f)-1;f&=~(1<<v),l+=1;var _=32-ln(s)+v;if(30<_){var T=v-v%5;_=(f&(1<<T)-1).toString(32),f>>=T,v-=T,mi=1<<32-ln(s)+v|l<<v|f,gi=_+o}else mi=1<<_|l<<v|f,gi=o}function Ep(o){o.return!==null&&(zi(o,1),J0(o,1,0))}function Tp(o){for(;o===Ac;)Ac=Rs[--Ms],Rs[Ms]=null,ll=Rs[--Ms],Rs[Ms]=null;for(;o===Io;)Io=Nn[--In],Nn[In]=null,gi=Nn[--In],Nn[In]=null,mi=Nn[--In],Nn[In]=null}function K0(o,s){Nn[In++]=mi,Nn[In++]=gi,Nn[In++]=Io,mi=s.id,gi=s.overflow,Io=o}var Mt=null,st=null,Fe=!1,Do=null,Dn=!1,Cp=Error(i(519));function Oo(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(Mn(s,o)),Cp}function Y0(o){var s=o.stateNode,l=o.type,f=o.memoizedProps;switch(s[Rt]=o,s[Kt]=f,l){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(l=0;l<Il.length;l++)Pe(Il[l],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),l0(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),c0(s,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||f.suppressHydrationWarning===!0||dw(s.textContent,l)?(f.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),f.onScroll!=null&&Pe("scroll",s),f.onScrollEnd!=null&&Pe("scrollend",s),f.onClick!=null&&(s.onclick=Gi),s=!0):s=!1,s||Oo(o,!0)}function X0(o){for(Mt=o.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Mt=Mt.return}}function Ns(o){if(o!==Mt)return!1;if(!Fe)return X0(o),Fe=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||Vm(o.type,o.memoizedProps)),l=!l),l&&st&&Oo(o),X0(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));st=bw(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));st=bw(o)}else s===27?(s=st,Jo(o.type)?(o=Km,Km=null,st=o):st=s):st=Mt?kn(o.stateNode.nextSibling):null;return!0}function Ir(){st=Mt=null,Fe=!1}function xp(){var o=Do;return o!==null&&(Zt===null?Zt=o:Zt.push.apply(Zt,o),Do=null),o}function ul(o){Do===null?Do=[o]:Do.push(o)}var Ap=P(null),Dr=null,qi=null;function ko(o,s,l){se(Ap,s._currentValue),s._currentValue=l}function ji(o){o._currentValue=Ap.current,K(Ap)}function Rp(o,s,l){for(;o!==null;){var f=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),o===l)break;o=o.return}}function Mp(o,s,l,f){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var _=v.dependencies;if(_!==null){var T=v.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=v;for(var k=0;k<s.length;k++)if(R.context===s[k]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),Rp(_.return,l,o),f||(T=null);break e}_=R.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(i(341));T.lanes|=l,_=T.alternate,_!==null&&(_.lanes|=l),Rp(T,l,o),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===o){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Is(o,s,l,f){o=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var R=v.type;un(v.pendingProps.value,T.value)||(o!==null?o.push(R):o=[R])}}else if(v===ve.current){if(T=v.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Ll):o=[Ll])}v=v.return}o!==null&&Mp(s,o,l,f),s.flags|=262144}function Rc(o){for(o=o.firstContext;o!==null;){if(!un(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Or(o){Dr=o,qi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Nt(o){return W0(Dr,o)}function Mc(o,s){return Dr===null&&Or(o),W0(o,s)}function W0(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},qi===null){if(o===null)throw Error(i(308));qi=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else qi=qi.next=s;return l}var HO=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,f){o.push(f)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},VO=t.unstable_scheduleCallback,zO=t.unstable_NormalPriority,mt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Np(){return{controller:new HO,data:new Map,refCount:0}}function cl(o){o.refCount--,o.refCount===0&&VO(zO,function(){o.controller.abort()})}var fl=null,Ip=0,Ds=0,Os=null;function qO(o,s){if(fl===null){var l=fl=[];Ip=0,Ds=km(),Os={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Ip++,s.then(Q0,Q0),s}function Q0(){if(--Ip===0&&fl!==null){Os!==null&&(Os.status="fulfilled");var o=fl;fl=null,Ds=0,Os=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function jO(o,s){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return o.then(function(){f.status="fulfilled",f.value=s;for(var v=0;v<l.length;v++)(0,l[v])(s)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var Z0=B.S;B.S=function(o,s){Lb=At(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qO(o,s),Z0!==null&&Z0(o,s)};var kr=P(null);function Dp(){var o=kr.current;return o!==null?o:it.pooledCache}function Nc(o,s){s===null?se(kr,kr.current):se(kr,s.pool)}function eS(){var o=Dp();return o===null?null:{parent:mt._currentValue,pool:o}}var ks=Error(i(460)),Op=Error(i(474)),Ic=Error(i(542)),Dc={then:function(){}};function tS(o){return o=o.status,o==="fulfilled"||o==="rejected"}function nS(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(Gi,Gi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,oS(o),o;default:if(typeof s.status=="string")s.then(Gi,Gi);else{if(o=it,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(f){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=f}},function(f){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,oS(o),o}throw Lr=s,ks}}function Pr(o){try{var s=o._init;return s(o._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Lr=l,ks):l}}var Lr=null;function iS(){if(Lr===null)throw Error(i(459));var o=Lr;return Lr=null,o}function oS(o){if(o===ks||o===Ic)throw Error(i(483))}var Ps=null,dl=0;function Oc(o){var s=dl;return dl+=1,Ps===null&&(Ps=[]),nS(Ps,o,s)}function hl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function kc(o,s){throw s.$$typeof===S?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function rS(o){function s($,F){if(o){var G=$.deletions;G===null?($.deletions=[F],$.flags|=16):G.push(F)}}function l($,F){if(!o)return null;for(;F!==null;)s($,F),F=F.sibling;return null}function f($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function v($,F){return $=Vi($,F),$.index=0,$.sibling=null,$}function _($,F,G){return $.index=G,o?(G=$.alternate,G!==null?(G=G.index,G<F?($.flags|=67108866,F):G):($.flags|=67108866,F)):($.flags|=1048576,F)}function T($){return o&&$.alternate===null&&($.flags|=67108866),$}function R($,F,G,Z){return F===null||F.tag!==6?(F=bp(G,$.mode,Z),F.return=$,F):(F=v(F,G),F.return=$,F)}function k($,F,G,Z){var _e=G.type;return _e===x?X($,F,G.props.children,Z,G.key):F!==null&&(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&Pr(_e)===F.type)?(F=v(F,G.props),hl(F,G),F.return=$,F):(F=xc(G.type,G.key,G.props,null,$.mode,Z),hl(F,G),F.return=$,F)}function H($,F,G,Z){return F===null||F.tag!==4||F.stateNode.containerInfo!==G.containerInfo||F.stateNode.implementation!==G.implementation?(F=wp(G,$.mode,Z),F.return=$,F):(F=v(F,G.children||[]),F.return=$,F)}function X($,F,G,Z,_e){return F===null||F.tag!==7?(F=Nr(G,$.mode,Z,_e),F.return=$,F):(F=v(F,G),F.return=$,F)}function te($,F,G){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=bp(""+F,$.mode,G),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return G=xc(F.type,F.key,F.props,null,$.mode,G),hl(G,F),G.return=$,G;case C:return F=wp(F,$.mode,G),F.return=$,F;case q:return F=Pr(F),te($,F,G)}if(de(F)||re(F))return F=Nr(F,$.mode,G,null),F.return=$,F;if(typeof F.then=="function")return te($,Oc(F),G);if(F.$$typeof===N)return te($,Mc($,F),G);kc($,F)}return null}function z($,F,G,Z){var _e=F!==null?F.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:R($,F,""+G,Z);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===_e?k($,F,G,Z):null;case C:return G.key===_e?H($,F,G,Z):null;case q:return G=Pr(G),z($,F,G,Z)}if(de(G)||re(G))return _e!==null?null:X($,F,G,Z,null);if(typeof G.then=="function")return z($,F,Oc(G),Z);if(G.$$typeof===N)return z($,F,Mc($,G),Z);kc($,G)}return null}function J($,F,G,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return $=$.get(G)||null,R(F,$,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return $=$.get(Z.key===null?G:Z.key)||null,k(F,$,Z,_e);case C:return $=$.get(Z.key===null?G:Z.key)||null,H(F,$,Z,_e);case q:return Z=Pr(Z),J($,F,G,Z,_e)}if(de(Z)||re(Z))return $=$.get(G)||null,X(F,$,Z,_e,null);if(typeof Z.then=="function")return J($,F,G,Oc(Z),_e);if(Z.$$typeof===N)return J($,F,G,Mc(F,Z),_e);kc(F,Z)}return null}function he($,F,G,Z){for(var _e=null,Ve=null,ge=F,Ne=F=0,Ue=null;ge!==null&&Ne<G.length;Ne++){ge.index>Ne?(Ue=ge,ge=null):Ue=ge.sibling;var ze=z($,ge,G[Ne],Z);if(ze===null){ge===null&&(ge=Ue);break}o&&ge&&ze.alternate===null&&s($,ge),F=_(ze,F,Ne),Ve===null?_e=ze:Ve.sibling=ze,Ve=ze,ge=Ue}if(Ne===G.length)return l($,ge),Fe&&zi($,Ne),_e;if(ge===null){for(;Ne<G.length;Ne++)ge=te($,G[Ne],Z),ge!==null&&(F=_(ge,F,Ne),Ve===null?_e=ge:Ve.sibling=ge,Ve=ge);return Fe&&zi($,Ne),_e}for(ge=f(ge);Ne<G.length;Ne++)Ue=J(ge,$,Ne,G[Ne],Z),Ue!==null&&(o&&Ue.alternate!==null&&ge.delete(Ue.key===null?Ne:Ue.key),F=_(Ue,F,Ne),Ve===null?_e=Ue:Ve.sibling=Ue,Ve=Ue);return o&&ge.forEach(function(Qo){return s($,Qo)}),Fe&&zi($,Ne),_e}function Ee($,F,G,Z){if(G==null)throw Error(i(151));for(var _e=null,Ve=null,ge=F,Ne=F=0,Ue=null,ze=G.next();ge!==null&&!ze.done;Ne++,ze=G.next()){ge.index>Ne?(Ue=ge,ge=null):Ue=ge.sibling;var Qo=z($,ge,ze.value,Z);if(Qo===null){ge===null&&(ge=Ue);break}o&&ge&&Qo.alternate===null&&s($,ge),F=_(Qo,F,Ne),Ve===null?_e=Qo:Ve.sibling=Qo,Ve=Qo,ge=Ue}if(ze.done)return l($,ge),Fe&&zi($,Ne),_e;if(ge===null){for(;!ze.done;Ne++,ze=G.next())ze=te($,ze.value,Z),ze!==null&&(F=_(ze,F,Ne),Ve===null?_e=ze:Ve.sibling=ze,Ve=ze);return Fe&&zi($,Ne),_e}for(ge=f(ge);!ze.done;Ne++,ze=G.next())ze=J(ge,$,Ne,ze.value,Z),ze!==null&&(o&&ze.alternate!==null&&ge.delete(ze.key===null?Ne:ze.key),F=_(ze,F,Ne),Ve===null?_e=ze:Ve.sibling=ze,Ve=ze);return o&&ge.forEach(function(iP){return s($,iP)}),Fe&&zi($,Ne),_e}function et($,F,G,Z){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var _e=G.key;F!==null;){if(F.key===_e){if(_e=G.type,_e===x){if(F.tag===7){l($,F.sibling),Z=v(F,G.props.children),Z.return=$,$=Z;break e}}else if(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&Pr(_e)===F.type){l($,F.sibling),Z=v(F,G.props),hl(Z,G),Z.return=$,$=Z;break e}l($,F);break}else s($,F);F=F.sibling}G.type===x?(Z=Nr(G.props.children,$.mode,Z,G.key),Z.return=$,$=Z):(Z=xc(G.type,G.key,G.props,null,$.mode,Z),hl(Z,G),Z.return=$,$=Z)}return T($);case C:e:{for(_e=G.key;F!==null;){if(F.key===_e)if(F.tag===4&&F.stateNode.containerInfo===G.containerInfo&&F.stateNode.implementation===G.implementation){l($,F.sibling),Z=v(F,G.children||[]),Z.return=$,$=Z;break e}else{l($,F);break}else s($,F);F=F.sibling}Z=wp(G,$.mode,Z),Z.return=$,$=Z}return T($);case q:return G=Pr(G),et($,F,G,Z)}if(de(G))return he($,F,G,Z);if(re(G)){if(_e=re(G),typeof _e!="function")throw Error(i(150));return G=_e.call(G),Ee($,F,G,Z)}if(typeof G.then=="function")return et($,F,Oc(G),Z);if(G.$$typeof===N)return et($,F,Mc($,G),Z);kc($,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,F!==null&&F.tag===6?(l($,F.sibling),Z=v(F,G),Z.return=$,$=Z):(l($,F),Z=bp(G,$.mode,Z),Z.return=$,$=Z),T($)):l($,F)}return function($,F,G,Z){try{dl=0;var _e=et($,F,G,Z);return Ps=null,_e}catch(ge){if(ge===ks||ge===Ic)throw ge;var Ve=cn(29,ge,null,$.mode);return Ve.lanes=Z,Ve.return=$,Ve}finally{}}}var Ur=rS(!0),sS=rS(!1),Po=!1;function kp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pp(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Lo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Uo(o,s,l){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Ye&2)!==0){var v=f.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),f.pending=s,s=Cc(o),V0(o,null,l),s}return Tc(o,f,s,l),Cc(o)}function pl(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var f=s.lanes;f&=o.pendingLanes,l|=f,s.lanes=l,W_(o,l)}}function Lp(o,s){var l=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?v=_=T:_=_.next=T,l=l.next}while(l!==null);_===null?v=_=s:_=_.next=s}else v=_=s;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var Up=!1;function ml(){if(Up){var o=Os;if(o!==null)throw o}}function gl(o,s,l,f){Up=!1;var v=o.updateQueue;Po=!1;var _=v.firstBaseUpdate,T=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var k=R,H=k.next;k.next=null,T===null?_=H:T.next=H,T=k;var X=o.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==T&&(R===null?X.firstBaseUpdate=H:R.next=H,X.lastBaseUpdate=k))}if(_!==null){var te=v.baseState;T=0,X=H=k=null,R=_;do{var z=R.lane&-536870913,J=z!==R.lane;if(J?(Le&z)===z:(f&z)===z){z!==0&&z===Ds&&(Up=!0),X!==null&&(X=X.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var he=o,Ee=R;z=s;var et=l;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){te=he.call(et,te,z);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,z=typeof he=="function"?he.call(et,te,z):he,z==null)break e;te=y({},te,z);break e;case 2:Po=!0}}z=R.callback,z!==null&&(o.flags|=64,J&&(o.flags|=8192),J=v.callbacks,J===null?v.callbacks=[z]:J.push(z))}else J={lane:z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(H=X=J,k=te):X=X.next=J,T|=z;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;J=R,R=J.next,J.next=null,v.lastBaseUpdate=J,v.shared.pending=null}}while(!0);X===null&&(k=te),v.baseState=k,v.firstBaseUpdate=H,v.lastBaseUpdate=X,_===null&&(v.shared.lanes=0),Ho|=T,o.lanes=T,o.memoizedState=te}}function aS(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function lS(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)aS(l[o],s)}var Ls=P(null),Pc=P(0);function uS(o,s){o=to,se(Pc,o),se(Ls,s),to=o|s.baseLanes}function Fp(){se(Pc,to),se(Ls,Ls.current)}function Bp(){to=Pc.current,K(Ls),K(Pc)}var fn=P(null),On=null;function Fo(o){var s=o.alternate;se(ht,ht.current&1),se(fn,o),On===null&&(s===null||Ls.current!==null||s.memoizedState!==null)&&(On=o)}function $p(o){se(ht,ht.current),se(fn,o),On===null&&(On=o)}function cS(o){o.tag===22?(se(ht,ht.current),se(fn,o),On===null&&(On=o)):Bo()}function Bo(){se(ht,ht.current),se(fn,fn.current)}function dn(o){K(fn),On===o&&(On=null),K(ht)}var ht=P(0);function Lc(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||jm(l)||Jm(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ji=0,Me=null,Qe=null,gt=null,Uc=!1,Us=!1,Fr=!1,Fc=0,vl=0,Fs=null,JO=0;function ft(){throw Error(i(321))}function Gp(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!un(o[l],s[l]))return!1;return!0}function Hp(o,s,l,f,v,_){return Ji=_,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=o===null||o.memoizedState===null?JS:im,Fr=!1,_=l(f,v),Fr=!1,Us&&(_=dS(s,l,f,v)),fS(o),_}function fS(o){B.H=Sl;var s=Qe!==null&&Qe.next!==null;if(Ji=0,gt=Qe=Me=null,Uc=!1,vl=0,Fs=null,s)throw Error(i(300));o===null||vt||(o=o.dependencies,o!==null&&Rc(o)&&(vt=!0))}function dS(o,s,l,f){Me=o;var v=0;do{if(Us&&(Fs=null),vl=0,Us=!1,25<=v)throw Error(i(301));if(v+=1,gt=Qe=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}B.H=KS,_=s(l,f)}while(Us);return _}function KO(){var o=B.H,s=o.useState()[0];return s=typeof s.then=="function"?yl(s):s,o=o.useState()[0],(Qe!==null?Qe.memoizedState:null)!==o&&(Me.flags|=1024),s}function Vp(){var o=Fc!==0;return Fc=0,o}function zp(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function qp(o){if(Uc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Uc=!1}Ji=0,gt=Qe=Me=null,Us=!1,vl=Fc=0,Fs=null}function $t(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Me.memoizedState=gt=o:gt=gt.next=o,gt}function pt(){if(Qe===null){var o=Me.alternate;o=o!==null?o.memoizedState:null}else o=Qe.next;var s=gt===null?Me.memoizedState:gt.next;if(s!==null)gt=s,Qe=o;else{if(o===null)throw Me.alternate===null?Error(i(467)):Error(i(310));Qe=o,o={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},gt===null?Me.memoizedState=gt=o:gt=gt.next=o}return gt}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(o){var s=vl;return vl+=1,Fs===null&&(Fs=[]),o=nS(Fs,o,s),s=Me,(gt===null?s.memoizedState:gt.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?JS:im),o}function $c(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return yl(o);if(o.$$typeof===N)return Nt(o)}throw Error(i(438,String(o)))}function jp(o){var s=null,l=Me.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var f=Me.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Bc(),Me.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),f=0;f<o;f++)l[f]=Y;return s.index++,l}function Ki(o,s){return typeof s=="function"?s(o):s}function Gc(o){var s=pt();return Jp(s,Qe,o)}function Jp(o,s,l){var f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=l;var v=o.baseQueue,_=f.pending;if(_!==null){if(v!==null){var T=v.next;v.next=_.next,_.next=T}s.baseQueue=v=_,f.pending=null}if(_=o.baseState,v===null)o.memoizedState=_;else{s=v.next;var R=T=null,k=null,H=s,X=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(Le&te)===te:(Ji&te)===te){var z=H.revertLane;if(z===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===Ds&&(X=!0);else if((Ji&z)===z){H=H.next,z===Ds&&(X=!0);continue}else te={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(R=k=te,T=_):k=k.next=te,Me.lanes|=z,Ho|=z;te=H.action,Fr&&l(_,te),_=H.hasEagerState?H.eagerState:l(_,te)}else z={lane:te,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(R=k=z,T=_):k=k.next=z,Me.lanes|=te,Ho|=te;H=H.next}while(H!==null&&H!==s);if(k===null?T=_:k.next=R,!un(_,o.memoizedState)&&(vt=!0,X&&(l=Os,l!==null)))throw l;o.memoizedState=_,o.baseState=T,o.baseQueue=k,f.lastRenderedState=_}return v===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function Kp(o){var s=pt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var f=l.dispatch,v=l.pending,_=s.memoizedState;if(v!==null){l.pending=null;var T=v=v.next;do _=o(_,T.action),T=T.next;while(T!==v);un(_,s.memoizedState)||(vt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,f]}function hS(o,s,l){var f=Me,v=pt(),_=Fe;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var T=!un((Qe||v).memoizedState,l);if(T&&(v.memoizedState=l,vt=!0),v=v.queue,Wp(gS.bind(null,f,v,o),[o]),v.getSnapshot!==s||T||gt!==null&&gt.memoizedState.tag&1){if(f.flags|=2048,Bs(9,{destroy:void 0},mS.bind(null,f,v,l,s),null),it===null)throw Error(i(349));_||(Ji&127)!==0||pS(f,s,l)}return l}function pS(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=Me.updateQueue,s===null?(s=Bc(),Me.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function mS(o,s,l,f){s.value=l,s.getSnapshot=f,vS(s)&&yS(o)}function gS(o,s,l){return l(function(){vS(s)&&yS(o)})}function vS(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!un(o,l)}catch{return!0}}function yS(o){var s=Mr(o,2);s!==null&&en(s,o,2)}function Yp(o){var s=$t();if(typeof o=="function"){var l=o;if(o=l(),Fr){Ro(!0);try{l()}finally{Ro(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:o},s}function _S(o,s,l,f){return o.baseState=l,Jp(o,Qe,typeof f=="function"?f:Ki)}function YO(o,s,l,f,v){if(zc(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};B.T!==null?l(!0):_.isTransition=!1,f(_),l=s.pending,l===null?(_.next=s.pending=_,SS(s,_)):(_.next=l.next,s.pending=l.next=_)}}function SS(o,s){var l=s.action,f=s.payload,v=o.state;if(s.isTransition){var _=B.T,T={};B.T=T;try{var R=l(v,f),k=B.S;k!==null&&k(T,R),bS(o,s,R)}catch(H){Xp(o,s,H)}finally{_!==null&&T.types!==null&&(_.types=T.types),B.T=_}}else try{_=l(v,f),bS(o,s,_)}catch(H){Xp(o,s,H)}}function bS(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){wS(o,s,f)},function(f){return Xp(o,s,f)}):wS(o,s,l)}function wS(o,s,l){s.status="fulfilled",s.value=l,ES(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,SS(o,l)))}function Xp(o,s,l){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=l,ES(s),s=s.next;while(s!==f)}o.action=null}function ES(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function TS(o,s){return s}function CS(o,s){if(Fe){var l=it.formState;if(l!==null){e:{var f=Me;if(Fe){if(st){t:{for(var v=st,_=Dn;v.nodeType!==8;){if(!_){v=null;break t}if(v=kn(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){st=kn(v.nextSibling),f=v.data==="F!";break e}}Oo(f)}f=!1}f&&(s=l[0])}}return l=$t(),l.memoizedState=l.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:TS,lastRenderedState:s},l.queue=f,l=zS.bind(null,Me,f),f.dispatch=l,f=Yp(!1),_=nm.bind(null,Me,!1,f.queue),f=$t(),v={state:s,dispatch:null,action:o,pending:null},f.queue=v,l=YO.bind(null,Me,v,_,l),v.dispatch=l,f.memoizedState=o,[s,l,!1]}function xS(o){var s=pt();return AS(s,Qe,o)}function AS(o,s,l){if(s=Jp(o,s,TS)[0],o=Gc(Ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=yl(s)}catch(T){throw T===ks?Ic:T}else f=s;s=pt();var v=s.queue,_=v.dispatch;return l!==s.memoizedState&&(Me.flags|=2048,Bs(9,{destroy:void 0},XO.bind(null,v,l),null)),[f,_,o]}function XO(o,s){o.action=s}function RS(o){var s=pt(),l=Qe;if(l!==null)return AS(s,l,o);pt(),s=s.memoizedState,l=pt();var f=l.queue.dispatch;return l.memoizedState=o,[s,f,!1]}function Bs(o,s,l,f){return o={tag:o,create:l,deps:f,inst:s,next:null},s=Me.updateQueue,s===null&&(s=Bc(),Me.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(f=l.next,l.next=o,o.next=f,s.lastEffect=o),o}function MS(){return pt().memoizedState}function Hc(o,s,l,f){var v=$t();Me.flags|=o,v.memoizedState=Bs(1|s,{destroy:void 0},l,f===void 0?null:f)}function Vc(o,s,l,f){var v=pt();f=f===void 0?null:f;var _=v.memoizedState.inst;Qe!==null&&f!==null&&Gp(f,Qe.memoizedState.deps)?v.memoizedState=Bs(s,_,l,f):(Me.flags|=o,v.memoizedState=Bs(1|s,_,l,f))}function NS(o,s){Hc(8390656,8,o,s)}function Wp(o,s){Vc(2048,8,o,s)}function WO(o){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=Bc(),Me.updateQueue=s,s.events=[o];else{var l=s.events;l===null?s.events=[o]:l.push(o)}}function IS(o){var s=pt().memoizedState;return WO({ref:s,nextImpl:o}),function(){if((Ye&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function DS(o,s){return Vc(4,2,o,s)}function OS(o,s){return Vc(4,4,o,s)}function kS(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function PS(o,s,l){l=l!=null?l.concat([o]):null,Vc(4,4,kS.bind(null,s,o),l)}function Qp(){}function LS(o,s){var l=pt();s=s===void 0?null:s;var f=l.memoizedState;return s!==null&&Gp(s,f[1])?f[0]:(l.memoizedState=[o,s],o)}function US(o,s){var l=pt();s=s===void 0?null:s;var f=l.memoizedState;if(s!==null&&Gp(s,f[1]))return f[0];if(f=o(),Fr){Ro(!0);try{o()}finally{Ro(!1)}}return l.memoizedState=[f,s],f}function Zp(o,s,l){return l===void 0||(Ji&1073741824)!==0&&(Le&261930)===0?o.memoizedState=s:(o.memoizedState=l,o=Fb(),Me.lanes|=o,Ho|=o,l)}function FS(o,s,l,f){return un(l,s)?l:Ls.current!==null?(o=Zp(o,l,f),un(o,s)||(vt=!0),o):(Ji&42)===0||(Ji&1073741824)!==0&&(Le&261930)===0?(vt=!0,o.memoizedState=l):(o=Fb(),Me.lanes|=o,Ho|=o,s)}function BS(o,s,l,f,v){var _=Q.p;Q.p=_!==0&&8>_?_:8;var T=B.T,R={};B.T=R,nm(o,!1,s,l);try{var k=v(),H=B.S;if(H!==null&&H(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=jO(k,f);_l(o,s,X,mn(o))}else _l(o,s,f,mn(o))}catch(te){_l(o,s,{then:function(){},status:"rejected",reason:te},mn())}finally{Q.p=_,T!==null&&R.types!==null&&(T.types=R.types),B.T=T}}function QO(){}function em(o,s,l,f){if(o.tag!==5)throw Error(i(476));var v=$S(o).queue;BS(o,v,s,ee,l===null?QO:function(){return GS(o),l(f)})}function $S(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ee},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function GS(o){var s=$S(o);s.next===null&&(s=o.alternate.memoizedState),_l(o,s.next.queue,{},mn())}function tm(){return Nt(Ll)}function HS(){return pt().memoizedState}function VS(){return pt().memoizedState}function ZO(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=mn();o=Lo(l);var f=Uo(s,o,l);f!==null&&(en(f,s,l),pl(f,s,l)),s={cache:Np()},o.payload=s;return}s=s.return}}function ek(o,s,l){var f=mn();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zc(o)?qS(s,l):(l=_p(o,s,l,f),l!==null&&(en(l,o,f),jS(l,s,f)))}function zS(o,s,l){var f=mn();_l(o,s,l,f)}function _l(o,s,l,f){var v={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(zc(o))qS(s,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var T=s.lastRenderedState,R=_(T,l);if(v.hasEagerState=!0,v.eagerState=R,un(R,T))return Tc(o,s,v,0),it===null&&Ec(),!1}catch{}finally{}if(l=_p(o,s,v,f),l!==null)return en(l,o,f),jS(l,s,f),!0}return!1}function nm(o,s,l,f){if(f={lane:2,revertLane:km(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},zc(o)){if(s)throw Error(i(479))}else s=_p(o,l,f,2),s!==null&&en(s,o,2)}function zc(o){var s=o.alternate;return o===Me||s!==null&&s===Me}function qS(o,s){Us=Uc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function jS(o,s,l){if((l&4194048)!==0){var f=s.lanes;f&=o.pendingLanes,l|=f,s.lanes=l,W_(o,l)}}var Sl={readContext:Nt,use:$c,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};Sl.useEffectEvent=ft;var JS={readContext:Nt,use:$c,useCallback:function(o,s){return $t().memoizedState=[o,s===void 0?null:s],o},useContext:Nt,useEffect:NS,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Hc(4194308,4,kS.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Hc(4194308,4,o,s)},useInsertionEffect:function(o,s){Hc(4,2,o,s)},useMemo:function(o,s){var l=$t();s=s===void 0?null:s;var f=o();if(Fr){Ro(!0);try{o()}finally{Ro(!1)}}return l.memoizedState=[f,s],f},useReducer:function(o,s,l){var f=$t();if(l!==void 0){var v=l(s);if(Fr){Ro(!0);try{l(s)}finally{Ro(!1)}}}else v=s;return f.memoizedState=f.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},f.queue=o,o=o.dispatch=ek.bind(null,Me,o),[f.memoizedState,o]},useRef:function(o){var s=$t();return o={current:o},s.memoizedState=o},useState:function(o){o=Yp(o);var s=o.queue,l=zS.bind(null,Me,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:Qp,useDeferredValue:function(o,s){var l=$t();return Zp(l,o,s)},useTransition:function(){var o=Yp(!1);return o=BS.bind(null,Me,o.queue,!0,!1),$t().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var f=Me,v=$t();if(Fe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),it===null)throw Error(i(349));(Le&127)!==0||pS(f,s,l)}v.memoizedState=l;var _={value:l,getSnapshot:s};return v.queue=_,NS(gS.bind(null,f,_,o),[o]),f.flags|=2048,Bs(9,{destroy:void 0},mS.bind(null,f,_,l,s),null),l},useId:function(){var o=$t(),s=it.identifierPrefix;if(Fe){var l=gi,f=mi;l=(f&~(1<<32-ln(f)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Fc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=JO++,s="_"+s+"r_"+l.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:tm,useFormState:CS,useActionState:CS,useOptimistic:function(o){var s=$t();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=nm.bind(null,Me,!0,l),l.dispatch=s,[o,s]},useMemoCache:jp,useCacheRefresh:function(){return $t().memoizedState=ZO.bind(null,Me)},useEffectEvent:function(o){var s=$t(),l={impl:o};return s.memoizedState=l,function(){if((Ye&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},im={readContext:Nt,use:$c,useCallback:LS,useContext:Nt,useEffect:Wp,useImperativeHandle:PS,useInsertionEffect:DS,useLayoutEffect:OS,useMemo:US,useReducer:Gc,useRef:MS,useState:function(){return Gc(Ki)},useDebugValue:Qp,useDeferredValue:function(o,s){var l=pt();return FS(l,Qe.memoizedState,o,s)},useTransition:function(){var o=Gc(Ki)[0],s=pt().memoizedState;return[typeof o=="boolean"?o:yl(o),s]},useSyncExternalStore:hS,useId:HS,useHostTransitionStatus:tm,useFormState:xS,useActionState:xS,useOptimistic:function(o,s){var l=pt();return _S(l,Qe,o,s)},useMemoCache:jp,useCacheRefresh:VS};im.useEffectEvent=IS;var KS={readContext:Nt,use:$c,useCallback:LS,useContext:Nt,useEffect:Wp,useImperativeHandle:PS,useInsertionEffect:DS,useLayoutEffect:OS,useMemo:US,useReducer:Kp,useRef:MS,useState:function(){return Kp(Ki)},useDebugValue:Qp,useDeferredValue:function(o,s){var l=pt();return Qe===null?Zp(l,o,s):FS(l,Qe.memoizedState,o,s)},useTransition:function(){var o=Kp(Ki)[0],s=pt().memoizedState;return[typeof o=="boolean"?o:yl(o),s]},useSyncExternalStore:hS,useId:HS,useHostTransitionStatus:tm,useFormState:RS,useActionState:RS,useOptimistic:function(o,s){var l=pt();return Qe!==null?_S(l,Qe,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:jp,useCacheRefresh:VS};KS.useEffectEvent=IS;function om(o,s,l,f){s=o.memoizedState,l=l(f,s),l=l==null?s:y({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var rm={enqueueSetState:function(o,s,l){o=o._reactInternals;var f=mn(),v=Lo(f);v.payload=s,l!=null&&(v.callback=l),s=Uo(o,v,f),s!==null&&(en(s,o,f),pl(s,o,f))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var f=mn(),v=Lo(f);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Uo(o,v,f),s!==null&&(en(s,o,f),pl(s,o,f))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=mn(),f=Lo(l);f.tag=2,s!=null&&(f.callback=s),s=Uo(o,f,l),s!==null&&(en(s,o,l),pl(s,o,l))}};function YS(o,s,l,f,v,_,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,_,T):s.prototype&&s.prototype.isPureReactComponent?!sl(l,f)||!sl(v,_):!0}function XS(o,s,l,f){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,f),s.state!==o&&rm.enqueueReplaceState(s,s.state,null)}function Br(o,s){var l=s;if("ref"in s){l={};for(var f in s)f!=="ref"&&(l[f]=s[f])}if(o=o.defaultProps){l===s&&(l=y({},l));for(var v in o)l[v]===void 0&&(l[v]=o[v])}return l}function WS(o){wc(o)}function QS(o){console.error(o)}function ZS(o){wc(o)}function qc(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function eb(o,s,l){try{var f=o.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function sm(o,s,l){return l=Lo(l),l.tag=3,l.payload={element:null},l.callback=function(){qc(o,s)},l}function tb(o){return o=Lo(o),o.tag=3,o}function nb(o,s,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;o.payload=function(){return v(_)},o.callback=function(){eb(s,l,f)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){eb(s,l,f),typeof v!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function tk(o,s,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=l.alternate,s!==null&&Is(s,l,v,!0),l=fn.current,l!==null){switch(l.tag){case 31:case 13:return On===null?of():l.alternate===null&&dt===0&&(dt=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===Dc?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([f]):s.add(f),Im(o,f,v)),!1;case 22:return l.flags|=65536,f===Dc?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([f]):l.add(f)),Im(o,f,v)),!1}throw Error(i(435,l.tag))}return Im(o,f,v),of(),!1}if(Fe)return s=fn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,f!==Cp&&(o=Error(i(422),{cause:f}),ul(Mn(o,l)))):(f!==Cp&&(s=Error(i(423),{cause:f}),ul(Mn(s,l))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,f=Mn(f,l),v=sm(o.stateNode,f,v),Lp(o,v),dt!==4&&(dt=2)),!1;var _=Error(i(520),{cause:f});if(_=Mn(_,l),Rl===null?Rl=[_]:Rl.push(_),dt!==4&&(dt=2),s===null)return!0;f=Mn(f,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=v&-v,l.lanes|=o,o=sm(l.stateNode,f,o),Lp(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Vo===null||!Vo.has(_))))return l.flags|=65536,v&=-v,l.lanes|=v,v=tb(v),nb(v,o,l,f),Lp(l,v),!1}l=l.return}while(l!==null);return!1}var am=Error(i(461)),vt=!1;function It(o,s,l,f){s.child=o===null?sS(s,null,l,f):Ur(s,o.child,l,f)}function ib(o,s,l,f,v){l=l.render;var _=s.ref;if("ref"in f){var T={};for(var R in f)R!=="ref"&&(T[R]=f[R])}else T=f;return Or(s),f=Hp(o,s,l,T,_,v),R=Vp(),o!==null&&!vt?(zp(o,s,v),Yi(o,s,v)):(Fe&&R&&Ep(s),s.flags|=1,It(o,s,f,v),s.child)}function ob(o,s,l,f,v){if(o===null){var _=l.type;return typeof _=="function"&&!Sp(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,rb(o,s,_,f,v)):(o=xc(l.type,null,f,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!mm(o,v)){var T=_.memoizedProps;if(l=l.compare,l=l!==null?l:sl,l(T,f)&&o.ref===s.ref)return Yi(o,s,v)}return s.flags|=1,o=Vi(_,f),o.ref=s.ref,o.return=s,s.child=o}function rb(o,s,l,f,v){if(o!==null){var _=o.memoizedProps;if(sl(_,f)&&o.ref===s.ref)if(vt=!1,s.pendingProps=f=_,mm(o,v))(o.flags&131072)!==0&&(vt=!0);else return s.lanes=o.lanes,Yi(o,s,v)}return lm(o,s,l,f,v)}function sb(o,s,l,f){var v=f.children,_=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,o!==null){for(f=s.child=o.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,s.child=null;return ab(o,s,_,l,f)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Nc(s,_!==null?_.cachePool:null),_!==null?uS(s,_):Fp(),cS(s);else return f=s.lanes=536870912,ab(o,s,_!==null?_.baseLanes|l:l,l,f)}else _!==null?(Nc(s,_.cachePool),uS(s,_),Bo(),s.memoizedState=null):(o!==null&&Nc(s,null),Fp(),Bo());return It(o,s,v,l),s.child}function bl(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ab(o,s,l,f,v){var _=Dp();return _=_===null?null:{parent:mt._currentValue,pool:_},s.memoizedState={baseLanes:l,cachePool:_},o!==null&&Nc(s,null),Fp(),cS(s),o!==null&&Is(o,s,f,!0),s.childLanes=v,null}function jc(o,s){return s=Kc({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function lb(o,s,l){return Ur(s,o.child,null,l),o=jc(s,s.pendingProps),o.flags|=2,dn(s),s.memoizedState=null,o}function nk(o,s,l){var f=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(Fe){if(f.mode==="hidden")return o=jc(s,f),s.lanes=536870912,bl(null,o);if($p(s),(o=st)?(o=Sw(o,Dn),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Io!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},l=q0(o),l.return=s,s.child=l,Mt=s,st=null)):o=null,o===null)throw Oo(s);return s.lanes=536870912,null}return jc(s,f)}var _=o.memoizedState;if(_!==null){var T=_.dehydrated;if($p(s),v)if(s.flags&256)s.flags&=-257,s=lb(o,s,l);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(vt||Is(o,s,l,!1),v=(l&o.childLanes)!==0,vt||v){if(f=it,f!==null&&(T=Q_(f,l),T!==0&&T!==_.retryLane))throw _.retryLane=T,Mr(o,T),en(f,o,T),am;of(),s=lb(o,s,l)}else o=_.treeContext,st=kn(T.nextSibling),Mt=s,Fe=!0,Do=null,Dn=!1,o!==null&&K0(s,o),s=jc(s,f),s.flags|=4096;return s}return o=Vi(o.child,{mode:f.mode,children:f.children}),o.ref=s.ref,s.child=o,o.return=s,o}function Jc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function lm(o,s,l,f,v){return Or(s),l=Hp(o,s,l,f,void 0,v),f=Vp(),o!==null&&!vt?(zp(o,s,v),Yi(o,s,v)):(Fe&&f&&Ep(s),s.flags|=1,It(o,s,l,v),s.child)}function ub(o,s,l,f,v,_){return Or(s),s.updateQueue=null,l=dS(s,f,l,v),fS(o),f=Vp(),o!==null&&!vt?(zp(o,s,_),Yi(o,s,_)):(Fe&&f&&Ep(s),s.flags|=1,It(o,s,l,_),s.child)}function cb(o,s,l,f,v){if(Or(s),s.stateNode===null){var _=As,T=l.contextType;typeof T=="object"&&T!==null&&(_=Nt(T)),_=new l(f,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=rm,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=f,_.state=s.memoizedState,_.refs={},kp(s),T=l.contextType,_.context=typeof T=="object"&&T!==null?Nt(T):As,_.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(om(s,l,T,f),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&rm.enqueueReplaceState(_,_.state,null),gl(s,f,_,v),ml(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(o===null){_=s.stateNode;var R=s.memoizedProps,k=Br(l,R);_.props=k;var H=_.context,X=l.contextType;T=As,typeof X=="object"&&X!==null&&(T=Nt(X));var te=l.getDerivedStateFromProps;X=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||H!==T)&&XS(s,_,f,T),Po=!1;var z=s.memoizedState;_.state=z,gl(s,f,_,v),ml(),H=s.memoizedState,R||z!==H||Po?(typeof te=="function"&&(om(s,l,te,f),H=s.memoizedState),(k=Po||YS(s,l,k,f,z,H,T))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=H),_.props=f,_.state=H,_.context=T,f=k):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,Pp(o,s),T=s.memoizedProps,X=Br(l,T),_.props=X,te=s.pendingProps,z=_.context,H=l.contextType,k=As,typeof H=="object"&&H!==null&&(k=Nt(H)),R=l.getDerivedStateFromProps,(H=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==te||z!==k)&&XS(s,_,f,k),Po=!1,z=s.memoizedState,_.state=z,gl(s,f,_,v),ml();var J=s.memoizedState;T!==te||z!==J||Po||o!==null&&o.dependencies!==null&&Rc(o.dependencies)?(typeof R=="function"&&(om(s,l,R,f),J=s.memoizedState),(X=Po||YS(s,l,X,f,z,J,k)||o!==null&&o.dependencies!==null&&Rc(o.dependencies))?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,J,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,J,k)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=J),_.props=f,_.state=J,_.context=k,f=X):(typeof _.componentDidUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=1024),f=!1)}return _=f,Jc(o,s),f=(s.flags&128)!==0,_||f?(_=s.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&f?(s.child=Ur(s,o.child,null,v),s.child=Ur(s,null,l,v)):It(o,s,l,v),s.memoizedState=_.state,o=s.child):o=Yi(o,s,v),o}function fb(o,s,l,f){return Ir(),s.flags|=256,It(o,s,l,f),s.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cm(o){return{baseLanes:o,cachePool:eS()}}function fm(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=pn),o}function db(o,s,l){var f=s.pendingProps,v=!1,_=(s.flags&128)!==0,T;if((T=_)||(T=o!==null&&o.memoizedState===null?!1:(ht.current&2)!==0),T&&(v=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,o===null){if(Fe){if(v?Fo(s):Bo(),(o=st)?(o=Sw(o,Dn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Io!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},l=q0(o),l.return=s,s.child=l,Mt=s,st=null)):o=null,o===null)throw Oo(s);return Jm(o)?s.lanes=32:s.lanes=536870912,null}var R=f.children;return f=f.fallback,v?(Bo(),v=s.mode,R=Kc({mode:"hidden",children:R},v),f=Nr(f,v,l,null),R.return=s,f.return=s,R.sibling=f,s.child=R,f=s.child,f.memoizedState=cm(l),f.childLanes=fm(o,T,l),s.memoizedState=um,bl(null,f)):(Fo(s),dm(s,R))}var k=o.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)s.flags&256?(Fo(s),s.flags&=-257,s=hm(o,s,l)):s.memoizedState!==null?(Bo(),s.child=o.child,s.flags|=128,s=null):(Bo(),R=f.fallback,v=s.mode,f=Kc({mode:"visible",children:f.children},v),R=Nr(R,v,l,null),R.flags|=2,f.return=s,R.return=s,f.sibling=R,s.child=f,Ur(s,o.child,null,l),f=s.child,f.memoizedState=cm(l),f.childLanes=fm(o,T,l),s.memoizedState=um,s=bl(null,f));else if(Fo(s),Jm(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var H=T.dgst;T=H,f=Error(i(419)),f.stack="",f.digest=T,ul({value:f,source:null,stack:null}),s=hm(o,s,l)}else if(vt||Is(o,s,l,!1),T=(l&o.childLanes)!==0,vt||T){if(T=it,T!==null&&(f=Q_(T,l),f!==0&&f!==k.retryLane))throw k.retryLane=f,Mr(o,f),en(T,o,f),am;jm(R)||of(),s=hm(o,s,l)}else jm(R)?(s.flags|=192,s.child=o.child,s=null):(o=k.treeContext,st=kn(R.nextSibling),Mt=s,Fe=!0,Do=null,Dn=!1,o!==null&&K0(s,o),s=dm(s,f.children),s.flags|=4096);return s}return v?(Bo(),R=f.fallback,v=s.mode,k=o.child,H=k.sibling,f=Vi(k,{mode:"hidden",children:f.children}),f.subtreeFlags=k.subtreeFlags&65011712,H!==null?R=Vi(H,R):(R=Nr(R,v,l,null),R.flags|=2),R.return=s,f.return=s,f.sibling=R,s.child=f,bl(null,f),f=s.child,R=o.child.memoizedState,R===null?R=cm(l):(v=R.cachePool,v!==null?(k=mt._currentValue,v=v.parent!==k?{parent:k,pool:k}:v):v=eS(),R={baseLanes:R.baseLanes|l,cachePool:v}),f.memoizedState=R,f.childLanes=fm(o,T,l),s.memoizedState=um,bl(o.child,f)):(Fo(s),l=o.child,o=l.sibling,l=Vi(l,{mode:"visible",children:f.children}),l.return=s,l.sibling=null,o!==null&&(T=s.deletions,T===null?(s.deletions=[o],s.flags|=16):T.push(o)),s.child=l,s.memoizedState=null,l)}function dm(o,s){return s=Kc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Kc(o,s){return o=cn(22,o,null,s),o.lanes=0,o}function hm(o,s,l){return Ur(s,o.child,null,l),o=dm(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function hb(o,s,l){o.lanes|=s;var f=o.alternate;f!==null&&(f.lanes|=s),Rp(o.return,s,l)}function pm(o,s,l,f,v,_){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v,treeForkCount:_}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=f,T.tail=l,T.tailMode=v,T.treeForkCount=_)}function pb(o,s,l){var f=s.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var T=ht.current,R=(T&2)!==0;if(R?(T=T&1|2,s.flags|=128):T&=1,se(ht,T),It(o,s,f,l),f=Fe?ll:0,!R&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&hb(o,l,s);else if(o.tag===19)hb(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(l=s.child,v=null;l!==null;)o=l.alternate,o!==null&&Lc(o)===null&&(v=l),l=l.sibling;l=v,l===null?(v=s.child,s.child=null):(v=l.sibling,l.sibling=null),pm(s,!1,v,l,_,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&Lc(o)===null){s.child=v;break}o=v.sibling,v.sibling=l,l=v,v=o}pm(s,!0,l,null,_,f);break;case"together":pm(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Yi(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Ho|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(Is(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=Vi(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=Vi(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function mm(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Rc(o)))}function ik(o,s,l){switch(s.tag){case 3:Je(s,s.stateNode.containerInfo),ko(s,mt,o.memoizedState.cache),Ir();break;case 27:case 5:sn(s);break;case 4:Je(s,s.stateNode.containerInfo);break;case 10:ko(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,$p(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Fo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?db(o,s,l):(Fo(s),o=Yi(o,s,l),o!==null?o.sibling:null);Fo(s);break;case 19:var v=(o.flags&128)!==0;if(f=(l&s.childLanes)!==0,f||(Is(o,s,l,!1),f=(l&s.childLanes)!==0),v){if(f)return pb(o,s,l);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(ht,ht.current),f)break;return null;case 22:return s.lanes=0,sb(o,s,l,s.pendingProps);case 24:ko(s,mt,o.memoizedState.cache)}return Yi(o,s,l)}function mb(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)vt=!0;else{if(!mm(o,l)&&(s.flags&128)===0)return vt=!1,ik(o,s,l);vt=(o.flags&131072)!==0}else vt=!1,Fe&&(s.flags&1048576)!==0&&J0(s,ll,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(o=Pr(s.elementType),s.type=o,typeof o=="function")Sp(o)?(f=Br(o,f),s.tag=1,s=cb(null,s,o,f,l)):(s.tag=0,s=lm(null,s,o,f,l));else{if(o!=null){var v=o.$$typeof;if(v===D){s.tag=11,s=ib(null,s,o,f,l);break e}else if(v===O){s.tag=14,s=ob(null,s,o,f,l);break e}}throw s=ae(o)||o,Error(i(306,s,""))}}return s;case 0:return lm(o,s,s.type,s.pendingProps,l);case 1:return f=s.type,v=Br(f,s.pendingProps),cb(o,s,f,v,l);case 3:e:{if(Je(s,s.stateNode.containerInfo),o===null)throw Error(i(387));f=s.pendingProps;var _=s.memoizedState;v=_.element,Pp(o,s),gl(s,f,null,l);var T=s.memoizedState;if(f=T.cache,ko(s,mt,f),f!==_.cache&&Mp(s,[mt],l,!0),ml(),f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=fb(o,s,f,l);break e}else if(f!==v){v=Mn(Error(i(424)),s),ul(v),s=fb(o,s,f,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(st=kn(o.firstChild),Mt=s,Fe=!0,Do=null,Dn=!0,l=sS(s,null,f,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ir(),f===v){s=Yi(o,s,l);break e}It(o,s,f,l)}s=s.child}return s;case 26:return Jc(o,s),o===null?(l=xw(s.type,null,s.pendingProps,null))?s.memoizedState=l:Fe||(l=s.type,o=s.pendingProps,f=ff(be.current).createElement(l),f[Rt]=s,f[Kt]=o,Dt(f,l,o),Et(f),s.stateNode=f):s.memoizedState=xw(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return sn(s),o===null&&Fe&&(f=s.stateNode=Ew(s.type,s.pendingProps,be.current),Mt=s,Dn=!0,v=st,Jo(s.type)?(Km=v,st=kn(f.firstChild)):st=v),It(o,s,s.pendingProps.children,l),Jc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Fe&&((v=f=st)&&(f=Ok(f,s.type,s.pendingProps,Dn),f!==null?(s.stateNode=f,Mt=s,st=kn(f.firstChild),Dn=!1,v=!0):v=!1),v||Oo(s)),sn(s),v=s.type,_=s.pendingProps,T=o!==null?o.memoizedProps:null,f=_.children,Vm(v,_)?f=null:T!==null&&Vm(v,T)&&(s.flags|=32),s.memoizedState!==null&&(v=Hp(o,s,KO,null,null,l),Ll._currentValue=v),Jc(o,s),It(o,s,f,l),s.child;case 6:return o===null&&Fe&&((o=l=st)&&(l=kk(l,s.pendingProps,Dn),l!==null?(s.stateNode=l,Mt=s,st=null,o=!0):o=!1),o||Oo(s)),null;case 13:return db(o,s,l);case 4:return Je(s,s.stateNode.containerInfo),f=s.pendingProps,o===null?s.child=Ur(s,null,f,l):It(o,s,f,l),s.child;case 11:return ib(o,s,s.type,s.pendingProps,l);case 7:return It(o,s,s.pendingProps,l),s.child;case 8:return It(o,s,s.pendingProps.children,l),s.child;case 12:return It(o,s,s.pendingProps.children,l),s.child;case 10:return f=s.pendingProps,ko(s,s.type,f.value),It(o,s,f.children,l),s.child;case 9:return v=s.type._context,f=s.pendingProps.children,Or(s),v=Nt(v),f=f(v),s.flags|=1,It(o,s,f,l),s.child;case 14:return ob(o,s,s.type,s.pendingProps,l);case 15:return rb(o,s,s.type,s.pendingProps,l);case 19:return pb(o,s,l);case 31:return nk(o,s,l);case 22:return sb(o,s,l,s.pendingProps);case 24:return Or(s),f=Nt(mt),o===null?(v=Dp(),v===null&&(v=it,_=Np(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=l),v=_),s.memoizedState={parent:f,cache:v},kp(s),ko(s,mt,v)):((o.lanes&l)!==0&&(Pp(o,s),gl(s,null,null,l),ml()),v=o.memoizedState,_=s.memoizedState,v.parent!==f?(v={parent:f,cache:f},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),ko(s,mt,f)):(f=_.cache,ko(s,mt,f),f!==v.cache&&Mp(s,[mt],l,!0))),It(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Xi(o){o.flags|=4}function gm(o,s,l,f,v){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(Hb())o.flags|=8192;else throw Lr=Dc,Op}else o.flags&=-16777217}function gb(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Iw(s))if(Hb())o.flags|=8192;else throw Lr=Dc,Op}function Yc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?Y_():536870912,o.lanes|=s,Vs|=s)}function wl(o,s){if(!Fe)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function at(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,f=0;if(s)for(var v=o.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=f,o.childLanes=l,s}function ok(o,s,l){var f=s.pendingProps;switch(Tp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(s),null;case 1:return at(s),null;case 3:return l=s.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ji(mt),Ke(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(Ns(s)?Xi(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xp())),at(s),null;case 26:var v=s.type,_=s.memoizedState;return o===null?(Xi(s),_!==null?(at(s),gb(s,_)):(at(s),gm(s,v,null,f,l))):_?_!==o.memoizedState?(Xi(s),at(s),gb(s,_)):(at(s),s.flags&=-16777217):(o=o.memoizedProps,o!==f&&Xi(s),at(s),gm(s,v,o,f,l)),null;case 27:if(Cn(s),l=be.current,v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&Xi(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return at(s),null}o=le.current,Ns(s)?Y0(s):(o=Ew(v,f,l),s.stateNode=o,Xi(s))}return at(s),null;case 5:if(Cn(s),v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&Xi(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return at(s),null}if(_=le.current,Ns(s))Y0(s);else{var T=ff(be.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?T.createElement("select",{is:f.is}):T.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?T.createElement(v,{is:f.is}):T.createElement(v)}}_[Rt]=s,_[Kt]=f;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=_;e:switch(Dt(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Xi(s)}}return at(s),gm(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,l),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==f&&Xi(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(o=be.current,Ns(s)){if(o=s.stateNode,l=s.memoizedProps,f=null,v=Mt,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}o[Rt]=s,o=!!(o.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||dw(o.nodeValue,l)),o||Oo(s,!0)}else o=ff(o).createTextNode(f),o[Rt]=s,s.stateNode=o}return at(s),null;case 31:if(l=s.memoizedState,o===null||o.memoizedState!==null){if(f=Ns(s),l!==null){if(o===null){if(!f)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Rt]=s}else Ir(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),o=!1}else l=xp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=l),o=!0;if(!o)return s.flags&256?(dn(s),s):(dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return at(s),null;case 13:if(f=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Ns(s),f!==null&&f.dehydrated!==null){if(o===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Rt]=s}else Ir(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),v=!1}else v=xp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(dn(s),s):(dn(s),null)}return dn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=f!==null,o=o!==null&&o.memoizedState!==null,l&&(f=s.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),l!==o&&l&&(s.child.flags|=8192),Yc(s,s.updateQueue),at(s),null);case 4:return Ke(),o===null&&Fm(s.stateNode.containerInfo),at(s),null;case 10:return ji(s.type),at(s),null;case 19:if(K(ht),f=s.memoizedState,f===null)return at(s),null;if(v=(s.flags&128)!==0,_=f.rendering,_===null)if(v)wl(f,!1);else{if(dt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Lc(o),_!==null){for(s.flags|=128,wl(f,!1),o=_.updateQueue,s.updateQueue=o,Yc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)z0(l,o),l=l.sibling;return se(ht,ht.current&1|2),Fe&&zi(s,f.treeForkCount),s.child}o=o.sibling}f.tail!==null&&At()>ef&&(s.flags|=128,v=!0,wl(f,!1),s.lanes=4194304)}else{if(!v)if(o=Lc(_),o!==null){if(s.flags|=128,v=!0,o=o.updateQueue,s.updateQueue=o,Yc(s,o),wl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Fe)return at(s),null}else 2*At()-f.renderingStartTime>ef&&l!==536870912&&(s.flags|=128,v=!0,wl(f,!1),s.lanes=4194304);f.isBackwards?(_.sibling=s.child,s.child=_):(o=f.last,o!==null?o.sibling=_:s.child=_,f.last=_)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=At(),o.sibling=null,l=ht.current,se(ht,v?l&1|2:l&1),Fe&&zi(s,f.treeForkCount),o):(at(s),null);case 22:case 23:return dn(s),Bp(),f=s.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(l&536870912)!==0&&(s.flags&128)===0&&(at(s),s.subtreeFlags&6&&(s.flags|=8192)):at(s),l=s.updateQueue,l!==null&&Yc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==l&&(s.flags|=2048),o!==null&&K(kr),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ji(mt),at(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function rk(o,s){switch(Tp(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return ji(mt),Ke(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Cn(s),null;case 31:if(s.memoizedState!==null){if(dn(s),s.alternate===null)throw Error(i(340));Ir()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(dn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ir()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return K(ht),null;case 4:return Ke(),null;case 10:return ji(s.type),null;case 22:case 23:return dn(s),Bp(),o!==null&&K(kr),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return ji(mt),null;case 25:return null;default:return null}}function vb(o,s){switch(Tp(s),s.tag){case 3:ji(mt),Ke();break;case 26:case 27:case 5:Cn(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&dn(s);break;case 13:dn(s);break;case 19:K(ht);break;case 10:ji(s.type);break;case 22:case 23:dn(s),Bp(),o!==null&&K(kr);break;case 24:ji(mt)}}function El(o,s){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&o)===o){f=void 0;var _=l.create,T=l.inst;f=_(),T.destroy=f}l=l.next}while(l!==v)}}catch(R){We(s,s.return,R)}}function $o(o,s,l){try{var f=s.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&o)===o){var T=f.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,v=s;var k=l,H=R;try{H()}catch(X){We(v,k,X)}}}f=f.next}while(f!==_)}}catch(X){We(s,s.return,X)}}function yb(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{lS(s,l)}catch(f){We(o,o.return,f)}}}function _b(o,s,l){l.props=Br(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(f){We(o,s,f)}}function Tl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof l=="function"?o.refCleanup=l(f):l.current=f}}catch(v){We(o,s,v)}}function vi(o,s){var l=o.ref,f=o.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){We(o,s,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){We(o,s,v)}else l.current=null}function Sb(o){var s=o.type,l=o.memoizedProps,f=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){We(o,o.return,v)}}function vm(o,s,l){try{var f=o.stateNode;Ak(f,o.type,l,s),f[Kt]=s}catch(v){We(o,o.return,v)}}function bb(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Jo(o.type)||o.tag===4}function ym(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||bb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Jo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function _m(o,s,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Gi));else if(f!==4&&(f===27&&Jo(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(_m(o,s,l),o=o.sibling;o!==null;)_m(o,s,l),o=o.sibling}function Xc(o,s,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(f!==4&&(f===27&&Jo(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(Xc(o,s,l),o=o.sibling;o!==null;)Xc(o,s,l),o=o.sibling}function wb(o){var s=o.stateNode,l=o.memoizedProps;try{for(var f=o.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);Dt(s,f,l),s[Rt]=o,s[Kt]=l}catch(_){We(o,o.return,_)}}var Wi=!1,yt=!1,Sm=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function sk(o,s){if(o=o.containerInfo,Gm=yf,o=P0(o),hp(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var T=0,R=-1,k=-1,H=0,X=0,te=o,z=null;t:for(;;){for(var J;te!==l||v!==0&&te.nodeType!==3||(R=T+v),te!==_||f!==0&&te.nodeType!==3||(k=T+f),te.nodeType===3&&(T+=te.nodeValue.length),(J=te.firstChild)!==null;)z=te,te=J;for(;;){if(te===o)break t;if(z===l&&++H===v&&(R=T),z===_&&++X===f&&(k=T),(J=te.nextSibling)!==null)break;te=z,z=te.parentNode}te=J}l=R===-1||k===-1?null:{start:R,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hm={focusedElem:o,selectionRange:l},yf=!1,Tt=s;Tt!==null;)if(s=Tt,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Tt=o;else for(;Tt!==null;){switch(s=Tt,_=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(l=0;l<o.length;l++)v=o[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,v=_.memoizedProps,_=_.memoizedState,f=l.stateNode;try{var he=Br(l.type,v);o=f.getSnapshotBeforeUpdate(he,_),f.__reactInternalSnapshotBeforeUpdate=o}catch(Ee){We(l,l.return,Ee)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)qm(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":qm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,Tt=o;break}Tt=s.return}}function Tb(o,s,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Zi(o,l),f&4&&El(5,l);break;case 1:if(Zi(o,l),f&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(T){We(l,l.return,T)}else{var v=Br(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(v,s,o.__reactInternalSnapshotBeforeUpdate)}catch(T){We(l,l.return,T)}}f&64&&yb(l),f&512&&Tl(l,l.return);break;case 3:if(Zi(o,l),f&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{lS(o,s)}catch(T){We(l,l.return,T)}}break;case 27:s===null&&f&4&&wb(l);case 26:case 5:Zi(o,l),s===null&&f&4&&Sb(l),f&512&&Tl(l,l.return);break;case 12:Zi(o,l);break;case 31:Zi(o,l),f&4&&Ab(o,l);break;case 13:Zi(o,l),f&4&&Rb(o,l),f&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=mk.bind(null,l),Pk(o,l))));break;case 22:if(f=l.memoizedState!==null||Wi,!f){s=s!==null&&s.memoizedState!==null||yt,v=Wi;var _=yt;Wi=f,(yt=s)&&!_?eo(o,l,(l.subtreeFlags&8772)!==0):Zi(o,l),Wi=v,yt=_}break;case 30:break;default:Zi(o,l)}}function Cb(o){var s=o.alternate;s!==null&&(o.alternate=null,Cb(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Xh(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ct=null,Xt=!1;function Qi(o,s,l){for(l=l.child;l!==null;)xb(o,s,l),l=l.sibling}function xb(o,s,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ka,l)}catch{}switch(l.tag){case 26:yt||vi(l,s),Qi(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:yt||vi(l,s);var f=ct,v=Xt;Jo(l.type)&&(ct=l.stateNode,Xt=!1),Qi(o,s,l),Ol(l.stateNode),ct=f,Xt=v;break;case 5:yt||vi(l,s);case 6:if(f=ct,v=Xt,ct=null,Qi(o,s,l),ct=f,Xt=v,ct!==null)if(Xt)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(l.stateNode)}catch(_){We(l,s,_)}else try{ct.removeChild(l.stateNode)}catch(_){We(l,s,_)}break;case 18:ct!==null&&(Xt?(o=ct,yw(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Ws(o)):yw(ct,l.stateNode));break;case 4:f=ct,v=Xt,ct=l.stateNode.containerInfo,Xt=!0,Qi(o,s,l),ct=f,Xt=v;break;case 0:case 11:case 14:case 15:$o(2,l,s),yt||$o(4,l,s),Qi(o,s,l);break;case 1:yt||(vi(l,s),f=l.stateNode,typeof f.componentWillUnmount=="function"&&_b(l,s,f)),Qi(o,s,l);break;case 21:Qi(o,s,l);break;case 22:yt=(f=yt)||l.memoizedState!==null,Qi(o,s,l),yt=f;break;default:Qi(o,s,l)}}function Ab(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Ws(o)}catch(l){We(s,s.return,l)}}}function Rb(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ws(o)}catch(l){We(s,s.return,l)}}function ak(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Eb),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Eb),s;default:throw Error(i(435,o.tag))}}function Wc(o,s){var l=ak(o);s.forEach(function(f){if(!l.has(f)){l.add(f);var v=gk.bind(null,o,f);f.then(v,v)}})}function Wt(o,s){var l=s.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],_=o,T=s,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(Jo(R.type)){ct=R.stateNode,Xt=!1;break e}break;case 5:ct=R.stateNode,Xt=!1;break e;case 3:case 4:ct=R.stateNode.containerInfo,Xt=!0;break e}R=R.return}if(ct===null)throw Error(i(160));xb(_,T,v),ct=null,Xt=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Mb(s,o),s=s.sibling}var Wn=null;function Mb(o,s){var l=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Wt(s,o),Qt(o),f&4&&($o(3,o,o.return),El(3,o),$o(5,o,o.return));break;case 1:Wt(s,o),Qt(o),f&512&&(yt||l===null||vi(l,l.return)),f&64&&Wi&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=Wn;if(Wt(s,o),Qt(o),f&512&&(yt||l===null||vi(l,l.return)),f&4){var _=l!==null?l.memoizedState:null;if(f=o.memoizedState,l===null)if(f===null)if(o.stateNode===null){e:{f=o.type,l=o.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Wa]||_[Rt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Dt(_,f,l),_[Rt]=o,Et(_),f=_;break e;case"link":var T=Mw("link","href",v).get(f+(l.href||""));if(T){for(var R=0;R<T.length;R++)if(_=T[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(R,1);break t}}_=v.createElement(f),Dt(_,f,l),v.head.appendChild(_);break;case"meta":if(T=Mw("meta","content",v).get(f+(l.content||""))){for(R=0;R<T.length;R++)if(_=T[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(R,1);break t}}_=v.createElement(f),Dt(_,f,l),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Rt]=o,Et(_),f=_}o.stateNode=f}else Nw(v,o.type,o.stateNode);else o.stateNode=Rw(v,f,o.memoizedProps);else _!==f?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,f===null?Nw(v,o.type,o.stateNode):Rw(v,f,o.memoizedProps)):f===null&&o.stateNode!==null&&vm(o,o.memoizedProps,l.memoizedProps)}break;case 27:Wt(s,o),Qt(o),f&512&&(yt||l===null||vi(l,l.return)),l!==null&&f&4&&vm(o,o.memoizedProps,l.memoizedProps);break;case 5:if(Wt(s,o),Qt(o),f&512&&(yt||l===null||vi(l,l.return)),o.flags&32){v=o.stateNode;try{Ss(v,"")}catch(he){We(o,o.return,he)}}f&4&&o.stateNode!=null&&(v=o.memoizedProps,vm(o,v,l!==null?l.memoizedProps:v)),f&1024&&(Sm=!0);break;case 6:if(Wt(s,o),Qt(o),f&4){if(o.stateNode===null)throw Error(i(162));f=o.memoizedProps,l=o.stateNode;try{l.nodeValue=f}catch(he){We(o,o.return,he)}}break;case 3:if(pf=null,v=Wn,Wn=df(s.containerInfo),Wt(s,o),Wn=v,Qt(o),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Ws(s.containerInfo)}catch(he){We(o,o.return,he)}Sm&&(Sm=!1,Nb(o));break;case 4:f=Wn,Wn=df(o.stateNode.containerInfo),Wt(s,o),Qt(o),Wn=f;break;case 12:Wt(s,o),Qt(o);break;case 31:Wt(s,o),Qt(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Wc(o,f)));break;case 13:Wt(s,o),Qt(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Zc=At()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Wc(o,f)));break;case 22:v=o.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,H=Wi,X=yt;if(Wi=H||v,yt=X||k,Wt(s,o),yt=X,Wi=H,Qt(o),f&8192)e:for(s=o.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(l===null||k||Wi||yt||$r(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){k=l=s;try{if(_=k.stateNode,v)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=k.stateNode;var te=k.memoizedProps.style,z=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(he){We(k,k.return,he)}}}else if(s.tag===6){if(l===null){k=s;try{k.stateNode.nodeValue=v?"":k.memoizedProps}catch(he){We(k,k.return,he)}}}else if(s.tag===18){if(l===null){k=s;try{var J=k.stateNode;v?_w(J,!0):_w(k.stateNode,!1)}catch(he){We(k,k.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=o.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Wc(o,l))));break;case 19:Wt(s,o),Qt(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Wc(o,f)));break;case 30:break;case 21:break;default:Wt(s,o),Qt(o)}}function Qt(o){var s=o.flags;if(s&2){try{for(var l,f=o.return;f!==null;){if(bb(f)){l=f;break}f=f.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,_=ym(o);Xc(o,_,v);break;case 5:var T=l.stateNode;l.flags&32&&(Ss(T,""),l.flags&=-33);var R=ym(o);Xc(o,R,T);break;case 3:case 4:var k=l.stateNode.containerInfo,H=ym(o);_m(o,H,k);break;default:throw Error(i(161))}}catch(X){We(o,o.return,X)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Nb(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Nb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function Zi(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Tb(o,s.alternate,s),s=s.sibling}function $r(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:$o(4,s,s.return),$r(s);break;case 1:vi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&_b(s,s.return,l),$r(s);break;case 27:Ol(s.stateNode);case 26:case 5:vi(s,s.return),$r(s);break;case 22:s.memoizedState===null&&$r(s);break;case 30:$r(s);break;default:$r(s)}o=o.sibling}}function eo(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,v=o,_=s,T=_.flags;switch(_.tag){case 0:case 11:case 15:eo(v,_,l),El(4,_);break;case 1:if(eo(v,_,l),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(H){We(f,f.return,H)}if(f=_,v=f.updateQueue,v!==null){var R=f.stateNode;try{var k=v.shared.hiddenCallbacks;if(k!==null)for(v.shared.hiddenCallbacks=null,v=0;v<k.length;v++)aS(k[v],R)}catch(H){We(f,f.return,H)}}l&&T&64&&yb(_),Tl(_,_.return);break;case 27:wb(_);case 26:case 5:eo(v,_,l),l&&f===null&&T&4&&Sb(_),Tl(_,_.return);break;case 12:eo(v,_,l);break;case 31:eo(v,_,l),l&&T&4&&Ab(v,_);break;case 13:eo(v,_,l),l&&T&4&&Rb(v,_);break;case 22:_.memoizedState===null&&eo(v,_,l),Tl(_,_.return);break;case 30:break;default:eo(v,_,l)}s=s.sibling}}function bm(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&cl(l))}function wm(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&cl(o))}function Qn(o,s,l,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ib(o,s,l,f),s=s.sibling}function Ib(o,s,l,f){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Qn(o,s,l,f),v&2048&&El(9,s);break;case 1:Qn(o,s,l,f);break;case 3:Qn(o,s,l,f),v&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&cl(o)));break;case 12:if(v&2048){Qn(o,s,l,f),o=s.stateNode;try{var _=s.memoizedProps,T=_.id,R=_.onPostCommit;typeof R=="function"&&R(T,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(k){We(s,s.return,k)}}else Qn(o,s,l,f);break;case 31:Qn(o,s,l,f);break;case 13:Qn(o,s,l,f);break;case 23:break;case 22:_=s.stateNode,T=s.alternate,s.memoizedState!==null?_._visibility&2?Qn(o,s,l,f):Cl(o,s):_._visibility&2?Qn(o,s,l,f):(_._visibility|=2,$s(o,s,l,f,(s.subtreeFlags&10256)!==0||!1)),v&2048&&bm(T,s);break;case 24:Qn(o,s,l,f),v&2048&&wm(s.alternate,s);break;default:Qn(o,s,l,f)}}function $s(o,s,l,f,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=o,T=s,R=l,k=f,H=T.flags;switch(T.tag){case 0:case 11:case 15:$s(_,T,R,k,v),El(8,T);break;case 23:break;case 22:var X=T.stateNode;T.memoizedState!==null?X._visibility&2?$s(_,T,R,k,v):Cl(_,T):(X._visibility|=2,$s(_,T,R,k,v)),v&&H&2048&&bm(T.alternate,T);break;case 24:$s(_,T,R,k,v),v&&H&2048&&wm(T.alternate,T);break;default:$s(_,T,R,k,v)}s=s.sibling}}function Cl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,f=s,v=f.flags;switch(f.tag){case 22:Cl(l,f),v&2048&&bm(f.alternate,f);break;case 24:Cl(l,f),v&2048&&wm(f.alternate,f);break;default:Cl(l,f)}s=s.sibling}}var xl=8192;function Gs(o,s,l){if(o.subtreeFlags&xl)for(o=o.child;o!==null;)Db(o,s,l),o=o.sibling}function Db(o,s,l){switch(o.tag){case 26:Gs(o,s,l),o.flags&xl&&o.memoizedState!==null&&Jk(l,Wn,o.memoizedState,o.memoizedProps);break;case 5:Gs(o,s,l);break;case 3:case 4:var f=Wn;Wn=df(o.stateNode.containerInfo),Gs(o,s,l),Wn=f;break;case 22:o.memoizedState===null&&(f=o.alternate,f!==null&&f.memoizedState!==null?(f=xl,xl=16777216,Gs(o,s,l),xl=f):Gs(o,s,l));break;default:Gs(o,s,l)}}function Ob(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Al(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];Tt=f,Pb(f,o)}Ob(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)kb(o),o=o.sibling}function kb(o){switch(o.tag){case 0:case 11:case 15:Al(o),o.flags&2048&&$o(9,o,o.return);break;case 3:Al(o);break;case 12:Al(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Qc(o)):Al(o);break;default:Al(o)}}function Qc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];Tt=f,Pb(f,o)}Ob(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:$o(8,s,s.return),Qc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Qc(s));break;default:Qc(s)}o=o.sibling}}function Pb(o,s){for(;Tt!==null;){var l=Tt;switch(l.tag){case 0:case 11:case 15:$o(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:cl(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Tt=f;else e:for(l=o;Tt!==null;){f=Tt;var v=f.sibling,_=f.return;if(Cb(f),f===l){Tt=null;break e}if(v!==null){v.return=_,Tt=v;break e}Tt=_}}}var lk={getCacheForType:function(o){var s=Nt(mt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l},cacheSignal:function(){return Nt(mt).controller.signal}},uk=typeof WeakMap=="function"?WeakMap:Map,Ye=0,it=null,ke=null,Le=0,Xe=0,hn=null,Go=!1,Hs=!1,Em=!1,to=0,dt=0,Ho=0,Gr=0,Tm=0,pn=0,Vs=0,Rl=null,Zt=null,Cm=!1,Zc=0,Lb=0,ef=1/0,tf=null,Vo=null,St=0,zo=null,zs=null,no=0,xm=0,Am=null,Ub=null,Ml=0,Rm=null;function mn(){return(Ye&2)!==0&&Le!==0?Le&-Le:B.T!==null?km():Z_()}function Fb(){if(pn===0)if((Le&536870912)===0||Fe){var o=uc;uc<<=1,(uc&3932160)===0&&(uc=262144),pn=o}else pn=536870912;return o=fn.current,o!==null&&(o.flags|=32),pn}function en(o,s,l){(o===it&&(Xe===2||Xe===9)||o.cancelPendingCommit!==null)&&(qs(o,0),qo(o,Le,pn,!1)),Xa(o,l),((Ye&2)===0||o!==it)&&(o===it&&((Ye&2)===0&&(Gr|=l),dt===4&&qo(o,Le,pn,!1)),yi(o))}function Bb(o,s,l){if((Ye&6)!==0)throw Error(i(327));var f=!l&&(s&127)===0&&(s&o.expiredLanes)===0||Ya(o,s),v=f?dk(o,s):Nm(o,s,!0),_=f;do{if(v===0){Hs&&!f&&qo(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!ck(l)){v=Nm(o,s,!1),_=!1;continue}if(v===2){if(_=s,o.errorRecoveryDisabledLanes&_)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var R=o;v=Rl;var k=R.current.memoizedState.isDehydrated;if(k&&(qs(R,T).flags|=256),T=Nm(R,T,!1),T!==2){if(Em&&!k){R.errorRecoveryDisabledLanes|=_,Gr|=_,v=4;break e}_=Zt,Zt=v,_!==null&&(Zt===null?Zt=_:Zt.push.apply(Zt,_))}v=T}if(_=!1,v!==2)continue}}if(v===1){qs(o,0),qo(o,s,0,!0);break}e:{switch(f=o,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:qo(f,s,pn,!Go);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=Zc+300-At(),10<v)){if(qo(f,s,pn,!Go),fc(f,0,!0)!==0)break e;no=s,f.timeoutHandle=gw($b.bind(null,f,l,Zt,tf,Cm,s,pn,Gr,Vs,Go,_,"Throttled",-0,0),v);break e}$b(f,l,Zt,tf,Cm,s,pn,Gr,Vs,Go,_,null,-0,0)}}break}while(!0);yi(o)}function $b(o,s,l,f,v,_,T,R,k,H,X,te,z,J){if(o.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gi},Db(s,_,te);var he=(_&62914560)===_?Zc-At():(_&4194048)===_?Lb-At():0;if(he=Kk(te,he),he!==null){no=_,o.cancelPendingCommit=he(Kb.bind(null,o,s,_,l,f,v,T,R,k,X,te,null,z,J)),qo(o,_,T,!H);return}}Kb(o,s,_,l,f,v,T,R,k)}function ck(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],_=v.getSnapshot;v=v.value;try{if(!un(_(),v))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qo(o,s,l,f){s&=~Tm,s&=~Gr,o.suspendedLanes|=s,o.pingedLanes&=~s,f&&(o.warmLanes|=s),f=o.expirationTimes;for(var v=s;0<v;){var _=31-ln(v),T=1<<_;f[_]=-1,v&=~T}l!==0&&X_(o,l,s)}function nf(){return(Ye&6)===0?(Nl(0),!1):!0}function Mm(){if(ke!==null){if(Xe===0)var o=ke.return;else o=ke,qi=Dr=null,qp(o),Ps=null,dl=0,o=ke;for(;o!==null;)vb(o.alternate,o),o=o.return;ke=null}}function qs(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,Nk(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),no=0,Mm(),it=o,ke=l=Vi(o.current,null),Le=s,Xe=0,hn=null,Go=!1,Hs=Ya(o,s),Em=!1,Vs=pn=Tm=Gr=Ho=dt=0,Zt=Rl=null,Cm=!1,(s&8)!==0&&(s|=s&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=s;0<f;){var v=31-ln(f),_=1<<v;s|=o[v],f&=~_}return to=s,Ec(),l}function Gb(o,s){Me=null,B.H=Sl,s===ks||s===Ic?(s=iS(),Xe=3):s===Op?(s=iS(),Xe=4):Xe=s===am?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,hn=s,ke===null&&(dt=1,qc(o,Mn(s,o.current)))}function Hb(){var o=fn.current;return o===null?!0:(Le&4194048)===Le?On===null:(Le&62914560)===Le||(Le&536870912)!==0?o===On:!1}function Vb(){var o=B.H;return B.H=Sl,o===null?Sl:o}function zb(){var o=B.A;return B.A=lk,o}function of(){dt=4,Go||(Le&4194048)!==Le&&fn.current!==null||(Hs=!0),(Ho&134217727)===0&&(Gr&134217727)===0||it===null||qo(it,Le,pn,!1)}function Nm(o,s,l){var f=Ye;Ye|=2;var v=Vb(),_=zb();(it!==o||Le!==s)&&(tf=null,qs(o,s)),s=!1;var T=dt;e:do try{if(Xe!==0&&ke!==null){var R=ke,k=hn;switch(Xe){case 8:Mm(),T=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(s=!0);var H=Xe;if(Xe=0,hn=null,js(o,R,k,H),l&&Hs){T=0;break e}break;default:H=Xe,Xe=0,hn=null,js(o,R,k,H)}}fk(),T=dt;break}catch(X){Gb(o,X)}while(!0);return s&&o.shellSuspendCounter++,qi=Dr=null,Ye=f,B.H=v,B.A=_,ke===null&&(it=null,Le=0,Ec()),T}function fk(){for(;ke!==null;)qb(ke)}function dk(o,s){var l=Ye;Ye|=2;var f=Vb(),v=zb();it!==o||Le!==s?(tf=null,ef=At()+500,qs(o,s)):Hs=Ya(o,s);e:do try{if(Xe!==0&&ke!==null){s=ke;var _=hn;t:switch(Xe){case 1:Xe=0,hn=null,js(o,s,_,1);break;case 2:case 9:if(tS(_)){Xe=0,hn=null,jb(s);break}s=function(){Xe!==2&&Xe!==9||it!==o||(Xe=7),yi(o)},_.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:tS(_)?(Xe=0,hn=null,jb(s)):(Xe=0,hn=null,js(o,s,_,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var R=ke;if(T?Iw(T):R.stateNode.complete){Xe=0,hn=null;var k=R.sibling;if(k!==null)ke=k;else{var H=R.return;H!==null?(ke=H,rf(H)):ke=null}break t}}Xe=0,hn=null,js(o,s,_,5);break;case 6:Xe=0,hn=null,js(o,s,_,6);break;case 8:Mm(),dt=6;break e;default:throw Error(i(462))}}hk();break}catch(X){Gb(o,X)}while(!0);return qi=Dr=null,B.H=f,B.A=v,Ye=l,ke!==null?0:(it=null,Le=0,Ec(),dt)}function hk(){for(;ke!==null&&!rc();)qb(ke)}function qb(o){var s=mb(o.alternate,o,to);o.memoizedProps=o.pendingProps,s===null?rf(o):ke=s}function jb(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=ub(l,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=ub(l,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:qp(s);default:vb(l,s),s=ke=z0(s,to),s=mb(l,s,to)}o.memoizedProps=o.pendingProps,s===null?rf(o):ke=s}function js(o,s,l,f){qi=Dr=null,qp(s),Ps=null,dl=0;var v=s.return;try{if(tk(o,v,s,l,Le)){dt=1,qc(o,Mn(l,o.current)),ke=null;return}}catch(_){if(v!==null)throw ke=v,_;dt=1,qc(o,Mn(l,o.current)),ke=null;return}s.flags&32768?(Fe||f===1?o=!0:Hs||(Le&536870912)!==0?o=!1:(Go=o=!0,(f===2||f===9||f===3||f===6)&&(f=fn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Jb(s,o)):rf(s)}function rf(o){var s=o;do{if((s.flags&32768)!==0){Jb(s,Go);return}o=s.return;var l=ok(s.alternate,s,to);if(l!==null){ke=l;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=o}while(s!==null);dt===0&&(dt=5)}function Jb(o,s){do{var l=rk(o.alternate,o);if(l!==null){l.flags&=32767,ke=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){ke=o;return}ke=o=l}while(o!==null);dt=6,ke=null}function Kb(o,s,l,f,v,_,T,R,k){o.cancelPendingCommit=null;do sf();while(St!==0);if((Ye&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=yp,j1(o,l,_,T,R,k),o===it&&(ke=it=null,Le=0),zs=s,zo=o,no=l,xm=_,Am=v,Ub=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,vk(Er,function(){return Zb(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,v=Q.p,Q.p=2,T=Ye,Ye|=4;try{sk(o,s,l)}finally{Ye=T,Q.p=v,B.T=f}}St=1,Yb(),Xb(),Wb()}}function Yb(){if(St===1){St=0;var o=zo,s=zs,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var f=Q.p;Q.p=2;var v=Ye;Ye|=4;try{Mb(s,o);var _=Hm,T=P0(o.containerInfo),R=_.focusedElem,k=_.selectionRange;if(T!==R&&R&&R.ownerDocument&&k0(R.ownerDocument.documentElement,R)){if(k!==null&&hp(R)){var H=k.start,X=k.end;if(X===void 0&&(X=H),"selectionStart"in R)R.selectionStart=H,R.selectionEnd=Math.min(X,R.value.length);else{var te=R.ownerDocument||document,z=te&&te.defaultView||window;if(z.getSelection){var J=z.getSelection(),he=R.textContent.length,Ee=Math.min(k.start,he),et=k.end===void 0?Ee:Math.min(k.end,he);!J.extend&&Ee>et&&(T=et,et=Ee,Ee=T);var $=O0(R,Ee),F=O0(R,et);if($&&F&&(J.rangeCount!==1||J.anchorNode!==$.node||J.anchorOffset!==$.offset||J.focusNode!==F.node||J.focusOffset!==F.offset)){var G=te.createRange();G.setStart($.node,$.offset),J.removeAllRanges(),Ee>et?(J.addRange(G),J.extend(F.node,F.offset)):(G.setEnd(F.node,F.offset),J.addRange(G))}}}}for(te=[],J=R;J=J.parentNode;)J.nodeType===1&&te.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var Z=te[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}yf=!!Gm,Hm=Gm=null}finally{Ye=v,Q.p=f,B.T=l}}o.current=s,St=2}}function Xb(){if(St===2){St=0;var o=zo,s=zs,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var f=Q.p;Q.p=2;var v=Ye;Ye|=4;try{Tb(o,s.alternate,s)}finally{Ye=v,Q.p=f,B.T=l}}St=3}}function Wb(){if(St===4||St===3){St=0,sc();var o=zo,s=zs,l=no,f=Ub;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?St=5:(St=0,zs=zo=null,Qb(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Vo=null),Kh(l),s=s.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ka,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=B.T,v=Q.p,Q.p=2,B.T=null;try{for(var _=o.onRecoverableError,T=0;T<f.length;T++){var R=f[T];_(R.value,{componentStack:R.stack})}}finally{B.T=s,Q.p=v}}(no&3)!==0&&sf(),yi(o),v=o.pendingLanes,(l&261930)!==0&&(v&42)!==0?o===Rm?Ml++:(Ml=0,Rm=o):Ml=0,Nl(0)}}function Qb(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,cl(s)))}function sf(){return Yb(),Xb(),Wb(),Zb()}function Zb(){if(St!==5)return!1;var o=zo,s=xm;xm=0;var l=Kh(no),f=B.T,v=Q.p;try{Q.p=32>l?32:l,B.T=null,l=Am,Am=null;var _=zo,T=no;if(St=0,zs=zo=null,no=0,(Ye&6)!==0)throw Error(i(331));var R=Ye;if(Ye|=4,kb(_.current),Ib(_,_.current,T,l),Ye=R,Nl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ka,_)}catch{}return!0}finally{Q.p=v,B.T=f,Qb(o,s)}}function ew(o,s,l){s=Mn(l,s),s=sm(o.stateNode,s,2),o=Uo(o,s,2),o!==null&&(Xa(o,2),yi(o))}function We(o,s,l){if(o.tag===3)ew(o,o,l);else for(;s!==null;){if(s.tag===3){ew(s,o,l);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Vo===null||!Vo.has(f))){o=Mn(l,o),l=tb(2),f=Uo(s,l,2),f!==null&&(nb(l,f,s,o),Xa(f,2),yi(f));break}}s=s.return}}function Im(o,s,l){var f=o.pingCache;if(f===null){f=o.pingCache=new uk;var v=new Set;f.set(s,v)}else v=f.get(s),v===void 0&&(v=new Set,f.set(s,v));v.has(l)||(Em=!0,v.add(l),o=pk.bind(null,o,s,l),s.then(o,o))}function pk(o,s,l){var f=o.pingCache;f!==null&&f.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,it===o&&(Le&l)===l&&(dt===4||dt===3&&(Le&62914560)===Le&&300>At()-Zc?(Ye&2)===0&&qs(o,0):Tm|=l,Vs===Le&&(Vs=0)),yi(o)}function tw(o,s){s===0&&(s=Y_()),o=Mr(o,s),o!==null&&(Xa(o,s),yi(o))}function mk(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),tw(o,l)}function gk(o,s){var l=0;switch(o.tag){case 31:case 13:var f=o.stateNode,v=o.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),tw(o,l)}function vk(o,s){return Yn(o,s)}var af=null,Js=null,Dm=!1,lf=!1,Om=!1,jo=0;function yi(o){o!==Js&&o.next===null&&(Js===null?af=Js=o:Js=Js.next=o),lf=!0,Dm||(Dm=!0,_k())}function Nl(o,s){if(!Om&&lf){Om=!0;do for(var l=!1,f=af;f!==null;){if(o!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var T=f.suspendedLanes,R=f.pingedLanes;_=(1<<31-ln(42|o)+1)-1,_&=v&~(T&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,rw(f,_))}else _=Le,_=fc(f,f===it?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Ya(f,_)||(l=!0,rw(f,_));f=f.next}while(l);Om=!1}}function yk(){nw()}function nw(){lf=Dm=!1;var o=0;jo!==0&&Mk()&&(o=jo);for(var s=At(),l=null,f=af;f!==null;){var v=f.next,_=iw(f,s);_===0?(f.next=null,l===null?af=v:l.next=v,v===null&&(Js=l)):(l=f,(o!==0||(_&3)!==0)&&(lf=!0)),f=v}St!==0&&St!==5||Nl(o),jo!==0&&(jo=0)}function iw(o,s){for(var l=o.suspendedLanes,f=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var T=31-ln(_),R=1<<T,k=v[T];k===-1?((R&l)===0||(R&f)!==0)&&(v[T]=q1(R,s)):k<=s&&(o.expiredLanes|=R),_&=~R}if(s=it,l=Le,l=fc(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,l===0||o===s&&(Xe===2||Xe===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&Ao(f),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||Ya(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(f!==null&&Ao(f),Kh(l)){case 2:case 8:l=Ja;break;case 32:l=Er;break;case 268435456:l=K_;break;default:l=Er}return f=ow.bind(null,o),l=Yn(l,f),o.callbackPriority=s,o.callbackNode=l,s}return f!==null&&f!==null&&Ao(f),o.callbackPriority=2,o.callbackNode=null,2}function ow(o,s){if(St!==0&&St!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(sf()&&o.callbackNode!==l)return null;var f=Le;return f=fc(o,o===it?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(Bb(o,f,s),iw(o,At()),o.callbackNode!=null&&o.callbackNode===l?ow.bind(null,o):null)}function rw(o,s){if(sf())return null;Bb(o,s,!0)}function _k(){Ik(function(){(Ye&6)!==0?Yn(ja,yk):nw()})}function km(){if(jo===0){var o=Ds;o===0&&(o=lc,lc<<=1,(lc&261888)===0&&(lc=256)),jo=o}return jo}function sw(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:mc(""+o)}function aw(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function Sk(o,s,l,f,v){if(s==="submit"&&l&&l.stateNode===v){var _=sw((v[Kt]||null).action),T=f.submitter;T&&(s=(s=T[Kt]||null)?sw(s.formAction):T.getAttribute("formAction"),s!==null&&(_=s,T=null));var R=new _c("action","action",null,f,v);o.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(jo!==0){var k=T?aw(v,T):new FormData(v);em(l,{pending:!0,data:k,method:v.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=T?aw(v,T):new FormData(v),em(l,{pending:!0,data:k,method:v.method,action:_},_,k))},currentTarget:v}]})}}for(var Pm=0;Pm<vp.length;Pm++){var Lm=vp[Pm],bk=Lm.toLowerCase(),wk=Lm[0].toUpperCase()+Lm.slice(1);Xn(bk,"on"+wk)}Xn(F0,"onAnimationEnd"),Xn(B0,"onAnimationIteration"),Xn($0,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(FO,"onTransitionRun"),Xn(BO,"onTransitionStart"),Xn($O,"onTransitionCancel"),Xn(G0,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ek=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function lw(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var f=o[l],v=f.event;f=f.listeners;e:{var _=void 0;if(s)for(var T=f.length-1;0<=T;T--){var R=f[T],k=R.instance,H=R.currentTarget;if(R=R.listener,k!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=H;try{_(v)}catch(X){wc(X)}v.currentTarget=null,_=k}else for(T=0;T<f.length;T++){if(R=f[T],k=R.instance,H=R.currentTarget,R=R.listener,k!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=H;try{_(v)}catch(X){wc(X)}v.currentTarget=null,_=k}}}}function Pe(o,s){var l=s[Yh];l===void 0&&(l=s[Yh]=new Set);var f=o+"__bubble";l.has(f)||(uw(s,o,2,!1),l.add(f))}function Um(o,s,l){var f=0;s&&(f|=4),uw(l,o,f,s)}var uf="_reactListening"+Math.random().toString(36).slice(2);function Fm(o){if(!o[uf]){o[uf]=!0,n0.forEach(function(l){l!=="selectionchange"&&(Ek.has(l)||Um(l,!1,o),Um(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[uf]||(s[uf]=!0,Um("selectionchange",!1,s))}}function uw(o,s,l,f){switch(Fw(s)){case 2:var v=Wk;break;case 8:v=Qk;break;default:v=Zm}l=v.bind(null,s,l,o),v=void 0,!op||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),f?v!==void 0?o.addEventListener(s,l,{capture:!0,passive:v}):o.addEventListener(s,l,!0):v!==void 0?o.addEventListener(s,l,{passive:v}):o.addEventListener(s,l,!1)}function Bm(o,s,l,f,v){var _=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var R=f.stateNode.containerInfo;if(R===v)break;if(T===4)for(T=f.return;T!==null;){var k=T.tag;if((k===3||k===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;R!==null;){if(T=ms(R),T===null)return;if(k=T.tag,k===5||k===6||k===26||k===27){f=_=T;continue e}R=R.parentNode}}f=f.return}p0(function(){var H=_,X=np(l),te=[];e:{var z=H0.get(o);if(z!==void 0){var J=_c,he=o;switch(o){case"keypress":if(vc(l)===0)break e;case"keydown":case"keyup":J=gO;break;case"focusin":he="focus",J=lp;break;case"focusout":he="blur",J=lp;break;case"beforeblur":case"afterblur":J=lp;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=v0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=oO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=_O;break;case F0:case B0:case $0:J=aO;break;case G0:J=bO;break;case"scroll":case"scrollend":J=nO;break;case"wheel":J=EO;break;case"copy":case"cut":case"paste":J=uO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=_0;break;case"toggle":case"beforetoggle":J=CO}var Ee=(s&4)!==0,et=!Ee&&(o==="scroll"||o==="scrollend"),$=Ee?z!==null?z+"Capture":null:z;Ee=[];for(var F=H,G;F!==null;){var Z=F;if(G=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||G===null||$===null||(Z=Za(F,$),Z!=null&&Ee.push(Dl(F,Z,G))),et)break;F=F.return}0<Ee.length&&(z=new J(z,he,null,l,X),te.push({event:z,listeners:Ee}))}}if((s&7)===0){e:{if(z=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",z&&l!==tp&&(he=l.relatedTarget||l.fromElement)&&(ms(he)||he[ps]))break e;if((J||z)&&(z=X.window===X?X:(z=X.ownerDocument)?z.defaultView||z.parentWindow:window,J?(he=l.relatedTarget||l.toElement,J=H,he=he?ms(he):null,he!==null&&(et=a(he),Ee=he.tag,he!==et||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(J=null,he=H),J!==he)){if(Ee=v0,Z="onMouseLeave",$="onMouseEnter",F="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=_0,Z="onPointerLeave",$="onPointerEnter",F="pointer"),et=J==null?z:Qa(J),G=he==null?z:Qa(he),z=new Ee(Z,F+"leave",J,l,X),z.target=et,z.relatedTarget=G,Z=null,ms(X)===H&&(Ee=new Ee($,F+"enter",he,l,X),Ee.target=G,Ee.relatedTarget=et,Z=Ee),et=Z,J&&he)t:{for(Ee=Tk,$=J,F=he,G=0,Z=$;Z;Z=Ee(Z))G++;Z=0;for(var _e=F;_e;_e=Ee(_e))Z++;for(;0<G-Z;)$=Ee($),G--;for(;0<Z-G;)F=Ee(F),Z--;for(;G--;){if($===F||F!==null&&$===F.alternate){Ee=$;break t}$=Ee($),F=Ee(F)}Ee=null}else Ee=null;J!==null&&cw(te,z,J,Ee,!1),he!==null&&et!==null&&cw(te,et,he,Ee,!0)}}e:{if(z=H?Qa(H):window,J=z.nodeName&&z.nodeName.toLowerCase(),J==="select"||J==="input"&&z.type==="file")var Ve=A0;else if(C0(z))if(R0)Ve=PO;else{Ve=OO;var ge=DO}else J=z.nodeName,!J||J.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?H&&ep(H.elementType)&&(Ve=A0):Ve=kO;if(Ve&&(Ve=Ve(o,H))){x0(te,Ve,l,X);break e}ge&&ge(o,z,H),o==="focusout"&&H&&z.type==="number"&&H.memoizedProps.value!=null&&Zh(z,"number",z.value)}switch(ge=H?Qa(H):window,o){case"focusin":(C0(ge)||ge.contentEditable==="true")&&(Ts=ge,pp=H,al=null);break;case"focusout":al=pp=Ts=null;break;case"mousedown":mp=!0;break;case"contextmenu":case"mouseup":case"dragend":mp=!1,L0(te,l,X);break;case"selectionchange":if(UO)break;case"keydown":case"keyup":L0(te,l,X)}var Ne;if(cp)e:{switch(o){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Es?E0(o,l)&&(Ue="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(S0&&l.locale!=="ko"&&(Es||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Es&&(Ne=m0()):(No=X,rp="value"in No?No.value:No.textContent,Es=!0)),ge=cf(H,Ue),0<ge.length&&(Ue=new y0(Ue,o,null,l,X),te.push({event:Ue,listeners:ge}),Ne?Ue.data=Ne:(Ne=T0(l),Ne!==null&&(Ue.data=Ne)))),(Ne=AO?RO(o,l):MO(o,l))&&(Ue=cf(H,"onBeforeInput"),0<Ue.length&&(ge=new y0("onBeforeInput","beforeinput",null,l,X),te.push({event:ge,listeners:Ue}),ge.data=Ne)),Sk(te,o,H,l,X)}lw(te,s)})}function Dl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function cf(o,s){for(var l=s+"Capture",f=[];o!==null;){var v=o,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=Za(o,l),v!=null&&f.unshift(Dl(o,v,_)),v=Za(o,s),v!=null&&f.push(Dl(o,v,_))),o.tag===3)return f;o=o.return}return[]}function Tk(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function cw(o,s,l,f,v){for(var _=s._reactName,T=[];l!==null&&l!==f;){var R=l,k=R.alternate,H=R.stateNode;if(R=R.tag,k!==null&&k===f)break;R!==5&&R!==26&&R!==27||H===null||(k=H,v?(H=Za(l,_),H!=null&&T.unshift(Dl(l,H,k))):v||(H=Za(l,_),H!=null&&T.push(Dl(l,H,k)))),l=l.return}T.length!==0&&o.push({event:s,listeners:T})}var Ck=/\r\n?/g,xk=/\u0000|\uFFFD/g;function fw(o){return(typeof o=="string"?o:""+o).replace(Ck,`
`).replace(xk,"")}function dw(o,s){return s=fw(s),fw(o)===s}function Ze(o,s,l,f,v,_){switch(l){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Ss(o,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Ss(o,""+f);break;case"className":hc(o,"class",f);break;case"tabIndex":hc(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":hc(o,l,f);break;case"style":d0(o,f,_);break;case"data":if(s!=="object"){hc(o,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(l);break}f=mc(""+f),o.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&Ze(o,s,"name",v.name,v,null),Ze(o,s,"formEncType",v.formEncType,v,null),Ze(o,s,"formMethod",v.formMethod,v,null),Ze(o,s,"formTarget",v.formTarget,v,null)):(Ze(o,s,"encType",v.encType,v,null),Ze(o,s,"method",v.method,v,null),Ze(o,s,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(l);break}f=mc(""+f),o.setAttribute(l,f);break;case"onClick":f!=null&&(o.onclick=Gi);break;case"onScroll":f!=null&&Pe("scroll",o);break;case"onScrollEnd":f!=null&&Pe("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}l=mc(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,""+f):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":f===!0?o.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,f):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(l,f):o.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(l):o.setAttribute(l,f);break;case"popover":Pe("beforetoggle",o),Pe("toggle",o),dc(o,"popover",f);break;case"xlinkActuate":$i(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":$i(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":$i(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":$i(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":$i(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":$i(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":$i(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":$i(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":$i(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":dc(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=eO.get(l)||l,dc(o,l,f))}}function $m(o,s,l,f,v,_){switch(l){case"style":d0(o,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof f=="string"?Ss(o,f):(typeof f=="number"||typeof f=="bigint")&&Ss(o,""+f);break;case"onScroll":f!=null&&Pe("scroll",o);break;case"onScrollEnd":f!=null&&Pe("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!i0.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),s=l.slice(2,v?l.length-7:void 0),_=o[Kt]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,f,v);break e}l in o?o[l]=f:f===!0?o.setAttribute(l,""):dc(o,l,f)}}}function Dt(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",o),Pe("load",o);var f=!1,v=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var T=l[_];if(T!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ze(o,s,_,T,l,null)}}v&&Ze(o,s,"srcSet",l.srcSet,l,null),f&&Ze(o,s,"src",l.src,l,null);return;case"input":Pe("invalid",o);var R=_=T=v=null,k=null,H=null;for(f in l)if(l.hasOwnProperty(f)){var X=l[f];if(X!=null)switch(f){case"name":v=X;break;case"type":T=X;break;case"checked":k=X;break;case"defaultChecked":H=X;break;case"value":_=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:Ze(o,s,f,X,l,null)}}l0(o,_,R,k,H,T,v,!1);return;case"select":Pe("invalid",o),f=T=_=null;for(v in l)if(l.hasOwnProperty(v)&&(R=l[v],R!=null))switch(v){case"value":_=R;break;case"defaultValue":T=R;break;case"multiple":f=R;default:Ze(o,s,v,R,l,null)}s=_,l=T,o.multiple=!!f,s!=null?_s(o,!!f,s,!1):l!=null&&_s(o,!!f,l,!0);return;case"textarea":Pe("invalid",o),_=v=f=null;for(T in l)if(l.hasOwnProperty(T)&&(R=l[T],R!=null))switch(T){case"value":f=R;break;case"defaultValue":v=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Ze(o,s,T,R,l,null)}c0(o,f,v,_);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(f=l[k],f!=null))switch(k){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ze(o,s,k,f,l,null)}return;case"dialog":Pe("beforetoggle",o),Pe("toggle",o),Pe("cancel",o),Pe("close",o);break;case"iframe":case"object":Pe("load",o);break;case"video":case"audio":for(f=0;f<Il.length;f++)Pe(Il[f],o);break;case"image":Pe("error",o),Pe("load",o);break;case"details":Pe("toggle",o);break;case"embed":case"source":case"link":Pe("error",o),Pe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(f=l[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ze(o,s,H,f,l,null)}return;default:if(ep(s)){for(X in l)l.hasOwnProperty(X)&&(f=l[X],f!==void 0&&$m(o,s,X,f,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(f=l[R],f!=null&&Ze(o,s,R,f,l,null))}function Ak(o,s,l,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,T=null,R=null,k=null,H=null,X=null;for(J in l){var te=l[J];if(l.hasOwnProperty(J)&&te!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=te;default:f.hasOwnProperty(J)||Ze(o,s,J,null,f,te)}}for(var z in f){var J=f[z];if(te=l[z],f.hasOwnProperty(z)&&(J!=null||te!=null))switch(z){case"type":_=J;break;case"name":v=J;break;case"checked":H=J;break;case"defaultChecked":X=J;break;case"value":T=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==te&&Ze(o,s,z,J,f,te)}}Qh(o,T,R,k,H,X,_,v);return;case"select":J=T=R=z=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":J=k;default:f.hasOwnProperty(_)||Ze(o,s,_,null,f,k)}for(v in f)if(_=f[v],k=l[v],f.hasOwnProperty(v)&&(_!=null||k!=null))switch(v){case"value":z=_;break;case"defaultValue":R=_;break;case"multiple":T=_;default:_!==k&&Ze(o,s,v,_,f,k)}s=R,l=T,f=J,z!=null?_s(o,!!l,z,!1):!!f!=!!l&&(s!=null?_s(o,!!l,s,!0):_s(o,!!l,l?[]:"",!1));return;case"textarea":J=z=null;for(R in l)if(v=l[R],l.hasOwnProperty(R)&&v!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ze(o,s,R,null,f,v)}for(T in f)if(v=f[T],_=l[T],f.hasOwnProperty(T)&&(v!=null||_!=null))switch(T){case"value":z=v;break;case"defaultValue":J=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Ze(o,s,T,v,f,_)}u0(o,z,J);return;case"option":for(var he in l)if(z=l[he],l.hasOwnProperty(he)&&z!=null&&!f.hasOwnProperty(he))switch(he){case"selected":o.selected=!1;break;default:Ze(o,s,he,null,f,z)}for(k in f)if(z=f[k],J=l[k],f.hasOwnProperty(k)&&z!==J&&(z!=null||J!=null))switch(k){case"selected":o.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ze(o,s,k,z,f,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)z=l[Ee],l.hasOwnProperty(Ee)&&z!=null&&!f.hasOwnProperty(Ee)&&Ze(o,s,Ee,null,f,z);for(H in f)if(z=f[H],J=l[H],f.hasOwnProperty(H)&&z!==J&&(z!=null||J!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,s));break;default:Ze(o,s,H,z,f,J)}return;default:if(ep(s)){for(var et in l)z=l[et],l.hasOwnProperty(et)&&z!==void 0&&!f.hasOwnProperty(et)&&$m(o,s,et,void 0,f,z);for(X in f)z=f[X],J=l[X],!f.hasOwnProperty(X)||z===J||z===void 0&&J===void 0||$m(o,s,X,z,f,J);return}}for(var $ in l)z=l[$],l.hasOwnProperty($)&&z!=null&&!f.hasOwnProperty($)&&Ze(o,s,$,null,f,z);for(te in f)z=f[te],J=l[te],!f.hasOwnProperty(te)||z===J||z==null&&J==null||Ze(o,s,te,z,f,J)}function hw(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rk(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var v=l[f],_=v.transferSize,T=v.initiatorType,R=v.duration;if(_&&R&&hw(T)){for(T=0,R=v.responseEnd,f+=1;f<l.length;f++){var k=l[f],H=k.startTime;if(H>R)break;var X=k.transferSize,te=k.initiatorType;X&&hw(te)&&(k=k.responseEnd,T+=X*(k<R?1:(R-H)/(k-H)))}if(--f,s+=8*(_+T)/(v.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Gm=null,Hm=null;function ff(o){return o.nodeType===9?o:o.ownerDocument}function pw(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mw(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Vm(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zm=null;function Mk(){var o=window.event;return o&&o.type==="popstate"?o===zm?!1:(zm=o,!0):(zm=null,!1)}var gw=typeof setTimeout=="function"?setTimeout:void 0,Nk=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,Ik=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(o){return vw.resolve(null).then(o).catch(Dk)}:gw;function Dk(o){setTimeout(function(){throw o})}function Jo(o){return o==="head"}function yw(o,s){var l=s,f=0;do{var v=l.nextSibling;if(o.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(f===0){o.removeChild(v),Ws(s);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")Ol(o.ownerDocument.documentElement);else if(l==="head"){l=o.ownerDocument.head,Ol(l);for(var _=l.firstChild;_;){var T=_.nextSibling,R=_.nodeName;_[Wa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=T}}else l==="body"&&Ol(o.ownerDocument.body);l=v}while(l);Ws(s)}function _w(o,s){var l=o;o=0;do{var f=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(o===0)break;o--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||o++;l=f}while(l)}function qm(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":qm(l),Xh(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function Ok(o,s,l,f){for(;o.nodeType===1;){var v=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[Wa])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=kn(o.nextSibling),o===null)break}return null}function kk(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=kn(o.nextSibling),o===null))return null;return o}function Sw(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=kn(o.nextSibling),o===null))return null;return o}function jm(o){return o.data==="$?"||o.data==="$~"}function Jm(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Pk(o,s){var l=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||l.readyState!=="loading")s();else{var f=function(){s(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function kn(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var Km=null;function bw(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"||l==="/&"){if(s===0)return kn(o.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}o=o.nextSibling}return null}function ww(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return o;s--}else l!=="/$"&&l!=="/&"||s++}o=o.previousSibling}return null}function Ew(o,s,l){switch(s=ff(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Ol(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Xh(o)}var Pn=new Map,Tw=new Set;function df(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var io=Q.d;Q.d={f:Lk,r:Uk,D:Fk,C:Bk,L:$k,m:Gk,X:Vk,S:Hk,M:zk};function Lk(){var o=io.f(),s=nf();return o||s}function Uk(o){var s=gs(o);s!==null&&s.tag===5&&s.type==="form"?GS(s):io.r(o)}var Ks=typeof document>"u"?null:document;function Cw(o,s,l){var f=Ks;if(f&&typeof s=="string"&&s){var v=An(s);v='link[rel="'+o+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Tw.has(v)||(Tw.add(v),o={rel:o,crossOrigin:l,href:s},f.querySelector(v)===null&&(s=f.createElement("link"),Dt(s,"link",o),Et(s),f.head.appendChild(s)))}}function Fk(o){io.D(o),Cw("dns-prefetch",o,null)}function Bk(o,s){io.C(o,s),Cw("preconnect",o,s)}function $k(o,s,l){io.L(o,s,l);var f=Ks;if(f&&o&&s){var v='link[rel="preload"][as="'+An(s)+'"]';s==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+An(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+An(l.imageSizes)+'"]')):v+='[href="'+An(o)+'"]';var _=v;switch(s){case"style":_=Ys(o);break;case"script":_=Xs(o)}Pn.has(_)||(o=y({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),Pn.set(_,o),f.querySelector(v)!==null||s==="style"&&f.querySelector(kl(_))||s==="script"&&f.querySelector(Pl(_))||(s=f.createElement("link"),Dt(s,"link",o),Et(s),f.head.appendChild(s)))}}function Gk(o,s){io.m(o,s);var l=Ks;if(l&&o){var f=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+An(f)+'"][href="'+An(o)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Xs(o)}if(!Pn.has(_)&&(o=y({rel:"modulepreload",href:o},s),Pn.set(_,o),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Pl(_)))return}f=l.createElement("link"),Dt(f,"link",o),Et(f),l.head.appendChild(f)}}}function Hk(o,s,l){io.S(o,s,l);var f=Ks;if(f&&o){var v=vs(f).hoistableStyles,_=Ys(o);s=s||"default";var T=v.get(_);if(!T){var R={loading:0,preload:null};if(T=f.querySelector(kl(_)))R.loading=5;else{o=y({rel:"stylesheet",href:o,"data-precedence":s},l),(l=Pn.get(_))&&Ym(o,l);var k=T=f.createElement("link");Et(k),Dt(k,"link",o),k._p=new Promise(function(H,X){k.onload=H,k.onerror=X}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,hf(T,s,f)}T={type:"stylesheet",instance:T,count:1,state:R},v.set(_,T)}}}function Vk(o,s){io.X(o,s);var l=Ks;if(l&&o){var f=vs(l).hoistableScripts,v=Xs(o),_=f.get(v);_||(_=l.querySelector(Pl(v)),_||(o=y({src:o,async:!0},s),(s=Pn.get(v))&&Xm(o,s),_=l.createElement("script"),Et(_),Dt(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function zk(o,s){io.M(o,s);var l=Ks;if(l&&o){var f=vs(l).hoistableScripts,v=Xs(o),_=f.get(v);_||(_=l.querySelector(Pl(v)),_||(o=y({src:o,async:!0,type:"module"},s),(s=Pn.get(v))&&Xm(o,s),_=l.createElement("script"),Et(_),Dt(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function xw(o,s,l,f){var v=(v=be.current)?df(v):null;if(!v)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Ys(l.href),l=vs(v).hoistableStyles,f=l.get(s),f||(f={type:"style",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=Ys(l.href);var _=vs(v).hoistableStyles,T=_.get(o);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,T),(_=v.querySelector(kl(o)))&&!_._p&&(T.instance=_,T.state.loading=5),Pn.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pn.set(o,l),_||qk(v,o,l,T.state))),s&&f===null)throw Error(i(528,""));return T}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xs(l),l=vs(v).hoistableScripts,f=l.get(s),f||(f={type:"script",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Ys(o){return'href="'+An(o)+'"'}function kl(o){return'link[rel="stylesheet"]['+o+"]"}function Aw(o){return y({},o,{"data-precedence":o.precedence,precedence:null})}function qk(o,s,l,f){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=o.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),Dt(s,"link",l),Et(s),o.head.appendChild(s))}function Xs(o){return'[src="'+An(o)+'"]'}function Pl(o){return"script[async]"+o}function Rw(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var f=o.querySelector('style[data-href~="'+An(l.href)+'"]');if(f)return s.instance=f,Et(f),f;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),Et(f),Dt(f,"style",v),hf(f,l.precedence,o),s.instance=f;case"stylesheet":v=Ys(l.href);var _=o.querySelector(kl(v));if(_)return s.state.loading|=4,s.instance=_,Et(_),_;f=Aw(l),(v=Pn.get(v))&&Ym(f,v),_=(o.ownerDocument||o).createElement("link"),Et(_);var T=_;return T._p=new Promise(function(R,k){T.onload=R,T.onerror=k}),Dt(_,"link",f),s.state.loading|=4,hf(_,l.precedence,o),s.instance=_;case"script":return _=Xs(l.src),(v=o.querySelector(Pl(_)))?(s.instance=v,Et(v),v):(f=l,(v=Pn.get(_))&&(f=y({},l),Xm(f,v)),o=o.ownerDocument||o,v=o.createElement("script"),Et(v),Dt(v,"link",f),o.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,hf(f,l.precedence,o));return s.instance}function hf(o,s,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,T=0;T<f.length;T++){var R=f[T];if(R.dataset.precedence===s)_=R;else if(_!==v)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function Ym(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function Xm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var pf=null;function Mw(o,s,l){if(pf===null){var f=new Map,v=pf=new Map;v.set(l,f)}else v=pf,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(o))return f;for(f.set(o,null),l=l.getElementsByTagName(o),v=0;v<l.length;v++){var _=l[v];if(!(_[Wa]||_[Rt]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(s)||"";T=o+T;var R=f.get(T);R?R.push(_):f.set(T,[_])}}return f}function Nw(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function jk(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Iw(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function Jk(o,s,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Ys(f.href),_=s.querySelector(kl(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=mf.bind(o),s.then(o,o)),l.state.loading|=4,l.instance=_,Et(_);return}_=s.ownerDocument||s,f=Aw(f),(v=Pn.get(v))&&Ym(f,v),_=_.createElement("link"),Et(_);var T=_;T._p=new Promise(function(R,k){T.onload=R,T.onerror=k}),Dt(_,"link",f),l.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(o.count++,l=mf.bind(o),s.addEventListener("load",l),s.addEventListener("error",l))}}var Wm=0;function Kk(o,s){return o.stylesheets&&o.count===0&&vf(o,o.stylesheets),0<o.count||0<o.imgCount?function(l){var f=setTimeout(function(){if(o.stylesheets&&vf(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+s);0<o.imgBytes&&Wm===0&&(Wm=62500*Rk());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&vf(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>Wm?50:800)+s);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function mf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var gf=null;function vf(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,gf=new Map,s.forEach(Yk,o),gf=null,mf.call(o))}function Yk(o,s){if(!(s.state.loading&4)){var l=gf.get(o);if(l)var f=l.get(null);else{l=new Map,gf.set(o,l);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var T=v[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),f=T)}f&&l.set(null,f)}v=s.instance,T=v.getAttribute("data-precedence"),_=l.get(T)||f,_===f&&l.set(null,v),l.set(T,v),this.count++,f=mf.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),s.state.loading|=4}}var Ll={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function Xk(o,s,l,f,v,_,T,R,k){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.hiddenUpdates=jh(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Dw(o,s,l,f,v,_,T,R,k,H,X,te){return o=new Xk(o,s,l,T,k,H,X,te,R),s=1,_===!0&&(s|=24),_=cn(3,null,null,s),o.current=_,_.stateNode=o,s=Np(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:f,isDehydrated:l,cache:s},kp(_),o}function Ow(o){return o?(o=As,o):As}function kw(o,s,l,f,v,_){v=Ow(v),f.context===null?f.context=v:f.pendingContext=v,f=Lo(s),f.payload={element:l},_=_===void 0?null:_,_!==null&&(f.callback=_),l=Uo(o,f,s),l!==null&&(en(l,o,s),pl(l,o,s))}function Pw(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function Qm(o,s){Pw(o,s),(o=o.alternate)&&Pw(o,s)}function Lw(o){if(o.tag===13||o.tag===31){var s=Mr(o,67108864);s!==null&&en(s,o,67108864),Qm(o,67108864)}}function Uw(o){if(o.tag===13||o.tag===31){var s=mn();s=Jh(s);var l=Mr(o,s);l!==null&&en(l,o,s),Qm(o,s)}}var yf=!0;function Wk(o,s,l,f){var v=B.T;B.T=null;var _=Q.p;try{Q.p=2,Zm(o,s,l,f)}finally{Q.p=_,B.T=v}}function Qk(o,s,l,f){var v=B.T;B.T=null;var _=Q.p;try{Q.p=8,Zm(o,s,l,f)}finally{Q.p=_,B.T=v}}function Zm(o,s,l,f){if(yf){var v=eg(f);if(v===null)Bm(o,s,f,_f,l),Bw(o,f);else if(eP(v,o,s,l,f))f.stopPropagation();else if(Bw(o,f),s&4&&-1<Zk.indexOf(o)){for(;v!==null;){var _=gs(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=Tr(_.pendingLanes);if(T!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var k=1<<31-ln(T);R.entanglements[1]|=k,T&=~k}yi(_),(Ye&6)===0&&(ef=At()+500,Nl(0))}}break;case 31:case 13:R=Mr(_,2),R!==null&&en(R,_,2),nf(),Qm(_,2)}if(_=eg(f),_===null&&Bm(o,s,f,_f,l),_===v)break;v=_}v!==null&&f.stopPropagation()}else Bm(o,s,f,null,l)}}function eg(o){return o=np(o),tg(o)}var _f=null;function tg(o){if(_f=null,o=ms(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=u(s),o!==null)return o;o=null}else if(l===31){if(o=c(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return _f=o,null}function Fw(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ac()){case ja:return 2;case Ja:return 8;case Er:case B1:return 32;case K_:return 268435456;default:return 32}default:return 32}}var ng=!1,Ko=null,Yo=null,Xo=null,Ul=new Map,Fl=new Map,Wo=[],Zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bw(o,s){switch(o){case"focusin":case"focusout":Ko=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":Ul.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(s.pointerId)}}function Bl(o,s,l,f,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},s!==null&&(s=gs(s),s!==null&&Lw(s)),o):(o.eventSystemFlags|=f,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function eP(o,s,l,f,v){switch(s){case"focusin":return Ko=Bl(Ko,o,s,l,f,v),!0;case"dragenter":return Yo=Bl(Yo,o,s,l,f,v),!0;case"mouseover":return Xo=Bl(Xo,o,s,l,f,v),!0;case"pointerover":var _=v.pointerId;return Ul.set(_,Bl(Ul.get(_)||null,o,s,l,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Fl.set(_,Bl(Fl.get(_)||null,o,s,l,f,v)),!0}return!1}function $w(o){var s=ms(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){o.blockedOn=s,e0(o.priority,function(){Uw(l)});return}}else if(s===31){if(s=c(l),s!==null){o.blockedOn=s,e0(o.priority,function(){Uw(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Sf(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=eg(o.nativeEvent);if(l===null){l=o.nativeEvent;var f=new l.constructor(l.type,l);tp=f,l.target.dispatchEvent(f),tp=null}else return s=gs(l),s!==null&&Lw(s),o.blockedOn=l,!1;s.shift()}return!0}function Gw(o,s,l){Sf(o)&&l.delete(s)}function tP(){ng=!1,Ko!==null&&Sf(Ko)&&(Ko=null),Yo!==null&&Sf(Yo)&&(Yo=null),Xo!==null&&Sf(Xo)&&(Xo=null),Ul.forEach(Gw),Fl.forEach(Gw)}function bf(o,s){o.blockedOn===s&&(o.blockedOn=null,ng||(ng=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tP)))}var wf=null;function Hw(o){wf!==o&&(wf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wf===o&&(wf=null);for(var s=0;s<o.length;s+=3){var l=o[s],f=o[s+1],v=o[s+2];if(typeof f!="function"){if(tg(f||l)===null)continue;break}var _=gs(l);_!==null&&(o.splice(s,3),s-=3,em(_,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function Ws(o){function s(k){return bf(k,o)}Ko!==null&&bf(Ko,o),Yo!==null&&bf(Yo,o),Xo!==null&&bf(Xo,o),Ul.forEach(s),Fl.forEach(s);for(var l=0;l<Wo.length;l++){var f=Wo[l];f.blockedOn===o&&(f.blockedOn=null)}for(;0<Wo.length&&(l=Wo[0],l.blockedOn===null);)$w(l),l.blockedOn===null&&Wo.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],_=l[f+1],T=v[Kt]||null;if(typeof _=="function")T||Hw(l);else if(T){var R=null;if(_&&_.hasAttribute("formAction")){if(v=_,T=_[Kt]||null)R=T.formAction;else if(tg(v)!==null)continue}else R=T.action;typeof R=="function"?l[f+1]=R:(l.splice(f,3),f-=3),Hw(l)}}}function Vw(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return v=T})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function ig(o){this._internalRoot=o}Ef.prototype.render=ig.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,f=mn();kw(l,f,o,s,null,null)},Ef.prototype.unmount=ig.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;kw(o.current,2,null,o,null,null),nf(),s[ps]=null}};function Ef(o){this._internalRoot=o}Ef.prototype.unstable_scheduleHydration=function(o){if(o){var s=Z_();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Wo.length&&s!==0&&s<Wo[l].priority;l++);Wo.splice(l,0,o),l===0&&$w(o)}};var zw=e.version;if(zw!=="19.2.1")throw Error(i(527,zw,"19.2.1"));Q.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(s),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var nP={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tf.isDisabled&&Tf.supportsFiber)try{Ka=Tf.inject(nP),an=Tf}catch{}}return Gl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,f="",v=WS,_=QS,T=ZS;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Dw(o,1,!1,null,null,l,f,null,v,_,T,Vw),o[ps]=s.current,Fm(o),new ig(s)},Gl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var f=!1,v="",_=WS,T=QS,R=ZS,k=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),s=Dw(o,1,!0,s,l??null,f,v,k,_,T,R,Vw),s.context=Ow(null),l=s.current,f=mn(),f=Jh(f),v=Lo(f),v.callback=null,Uo(l,v,f),l=f,s.current.lanes=l,Xa(s,l),yi(s),o[ps]=s.current,Fm(o),new Ef(s)},Gl.version="19.2.1",Gl}var eE;function dP(){if(eE)return sg.exports;eE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sg.exports=fP(),sg.exports}var hP=dP();function $e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var pP={};function ih(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:pP}var tA=Object.assign,Sd=Object.getOwnPropertyDescriptor,Ri=Object.defineProperty,Mu=Object.prototype,lv=[];Object.freeze(lv);var nA={};Object.freeze(nA);var mP=typeof Proxy<"u",gP=Object.toString();function iA(){mP||$e("Proxy not available")}function oA(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var da=function(){};function li(t){return typeof t=="function"}function Zr(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function oh(t){return t!==null&&typeof t=="object"}function go(t){if(!oh(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n.toString()===gP}function rA(t){var e=t?.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Nu(t,e,n){Ri(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function sA(t,e,n){Ri(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function mr(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(i){return oh(i)&&i[n]===!0}}function Ia(t){return t!=null&&Object.prototype.toString.call(t)==="[object Map]"}function vP(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e),i=Object.getPrototypeOf(n);return i===null}function ao(t){return t!=null&&Object.prototype.toString.call(t)==="[object Set]"}var aA=typeof Object.getOwnPropertySymbols<"u";function yP(t){var e=Object.keys(t);if(!aA)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter(function(i){return Mu.propertyIsEnumerable.call(t,i)})):e}var wa=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:aA?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function lA(t){return t===null?null:typeof t=="object"?""+t:t}function fo(t,e){return Mu.hasOwnProperty.call(t,e)}var _P=Object.getOwnPropertyDescriptors||function(e){var n={};return wa(e).forEach(function(i){n[i]=Sd(e,i)}),n};function Sn(t,e){return!!(t&e)}function bn(t,e,n){return n?t|=e:t&=~e,t}function tE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function SP(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wP(i.key),i)}}function Da(t,e,n){return e&&SP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ha(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=EP(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(){return es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},es.apply(null,arguments)}function uA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uv(t,e)}function uv(t,e){return uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uv(t,e)}function bP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function wP(t){var e=bP(t,"string");return typeof e=="symbol"?e:e+""}function EP(t,e){if(t){if(typeof t=="string")return tE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tE(t,e):void 0}}var Ei=Symbol("mobx-stored-annotations");function Mi(t){function e(n,i){if(Du(i))return t.decorate_20223_(n,i);Iu(n,i,t)}return Object.assign(e,t)}function Iu(t,e,n){fo(t,Ei)||Nu(t,Ei,es({},t[Ei])),NP(n)||(t[Ei][e]=n)}function TP(t){return fo(t,Ei)||Nu(t,Ei,es({},t[Ei])),t[Ei]}function Du(t){return typeof t=="object"&&typeof t.kind=="string"}var Ce=Symbol("mobx administration"),gr=(function(){function t(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=qe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.reportObserved=function(){return xA(this)},e.reportChanged=function(){Bn(),AA(this),$n()},e.toString=function(){return this.name_},Da(t,[{key:"isBeingObserved",get:function(){return Sn(this.flags_,t.isBeingObservedMask_)},set:function(i){this.flags_=bn(this.flags_,t.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return Sn(this.flags_,t.isPendingUnobservationMask_)},set:function(i){this.flags_=bn(this.flags_,t.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return Sn(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=bn(this.flags_,t.diffValueMask_,i===1)}}])})();gr.isBeingObservedMask_=1;gr.isPendingUnobservationMask_=2;gr.diffValueMask_=4;var gy=mr("Atom",gr);function cA(t,e,n){e===void 0&&(e=da),n===void 0&&(n=da);var i=new gr(t);return e!==da&&OL(i,e),n!==da&&OA(i,n),i}function CP(t,e){return qA(t,e)}function xP(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var bd={structural:CP,default:xP};function ts(t,e,n){return by(t)?t:Array.isArray(t)?Te.array(t,{name:n}):go(t)?Te.object(t,void 0,{name:n}):Ia(t)?Te.map(t,{name:n}):ao(t)?Te.set(t,{name:n}):typeof t=="function"&&!Ea(t)&&!mu(t)?rA(t)?Ta(t):pu(n,t):t}function AP(t,e,n){if(t==null||Fu(t)||Uu(t)||yr(t)||ti(t))return t;if(Array.isArray(t))return Te.array(t,{name:n,deep:!1});if(go(t))return Te.object(t,void 0,{name:n,deep:!1});if(Ia(t))return Te.map(t,{name:n,deep:!1});if(ao(t))return Te.set(t,{name:n,deep:!1})}function rh(t){return t}function RP(t,e){return qA(t,e)?e:t}var MP="override";function NP(t){return t.annotationType_===MP}function Ou(t,e){return{annotationType_:t,options_:e,make_:IP,extend_:DP,decorate_20223_:OP}}function IP(t,e,n,i){var r;if((r=this.options_)!=null&&r.bound)return this.extend_(t,e,n,!1)===null?0:1;if(i===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if(Ea(n.value))return 1;var a=fA(t,this,e,n,!1);return Ri(i,e,a),2}function DP(t,e,n,i){var r=fA(t,this,e,n);return t.defineProperty_(e,r,i)}function OP(t,e){var n=e.kind,i=e.name,r=e.addInitializer,a=this,u=function(d){var m,y,S,w;return ns((m=(y=a.options_)==null?void 0:y.name)!=null?m:i.toString(),d,(S=(w=a.options_)==null?void 0:w.autoAction)!=null?S:!1)};if(n=="field")return function(h){var d,m=h;return Ea(m)||(m=u(m)),(d=a.options_)!=null&&d.bound&&(m=m.bind(this),m.isMobxAction=!0),m};if(n=="method"){var c;return Ea(t)||(t=u(t)),(c=this.options_)!=null&&c.bound&&r(function(){var h=this,d=h[i].bind(h);d.isMobxAction=!0,h[i]=d}),t}$e("Cannot apply '"+a.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):"+(`
'`+a.annotationType_+"' can only be used on properties with a function value."))}function kP(t,e,n,i){e.annotationType_,i.value}function fA(t,e,n,i,r){var a,u,c,h,d,m,y;r===void 0&&(r=ue.safeDescriptors),kP(t,e,n,i);var S=i.value;if((a=e.options_)!=null&&a.bound){var w;S=S.bind((w=t.proxy_)!=null?w:t.target_)}return{value:ns((u=(c=e.options_)==null?void 0:c.name)!=null?u:n.toString(),S,(h=(d=e.options_)==null?void 0:d.autoAction)!=null?h:!1,(m=e.options_)!=null&&m.bound?(y=t.proxy_)!=null?y:t.target_:void 0),configurable:r?t.isPlainObject_:!0,enumerable:!1,writable:!r}}function dA(t,e){return{annotationType_:t,options_:e,make_:PP,extend_:LP,decorate_20223_:UP}}function PP(t,e,n,i){var r;if(i===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if((r=this.options_)!=null&&r.bound&&(!fo(t.target_,e)||!mu(t.target_[e]))&&this.extend_(t,e,n,!1)===null)return 0;if(mu(n.value))return 1;var a=hA(t,this,e,n,!1,!1);return Ri(i,e,a),2}function LP(t,e,n,i){var r,a=hA(t,this,e,n,(r=this.options_)==null?void 0:r.bound);return t.defineProperty_(e,a,i)}function UP(t,e){var n,i=e.name,r=e.addInitializer;return mu(t)||(t=Ta(t)),(n=this.options_)!=null&&n.bound&&r(function(){var a=this,u=a[i].bind(a);u.isMobXFlow=!0,a[i]=u}),t}function FP(t,e,n,i){e.annotationType_,i.value}function hA(t,e,n,i,r,a){a===void 0&&(a=ue.safeDescriptors),FP(t,e,n,i);var u=i.value;if(mu(u)||(u=Ta(u)),r){var c;u=u.bind((c=t.proxy_)!=null?c:t.target_),u.isMobXFlow=!0}return{value:u,configurable:a?t.isPlainObject_:!0,enumerable:!1,writable:!a}}function vy(t,e){return{annotationType_:t,options_:e,make_:BP,extend_:$P,decorate_20223_:GP}}function BP(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function $P(t,e,n,i){return HP(t,this,e,n),t.defineComputedProperty_(e,es({},this.options_,{get:n.get,set:n.set}),i)}function GP(t,e){var n=this,i=e.name,r=e.addInitializer;return r(function(){var a=us(this)[Ce],u=es({},n.options_,{get:t,context:this});u.name||(u.name="ObservableObject."+i.toString()),a.values_.set(i,new ui(u))}),function(){return this[Ce].getObservablePropValue_(i)}}function HP(t,e,n,i){e.annotationType_,i.get}function sh(t,e){return{annotationType_:t,options_:e,make_:VP,extend_:zP,decorate_20223_:qP}}function VP(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function zP(t,e,n,i){var r,a;return jP(t,this),t.defineObservableProperty_(e,n.value,(r=(a=this.options_)==null?void 0:a.enhancer)!=null?r:ts,i)}function qP(t,e){var n=this,i=e.kind,r=e.name,a=new WeakSet;function u(c,h){var d,m,y=us(c)[Ce],S=new sr(h,(d=(m=n.options_)==null?void 0:m.enhancer)!=null?d:ts,"ObservableObject."+r.toString(),!1);y.values_.set(r,S),a.add(c)}if(i=="accessor")return{get:function(){return a.has(this)||u(this,t.get.call(this)),this[Ce].getObservablePropValue_(r)},set:function(h){return a.has(this)||u(this,h),this[Ce].setObservablePropValue_(r,h)},init:function(h){return a.has(this)||u(this,h),h}}}function jP(t,e,n,i){e.annotationType_}var JP="true",KP=pA();function pA(t){return{annotationType_:JP,options_:t,make_:YP,extend_:XP,decorate_20223_:WP}}function YP(t,e,n,i){var r,a;if(n.get)return lr.make_(t,e,n,i);if(n.set){var u=Ea(n.set)?n.set:ns(e.toString(),n.set);return i===t.target_?t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:u})===null?0:2:(Ri(i,e,{configurable:!0,set:u}),2)}if(i!==t.target_&&typeof n.value=="function"){var c;if(rA(n.value)){var h,d=(h=this.options_)!=null&&h.autoBind?Ta.bound:Ta;return d.make_(t,e,n,i)}var m=(c=this.options_)!=null&&c.autoBind?pu.bound:pu;return m.make_(t,e,n,i)}var y=((r=this.options_)==null?void 0:r.deep)===!1?Te.ref:Te;if(typeof n.value=="function"&&(a=this.options_)!=null&&a.autoBind){var S;n.value=n.value.bind((S=t.proxy_)!=null?S:t.target_)}return y.make_(t,e,n,i)}function XP(t,e,n,i){var r,a;if(n.get)return lr.extend_(t,e,n,i);if(n.set)return t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:ns(e.toString(),n.set)},i);if(typeof n.value=="function"&&(r=this.options_)!=null&&r.autoBind){var u;n.value=n.value.bind((u=t.proxy_)!=null?u:t.target_)}var c=((a=this.options_)==null?void 0:a.deep)===!1?Te.ref:Te;return c.extend_(t,e,n,i)}function WP(t,e){$e("'"+this.annotationType_+"' cannot be used as a decorator")}var QP="observable",ZP="observable.ref",eL="observable.shallow",tL="observable.struct",mA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(mA);function Cf(t){return t||mA}var cv=sh(QP),nL=sh(ZP,{enhancer:rh}),iL=sh(eL,{enhancer:AP}),oL=sh(tL,{enhancer:RP}),gA=Mi(cv);function xf(t){return t.deep===!0?ts:t.deep===!1?rh:sL(t.defaultDecorator)}function rL(t){var e;return t?(e=t.defaultDecorator)!=null?e:pA(t):void 0}function sL(t){var e,n;return t&&(e=(n=t.options_)==null?void 0:n.enhancer)!=null?e:ts}function vA(t,e,n){if(Du(e))return cv.decorate_20223_(t,e);if(Zr(e)){Iu(t,e,cv);return}return by(t)?t:go(t)?Te.object(t,e,n):Array.isArray(t)?Te.array(t,e):Ia(t)?Te.map(t,e):ao(t)?Te.set(t,e):typeof t=="object"&&t!==null?t:Te.box(t,e)}tA(vA,gA);var aL={box:function(e,n){var i=Cf(n);return new sr(e,xf(i),i.name,!0,i.equals)},array:function(e,n){var i=Cf(n);return(ue.useProxies===!1||i.proxy===!1?iU:JL)(e,xf(i),i.name)},map:function(e,n){var i=Cf(n);return new BA(e,xf(i),i.name)},set:function(e,n){var i=Cf(n);return new $A(e,xf(i),i.name)},object:function(e,n,i){return _r(function(){return PA(ue.useProxies===!1||i?.proxy===!1?us({},i):zL({},i),e,n)})},ref:Mi(nL),shallow:Mi(iL),deep:gA,struct:Mi(oL)},Te=tA(vA,aL),yA="computed",lL="computed.struct",fv=vy(yA),uL=vy(lL,{equals:bd.structural}),lr=function(e,n){if(Du(n))return fv.decorate_20223_(e,n);if(Zr(n))return Iu(e,n,fv);if(go(e))return Mi(vy(yA,e));var i=go(n)?n:{};return i.get=e,i.name||(i.name=e.name||""),new ui(i)};Object.assign(lr,fv);lr.struct=Mi(uL);var nE,iE,wd=0,cL=1,fL=(nE=(iE=Sd(function(){},"name"))==null?void 0:iE.configurable)!=null?nE:!1,oE={value:"action",configurable:!0,writable:!1,enumerable:!1};function ns(t,e,n,i){n===void 0&&(n=!1);function r(){return _A(t,n,e,i||this,arguments)}return r.isMobxAction=!0,r.toString=function(){return e.toString()},fL&&(oE.value=t,Ri(r,"name",oE)),r}function _A(t,e,n,i,r){var a=dL(t,e);try{return n.apply(i,r)}catch(u){throw a.error_=u,u}finally{hL(a)}}function dL(t,e,n,i){var r=!1,a=0,u=ue.trackingDerivation,c=!e||!u;Bn();var h=ue.allowStateChanges;c&&(ls(),h=yy(!0));var d=Sy(!0),m={runAsAction_:c,prevDerivation_:u,prevAllowStateChanges_:h,prevAllowStateReads_:d,notifySpy_:r,startTime_:a,actionId_:cL++,parentActionId_:wd};return wd=m.actionId_,m}function hL(t){wd!==t.actionId_&&$e(30),wd=t.parentActionId_,t.error_!==void 0&&(ue.suppressReactionErrors=!0),_y(t.prevAllowStateChanges_),ru(t.prevAllowStateReads_),$n(),t.runAsAction_&&ho(t.prevDerivation_),ue.suppressReactionErrors=!1}function yy(t){var e=ue.allowStateChanges;return ue.allowStateChanges=t,e}function _y(t){ue.allowStateChanges=t}var sr=(function(t){function e(i,r,a,u,c){var h;return a===void 0&&(a="ObservableValue"),c===void 0&&(c=bd.default),h=t.call(this,a)||this,h.enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=r,h.name_=a,h.equals=c,h.value_=r(i,void 0,a),h}uA(e,t);var n=e.prototype;return n.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.set=function(r){this.value_,r=this.prepareNewValue_(r),r!==ue.UNCHANGED&&this.setNewValue_(r)},n.prepareNewValue_=function(r){if(Un(this)){var a=Fn(this,{object:this,type:Ni,newValue:r});if(!a)return ue.UNCHANGED;r=a.newValue}return r=this.enhancer(r,this.value_,this.name_),this.equals(this.value_,r)?ue.UNCHANGED:r},n.setNewValue_=function(r){var a=this.value_;this.value_=r,this.reportChanged(),oi(this)&&ri(this,{type:Ni,object:this,newValue:r,oldValue:a})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(r){return Pu(this,r)},n.observe_=function(r,a){return a&&r({observableKind:"value",debugObjectName:this.name_,object:this,type:Ni,newValue:this.value_,oldValue:void 0}),Lu(this,r)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return lA(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e})(gr),pL=mr("ObservableValue",sr),ui=(function(){function t(n){this.dependenciesState_=qe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=qe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Td(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ed.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||$e(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=ns("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?bd.structural:bd.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){_L(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.get=function(){if(this.isComputing&&$e(32,this.name_,this.derivation),ue.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)dv(this)&&(this.warnAboutUntrackedRead_(),Bn(),this.value_=this.computeValue_(!1),$n());else if(xA(this),dv(this)){var i=ue.trackingContext;this.keepAlive_&&!i&&(ue.trackingContext=this),this.trackAndCompute()&&yL(this),ue.trackingContext=i}var r=this.value_;if(td(r))throw r.cause;return r},e.set=function(i){if(this.setter_){this.isRunningSetter&&$e(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,i)}finally{this.isRunningSetter=!1}}else $e(34,this.name_)},e.trackAndCompute=function(){var i=this.value_,r=this.dependenciesState_===qe.NOT_TRACKING_,a=this.computeValue_(!0),u=r||td(i)||td(a)||!this.equals_(i,a);return u&&(this.value_=a),u},e.computeValue_=function(i){this.isComputing=!0;var r=yy(!1),a;if(i)a=SA(this,this.derivation,this.scope_);else if(ue.disableErrorBoundaries===!0)a=this.derivation.call(this.scope_);else try{a=this.derivation.call(this.scope_)}catch(u){a=new Td(u)}return _y(r),this.isComputing=!1,a},e.suspend_=function(){this.keepAlive_||(hv(this),this.value_=void 0)},e.observe_=function(i,r){var a=this,u=!0,c=void 0;return RL(function(){var h=a.get();if(!u||r){var d=ls();i({observableKind:"computed",debugObjectName:a.name_,type:Ni,object:a,newValue:h,oldValue:c}),ho(d)}u=!1,c=h})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return lA(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},Da(t,[{key:"isComputing",get:function(){return Sn(this.flags_,t.isComputingMask_)},set:function(i){this.flags_=bn(this.flags_,t.isComputingMask_,i)}},{key:"isRunningSetter",get:function(){return Sn(this.flags_,t.isRunningSetterMask_)},set:function(i){this.flags_=bn(this.flags_,t.isRunningSetterMask_,i)}},{key:"isBeingObserved",get:function(){return Sn(this.flags_,t.isBeingObservedMask_)},set:function(i){this.flags_=bn(this.flags_,t.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return Sn(this.flags_,t.isPendingUnobservationMask_)},set:function(i){this.flags_=bn(this.flags_,t.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return Sn(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=bn(this.flags_,t.diffValueMask_,i===1)}}])})();ui.isComputingMask_=1;ui.isRunningSetterMask_=2;ui.isBeingObservedMask_=4;ui.isPendingUnobservationMask_=8;ui.diffValueMask_=16;var ku=mr("ComputedValue",ui),qe;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(qe||(qe={}));var Ed;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(Ed||(Ed={}));var Td=function(e){this.cause=void 0,this.cause=e};function td(t){return t instanceof Td}function dv(t){switch(t.dependenciesState_){case qe.UP_TO_DATE_:return!1;case qe.NOT_TRACKING_:case qe.STALE_:return!0;case qe.POSSIBLY_STALE_:{for(var e=Sy(!0),n=ls(),i=t.observing_,r=i.length,a=0;a<r;a++){var u=i[a];if(ku(u)){if(ue.disableErrorBoundaries)u.get();else try{u.get()}catch{return ho(n),ru(e),!0}if(t.dependenciesState_===qe.STALE_)return ho(n),ru(e),!0}}return wA(t),ho(n),ru(e),!1}}}function SA(t,e,n){var i=Sy(!0);wA(t),t.newObserving_=new Array(t.runId_===0?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++ue.runId;var r=ue.trackingDerivation;ue.trackingDerivation=t,ue.inBatch++;var a;if(ue.disableErrorBoundaries===!0)a=e.call(n);else try{a=e.call(n)}catch(u){a=new Td(u)}return ue.inBatch--,ue.trackingDerivation=r,mL(t),ru(i),a}function mL(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,i=qe.UP_TO_DATE_,r=0,a=t.unboundDepsCount_,u=0;u<a;u++){var c=n[u];c.diffValue===0&&(c.diffValue=1,r!==u&&(n[r]=c),r++),c.dependenciesState_>i&&(i=c.dependenciesState_)}for(n.length=r,t.newObserving_=null,a=e.length;a--;){var h=e[a];h.diffValue===0&&TA(h,t),h.diffValue=0}for(;r--;){var d=n[r];d.diffValue===1&&(d.diffValue=0,vL(d,t))}i!==qe.UP_TO_DATE_&&(t.dependenciesState_=i,t.onBecomeStale_())}function hv(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)TA(e[n],t);t.dependenciesState_=qe.NOT_TRACKING_}function bA(t){var e=ls();try{return t()}finally{ho(e)}}function ls(){var t=ue.trackingDerivation;return ue.trackingDerivation=null,t}function ho(t){ue.trackingDerivation=t}function Sy(t){var e=ue.allowStateReads;return ue.allowStateReads=t,e}function ru(t){ue.allowStateReads=t}function wA(t){if(t.dependenciesState_!==qe.UP_TO_DATE_){t.dependenciesState_=qe.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=qe.UP_TO_DATE_}}var nd=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},id=!0,EA=!1,ue=(function(){var t=ih();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(id=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new nd().version&&(id=!1),id?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new nd):(setTimeout(function(){EA||$e(35)},1),new nd)})();function gL(){if((ue.pendingReactions.length||ue.inBatch||ue.isRunningReactions)&&$e(36),EA=!0,id){var t=ih();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),ue=new nd}}function vL(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function TA(t,e){t.observers_.delete(e),t.observers_.size===0&&CA(t)}function CA(t){t.isPendingUnobservation===!1&&(t.isPendingUnobservation=!0,ue.pendingUnobservations.push(t))}function Bn(){ue.inBatch++}function $n(){if(--ue.inBatch===0){RA();for(var t=ue.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof ui&&n.suspend_())}ue.pendingUnobservations=[]}}function xA(t){var e=ue.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&ue.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(t.observers_.size===0&&ue.inBatch>0&&CA(t),!1)}function AA(t){t.lowestObserverState_!==qe.STALE_&&(t.lowestObserverState_=qe.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===qe.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=qe.STALE_}))}function yL(t){t.lowestObserverState_!==qe.STALE_&&(t.lowestObserverState_=qe.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===qe.POSSIBLY_STALE_?e.dependenciesState_=qe.STALE_:e.dependenciesState_===qe.UP_TO_DATE_&&(t.lowestObserverState_=qe.UP_TO_DATE_)}))}function _L(t){t.lowestObserverState_===qe.UP_TO_DATE_&&(t.lowestObserverState_=qe.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===qe.UP_TO_DATE_&&(e.dependenciesState_=qe.POSSIBLY_STALE_,e.onBecomeStale_())}))}var vo=(function(){function t(n,i,r,a){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=qe.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Ed.NONE,this.name_=n,this.onInvalidate_=i,this.errorHandler_=r,this.requiresObservable_=a}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,ue.pendingReactions.push(this),RA())},e.runReaction_=function(){if(!this.isDisposed){Bn(),this.isScheduled=!1;var i=ue.trackingContext;if(ue.trackingContext=this,dv(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(r){this.reportExceptionInDerivation_(r)}}ue.trackingContext=i,$n()}},e.track=function(i){if(!this.isDisposed){Bn(),this.isRunning=!0;var r=ue.trackingContext;ue.trackingContext=this;var a=SA(this,i,void 0);ue.trackingContext=r,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&hv(this),td(a)&&this.reportExceptionInDerivation_(a.cause),$n()}},e.reportExceptionInDerivation_=function(i){var r=this;if(this.errorHandler_){this.errorHandler_(i,this);return}if(ue.disableErrorBoundaries)throw i;var a="[mobx] uncaught error in '"+this+"'";ue.suppressReactionErrors||console.error(a,i),ue.globalReactionErrorHandlers.forEach(function(u){return u(i,r)})},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Bn(),hv(this),$n()))},e.getDisposer_=function(i){var r=this,a=function u(){r.dispose(),i==null||i.removeEventListener==null||i.removeEventListener("abort",u)};return i==null||i.addEventListener==null||i.addEventListener("abort",a),a[Ce]=this,"dispose"in Symbol&&typeof Symbol.dispose=="symbol"&&(a[Symbol.dispose]=a),a},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(i){},Da(t,[{key:"isDisposed",get:function(){return Sn(this.flags_,t.isDisposedMask_)},set:function(i){this.flags_=bn(this.flags_,t.isDisposedMask_,i)}},{key:"isScheduled",get:function(){return Sn(this.flags_,t.isScheduledMask_)},set:function(i){this.flags_=bn(this.flags_,t.isScheduledMask_,i)}},{key:"isTrackPending",get:function(){return Sn(this.flags_,t.isTrackPendingMask_)},set:function(i){this.flags_=bn(this.flags_,t.isTrackPendingMask_,i)}},{key:"isRunning",get:function(){return Sn(this.flags_,t.isRunningMask_)},set:function(i){this.flags_=bn(this.flags_,t.isRunningMask_,i)}},{key:"diffValue",get:function(){return Sn(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=bn(this.flags_,t.diffValueMask_,i===1)}}])})();vo.isDisposedMask_=1;vo.isScheduledMask_=2;vo.isTrackPendingMask_=4;vo.isRunningMask_=8;vo.diffValueMask_=16;var SL=100,pv=function(e){return e()};function RA(){ue.inBatch>0||ue.isRunningReactions||pv(bL)}function bL(){ue.isRunningReactions=!0;for(var t=ue.pendingReactions,e=0;t.length>0;){++e===SL&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}ue.isRunningReactions=!1}var Cd=mr("Reaction",vo);function wL(t){var e=pv;pv=function(i){return t(function(){return e(i)})}}function su(){return!1}function EL(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var MA="action",TL="action.bound",NA="autoAction",CL="autoAction.bound",IA="<unnamed action>",mv=Ou(MA),xL=Ou(TL,{bound:!0}),gv=Ou(NA,{autoAction:!0}),AL=Ou(CL,{autoAction:!0,bound:!0});function DA(t){var e=function(i,r){if(li(i))return ns(i.name||IA,i,t);if(li(r))return ns(i,r,t);if(Du(r))return(t?gv:mv).decorate_20223_(i,r);if(Zr(r))return Iu(i,r,t?gv:mv);if(Zr(i))return Mi(Ou(t?NA:MA,{name:i,autoAction:t}))};return e}var ut=DA(!1);Object.assign(ut,mv);var pu=DA(!0);Object.assign(pu,gv);ut.bound=Mi(xL);pu.bound=Mi(AL);function we(t){return _A(t.name||IA,!1,t,this,void 0)}function Ea(t){return li(t)&&t.isMobxAction===!0}function RL(t,e){var n,i,r,a;e===void 0&&(e=nA);var u=(n=(i=e)==null?void 0:i.name)!=null?n:"Autorun",c=!e.scheduler&&!e.delay,h;if(c)h=new vo(u,function(){this.track(y)},e.onError,e.requiresObservable);else{var d=NL(e),m=!1;h=new vo(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed||h.track(y)}))},e.onError,e.requiresObservable)}function y(){t(h)}return(r=e)!=null&&(r=r.signal)!=null&&r.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var ML=function(e){return e()};function NL(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:ML}var IL="onBO",DL="onBUO";function OL(t,e,n){return kA(IL,t,e,n)}function OA(t,e,n){return kA(DL,t,e,n)}function kA(t,e,n,i){var r=Rd(e),a=li(i)?i:n,u=t+"L";return r[u]?r[u].add(a):r[u]=new Set([a]),function(){var c=r[u];c&&(c.delete(a),c.size===0&&delete r[u])}}var kL="never",Af="always",PL="observed";function LL(t){t.isolateGlobalState===!0&&gL();var e=t.useProxies,n=t.enforceActions;if(e!==void 0&&(ue.useProxies=e===Af?!0:e===kL?!1:typeof Proxy<"u"),e==="ifavailable"&&(ue.verifyProxies=!0),n!==void 0){var i=n===Af?Af:n===PL;ue.enforceActions=i,ue.allowStateChanges=!(i===!0||i===Af)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(r){r in t&&(ue[r]=!!t[r])}),ue.allowStateReads=!ue.observableRequiresReaction,t.reactionScheduler&&wL(t.reactionScheduler)}function PA(t,e,n,i){var r=_P(e);return _r(function(){var a=us(t,i)[Ce];wa(r).forEach(function(u){a.extend_(u,r[u],n&&u in n?n[u]:!0)})}),t}function UL(t,e){return LA(Rd(t,e))}function LA(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=FL(t.observing_).map(LA)),e}function FL(t){return Array.from(new Set(t))}var BL=0;function UA(){this.message="FLOW_CANCELLED"}UA.prototype=Object.create(Error.prototype);var cg=dA("flow"),$L=dA("flow.bound",{bound:!0}),Ta=Object.assign(function(e,n){if(Du(n))return cg.decorate_20223_(e,n);if(Zr(n))return Iu(e,n,cg);var i=e,r=i.name||"<unnamed flow>",a=function(){var c=this,h=arguments,d=++BL,m=ut(r+" - runid: "+d+" - init",i).apply(c,h),y,S=void 0,w=new Promise(function(C,x){var A=0;y=x;function M(D){S=void 0;var L;try{L=ut(r+" - runid: "+d+" - yield "+A++,m.next).call(m,D)}catch(U){return x(U)}N(L)}function I(D){S=void 0;var L;try{L=ut(r+" - runid: "+d+" - yield "+A++,m.throw).call(m,D)}catch(U){return x(U)}N(L)}function N(D){if(li(D?.then)){D.then(N,x);return}return D.done?C(D.value):(S=Promise.resolve(D.value),S.then(M,I))}M(void 0)});return w.cancel=ut(r+" - runid: "+d+" - cancel",function(){try{S&&rE(S);var C=m.return(void 0),x=Promise.resolve(C.value);x.then(da,da),rE(x),y(new UA)}catch(A){y(A)}}),w};return a.isMobXFlow=!0,a},cg);Ta.bound=Mi($L);function rE(t){li(t.cancel)&&t.cancel()}function mu(t){return t?.isMobXFlow===!0}function GL(t,e){return t?Fu(t)||!!t[Ce]||gy(t)||Cd(t)||ku(t):!1}function by(t){return GL(t)}function HL(t){if(Fu(t))return t[Ce].ownKeys_();$e(38)}function Rf(t,e,n){return t.set(e,n),n}function aa(t,e){if(t==null||typeof t!="object"||t instanceof Date||!by(t))return t;if(pL(t)||ku(t))return aa(t.get(),e);if(e.has(t))return e.get(t);if(Uu(t)){var n=Rf(e,t,new Array(t.length));return t.forEach(function(u,c){n[c]=aa(u,e)}),n}if(ti(t)){var i=Rf(e,t,new Set);return t.forEach(function(u){i.add(aa(u,e))}),i}if(yr(t)){var r=Rf(e,t,new Map);return t.forEach(function(u,c){r.set(c,aa(u,e))}),r}else{var a=Rf(e,t,{});return HL(t).forEach(function(u){Mu.propertyIsEnumerable.call(t,u)&&(a[u]=aa(t[u],e))}),a}}function yo(t,e){return aa(t,new Map)}function lo(t,e){e===void 0&&(e=void 0),Bn();try{return t.apply(e)}finally{$n()}}function Qs(t){return t[Ce]}var VL={has:function(e,n){return Qs(e).has_(n)},get:function(e,n){return Qs(e).get_(n)},set:function(e,n,i){var r;return Zr(n)?(r=Qs(e).set_(n,i,!0))!=null?r:!0:!1},deleteProperty:function(e,n){var i;return Zr(n)?(i=Qs(e).delete_(n,!0))!=null?i:!0:!1},defineProperty:function(e,n,i){var r;return(r=Qs(e).defineProperty_(n,i))!=null?r:!0},ownKeys:function(e){return Qs(e).ownKeys_()},preventExtensions:function(e){$e(13)}};function zL(t,e){var n,i;return iA(),t=us(t,e),(i=(n=t[Ce]).proxy_)!=null?i:n.proxy_=new Proxy(t,VL)}function Un(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function Pu(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),oA(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function Fn(t,e){var n=ls();try{for(var i=[].concat(t.interceptors_||[]),r=0,a=i.length;r<a&&(e=i[r](e),e&&!e.type&&$e(14),!!e);r++);return e}finally{ho(n)}}function oi(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function Lu(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),oA(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function ri(t,e){var n=ls(),i=t.changeListeners_;if(i){i=i.slice();for(var r=0,a=i.length;r<a;r++)i[r](e);ho(n)}}function vr(t,e,n){return _r(function(){var i,r=us(t,n)[Ce];(i=e)!=null||(e=TP(t)),wa(e).forEach(function(a){return r.make_(a,e[a])})}),t}var fg=Symbol("mobx-keys");function Oa(t,e,n){return go(t)?PA(t,t,e,n):(_r(function(){var i=us(t,n)[Ce];if(!t[fg]){var r=Object.getPrototypeOf(t),a=new Set([].concat(wa(t),wa(r)));a.delete("constructor"),a.delete(Ce),Nu(r,fg,a)}t[fg].forEach(function(u){return i.make_(u,e&&u in e?e[u]:!0)})}),t)}var sE="splice",Ni="update",qL=1e4,jL={get:function(e,n){var i=e[Ce];return n===Ce?i:n==="length"?i.getArrayLength_():typeof n=="string"&&!isNaN(n)?i.get_(parseInt(n)):fo(xd,n)?xd[n]:e[n]},set:function(e,n,i){var r=e[Ce];return n==="length"&&r.setArrayLength_(i),typeof n=="symbol"||isNaN(n)?e[n]=i:r.set_(parseInt(n),i),!0},preventExtensions:function(){$e(15)}},wy=(function(){function t(n,i,r,a){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=a,this.atom_=new gr(n),this.enhancer_=function(u,c){return i(u,c,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.dehanceValues_=function(i){return this.dehancer!==void 0&&i.length>0?i.map(this.dehancer):i},e.intercept_=function(i){return Pu(this,i)},e.observe_=function(i,r){return r===void 0&&(r=!1),r&&i({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Lu(this,i)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(i){(typeof i!="number"||isNaN(i)||i<0)&&$e("Out of range: "+i);var r=this.values_.length;if(i!==r)if(i>r){for(var a=new Array(i-r),u=0;u<i-r;u++)a[u]=void 0;this.spliceWithArray_(r,0,a)}else this.spliceWithArray_(i,r-i)},e.updateArrayLength_=function(i,r){i!==this.lastKnownLength_&&$e(16),this.lastKnownLength_+=r,this.legacyMode_&&r>0&&zA(i+r+1)},e.spliceWithArray_=function(i,r,a){var u=this;this.atom_;var c=this.values_.length;if(i===void 0?i=0:i>c?i=c:i<0&&(i=Math.max(0,c+i)),arguments.length===1?r=c-i:r==null?r=0:r=Math.max(0,Math.min(r,c-i)),a===void 0&&(a=lv),Un(this)){var h=Fn(this,{object:this.proxy_,type:sE,index:i,removedCount:r,added:a});if(!h)return lv;r=h.removedCount,a=h.added}if(a=a.length===0?a:a.map(function(y){return u.enhancer_(y,void 0)}),this.legacyMode_){var d=a.length-r;this.updateArrayLength_(c,d)}var m=this.spliceItemsIntoValues_(i,r,a);return(r!==0||a.length!==0)&&this.notifyArraySplice_(i,a,m),this.dehanceValues_(m)},e.spliceItemsIntoValues_=function(i,r,a){if(a.length<qL){var u;return(u=this.values_).splice.apply(u,[i,r].concat(a))}else{var c=this.values_.slice(i,i+r),h=this.values_.slice(i+r);this.values_.length+=a.length-r;for(var d=0;d<a.length;d++)this.values_[i+d]=a[d];for(var m=0;m<h.length;m++)this.values_[i+a.length+m]=h[m];return c}},e.notifyArrayChildUpdate_=function(i,r,a){var u=!this.owned_&&su(),c=oi(this),h=c||u?{observableKind:"array",object:this.proxy_,type:Ni,debugObjectName:this.atom_.name_,index:i,newValue:r,oldValue:a}:null;this.atom_.reportChanged(),c&&ri(this,h)},e.notifyArraySplice_=function(i,r,a){var u=!this.owned_&&su(),c=oi(this),h=c||u?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:sE,index:i,removed:a,added:r,removedCount:a.length,addedCount:r.length}:null;this.atom_.reportChanged(),c&&ri(this,h)},e.get_=function(i){if(this.legacyMode_&&i>=this.values_.length){console.warn("[mobx] Out of bounds read: "+i);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[i])},e.set_=function(i,r){var a=this.values_;if(this.legacyMode_&&i>a.length&&$e(17,i,a.length),i<a.length){this.atom_;var u=a[i];if(Un(this)){var c=Fn(this,{type:Ni,object:this.proxy_,index:i,newValue:r});if(!c)return;r=c.newValue}r=this.enhancer_(r,u);var h=r!==u;h&&(a[i]=r,this.notifyArrayChildUpdate_(i,r,u))}else{for(var d=new Array(i+1-a.length),m=0;m<d.length-1;m++)d[m]=void 0;d[d.length-1]=r,this.spliceWithArray_(a.length,0,d)}},t})();function JL(t,e,n,i){return n===void 0&&(n="ObservableArray"),i===void 0&&(i=!1),iA(),_r(function(){var r=new wy(n,e,i,!1);sA(r.values_,Ce,r);var a=new Proxy(r.values_,jL);return r.proxy_=a,t&&t.length&&r.spliceWithArray_(0,0,t),a})}var xd={clear:function(){return this.splice(0)},replace:function(e){var n=this[Ce];return n.spliceWithArray_(0,n.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];var u=this[Ce];switch(arguments.length){case 0:return[];case 1:return u.spliceWithArray_(e);case 2:return u.spliceWithArray_(e,n)}return u.spliceWithArray_(e,n,r)},spliceWithArray:function(e,n,i){return this[Ce].spliceWithArray_(e,n,i)},push:function(){for(var e=this[Ce],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,i),e.values_.length},pop:function(){return this.splice(Math.max(this[Ce].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ce],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(0,0,i),e.values_.length},reverse:function(){return ue.trackingDerivation&&$e(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ue.trackingDerivation&&$e(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var n=this[Ce],i=n.dehanceValues_(n.values_).indexOf(e);return i>-1?(this.splice(i,1),!0):!1}};rt("at",Tn);rt("concat",Tn);rt("flat",Tn);rt("includes",Tn);rt("indexOf",Tn);rt("join",Tn);rt("lastIndexOf",Tn);rt("slice",Tn);rt("toString",Tn);rt("toLocaleString",Tn);rt("toSorted",Tn);rt("toSpliced",Tn);rt("with",Tn);rt("every",di);rt("filter",di);rt("find",di);rt("findIndex",di);rt("findLast",di);rt("findLastIndex",di);rt("flatMap",di);rt("forEach",di);rt("map",di);rt("some",di);rt("toReversed",di);rt("reduce",FA);rt("reduceRight",FA);function rt(t,e){typeof Array.prototype[t]=="function"&&(xd[t]=e(t))}function Tn(t){return function(){var e=this[Ce];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function di(t){return function(e,n){var i=this,r=this[Ce];r.atom_.reportObserved();var a=r.dehanceValues_(r.values_);return a[t](function(u,c){return e.call(n,u,c,i)})}}function FA(t){return function(){var e=this,n=this[Ce];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(a,u,c){return r(a,u,c,e)},i[t].apply(i,arguments)}}var KL=mr("ObservableArrayAdministration",wy);function Uu(t){return oh(t)&&KL(t[Ce])}var YL={},ir="add",Ad="delete",BA=(function(){function t(n,i,r){var a=this;i===void 0&&(i=ts),r===void 0&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ce]=YL,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=i,this.name_=r,li(Map)||$e(18),_r(function(){a.keysAtom_=cA("ObservableMap.keys()"),a.data_=new Map,a.hasMap_=new Map,n&&a.merge(n)})}var e=t.prototype;return e.has_=function(i){return this.data_.has(i)},e.has=function(i){var r=this;if(!ue.trackingDerivation)return this.has_(i);var a=this.hasMap_.get(i);if(!a){var u=a=new sr(this.has_(i),rh,"ObservableMap.key?",!1);this.hasMap_.set(i,u),OA(u,function(){return r.hasMap_.delete(i)})}return a.get()},e.set=function(i,r){var a=this.has_(i);if(Un(this)){var u=Fn(this,{type:a?Ni:ir,object:this,newValue:r,name:i});if(!u)return this;r=u.newValue}return a?this.updateValue_(i,r):this.addValue_(i,r),this},e.delete=function(i){var r=this;if(this.keysAtom_,Un(this)){var a=Fn(this,{type:Ad,object:this,name:i});if(!a)return!1}if(this.has_(i)){var u=su(),c=oi(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:Ad,object:this,oldValue:this.data_.get(i).value_,name:i}:null;return lo(function(){var d;r.keysAtom_.reportChanged(),(d=r.hasMap_.get(i))==null||d.setNewValue_(!1);var m=r.data_.get(i);m.setNewValue_(void 0),r.data_.delete(i)}),c&&ri(this,h),!0}return!1},e.updateValue_=function(i,r){var a=this.data_.get(i);if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var u=su(),c=oi(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:Ni,object:this,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),c&&ri(this,h)}},e.addValue_=function(i,r){var a=this;this.keysAtom_,lo(function(){var d,m=new sr(r,a.enhancer_,"ObservableMap.key",!1);a.data_.set(i,m),r=m.value_,(d=a.hasMap_.get(i))==null||d.setNewValue_(!0),a.keysAtom_.reportChanged()});var u=su(),c=oi(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:ir,object:this,name:i,newValue:r}:null;c&&ri(this,h)},e.get=function(i){return this.has(i)?this.dehanceValue_(this.data_.get(i).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var i=this,r=this.keys();return aE({next:function(){var u=r.next(),c=u.done,h=u.value;return{done:c,value:c?void 0:i.get(h)}}})},e.entries=function(){var i=this,r=this.keys();return aE({next:function(){var u=r.next(),c=u.done,h=u.value;return{done:c,value:c?void 0:[h,i.get(h)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(i,r){for(var a=ha(this),u;!(u=a()).done;){var c=u.value,h=c[0],d=c[1];i.call(r,d,h,this)}},e.merge=function(i){var r=this;return yr(i)&&(i=new Map(i)),lo(function(){go(i)?yP(i).forEach(function(a){return r.set(a,i[a])}):Array.isArray(i)?i.forEach(function(a){var u=a[0],c=a[1];return r.set(u,c)}):Ia(i)?(vP(i)||$e(19,i),i.forEach(function(a,u){return r.set(u,a)})):i!=null&&$e(20,i)}),this},e.clear=function(){var i=this;lo(function(){bA(function(){for(var r=ha(i.keys()),a;!(a=r()).done;){var u=a.value;i.delete(u)}})})},e.replace=function(i){var r=this;return lo(function(){for(var a=XL(i),u=new Map,c=!1,h=ha(r.data_.keys()),d;!(d=h()).done;){var m=d.value;if(!a.has(m)){var y=r.delete(m);if(y)c=!0;else{var S=r.data_.get(m);u.set(m,S)}}}for(var w=ha(a.entries()),C;!(C=w()).done;){var x=C.value,A=x[0],M=x[1],I=r.data_.has(A);if(r.set(A,M),r.data_.has(A)){var N=r.data_.get(A);u.set(A,N),I||(c=!0)}}if(!c)if(r.data_.size!==u.size)r.keysAtom_.reportChanged();else for(var D=r.data_.keys(),L=u.keys(),U=D.next(),O=L.next();!U.done;){if(U.value!==O.value){r.keysAtom_.reportChanged();break}U=D.next(),O=L.next()}r.data_=u}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(i,r){return Lu(this,i)},e.intercept_=function(i){return Pu(this,i)},Da(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])})(),yr=mr("ObservableMap",BA);function aE(t){return t[Symbol.toStringTag]="MapIterator",Ty(t)}function XL(t){if(Ia(t)||yr(t))return t;if(Array.isArray(t))return new Map(t);if(go(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}else return $e(21,t)}var WL={},$A=(function(){function t(n,i,r){var a=this;i===void 0&&(i=ts),r===void 0&&(r="ObservableSet"),this.name_=void 0,this[Ce]=WL,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,li(Set)||$e(22),this.enhancer_=function(u,c){return i(u,c,r)},_r(function(){a.atom_=cA(a.name_),n&&a.replace(n)})}var e=t.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.clear=function(){var i=this;lo(function(){bA(function(){for(var r=ha(i.data_.values()),a;!(a=r()).done;){var u=a.value;i.delete(u)}})})},e.forEach=function(i,r){for(var a=ha(this),u;!(u=a()).done;){var c=u.value;i.call(r,c,c,this)}},e.add=function(i){var r=this;if(this.atom_,Un(this)){var a=Fn(this,{type:ir,object:this,newValue:i});if(!a)return this;i=a.newValue}if(!this.has(i)){lo(function(){r.data_.add(r.enhancer_(i,void 0)),r.atom_.reportChanged()});var u=!1,c=oi(this),h=c||u?{observableKind:"set",debugObjectName:this.name_,type:ir,object:this,newValue:i}:null;c&&ri(this,h)}return this},e.delete=function(i){var r=this;if(Un(this)){var a=Fn(this,{type:Ad,object:this,oldValue:i});if(!a)return!1}if(this.has(i)){var u=!1,c=oi(this),h=c||u?{observableKind:"set",debugObjectName:this.name_,type:Ad,object:this,oldValue:i}:null;return lo(function(){r.atom_.reportChanged(),r.data_.delete(i)}),c&&ri(this,h),!0}return!1},e.has=function(i){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(i))},e.entries=function(){var i=this.values();return lE({next:function(){var a=i.next(),u=a.value,c=a.done;return c?{value:void 0,done:c}:{value:[u,u],done:c}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var i=this,r=this.data_.values();return lE({next:function(){var u=r.next(),c=u.value,h=u.done;return h?{value:void 0,done:h}:{value:i.dehanceValue_(c),done:h}}})},e.intersection=function(i){if(ao(i)&&!ti(i))return i.intersection(this);var r=new Set(this);return r.intersection(i)},e.union=function(i){if(ao(i)&&!ti(i))return i.union(this);var r=new Set(this);return r.union(i)},e.difference=function(i){return new Set(this).difference(i)},e.symmetricDifference=function(i){if(ao(i)&&!ti(i))return i.symmetricDifference(this);var r=new Set(this);return r.symmetricDifference(i)},e.isSubsetOf=function(i){return new Set(this).isSubsetOf(i)},e.isSupersetOf=function(i){return new Set(this).isSupersetOf(i)},e.isDisjointFrom=function(i){if(ao(i)&&!ti(i))return i.isDisjointFrom(this);var r=new Set(this);return r.isDisjointFrom(i)},e.replace=function(i){var r=this;return ti(i)&&(i=new Set(i)),lo(function(){Array.isArray(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):ao(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):i!=null&&$e("Cannot initialize set from "+i)}),this},e.observe_=function(i,r){return Lu(this,i)},e.intercept_=function(i){return Pu(this,i)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},Da(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])})(),ti=mr("ObservableSet",$A);function lE(t){return t[Symbol.toStringTag]="SetIterator",Ty(t)}var uE=Object.create(null),cE="remove",GA=(function(){function t(n,i,r,a){i===void 0&&(i=new Map),a===void 0&&(a=KP),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=i,this.name_=r,this.defaultAnnotation_=a,this.keysAtom_=new gr("ObservableObject.keys"),this.isPlainObject_=go(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(i){return this.values_.get(i).get()},e.setObservablePropValue_=function(i,r){var a=this.values_.get(i);if(a instanceof ui)return a.set(r),!0;if(Un(this)){var u=Fn(this,{type:Ni,object:this.proxy_||this.target_,name:i,newValue:r});if(!u)return null;r=u.newValue}if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var c=oi(this),h=!1,d=c||h?{type:Ni,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),c&&ri(this,d)}return!0},e.get_=function(i){return ue.trackingDerivation&&!fo(this.target_,i)&&this.has_(i),this.target_[i]},e.set_=function(i,r,a){return a===void 0&&(a=!1),fo(this.target_,i)?this.values_.has(i)?this.setObservablePropValue_(i,r):a?Reflect.set(this.target_,i,r):(this.target_[i]=r,!0):this.extend_(i,{value:r,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,a)},e.has_=function(i){if(!ue.trackingDerivation)return i in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var r=this.pendingKeys_.get(i);return r||(r=new sr(i in this.target_,rh,"ObservableObject.key?",!1),this.pendingKeys_.set(i,r)),r.get()},e.make_=function(i,r){if(r===!0&&(r=this.defaultAnnotation_),r!==!1){if(!(i in this.target_)){var a;if((a=this.target_[Ei])!=null&&a[i])return;$e(1,r.annotationType_,this.name_+"."+i.toString())}for(var u=this.target_;u&&u!==Mu;){var c=Sd(u,i);if(c){var h=r.make_(this,i,c,u);if(h===0)return;if(h===1)break}u=Object.getPrototypeOf(u)}dE(this,r,i)}},e.extend_=function(i,r,a,u){if(u===void 0&&(u=!1),a===!0&&(a=this.defaultAnnotation_),a===!1)return this.defineProperty_(i,r,u);var c=a.extend_(this,i,r,u);return c&&dE(this,a,i),c},e.defineProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Bn();var u=this.delete_(i);if(!u)return u;if(Un(this)){var c=Fn(this,{object:this.proxy_||this.target_,name:i,type:ir,newValue:r.value});if(!c)return null;var h=c.newValue;r.value!==h&&(r=es({},r,{value:h}))}if(a){if(!Reflect.defineProperty(this.target_,i,r))return!1}else Ri(this.target_,i,r);this.notifyPropertyAddition_(i,r.value)}finally{$n()}return!0},e.defineObservableProperty_=function(i,r,a,u){u===void 0&&(u=!1),this.keysAtom_;try{Bn();var c=this.delete_(i);if(!c)return c;if(Un(this)){var h=Fn(this,{object:this.proxy_||this.target_,name:i,type:ir,newValue:r});if(!h)return null;r=h.newValue}var d=fE(i),m={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:d.get,set:d.set};if(u){if(!Reflect.defineProperty(this.target_,i,m))return!1}else Ri(this.target_,i,m);var y=new sr(r,a,"ObservableObject.key",!1);this.values_.set(i,y),this.notifyPropertyAddition_(i,y.value_)}finally{$n()}return!0},e.defineComputedProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Bn();var u=this.delete_(i);if(!u)return u;if(Un(this)){var c=Fn(this,{object:this.proxy_||this.target_,name:i,type:ir,newValue:void 0});if(!c)return null}r.name||(r.name="ObservableObject.key"),r.context=this.proxy_||this.target_;var h=fE(i),d={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,i,d))return!1}else Ri(this.target_,i,d);this.values_.set(i,new ui(r)),this.notifyPropertyAddition_(i,void 0)}finally{$n()}return!0},e.delete_=function(i,r){if(r===void 0&&(r=!1),this.keysAtom_,!fo(this.target_,i))return!0;if(Un(this)){var a=Fn(this,{object:this.proxy_||this.target_,name:i,type:cE});if(!a)return null}try{var u;Bn();var c=oi(this),h=!1,d=this.values_.get(i),m=void 0;if(!d&&(c||h)){var y;m=(y=Sd(this.target_,i))==null?void 0:y.value}if(r){if(!Reflect.deleteProperty(this.target_,i))return!1}else delete this.target_[i];if(d&&(this.values_.delete(i),d instanceof sr&&(m=d.value_),AA(d)),this.keysAtom_.reportChanged(),(u=this.pendingKeys_)==null||(u=u.get(i))==null||u.set(i in this.target_),c||h){var S={type:cE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:i};c&&ri(this,S)}}finally{$n()}return!0},e.observe_=function(i,r){return Lu(this,i)},e.intercept_=function(i){return Pu(this,i)},e.notifyPropertyAddition_=function(i,r){var a,u=oi(this),c=!1;if(u||c){var h=u||c?{type:ir,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:i,newValue:r}:null;u&&ri(this,h)}(a=this.pendingKeys_)==null||(a=a.get(i))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),wa(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t})();function us(t,e){var n;if(fo(t,Ce))return t;var i=(n=e?.name)!=null?n:"ObservableObject",r=new GA(t,new Map,String(i),rL(e));return Nu(t,Ce,r),t}var QL=mr("ObservableObjectAdministration",GA);function fE(t){return uE[t]||(uE[t]={get:function(){return this[Ce].getObservablePropValue_(t)},set:function(n){return this[Ce].setObservablePropValue_(t,n)}})}function Fu(t){return oh(t)?QL(t[Ce]):!1}function dE(t,e,n){var i;(i=t.target_[Ei])==null||delete i[n]}var ZL=VA(0),eU=(function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1})(),dg=0,HA=function(){};function tU(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}tU(HA,Array.prototype);var Ey=(function(t){function e(i,r,a,u){var c;return a===void 0&&(a="ObservableArray"),u===void 0&&(u=!1),c=t.call(this)||this,_r(function(){var h=new wy(a,r,u,!0);h.proxy_=c,sA(c,Ce,h),i&&i.length&&c.spliceWithArray(0,0,i),eU&&Object.defineProperty(c,"0",ZL)}),c}uA(e,t);var n=e.prototype;return n.concat=function(){this[Ce].atom_.reportObserved();for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return Array.prototype.concat.apply(this.slice(),a.map(function(c){return Uu(c)?c.slice():c}))},n[Symbol.iterator]=function(){var i=this,r=0;return Ty({next:function(){return r<i.length?{value:i[r++],done:!1}:{done:!0,value:void 0}}})},Da(e,[{key:"length",get:function(){return this[Ce].getArrayLength_()},set:function(r){this[Ce].setArrayLength_(r)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])})(HA);Object.entries(xd).forEach(function(t){var e=t[0],n=t[1];e!=="concat"&&Nu(Ey.prototype,e,n)});function VA(t){return{enumerable:!1,configurable:!0,get:function(){return this[Ce].get_(t)},set:function(n){this[Ce].set_(t,n)}}}function nU(t){Ri(Ey.prototype,""+t,VA(t))}function zA(t){if(t>dg){for(var e=dg;e<t+100;e++)nU(e);dg=t}}zA(1e3);function iU(t,e,n){return new Ey(t,e,n)}function Rd(t,e){if(typeof t=="object"&&t!==null){if(Uu(t))return e!==void 0&&$e(23),t[Ce].atom_;if(ti(t))return t.atom_;if(yr(t)){if(e===void 0)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||$e(25,e,vv(t)),n}if(Fu(t)){if(!e)return $e(26);var i=t[Ce].values_.get(e);return i||$e(27,e,vv(t)),i}if(gy(t)||ku(t)||Cd(t))return t}else if(li(t)&&Cd(t[Ce]))return t[Ce];$e(28)}function oU(t,e){if(t||$e(29),gy(t)||ku(t)||Cd(t)||yr(t)||ti(t))return t;if(t[Ce])return t[Ce];$e(24,t)}function vv(t,e){var n;if(e!==void 0)n=Rd(t,e);else{if(Ea(t))return t.name;Fu(t)||yr(t)||ti(t)?n=oU(t):n=Rd(t)}return n.name_}function _r(t){var e=ls(),n=yy(!0);Bn();try{return t()}finally{$n(),_y(n),ho(e)}}var hE=Mu.toString;function qA(t,e,n){return n===void 0&&(n=-1),yv(t,e,n)}function yv(t,e,n,i,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var a=typeof t;if(a!=="function"&&a!=="object"&&typeof e!="object")return!1;var u=hE.call(t);if(u!==hE.call(e))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=pE(t),e=pE(e);var c=u==="[object Array]";if(!c){if(typeof t!="object"||typeof e!="object")return!1;var h=t.constructor,d=e.constructor;if(h!==d&&!(li(h)&&h instanceof h&&li(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),i=i||[],r=r||[];for(var m=i.length;m--;)if(i[m]===t)return r[m]===e;if(i.push(t),r.push(e),c){if(m=t.length,m!==e.length)return!1;for(;m--;)if(!yv(t[m],e[m],n-1,i,r))return!1}else{var y=Object.keys(t),S=y.length;if(Object.keys(e).length!==S)return!1;for(var w=0;w<S;w++){var C=y[w];if(!(fo(e,C)&&yv(t[C],e[C],n-1,i,r)))return!1}}return i.pop(),r.pop(),!0}function pE(t){return Uu(t)?t.slice():Ia(t)||yr(t)||ao(t)||ti(t)?Array.from(t.entries()):t}var mE,rU=((mE=ih().Iterator)==null?void 0:mE.prototype)||{};function Ty(t){return t[Symbol.iterator]=sU,Object.assign(Object.create(rU),t)}function sU(){return this}["Symbol","Map","Set"].forEach(function(t){var e=ih();typeof e[t]>"u"&&$e("MobX requires global '"+t+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:EL,extras:{getDebugName:vv},$mobx:Ce});if(!E.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!vr)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var ah=eA();const Jr=Ru(ah);function aU(t){t()}function lU(t){t||(t=aU),LL({reactionScheduler:t})}function uU(t){return UL(t)}var cU=1e4,fU=1e4,dU=(function(){function t(e){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(i){i===void 0&&(i=cU),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var r=Date.now();n.registrations.forEach(function(a,u){r-a.registeredAt>=i&&(n.finalize(a.value),n.registrations.delete(u))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n,i){this.registrations.set(i,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,fU))}}),t})(),hU=typeof FinalizationRegistry<"u"?FinalizationRegistry:dU,_v=new hU(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),hg={exports:{}},pg={};var gE;function pU(){if(gE)return pg;gE=1;var t=nh();function e(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,a=t.useLayoutEffect,u=t.useDebugValue;function c(y,S){var w=S(),C=i({inst:{value:w,getSnapshot:S}}),x=C[0].inst,A=C[1];return a(function(){x.value=w,x.getSnapshot=S,h(x)&&A({inst:x})},[y,w,S]),r(function(){return h(x)&&A({inst:x}),y(function(){h(x)&&A({inst:x})})},[y]),u(w),w}function h(y){var S=y.getSnapshot;y=y.value;try{var w=S();return!n(y,w)}catch{return!0}}function d(y,S){return S()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return pg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,pg}var vE;function mU(){return vE||(vE=1,hg.exports=pU()),hg.exports}var gU=mU();function yE(t){t.reaction=new vo("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function vU(t,e){e===void 0&&(e="observed");var n=ot.useRef(null);if(!n.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(c){return _v.unregister(i),i.onStoreChange=c,i.reaction||(yE(i),i.stateVersion=Symbol()),function(){var h;i.onStoreChange=null,(h=i.reaction)===null||h===void 0||h.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};n.current=i}var r=n.current;r.reaction||(yE(r),_v.register(n,r,r)),ot.useDebugValue(r.reaction,uU),gU.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getSnapshot);var a,u;if(r.reaction.track(function(){try{a=t()}catch(c){u=c}}),u)throw u;return a}var mg,gg,jA=typeof Symbol=="function"&&Symbol.for,yU=(gg=(mg=Object.getOwnPropertyDescriptor(function(){},"name"))===null||mg===void 0?void 0:mg.configurable)!==null&&gg!==void 0?gg:!1,_E=jA?Symbol.for("react.forward_ref"):typeof E.forwardRef=="function"&&E.forwardRef(function(t){return null}).$$typeof,SE=jA?Symbol.for("react.memo"):typeof E.memo=="function"&&E.memo(function(t){return null}).$$typeof;function He(t,e){var n;if(SE&&t.$$typeof===SE)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=(n=void 0)!==null&&n!==void 0?n:!1,r=t,a=t.displayName||t.name;if(_E&&t.$$typeof===_E&&(i=!0,r=t.render,typeof r!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var u=function(c,h){return vU(function(){return r(c,h)},a)};return u.displayName=t.displayName,yU&&Object.defineProperty(u,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(u.contextTypes=t.contextTypes),i&&(u=E.forwardRef(u)),u=E.memo(u),SU(t,u),u}var _U={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function SU(t,e){Object.keys(t).forEach(function(n){_U[n]||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}var vg;lU(ah.unstable_batchedUpdates);vg=_v.finalizeAllImmediately;var yg={exports:{}};var bE;function bU(){return bE||(bE=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(a=r(a,i(c)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var u="";for(var c in a)e.call(a,c)&&a[c]&&(u=r(u,c));return u}function r(a,u){return u?a?a+" "+u:a+u:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(yg)),yg.exports}var wU=bU();const De=Ru(wU);function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sv.apply(null,arguments)}function JA(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function wE(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function EU(t){var e=TU(t,"string");return typeof e=="symbol"?e:String(e)}function TU(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function CU(t,e,n){var i=E.useRef(t!==void 0),r=E.useState(e),a=r[0],u=r[1],c=t!==void 0,h=i.current;return i.current=c,!c&&h&&a!==e&&u(e),[c?t:a,E.useCallback(function(d){for(var m=arguments.length,y=new Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];n&&n.apply(void 0,[d].concat(y)),u(d)},[n])]}function Cy(t,e){return Object.keys(e).reduce(function(n,i){var r,a=n,u=a[wE(i)],c=a[i],h=JA(a,[wE(i),i].map(EU)),d=e[i],m=CU(c,u,t[d]),y=m[0],S=m[1];return Sv({},h,(r={},r[i]=y,r[d]=S,r))},t)}function bv(t,e){return bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bv(t,e)}function xU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,bv(t,e)}const AU=["xxl","xl","lg","md","sm","xs"],RU="xs",Bu=E.createContext({prefixes:{},breakpoints:AU,minBreakpoint:RU}),{Consumer:tY,Provider:nY}=Bu;function Be(t,e){const{prefixes:n}=E.useContext(Bu);return t||n[e]||e}function KA(){const{breakpoints:t}=E.useContext(Bu);return t}function YA(){const{minBreakpoint:t}=E.useContext(Bu);return t}function MU(){const{dir:t}=E.useContext(Bu);return t==="rtl"}function lh(t){return t&&t.ownerDocument||document}function NU(t){var e=lh(t);return e&&e.defaultView||window}function IU(t,e){return NU(t).getComputedStyle(t,e)}var DU=/([A-Z])/g;function OU(t){return t.replace(DU,"-$1").toLowerCase()}var kU=/^ms-/;function Mf(t){return OU(t).replace(kU,"-ms-")}var PU=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function LU(t){return!!(t&&PU.test(t))}function po(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Mf(e))||IU(t).getPropertyValue(Mf(e));Object.keys(e).forEach(function(r){var a=e[r];!a&&a!==0?t.style.removeProperty(Mf(r)):LU(r)?i+=r+"("+a+") ":n+=Mf(r)+": "+a+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var _g={exports:{}},Sg,EE;function UU(){if(EE)return Sg;EE=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sg=t,Sg}var bg,TE;function FU(){if(TE)return bg;TE=1;var t=UU();function e(){}function n(){}return n.resetWarningCache=e,bg=function(){function i(u,c,h,d,m,y){if(y!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},bg}var CE;function BU(){return CE||(CE=1,_g.exports=FU()()),_g.exports}var $U=BU();const wg=Ru($U),xE={disabled:!1},XA=ot.createContext(null);var GU=function(e){return e.scrollTop},jl="unmounted",nr="exited",ei="entering",uo="entered",gu="exiting",Eo=(function(t){xU(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var u=r,c=u&&!u.isMounting?i.enter:i.appear,h;return a.appearStatus=null,i.in?c?(h=nr,a.appearStatus=ei):h=uo:i.unmountOnExit||i.mountOnEnter?h=jl:h=nr,a.state={status:h},a.nextCallback=null,a}e.getDerivedStateFromProps=function(r,a){var u=r.in;return u&&a.status===jl?{status:nr}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var a=null;if(r!==this.props){var u=this.state.status;this.props.in?u!==ei&&u!==uo&&(a=ei):(u===ei||u===uo)&&(a=gu)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,a,u,c;return a=u=c=r,r!=null&&typeof r!="number"&&(a=r.exit,u=r.enter,c=r.appear!==void 0?r.appear:u),{exit:a,enter:u,appear:c}},n.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===ei){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Jr.findDOMNode(this);u&&GU(u)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===nr&&this.setState({status:jl})},n.performEnter=function(r){var a=this,u=this.props.enter,c=this.context?this.context.isMounting:r,h=this.props.nodeRef?[c]:[Jr.findDOMNode(this),c],d=h[0],m=h[1],y=this.getTimeouts(),S=c?y.appear:y.enter;if(!r&&!u||xE.disabled){this.safeSetState({status:uo},function(){a.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:ei},function(){a.props.onEntering(d,m),a.onTransitionEnd(S,function(){a.safeSetState({status:uo},function(){a.props.onEntered(d,m)})})})},n.performExit=function(){var r=this,a=this.props.exit,u=this.getTimeouts(),c=this.props.nodeRef?void 0:Jr.findDOMNode(this);if(!a||xE.disabled){this.safeSetState({status:nr},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:gu},function(){r.props.onExiting(c),r.onTransitionEnd(u.exit,function(){r.safeSetState({status:nr},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},n.setNextCallback=function(r){var a=this,u=!0;return this.nextCallback=function(c){u&&(u=!1,a.nextCallback=null,r(c))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},n.onTransitionEnd=function(r,a){this.setNextCallback(a);var u=this.props.nodeRef?this.props.nodeRef.current:Jr.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!u||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=h[0],m=h[1];this.props.addEndListener(d,m)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===jl)return null;var a=this.props,u=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var c=JA(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ot.createElement(XA.Provider,{value:null},typeof u=="function"?u(r,c):ot.cloneElement(ot.Children.only(u),c))},e})(ot.Component);Eo.contextType=XA;Eo.propTypes={};function Zs(){}Eo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Zs,onEntering:Zs,onEntered:Zs,onExit:Zs,onExiting:Zs,onExited:Zs};Eo.UNMOUNTED=jl;Eo.EXITED=nr;Eo.ENTERING=ei;Eo.ENTERED=uo;Eo.EXITING=gu;function HU(t){return t.code==="Escape"||t.keyCode===27}function VU(){const t=E.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function ka(t){if(!t||typeof t=="function")return null;const{major:e}=VU();return e>=19?t.props.ref:t.ref}const uh=!!(typeof window<"u"&&window.document&&window.document.createElement);var wv=!1,Ev=!1;try{var Eg={get passive(){return wv=!0},get once(){return Ev=wv=!0}};uh&&(window.addEventListener("test",Eg,Eg),window.removeEventListener("test",Eg,!0))}catch{}function WA(t,e,n,i){if(i&&typeof i!="boolean"&&!Ev){var r=i.once,a=i.capture,u=n;!Ev&&r&&(u=n.__once||function c(h){this.removeEventListener(e,c,a),n.call(this,h)},n.__once=u),t.addEventListener(e,u,wv?i:a)}t.addEventListener(e,n,i)}function zU(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function or(t,e,n,i){return WA(t,e,n,i),function(){zU(t,e,n,i)}}function qU(t,e,n,i){if(i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function jU(t){var e=po(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function JU(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||qU(t,"transitionend",!0)},e+n),a=or(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),a()}}function KU(t,e,n,i){n==null&&(n=jU(t)||0);var r=JU(t,n,i),a=or(t,"transitionend",e);return function(){r(),a()}}function AE(t,e){const n=po(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function xy(t,e){const n=AE(t,"transitionDuration"),i=AE(t,"transitionDelay"),r=KU(t,a=>{a.target===t&&(r(),e(a))},n+i)}function Hl(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function QA(t){t.offsetHeight}const RE=t=>!t||typeof t=="function"?t:e=>{t.current=e};function YU(t,e){const n=RE(t),i=RE(e);return r=>{n&&n(r),i&&i(r)}}function Ay(t,e){return E.useMemo(()=>YU(t,e),[t,e])}function XU(t){return t&&"setState"in t?Jr.findDOMNode(t):t??null}const ch=ot.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:a,addEndListener:u,children:c,childRef:h,...d},m)=>{const y=E.useRef(null),S=Ay(y,h),w=U=>{S(XU(U))},C=U=>O=>{U&&y.current&&U(y.current,O)},x=E.useCallback(C(t),[t]),A=E.useCallback(C(e),[e]),M=E.useCallback(C(n),[n]),I=E.useCallback(C(i),[i]),N=E.useCallback(C(r),[r]),D=E.useCallback(C(a),[a]),L=E.useCallback(C(u),[u]);return b.jsx(Eo,{ref:m,...d,onEnter:x,onEntered:M,onEntering:A,onExit:I,onExited:D,onExiting:N,addEndListener:L,nodeRef:y,children:typeof c=="function"?(U,O)=>c(U,{...O,ref:w}):ot.cloneElement(c,{ref:w})})});ch.displayName="TransitionWrapper";const WU={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function QU(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,i=e[n],r=WU[t];return i+parseInt(po(e,r[0]),10)+parseInt(po(e,r[1]),10)}const ZU={[nr]:"collapse",[gu]:"collapsing",[ei]:"collapsing",[uo]:"collapse show"},ZA=ot.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,className:a,children:u,dimension:c="height",in:h=!1,timeout:d=300,mountOnEnter:m=!1,unmountOnExit:y=!1,appear:S=!1,getDimensionValue:w=QU,...C},x)=>{const A=typeof c=="function"?c():c,M=E.useMemo(()=>Hl(U=>{U.style[A]="0"},t),[A,t]),I=E.useMemo(()=>Hl(U=>{const O=`scroll${A[0].toUpperCase()}${A.slice(1)}`;U.style[A]=`${U[O]}px`},e),[A,e]),N=E.useMemo(()=>Hl(U=>{U.style[A]=null},n),[A,n]),D=E.useMemo(()=>Hl(U=>{U.style[A]=`${w(A,U)}px`,QA(U)},i),[i,w,A]),L=E.useMemo(()=>Hl(U=>{U.style[A]=null},r),[A,r]);return b.jsx(ch,{ref:x,addEndListener:xy,...C,"aria-expanded":C.role?h:null,onEnter:M,onEntering:I,onEntered:N,onExit:D,onExiting:L,childRef:ka(u),in:h,timeout:d,mountOnEnter:m,unmountOnExit:y,appear:S,children:(U,O)=>ot.cloneElement(u,{...O,className:De(a,u.props.className,ZU[U],A==="width"&&"collapse-horizontal")})})});ZA.displayName="Collapse";function eF(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t},[t]),e}function $u(t){const e=eF(t);return E.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Ry=(t=>E.forwardRef((e,n)=>b.jsx("div",{...e,ref:n,className:De(e.className,t)})));function tF(){return E.useState(null)}function nF(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t},[t]),e}function Ut(t){const e=nF(t);return E.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function iF(t,e,n,i=!1){const r=Ut(n);E.useEffect(()=>{const a=typeof t=="function"?t():t;return a.addEventListener(e,r,i),()=>a.removeEventListener(e,r,i)},[t])}function eR(){const t=E.useRef(!0),e=E.useRef(()=>t.current);return E.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function tR(t){const e=E.useRef(null);return E.useEffect(()=>{e.current=t}),e.current}const oF=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",rF=typeof document<"u",ME=rF||oF?E.useLayoutEffect:E.useEffect,sF=["as","disabled"];function aF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function lF(t){return!t||t.trim()==="#"}function My({tagName:t,disabled:e,href:n,target:i,rel:r,role:a,onClick:u,tabIndex:c=0,type:h}){t||(n!=null||i!=null||r!=null?t="a":t="button");const d={tagName:t};if(t==="button")return[{type:h||"button",disabled:e},d];const m=S=>{if((e||t==="a"&&lF(n))&&S.preventDefault(),e){S.stopPropagation();return}u?.(S)},y=S=>{S.key===" "&&(S.preventDefault(),m(S))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:m,onKeyDown:y},d]}const Ny=E.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=aF(t,sF);const[a,{tagName:u}]=My(Object.assign({tagName:n,disabled:i},r));return b.jsx(u,Object.assign({},r,a,{ref:e}))});Ny.displayName="Button";const uF=["onKeyDown"];function cF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function fF(t){return!t||t.trim()==="#"}const Iy=E.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=cF(t,uF);const[r]=My(Object.assign({tagName:"a"},i)),a=Ut(u=>{r.onKeyDown(u),n?.(u)});return fF(i.href)||i.role==="button"?b.jsx("a",Object.assign({ref:e},i,r,{onKeyDown:a})):b.jsx("a",Object.assign({ref:e},i,{onKeyDown:n}))});Iy.displayName="Anchor";const dF={[ei]:"show",[uo]:"show"},nR=E.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},a)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=E.useCallback((h,d)=>{QA(h),i?.(h,d)},[i]);return b.jsx(ch,{ref:a,addEndListener:xy,...u,onEnter:c,childRef:ka(e),children:(h,d)=>E.cloneElement(e,{...d,className:De("fade",t,e.props.className,dF[h],n[h])})})});nR.displayName="Fade";const hF={"aria-label":wg.string,onClick:wg.func,variant:wg.oneOf(["white"])},Dy=E.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>b.jsx("button",{ref:r,type:"button",className:De("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));Dy.displayName="CloseButton";Dy.propTypes=hF;const iR=E.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:a=!1,className:u,...c},h)=>{const d=Be(e,"btn"),[m,{tagName:y}]=My({tagName:t,disabled:a,...c}),S=y;return b.jsx(S,{...m,...c,ref:h,disabled:a,className:De(u,d,r&&"active",n&&`${d}-${n}`,i&&`${d}-${i}`,c.href&&a&&"disabled")})});iR.displayName="Button";const Oy=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-body"),b.jsx(n,{ref:r,className:De(t,e),...i})));Oy.displayName="CardBody";const oR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-footer"),b.jsx(n,{ref:r,className:De(t,e),...i})));oR.displayName="CardFooter";const ky=E.createContext(null);ky.displayName="CardHeaderContext";const rR=E.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const a=Be(t,"card-header"),u=E.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return b.jsx(ky.Provider,{value:u,children:b.jsx(n,{ref:r,...i,className:De(e,a)})})});rR.displayName="CardHeader";const sR=E.forwardRef(({bsPrefix:t,className:e,variant:n,as:i="img",...r},a)=>{const u=Be(t,"card-img");return b.jsx(i,{ref:a,className:De(n?`${u}-${n}`:u,e),...r})});sR.displayName="CardImg";const aR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-img-overlay"),b.jsx(n,{ref:r,className:De(t,e),...i})));aR.displayName="CardImgOverlay";const lR=E.forwardRef(({className:t,bsPrefix:e,as:n="a",...i},r)=>(e=Be(e,"card-link"),b.jsx(n,{ref:r,className:De(t,e),...i})));lR.displayName="CardLink";const pF=Ry("h6"),uR=E.forwardRef(({className:t,bsPrefix:e,as:n=pF,...i},r)=>(e=Be(e,"card-subtitle"),b.jsx(n,{ref:r,className:De(t,e),...i})));uR.displayName="CardSubtitle";const cR=E.forwardRef(({className:t,bsPrefix:e,as:n="p",...i},r)=>(e=Be(e,"card-text"),b.jsx(n,{ref:r,className:De(t,e),...i})));cR.displayName="CardText";const mF=Ry("h5"),fR=E.forwardRef(({className:t,bsPrefix:e,as:n=mF,...i},r)=>(e=Be(e,"card-title"),b.jsx(n,{ref:r,className:De(t,e),...i})));fR.displayName="CardTitle";const dR=E.forwardRef(({bsPrefix:t,className:e,bg:n,text:i,border:r,body:a=!1,children:u,as:c="div",...h},d)=>{const m=Be(t,"card");return b.jsx(c,{ref:d,...h,className:De(e,m,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:a?b.jsx(Oy,{children:u}):u})});dR.displayName="Card";const Nf=Object.assign(dR,{Img:sR,Title:fR,Subtitle:uR,Body:Oy,Link:lR,Text:cR,Header:rR,Footer:oR,ImgOverlay:aR});function gF({as:t,bsPrefix:e,className:n,...i}){e=Be(e,"col");const r=KA(),a=YA(),u=[],c=[];return r.forEach(h=>{const d=i[h];delete i[h];let m,y,S;typeof d=="object"&&d!=null?{span:m,offset:y,order:S}=d:m=d;const w=h!==a?`-${h}`:"";m&&u.push(m===!0?`${e}${w}`:`${e}${w}-${m}`),S!=null&&c.push(`order${w}-${S}`),y!=null&&c.push(`offset${w}-${y}`)}),[{...i,className:De(n,...u,...c)},{as:t,bsPrefix:e,spans:u}]}const hR=E.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:a,spans:u}]=gF(t);return b.jsx(r,{...i,ref:e,className:De(n,!u.length&&a)})});hR.displayName="Col";const pR=E.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:i,...r},a)=>{const u=Be(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return b.jsx(n,{ref:a,...r,className:De(i,e?`${u}${c}`:u)})});pR.displayName="Container";var vF=Function.prototype.bind.call(Function.prototype.call,[].slice);function so(t,e){return vF(t.querySelectorAll(e))}function yF(t,e,n){const i=E.useRef(t!==void 0),[r,a]=E.useState(e),u=t!==void 0,c=i.current;return i.current=u,!u&&c&&r!==e&&a(e),[u?t:r,E.useCallback((...h)=>{const[d,...m]=h;let y=n?.(d,...m);return a(d),y},[n])]}function mR(){const[,t]=E.useReducer(e=>e+1,0);return t}const fh=E.createContext(null);var NE=Object.prototype.hasOwnProperty;function IE(t,e,n){for(n of t.keys())if(au(n,e))return n}function au(t,e){var n,i,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&au(t[i],e[i]););return i===-1}if(n===Set){if(t.size!==e.size)return!1;for(i of t)if(r=i,r&&typeof r=="object"&&(r=IE(e,r),!r)||!e.has(r))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t)if(r=i[0],r&&typeof r=="object"&&(r=IE(e,r),!r)||!au(i[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return i===-1}if(!n||typeof t=="object"){i=0;for(n in t)if(NE.call(t,n)&&++i&&!NE.call(e,n)||!(n in e)||!au(t[n],e[n]))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}function _F(t){const e=eR();return[t[0],E.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var nn="top",qn="bottom",jn="right",on="left",Py="auto",Gu=[nn,qn,jn,on],Ca="start",vu="end",SF="clippingParents",gR="viewport",Vl="popper",bF="reference",DE=Gu.reduce(function(t,e){return t.concat([e+"-"+Ca,e+"-"+vu])},[]),vR=[].concat(Gu,[Py]).reduce(function(t,e){return t.concat([e,e+"-"+Ca,e+"-"+vu])},[]),wF="beforeRead",EF="read",TF="afterRead",CF="beforeMain",xF="main",AF="afterMain",RF="beforeWrite",MF="write",NF="afterWrite",IF=[wF,EF,TF,CF,xF,AF,RF,MF,NF];function Ii(t){return t.split("-")[0]}function En(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function is(t){var e=En(t).Element;return t instanceof e||t instanceof Element}function Di(t){var e=En(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Ly(t){if(typeof ShadowRoot>"u")return!1;var e=En(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Xr=Math.max,Md=Math.min,xa=Math.round;function Tv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function yR(){return!/^((?!chrome|android).)*safari/i.test(Tv())}function Aa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,a=1;e&&Di(t)&&(r=t.offsetWidth>0&&xa(i.width)/t.offsetWidth||1,a=t.offsetHeight>0&&xa(i.height)/t.offsetHeight||1);var u=is(t)?En(t):window,c=u.visualViewport,h=!yR()&&n,d=(i.left+(h&&c?c.offsetLeft:0))/r,m=(i.top+(h&&c?c.offsetTop:0))/a,y=i.width/r,S=i.height/a;return{width:y,height:S,top:m,right:d+y,bottom:m+S,left:d,x:d,y:m}}function Uy(t){var e=Aa(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function _R(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ly(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ur(t){return t?(t.nodeName||"").toLowerCase():null}function _o(t){return En(t).getComputedStyle(t)}function DF(t){return["table","td","th"].indexOf(ur(t))>=0}function Sr(t){return((is(t)?t.ownerDocument:t.document)||window.document).documentElement}function dh(t){return ur(t)==="html"?t:t.assignedSlot||t.parentNode||(Ly(t)?t.host:null)||Sr(t)}function OE(t){return!Di(t)||_o(t).position==="fixed"?null:t.offsetParent}function OF(t){var e=/firefox/i.test(Tv()),n=/Trident/i.test(Tv());if(n&&Di(t)){var i=_o(t);if(i.position==="fixed")return null}var r=dh(t);for(Ly(r)&&(r=r.host);Di(r)&&["html","body"].indexOf(ur(r))<0;){var a=_o(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function Hu(t){for(var e=En(t),n=OE(t);n&&DF(n)&&_o(n).position==="static";)n=OE(n);return n&&(ur(n)==="html"||ur(n)==="body"&&_o(n).position==="static")?e:n||OF(t)||e}function Fy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function lu(t,e,n){return Xr(t,Md(e,n))}function kF(t,e,n){var i=lu(t,e,n);return i>n?n:i}function SR(){return{top:0,right:0,bottom:0,left:0}}function bR(t){return Object.assign({},SR(),t)}function wR(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var PF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,bR(typeof e!="number"?e:wR(e,Gu))};function LF(t){var e,n=t.state,i=t.name,r=t.options,a=n.elements.arrow,u=n.modifiersData.popperOffsets,c=Ii(n.placement),h=Fy(c),d=[on,jn].indexOf(c)>=0,m=d?"height":"width";if(!(!a||!u)){var y=PF(r.padding,n),S=Uy(a),w=h==="y"?nn:on,C=h==="y"?qn:jn,x=n.rects.reference[m]+n.rects.reference[h]-u[h]-n.rects.popper[m],A=u[h]-n.rects.reference[h],M=Hu(a),I=M?h==="y"?M.clientHeight||0:M.clientWidth||0:0,N=x/2-A/2,D=y[w],L=I-S[m]-y[C],U=I/2-S[m]/2+N,O=lu(D,U,L),q=h;n.modifiersData[i]=(e={},e[q]=O,e.centerOffset=O-U,e)}}function UF(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||_R(e.elements.popper,r)&&(e.elements.arrow=r))}const FF={name:"arrow",enabled:!0,phase:"main",fn:LF,effect:UF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ra(t){return t.split("-")[1]}var BF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $F(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:xa(n*r)/r||0,y:xa(i*r)/r||0}}function kE(t){var e,n=t.popper,i=t.popperRect,r=t.placement,a=t.variation,u=t.offsets,c=t.position,h=t.gpuAcceleration,d=t.adaptive,m=t.roundOffsets,y=t.isFixed,S=u.x,w=S===void 0?0:S,C=u.y,x=C===void 0?0:C,A=typeof m=="function"?m({x:w,y:x}):{x:w,y:x};w=A.x,x=A.y;var M=u.hasOwnProperty("x"),I=u.hasOwnProperty("y"),N=on,D=nn,L=window;if(d){var U=Hu(n),O="clientHeight",q="clientWidth";if(U===En(n)&&(U=Sr(n),_o(U).position!=="static"&&c==="absolute"&&(O="scrollHeight",q="scrollWidth")),U=U,r===nn||(r===on||r===jn)&&a===vu){D=qn;var j=y&&U===L&&L.visualViewport?L.visualViewport.height:U[O];x-=j-i.height,x*=h?1:-1}if(r===on||(r===nn||r===qn)&&a===vu){N=jn;var Y=y&&U===L&&L.visualViewport?L.visualViewport.width:U[q];w-=Y-i.width,w*=h?1:-1}}var W=Object.assign({position:c},d&&BF),re=m===!0?$F({x:w,y:x},En(n)):{x:w,y:x};if(w=re.x,x=re.y,h){var ie;return Object.assign({},W,(ie={},ie[D]=I?"0":"",ie[N]=M?"0":"",ie.transform=(L.devicePixelRatio||1)<=1?"translate("+w+"px, "+x+"px)":"translate3d("+w+"px, "+x+"px, 0)",ie))}return Object.assign({},W,(e={},e[D]=I?x+"px":"",e[N]=M?w+"px":"",e.transform="",e))}function GF(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,a=n.adaptive,u=a===void 0?!0:a,c=n.roundOffsets,h=c===void 0?!0:c,d={placement:Ii(e.placement),variation:Ra(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,kE(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,kE(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const HF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:GF,data:{}};var If={passive:!0};function VF(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,a=r===void 0?!0:r,u=i.resize,c=u===void 0?!0:u,h=En(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(m){m.addEventListener("scroll",n.update,If)}),c&&h.addEventListener("resize",n.update,If),function(){a&&d.forEach(function(m){m.removeEventListener("scroll",n.update,If)}),c&&h.removeEventListener("resize",n.update,If)}}const zF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:VF,data:{}};var qF={left:"right",right:"left",bottom:"top",top:"bottom"};function od(t){return t.replace(/left|right|bottom|top/g,function(e){return qF[e]})}var jF={start:"end",end:"start"};function PE(t){return t.replace(/start|end/g,function(e){return jF[e]})}function By(t){var e=En(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function $y(t){return Aa(Sr(t)).left+By(t).scrollLeft}function JF(t,e){var n=En(t),i=Sr(t),r=n.visualViewport,a=i.clientWidth,u=i.clientHeight,c=0,h=0;if(r){a=r.width,u=r.height;var d=yR();(d||!d&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}return{width:a,height:u,x:c+$y(t),y:h}}function KF(t){var e,n=Sr(t),i=By(t),r=(e=t.ownerDocument)==null?void 0:e.body,a=Xr(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),u=Xr(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-i.scrollLeft+$y(t),h=-i.scrollTop;return _o(r||n).direction==="rtl"&&(c+=Xr(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:u,x:c,y:h}}function Gy(t){var e=_o(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function ER(t){return["html","body","#document"].indexOf(ur(t))>=0?t.ownerDocument.body:Di(t)&&Gy(t)?t:ER(dh(t))}function uu(t,e){var n;e===void 0&&(e=[]);var i=ER(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),a=En(i),u=r?[a].concat(a.visualViewport||[],Gy(i)?i:[]):i,c=e.concat(u);return r?c:c.concat(uu(dh(u)))}function Cv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function YF(t,e){var n=Aa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function LE(t,e,n){return e===gR?Cv(JF(t,n)):is(e)?YF(e,n):Cv(KF(Sr(t)))}function XF(t){var e=uu(dh(t)),n=["absolute","fixed"].indexOf(_o(t).position)>=0,i=n&&Di(t)?Hu(t):t;return is(i)?e.filter(function(r){return is(r)&&_R(r,i)&&ur(r)!=="body"}):[]}function WF(t,e,n,i){var r=e==="clippingParents"?XF(t):[].concat(e),a=[].concat(r,[n]),u=a[0],c=a.reduce(function(h,d){var m=LE(t,d,i);return h.top=Xr(m.top,h.top),h.right=Md(m.right,h.right),h.bottom=Md(m.bottom,h.bottom),h.left=Xr(m.left,h.left),h},LE(t,u,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function TR(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ii(i):null,a=i?Ra(i):null,u=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,h;switch(r){case nn:h={x:u,y:e.y-n.height};break;case qn:h={x:u,y:e.y+e.height};break;case jn:h={x:e.x+e.width,y:c};break;case on:h={x:e.x-n.width,y:c};break;default:h={x:e.x,y:e.y}}var d=r?Fy(r):null;if(d!=null){var m=d==="y"?"height":"width";switch(a){case Ca:h[d]=h[d]-(e[m]/2-n[m]/2);break;case vu:h[d]=h[d]+(e[m]/2-n[m]/2);break}}return h}function yu(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,a=n.strategy,u=a===void 0?t.strategy:a,c=n.boundary,h=c===void 0?SF:c,d=n.rootBoundary,m=d===void 0?gR:d,y=n.elementContext,S=y===void 0?Vl:y,w=n.altBoundary,C=w===void 0?!1:w,x=n.padding,A=x===void 0?0:x,M=bR(typeof A!="number"?A:wR(A,Gu)),I=S===Vl?bF:Vl,N=t.rects.popper,D=t.elements[C?I:S],L=WF(is(D)?D:D.contextElement||Sr(t.elements.popper),h,m,u),U=Aa(t.elements.reference),O=TR({reference:U,element:N,placement:r}),q=Cv(Object.assign({},N,O)),j=S===Vl?q:U,Y={top:L.top-j.top+M.top,bottom:j.bottom-L.bottom+M.bottom,left:L.left-j.left+M.left,right:j.right-L.right+M.right},W=t.modifiersData.offset;if(S===Vl&&W){var re=W[r];Object.keys(Y).forEach(function(ie){var ae=[jn,qn].indexOf(ie)>=0?1:-1,de=[nn,qn].indexOf(ie)>=0?"y":"x";Y[ie]+=re[de]*ae})}return Y}function QF(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,a=n.rootBoundary,u=n.padding,c=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?vR:h,m=Ra(i),y=m?c?DE:DE.filter(function(C){return Ra(C)===m}):Gu,S=y.filter(function(C){return d.indexOf(C)>=0});S.length===0&&(S=y);var w=S.reduce(function(C,x){return C[x]=yu(t,{placement:x,boundary:r,rootBoundary:a,padding:u})[Ii(x)],C},{});return Object.keys(w).sort(function(C,x){return w[C]-w[x]})}function ZF(t){if(Ii(t)===Py)return[];var e=od(t);return[PE(t),e,PE(e)]}function eB(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,u=n.altAxis,c=u===void 0?!0:u,h=n.fallbackPlacements,d=n.padding,m=n.boundary,y=n.rootBoundary,S=n.altBoundary,w=n.flipVariations,C=w===void 0?!0:w,x=n.allowedAutoPlacements,A=e.options.placement,M=Ii(A),I=M===A,N=h||(I||!C?[od(A)]:ZF(A)),D=[A].concat(N).reduce(function(le,me){return le.concat(Ii(me)===Py?QF(e,{placement:me,boundary:m,rootBoundary:y,padding:d,flipVariations:C,allowedAutoPlacements:x}):me)},[]),L=e.rects.reference,U=e.rects.popper,O=new Map,q=!0,j=D[0],Y=0;Y<D.length;Y++){var W=D[Y],re=Ii(W),ie=Ra(W)===Ca,ae=[nn,qn].indexOf(re)>=0,de=ae?"width":"height",B=yu(e,{placement:W,boundary:m,rootBoundary:y,altBoundary:S,padding:d}),Q=ae?ie?jn:on:ie?qn:nn;L[de]>U[de]&&(Q=od(Q));var ee=od(Q),ne=[];if(a&&ne.push(B[re]<=0),c&&ne.push(B[Q]<=0,B[ee]<=0),ne.every(function(le){return le})){j=W,q=!1;break}O.set(W,ne)}if(q)for(var ce=C?3:1,P=function(me){var be=D.find(function(ve){var Je=O.get(ve);if(Je)return Je.slice(0,me).every(function(Ke){return Ke})});if(be)return j=be,"break"},K=ce;K>0;K--){var se=P(K);if(se==="break")break}e.placement!==j&&(e.modifiersData[i]._skip=!0,e.placement=j,e.reset=!0)}}const tB={name:"flip",enabled:!0,phase:"main",fn:eB,requiresIfExists:["offset"],data:{_skip:!1}};function UE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function FE(t){return[nn,jn,qn,on].some(function(e){return t[e]>=0})}function nB(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,u=yu(e,{elementContext:"reference"}),c=yu(e,{altBoundary:!0}),h=UE(u,i),d=UE(c,r,a),m=FE(h),y=FE(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":y})}const iB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nB};function oB(t,e,n){var i=Ii(t),r=[on,nn].indexOf(i)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,u=a[0],c=a[1];return u=u||0,c=(c||0)*r,[on,jn].indexOf(i)>=0?{x:c,y:u}:{x:u,y:c}}function rB(t){var e=t.state,n=t.options,i=t.name,r=n.offset,a=r===void 0?[0,0]:r,u=vR.reduce(function(m,y){return m[y]=oB(y,e.rects,a),m},{}),c=u[e.placement],h=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=u}const sB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rB};function aB(t){var e=t.state,n=t.name;e.modifiersData[n]=TR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const lB={name:"popperOffsets",enabled:!0,phase:"read",fn:aB,data:{}};function uB(t){return t==="x"?"y":"x"}function cB(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,a=r===void 0?!0:r,u=n.altAxis,c=u===void 0?!1:u,h=n.boundary,d=n.rootBoundary,m=n.altBoundary,y=n.padding,S=n.tether,w=S===void 0?!0:S,C=n.tetherOffset,x=C===void 0?0:C,A=yu(e,{boundary:h,rootBoundary:d,padding:y,altBoundary:m}),M=Ii(e.placement),I=Ra(e.placement),N=!I,D=Fy(M),L=uB(D),U=e.modifiersData.popperOffsets,O=e.rects.reference,q=e.rects.popper,j=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,Y=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(U){if(a){var ie,ae=D==="y"?nn:on,de=D==="y"?qn:jn,B=D==="y"?"height":"width",Q=U[D],ee=Q+A[ae],ne=Q-A[de],ce=w?-q[B]/2:0,P=I===Ca?O[B]:q[B],K=I===Ca?-q[B]:-O[B],se=e.elements.arrow,le=w&&se?Uy(se):{width:0,height:0},me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:SR(),be=me[ae],ve=me[de],Je=lu(0,O[B],le[B]),Ke=N?O[B]/2-ce-Je-be-Y.mainAxis:P-Je-be-Y.mainAxis,sn=N?-O[B]/2+ce+Je+ve+Y.mainAxis:K+Je+ve+Y.mainAxis,Cn=e.elements.arrow&&Hu(e.elements.arrow),pi=Cn?D==="y"?Cn.clientTop||0:Cn.clientLeft||0:0,jt=(ie=W?.[D])!=null?ie:0,Jt=Q+Ke-jt-pi,nt=Q+sn-jt,Bi=lu(w?Md(ee,Jt):ee,Q,w?Xr(ne,nt):ne);U[D]=Bi,re[D]=Bi-Q}if(c){var xo,oc=D==="x"?nn:on,qa=D==="x"?qn:jn,Yn=U[L],Ao=L==="y"?"height":"width",rc=Yn+A[oc],sc=Yn-A[qa],At=[nn,on].indexOf(M)!==-1,ac=(xo=W?.[L])!=null?xo:0,ja=At?rc:Yn-O[Ao]-q[Ao]-ac+Y.altAxis,Ja=At?Yn+O[Ao]+q[Ao]-ac-Y.altAxis:sc,Er=w&&At?kF(ja,Yn,Ja):lu(w?ja:rc,Yn,w?Ja:sc);U[L]=Er,re[L]=Er-Yn}e.modifiersData[i]=re}}const fB={name:"preventOverflow",enabled:!0,phase:"main",fn:cB,requiresIfExists:["offset"]};function dB(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function hB(t){return t===En(t)||!Di(t)?By(t):dB(t)}function pB(t){var e=t.getBoundingClientRect(),n=xa(e.width)/t.offsetWidth||1,i=xa(e.height)/t.offsetHeight||1;return n!==1||i!==1}function mB(t,e,n){n===void 0&&(n=!1);var i=Di(e),r=Di(e)&&pB(e),a=Sr(e),u=Aa(t,r,n),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&((ur(e)!=="body"||Gy(a))&&(c=hB(e)),Di(e)?(h=Aa(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=$y(a))),{x:u.left+c.scrollLeft-h.x,y:u.top+c.scrollTop-h.y,width:u.width,height:u.height}}function gB(t){var e=new Map,n=new Set,i=[];t.forEach(function(a){e.set(a.name,a)});function r(a){n.add(a.name);var u=[].concat(a.requires||[],a.requiresIfExists||[]);u.forEach(function(c){if(!n.has(c)){var h=e.get(c);h&&r(h)}}),i.push(a)}return t.forEach(function(a){n.has(a.name)||r(a)}),i}function vB(t){var e=gB(t);return IF.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function yB(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function _B(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var BE={placement:"bottom",modifiers:[],strategy:"absolute"};function $E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function SB(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,a=r===void 0?BE:r;return function(c,h,d){d===void 0&&(d=a);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},BE,a),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},y=[],S=!1,w={state:m,setOptions:function(M){var I=typeof M=="function"?M(m.options):M;x(),m.options=Object.assign({},a,m.options,I),m.scrollParents={reference:is(c)?uu(c):c.contextElement?uu(c.contextElement):[],popper:uu(h)};var N=vB(_B([].concat(i,m.options.modifiers)));return m.orderedModifiers=N.filter(function(D){return D.enabled}),C(),w.update()},forceUpdate:function(){if(!S){var M=m.elements,I=M.reference,N=M.popper;if($E(I,N)){m.rects={reference:mB(I,Hu(N),m.options.strategy==="fixed"),popper:Uy(N)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(Y){return m.modifiersData[Y.name]=Object.assign({},Y.data)});for(var D=0;D<m.orderedModifiers.length;D++){if(m.reset===!0){m.reset=!1,D=-1;continue}var L=m.orderedModifiers[D],U=L.fn,O=L.options,q=O===void 0?{}:O,j=L.name;typeof U=="function"&&(m=U({state:m,options:q,name:j,instance:w})||m)}}}},update:yB(function(){return new Promise(function(A){w.forceUpdate(),A(m)})}),destroy:function(){x(),S=!0}};if(!$E(c,h))return w;w.setOptions(d).then(function(A){!S&&d.onFirstUpdate&&d.onFirstUpdate(A)});function C(){m.orderedModifiers.forEach(function(A){var M=A.name,I=A.options,N=I===void 0?{}:I,D=A.effect;if(typeof D=="function"){var L=D({state:m,name:M,instance:w,options:N}),U=function(){};y.push(L||U)}})}function x(){y.forEach(function(A){return A()}),y=[]}return w}}const bB=SB({defaultModifiers:[iB,lB,HF,zF,sB,tB,fB,FF]}),wB=["enabled","placement","strategy","modifiers"];function EB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const TB={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},CB={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const i=(e.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);i.length?e.setAttribute("aria-describedby",i.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:i}=t.elements,r=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in i){const a=i.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(n.id)!==-1)return;i.setAttribute("aria-describedby",a?`${a},${n.id}`:n.id)}}},xB=[];function AB(t,e,n={}){let{enabled:i=!0,placement:r="bottom",strategy:a="absolute",modifiers:u=xB}=n,c=EB(n,wB);const h=E.useRef(u),d=E.useRef(),m=E.useCallback(()=>{var A;(A=d.current)==null||A.update()},[]),y=E.useCallback(()=>{var A;(A=d.current)==null||A.forceUpdate()},[]),[S,w]=_F(E.useState({placement:r,update:m,forceUpdate:y,attributes:{},styles:{popper:{},arrow:{}}})),C=E.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:A})=>{const M={},I={};Object.keys(A.elements).forEach(N=>{M[N]=A.styles[N],I[N]=A.attributes[N]}),w({state:A,styles:M,attributes:I,update:m,forceUpdate:y,placement:A.placement})}}),[m,y,w]),x=E.useMemo(()=>(au(h.current,u)||(h.current=u),h.current),[u]);return E.useEffect(()=>{!d.current||!i||d.current.setOptions({placement:r,strategy:a,modifiers:[...x,C,TB]})},[a,r,C,i,x]),E.useEffect(()=>{if(!(!i||t==null||e==null))return d.current=bB(t,e,Object.assign({},c,{placement:r,strategy:a,modifiers:[...x,CB,C]})),()=>{d.current!=null&&(d.current.destroy(),d.current=void 0,w(A=>Object.assign({},A,{attributes:{},styles:{popper:{}}})))}},[i,t,e]),S}function Nd(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var Tg,GE;function RB(){if(GE)return Tg;GE=1;var t=function(){};return Tg=t,Tg}var MB=RB();const NB=Ru(MB),HE=()=>{};function IB(t){return t.button===0}function DB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Cg=t=>t&&("current"in t?t.current:t),VE={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function OB(t,e=HE,{disabled:n,clickTrigger:i="click"}={}){const r=E.useRef(!1),a=E.useRef(!1),u=E.useCallback(d=>{const m=Cg(t);NB(!!m,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!m||DB(d)||!IB(d)||!!Nd(m,d.target)||a.current,a.current=!1},[t]),c=Ut(d=>{const m=Cg(t);m&&Nd(m,d.target)?a.current=!0:a.current=!1}),h=Ut(d=>{r.current||e(d)});E.useEffect(()=>{var d,m;if(n||t==null)return;const y=lh(Cg(t)),S=y.defaultView||window;let w=(d=S.event)!=null?d:(m=S.parent)==null?void 0:m.event,C=null;VE[i]&&(C=or(y,VE[i],c,!0));const x=or(y,i,u,!0),A=or(y,i,I=>{if(I===w){w=void 0;return}h(I)});let M=[];return"ontouchstart"in y.documentElement&&(M=[].slice.call(y.body.children).map(I=>or(I,"mousemove",HE))),()=>{C?.(),x(),A(),M.forEach(I=>I())}},[t,n,i,u,c,h])}function kB(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function PB(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function LB({enabled:t,enableEvents:e,placement:n,flip:i,offset:r,fixed:a,containerPadding:u,arrowElement:c,popperConfig:h={}}){var d,m,y,S,w;const C=kB(h.modifiers);return Object.assign({},h,{placement:n,enabled:t,strategy:a?"fixed":h.strategy,modifiers:PB(Object.assign({},C,{eventListeners:{enabled:e,options:(d=C.eventListeners)==null?void 0:d.options},preventOverflow:Object.assign({},C.preventOverflow,{options:u?Object.assign({padding:u},(m=C.preventOverflow)==null?void 0:m.options):(y=C.preventOverflow)==null?void 0:y.options}),offset:{options:Object.assign({offset:r},(S=C.offset)==null?void 0:S.options)},arrow:Object.assign({},C.arrow,{enabled:!!c,options:Object.assign({},(w=C.arrow)==null?void 0:w.options,{element:c})}),flip:Object.assign({enabled:!!i},C.flip)}))})}const UB=["children","usePopper"];function FB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const BB=()=>{};function CR(t={}){const e=E.useContext(fh),[n,i]=tF(),r=E.useRef(!1),{flip:a,offset:u,rootCloseEvent:c,fixed:h=!1,placement:d,popperConfig:m={},enableEventListeners:y=!0,usePopper:S=!!e}=t,w=e?.show==null?!!t.show:e.show;w&&!r.current&&(r.current=!0);const C=U=>{e?.toggle(!1,U)},{placement:x,setMenu:A,menuElement:M,toggleElement:I}=e||{},N=AB(I,M,LB({placement:d||x||"bottom-start",enabled:S,enableEvents:y??w,offset:u,flip:a,fixed:h,arrowElement:n,popperConfig:m})),D=Object.assign({ref:A||BB,"aria-labelledby":I?.id},N.attributes.popper,{style:N.styles.popper}),L={show:w,placement:x,hasShown:r.current,toggle:e?.toggle,popper:S?N:null,arrowProps:S?Object.assign({ref:i},N.attributes.arrow,{style:N.styles.arrow}):{}};return OB(M,C,{clickTrigger:c,disabled:!w}),[D,L]}function xR(t){let{children:e,usePopper:n=!0}=t,i=FB(t,UB);const[r,a]=CR(Object.assign({},i,{usePopper:n}));return b.jsx(b.Fragment,{children:e(r,a)})}xR.displayName="DropdownMenu";const AR={prefix:String(Math.round(Math.random()*1e10)),current:0},RR=ot.createContext(AR),$B=ot.createContext(!1);let xg=new WeakMap;function GB(t=!1){let e=E.useContext(RR),n=E.useRef(null);if(n.current===null&&!t){var i,r;let a=(r=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(a){let u=xg.get(a);u==null?xg.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==u.state&&(e.current=u.id,xg.delete(a))}n.current=++e.current}return n.current}function HB(t){let e=E.useContext(RR),n=GB(!!t),i=`react-aria${e.prefix}`;return t||`${i}-${n}`}function VB(t){let e=ot.useId(),[n]=E.useState(KB()),i=n?"react-aria":`react-aria${AR.prefix}`;return t||`${i}-${e}`}const zB=typeof ot.useId=="function"?VB:HB;function qB(){return!1}function jB(){return!0}function JB(t){return()=>{}}function KB(){return typeof ot.useSyncExternalStore=="function"?ot.useSyncExternalStore(JB,qB,jB):E.useContext($B)}const MR=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},zE=()=>{};function NR(){const t=zB(),{show:e=!1,toggle:n=zE,setToggle:i,menuElement:r}=E.useContext(fh)||{},a=E.useCallback(c=>{n(!e,c)},[e,n]),u={id:t,ref:i||zE,onClick:a,"aria-expanded":!!e};return r&&MR(r)&&(u["aria-haspopup"]=!0),[u,{show:e,toggle:n}]}function IR({children:t}){const[e,n]=NR();return b.jsx(b.Fragment,{children:t(e,n)})}IR.displayName="DropdownToggle";const os=E.createContext(null),_u=(t,e=null)=>t!=null?String(t):e||null,hh=E.createContext(null);hh.displayName="NavContext";const YB="data-rr-ui-",XB="rrUi";function Pa(t){return`${YB}${t}`}function WB(t){return`${XB}${t}`}const QB=["eventKey","disabled","onClick","active","as"];function ZB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function DR({key:t,href:e,active:n,disabled:i,onClick:r}){const a=E.useContext(os),u=E.useContext(hh),{activeKey:c}=u||{},h=_u(t,e),d=n==null&&t!=null?_u(c)===h:n;return[{onClick:Ut(y=>{i||(r?.(y),a&&!y.isPropagationStopped()&&a(h,y))}),"aria-disabled":i||void 0,"aria-selected":d,[Pa("dropdown-item")]:""},{isActive:d}]}const OR=E.forwardRef((t,e)=>{let{eventKey:n,disabled:i,onClick:r,active:a,as:u=Ny}=t,c=ZB(t,QB);const[h]=DR({key:n,href:c.href,disabled:i,onClick:r,active:a});return b.jsx(u,Object.assign({},c,{ref:e},h))});OR.displayName="DropdownItem";const kR=E.createContext(uh?window:void 0);kR.Provider;function ph(){return E.useContext(kR)}function qE(){const t=mR(),e=E.useRef(null),n=E.useCallback(i=>{e.current=i,t()},[t]);return[e,n]}function Vu({defaultShow:t,show:e,onSelect:n,onToggle:i,itemSelector:r=`* [${Pa("dropdown-item")}]`,focusFirstItemOnShow:a,placement:u="bottom-start",children:c}){const h=ph(),[d,m]=yF(e,t,i),[y,S]=qE(),w=y.current,[C,x]=qE(),A=C.current,M=tR(d),I=E.useRef(null),N=E.useRef(!1),D=E.useContext(os),L=E.useCallback((W,re,ie=re?.type)=>{m(W,{originalEvent:re,source:ie})},[m]),U=Ut((W,re)=>{n?.(W,re),L(!1,re,"select"),re.isPropagationStopped()||D?.(W,re)}),O=E.useMemo(()=>({toggle:L,placement:u,show:d,menuElement:w,toggleElement:A,setMenu:S,setToggle:x}),[L,u,d,w,A,S,x]);w&&M&&!d&&(N.current=w.contains(w.ownerDocument.activeElement));const q=Ut(()=>{A&&A.focus&&A.focus()}),j=Ut(()=>{const W=I.current;let re=a;if(re==null&&(re=y.current&&MR(y.current)?"keyboard":!1),re===!1||re==="keyboard"&&!/^key.+$/.test(W))return;const ie=so(y.current,r)[0];ie&&ie.focus&&ie.focus()});E.useEffect(()=>{d?j():N.current&&(N.current=!1,q())},[d,N,q,j]),E.useEffect(()=>{I.current=null});const Y=(W,re)=>{if(!y.current)return null;const ie=so(y.current,r);let ae=ie.indexOf(W)+re;return ae=Math.max(0,Math.min(ae,ie.length)),ie[ae]};return iF(E.useCallback(()=>h.document,[h]),"keydown",W=>{var re,ie;const{key:ae}=W,de=W.target,B=(re=y.current)==null?void 0:re.contains(de),Q=(ie=C.current)==null?void 0:ie.contains(de);if(/input|textarea/i.test(de.tagName)&&(ae===" "||ae!=="Escape"&&B||ae==="Escape"&&de.type==="search")||!B&&!Q||ae==="Tab"&&(!y.current||!d))return;I.current=W.type;const ne={originalEvent:W,source:W.type};switch(ae){case"ArrowUp":{const ce=Y(de,-1);ce&&ce.focus&&ce.focus(),W.preventDefault();return}case"ArrowDown":if(W.preventDefault(),!d)m(!0,ne);else{const ce=Y(de,1);ce&&ce.focus&&ce.focus()}return;case"Tab":WA(de.ownerDocument,"keyup",ce=>{var P;(ce.key==="Tab"&&!ce.target||!((P=y.current)!=null&&P.contains(ce.target)))&&m(!1,ne)},{once:!0});break;case"Escape":ae==="Escape"&&(W.preventDefault(),W.stopPropagation()),m(!1,ne);break}}),b.jsx(os.Provider,{value:U,children:b.jsx(fh.Provider,{value:O,children:c})})}Vu.displayName="Dropdown";Vu.Menu=xR;Vu.Toggle=IR;Vu.Item=OR;const Hy=E.createContext({});Hy.displayName="DropdownContext";const PR=E.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:i="separator",...r},a)=>(e=Be(e,"dropdown-divider"),b.jsx(n,{ref:a,className:De(t,e),role:i,...r})));PR.displayName="DropdownDivider";const LR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",role:i="heading",...r},a)=>(e=Be(e,"dropdown-header"),b.jsx(n,{ref:a,className:De(t,e),role:i,...r})));LR.displayName="DropdownHeader";const UR=E.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:i=!1,onClick:r,active:a,as:u=Iy,...c},h)=>{const d=Be(t,"dropdown-item"),[m,y]=DR({key:n,href:c.href,disabled:i,onClick:r,active:a});return b.jsx(u,{...c,...m,ref:h,className:De(e,d,y.isActive&&"active",i&&"disabled")})});UR.displayName="DropdownItem";const FR=E.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Be(e,"dropdown-item-text"),b.jsx(n,{ref:r,className:De(t,e),...i})));FR.displayName="DropdownItemText";const e2=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",t2=typeof document<"u",BR=t2||e2?E.useLayoutEffect:E.useEffect,Vy=E.createContext(null);Vy.displayName="InputGroupContext";const cs=E.createContext(null);cs.displayName="NavbarContext";function $R(t,e){return t}function GR(t,e,n){const i=n?"top-end":"top-start",r=n?"top-start":"top-end",a=n?"bottom-end":"bottom-start",u=n?"bottom-start":"bottom-end",c=n?"right-start":"left-start",h=n?"right-end":"left-end",d=n?"left-start":"right-start",m=n?"left-end":"right-end";let y=t?u:a;return e==="up"?y=t?r:i:e==="end"?y=t?m:d:e==="start"?y=t?h:c:e==="down-centered"?y="bottom":e==="up-centered"&&(y="top"),y}const HR=E.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:i,flip:r=!0,show:a,renderOnMount:u,as:c="div",popperConfig:h,variant:d,...m},y)=>{let S=!1;const w=E.useContext(cs),C=Be(t,"dropdown-menu"),{align:x,drop:A,isRTL:M}=E.useContext(Hy);n=n||x;const I=E.useContext(Vy),N=[];if(n)if(typeof n=="object"){const W=Object.keys(n);if(W.length){const re=W[0],ie=n[re];S=ie==="start",N.push(`${C}-${re}-${ie}`)}}else n==="end"&&(S=!0);const D=GR(S,A,M),[L,{hasShown:U,popper:O,show:q,toggle:j}]=CR({flip:r,rootCloseEvent:i,show:a,usePopper:!w&&N.length===0,offset:[0,2],popperConfig:h,placement:D});if(L.ref=Ay($R(y),L.ref),BR(()=>{q&&O?.update()},[q]),!U&&!u&&!I)return null;typeof c!="string"&&(L.show=q,L.close=()=>j?.(!1),L.align=n);let Y=m.style;return O!=null&&O.placement&&(Y={...m.style,...L.style},m["x-placement"]=O.placement),b.jsx(c,{...m,...L,style:Y,...(N.length||w)&&{"data-bs-popper":"static"},className:De(e,C,q&&"show",S&&`${C}-end`,d&&`${C}-${d}`,...N)})});HR.displayName="DropdownMenu";const VR=E.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:i,as:r=iR,...a},u)=>{const c=Be(t,"dropdown-toggle"),h=E.useContext(fh);i!==void 0&&(a.bsPrefix=i);const[d]=NR();return d.ref=Ay(d.ref,$R(u)),b.jsx(r,{className:De(n,c,e&&`${c}-split`,h?.show&&"show"),...d,...a})});VR.displayName="DropdownToggle";const zR=E.forwardRef((t,e)=>{const{bsPrefix:n,drop:i="down",show:r,className:a,align:u="start",onSelect:c,onToggle:h,focusFirstItemOnShow:d,as:m="div",navbar:y,autoClose:S=!0,...w}=Cy(t,{show:"onToggle"}),C=E.useContext(Vy),x=Be(n,"dropdown"),A=MU(),M=O=>S===!1?O==="click":S==="inside"?O!=="rootClose":S==="outside"?O!=="select":!0,I=$u((O,q)=>{var j;!((j=q.originalEvent)==null||(j=j.target)==null)&&j.classList.contains("dropdown-toggle")&&q.source==="mousedown"||(q.originalEvent.currentTarget===document&&(q.source!=="keydown"||q.originalEvent.key==="Escape")&&(q.source="rootClose"),M(q.source)&&h?.(O,q))}),D=GR(u==="end",i,A),L=E.useMemo(()=>({align:u,drop:i,isRTL:A}),[u,i,A]),U={down:x,"down-centered":`${x}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return b.jsx(Hy.Provider,{value:L,children:b.jsx(Vu,{placement:D,show:r,onSelect:c,onToggle:I,focusFirstItemOnShow:d,itemSelector:`.${x}-item:not(.disabled):not(:disabled)`,children:C?w.children:b.jsx(m,{...w,ref:e,className:De(a,r&&"show",U[i])})})})});zR.displayName="Dropdown";const Df=Object.assign(zR,{Toggle:VR,Menu:HR,Item:UR,ItemText:FR,Divider:PR,Header:LR}),jE=t=>!t||typeof t=="function"?t:e=>{t.current=e};function n2(t,e){const n=jE(t),i=jE(e);return r=>{n&&n(r),i&&i(r)}}function mh(t,e){return E.useMemo(()=>n2(t,e),[t,e])}const qR=E.createContext(null),i2=["as","active","eventKey"];function o2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function jR({key:t,onClick:e,active:n,id:i,role:r,disabled:a}){const u=E.useContext(os),c=E.useContext(hh),h=E.useContext(qR);let d=n;const m={role:r};if(c){!r&&c.role==="tablist"&&(m.role="tab");const y=c.getControllerId(t??null),S=c.getControlledId(t??null);m[Pa("event-key")]=t,m.id=y||i,d=n==null&&t!=null?c.activeKey===t:n,(d||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(m["aria-controls"]=S)}return m.role==="tab"&&(m["aria-selected"]=d,d||(m.tabIndex=-1),a&&(m.tabIndex=-1,m["aria-disabled"]=!0)),m.onClick=Ut(y=>{a||(e?.(y),t!=null&&u&&!y.isPropagationStopped()&&u(t,y))}),[m,{isActive:d}]}const JR=E.forwardRef((t,e)=>{let{as:n=Ny,active:i,eventKey:r}=t,a=o2(t,i2);const[u,c]=jR(Object.assign({key:_u(r,a.href),active:i},a));return u[Pa("active")]=c.isActive,b.jsx(n,Object.assign({},a,u,{ref:e}))});JR.displayName="NavItem";const r2=["as","onSelect","activeKey","role","onKeyDown"];function s2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const JE=()=>{},KE=Pa("event-key"),KR=E.forwardRef((t,e)=>{let{as:n="div",onSelect:i,activeKey:r,role:a,onKeyDown:u}=t,c=s2(t,r2);const h=mR(),d=E.useRef(!1),m=E.useContext(os),y=E.useContext(qR);let S,w;y&&(a=a||"tablist",r=y.activeKey,S=y.getControlledId,w=y.getControllerId);const C=E.useRef(null),x=N=>{const D=C.current;if(!D)return null;const L=so(D,`[${KE}]:not([aria-disabled=true])`),U=D.querySelector("[aria-selected=true]");if(!U||U!==document.activeElement)return null;const O=L.indexOf(U);if(O===-1)return null;let q=O+N;return q>=L.length&&(q=0),q<0&&(q=L.length-1),L[q]},A=(N,D)=>{N!=null&&(i?.(N,D),m?.(N,D))},M=N=>{if(u?.(N),!y)return;let D;switch(N.key){case"ArrowLeft":case"ArrowUp":D=x(-1);break;case"ArrowRight":case"ArrowDown":D=x(1);break;default:return}D&&(N.preventDefault(),A(D.dataset[WB("EventKey")]||null,N),d.current=!0,h())};E.useEffect(()=>{if(C.current&&d.current){const N=C.current.querySelector(`[${KE}][aria-selected=true]`);N?.focus()}d.current=!1});const I=mh(e,C);return b.jsx(os.Provider,{value:A,children:b.jsx(hh.Provider,{value:{role:a,activeKey:_u(r),getControlledId:S||JE,getControllerId:w||JE},children:b.jsx(n,Object.assign({},c,{onKeyDown:M,ref:I,role:a}))})})});KR.displayName="Nav";const a2=Object.assign(KR,{Item:JR});function Ag(t){t===void 0&&(t=lh());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function l2(t){const e=E.useRef(t);return e.current=t,e}function u2(t){const e=l2(t);E.useEffect(()=>()=>e.current(),[])}function c2(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const YE=Pa("modal-open");class zy{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return c2(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(po(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(YE,""),po(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(YE),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Rg=(t,e)=>uh?t==null?(e||lh()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function f2(t,e){const n=ph(),[i,r]=E.useState(()=>Rg(t,n?.document));if(!i){const a=Rg(t);a&&r(a)}return E.useEffect(()=>{},[e,i]),E.useEffect(()=>{const a=Rg(t);a!==i&&r(a)},[t,i]),i}function d2({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const a=E.useRef(null),u=E.useRef(e),c=Ut(n);E.useEffect(()=>{e?u.current=!0:c(a.current)},[e,c]);const h=mh(a,ka(t)),d=E.cloneElement(t,{ref:h});return e?d:r||!u.current&&i?null:d}const h2=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function p2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function m2(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:a,onExited:u,addEndListener:c,children:h}=t,d=p2(t,h2);const m=E.useRef(null),y=mh(m,ka(h)),S=D=>L=>{D&&m.current&&D(m.current,L)},w=E.useCallback(S(e),[e]),C=E.useCallback(S(n),[n]),x=E.useCallback(S(i),[i]),A=E.useCallback(S(r),[r]),M=E.useCallback(S(a),[a]),I=E.useCallback(S(u),[u]),N=E.useCallback(S(c),[c]);return Object.assign({},d,{nodeRef:m},e&&{onEnter:w},n&&{onEntering:C},i&&{onEntered:x},r&&{onExit:A},a&&{onExiting:M},u&&{onExited:I},c&&{addEndListener:N},{children:typeof h=="function"?(D,L)=>h(D,Object.assign({},L,{ref:y})):E.cloneElement(h,{ref:y})})}const g2=["component"];function v2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const y2=E.forwardRef((t,e)=>{let{component:n}=t,i=v2(t,g2);const r=m2(i);return b.jsx(n,Object.assign({ref:e},r))});function _2({in:t,onTransition:e}){const n=E.useRef(null),i=E.useRef(!0),r=Ut(e);return ME(()=>{if(!n.current)return;let a=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>a}),()=>{a=!0}},[t,r]),ME(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function S2({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[a,u]=E.useState(!e);e&&a&&u(!1);const c=_2({in:!!e,onTransition:d=>{const m=()=>{d.isStale()||(d.in?i?.(d.element,d.initial):(u(!0),n?.(d.element)))};Promise.resolve(r(d)).then(m,y=>{throw d.in||u(!0),y})}}),h=mh(c,ka(t));return a&&!e?null:E.cloneElement(t,{ref:h})}function XE(t,e,n){return t?b.jsx(y2,Object.assign({},n,{component:t})):e?b.jsx(S2,Object.assign({},n,{transition:e})):b.jsx(d2,Object.assign({},n))}const b2=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function w2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let Mg;function E2(t){return Mg||(Mg=new zy({ownerDocument:t?.document})),Mg}function T2(t){const e=ph(),n=t||E2(e),i=E.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:E.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:E.useCallback(r=>{i.current.backdrop=r},[])})}const YR=E.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:a,children:u,backdrop:c=!0,keyboard:h=!0,onBackdropClick:d,onEscapeKeyDown:m,transition:y,runTransition:S,backdropTransition:w,runBackdropTransition:C,autoFocus:x=!0,enforceFocus:A=!0,restoreFocus:M=!0,restoreFocusOptions:I,renderDialog:N,renderBackdrop:D=nt=>b.jsx("div",Object.assign({},nt)),manager:L,container:U,onShow:O,onHide:q=()=>{},onExit:j,onExited:Y,onExiting:W,onEnter:re,onEntering:ie,onEntered:ae}=t,de=w2(t,b2);const B=ph(),Q=f2(U),ee=T2(L),ne=eR(),ce=tR(n),[P,K]=E.useState(!n),se=E.useRef(null);E.useImperativeHandle(e,()=>ee,[ee]),uh&&!ce&&n&&(se.current=Ag(B?.document)),n&&P&&K(!1);const le=Ut(()=>{if(ee.add(),sn.current=or(document,"keydown",Je),Ke.current=or(document,"focus",()=>setTimeout(be),!0),O&&O(),x){var nt,Bi;const xo=Ag((nt=(Bi=ee.dialog)==null?void 0:Bi.ownerDocument)!=null?nt:B?.document);ee.dialog&&xo&&!Nd(ee.dialog,xo)&&(se.current=xo,ee.dialog.focus())}}),me=Ut(()=>{if(ee.remove(),sn.current==null||sn.current(),Ke.current==null||Ke.current(),M){var nt;(nt=se.current)==null||nt.focus==null||nt.focus(I),se.current=null}});E.useEffect(()=>{!n||!Q||le()},[n,Q,le]),E.useEffect(()=>{P&&me()},[P,me]),u2(()=>{me()});const be=Ut(()=>{if(!A||!ne()||!ee.isTopModal())return;const nt=Ag(B?.document);ee.dialog&&nt&&!Nd(ee.dialog,nt)&&ee.dialog.focus()}),ve=Ut(nt=>{nt.target===nt.currentTarget&&(d?.(nt),c===!0&&q())}),Je=Ut(nt=>{h&&HU(nt)&&ee.isTopModal()&&(m?.(nt),nt.defaultPrevented||q())}),Ke=E.useRef(),sn=E.useRef(),Cn=(...nt)=>{K(!0),Y?.(...nt)};if(!Q)return null;const pi=Object.assign({role:i,ref:ee.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},de,{style:a,className:r,tabIndex:-1});let jt=N?N(pi):b.jsx("div",Object.assign({},pi,{children:E.cloneElement(u,{role:"document"})}));jt=XE(y,S,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:j,onExiting:W,onExited:Cn,onEnter:re,onEntering:ie,onEntered:ae,children:jt});let Jt=null;return c&&(Jt=D({ref:ee.setBackdropRef,onClick:ve}),Jt=XE(w,C,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Jt})),b.jsx(b.Fragment,{children:Jr.createPortal(b.jsxs(b.Fragment,{children:[Jt,jt]}),Q)})});YR.displayName="Modal";const C2=Object.assign(YR,{Manager:zy});function x2(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function A2(t,e){t.classList?t.classList.add(e):x2(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function WE(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function R2(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=WE(t.className,e):t.setAttribute("class",WE(t.className&&t.className.baseVal||"",e))}const ea={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class XR extends zy{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,po(n,{[e]:`${parseFloat(po(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],po(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(A2(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";so(n,ea.FIXED_CONTENT).forEach(a=>this.adjustAndStore(i,a,e.scrollBarWidth)),so(n,ea.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-e.scrollBarWidth)),so(n,ea.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();R2(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";so(n,ea.FIXED_CONTENT).forEach(a=>this.restore(i,a)),so(n,ea.STICKY_CONTENT).forEach(a=>this.restore(r,a)),so(n,ea.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let Ng;function M2(t){return Ng||(Ng=new XR(t)),Ng}const WR=E.createContext({onHide(){}}),QR=E.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...a},u)=>{const c=E.useContext(WR),h=$u(()=>{c?.onHide(),i?.()});return b.jsxs("div",{ref:u,...a,children:[r,n&&b.jsx(Dy,{"aria-label":t,variant:e,onClick:h})]})});QR.displayName="AbstractModalHeader";const ZR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"nav-item"),b.jsx(n,{ref:r,className:De(t,e),...i})));ZR.displayName="NavItem";const eM=E.forwardRef(({bsPrefix:t,className:e,as:n=Iy,active:i,eventKey:r,disabled:a=!1,...u},c)=>{t=Be(t,"nav-link");const[h,d]=jR({key:_u(r,u.href),active:i,disabled:a,...u});return b.jsx(n,{...u,...h,ref:c,disabled:a,className:De(e,t,a&&"disabled",d.isActive&&"active")})});eM.displayName="NavLink";const tM=E.forwardRef((t,e)=>{const{as:n="div",bsPrefix:i,variant:r,fill:a=!1,justify:u=!1,navbar:c,navbarScroll:h,className:d,activeKey:m,...y}=Cy(t,{activeKey:"onSelect"}),S=Be(i,"nav");let w,C,x=!1;const A=E.useContext(cs),M=E.useContext(ky);return A?(w=A.bsPrefix,x=c??!0):M&&({cardHeaderBsPrefix:C}=M),b.jsx(a2,{as:n,ref:e,activeKey:m,className:De(d,{[S]:!x,[`${w}-nav`]:x,[`${w}-nav-scroll`]:x&&h,[`${C}-${r}`]:!!C,[`${S}-${r}`]:!!r,[`${S}-fill`]:a,[`${S}-justified`]:u}),...y})});tM.displayName="Nav";const N2=Object.assign(tM,{Item:ZR,Link:eM}),nM=E.forwardRef(({bsPrefix:t,className:e,as:n,...i},r)=>{t=Be(t,"navbar-brand");const a=n||(i.href?"a":"span");return b.jsx(a,{...i,ref:r,className:De(e,t)})});nM.displayName="NavbarBrand";const iM=E.forwardRef(({children:t,bsPrefix:e,...n},i)=>{e=Be(e,"navbar-collapse");const r=E.useContext(cs);return b.jsx(ZA,{in:!!(r&&r.expanded),...n,children:b.jsx("div",{ref:i,className:e,children:t})})});iM.displayName="NavbarCollapse";const oM=E.forwardRef(({bsPrefix:t,className:e,children:n,label:i="Toggle navigation",as:r="button",onClick:a,...u},c)=>{t=Be(t,"navbar-toggler");const{onToggle:h,expanded:d}=E.useContext(cs)||{},m=$u(y=>{a&&a(y),h&&h()});return r==="button"&&(u.type="button"),b.jsx(r,{...u,ref:c,onClick:m,"aria-label":i,className:De(e,t,!d&&"collapsed"),children:n||b.jsx("span",{className:`${t}-icon`})})});oM.displayName="NavbarToggle";const xv=new WeakMap,QE=(t,e)=>{if(!t||!e)return;const n=xv.get(e)||new Map;xv.set(e,n);let i=n.get(t);return i||(i=e.matchMedia(t),i.refCount=0,n.set(i.media,i)),i};function I2(t,e=typeof window>"u"?void 0:window){const n=QE(t,e),[i,r]=E.useState(()=>n?n.matches:!1);return BR(()=>{let a=QE(t,e);if(!a)return r(!1);let u=xv.get(e);const c=()=>{r(a.matches)};return a.refCount++,a.addListener(c),c(),()=>{a.removeListener(c),a.refCount--,a.refCount<=0&&u?.delete(a.media),a=void 0}},[t]),i}function D2(t){const e=Object.keys(t);function n(c,h){return c===h?h:c?`${c} and ${h}`:h}function i(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function r(c){const h=i(c);let d=t[h];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function a(c){let h=t[c];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function u(c,h,d){let m;typeof c=="object"?(m=c,d=h,h=!0):(h=h||!0,m={[c]:h});let y=E.useMemo(()=>Object.entries(m).reduce((S,[w,C])=>((C==="up"||C===!0)&&(S=n(S,a(w))),(C==="down"||C===!0)&&(S=n(S,r(w))),S),""),[JSON.stringify(m)]);return I2(y,d)}return u}const O2=D2({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),rM=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"offcanvas-body"),b.jsx(n,{ref:r,className:De(t,e),...i})));rM.displayName="OffcanvasBody";const k2={[ei]:"show",[uo]:"show"},sM=E.forwardRef(({bsPrefix:t,className:e,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:a=!1,appear:u=!1,...c},h)=>(t=Be(t,"offcanvas"),b.jsx(ch,{ref:h,addEndListener:xy,in:i,mountOnEnter:r,unmountOnExit:a,appear:u,...c,childRef:ka(n),children:(d,m)=>E.cloneElement(n,{...m,className:De(e,n.props.className,(d===ei||d===gu)&&`${t}-toggling`,k2[d])})})));sM.displayName="OffcanvasToggling";const aM=E.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},a)=>(t=Be(t,"offcanvas-header"),b.jsx(QR,{ref:a,...r,className:De(e,t),closeLabel:n,closeButton:i})));aM.displayName="OffcanvasHeader";const P2=Ry("h5"),lM=E.forwardRef(({className:t,bsPrefix:e,as:n=P2,...i},r)=>(e=Be(e,"offcanvas-title"),b.jsx(n,{ref:r,className:De(t,e),...i})));lM.displayName="OffcanvasTitle";function L2(t){return b.jsx(sM,{...t})}function U2(t){return b.jsx(nR,{...t})}const uM=E.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":i,placement:r="start",responsive:a,show:u=!1,backdrop:c=!0,keyboard:h=!0,scroll:d=!1,onEscapeKeyDown:m,onShow:y,onHide:S,container:w,autoFocus:C=!0,enforceFocus:x=!0,restoreFocus:A=!0,restoreFocusOptions:M,onEntered:I,onExit:N,onExiting:D,onEnter:L,onEntering:U,onExited:O,backdropClassName:q,manager:j,renderStaticNode:Y=!1,...W},re)=>{const ie=E.useRef();t=Be(t,"offcanvas");const[ae,de]=E.useState(!1),B=$u(S),Q=O2(a||"xs","up");E.useEffect(()=>{de(a?u&&!Q:u)},[u,a,Q]);const ee=E.useMemo(()=>({onHide:B}),[B]);function ne(){return j||(d?(ie.current||(ie.current=new XR({handleContainerOverflow:!1})),ie.current):M2())}const ce=(le,...me)=>{le&&(le.style.visibility="visible"),L?.(le,...me)},P=(le,...me)=>{le&&(le.style.visibility=""),O?.(...me)},K=E.useCallback(le=>b.jsx("div",{...le,className:De(`${t}-backdrop`,q)}),[q,t]),se=le=>b.jsx("div",{...le,...W,className:De(e,a?`${t}-${a}`:t,`${t}-${r}`),"aria-labelledby":i,children:n});return b.jsxs(b.Fragment,{children:[!ae&&(a||Y)&&se({}),b.jsx(WR.Provider,{value:ee,children:b.jsx(C2,{show:ae,ref:re,backdrop:c,container:w,keyboard:h,autoFocus:C,enforceFocus:x&&!d,restoreFocus:A,restoreFocusOptions:M,onEscapeKeyDown:m,onShow:y,onHide:B,onEnter:ce,onEntering:U,onEntered:I,onExit:N,onExiting:D,onExited:P,manager:ne(),transition:L2,backdropTransition:U2,renderBackdrop:K,renderDialog:se})})]})});uM.displayName="Offcanvas";const F2=Object.assign(uM,{Body:rM,Header:aM,Title:lM}),cM=E.forwardRef(({onHide:t,...e},n)=>{const i=E.useContext(cs),r=$u(()=>{i==null||i.onToggle==null||i.onToggle(),t?.()});return b.jsx(F2,{ref:n,show:!!(i!=null&&i.expanded),...e,renderStaticNode:!0,onHide:r})});cM.displayName="NavbarOffcanvas";const fM=E.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Be(e,"navbar-text"),b.jsx(n,{ref:r,className:De(t,e),...i})));fM.displayName="NavbarText";const dM=E.forwardRef((t,e)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:a,fixed:u,sticky:c,className:h,as:d="nav",expanded:m,onToggle:y,onSelect:S,collapseOnSelect:w=!1,...C}=Cy(t,{expanded:"onToggle"}),x=Be(n,"navbar"),A=E.useCallback((...N)=>{S?.(...N),w&&m&&y?.(!1)},[S,w,m,y]);C.role===void 0&&d!=="nav"&&(C.role="navigation");let M=`${x}-expand`;typeof i=="string"&&(M=`${M}-${i}`);const I=E.useMemo(()=>({onToggle:()=>y?.(!m),bsPrefix:x,expanded:!!m,expand:i}),[x,m,i,y]);return b.jsx(cs.Provider,{value:I,children:b.jsx(os.Provider,{value:A,children:b.jsx(d,{ref:e,...C,className:De(h,x,i&&M,r&&`${x}-${r}`,a&&`bg-${a}`,c&&`sticky-${c}`,u&&`fixed-${u}`)})})})});dM.displayName="Navbar";const ZE=Object.assign(dM,{Brand:nM,Collapse:iM,Offcanvas:cM,Text:fM,Toggle:oM}),hM=E.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const a=Be(t,"row"),u=KA(),c=YA(),h=`${a}-cols`,d=[];return u.forEach(m=>{const y=i[m];delete i[m];let S;y!=null&&typeof y=="object"?{cols:S}=y:S=y;const w=m!==c?`-${m}`:"";S!=null&&d.push(`${h}${w}-${S}`)}),b.jsx(n,{ref:r,...i,className:De(e,a,...d)})});hM.displayName="Row";const pM=E.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:i,as:r="div",className:a,...u},c)=>{t=Be(t,"spinner");const h=`${t}-${n}`;return b.jsx(r,{ref:c,...u,className:De(a,h,i&&`${h}-${i}`,e&&`text-${e}`)})});pM.displayName="Spinner";const mM=({name:t,onClick:e,subItems:n})=>{const[i,r]=E.useState(!1);return b.jsxs("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[b.jsxs("div",{className:"dropdown-item d-flex justify-content-between",style:{cursor:"pointer"},onClick:e,children:[t," ",n?b.jsx("span",{children:""}):null]}),n&&i&&b.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:0,left:"100%",minWidth:"180px",zIndex:1e3},children:n.map((a,u)=>b.jsx(mM,{name:a.name,onClick:a.onClick,subItems:a.subItems},u))})]})},Hr=({title:t,items:e,onClick:n})=>{const[i,r]=E.useState(!1),a=e&&e.length>0;return b.jsxs("div",{className:"nav-item dropdown",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[b.jsx("span",{className:"nav-link dropdown-toggle",style:{cursor:a||n?"pointer":"default"},onClick:()=>{n&&n()},children:t}),i&&a&&b.jsx("div",{className:"dropdown-menu show",style:{minWidth:"180px"},children:e.map((u,c)=>b.jsx(mM,{...u},c))})]})};class cr{folderHandle;fileHandle;filename;data;constructor(e,n,i,r){this.folderHandle=e,this.filename=n,this.fileHandle=i,this.data=Te(r),Oa(this)}static async create(e,n,i={}){try{const r=await e.getFileHandle(n,{create:!1}),u=await(await r.getFile()).text(),c=u.trim()===""?{...i}:{...i,...JSON.parse(u)};return new cr(e,n,r,c)}catch{return new cr(e,n,null,{...i})}}async save(){try{if(this.isEmptyObject(this.data)){this.fileHandle&&(await this.folderHandle.removeEntry(this.filename),this.fileHandle=null);return}this.fileHandle||(this.fileHandle=await this.folderHandle.getFileHandle(this.filename,{create:!0}));let e=await this.fileHandle.queryPermission({mode:"readwrite"});if(e!=="granted"&&(e=await this.fileHandle.requestPermission({mode:"readwrite"})),e!=="granted")throw new Error("No permission to write file");const n=await this.fileHandle.createWritable();await n.write(JSON.stringify(this.data,null,2)),await n.close()}catch(e){console.error("Error saving JSON:",e)}}async updateField(e,n,i=!0){we(()=>{const r=e.split("/").filter(Boolean);let a=this.data;for(let u=0;u<r.length;u++){const c=r[u];u===r.length-1?n===void 0?delete a[c]:a[c]=n:((a[c]===void 0||a[c]===null||typeof a[c]!="object")&&(a[c]={}),a=a[c])}}),i&&await this.save()}getField(e){const n=e.split("/").filter(Boolean);let i=this.data;for(const r of n){if(i==null||typeof i!="object")return;i=i[r]}return i}isEmptyObject(e){return Object.keys(e).length===0}}class gM{path="";parentFolder;children=[];constructor(e=null){this.parentFolder=e,this.parentFolder?.children.push(this)}getByPath(e){if(this.path===e)return this;for(const n of this.children){const i=n.getByPath(e);if(i)return i}return null}getByAbsPath(e){return this.root.getByPath(e)}get root(){let e=this;for(;e.parentFolder;)e=e.parentFolder;return e}}class B2 extends gM{handle;_file=null;lastModified=0;constructor(e=null,n){super(e),this.handle=n,this.path=(e?.path||"")+"/"+(n?.name||""),vr(this,{lastModified:Te,getFile:ut.bound})}get name(){return this.handle.name}async getFile(e=!1){if(!this._file||e){const n=await this.handle.getFile();we(()=>{this._file=n,this.lastModified=n.lastModified})}return this._file}}class ar extends gM{handle;constructor(e=null,n){super(e),this.handle=n,this.path=(e?.path||"")+"/"+(n?.name||"")}get name(){return this.handle?.name}}async function $2(t){try{console.log("[tmpfiles] Uploading:",t.name);const e=new FormData;e.append("file",t);const n=await fetch("https://tmpfiles.org/api/v1/upload",{method:"POST",body:e});if(!n.ok)throw new Error(`HTTP ${n.status}`);const i=await n.json();console.log("[tmpfiles] Response:",i);const r=i?.data?.url;if(!r)throw new Error("No URL returned");return r.replace("tmpfiles.org/","tmpfiles.org/dl/")}catch(e){throw console.error("[tmpfiles] Upload failed:",e),e}}async function G2(t,e){try{if(e&&((r,a)=>{const u=r.name.toLowerCase(),c=decodeURIComponent(a.split("/").pop()||"").toLowerCase();return u===c})(t,e))return console.log("[ensureUploaded] Existing URL is valid:",e),e;console.log("[ensureUploaded] Uploading file because URL is missing or invalid:",t.name);const i=await $2(t);return console.log("[ensureUploaded] Uploaded URL:",i),i}catch(n){throw console.error("[ensureUploaded] Error ensuring file upload:",n),n}}class zu extends B2{shot;urlObject=null;web_url="";mediaFolder=null;mediaJson=null;onTagChanged;file=null;constructor(e,n){super(n,e),this.handle=e,this.shot=n.parentFolder,vr(this,{urlObject:Te,web_url:Te,revokeUrl:ut,delete:ut,getUrlObject:ut,tags:lr,addTag:ut,removeTag:ut,setTags:ut})}async load(){this.mediaJson=await cr.create(this.parentFolder.handle,this.name+".json")}get name(){return this.handle.name}async delete(){try{this.revokeUrl(),await this.parentFolder?.handle.removeEntry(this.handle.name)}catch(e){throw console.error("Failed to delete video file:",e),e}}revokeUrl(){this.urlObject&&(URL.revokeObjectURL(this.urlObject),this.urlObject=null)}async getWebUrl(){const e=await G2(await this.getFile(),this.web_url);return we(()=>{this.web_url=e}),this.web_url}async getUrlObject(){if(!this.urlObject)try{const e=await this.getFile(),n=URL.createObjectURL(e);we(()=>{this.urlObject=n})}catch(e){console.error("Failed to create object URL:",e),we(()=>{this.urlObject=""})}return this.urlObject}static async fromUrl(e,n){try{const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch video: ${i.statusText}`);const r=await i.blob(),a=e.split("/"),u=a[a.length-1].split("?")[0],c=await n.handle.getFileHandle(u,{create:!0}),h=await c.createWritable();return await h.write(r),await h.close(),new zu(c,n)}catch(i){throw console.error("Failed to create LocalVideo from URL:",i),i}}log(){console.log(yo(this))}get tags(){if(!this.mediaJson)return[];const e=this.mediaJson.getField("tags");return Array.isArray(e)?e:[]}async setTags(e){if(!this.mediaJson)return;const n=Array.from(new Set(e.filter(Boolean)));await this.mediaJson.updateField("tags",n.length?n:void 0)}async addTag(e){if(!e)return;const n=this.tags;n.includes(e)||(await this.setTags([...n,e]),this.onTagChanged?.(this,e,!0))}async removeTag(e){const n=this.tags;n.includes(e)&&(await this.setTags(n.filter(i=>i!==e)),this.onTagChanged?.(this,e,!1))}hasTag(e){return this.tags.includes(e)}toggleTag(e){e&&(this.hasTag(e)?this.removeTag(e):this.addTag(e))}async openInNewTab(){try{const e=await this.getUrlObject(),n=this.path.replace(/[\/\\]/g,"_");window.open(e,n,"noopener,noreferrer")}catch(e){console.error("Failed to open media in new tab:",e)}}get genInfo(){return this.mediaJson?this.mediaJson.getField("geninfo"):null}get sourceImage(){if(!this.mediaJson)return null;const e=this.genInfo?.source;return e?this.getByAbsPath(e):null}get generatedMedia(){const e=[];for(const n of this.mediaFolder.media)n.genInfo&&n.genInfo.source&&n.genInfo.source==this.path&&e.push(n);return e}}class mo extends zu{base64Data=null;async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.getFile(),n=await e.arrayBuffer(),i=e.type||"image/png",r=H2(n);return this.base64Data={rawBase64:r,mime:i},this.base64Data}catch(e){return console.error("Failed to create Base64 from file:",e),{rawBase64:"",mime:"image/png"}}}static async fromBase64(e,n,i){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const u=atob(r),c=u.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=u.charCodeAt(S);const d=await n.handle.getFileHandle(i,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new mo(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalImage from Base64:",r),r}}}function H2(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}var V2={};let z2,q2;function j2(){return{geminiUrl:z2,vertexUrl:q2}}function J2(t,e,n,i){var r,a;if(!t?.baseUrl){const u=j2();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}class To{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const c=u.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(n))for(let d=0;d<h.length;d++){const m=h[d];g(m,e.slice(a+1),n[d])}else for(const d of h)g(d,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const c=u.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];g(h[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function K2(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),a=i.split("."),u=new Set;let c=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const d=a[h];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&u.add(d)}Av(t,r,a,0,u)}}function Av(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),c=t;if(u in c&&Array.isArray(c[u]))for(const h of c[u])Av(h,e,n,i+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,c=Object.keys(u).filter(d=>!d.startsWith("_")&&!r.has(d)),h={};for(const d of c)h[d]=u[d];for(const[d,m]of Object.entries(h)){const y=[];for(const S of n.slice(i))S==="*"?y.push(d):y.push(S);g(u,y,m)}for(const d of c)delete u[d]}}else{const u=t;a in u&&Av(u[a],e,n,i+1,r)}}function qy(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Y2(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function X2(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],Q2(u)),e}function W2(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],Z2(u)),e}function Q2(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>e$(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function Z2(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>t$(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function e$(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],a$(n)),e}function t$(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],l$(n)),e}function n$(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function i$(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function o$(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],r$(u)),e}function r$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function vM(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],s$(u)),e}function s$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function a$(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],qy(i));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function l$(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],qy(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}var eT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(eT||(eT={}));var tT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(tT||(tT={}));var nT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(nT||(nT={}));var rr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(rr||(rr={}));var iT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(iT||(iT={}));var oT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(oT||(oT={}));var rT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rT||(rT={}));var sT;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(sT||(sT={}));var aT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(aT||(aT={}));var lT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(lT||(lT={}));var uT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(uT||(uT={}));var cT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(cT||(cT={}));var fT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(fT||(fT={}));var dT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(dT||(dT={}));var hT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(hT||(hT={}));var pT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(pT||(pT={}));var mT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(mT||(mT={}));var gT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(gT||(gT={}));var vT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vT||(vT={}));var Id;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Id||(Id={}));var yT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yT||(yT={}));var _T;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_T||(_T={}));var ST;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ST||(ST={}));var Rv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rv||(Rv={}));var bT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(bT||(bT={}));var wT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wT||(wT={}));var ET;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ET||(ET={}));var TT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(TT||(TT={}));var CT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(CT||(CT={}));var xT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(xT||(xT={}));var AT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(AT||(AT={}));var RT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(RT||(RT={}));var MT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(MT||(MT={}));var NT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(NT||(NT={}));var IT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(IT||(IT={}));var DT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(DT||(DT={}));var OT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(OT||(OT={}));var kT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kT||(kT={}));var PT;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(PT||(PT={}));var LT;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(LT||(LT={}));var UT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(UT||(UT={}));var FT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(FT||(FT={}));var BT;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(BT||(BT={}));var $T;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})($T||($T={}));var GT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(GT||(GT={}));var HT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(HT||(HT={}));var VT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(VT||(VT={}));var zT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(zT||(zT={}));var qT;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(qT||(qT={}));var jT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jT||(jT={}));var JT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JT||(JT={}));var KT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(KT||(KT={}));var YT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(YT||(YT={}));var XT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(XT||(XT={}));var WT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(WT||(WT={}));var pa;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(pa||(pa={}));class Mv{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class zl{get text(){var e,n,i,r,a,u,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const y=[];for(const S of(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[w,C]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(C!==null||C!==void 0)&&y.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;m=!0,d+=S.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,i,r,a,u,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const y of(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[S,w]of Object.entries(y))S!=="inlineData"&&(w!==null||w!==void 0)&&m.push(S);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,a,u,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,a,u,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,a,u,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.output}}class QT{}class ZT{}class u${}class c${}class f${}class d${}class eC{}class tC{}class nC{}class h${}class Dd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Dd;let r;const a=e;return n?r=W2(a):r=X2(a),Object.assign(i,r),i}}class iC{}class oC{}class rC{}class sC{}class p${}class m${}class g${}class jy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new jy,a=o$(e);return Object.assign(i,a),i}}class v${}class y${}class _${}class aC{}class S${get text(){var e,n,i;let r="",a=!1;const u=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,d]of Object.entries(c))h!=="text"&&h!=="thought"&&d!==null&&u.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,r+=c.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(u))c!=="inlineData"&&h!==null&&a.push(c);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class b${get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Jy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Jy,a=vM(e);return Object.assign(i,a),i}}function je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yM(t,e){const n=je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _M(t){return Array.isArray(t)?t.map(e=>Od(e)):[Od(t)]}function Od(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function SM(t){const e=Od(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bM(t){const e=Od(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>lC(e)):[lC(t)]}function Nv(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function uC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function cC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ft(t){if(t==null)throw new Error("ContentUnion is required");return Nv(t)?t:{role:"user",parts:wM(t)}}function Ky(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ft(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Ft(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ft(n)):[Ft(e)]}function Hn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(uC(t)||cC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ft(t)]}const e=[],n=[],i=Nv(t[0]);for(const r of t){const a=Nv(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(uC(r)||cC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:wM(n)}),e}function w$(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(rr).includes(n[0].toUpperCase())?n[0].toUpperCase():rr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(rr).includes(i.toUpperCase())?i.toUpperCase():rr.TYPE_UNSPECIFIED})}}function ya(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&w$(t.type,e);for(const[u,c]of Object.entries(t))if(c!=null)if(u=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(rr).includes(c.toUpperCase())?c.toUpperCase():rr.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=ya(c);else if(i.includes(u)){const h=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}h.push(ya(d))}e[u]=h}else if(r.includes(u)){const h={};for(const[d,m]of Object.entries(c))h[d]=ya(m);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=c}return e}function Yy(t){return ya(t)}function Xy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Wy(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function La(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ya(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ya(e.response));return t}function Ua(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function E$(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Co(t,e){if(typeof e!="string")throw new Error("name must be a string");return E$(t,e,"cachedContents")}function EM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function br(t){return qy(t)}function T$(t){return t!=null&&typeof t=="object"&&"name"in t}function C$(t){return t!=null&&typeof t=="object"&&"video"in t}function x$(t){return t!=null&&typeof t=="object"&&"uri"in t}function TM(t){var e;let n;if(T$(t)&&(n=t.name),!(x$(t)&&(n=t.uri,n===void 0))&&!(C$(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function CM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function xM(t){for(const e of["models","tunedModels","publisherModels"])if(A$(t,e))return t[e];return[]}function A$(t,e){return t!==null&&typeof t=="object"&&e in t}function R$(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function M$(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=R$(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function AM(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function N$(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function RM(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function MM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function I$(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>fG(u))),g(e,["inlinedResponses"],a)}const r=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function D$(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const r=p(t,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function O$(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rd(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["metadata","state"]);r!=null&&g(e,["state"],MM(r));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=p(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const h=p(t,["metadata","model"]);h!=null&&g(e,["model"],h);const d=p(t,["metadata","output"]);return d!=null&&g(e,["dest"],I$(RM(d))),e}function Iv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["state"]);r!=null&&g(e,["state"],MM(r));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["createTime"]);u!=null&&g(e,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(e,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(e,["updateTime"],d);const m=p(t,["model"]);m!=null&&g(e,["model"],m);const y=p(t,["inputConfig"]);y!=null&&g(e,["src"],k$(y));const S=p(t,["outputConfig"]);S!=null&&g(e,["dest"],D$(RM(S)));const w=p(t,["completionStats"]);return w!=null&&g(e,["completionStats"],w),e}function k$(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const r=p(t,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function P$(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>cG(t,u))),g(n,["requests","requests"],a)}return n}function L$(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function U$(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function F$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Fa(t,i)),n}function B$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Fa(t,i)),n}function $$(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],G$(i));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function G$(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function NM(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>yG(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function H$(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function V$(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],O$(N$(r))),n}function fC(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],P$(t,AM(t,r)));const a=p(e,["config"]);return a!=null&&H$(a,n),n}function z$(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],je(t,i));const r=p(e,["src"]);r!=null&&g(n,["inputConfig"],L$(AM(t,r)));const a=p(e,["config"]);return a!=null&&V$(a,n),n}function q$(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function j$(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],Z$(t,r));const a=p(e,["config"]);return a!=null&&q$(a,n),n}function J$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Fa(t,i)),n}function K$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Fa(t,i)),n}function Y$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function X$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function W$(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=Ky(t,i);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(g(n,["_self"],Q$(r,n)),K2(n,{"requests[].*":"requests[].request.*"})),n}function Q$(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Z$(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&g(n,["requests"],W$(t,r)),n}function eG(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function tG(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nG(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iG(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],NM(Ft(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const C=p(e,["frequencyPenalty"]);C!=null&&g(i,["frequencyPenalty"],C);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Yy(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let ie=N;Array.isArray(ie)&&(ie=ie.map(ae=>_G(ae))),g(n,["safetySettings"],ie)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let ie=Ua(D);Array.isArray(ie)&&(ie=ie.map(ae=>bG(La(ae)))),g(n,["tools"],ie)}const L=p(e,["toolConfig"]);if(n!==void 0&&L!=null&&g(n,["toolConfig"],SG(L)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],Co(t,U));const O=p(e,["responseModalities"]);O!=null&&g(i,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const j=p(e,["speechConfig"]);if(j!=null&&g(i,["speechConfig"],Xy(j)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=p(e,["thinkingConfig"]);Y!=null&&g(i,["thinkingConfig"],Y);const W=p(e,["imageConfig"]);W!=null&&g(i,["imageConfig"],uG(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(i,["enableEnhancedCivicAnswers"],re),i}function oG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>$$(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function rG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Fa(t,i)),n}function sG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Fa(t,i)),n}function aG(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function lG(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function uG(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(h=>NM(h))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(e,["config"]);return u!=null&&g(n,["request","generationConfig"],iG(t,u,p(n,["request"],{}))),n}function fG(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],oG(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function dG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function hG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function pG(t){const e={},n=p(t,["config"]);return n!=null&&dG(n,e),e}function mG(t){const e={},n=p(t,["config"]);return n!=null&&hG(n,e),e}function gG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>rd(u))),g(e,["batchJobs"],a)}return e}function vG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Iv(u))),g(e,["batchJobs"],a)}return e}function yG(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],eG(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],tG(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],U$(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function _G(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function SG(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],nG(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function bG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],aG(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],lG(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}var So;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(So||(So={}));class fs{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}let wG=class extends To{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fs(So.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=fC(this.apiClient,e),i=n._url,r=fe("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,h=c.requests,d=[];for(const m of h){const y=Object.assign({},m);if(y.systemInstruction){const S=y.systemInstruction;delete y.systemInstruction;const w=y.request;w.systemInstruction=S,y.request=w}d.push(y)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=z$(this.apiClient,e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Iv(m))}else{const d=fC(this.apiClient,e);return c=fe("{model}:batchGenerateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>rd(m))}}async createEmbeddingsInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=j$(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>rd(h))}}async get(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=sG(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Iv(m))}else{const d=rG(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>rd(m))}}async cancel(e){var n,i,r,a;let u="",c={};if(this.apiClient.isVertexAI()){const h=B$(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=F$(this.apiClient,e);u=fe("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=mG(e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=vG(m),S=new aC;return Object.assign(S,y),S})}else{const d=pG(e);return c=fe("batches",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=gG(m),S=new aC;return Object.assign(S,y),S})}}async delete(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=K$(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>X$(m))}else{const d=J$(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>Y$(m))}}};function EG(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function dC(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>jG(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function TG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let m=Hn(u);Array.isArray(m)&&(m=m.map(y=>dC(y))),g(e,["contents"],m)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],dC(Ft(c)));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>KG(y))),g(e,["tools"],m)}const d=p(t,["toolConfig"]);if(e!==void 0&&d!=null&&g(e,["toolConfig"],JG(d)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function CG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let y=Hn(u);Array.isArray(y)&&(y=y.map(S=>S)),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Ft(c));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(S=>YG(S))),g(e,["tools"],y)}const d=p(t,["toolConfig"]);e!==void 0&&d!=null&&g(e,["toolConfig"],d);const m=p(t,["kmsKeyName"]);return e!==void 0&&m!=null&&g(e,["encryption_spec","kmsKeyName"],m),n}function xG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],yM(t,i));const r=p(e,["config"]);return r!=null&&TG(r,n),n}function AG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],yM(t,i));const r=p(e,["config"]);return r!=null&&CG(r,n),n}function RG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Co(t,i)),n}function MG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Co(t,i)),n}function NG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function IG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function DG(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function OG(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kG(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function PG(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function LG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Co(t,i)),n}function UG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Co(t,i)),n}function FG(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function BG(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function $G(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function GG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function HG(t){const e={},n=p(t,["config"]);return n!=null&&$G(n,e),e}function VG(t){const e={},n=p(t,["config"]);return n!=null&&GG(n,e),e}function zG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function qG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function jG(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],DG(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],OG(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],EG(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function JG(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],kG(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function KG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],FG(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],BG(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function YG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>PG(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function XG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function WG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function QG(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Co(t,i));const r=p(e,["config"]);return r!=null&&XG(r,n),n}function ZG(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Co(t,i));const r=p(e,["config"]);return r!=null&&WG(r,n),n}class eH extends To{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fs(So.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=AG(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=xG(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async get(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=UG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=LG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async delete(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=MG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=IG(m),S=new rC;return Object.assign(S,y),S})}else{const d=RG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=NG(m),S=new rC;return Object.assign(S,y),S})}}async update(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=ZG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=QG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=VG(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=qG(m),S=new sC;return Object.assign(S,y),S})}else{const d=HG(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=zG(m),S=new sC;return Object.assign(S,y),S})}}}function kd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function hC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(t){return this instanceof Ae?(this.v=t,this):new Ae(t)}function si(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(C){return Promise.resolve(C).then(w,y)}}function c(w,C){i[w]&&(r[w]=function(x){return new Promise(function(A,M){a.push([w,x,A,M])>1||h(w,x)})},C&&(r[w]=C(r[w])))}function h(w,C){try{d(i[w](C))}catch(x){S(a[0][3],x)}}function d(w){w.value instanceof Ae?Promise.resolve(w.value.v).then(m,y):S(a[0][2],w)}function m(w){h("next",w)}function y(w){h("throw",w)}function S(w,C){w(C),a.shift(),a.length&&h(a[0][0],a[0][1])}}function ai(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hC=="function"?hC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(c,h){u=t[a](u),r(c,h,u.done,u.value)})}}function r(a,u,c,h){Promise.resolve(h).then(function(d){a({value:d,done:c})},u)}}function tH(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:IM(n)}function IM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function nH(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function pC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!IM(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class iH{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new oH(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let oH=class{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),nH(a)}async sendMessage(e){var n;await this.sendPromise;const i=Ft(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,c;const h=await r,d=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,m=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let S=[];m!=null&&(S=(c=m.slice(y))!==null&&c!==void 0?c:[]);const w=d?[d]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Ft(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?pC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return si(this,arguments,function*(){var r,a,u,c,h,d;const m=[];try{for(var y=!0,S=ai(e),w;w=yield Ae(S.next()),r=w.done,!r;y=!0){c=w.value,y=!1;const C=c;if(tH(C)){const x=(d=(h=C.candidates)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.content;x!==void 0&&m.push(x)}yield yield Ae(C)}}catch(C){a={error:C}}finally{try{!y&&!r&&(u=S.return)&&(yield Ae(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(n,m)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...pC(i)):this.history.push(e),this.history.push(...r)}};class gh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gh.prototype)}}function rH(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function sH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function aH(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],TM(n)),e}function lH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function uH(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],TM(n)),e}function cH(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function fH(t){const e={},n=p(t,["config"]);return n!=null&&cH(n,e),e}function dH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}let hH=class extends To{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fs(So.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fH(e);return a=fe("files",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=dH(h),m=new v$;return Object.assign(m,d),m})}}async createInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rH(e);return a=fe("upload/v1beta/files",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=sH(h),m=new y$;return Object.assign(m,d),m})}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uH(e);return a=fe("files/{file}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=aH(e);return a=fe("files/{file}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=lH(h),m=new _$;return Object.assign(m,d),m})}}};function sd(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pH(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>NH(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function mH(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function gH(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vH(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function yH(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const C=p(t,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const x=p(t,["responseSchema"]);x!=null&&g(e,["responseSchema"],x);const A=p(t,["routingConfig"]);A!=null&&g(e,["routingConfig"],A);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],DM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const L=p(t,["thinkingConfig"]);L!=null&&g(e,["thinkingConfig"],L);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _H(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function SH(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function bH(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],Wy(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],pH(Ft(C)));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let U=Ua(x);Array.isArray(U)&&(U=U.map(O=>DH(La(O)))),g(e,["setup","tools"],U)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],IH(A));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);if(e!==void 0&&L!=null&&g(e,["setup","proactivity"],L),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wH(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],yH(i));const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],DM(Wy(y)));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],Ft(C));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let O=Ua(x);Array.isArray(O)&&(O=O.map(q=>OH(La(q)))),g(e,["setup","tools"],O)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],A);const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);e!==void 0&&L!=null&&g(e,["setup","proactivity"],L);const U=p(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&g(e,["setup","explicitVadSignal"],U),n}function EH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],je(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],bH(r,n)),n}function TH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],je(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],wH(r,n)),n}function CH(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function xH(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["weightedPrompts"],i)}return e}function AH(t){const e={},n=p(t,["media"]);if(n!=null){let d=_M(n);Array.isArray(d)&&(d=d.map(m=>sd(m))),g(e,["mediaChunks"],d)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],sd(bM(i)));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],sd(SM(a)));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function RH(t){const e={},n=p(t,["media"]);if(n!=null){let d=_M(n);Array.isArray(d)&&(d=d.map(m=>m)),g(e,["mediaChunks"],d)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],bM(i));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],SM(a));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function MH(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const r=p(t,["toolCall"]);r!=null&&g(e,["toolCall"],r);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=p(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],kH(u));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const h=p(t,["sessionResumptionUpdate"]);h!=null&&g(e,["sessionResumptionUpdate"],h);const d=p(t,["voiceActivityDetectionSignal"]);return d!=null&&g(e,["voiceActivityDetectionSignal"],d),e}function NH(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],mH(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],gH(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],sd(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function IH(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const i=p(t,["languageCode"]);if(i!=null&&g(e,["languageCode"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function DH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],_H(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],SH(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function OH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>vH(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function kH(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const r=p(t,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=p(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const h=p(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(C=>C)),g(e,["promptTokensDetails"],w)}const d=p(t,["cacheTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(C=>C)),g(e,["cacheTokensDetails"],w)}const m=p(t,["candidatesTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(C=>C)),g(e,["responseTokensDetails"],w)}const y=p(t,["toolUsePromptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(C=>C)),g(e,["toolUsePromptTokensDetails"],w)}const S=p(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}function PH(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function LH(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],UH(i));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function UH(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function FH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let a=Hn(r);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function BH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["tokensInfo"],r)}return e}function $H(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],GH(i)),e}function GH(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function vh(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>XV(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function HH(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function VH(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function zH(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],Ft(i));const r=p(t,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>UM(c))),g(e,["tools"],u)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],PV(a)),n}function qH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>vh(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&VH(a),n}function jH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&zH(a,n),n}function JH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const r=p(t,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function KH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function YH(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function XH(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function WH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function QH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function ZH(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const C=p(t,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const x=p(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&g(e,["parameters","outputOptions","compressionQuality"],x);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["editMode"]);e!==void 0&&I!=null&&g(e,["parameters","editMode"],I);const N=p(t,["baseSteps"]);return e!==void 0&&N!=null&&g(e,["parameters","editConfig","baseSteps"],N),n}function eV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>nz(h))),g(n,["instances[0]","referenceImages"],c)}const u=p(e,["config"]);return u!=null&&ZH(u,n),n}function tV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>yh(a))),g(e,["generatedImages"],r)}return e}function nV(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iV(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=p(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function oV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let c=Ky(t,r);Array.isArray(c)&&(c=c.map(h=>h)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&nV(a,n);const u=p(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],je(t,u)),n}function rV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let u=Ky(t,r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["instances[]","content"],u)}const a=p(e,["config"]);return a!=null&&iV(a,n),n}function sV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function aV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>$H(u))),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function lV(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function uV(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function cV(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fV(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dV(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function hV(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],vh(Ft(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const C=p(e,["frequencyPenalty"]);C!=null&&g(i,["frequencyPenalty"],C);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Yy(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let ie=N;Array.isArray(ie)&&(ie=ie.map(ae=>iz(ae))),g(n,["safetySettings"],ie)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let ie=Ua(D);Array.isArray(ie)&&(ie=ie.map(ae=>cz(La(ae)))),g(n,["tools"],ie)}const L=p(e,["toolConfig"]);if(n!==void 0&&L!=null&&g(n,["toolConfig"],uz(L)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],Co(t,U));const O=p(e,["responseModalities"]);O!=null&&g(i,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const j=p(e,["speechConfig"]);if(j!=null&&g(i,["speechConfig"],Xy(j)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=p(e,["thinkingConfig"]);Y!=null&&g(i,["thinkingConfig"],Y);const W=p(e,["imageConfig"]);W!=null&&g(i,["imageConfig"],$V(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(i,["enableEnhancedCivicAnswers"],re),i}function pV(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],Ft(r));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const C=p(e,["frequencyPenalty"]);C!=null&&g(i,["frequencyPenalty"],C);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Yy(M));const I=p(e,["responseJsonSchema"]);I!=null&&g(i,["responseJsonSchema"],I);const N=p(e,["routingConfig"]);N!=null&&g(i,["routingConfig"],N);const D=p(e,["modelSelectionConfig"]);D!=null&&g(i,["modelConfig"],D);const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let B=L;Array.isArray(B)&&(B=B.map(Q=>Q)),g(n,["safetySettings"],B)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let B=Ua(U);Array.isArray(B)&&(B=B.map(Q=>UM(La(Q)))),g(n,["tools"],B)}const O=p(e,["toolConfig"]);n!==void 0&&O!=null&&g(n,["toolConfig"],O);const q=p(e,["labels"]);n!==void 0&&q!=null&&g(n,["labels"],q);const j=p(e,["cachedContent"]);n!==void 0&&j!=null&&g(n,["cachedContent"],Co(t,j));const Y=p(e,["responseModalities"]);Y!=null&&g(i,["responseModalities"],Y);const W=p(e,["mediaResolution"]);W!=null&&g(i,["mediaResolution"],W);const re=p(e,["speechConfig"]);re!=null&&g(i,["speechConfig"],LM(Xy(re)));const ie=p(e,["audioTimestamp"]);ie!=null&&g(i,["audioTimestamp"],ie);const ae=p(e,["thinkingConfig"]);ae!=null&&g(i,["thinkingConfig"],ae);const de=p(e,["imageConfig"]);if(de!=null&&g(i,["imageConfig"],GV(de)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function mC(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>vh(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],hV(t,a,n)),n}function gC(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],pV(t,a,n)),n}function vC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>LH(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function yC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>m)),g(e,["candidates"],d)}const r=p(t,["createTime"]);r!=null&&g(e,["createTime"],r);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=p(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const h=p(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function mV(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const h=p(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&g(e,["parameters","includeSafetyAttributes"],h);const d=p(t,["includeRaiReason"]);e!==void 0&&d!=null&&g(e,["parameters","includeRaiReason"],d);const m=p(t,["language"]);e!==void 0&&m!=null&&g(e,["parameters","language"],m);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const S=p(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=p(t,["imageSize"]);if(e!==void 0&&w!=null&&g(e,["parameters","sampleImageSize"],w),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gV(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const C=p(t,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const x=p(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&g(e,["parameters","outputOptions","compressionQuality"],x);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I);const N=p(t,["enhancePrompt"]);return e!==void 0&&N!=null&&g(e,["parameters","enhancePrompt"],N),n}function vV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&mV(a,n),n}function yV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&gV(a,n),n}function _V(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>IV(u))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],kM(r)),e}function SV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>yh(u))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],PM(r)),e}function bV(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(t,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=p(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=p(t,["negativePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","negativePrompt"],h);const d=p(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&g(e,["parameters","enhancePrompt"],d),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=p(t,["lastFrame"]);e!==void 0&&m!=null&&g(e,["instances[0]","lastFrame"],_h(m));const y=p(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(w=>Ez(w))),g(e,["instances[0]","referenceImages"],S)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function wV(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=p(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const h=p(t,["aspectRatio"]);e!==void 0&&h!=null&&g(e,["parameters","aspectRatio"],h);const d=p(t,["resolution"]);e!==void 0&&d!=null&&g(e,["parameters","resolution"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["pubsubTopic"]);e!==void 0&&y!=null&&g(e,["parameters","pubsubTopic"],y);const S=p(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const C=p(t,["generateAudio"]);e!==void 0&&C!=null&&g(e,["parameters","generateAudio"],C);const x=p(t,["lastFrame"]);e!==void 0&&x!=null&&g(e,["instances[0]","lastFrame"],hi(x));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let N=A;Array.isArray(N)&&(N=N.map(D=>Tz(D))),g(e,["instances[0]","referenceImages"],N)}const M=p(t,["mask"]);e!==void 0&&M!=null&&g(e,["instances[0]","mask"],wz(M));const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&g(e,["parameters","compressionQuality"],I),n}function EV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],AV(u)),e}function TV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],RV(u)),e}function CV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],_h(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],FM(u));const c=p(e,["source"]);c!=null&&MV(c,n);const h=p(e,["config"]);return h!=null&&bV(h,n),n}function xV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],hi(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],BM(u));const c=p(e,["source"]);c!=null&&NV(c,n);const h=p(e,["config"]);return h!=null&&wV(h,n),n}function AV(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>OV(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function RV(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>kV(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function MV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],_h(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],FM(a)),n}function NV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],hi(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],BM(a)),n}function IV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],HV(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(t,["_self"]);return r!=null&&g(e,["safetyAttributes"],kM(r)),e}function yh(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],OM(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(t,["_self"]);r!=null&&g(e,["safetyAttributes"],PM(r));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function DV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],OM(n));const i=p(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["labels"],r)}return e}function OV(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],Sz(n)),e}function kV(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],bz(n)),e}function PV(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const C=p(t,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const x=p(t,["responseSchema"]);x!=null&&g(e,["responseSchema"],x);const A=p(t,["routingConfig"]);A!=null&&g(e,["routingConfig"],A);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],LM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const L=p(t,["thinkingConfig"]);L!=null&&g(e,["thinkingConfig"],L);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function LV(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function UV(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function FV(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function BV(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function $V(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GV(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&g(e,["imageSize"],i);const r=p(t,["outputMimeType"]);r!=null&&g(e,["imageOutputOptions","mimeType"],r);const a=p(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function HV(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],br(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function OM(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],br(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function _h(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],br(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function hi(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],br(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function VV(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],CM(t,c)),i}function zV(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],CM(t,c)),i}function qV(t,e){const n={},i=p(e,["config"]);return i!=null&&VV(t,i,n),n}function jV(t,e){const n={},i=p(e,["config"]);return i!=null&&zV(t,i,n),n}function JV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let a=xM(r);Array.isArray(a)&&(a=a.map(u=>Dv(u))),g(e,["models"],a)}return e}function KV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let a=xM(r);Array.isArray(a)&&(a=a.map(u=>Ov(u))),g(e,["models"],a)}return e}function YV(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const r=p(t,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function Dv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const u=p(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],fz(u));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const h=p(t,["outputTokenLimit"]);h!=null&&g(e,["outputTokenLimit"],h);const d=p(t,["supportedGenerationMethods"]);d!=null&&g(e,["supportedActions"],d);const m=p(t,["temperature"]);m!=null&&g(e,["temperature"],m);const y=p(t,["maxTemperature"]);y!=null&&g(e,["maxTemperature"],y);const S=p(t,["topP"]);S!=null&&g(e,["topP"],S);const w=p(t,["topK"]);w!=null&&g(e,["topK"],w);const C=p(t,["thinking"]);return C!=null&&g(e,["thinking"],C),e}function Ov(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const u=p(t,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(S=>lV(S))),g(e,["endpoints"],y)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const h=p(t,["_self"]);h!=null&&g(e,["tunedModelInfo"],dz(h));const d=p(t,["defaultCheckpointId"]);d!=null&&g(e,["defaultCheckpointId"],d);const m=p(t,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(S=>S)),g(e,["checkpoints"],y)}return e}function XV(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],uV(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],cV(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],PH(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function WV(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],hi(n)),e}function QV(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const d=p(t,["addWatermark"]);e!==void 0&&d!=null&&g(e,["parameters","addWatermark"],d);const m=p(t,["outputMimeType"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","mimeType"],m);const y=p(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","compressionQuality"],y);const S=p(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const w=p(t,["labels"]);return e!==void 0&&w!=null&&g(e,["labels"],w),n}function ZV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["source"]);r!=null&&tz(r,n);const a=p(e,["config"]);return a!=null&&QV(a,n),n}function ez(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>yh(r))),g(e,["generatedImages"],i)}return e}function tz(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],hi(r));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>WV(c))),g(e,["instances[0]","productImages"],u)}return n}function nz(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],hi(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const r=p(t,["referenceType"]);r!=null&&g(e,["referenceType"],r);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],YV(a));const u=p(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],HH(u));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const h=p(t,["subjectImageConfig"]);return h!=null&&g(e,["subjectImageConfig"],h),e}function kM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function PM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function iz(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function oz(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],hi(n)),e}function rz(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const r=p(t,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=p(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const h=p(t,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),n}function sz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["source"]);r!=null&&lz(r,n);const a=p(e,["config"]);return a!=null&&rz(a,n),n}function az(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>DV(r))),g(e,["generatedMasks"],i)}return e}function lz(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],hi(r));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],oz(a)),n}function LM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const i=p(t,["languageCode"]);if(i!=null&&g(e,["languageCode"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function uz(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],fV(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function cz(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],FV(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],BV(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function UM(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>dV(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function fz(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function dz(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function hz(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function pz(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function mz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],je(t,i));const r=p(e,["config"]);return r!=null&&hz(r,n),n}function gz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["config"]);return r!=null&&pz(r,n),n}function vz(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=p(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const h=p(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","compressionQuality"],h);const d=p(t,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=p(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const w=p(t,["mode"]);return e!==void 0&&w!=null&&g(e,["parameters","mode"],w),n}function yz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["image"]);r!=null&&g(n,["instances[0]","image"],hi(r));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=p(e,["config"]);return u!=null&&vz(u,n),n}function _z(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>yh(a))),g(e,["generatedImages"],r)}return e}function Sz(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],br(i));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function bz(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],br(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function wz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],hi(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function Ez(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],_h(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function Tz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],hi(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function FM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],br(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function BM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],br(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Cz(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function xz(t){const e={},n=p(t,["config"]);return n!=null&&Cz(n,e),e}function Az(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function Rz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&Az(i,e),e}function Mz(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function Nz(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const r=p(t,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),n}function Iz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],Oz(u)),e}function Dz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const r=p(t,["config"]);return r!=null&&Nz(r,e),e}function Oz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function kz(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function Pz(t){const e={},n=p(t,["config"]);return n!=null&&kz(n,e),e}function Lz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function $M(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),g(e,["customMetadata"],c)}const u=p(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function Uz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&$M(i,e),e}function Fz(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}const Bz="Content-Type",$z="X-Server-Timeout",Gz="User-Agent",kv="x-goog-api-client",Hz="1.33.0",Vz=`google-genai-sdk/${Hz}`,zz="v1beta1",qz="v1beta";class jz{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:zz,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:qz,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,c]of Object.entries(e.queryParams))r.searchParams.append(u,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const a=new AbortController,u=a.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&Jz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await _C(r),new Mv(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await _C(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return si(this,arguments,function*(){var i;const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield Ae(r.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=a.decode(m,{stream:!0});try{const C=JSON.parse(y);if("error"in C){const x=JSON.parse(JSON.stringify(C.error)),A=x.status,M=x.code,I=`got status: ${A}. ${JSON.stringify(C)}`;if(M>=400&&M<600)throw new gh({message:I,status:M})}}catch(C){if(C.name==="ApiError")throw C}u+=y;let S=-1,w=0;for(;;){S=-1,w=0;for(const A of h){const M=u.indexOf(A);M!==-1&&(S===-1||M<S)&&(S=M,w=A.length)}if(S===-1)break;const C=u.substring(0,S);u=u.substring(S+w);const x=C.trim();if(x.startsWith(c)){const A=x.substring(c.length).trim();try{const M=new Response(A,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ae(new Mv(M))}catch(M){throw new Error(`exception parsing stream chunk ${A}. ${M}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Vz+" "+this.clientOptions.userAgentExtra;return e[Gz]=n,e[kv]=n,e[Bz]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append($z,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const c=(i=n?.mimeType)!==null&&i!==void 0?i:u.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const h={file:r},d=this.getFileName(e),m=fe("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,d,h,n?.httpOptions);return a.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const a=this.clientOptions.uploader,u=await a.stat(n),c=String(u.size),h=(r=i?.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),y={};i!=null&&$M(i,y);const S=await this.fetchUploadUrl(d,c,h,m,y,i?.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,a,u){var c;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function _C(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new gh({message:r,status:n}):new Error(r)}}function Jz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const c=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const d=u[h],m=c[h];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[h]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[h]=d)}return c}const r=i(n,e);t.body=JSON.stringify(r)}const Kz="mcp_used/unknown";let Yz=!1;function GM(t){for(const e of t)if(Xz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Yz}function HM(t){var e;const n=(e=t[kv])!==null&&e!==void 0?e:"";t[kv]=(n+` ${Kz}`).trimStart()}function Xz(t){return t!==null&&typeof t=="object"&&t instanceof Qy}function Wz(t){return si(this,arguments,function*(n,i=100){let r,a=0;for(;a<i;){const u=yield Ae(n.listTools({cursor:r}));for(const c of u.tools)yield yield Ae(c),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class Qy{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Qy(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const m of this.mcpClients)try{for(var c=!0,h=(n=void 0,ai(Wz(m))),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const y=r;u.push(y);const S=y.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=m}}catch(y){n={error:y}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),M$(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}async function Qz(t,e,n){const i=new b$;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class Zz{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=nq(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(N=>{d=N}),y=e.callbacks,S=function(){d({})},w=this.apiClient,C={onopen:S,onmessage:N=>{Qz(w,y.onmessage,N)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=y?.onclose)!==null&&i!==void 0?i:function(N){}},x=this.webSocketFactory.create(h,tq(u),C);x.connect(),await m;const I={setup:{model:je(this.apiClient,e.model)}};return x.send(JSON.stringify(I)),new eq(x,this.apiClient)}}class eq{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xH(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=CH(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pa.PLAY)}pause(){this.sendPlaybackControl(pa.PAUSE)}stop(){this.sendPlaybackControl(pa.STOP)}resetContext(){this.sendPlaybackControl(pa.RESET_CONTEXT)}close(){this.conn.close()}}function tq(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function nq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const iq="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oq(t,e,n){const i=new S$;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=MH(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class rq{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Zz(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,u,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&GM(e.config.tools)&&HM(y);const S=uq(y);if(this.apiClient.isVertexAI())m=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,m);else{const j=this.apiClient.getApiKey();let Y="BidiGenerateContent",W="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Y="BidiGenerateContentConstrained",W="access_token"),m=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${Y}?${W}=${j}`}let w=()=>{};const C=new Promise(j=>{w=j}),x=e.callbacks,A=function(){var j;(j=x?.onopen)===null||j===void 0||j.call(x),w({})},M=this.apiClient,I={onopen:A,onmessage:j=>{oq(M,x.onmessage,j)},onerror:(n=x?.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=x?.onclose)!==null&&i!==void 0?i:function(j){}},N=this.webSocketFactory.create(m,lq(S),I);N.connect(),await C;let D=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const j=this.apiClient.getProject(),Y=this.apiClient.getLocation();D=`projects/${j}/locations/${Y}/`+D}let L={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Id.AUDIO]}:e.config.responseModalities=[Id.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(c=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[],O=[];for(const j of U)if(this.isCallableTool(j)){const Y=j;O.push(await Y.tool())}else O.push(j);O.length>0&&(e.config.tools=O);const q={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=TH(this.apiClient,q):L=EH(this.apiClient,q),delete L.config,N.send(JSON.stringify(L)),new aq(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sq={turnComplete:!0};class aq{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Hn(n.turns),e.isVertexAI()||(i=i.map(r=>vh(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(iq)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sq),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:RH(e)}:n={realtimeInput:AH(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function lq(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function uq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const SC=10;function bC(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t?.tools)!==null&&n!==void 0?n:[])if(_a(u)){r=!0;break}if(!r)return!0;const a=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function _a(t){return"callTool"in t&&typeof t.callTool=="function"}function cq(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>_a(r)))!==null&&i!==void 0?i:!1}function wC(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(_a(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function EC(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}let fq=class extends To{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,u,c;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!cq(n)||bC(n.config))return await this.generateContentInternal(h);const d=wC(n);if(d.length>0){const x=d.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let m,y;const S=Hn(h.contents),w=(a=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:SC;let C=0;for(;C<w&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const x=m.candidates[0].content,A=[];for(const M of(c=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[])if(_a(M)){const N=await M.callTool(m.functionCalls);A.push(...N)}C++,y={role:"user",parts:A},h.contents=Hn(h.contents),h.contents.push(x),h.contents.push(y),EC(h.config)&&(S.push(x),S.push(y))}return EC(h.config)&&(m.automaticFunctionCallingHistory=S),m},this.generateContentStream=async n=>{var i,r,a,u,c;if(this.maybeMoveToResponseJsonSchem(n),bC(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const h=wC(n);if(h.length>0){const y=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(r=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,m=(c=(u=n?.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const u=[];if(i?.generatedImages)for(const h of i.generatedImages)h&&h?.safetyAttributes&&((r=h?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h?.safetyAttributes:u.push(h);let c;return a?c={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new fs(So.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,a,u,c,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(c=n.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>_a(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(c.config.tools=u,e.config&&e.config.tools&&GM(e.config.tools)){const h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),HM(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(_a(u)){const c=u,h=await c.tool();for(const d of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:SC;let u=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(d,m,y){return si(this,arguments,function*(){for(var S,w,C,x,A,M;c<a;){u&&(c++,u=!1);const L=yield Ae(d.processParamsMaybeAddMcpUsage(y)),U=yield Ae(d.generateContentStreamInternal(L)),O=[],q=[];try{for(var I=!0,N=(w=void 0,ai(U)),D;D=yield Ae(N.next()),S=D.done,!S;I=!0){x=D.value,I=!1;const j=x;if(yield yield Ae(j),j.candidates&&(!((A=j.candidates[0])===null||A===void 0)&&A.content)){q.push(j.candidates[0].content);for(const Y of(M=j.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(c<a&&Y.functionCall){if(!Y.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(Y.functionCall.name)){const W=yield Ae(m.get(Y.functionCall.name).callTool([Y.functionCall]));O.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${Y.functionCall.name}`)}}}}catch(j){w={error:j}}finally{try{!I&&!S&&(C=N.return)&&(yield Ae(C.call(N)))}finally{if(w)throw w.error}}if(O.length>0){u=!0;const j=new zl;j.candidates=[{content:{role:"user",parts:O}}],yield yield Ae(j);const Y=[];Y.push(...q),Y.push({role:"user",parts:O});const W=Hn(y.contents).concat(Y);y.contents=W}else break}})})(this,h,e)}async generateContentInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=gC(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=yC(m),S=new zl;return Object.assign(S,y),S})}else{const d=mC(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=vC(m),S=new zl;return Object.assign(S,y),S})}}async generateContentStreamInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=gC(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(y){return si(this,arguments,function*(){var S,w,C,x;try{for(var A=!0,M=ai(y),I;I=yield Ae(M.next()),S=I.done,!S;A=!0){x=I.value,A=!1;const N=x,D=yC(yield Ae(N.json()));D.sdkHttpResponse={headers:N.headers};const L=new zl;Object.assign(L,D),yield yield Ae(L)}}catch(N){w={error:N}}finally{try{!A&&!S&&(C=M.return)&&(yield Ae(C.call(M)))}finally{if(w)throw w.error}}})})}else{const d=mC(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(y){return si(this,arguments,function*(){var S,w,C,x;try{for(var A=!0,M=ai(y),I;I=yield Ae(M.next()),S=I.done,!S;A=!0){x=I.value,A=!1;const N=x,D=vC(yield Ae(N.json()));D.sdkHttpResponse={headers:N.headers};const L=new zl;Object.assign(L,D),yield yield Ae(L)}}catch(N){w={error:N}}finally{try{!A&&!S&&(C=M.return)&&(yield Ae(C.call(M)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=rV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=aV(m),S=new QT;return Object.assign(S,y),S})}else{const d=oV(this.apiClient,e);return c=fe("{model}:batchEmbedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=sV(m),S=new QT;return Object.assign(S,y),S})}}async generateImagesInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=yV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=SV(m),S=new ZT;return Object.assign(S,y),S})}else{const d=vV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=_V(m),S=new ZT;return Object.assign(S,y),S})}}async editImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=eV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=tV(h),m=new u$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=yz(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=_z(h),m=new c$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=ZV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=ez(h),m=new f$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=sz(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=az(h),m=new d$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=UV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Ov(m))}else{const d=LV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>Dv(m))}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=jV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=KV(m),S=new eC;return Object.assign(S,y),S})}else{const d=qV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=JV(m),S=new eC;return Object.assign(S,y),S})}}async update(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=gz(this.apiClient,e);return c=fe("{model}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Ov(m))}else{const d=mz(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>Dv(m))}}async delete(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=XH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=QH(m),S=new tC;return Object.assign(S,y),S})}else{const d=YH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=WH(m),S=new tC;return Object.assign(S,y),S})}}async countTokens(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=jH(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=KH(m),S=new nC;return Object.assign(S,y),S})}else{const d=qH(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=JH(m),S=new nC;return Object.assign(S,y),S})}}async computeTokens(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=FH(this.apiClient,e);return a=fe("{model}:computeTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=BH(h),m=new h$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=xV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>{const y=TV(m),S=new Dd;return Object.assign(S,y),S})}else{const d=CV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>{const y=EV(m),S=new Dd;return Object.assign(S,y),S})}}};class dq extends To{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=i$(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u}else{const d=n$(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=Y2(e);return a=fe("{resourceName}:fetchPredictOperation",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function hq(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pq(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Eq(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function mq(t,e,n){const i={},r=p(e,["expireTime"]);n!==void 0&&r!=null&&g(n,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=p(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],wq(t,c));const h=p(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&g(n,["fieldMask"],h),i}function gq(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],mq(t,i,n)),n}function vq(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function yq(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _q(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function Sq(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function bq(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],Wy(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],pq(Ft(C)));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let U=Ua(x);Array.isArray(U)&&(U=U.map(O=>Cq(La(O)))),g(e,["setup","tools"],U)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],Tq(A));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);if(e!==void 0&&L!=null&&g(e,["setup","proactivity"],L),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wq(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],je(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],bq(r,n)),n}function Eq(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],vq(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],yq(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],hq(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function Tq(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Cq(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],_q(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],Sq(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function xq(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function Aq(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=xq(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(d=>u.includes(d)?`generationConfig.${d}`:d));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Rq extends To{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=gq(this.apiClient,e);a=fe("auth_tokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query;const h=Aq(c,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function Mq(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function Nq(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&Mq(i,e),e}function Iq(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function Dq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function Oq(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&Dq(i,e),e}function kq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}class Pq extends To{constructor(e){super(),this.apiClient=e,this.list=async n=>new fs(So.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Iq(e);return a=fe("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Nq(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Oq(e);return a=fe("{parent}/documents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=kq(h),m=new p$;return Object.assign(m,d),m})}}}class Lq extends To{constructor(e,n=new Pq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new fs(So.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xz(e);return a=fe("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mz(e);return a=fe("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rz(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Pz(e);return a=fe("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Lz(h),m=new m$;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Uz(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Fz(h),m=new g$;return Object.assign(m,d),m})}}async importFile(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Dz(e);return a=fe("{file_search_store_name}:importFile",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Iz(h),m=new jy;return Object.assign(m,d),m})}}}let VM=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return VM=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Uq=()=>VM();function Pv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Lv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Jn extends Error{}let Kn=class Uv extends Jn{constructor(e,n,i,r){super(`${Uv.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Sh({message:i,cause:Lv(n)});const a=n;return e===400?new qM(e,a,i,r):e===401?new jM(e,a,i,r):e===403?new JM(e,a,i,r):e===404?new KM(e,a,i,r):e===409?new YM(e,a,i,r):e===422?new XM(e,a,i,r):e===429?new WM(e,a,i,r):e>=500?new QM(e,a,i,r):new Uv(e,a,i,r)}},Fv=class extends Kn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Sh=class extends Kn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},zM=class extends Sh{constructor({message:e}={}){super({message:e??"Request timed out."})}},qM=class extends Kn{},jM=class extends Kn{},JM=class extends Kn{},KM=class extends Kn{},YM=class extends Kn{},XM=class extends Kn{},WM=class extends Kn{},QM=class extends Kn{};const Fq=/^[a-z][a-z0-9+.-]*:/i,Bq=t=>Fq.test(t);let Bv=t=>(Bv=Array.isArray,Bv(t));const $q=Bv;let Gq=$q;const TC=Gq;function Hq(t){if(!t)return!0;for(const e in t)return!1;return!0}function Vq(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const zq=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Jn(`${t} must be an integer`);if(e<0)throw new Jn(`${t} must be a positive integer`);return e},qq=t=>{try{return JSON.parse(t)}catch{return}};const jq=t=>new Promise(e=>setTimeout(e,t));const la="0.0.1";function Jq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Kq=()=>{var t,e,n,i,r;const a=Jq();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":xC(Deno.build.os),"X-Stainless-Arch":CC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":xC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":CC((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=Yq();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Yq(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const CC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",xC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Of;const Xq=()=>Of??(Of=Kq());function Wq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ZM(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Qq(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return ZM({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function eN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Zq(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}const e3=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const tN=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ig(t,e,n){return tN(),new File(t,e??"unknown_file",n)}function t3(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const n3=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const nN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",i3=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&nN(t),o3=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function r3(t,e,n){if(tN(),t=await t,i3(t))return t instanceof File?t:Ig([await t.arrayBuffer()],t.name);if(o3(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ig(await $v(r),e,n)}const i=await $v(t);if(e||(e=t3(t)),!n?.type){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Ig(i,e,n)}async function $v(t){var e,n,i,r,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(nN(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(n3(t))try{for(var c=!0,h=ai(t),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const m=r;u.push(...await $v(m))}}catch(m){n={error:m}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}else{const m=(a=t?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${s3(t)}`)}return u}function s3(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let iN=class{constructor(e){this._client=e}};iN._key=[];function oN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const AC=Object.freeze(Object.create(null)),a3=(t=oN)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((m,y,S)=>{var w,C,x;/[?#]/.test(y)&&(r=!0);const A=i[S];let M=(r?encodeURIComponent:t)(""+A);return S!==i.length&&(A==null||typeof A=="object"&&A.toString===((x=Object.getPrototypeOf((C=Object.getPrototypeOf((w=A.hasOwnProperty)!==null&&w!==void 0?w:AC))!==null&&C!==void 0?C:AC))===null||x===void 0?void 0:x.toString))&&(M=A+"",a.push({start:m.length+y.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),m+y+(S===i.length?"":M)},""),c=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,w)=>{const C=" ".repeat(w.start-m),x="^".repeat(w.length);return m=w.start+w.length,S+C+x},"");throw new Jn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${y}`)}return u}),kf=a3(oN);class rN extends iN{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,a=kd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Jn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Jn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(kf`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(kf`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(kf`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const a=n??{},{api_version:u=this._client.apiVersion}=a,c=kd(a,["api_version"]);return this._client.get(kf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}}rN._key=Object.freeze(["interactions"]);class sN extends rN{}function l3(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Pf;function Zy(t){let e;return(Pf??(e=new globalThis.TextEncoder,Pf=e.encode.bind(e)))(t)}let Lf;function RC(t){let e;return(Lf??(e=new globalThis.TextDecoder,Lf=e.decode.bind(e)))(t)}let bh=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Zy(e):e;this.buffer=l3([this.buffer,n]);const i=[];let r;for(;(r=u3(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(RC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=RC(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};bh.NEWLINE_CHARS=new Set([`
`,"\r"]);bh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function u3(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function c3(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Pd={off:0,error:200,warn:300,info:400,debug:500},MC=(t,e,n)=>{if(t){if(Vq(Pd,t))return t;Ht(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Pd))}`)}};function Jl(){}function Uf(t,e,n){return!e||Pd[t]>Pd[n]?Jl:e[t].bind(e)}const f3={error:Jl,warn:Jl,info:Jl,debug:Jl};let NC=new WeakMap;function Ht(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return f3;const r=NC.get(n);if(r&&r[0]===i)return r[1];const a={error:Uf("error",n,i),warn:Uf("warn",n,i),info:Uf("info",n,i),debug:Uf("debug",n,i)};return NC.set(n,[i,a]),a}const zr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);let d3=class Kl{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const a=i?Ht(i):console;function u(){return si(this,arguments,function*(){var h,d,m,y;if(r)throw new Jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,C=ai(h3(e,n)),x;x=yield Ae(C.next()),h=x.done,!h;w=!0){y=x.value,w=!1;const A=y;if(!S)if(A.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ae(JSON.parse(A.data))}catch(M){throw a.error("Could not parse message into JSON:",A.data),a.error("From chunk:",A.raw),M}}}catch(A){d={error:A}}finally{try{!w&&!h&&(m=C.return)&&(yield Ae(m.call(C)))}finally{if(d)throw d.error}}S=!0}catch(A){if(Pv(A))return yield Ae(void 0);throw A}finally{S||n.abort()}})}return new Kl(u,n,i)}static fromReadableStream(e,n,i){let r=!1;function a(){return si(this,arguments,function*(){var h,d,m,y;const S=new bh,w=eN(e);try{for(var C=!0,x=ai(w),A;A=yield Ae(x.next()),h=A.done,!h;C=!0){y=A.value,C=!1;const M=y;for(const I of S.decode(M))yield yield Ae(I)}}catch(M){d={error:M}}finally{try{!C&&!h&&(m=x.return)&&(yield Ae(m.call(x)))}finally{if(d)throw d.error}}for(const M of S.flush())yield yield Ae(M)})}function u(){return si(this,arguments,function*(){var h,d,m,y;if(r)throw new Jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,C=ai(a()),x;x=yield Ae(C.next()),h=x.done,!h;w=!0){y=x.value,w=!1;const A=y;S||A&&(yield yield Ae(JSON.parse(A)))}}catch(A){d={error:A}}finally{try{!w&&!h&&(m=C.return)&&(yield Ae(m.call(C)))}finally{if(d)throw d.error}}S=!0}catch(A){if(Pv(A))return yield Ae(void 0);throw A}finally{S||n.abort()}})}return new Kl(u,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new Kl(()=>r(e),this.controller,this.client),new Kl(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return ZM({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const u=Zy(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function h3(t,e){return si(this,arguments,function*(){var i,r,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Jn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Jn("Attempted to iterate over a response with no body");const c=new m3,h=new bh,d=eN(t.body);try{for(var m=!0,y=ai(p3(d)),S;S=yield Ae(y.next()),i=S.done,!i;m=!0){u=S.value,m=!1;const w=u;for(const C of h.decode(w)){const x=c.decode(C);x&&(yield yield Ae(x))}}}catch(w){r={error:w}}finally{try{!m&&!i&&(a=y.return)&&(yield Ae(a.call(y)))}finally{if(r)throw r.error}}for(const w of h.flush()){const C=c.decode(w);C&&(yield yield Ae(C))}})}function p3(t){return si(this,arguments,function*(){var n,i,r,a;let u=new Uint8Array;try{for(var c=!0,h=ai(t),d;d=yield Ae(h.next()),n=d.done,!n;c=!0){a=d.value,c=!1;const m=a;if(m==null)continue;const y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?Zy(m):m;let S=new Uint8Array(u.length+y.length);S.set(u),S.set(y,u.length),u=S;let w;for(;(w=c3(u))!==-1;)yield yield Ae(u.slice(0,w)),u=u.slice(w)}}catch(m){i={error:m}}finally{try{!c&&!n&&(r=h.return)&&(yield Ae(r.call(h)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ae(u))})}let m3=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=g3(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function g3(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function v3(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var c;if(e.options.stream)return Ht(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):d3.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),d=(c=h?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Ht(t).debug(`[${i}] response parsed`,zr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}let y3=class aN extends Promise{constructor(e,n,i=v3){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new aN(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};const lN=Symbol("brand.privateNullableHeaders");function*_3(t){if(!t)return;if(lN in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():TC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=TC(i[1])?i[1]:[i[1]];let u=!1;for(const c of a)c!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,c])}}const Dg=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,u]of _3(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),u===null?(e.delete(a),n.add(c)):(e.append(a,u),n.delete(c))}}return{[lN]:!0,values:e,nulls:n}};const Og=t=>{var e,n,i,r,a,u;if(typeof globalThis.process<"u")return(i=(n=(e=V2)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||u===void 0?void 0:u.trim()};var uN;class wh{constructor(e){var n,i,r,a,u,c,h,d=e===void 0?{}:e,{baseURL:m=Og("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Og("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:S="v1beta"}=d,w=kd(d,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:y,apiVersion:S},w),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:wh.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(u=(a=MC(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:MC(Og("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:x,this.fetchOptions=C.fetchOptions,this.maxRetries=(c=C.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=C.fetch)!==null&&h!==void 0?h:Wq(),this.encoder=e3,this._options=C,this.apiKey=y,this.apiVersion=S}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return Dg([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Jn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${la}`}defaultIdempotencyKey(){return`stainless-node-retry-${Uq()}`}makeStatusError(e,n,i,r){return Kn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=Bq(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return Hq(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new y3(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,a,u;const c=await e,h=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=h),await this.prepareOptions(c);const{req:d,url:m,timeout:y}=await this.buildRequest(c,{retryCount:h-n});await this.prepareRequest(d,{url:m,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,C=Date.now();if(Ht(this).debug(`[${S}] sending request`,zr({retryOfRequestLogID:i,method:c.method,url:m,options:c,headers:d.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new Fv;const x=new AbortController,A=await this.fetchWithTimeout(m,d,y,x).catch(Lv),M=Date.now();if(A instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((u=c.signal)===null||u===void 0)&&u.aborted)throw new Fv;const D=Pv(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(n)return Ht(this).info(`[${S}] connection ${D?"timed out":"failed"} - ${N}`),Ht(this).debug(`[${S}] connection ${D?"timed out":"failed"} (${N})`,zr({retryOfRequestLogID:i,url:m,durationMs:M-C,message:A.message})),this.retryRequest(c,n,i??S);throw Ht(this).info(`[${S}] connection ${D?"timed out":"failed"} - error; no more retries left`),Ht(this).debug(`[${S}] connection ${D?"timed out":"failed"} (error; no more retries left)`,zr({retryOfRequestLogID:i,url:m,durationMs:M-C,message:A.message})),D?new zM:new Sh({cause:A})}const I=`[${S}${w}] ${d.method} ${m} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${M-C}ms`;if(!A.ok){const N=await this.shouldRetry(A);if(n&&N){const j=`retrying, ${n} attempts remaining`;return await Zq(A.body),Ht(this).info(`${I} - ${j}`),Ht(this).debug(`[${S}] response error (${j})`,zr({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,durationMs:M-C})),this.retryRequest(c,n,i??S,A.headers)}const D=N?"error; no more retries left":"error; not retryable";Ht(this).info(`${I} - ${D}`);const L=await A.text().catch(j=>Lv(j).message),U=qq(L),O=U?void 0:L;throw Ht(this).debug(`[${S}] response error (${D})`,zr({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,message:O,durationMs:Date.now()-C})),this.makeStatusError(A.status,U,O,A.headers)}return Ht(this).info(I),Ht(this).debug(`[${S}] response start`,zr({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,durationMs:M-C})),{response:A,options:c,controller:x,requestLogID:S,retryOfRequestLogID:i,startTime:C}}async fetchWithTimeout(e,n,i,r){const a=n||{},{signal:u,method:c}=a,h=kd(a,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),i),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},m?{duplex:"half"}:{}),{method:"GET"}),h);c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var a;let u;const c=r?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(u=d)}const h=r?.get("retry-after");if(h&&!u){const d=parseFloat(h);Number.isNaN(d)?u=Date.parse(h)-Date.now():u=d*1e3}if(!(u&&0<=u&&u<60*1e3)){const d=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,d)}return await jq(u),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,a;const u=Object.assign({},e),{method:c,path:h,query:d,defaultBaseURL:m}=u,y=this.buildURL(h,d,m);"timeout"in u&&zq("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),C=await this.buildHeaders({options:e,method:c,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:C},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:y,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=Dg([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Xq()),await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Dg([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Qq(e)}:this.encoder({body:e,headers:i})}}wh.DEFAULT_TIMEOUT=6e4;class xt extends wh{constructor(){super(...arguments),this.interactions=new sN(this)}}uN=xt;xt.GeminiNextGenAPIClient=uN;xt.GeminiNextGenAPIClientError=Jn;xt.APIError=Kn;xt.APIConnectionError=Sh;xt.APIConnectionTimeoutError=zM;xt.APIUserAbortError=Fv;xt.NotFoundError=KM;xt.ConflictError=YM;xt.RateLimitError=WM;xt.BadRequestError=qM;xt.AuthenticationError=jM;xt.InternalServerError=QM;xt.PermissionDeniedError=JM;xt.UnprocessableEntityError=XM;xt.toFile=r3;xt.Interactions=sN;function S3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function b3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function w3(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function E3(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function T3(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=p(t,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const h=p(t,["learningRate"]);if(e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","learningRate"],h),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function C3(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec"],IC(w))}else if(r==="PREFERENCE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec"],IC(w))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=p(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(d==="PREFERENCE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let m=p(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(m==="PREFERENCE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function x3(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&U3(a);const u=p(t,["config"]);return u!=null&&T3(u,n),n}function A3(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&F3(a,n,e);const u=p(t,["config"]);return u!=null&&C3(u,n,e),n}function R3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function M3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function N3(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function I3(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function D3(t,e){const n={},i=p(t,["config"]);return i!=null&&N3(i,n),n}function O3(t,e){const n={},i=p(t,["config"]);return i!=null&&I3(i,n),n}function k3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>cN(c))),g(n,["tuningJobs"],u)}return n}function P3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>Gv(c))),g(n,["tuningJobs"],u)}return n}function L3(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const r=p(t,["name"]);return r!=null&&g(n,["endpoint"],r),n}function U3(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(n,["examples","examples"],r)}return n}function F3(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function cN(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],EM(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["tuningTask","completeTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["description"]);m!=null&&g(n,["description"],m);const y=p(t,["baseModel"]);y!=null&&g(n,["baseModel"],y);const S=p(t,["_self"]);return S!=null&&g(n,["tunedModel"],L3(S)),n}function Gv(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],EM(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["error"]);m!=null&&g(n,["error"],m);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const S=p(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const w=p(t,["tunedModel"]);w!=null&&g(n,["tunedModel"],w);const C=p(t,["preTunedModel"]);C!=null&&g(n,["preTunedModel"],C);const x=p(t,["supervisedTuningSpec"]);x!=null&&g(n,["supervisedTuningSpec"],x);const A=p(t,["preferenceOptimizationSpec"]);A!=null&&g(n,["preferenceOptimizationSpec"],A);const M=p(t,["tuningDataStats"]);M!=null&&g(n,["tuningDataStats"],M);const I=p(t,["encryptionSpec"]);I!=null&&g(n,["encryptionSpec"],I);const N=p(t,["partnerModelTuningSpec"]);N!=null&&g(n,["partnerModelTuningSpec"],N);const D=p(t,["customBaseModel"]);D!=null&&g(n,["customBaseModel"],D);const L=p(t,["experiment"]);L!=null&&g(n,["experiment"],L);const U=p(t,["labels"]);U!=null&&g(n,["labels"],U);const O=p(t,["outputUri"]);O!=null&&g(n,["outputUri"],O);const q=p(t,["pipelineJob"]);q!=null&&g(n,["pipelineJob"],q);const j=p(t,["serviceAccount"]);j!=null&&g(n,["serviceAccount"],j);const Y=p(t,["tunedModelDisplayName"]);Y!=null&&g(n,["tunedModelDisplayName"],Y);const W=p(t,["veoTuningSpec"]);return W!=null&&g(n,["veoTuningSpec"],W),n}function B3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(t,["done"]);u!=null&&g(n,["done"],u);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function IC(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const r=p(t,["vertexDatasetResource"]);return r!=null&&g(n,["validationDatasetUri"],r),n}class $3 extends To{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fs(So.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Rv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=M3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>Gv(m))}else{const d=R3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>cN(m))}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=O3(e);return c=fe("tuningJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=P3(m),S=new iC;return Object.assign(S,y),S})}else{const d=D3(e);return c=fe("tunedModels",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=k3(m),S=new iC;return Object.assign(S,y),S})}}async cancel(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=b3(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=E3(m),S=new oC;return Object.assign(S,y),S})}else{const d=S3(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=w3(m),S=new oC;return Object.assign(S,y),S})}}async tuneInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=A3(e,e);return a=fe("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>Gv(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=x3(e);return a=fe("tunedModels",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>B3(h))}}}class G3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const H3=1024*1024*8,V3=3,z3=1e3,q3=2,Ld="x-goog-upload-status";async function j3(t,e,n){var i;const r=await fN(t,e,n),a=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function J3(t,e,n){var i;const r=await fN(t,e,n),a=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=vM(a),c=new Jy;return Object.assign(c,u),c}async function fN(t,e,n){var i,r;let a=0,u=0,c=new Mv(new Response),h="upload";for(a=t.size;u<a;){const d=Math.min(H3,a-u),m=t.slice(u,u+d);u+d>=a&&(h+=", finalize");let y=0,S=z3;for(;y<V3&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(d)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[Ld]));)y++,await Y3(S),S=S*q3;if(u+=d,((r=c?.headers)===null||r===void 0?void 0:r[Ld])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function K3(t){return{size:t.size,type:t.type}}function Y3(t){return new Promise(e=>setTimeout(e,t))}class X3{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await j3(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J3(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K3(e)}}class W3{create(e,n,i){return new Q3(e,n,i)}}class Q3{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const DC="x-goog-api-key";class Z3{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(DC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(DC,this.apiKey)}}}const e4="gl-node/";class t4{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new xt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=J2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new Z3(this.apiKey);this.apiClient=new jz({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:e4+"web",uploader:new X3,downloader:new G3}),this.models=new fq(this.apiClient),this.live=new rq(this.apiClient,r,new W3),this.batches=new wG(this.apiClient),this.chats=new iH(this.models,this.apiClient),this.caches=new eH(this.apiClient),this.files=new hH(this.apiClient),this.operations=new dq(this.apiClient),this.authTokens=new Rq(this.apiClient),this.tunings=new $3(this.apiClient),this.fileSearchStores=new Lq(this.apiClient)}}let kg=class extends Error{};const e_=["gemini-2.5-flash-image","gemini-3-pro-image-preview"];class Ti{static options={img_models:{flash_image:"gemini-2.5-flash-image",pro_image:"gemini-3-pro-image-preview"}};static getApiKey=null;static setApiKey=null;static getGenAI(){const e=this.getApiKey?.()||"";if(console.log(e),!e)throw new kg("No Google API key set");return new t4({apiKey:e})}static async txt2txt(e){try{const n=this.getGenAI(),i={},r=await n.models.generateContent({model:"gemini-2.5-flash",contents:e,config:i});return console.log("RES TEXT",r.text),r.text}catch(n){console.error("Goo Err Response",n);const i=n?.message||"";if(i.includes("API key not valid")||i.includes("API_KEY_INVALID")||n instanceof kg)return this.showKeyPromptWindow(),null;throw n}}static async img2img(e,n=e_[0],i){try{const r=this.getGenAI(),a=[{text:e}];if(i?.length)for(const m of i)!m?.rawBase64||!m?.mime||(m.description&&a.push({text:m.description}),a.push({inlineData:{data:m.rawBase64,mimeType:m.mime}}));const u={model:n,contents:a,config:{imageConfig:{aspectRatio:"9:16",response_modalities:["Image"]}}};console.log("Gemini Payload",u);const c=await r.models.generateContent(u);console.log("GEMINI RES",c);const d=(c?.candidates??[])[0]?.content?.parts??[];for(const m of d)if(m.inlineData){const y=m.inlineData.data,S=m.inlineData.mimeType||"image/png";return{base64Obj:{rawBase64:y,mime:S},id:c.responseId}}return null}catch(r){const a=r?.message||"";if(a.includes("API key not valid")||a.includes("API_KEY_INVALID")||r instanceof kg)return this.showKeyPromptWindow(),null;throw console.error("img2img error",r),r}}static showKeyPromptWindow(){const e=window.prompt("Your Google API key is missing or invalid. Please enter a valid key:");e?this.setApiKey?.(e):console.warn("User did not provide a valid API key.")}static async saveResultImage(e,n){return e&&e.base64Obj?.rawBase64?(console.log(e.base64Obj.mime.split("/")[1]),await mo.fromBase64({rawBase64:e.base64Obj.rawBase64,mime:e.base64Obj.mime},n,`${e.id}.${e.base64Obj.mime.split("/")[1]}`)):(console.warn("No valid image returned from GoogleAI.img2img"),null)}}async function n4(t,e){const n=Math.floor(Date.now()/1e3),i={alg:"HS256",typ:"JWT"},r={iss:t,exp:n+1800,nbf:n-5},a=Pg(JSON.stringify(i)),u=Pg(JSON.stringify(r)),c=`${a}.${u}`,h=await crypto.subtle.importKey("raw",new TextEncoder().encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),d=await crypto.subtle.sign("HMAC",h,new TextEncoder().encode(c));return`${c}.${Pg(d)}`}function Pg(t){let e;typeof t=="string"?e=new TextEncoder().encode(t):e=new Uint8Array(t);let n="";for(let i=0;i<e.length;i++)n+=String.fromCharCode(e[i]);return btoa(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Ie{static getKeysDict=null;static videoModels=["kling-v1","kling-v1-5","kling-v1-6","kling-v2-master","kling-v2-1","kling-v2-1-master","kling-v2-5-turbo","kling-v2-6"];static options={img2video:{duration:{five:"5",ten:"10"},mode:{std:"std",pro:"pro"},model:{v1:"kling-v1",v1_5:"kling-v1-5",v1_6:"kling-v1-6",v2_0m:"kling-v2-master",v2_1:"kling-v2-1",v2_1m:"kling-v2-1-master",v2_5:"kling-v2-5-turbo",v2_6:"kling-v2-6",vo1:"kling-video-o1"},sound:{on:"on",off:"off"}},motion_control:{mode:{std:"std",pro:"pro"},character_orientation:{image:"image",video:"video"},keep_original_sound:{yes:"yes",no:"no"}},omni_video:{model:{o1:"kling-video-o1"},mode:{std:"std",pro:"pro"},aspect_ratio:{landscape:"16:9",portrait:"9:16",square:"1:1"},duration:{three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"},video:{refer_type:{base:"base",feature:"feature"},keep_original_sound:{yes:"yes",no:"no"}},image:{type:{first_frame:"first_frame",end_frame:"end_frame"}}}};static async getToken(){const e=this.getKeysDict?.();if(!e)throw new Error("No Kling API keys provided or getKeysDict not set");return await n4(e.accessKey,e.secretKey)}static async postToKling(e,n){const r=`http://localhost:4000/proxy/${encodeURIComponent(e)}`,a=await this.getToken();console.log(`Kling API request to ${e}:`,n);const u=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!u.ok){const h=await u.text();throw new Error(`Kling API request failed: ${h}`)}const c=await u.json();return console.log(`Kling API response from ${e}:`,c),c}static async txt2video(e,n="kling-v1"){const i={model_name:n,mode:"std",duration:"5",prompt:e,cfg_scale:.5};return{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/text2video",i)).data.task_id,workflow:"text2video"}}static async img2video(e){const{image:n,prompt:i,model:r=Ie.options.img2video.model.v2_6,duration:a=Ie.options.img2video.duration,mode:u=Ie.options.img2video.mode.std,cfg_scale:c=.5,static_mask:h,dynamic_masks:d,image_tail:m,camera_control:y,voice_list:S,sound:w="off",negative_prompt:C,callback_url:x,external_task_id:A}=e,M={model_name:r,image:n,prompt:i,duration:a,mode:u,cfg_scale:c,sound:w};return h&&(M.static_mask=h),d&&(M.dynamic_masks=d),m&&(M.image_tail=m),y&&(M.camera_control=y),S&&(M.voice_list=S),C&&(M.negative_prompt=C),x&&(M.callback_url=x),A&&(M.external_task_id=A),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/image2video",M)).data.task_id,workflow:"image2video"}}static async motionControl(e){const{image:n,video_url:i,prompt:r,mode:a=Ie.options.motion_control.mode.std,character_orientation:u,keep_original_sound:c=Ie.options.motion_control.keep_original_sound.yes,callback_url:h,external_task_id:d}=e,m={image_url:n,video_url:i,character_orientation:u,mode:a,keep_original_sound:c};return r&&(m.prompt=r),h&&(m.callback_url=h),d&&(m.external_task_id=d),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/motion-control",m)).data.task_id,workflow:"motion-control"}}static async getStatus(e,n="text2video"){const i=`https://api-singapore.klingai.com/v1/videos/${n}/${e}`,a=`http://localhost:4000/proxy/${encodeURIComponent(i)}`,u=await this.getToken();console.log("KLING_AI Get Status sent");const c=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});if(!c.ok){const d=await c.text();throw new Error(`Task status request failed: ${d}`)}if((c.headers.get("content-type")||"").includes("application/json")){const d=await c.json();return console.log("KLING check status:",d),{status:d?.data?.task_status||"unknown",status_msg:d?.data?.task_status_msg||"",url:d?.data?.task_result?.videos?.[0]?.url||null}}}static async omniVideo(e){const{prompt:n,model:i="kling-video-o1",mode:r="pro",aspect_ratio:a,duration:u="5",image_list:c,element_list:h,video_list:d,callback_url:m,external_task_id:y}=e;if(!n)throw new Error("OmniVideo requires a prompt");const S={model_name:i,prompt:n,mode:r,duration:u};return a&&(S.aspect_ratio=a),c&&(S.image_list=c),h&&(S.element_list=h),d&&(S.video_list=d),m&&(S.callback_url=m),y&&(S.external_task_id=y),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/omni-video",S)).data.task_id,workflow:"omni-video"}}static async identifyFace(e){const{video_id:n,video_url:i}=e;if(!n&&!i||n&&i)throw new Error("You must provide either video_id or video_url, but not both.");const r={};return n&&(r.video_id=n),i&&(r.video_url=i),await this.postToKling("https://api-singapore.klingai.com/v1/videos/identify-face",r)}static async lipSync(e){const{session_id:n,face_choose:i,callback_url:r,external_task_id:a}=e;if(!n)throw new Error("session_id is required for LipSync");if(!i||i.length===0)throw new Error("face_choose must include at least one face");const u={session_id:n,face_choose:i};return r&&(u.callback_url=r),a&&(u.external_task_id=a),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/advanced-lip-sync",u)).data.task_id,workflow:"advanced-lip-sync"}}}const cu={KLING:"kling",GPT:"gpt",GOOGLE:"google"},i4={info:"info",success:"success",warning:"warning",error:"error"};class o4{notifications=[];types=i4;constructor(){Oa(this,{},{autoBind:!0})}add(e,n=this.types.info,i){this.notifications.push({id:crypto.randomUUID(),message:e,type:n,...i})}remove(e){const n=this.notifications.find(i=>i.id===e);n?.onClose&&n.onClose(),this.notifications=this.notifications.filter(i=>i.id!==e)}clear(){this.notifications.forEach(e=>e.onClose?.()),this.notifications=[]}}const Ci=new o4;class OC{shot;id;is_checking_status=!1;_status_log="";constructor(e,n){this.shot=e,this.id=n,Oa(this)}update(e){const i={...this.data||{},...e};this.shot.shotJson?.updateField(`tasks/${this.id}`,i)}log(){console.log({task:yo(this),data:yo(this.data)})}delete(){this.shot.removeTask(this)}get data(){return this.shot.shotJson?.getField(`tasks/${this.id}`)}get status(){return this.data.status??"submitted"}finish_checking(){we(()=>{this.is_checking_status=!1}),this._status_log=""}async check_status(e=30,n=15e3){if(this.data.provider===cu.KLING){we(()=>{this.is_checking_status=!0,this._status_log="start checking"}),console.log("started checking status");for(let i=0;i<=e;i++){try{console.log("new attempt");const r=await Ie.getStatus(this.id,this.data.workflow);if(console.log("status",r),this.update(r),r?.status==="succeed"&&r.url){await this.downloadResults(),this.finish_checking();return}if(r?.status==="failed"){console.warn(`Task ${this.id} failed.`),this.finish_checking();return}}catch(r){console.error("Status check failed:",r)}i<e&&(we(()=>{this._status_log=`(attempt ${i+1}/${e})`}),await new Promise(r=>setTimeout(r,n)))}console.warn(`Task ${this.id} did not finish after ${e} retries.`),this.finish_checking()}}async downloadResults(){const e=this.data?.url,n=await this.shot.MediaFolder_genVideo?.downloadFromUrl(e);n&&(this.data.geninfo&&n?.mediaJson?.updateField("geninfo",this.data.geninfo),this.update({result:n?.name}),Ci.add(`Downloaded ${this.shot.path}`,Ci.types.success,{onClick:()=>{this.navigate()},media:n}))}navigate(){this.shot.scene.selectShot(this.shot),this.shot.scene.project.setScene(this.shot.scene)}get result(){return this.shot.MediaFolder_genVideo.getMediaByFilename(this.data.result)}}class qu extends zu{static async fromBase64(e,n,i){try{const r=atob(e),a=r.length,u=new Uint8Array(a);for(let d=0;d<a;d++)u[d]=r.charCodeAt(d);const c=await n.handle.getFileHandle(i,{create:!0}),h=await c.createWritable();return await h.write(u),await h.close(),new qu(c,n)}catch(r){throw console.error("Failed to create LocalVideo from Base64:",r),r}}}class Eh extends zu{base64Data=null;async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.getFile(),n=await e.arrayBuffer(),i=e.type||"audio/mpeg",r=r4(n);return this.base64Data={rawBase64:r,mime:i},this.base64Data}catch(e){return console.error("Failed to create Base64 from audio file:",e),{rawBase64:"",mime:"audio/mpeg"}}}static async fromBase64(e,n,i){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const u=atob(r),c=u.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=u.charCodeAt(S);const d=await n.handle.getFileHandle(i,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new Eh(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalAudio from Base64:",r),r}}async getDuration(){const e=await this.getFile(),n=URL.createObjectURL(e);return await new Promise((i,r)=>{const a=new Audio;a.src=n,a.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(n),i(a.duration)}),a.addEventListener("error",()=>{URL.revokeObjectURL(n),r(new Error("Failed to load audio"))})})}}function r4(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}class ma extends ar{media=[];pickedMedia=null;selectedMedia=null;tags=["picked","start_frame","end_frame","motion_ref"];multi_tags=["ref_frame"];shot=null;onPicked;onSelected;static async create(e,n){const i=await e.handle.getDirectoryHandle(n,{create:!0}),r=new ma(e,i);return await r.load(),r}constructor(e,n){super(e,n),this.shot=e,vr(this,{media:Te,pickedMedia:Te,selectedMedia:Te,tags:Te,multi_tags:Te,shot:Te,load:ut,deleteMedia:ut,setSelectedMedia:ut,downloadFromUrl:ut,loadFile:ut,saveFiles:ut,copyFromClipboard:ut,mediaOrdered:lr})}async load(){try{for await(const[,e]of this.handle.entries())e.kind==="file"&&await this.loadFile(e)}catch(e){console.error(`Failed to load MediaFolder '${this.name}':`,e),we(()=>{this.media=[]})}}get mediaOrdered(){return[...this.media].sort((e,n)=>e.lastModified-n.lastModified)}async deleteMedia(e,n=!0){if(!this.handle)throw new Error("Folder not loaded");if(!(n&&!window.confirm(`Delete this ${e instanceof mo?"image":"video"}?`)))try{await e.delete(),we(()=>{this.media=this.media.filter(i=>i!==e)})}catch(i){console.error("Failed to delete media:",i),alert(`Failed to delete ${e instanceof mo?"image":"video"}.`)}}setSelectedMedia(e){we(()=>{this.selectedMedia===e?this.selectedMedia=null:this.selectedMedia=e}),this.onSelected?.(e)}log(){console.log(yo(this))}async downloadFromUrl(e){if(!this.handle)throw new Error("MediaFolder not loaded");try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch: ${n.statusText}`);const i=await n.blob();let a=new URL(e).pathname.split("/").pop()||"download";if(!a.includes(".")){const d=i.type.split("/")[1];d&&(a+=`.${d}`)}const u=await this.handle.getFileHandle(a,{create:!0}),c=await u.createWritable();return await c.write(i),await c.close(),this.loadFile(u)}catch(n){throw console.error("Failed to download media from URL:",n),n}}async loadFile(e){const n=e.name;let i=null;return n.match(/\.(png|jpe?g|gif|webp)$/i)?i=new mo(e,this):n.match(/\.(mp4|mov|webm|avi)$/i)?i=new qu(e,this):n.match(/\.(mp3|wav|m4a)$/i)&&(i=new Eh(e,this)),await this.addMediaItem(i)}async addMediaItem(e){return e?(await e.load(),e.mediaFolder=this,e.onTagChanged=(n,i,r)=>{if(r&&!this.multi_tags.includes(i))for(const a of this.media)a!==n&&a.hasTag(i)&&a.removeTag(i)},we(()=>{this.media.push(e)}),e):null}async saveFiles(e){if(!this.handle)throw new Error("MediaFolder not loaded");for(const n of e)try{const i=await this.handle.getFileHandle(n.name,{create:!0}),r=await i.createWritable();await r.write(n),await r.close(),this.loadFile(i)}catch(i){console.error(`Failed to save file '${n.name}':`,i)}}async copyFromClipboard(){if(!this.handle)throw new Error("MediaFolder not loaded");if(!navigator.clipboard||!navigator.clipboard.read){console.warn("Clipboard API not supported");return}const e=[];try{const n=await navigator.clipboard.read();console.log(n);for(const i of n)for(const r of i.types){if(!r.startsWith("image/")&&!r.startsWith("video/"))continue;const a=await i.getType(r),u=a.name||`clipboard-${Date.now()}.${r.split("/")[1]}`;e.push(a instanceof File?a:new File([a],u,{type:r}))}if(e.length===0){console.info("Clipboard does not contain files");return}await this.saveFiles(e)}catch(n){console.error("Failed to read from clipboard:",n);return}}getMediaWithTag(e){return e?this.media.filter(n=>n.hasTag(e)):[]}getFirstMediaWithTag(e){return this.media.find(n=>n.hasTag(e))??null}hasAnyMediaWithTag(e){return this.media.some(n=>n.hasTag(e))}getMediaByFilename(e){return e?this.media.find(n=>n.name===e)??null:null}}class kC extends ar{shotJson=null;tasks=[];is_submitting_video=!1;is_generating=!1;MediaFolder_results=null;MediaFolder_genVideo=null;MediaFolder_refVideo=null;MediaFolder_Audio=null;constructor(e,n){super(n,e),vr(this,{shotJson:Te,tasks:Te,is_submitting_video:Te,is_generating:Te,MediaFolder_results:Te,MediaFolder_genVideo:Te,MediaFolder_refVideo:Te,MediaFolder_Audio:Te})}get scene(){return this.parentFolder}get mediafolders(){return[this.MediaFolder_results,this.MediaFolder_Audio,this.MediaFolder_genVideo,this.MediaFolder_refVideo]}get srcImage(){return this.MediaFolder_results.getFirstMediaWithTag("start_frame")}get end_frame(){return this.MediaFolder_results.getFirstMediaWithTag("end_frame")}get kling_motion_video(){return this.MediaFolder_refVideo.getFirstMediaWithTag("motion_ref")}get outVideo(){return this.MediaFolder_genVideo.getFirstMediaWithTag("picked")}get unreal_frame(){return this.MediaFolder_results.getFirstMediaWithTag("unreal_frame")}get kling_face_id_data(){return this.outVideo?this.shotJson?.getField("KlingFaceID/"+this.outVideo.name):null}async load(){try{this.shotJson=await cr.create(this.handle,"shotinfo.json"),this.MediaFolder_results=await ma.create(this,"results"),this.MediaFolder_results.tags=["start_frame","end_frame","ref_frame","unreal_frame"],this.MediaFolder_genVideo=await ma.create(this,"genVideo"),this.MediaFolder_genVideo.tags=["picked"],this.MediaFolder_refVideo=await ma.create(this,"refVideo"),this.MediaFolder_refVideo.tags=["motion_ref"],this.MediaFolder_Audio=await ma.create(this,"audio"),this.MediaFolder_Audio.tags=["ID-0","ID-1","ID-2"],this.loadTasks()}catch(e){console.error("Error loading shot:",this.name,e),this.shotJson=null}}loadTasks(){const e=this.shotJson?.getField("tasks");we(()=>{if(this.tasks=[],!(!e||typeof e!="object"))for(const n of Object.keys(e))this.tasks.push(new OC(this,n))})}addTask(e,n){const i=new OC(this,e);return we(()=>{this.tasks.push(i)}),i.update(n),i}removeTask(e){we(()=>{this.tasks=this.tasks.filter(i=>i!==e)});const n=this.shotJson?.getField("tasks")??{};delete n[e.id],this.shotJson?.updateField("tasks",n)}async delete(){if(!this.scene?.handle){console.error("Cannot delete shot: scene folder not set");return}try{await this.scene.handle.removeEntry(this.name,{recursive:!0}),we(()=>{this.scene.shots=this.scene.shots.filter(e=>e!==this)})}catch(e){console.error("Failed to delete shot:",e)}}async GenerateVideo(){we(()=>{this.is_submitting_video=!0});const e=this.shotJson?.data.video_prompt||"";try{const n=this.scene.project.workflows.generate_video_kling,i=n.model;let r=null;if(i===Ie.options.omni_video.model.o1){const u=[];this.srcImage&&u.push({image_url:(await this.srcImage.getBase64()).rawBase64,type:Ie.options.omni_video.image.type.first_frame}),this.end_frame&&u.push({image_url:(await this.end_frame.getBase64()).rawBase64,type:Ie.options.omni_video.image.type.end_frame}),r=await Ie.omniVideo({prompt:e,model:"kling-video-o1",mode:n.mode??"pro",duration:n.duration??"5",aspect_ratio:"16:9",image_list:u.length?u:void 0})}else if(this.srcImage){const u=(await this.srcImage.getBase64()).rawBase64,c=(await this.end_frame?.getBase64())?.rawBase64;r=await Ie.img2video({image:u,image_tail:c,prompt:e,model:i,mode:n.mode,duration:n.duration,sound:n?.sound??Ie.options.img2video.sound.off})}if(!r)return;const a=this.addTask(r.id,{provider:cu.KLING,workflow:r.workflow,geninfo:{workflow:"kling_generate_video",prompt:e,model:i,source:this.srcImage?.path,end_frame:this.end_frame?.path,kling:{mode:n.mode,duration:n.duration,sound:n?.sound??Ie.options.img2video.sound.off}}});await new Promise(u=>setTimeout(u,100)),a.check_status()}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{we(()=>{this.is_submitting_video=!1})}}async Kling_IdentyfiFace(){we(()=>{this.is_submitting_video=!0});try{if(console.log("Identyfying Video Face"),this.outVideo){const e=await this.outVideo.getWebUrl(),n=await Ie.identifyFace({video_url:e});console.log("FACE ID res:",n),n.message=="SUCCEED"&&this.shotJson?.updateField("KlingFaceID/"+this.outVideo.name,n.data)}}catch(e){console.error("Face Identification Failed:",e)}finally{we(()=>{this.is_submitting_video=!1})}}async Kling_LypSync(){we(()=>{this.is_submitting_video=!0});try{const e=[];for(const r of["ID-0","ID-1","ID-2"]){const a=this.MediaFolder_Audio.getFirstMediaWithTag(r);if(!a)continue;const u=await a.getBase64();if(!u)continue;const c=await a.getDuration();e.push({face_id:r.replace("ID-",""),sound_file_path:a.path,sound_file:u.rawBase64,sound_start_time:0,sound_end_time:Math.min(c*1e3,5e3),sound_insert_time:0,sound_volume:1,original_audio_volume:1})}if(e.length===0){console.warn("No audios found for lip-sync.");return}const n=await Ie.lipSync({session_id:this.kling_face_id_data.session_id,face_choose:e}),i=this.addTask(n.id,{provider:cu.KLING,workflow:n.workflow,geninfo:{workflow:"kling_LipSync",source:this.outVideo?.path,face_choose:e.map(r=>({...r,sound_file:""}))}});await new Promise(r=>setTimeout(r,100)),i.check_status(),await new Promise(r=>setTimeout(r,2e3))}catch(e){console.error("Submitting Lip Sync Failed:",e)}finally{we(()=>{this.is_submitting_video=!1})}}async GenerateVideo_KlingMotionControl(){we(()=>{this.is_submitting_video=!0});let e=this.shotJson?.data.video_prompt||"";try{const n=this.scene.project.workflows.kling_motion_control;if(this.srcImage&&this.kling_motion_video){const i=(await this.srcImage.getBase64()).rawBase64,r=await this.kling_motion_video.getWebUrl(),a=await Ie.motionControl({image:i,video_url:r,prompt:e,mode:n.mode,character_orientation:n.character_orientation,keep_original_sound:n.keep_original_sound}),u=this.addTask(a.id,{provider:cu.KLING,workflow:a.workflow,geninfo:{workflow:"kling_MotionControl",prompt:e,source:this.srcImage?.path,motionVideo:this.kling_motion_video.path,kling:{mode:n.mode,duration:n.duration,character_orientation:n.character_orientation,keep_original_sound:n.keep_original_sound}}});await new Promise(c=>setTimeout(c,100)),u.check_status(),await new Promise(c=>setTimeout(c,2e3))}}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{we(()=>{this.is_submitting_video=!1})}}getFilteredTags(){return this.scene.getTags().filter(e=>!this.getSkippedTags().includes(e.path))}async getImageTags(){const e=this.getSkippedTags(),n=[];for(const i of this.scene.getTags())if(!e.includes(i.path))try{const r=await i.image.getBase64();n.push({rawBase64:r.rawBase64,mime:r.mime,description:i.path})}catch(r){console.warn("Failed to load tag image:",i.path,r)}return n}async GenerateImage(){we(()=>{this.is_generating=!0});try{const e=await this.getImageTags(),n=this.shotJson?.data.prompt||"",i=await Ti.img2img(n,this.scene.project.workflows.generate_shot_image.model,e),r=await Ti.saveResultImage(i,this.MediaFolder_results);r&&(await this.MediaFolder_results?.addMediaItem(r))?.mediaJson?.updateField("geninfo",{workflow:"shot_generate_image",prompt:n,model:this.scene.project.workflows.generate_shot_image.model,art_refs:this.getFilteredTags().map(u=>u.path)})}catch(e){console.error("GenerateImage failed:",e)}finally{we(()=>{this.is_generating=!1})}}async StylizeImage(){if(!this.unreal_frame){console.error("No Reference Frame");return}we(()=>{this.is_generating=!0});try{const e=[],n=await this.unreal_frame.getBase64();e.push({rawBase64:n.rawBase64,mime:n.mime,description:"Base Image"}),e.push(...await this.getImageTags());const i=(this.scene.project.workflows.stylize_image_google.prompt||"")+(this.shotJson?.data.stylize_prompt||""),r=await Ti.img2img(i,this.scene.project.workflows.stylize_image_google.model,e),a=await Ti.saveResultImage(r,this.MediaFolder_results);a&&(await this.MediaFolder_results?.addMediaItem(a))?.mediaJson?.updateField("geninfo",{workflow:"stylize_image_google",global_prompt:this.scene.project.workflows.stylize_image_google.prompt||"",prompt:this.shotJson?.data.stylize_prompt||"",model:this.scene.project.workflows.stylize_image_google.model,art_refs:this.getFilteredTags().map(c=>c.path),source:this.unreal_frame.path})}catch(e){console.error("StylizeImage failed:",e)}finally{we(()=>{this.is_generating=!1})}}getSkippedTags(){return this.shotJson?.data?.skippedTags||[]}setTagSkipped(e,n){this.shotJson?.data&&(Array.isArray(this.shotJson.data.skippedTags)||(this.shotJson.data.skippedTags=[]),we(()=>{const i=this.shotJson.data.skippedTags;n?i.includes(e)||i.push(e):this.shotJson.data.skippedTags=i.filter(r=>r!==e)}),this.shotJson.save())}log(){console.log(yo(this))}}function xe(t,e,n,i,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function V(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}let dN=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return dN=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};function Hv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Se extends Error{}class Pt extends Se{constructor(e,n,i,r){super(`${Pt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Th({message:i,cause:Vv(n)});const a=n?.error;return e===400?new hN(e,a,i,r):e===401?new pN(e,a,i,r):e===403?new mN(e,a,i,r):e===404?new gN(e,a,i,r):e===409?new vN(e,a,i,r):e===422?new yN(e,a,i,r):e===429?new _N(e,a,i,r):e>=500?new SN(e,a,i,r):new Pt(e,a,i,r)}}class Gn extends Pt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Th extends Pt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class t_ extends Th{constructor({message:e}={}){super({message:e??"Request timed out."})}}class hN extends Pt{}class pN extends Pt{}class mN extends Pt{}class gN extends Pt{}class vN extends Pt{}class yN extends Pt{}class _N extends Pt{}class SN extends Pt{}class bN extends Se{constructor(){super("Could not parse response content as the length limit was reached")}}class wN extends Se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Yl extends Error{constructor(e){super(e)}}const s4=/^[a-z][a-z0-9+.-]*:/i,a4=t=>s4.test(t);let tn=t=>(tn=Array.isArray,tn(t)),PC=tn;function EN(t){return typeof t!="object"?{}:t??{}}function l4(t){if(!t)return!0;for(const e in t)return!1;return!0}function u4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const c4=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Se(`${t} must be an integer`);if(e<0)throw new Se(`${t} must be a positive integer`);return e},f4=t=>{try{return JSON.parse(t)}catch{return}},ju=t=>new Promise(e=>setTimeout(e,t)),ua="6.10.0",d4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function h4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const p4=()=>{const t=h4();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":UC(Deno.build.os),"X-Stainless-Arch":LC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":UC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":LC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=m4();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ua,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function m4(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const LC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",UC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let FC;const g4=()=>FC??(FC=p4());function v4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function TN(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function CN(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return TN({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function xN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function y4(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const _4=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),AN="RFC3986",RN=t=>String(t),BC={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:RN},S4="RFC1738";let zv=(t,e)=>(zv=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),zv(t,e));const _i=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Ug=1024,b4=(t,e,n,i,r)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let u="";for(let c=0;c<a.length;c+=Ug){const h=a.length>=Ug?a.slice(c,c+Ug):a,d=[];for(let m=0;m<h.length;++m){let y=h.charCodeAt(m);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||r===S4&&(y===40||y===41)){d[d.length]=h.charAt(m);continue}if(y<128){d[d.length]=_i[y];continue}if(y<2048){d[d.length]=_i[192|y>>6]+_i[128|y&63];continue}if(y<55296||y>=57344){d[d.length]=_i[224|y>>12]+_i[128|y>>6&63]+_i[128|y&63];continue}m+=1,y=65536+((y&1023)<<10|h.charCodeAt(m)&1023),d[d.length]=_i[240|y>>18]+_i[128|y>>12&63]+_i[128|y>>6&63]+_i[128|y&63]}u+=d.join("")}return u};function w4(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function $C(t,e){if(tn(t)){const n=[];for(let i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)}const MN={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},NN=function(t,e){Array.prototype.push.apply(t,tn(e)?e:[e])};let GC;const wt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:b4,encodeValuesOnly:!1,format:AN,formatter:RN,indices:!1,serializeDate(t){return(GC??(GC=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function E4(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Fg={};function IN(t,e,n,i,r,a,u,c,h,d,m,y,S,w,C,x,A,M){let I=t,N=M,D=0,L=!1;for(;(N=N.get(Fg))!==void 0&&!L;){const Y=N.get(t);if(D+=1,typeof Y<"u"){if(Y===D)throw new RangeError("Cyclic object value");L=!0}typeof N.get(Fg)>"u"&&(D=0)}if(typeof d=="function"?I=d(e,I):I instanceof Date?I=S?.(I):n==="comma"&&tn(I)&&(I=$C(I,function(Y){return Y instanceof Date?S?.(Y):Y})),I===null){if(a)return h&&!x?h(e,wt.encoder,A,"key",w):e;I=""}if(E4(I)||w4(I)){if(h){const Y=x?e:h(e,wt.encoder,A,"key",w);return[C?.(Y)+"="+C?.(h(I,wt.encoder,A,"value",w))]}return[C?.(e)+"="+C?.(String(I))]}const U=[];if(typeof I>"u")return U;let O;if(n==="comma"&&tn(I))x&&h&&(I=$C(I,h)),O=[{value:I.length>0?I.join(",")||null:void 0}];else if(tn(d))O=d;else{const Y=Object.keys(I);O=m?Y.sort(m):Y}const q=c?String(e).replace(/\./g,"%2E"):String(e),j=i&&tn(I)&&I.length===1?q+"[]":q;if(r&&tn(I)&&I.length===0)return j+"[]";for(let Y=0;Y<O.length;++Y){const W=O[Y],re=typeof W=="object"&&typeof W.value<"u"?W.value:I[W];if(u&&re===null)continue;const ie=y&&c?W.replace(/\./g,"%2E"):W,ae=tn(I)?typeof n=="function"?n(j,ie):j:j+(y?"."+ie:"["+ie+"]");M.set(t,D);const de=new WeakMap;de.set(Fg,M),NN(U,IN(re,ae,n,i,r,a,u,c,n==="comma"&&x&&tn(I)?null:h,d,m,y,S,w,C,x,A,de))}return U}function T4(t=wt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||wt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=AN;if(typeof t.format<"u"){if(!zv(BC,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const i=BC[n];let r=wt.filter;(typeof t.filter=="function"||tn(t.filter))&&(r=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in MN?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=wt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:wt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:wt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:wt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:wt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?wt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:wt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:wt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:wt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:wt.encodeValuesOnly,filter:r,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:wt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:wt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:wt.strictNullHandling}}function C4(t,e={}){let n=t;const i=T4(e);let r,a;typeof i.filter=="function"?(a=i.filter,n=a("",n)):tn(i.filter)&&(a=i.filter,r=a);const u=[];if(typeof n!="object"||n===null)return"";const c=MN[i.arrayFormat],h=c==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);const d=new WeakMap;for(let S=0;S<r.length;++S){const w=r[S];i.skipNulls&&n[w]===null||NN(u,IN(n[w],w,c,h,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}const m=u.join(i.delimiter);let y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""}function x4(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let HC;function n_(t){let e;return(HC??(e=new globalThis.TextEncoder,HC=e.encode.bind(e)))(t)}let VC;function zC(t){let e;return(VC??(e=new globalThis.TextDecoder,VC=e.decode.bind(e)))(t)}var gn,vn;class Ch{constructor(){gn.set(this,void 0),vn.set(this,void 0),xe(this,gn,new Uint8Array),xe(this,vn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?n_(e):e;xe(this,gn,x4([V(this,gn,"f"),n]));const i=[];let r;for(;(r=A4(V(this,gn,"f"),V(this,vn,"f")))!=null;){if(r.carriage&&V(this,vn,"f")==null){xe(this,vn,r.index);continue}if(V(this,vn,"f")!=null&&(r.index!==V(this,vn,"f")+1||r.carriage)){i.push(zC(V(this,gn,"f").subarray(0,V(this,vn,"f")-1))),xe(this,gn,V(this,gn,"f").subarray(V(this,vn,"f"))),xe(this,vn,null);continue}const a=V(this,vn,"f")!==null?r.preceding-1:r.preceding,u=zC(V(this,gn,"f").subarray(0,a));i.push(u),xe(this,gn,V(this,gn,"f").subarray(r.index)),xe(this,vn,null)}return i}flush(){return V(this,gn,"f").length?this.decode(`
`):[]}}gn=new WeakMap,vn=new WeakMap;Ch.NEWLINE_CHARS=new Set([`
`,"\r"]);Ch.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function A4(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function R4(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Ud={off:0,error:200,warn:300,info:400,debug:500},qC=(t,e,n)=>{if(t){if(u4(Ud,t))return t;Ot(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ud))}`)}};function Xl(){}function Ff(t,e,n){return!e||Ud[t]>Ud[n]?Xl:e[t].bind(e)}const M4={error:Xl,warn:Xl,info:Xl,debug:Xl};let jC=new WeakMap;function Ot(t){const e=t.logger,n=t.logLevel??"off";if(!e)return M4;const i=jC.get(e);if(i&&i[0]===n)return i[1];const r={error:Ff("error",e,n),warn:Ff("warn",e,n),info:Ff("info",e,n),debug:Ff("debug",e,n)};return jC.set(e,[n,r]),r}const qr=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var ql;class xi{constructor(e,n,i){this.iterator=e,ql.set(this,void 0),this.controller=n,xe(this,ql,i)}static fromSSEResponse(e,n,i){let r=!1;const a=i?Ot(i):console;async function*u(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of N4(e,n))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(m){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),m}if(d&&d.error)throw new Pt(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(m){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),m}if(h.event=="error")throw new Pt(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(Hv(h))return;throw h}finally{c||n.abort()}}return new xi(u,n,i)}static fromReadableStream(e,n,i){let r=!1;async function*a(){const c=new Ch,h=xN(e);for await(const d of h)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*u(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(Hv(h))return;throw h}finally{c||n.abort()}}return new xi(u,n,i)}[(ql=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new xi(()=>r(e),this.controller,V(this,ql,"f")),new xi(()=>r(n),this.controller,V(this,ql,"f"))]}toReadableStream(){const e=this;let n;return TN({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const u=n_(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){await n.return?.()}})}}async function*N4(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");const n=new D4,i=new Ch,r=xN(t.body);for await(const a of I4(r))for(const u of i.decode(a)){const c=n.decode(u);c&&(yield c)}for(const a of i.flush()){const u=n.decode(a);u&&(yield u)}}async function*I4(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const i=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?n_(n):n;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let a;for(;(a=R4(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class D4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=O4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function O4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function DN(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{if(e.options.stream)return Ot(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):xi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const y=await n.json();return ON(y,n)}return await n.text()})();return Ot(t).debug(`[${i}] response parsed`,qr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}function ON(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Wl;class xh extends Promise{constructor(e,n,i=DN){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,Wl.set(this,void 0),xe(this,Wl,e)}_thenUnwrap(e){return new xh(V(this,Wl,"f"),this.responsePromise,async(n,i)=>ON(e(await this.parseResponse(n,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(V(this,Wl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Wl=new WeakMap;var Bf;class i_{constructor(e,n,i,r){Bf.set(this,void 0),xe(this,Bf,e),this.options=r,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await V(this,Bf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Bf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class k4 extends xh{constructor(e,n,i){super(e,n,async(r,a)=>new i(r,a.response,await DN(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Ah extends i_{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class _t extends i_{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...EN(this.options.query),after:n}}:null}}class Fd extends i_{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...EN(this.options.query),after:e}}:null}}const kN=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function fu(t,e,n){return kN(),new File(t,e??"unknown_file",n)}function ad(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const o_=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",JC=async(t,e)=>qv(t.body)?{...t,body:await PN(t.body,e)}:t,rs=async(t,e)=>({...t,body:await PN(t.body,e)}),KC=new WeakMap;function P4(t){const e=typeof t=="function"?t:t.fetch,n=KC.get(e);if(n)return n;const i=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return KC.set(e,i),i}const PN=async(t,e)=>{if(!await P4(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([i,r])=>jv(n,i,r))),n},LN=t=>t instanceof Blob&&"name"in t,L4=t=>typeof t=="object"&&t!==null&&(t instanceof Response||o_(t)||LN(t)),qv=t=>{if(L4(t))return!0;if(Array.isArray(t))return t.some(qv);if(t&&typeof t=="object"){for(const e in t)if(qv(t[e]))return!0}return!1},jv=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,fu([await n.blob()],ad(n)));else if(o_(n))t.append(e,fu([await new Response(CN(n)).blob()],ad(n)));else if(LN(n))t.append(e,n,ad(n));else if(Array.isArray(n))await Promise.all(n.map(i=>jv(t,e+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,r])=>jv(t,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},UN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",U4=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&UN(t),F4=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function B4(t,e,n){if(kN(),t=await t,U4(t))return t instanceof File?t:fu([await t.arrayBuffer()],t.name);if(F4(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),fu(await Jv(r),e,n)}const i=await Jv(t);if(e||(e=ad(t)),!n?.type){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n={...n,type:r})}return fu(i,e,n)}async function Jv(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(UN(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(o_(t))for await(const n of t)e.push(...await Jv(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${$4(t)}`)}return e}function $4(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ye{constructor(e){this._client=e}}function FN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const YC=Object.freeze(Object.create(null)),G4=(t=FN)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((m,y,S)=>{/[?#]/.test(y)&&(r=!0);const w=i[S];let C=(r?encodeURIComponent:t)(""+w);return S!==i.length&&(w==null||typeof w=="object"&&w.toString===Object.getPrototypeOf(Object.getPrototypeOf(w.hasOwnProperty??YC)??YC)?.toString)&&(C=w+"",a.push({start:m.length+y.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),m+y+(S===i.length?"":C)},""),c=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,w)=>{const C=" ".repeat(w.start-m),x="^".repeat(w.length);return m=w.start+w.length,S+C+x},"");throw new Se(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${y}`)}return u},oe=G4(FN);let BN=class extends ye{list(e,n={},i){return this._client.getAPIList(oe`/chat/completions/${e}/messages`,_t,{query:n,...i})}};function Bd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function r_(t){return t?.$brand==="auto-parseable-response-format"}function Ju(t){return t?.$brand==="auto-parseable-tool"}function H4(t,e){return!e||!$N(e)?{...t,choices:t.choices.map(n=>(GN(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:s_(t,e)}function s_(t,e){const n=t.choices.map(i=>{if(i.finish_reason==="length")throw new bN;if(i.finish_reason==="content_filter")throw new wN;return GN(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(r=>z4(e,r))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?V4(e,i.message.content):null}}});return{...t,choices:n}}function V4(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function z4(t,e){const n=t.tools?.find(i=>Bd(i)&&i.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Ju(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function q4(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(i=>Bd(i)&&i.function?.name===e.function.name);return Bd(n)&&(Ju(n)||n?.function.strict||!1)}function $N(t){return r_(t.response_format)?!0:t.tools?.some(e=>Ju(e)||e.type==="function"&&e.function.strict===!0)??!1}function GN(t){for(const e of t||[])if(e.type!=="function")throw new Se(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function j4(t){for(const e of t??[]){if(e.type!=="function")throw new Se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const $d=t=>t?.role==="assistant",HN=t=>t?.role==="tool";var Kv,ld,ud,Ql,Zl,cd,eu,ro,tu,Gd,Hd,ca,VN;class a_{constructor(){Kv.add(this),this.controller=new AbortController,ld.set(this,void 0),ud.set(this,()=>{}),Ql.set(this,()=>{}),Zl.set(this,void 0),cd.set(this,()=>{}),eu.set(this,()=>{}),ro.set(this,{}),tu.set(this,!1),Gd.set(this,!1),Hd.set(this,!1),ca.set(this,!1),xe(this,ld,new Promise((e,n)=>{xe(this,ud,e,"f"),xe(this,Ql,n,"f")})),xe(this,Zl,new Promise((e,n)=>{xe(this,cd,e,"f"),xe(this,eu,n,"f")})),V(this,ld,"f").catch(()=>{}),V(this,Zl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},V(this,Kv,"m",VN).bind(this))},0)}_connected(){this.ended||(V(this,ud,"f").call(this),this._emit("connect"))}get ended(){return V(this,tu,"f")}get errored(){return V(this,Gd,"f")}get aborted(){return V(this,Hd,"f")}abort(){this.controller.abort()}on(e,n){return(V(this,ro,"f")[e]||(V(this,ro,"f")[e]=[])).push({listener:n}),this}off(e,n){const i=V(this,ro,"f")[e];if(!i)return this;const r=i.findIndex(a=>a.listener===n);return r>=0&&i.splice(r,1),this}once(e,n){return(V(this,ro,"f")[e]||(V(this,ro,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,i)=>{xe(this,ca,!0),e!=="error"&&this.once("error",i),this.once(e,n)})}async done(){xe(this,ca,!0),await V(this,Zl,"f")}_emit(e,...n){if(V(this,tu,"f"))return;e==="end"&&(xe(this,tu,!0),V(this,cd,"f").call(this));const i=V(this,ro,"f")[e];if(i&&(V(this,ro,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!V(this,ca,"f")&&!i?.length&&Promise.reject(r),V(this,Ql,"f").call(this,r),V(this,eu,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!V(this,ca,"f")&&!i?.length&&Promise.reject(r),V(this,Ql,"f").call(this,r),V(this,eu,"f").call(this,r),this._emit("end")}}_emitFinal(){}}ld=new WeakMap,ud=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,cd=new WeakMap,eu=new WeakMap,ro=new WeakMap,tu=new WeakMap,Gd=new WeakMap,Hd=new WeakMap,ca=new WeakMap,Kv=new WeakSet,VN=function(e){if(xe(this,Gd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Gn),e instanceof Gn)return xe(this,Hd,!0),this._emit("abort",e);if(e instanceof Se)return this._emit("error",e);if(e instanceof Error){const n=new Se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Se(String(e)))};function J4(t){return typeof t.parse=="function"}var Gt,Yv,Vd,Xv,Wv,Qv,zN,qN;const K4=10;class jN extends a_{constructor(){super(...arguments),Gt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),HN(e)&&e.content)this._emit("functionToolCallResult",e.content);else if($d(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),V(this,Gt,"m",Yv).call(this)}async finalMessage(){return await this.done(),V(this,Gt,"m",Vd).call(this)}async finalFunctionToolCall(){return await this.done(),V(this,Gt,"m",Xv).call(this)}async finalFunctionToolCallResult(){return await this.done(),V(this,Gt,"m",Wv).call(this)}async totalUsage(){return await this.done(),V(this,Gt,"m",Qv).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=V(this,Gt,"m",Vd).call(this);n&&this._emit("finalMessage",n);const i=V(this,Gt,"m",Yv).call(this);i&&this._emit("finalContent",i);const r=V(this,Gt,"m",Xv).call(this);r&&this._emit("finalFunctionToolCall",r);const a=V(this,Gt,"m",Wv).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",V(this,Gt,"m",Qv).call(this))}async _createChatCompletion(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,Gt,"m",zN).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s_(a,n))}async _runChatCompletion(e,n,i){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,i)}async _runTools(e,n,i){const r="tool",{tool_choice:a="auto",stream:u,...c}=n,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=K4}=i||{},m=n.tools.map(w=>{if(Ju(w)){if(!w.$callback)throw new Se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),y={};for(const w of m)w.type==="function"&&(y[w.function.name||w.function.function.name]=w.function);const S="tools"in n?m.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of n.messages)this._addMessage(w,!1);for(let w=0;w<d;++w){const x=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:S,messages:[...this.messages]},i)).choices[0]?.message;if(!x)throw new Se("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const A of x.tool_calls){if(A.type!=="function")continue;const M=A.id,{name:I,arguments:N}=A.function,D=y[I];if(D){if(h&&h!==I){const q=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(y).map(j=>JSON.stringify(j)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}let L;try{L=J4(D)?await D.parse(N):N}catch(q){const j=q instanceof Error?q.message:String(q);this._addMessage({role:r,tool_call_id:M,content:j});continue}const U=await D.function(L,this),O=V(this,Gt,"m",qN).call(this,U);if(this._addMessage({role:r,tool_call_id:M,content:O}),h)return}}}}Gt=new WeakSet,Yv=function(){return V(this,Gt,"m",Vd).call(this).content??null},Vd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if($d(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},Xv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if($d(n)&&n?.tool_calls?.length)return n.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},Wv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(HN(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},Qv=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},zN=function(e){if(e.n!=null&&e.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},qN=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class l_ extends jN{static runTools(e,n,i){const r=new l_,a={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}_addMessage(e,n=!0){super._addMessage(e,n),$d(e)&&e.content&&this._emit("content",e.content)}}const JN=1,KN=2,YN=4,XN=8,WN=16,QN=32,ZN=64,eI=128,tI=256,nI=eI|tI,iI=WN|QN|nI|ZN,oI=JN|KN|iI,rI=YN|XN,Y4=oI|rI,Ct={STR:JN,NUM:KN,ARR:YN,OBJ:XN,NULL:WN,BOOL:QN,NAN:ZN,INFINITY:eI,MINUS_INFINITY:tI,INF:nI,SPECIAL:iI,ATOM:oI,COLLECTION:rI,ALL:Y4};class X4 extends Error{}class W4 extends Error{}function Q4(t,e=Ct.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Z4(t.trim(),e)}const Z4=(t,e)=>{const n=t.length;let i=0;const r=S=>{throw new X4(`${S} at position ${i}`)},a=S=>{throw new W4(`${S} at position ${i}`)},u=()=>(y(),i>=n&&r("Unexpected end of input"),t[i]==='"'?c():t[i]==="{"?h():t[i]==="["?d():t.substring(i,i+4)==="null"||Ct.NULL&e&&n-i<4&&"null".startsWith(t.substring(i))?(i+=4,null):t.substring(i,i+4)==="true"||Ct.BOOL&e&&n-i<4&&"true".startsWith(t.substring(i))?(i+=4,!0):t.substring(i,i+5)==="false"||Ct.BOOL&e&&n-i<5&&"false".startsWith(t.substring(i))?(i+=5,!1):t.substring(i,i+8)==="Infinity"||Ct.INFINITY&e&&n-i<8&&"Infinity".startsWith(t.substring(i))?(i+=8,1/0):t.substring(i,i+9)==="-Infinity"||Ct.MINUS_INFINITY&e&&1<n-i&&n-i<9&&"-Infinity".startsWith(t.substring(i))?(i+=9,-1/0):t.substring(i,i+3)==="NaN"||Ct.NAN&e&&n-i<3&&"NaN".startsWith(t.substring(i))?(i+=3,NaN):m()),c=()=>{const S=i;let w=!1;for(i++;i<n&&(t[i]!=='"'||w&&t[i-1]==="\\");)w=t[i]==="\\"?!w:!1,i++;if(t.charAt(i)=='"')try{return JSON.parse(t.substring(S,++i-Number(w)))}catch(C){a(String(C))}else if(Ct.STR&e)try{return JSON.parse(t.substring(S,i-Number(w))+'"')}catch{return JSON.parse(t.substring(S,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},h=()=>{i++,y();const S={};try{for(;t[i]!=="}";){if(y(),i>=n&&Ct.OBJ&e)return S;const w=c();y(),i++;try{const C=u();Object.defineProperty(S,w,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(Ct.OBJ&e)return S;throw C}y(),t[i]===","&&i++}}catch{if(Ct.OBJ&e)return S;r("Expected '}' at end of object")}return i++,S},d=()=>{i++;const S=[];try{for(;t[i]!=="]";)S.push(u()),y(),t[i]===","&&i++}catch{if(Ct.ARR&e)return S;r("Expected ']' at end of array")}return i++,S},m=()=>{if(i===0){t==="-"&&Ct.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(w){if(Ct.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(w))}}const S=i;for(t[i]==="-"&&i++;t[i]&&!",]}".includes(t[i]);)i++;i==n&&!(Ct.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(S,i))}catch{t.substring(S,i)==="-"&&Ct.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(S,t.lastIndexOf("e")))}catch(C){a(String(C))}}},y=()=>{for(;i<n&&` 
\r	`.includes(t[i]);)i++};return u()},XC=t=>Q4(t,Ct.ALL^Ct.NUM);var bt,oo,ta,Zo,Bg,$f,$g,Gg,Hg,Gf,Vg,WC;class Su extends jN{constructor(e){super(),bt.add(this),oo.set(this,void 0),ta.set(this,void 0),Zo.set(this,void 0),xe(this,oo,e),xe(this,ta,[])}get currentChatCompletionSnapshot(){return V(this,Zo,"f")}static fromReadableStream(e){const n=new Su(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,i){const r=new Su(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,i){super._createChatCompletion;const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,bt,"m",Bg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const u of a)V(this,bt,"m",$g).call(this,u);if(a.controller.signal?.aborted)throw new Gn;return this._addChatCompletion(V(this,bt,"m",Gf).call(this))}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),V(this,bt,"m",Bg).call(this),this._connected();const r=xi.fromReadableStream(e,this.controller);let a;for await(const u of r)a&&a!==u.id&&this._addChatCompletion(V(this,bt,"m",Gf).call(this)),V(this,bt,"m",$g).call(this,u),a=u.id;if(r.controller.signal?.aborted)throw new Gn;return this._addChatCompletion(V(this,bt,"m",Gf).call(this))}[(oo=new WeakMap,ta=new WeakMap,Zo=new WeakMap,bt=new WeakSet,Bg=function(){this.ended||xe(this,Zo,void 0)},$f=function(n){let i=V(this,ta,"f")[n.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},V(this,ta,"f")[n.index]=i,i)},$g=function(n){if(this.ended)return;const i=V(this,bt,"m",WC).call(this,n);this._emit("chunk",n,i);for(const r of n.choices){const a=i.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const u=V(this,bt,"m",$f).call(this,a);a.finish_reason&&(V(this,bt,"m",Hg).call(this,a),u.current_tool_call_index!=null&&V(this,bt,"m",Gg).call(this,a,u.current_tool_call_index));for(const c of r.delta.tool_calls??[])u.current_tool_call_index!==c.index&&(V(this,bt,"m",Hg).call(this,a),u.current_tool_call_index!=null&&V(this,bt,"m",Gg).call(this,a,u.current_tool_call_index)),u.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},Gg=function(n,i){if(V(this,bt,"m",$f).call(this,n).done_tool_calls.has(i))return;const a=n.message.tool_calls?.[i];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const u=V(this,oo,"f")?.tools?.find(c=>Bd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:i,arguments:a.function.arguments,parsed_arguments:Ju(u)?u.$parseRaw(a.function.arguments):u?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Hg=function(n){const i=V(this,bt,"m",$f).call(this,n);if(n.message.content&&!i.content_done){i.content_done=!0;const r=V(this,bt,"m",Vg).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Gf=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,Zo,"f");if(!n)throw new Se("request ended without sending any chunks");return xe(this,Zo,void 0),xe(this,ta,[]),e6(n,V(this,oo,"f"))},Vg=function(){const n=V(this,oo,"f")?.response_format;return r_(n)?n:null},WC=function(n){var i,r,a,u;let c=V(this,Zo,"f");const{choices:h,...d}=n;c?Object.assign(c,d):c=xe(this,Zo,{...d,choices:[]});for(const{delta:m,finish_reason:y,index:S,logprobs:w=null,...C}of n.choices){let x=c.choices[S];if(x||(x=c.choices[S]={finish_reason:y,index:S,message:{},logprobs:w,...C}),w)if(!x.logprobs)x.logprobs=Object.assign({},w);else{const{content:U,refusal:O,...q}=w;Object.assign(x.logprobs,q),U&&((i=x.logprobs).content??(i.content=[]),x.logprobs.content.push(...U)),O&&((r=x.logprobs).refusal??(r.refusal=[]),x.logprobs.refusal.push(...O))}if(y&&(x.finish_reason=y,V(this,oo,"f")&&$N(V(this,oo,"f")))){if(y==="length")throw new bN;if(y==="content_filter")throw new wN}if(Object.assign(x,C),!m)continue;const{content:A,refusal:M,function_call:I,role:N,tool_calls:D,...L}=m;if(Object.assign(x.message,L),M&&(x.message.refusal=(x.message.refusal||"")+M),N&&(x.message.role=N),I&&(x.message.function_call?(I.name&&(x.message.function_call.name=I.name),I.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=I.arguments)):x.message.function_call=I),A&&(x.message.content=(x.message.content||"")+A,!x.message.refusal&&V(this,bt,"m",Vg).call(this)&&(x.message.parsed=XC(x.message.content))),D){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:U,id:O,type:q,function:j,...Y}of D){const W=(u=x.message.tool_calls)[U]??(u[U]={});Object.assign(W,Y),O&&(W.id=O),q&&(W.type=q),j&&(W.function??(W.function={name:j.name??"",arguments:""})),j?.name&&(W.function.name=j.name),j?.arguments&&(W.function.arguments+=j.arguments,q4(V(this,oo,"f"),W)&&(W.function.parsed_arguments=XC(W.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("chunk",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new xi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function e6(t,e){const{id:n,choices:i,created:r,model:a,system_fingerprint:u,...c}=t,h={...c,id:n,choices:i.map(({message:d,finish_reason:m,index:y,logprobs:S,...w})=>{if(!m)throw new Se(`missing finish_reason for choice ${y}`);const{content:C=null,function_call:x,tool_calls:A,...M}=d,I=d.role;if(!I)throw new Se(`missing role for choice ${y}`);if(x){const{arguments:N,name:D}=x;if(N==null)throw new Se(`missing function_call.arguments for choice ${y}`);if(!D)throw new Se(`missing function_call.name for choice ${y}`);return{...w,message:{content:C,function_call:{arguments:N,name:D},role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}return A?{...w,index:y,finish_reason:m,logprobs:S,message:{...M,role:I,content:C,refusal:d.refusal??null,tool_calls:A.map((N,D)=>{const{function:L,type:U,id:O,...q}=N,{arguments:j,name:Y,...W}=L||{};if(O==null)throw new Se(`missing choices[${y}].tool_calls[${D}].id
${Hf(t)}`);if(U==null)throw new Se(`missing choices[${y}].tool_calls[${D}].type
${Hf(t)}`);if(Y==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.name
${Hf(t)}`);if(j==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.arguments
${Hf(t)}`);return{...q,id:O,type:U,function:{...W,name:Y,arguments:j}}})}}:{...w,message:{...M,content:C,role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}),created:r,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return H4(h,e)}function Hf(t){return JSON.stringify(t)}class zd extends Su{static fromReadableStream(e){const n=new zd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,i){const r=new zd(n),a={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}}let u_=class extends ye{constructor(){super(...arguments),this.messages=new BN(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(oe`/chat/completions/${e}`,n)}update(e,n,i){return this._client.post(oe`/chat/completions/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/chat/completions",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/chat/completions/${e}`,n)}parse(e,n){return j4(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>s_(i,e))}runTools(e,n){return e.stream?zd.runTools(this._client,e,n):l_.runTools(this._client,e,n)}stream(e,n){return Su.createChatCompletion(this._client,e,n)}};u_.Messages=BN;class c_ extends ye{constructor(){super(...arguments),this.completions=new u_(this._client)}}c_.Completions=u_;const sI=Symbol("brand.privateNullableHeaders");function*t6(t){if(!t)return;if(sI in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():PC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=PC(i[1])?i[1]:[i[1]];let u=!1;for(const c of a)c!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,c])}}const pe=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,u]of t6(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),u===null?(e.delete(a),n.add(c)):(e.append(a,u),n.delete(c))}}return{[sI]:!0,values:e,nulls:n}};class aI extends ye{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:pe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class lI extends ye{create(e,n){return this._client.post("/audio/transcriptions",rs({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class uI extends ye{create(e,n){return this._client.post("/audio/translations",rs({body:e,...n,__metadata:{model:e.model}},this._client))}}let Ku=class extends ye{constructor(){super(...arguments),this.transcriptions=new lI(this._client),this.translations=new uI(this._client),this.speech=new aI(this._client)}};Ku.Transcriptions=lI;Ku.Translations=uI;Ku.Speech=aI;class cI extends ye{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",_t,{query:e,...n})}cancel(e,n){return this._client.post(oe`/batches/${e}/cancel`,n)}}class fI extends ye{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/assistants/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",_t,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(oe`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let dI=class extends ye{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class hI extends ye{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Rh=class extends ye{constructor(){super(...arguments),this.sessions=new dI(this._client),this.transcriptionSessions=new hI(this._client)}};Rh.Sessions=dI;Rh.TranscriptionSessions=hI;class pI extends ye{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(oe`/chatkit/sessions/${e}/cancel`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let mI=class extends ye{retrieve(e,n){return this._client.get(oe`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Fd,{query:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(oe`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},i){return this._client.getAPIList(oe`/chatkit/threads/${e}/items`,Fd,{query:n,...i,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},i?.headers])})}};class Mh extends ye{constructor(){super(...arguments),this.sessions=new pI(this._client),this.threads=new mI(this._client)}}Mh.Sessions=pI;Mh.Threads=mI;class gI extends ye{create(e,n,i){return this._client.post(oe`/threads/${e}/messages`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{thread_id:r}=n;return this._client.get(oe`/threads/${r}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/messages/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/threads/${e}/messages`,_t,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{thread_id:r}=n;return this._client.delete(oe`/threads/${r}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class vI extends ye{retrieve(e,n,i){const{thread_id:r,run_id:a,...u}=n;return this._client.get(oe`/threads/${r}/runs/${a}/steps/${e}`,{query:u,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n,i){const{thread_id:r,...a}=n;return this._client.getAPIList(oe`/threads/${r}/runs/${e}/steps`,_t,{query:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}const n6=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var i6={};const na=t=>{if(typeof globalThis.process<"u")return i6?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var kt,Kr,Zv,bi,fd,Zn,Yr,ga,jr,qd,yn,dd,hd,du,nu,iu,QC,ZC,ex,tx,nx,ix,ox;class hu extends a_{constructor(){super(...arguments),kt.add(this),Zv.set(this,[]),bi.set(this,{}),fd.set(this,{}),Zn.set(this,void 0),Yr.set(this,void 0),ga.set(this,void 0),jr.set(this,void 0),qd.set(this,void 0),yn.set(this,void 0),dd.set(this,void 0),hd.set(this,void 0),du.set(this,void 0)}[(Zv=new WeakMap,bi=new WeakMap,fd=new WeakMap,Zn=new WeakMap,Yr=new WeakMap,ga=new WeakMap,jr=new WeakMap,qd=new WeakMap,yn=new WeakMap,dd=new WeakMap,hd=new WeakMap,du=new WeakMap,kt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Kr;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=xi.fromReadableStream(e,this.controller);for await(const a of r)V(this,kt,"m",nu).call(this,a);if(r.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,kt,"m",iu).call(this))}toReadableStream(){return new xi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,i,r){const a=new Kr;return a._run(()=>a._runToolAssistantStream(e,n,i,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,i,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},c=await e.submitToolOutputs(n,u,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,kt,"m",nu).call(this,h);if(c.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,kt,"m",iu).call(this))}static createThreadAssistantStream(e,n,i){const r=new Kr;return r._run(()=>r._threadAssistantStream(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,i,r){const a=new Kr;return a._run(()=>a._runAssistantStream(e,n,i,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return V(this,dd,"f")}currentRun(){return V(this,hd,"f")}currentMessageSnapshot(){return V(this,Zn,"f")}currentRunStepSnapshot(){return V(this,du,"f")}async finalRunSteps(){return await this.done(),Object.values(V(this,bi,"f"))}async finalMessages(){return await this.done(),Object.values(V(this,fd,"f"))}async finalRun(){if(await this.done(),!V(this,Yr,"f"))throw Error("Final run was not received.");return V(this,Yr,"f")}async _createThreadAssistantStream(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},u=await e.createAndRun(a,{...i,signal:this.controller.signal});this._connected();for await(const c of u)V(this,kt,"m",nu).call(this,c);if(u.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,kt,"m",iu).call(this))}async _createAssistantStream(e,n,i,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},c=await e.create(n,u,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,kt,"m",nu).call(this,h);if(c.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,kt,"m",iu).call(this))}static accumulateDelta(e,n){for(const[i,r]of Object.entries(n)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let a=e[i];if(a==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Lg(a)&&Lg(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...r);continue}for(const u of r){if(!Lg(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const c=u.index;if(c==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(u):a[c]=this.accumulateDelta(h,u)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${a}`);e[i]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,i){return await this._createThreadAssistantStream(n,e,i)}async _runAssistantStream(e,n,i,r){return await this._createAssistantStream(n,e,i,r)}async _runToolAssistantStream(e,n,i,r){return await this._createToolAssistantStream(n,e,i,r)}}Kr=hu,nu=function(e){if(!this.ended)switch(xe(this,dd,e),V(this,kt,"m",ex).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":V(this,kt,"m",ox).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":V(this,kt,"m",ZC).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":V(this,kt,"m",QC).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},iu=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");if(!V(this,Yr,"f"))throw Error("Final run has not been received");return V(this,Yr,"f")},QC=function(e){const[n,i]=V(this,kt,"m",nx).call(this,e,V(this,Zn,"f"));xe(this,Zn,n),V(this,fd,"f")[n.id]=n;for(const r of i){const a=n.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,u=n.content[r.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=V(this,ga,"f")){if(V(this,jr,"f"))switch(V(this,jr,"f").type){case"text":this._emit("textDone",V(this,jr,"f").text,V(this,Zn,"f"));break;case"image_file":this._emit("imageFileDone",V(this,jr,"f").image_file,V(this,Zn,"f"));break}xe(this,ga,r.index)}xe(this,jr,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(V(this,ga,"f")!==void 0){const r=e.data.content[V(this,ga,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,V(this,Zn,"f"));break;case"text":this._emit("textDone",r.text,V(this,Zn,"f"));break}}V(this,Zn,"f")&&this._emit("messageDone",e.data),xe(this,Zn,void 0)}},ZC=function(e){const n=V(this,kt,"m",tx).call(this,e);switch(xe(this,du,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of i.step_details.tool_calls)a.index==V(this,qd,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(V(this,yn,"f")&&this._emit("toolCallDone",V(this,yn,"f")),xe(this,qd,a.index),xe(this,yn,n.step_details.tool_calls[a.index]),V(this,yn,"f")&&this._emit("toolCallCreated",V(this,yn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":xe(this,du,void 0),e.data.step_details.type=="tool_calls"&&V(this,yn,"f")&&(this._emit("toolCallDone",V(this,yn,"f")),xe(this,yn,void 0)),this._emit("runStepDone",e.data,n);break}},ex=function(e){V(this,Zv,"f").push(e),this._emit("event",e)},tx=function(e){switch(e.event){case"thread.run.step.created":return V(this,bi,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=V(this,bi,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=Kr.accumulateDelta(n,i.delta);V(this,bi,"f")[e.data.id]=r}return V(this,bi,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":V(this,bi,"f")[e.data.id]=e.data;break}if(V(this,bi,"f")[e.data.id])return V(this,bi,"f")[e.data.id];throw new Error("No snapshot available")},nx=function(e,n){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in n.content){let u=n.content[a.index];n.content[a.index]=V(this,kt,"m",ix).call(this,a,u)}else n.content[a.index]=a,i.push(a);return[n,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ix=function(e,n){return Kr.accumulateDelta(n,e)},ox=function(e){switch(xe(this,hd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":xe(this,Yr,e.data),V(this,yn,"f")&&(this._emit("toolCallDone",V(this,yn,"f")),xe(this,yn,void 0));break}};let f_=class extends ye{constructor(){super(...arguments),this.steps=new vI(this._client)}create(e,n,i){const{include:r,...a}=n;return this._client.post(oe`/threads/${e}/runs`,{query:{include:r},body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}retrieve(e,n,i){const{thread_id:r}=n;return this._client.get(oe`/threads/${r}/runs/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/runs/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/threads/${e}/runs`,_t,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{thread_id:r}=n;return this._client.post(oe`/threads/${r}/runs/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n,i);return await this.poll(r.id,{thread_id:e},i)}createAndStream(e,n,i){return hu.createAssistantStream(e,this._client.beta.threads.runs,n,i)}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:u}=await this.retrieve(e,n,{...i,headers:{...i?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await ju(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,i){return hu.createAssistantStream(e,this._client.beta.threads.runs,n,i)}submitToolOutputs(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,i){const r=await this.submitToolOutputs(e,n,i);return await this.poll(r.id,n,i)}submitToolOutputsStream(e,n,i){return hu.createToolAssistantStream(e,this._client.beta.threads.runs,n,i)}};f_.Steps=vI;class Nh extends ye{constructor(){super(...arguments),this.runs=new f_(this._client),this.messages=new gI(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/threads/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n){return this._client.delete(oe`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const i=await this.createAndRun(e,n);return await this.runs.poll(i.id,{thread_id:i.thread_id},n)}createAndRunStream(e,n){return hu.createThreadAssistantStream(e,this._client.beta.threads,n)}}Nh.Runs=f_;Nh.Messages=gI;class Ba extends ye{constructor(){super(...arguments),this.realtime=new Rh(this._client),this.chatkit=new Mh(this._client),this.assistants=new fI(this._client),this.threads=new Nh(this._client)}}Ba.Realtime=Rh;Ba.ChatKit=Mh;Ba.Assistants=fI;Ba.Threads=Nh;class yI extends ye{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}let _I=class extends ye{retrieve(e,n,i){const{container_id:r}=n;return this._client.get(oe`/containers/${r}/files/${e}/content`,{...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}},d_=class extends ye{constructor(){super(...arguments),this.content=new _I(this._client)}create(e,n,i){return this._client.post(oe`/containers/${e}/files`,rs({body:n,...i},this._client))}retrieve(e,n,i){const{container_id:r}=n;return this._client.get(oe`/containers/${r}/files/${e}`,i)}list(e,n={},i){return this._client.getAPIList(oe`/containers/${e}/files`,_t,{query:n,...i})}delete(e,n,i){const{container_id:r}=n;return this._client.delete(oe`/containers/${r}/files/${e}`,{...i,headers:pe([{Accept:"*/*"},i?.headers])})}};d_.Content=_I;class h_ extends ye{constructor(){super(...arguments),this.files=new d_(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/containers/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}}h_.Files=d_;class SI extends ye{create(e,n,i){const{include:r,...a}=n;return this._client.post(oe`/conversations/${e}/items`,{query:{include:r},body:a,...i})}retrieve(e,n,i){const{conversation_id:r,...a}=n;return this._client.get(oe`/conversations/${r}/items/${e}`,{query:a,...i})}list(e,n={},i){return this._client.getAPIList(oe`/conversations/${e}/items`,Fd,{query:n,...i})}delete(e,n,i){const{conversation_id:r}=n;return this._client.delete(oe`/conversations/${r}/items/${e}`,i)}}class p_ extends ye{constructor(){super(...arguments),this.items=new SI(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/conversations/${e}`,n)}update(e,n,i){return this._client.post(oe`/conversations/${e}`,{body:n,...i})}delete(e,n){return this._client.delete(oe`/conversations/${e}`,n)}}p_.Items=SI;class bI extends ye{create(e,n){const i=!!e.encoding_format;let r=i?e.encoding_format:"base64";i&&Ot(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return i?a:(Ot(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(c=>{const h=c.embedding;c.embedding=n6(h)}),u)))}}class wI extends ye{retrieve(e,n,i){const{eval_id:r,run_id:a}=n;return this._client.get(oe`/evals/${r}/runs/${a}/output_items/${e}`,i)}list(e,n,i){const{eval_id:r,...a}=n;return this._client.getAPIList(oe`/evals/${r}/runs/${e}/output_items`,_t,{query:a,...i})}}class m_ extends ye{constructor(){super(...arguments),this.outputItems=new wI(this._client)}create(e,n,i){return this._client.post(oe`/evals/${e}/runs`,{body:n,...i})}retrieve(e,n,i){const{eval_id:r}=n;return this._client.get(oe`/evals/${r}/runs/${e}`,i)}list(e,n={},i){return this._client.getAPIList(oe`/evals/${e}/runs`,_t,{query:n,...i})}delete(e,n,i){const{eval_id:r}=n;return this._client.delete(oe`/evals/${r}/runs/${e}`,i)}cancel(e,n,i){const{eval_id:r}=n;return this._client.post(oe`/evals/${r}/runs/${e}`,i)}}m_.OutputItems=wI;class g_ extends ye{constructor(){super(...arguments),this.runs=new m_(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/evals/${e}`,n)}update(e,n,i){return this._client.post(oe`/evals/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/evals",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/evals/${e}`,n)}}g_.Runs=m_;let EI=class extends ye{create(e,n){return this._client.post("/files",rs({body:e,...n},this._client))}retrieve(e,n){return this._client.get(oe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/files/${e}`,n)}content(e,n){return this._client.get(oe`/files/${e}/content`,{...n,headers:pe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:i=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!r.has(u.status);)if(await ju(n),u=await this.retrieve(e),Date.now()-a>i)throw new t_({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return u}};class TI extends ye{}let CI=class extends ye{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class v_ extends ye{constructor(){super(...arguments),this.graders=new CI(this._client)}}v_.Graders=CI;class xI extends ye{create(e,n,i){return this._client.getAPIList(oe`/fine_tuning/checkpoints/${e}/permissions`,Ah,{body:n,method:"post",...i})}retrieve(e,n={},i){return this._client.get(oe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...i})}delete(e,n,i){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(oe`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}}let y_=class extends ye{constructor(){super(...arguments),this.permissions=new xI(this._client)}};y_.Permissions=xI;class AI extends ye{list(e,n={},i){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/checkpoints`,_t,{query:n,...i})}}class __ extends ye{constructor(){super(...arguments),this.checkpoints=new AI(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",_t,{query:e,...n})}cancel(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},i){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/events`,_t,{query:n,...i})}pause(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/resume`,n)}}__.Checkpoints=AI;class $a extends ye{constructor(){super(...arguments),this.methods=new TI(this._client),this.jobs=new __(this._client),this.checkpoints=new y_(this._client),this.alpha=new v_(this._client)}}$a.Methods=TI;$a.Jobs=__;$a.Checkpoints=y_;$a.Alpha=v_;class RI extends ye{}class S_ extends ye{constructor(){super(...arguments),this.graderModels=new RI(this._client)}}S_.GraderModels=RI;class MI extends ye{createVariation(e,n){return this._client.post("/images/variations",rs({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",rs({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class NI extends ye{retrieve(e,n){return this._client.get(oe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ah,e)}delete(e,n){return this._client.delete(oe`/models/${e}`,n)}}class II extends ye{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class DI extends ye{accept(e,n,i){return this._client.post(oe`/realtime/calls/${e}/accept`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}hangup(e,n){return this._client.post(oe`/realtime/calls/${e}/hangup`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}refer(e,n,i){return this._client.post(oe`/realtime/calls/${e}/refer`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}reject(e,n={},i){return this._client.post(oe`/realtime/calls/${e}/reject`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}}class OI extends ye{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Ih extends ye{constructor(){super(...arguments),this.clientSecrets=new OI(this._client),this.calls=new DI(this._client)}}Ih.ClientSecrets=OI;Ih.Calls=DI;function o6(t,e){return!e||!s6(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(i=>({...i,parsed:null}))}:n)}:kI(t,e)}function kI(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:u6(e,r)};if(r.type==="message"){const a=r.content.map(u=>u.type==="output_text"?{...u,parsed:r6(e,u.text)}:u);return{...r,content:a}}return r}),i=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||ey(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const r of i.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),i}function r6(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function s6(t){return!!r_(t.text?.format)}function a6(t){return t?.$brand==="auto-parseable-tool"}function l6(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function u6(t,e){const n=l6(t.tools??[],e.name);return{...e,...e,parsed_arguments:a6(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function ey(t){const e=[];for(const n of t.output)if(n.type==="message")for(const i of n.content)i.type==="output_text"&&e.push(i.text);t.output_text=e.join("")}var ia,Vf,er,zf,rx,sx,ax,lx;class b_ extends a_{constructor(e){super(),ia.add(this),Vf.set(this,void 0),er.set(this,void 0),zf.set(this,void 0),xe(this,Vf,e)}static createResponse(e,n,i){const r=new b_(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,ia,"m",rx).call(this);let a,u=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),u=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const c of a)V(this,ia,"m",sx).call(this,c,u);if(a.controller.signal?.aborted)throw new Gn;return V(this,ia,"m",ax).call(this)}[(Vf=new WeakMap,er=new WeakMap,zf=new WeakMap,ia=new WeakSet,rx=function(){this.ended||xe(this,er,void 0)},sx=function(n,i){if(this.ended)return;const r=(u,c)=>{(i==null||c.sequence_number>i)&&this._emit(u,c)},a=V(this,ia,"m",lx).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const u=a.output[n.output_index];if(!u)throw new Se(`missing output at index ${n.output_index}`);if(u.type==="message"){const c=u.content[n.content_index];if(!c)throw new Se(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const u=a.output[n.output_index];if(!u)throw new Se(`missing output at index ${n.output_index}`);u.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:u.arguments});break}default:r(n.type,n);break}},ax=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,er,"f");if(!n)throw new Se("request ended without sending any events");xe(this,er,void 0);const i=c6(n,V(this,Vf,"f"));return xe(this,zf,i),i},lx=function(n){let i=V(this,er,"f");if(!i){if(n.type!=="response.created")throw new Se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return i=xe(this,er,n.response),i}switch(n.type){case"response.output_item.added":{i.output.push(n.item);break}case"response.content_part.added":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);const a=r.type,u=n.part;a==="message"&&u.type!=="reasoning_text"?r.content.push(u):a==="reasoning"&&u.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(u));break}case"response.output_text.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=r.content?.[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Se(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{xe(this,er,n.response);break}}return i},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=V(this,zf,"f");if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}}function c6(t,e){return o6(t,e)}class PI extends ye{list(e,n={},i){return this._client.getAPIList(oe`/responses/${e}/input_items`,_t,{query:n,...i})}}class LI extends ye{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Dh extends ye{constructor(){super(...arguments),this.inputItems=new PI(this._client),this.inputTokens=new LI(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&ey(i),i))}retrieve(e,n={},i){return this._client.get(oe`/responses/${e}`,{query:n,...i,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ey(r),r))}delete(e,n){return this._client.delete(oe`/responses/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(i=>kI(i,e))}stream(e,n){return b_.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(oe`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}Dh.InputItems=PI;Dh.InputTokens=LI;class UI extends ye{create(e,n,i){return this._client.post(oe`/uploads/${e}/parts`,rs({body:n,...i},this._client))}}class w_ extends ye{constructor(){super(...arguments),this.parts=new UI(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(oe`/uploads/${e}/cancel`,n)}complete(e,n,i){return this._client.post(oe`/uploads/${e}/complete`,{body:n,...i})}}w_.Parts=UI;const f6=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};class FI extends ye{create(e,n,i){return this._client.post(oe`/vector_stores/${e}/file_batches`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:r}=n;return this._client.get(oe`/vector_stores/${r}/file_batches/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{vector_store_id:r}=n;return this._client.post(oe`/vector_stores/${r}/file_batches/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n);return await this.poll(e,r.id,i)}listFiles(e,n,i){const{vector_store_id:r,...a}=n;return this._client.getAPIList(oe`/vector_stores/${r}/file_batches/${e}/files`,_t,{query:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:u}=await this.retrieve(n,{vector_store_id:e},{...i,headers:r}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await ju(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:i=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,u=Math.min(a,n.length),c=this._client,h=n.values(),d=[...i];async function m(S){for(let w of S){const C=await c.files.create({file:w,purpose:"assistants"},r);d.push(C.id)}}const y=Array(u).fill(h).map(m);return await f6(y),await this.createAndPoll(e,{file_ids:d})}}class BI extends ye{create(e,n,i){return this._client.post(oe`/vector_stores/${e}/files`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:r}=n;return this._client.get(oe`/vector_stores/${r}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{vector_store_id:r,...a}=n;return this._client.post(oe`/vector_stores/${r}/files/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/vector_stores/${e}/files`,_t,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{vector_store_id:r}=n;return this._client.delete(oe`/vector_stores/${r}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n,i);return await this.poll(e,r.id,i)}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...i,headers:r}).withResponse(),u=a.data;switch(u.status){case"in_progress":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await ju(c);break;case"failed":case"completed":return u}}}async upload(e,n,i){const r=await this._client.files.create({file:n,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,n,i){const r=await this.upload(e,n,i);return await this.poll(e,r.id,i)}content(e,n,i){const{vector_store_id:r}=n;return this._client.getAPIList(oe`/vector_stores/${r}/files/${e}/content`,Ah,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class Oh extends ye{constructor(){super(...arguments),this.files=new BI(this._client),this.fileBatches=new FI(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/vector_stores/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",_t,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(oe`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,i){return this._client.getAPIList(oe`/vector_stores/${e}/search`,Ah,{body:n,method:"post",...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}Oh.Files=BI;Oh.FileBatches=FI;class $I extends ye{create(e,n){return this._client.post("/videos",JC({body:e,...n},this._client))}retrieve(e,n){return this._client.get(oe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Fd,{query:e,...n})}delete(e,n){return this._client.delete(oe`/videos/${e}`,n)}downloadContent(e,n={},i){return this._client.get(oe`/videos/${e}/content`,{query:n,...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}remix(e,n,i){return this._client.post(oe`/videos/${e}/remix`,JC({body:n,...i},this._client))}}var fa,GI,pd;class HI extends ye{constructor(){super(...arguments),fa.add(this)}async unwrap(e,n,i=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,i,r),JSON.parse(e)}async verifySignature(e,n,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");V(this,fa,"m",GI).call(this,i);const a=pe([n]).values,u=V(this,fa,"m",pd).call(this,a,"webhook-signature"),c=V(this,fa,"m",pd).call(this,a,"webhook-timestamp"),h=V(this,fa,"m",pd).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new Yl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>r)throw new Yl("Webhook timestamp is too old");if(d>m+r)throw new Yl("Webhook timestamp is too new");const y=u.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),S=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),w=h?`${h}.${c}.${e}`:`${c}.${e}`,C=await crypto.subtle.importKey("raw",S,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of y)try{const A=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",C,A,new TextEncoder().encode(w)))return}catch{continue}throw new Yl("The given webhook signature does not match the expected signature")}}fa=new WeakSet,GI=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},pd=function(e,n){if(!e)throw new Error("Headers are required");const i=e.get(n);if(i==null)throw new Error(`Missing required header: ${n}`);return i};var ty,E_,md,VI;class Oe{constructor({baseURL:e=na("OPENAI_BASE_URL"),apiKey:n=na("OPENAI_API_KEY"),organization:i=na("OPENAI_ORG_ID")??null,project:r=na("OPENAI_PROJECT_ID")??null,webhookSecret:a=na("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if(ty.add(this),md.set(this,void 0),this.completions=new yI(this),this.chat=new c_(this),this.embeddings=new bI(this),this.files=new EI(this),this.images=new MI(this),this.audio=new Ku(this),this.moderations=new II(this),this.models=new NI(this),this.fineTuning=new $a(this),this.graders=new S_(this),this.vectorStores=new Oh(this),this.webhooks=new HI(this),this.beta=new Ba(this),this.batches=new cI(this),this.uploads=new w_(this),this.responses=new Dh(this),this.realtime=new Ih(this),this.conversations=new p_(this),this.evals=new g_(this),this.containers=new h_(this),this.videos=new $I(this),n===void 0)throw new Se("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:i,project:r,webhookSecret:a,...u,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&d4())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??E_.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=qC(c.logLevel,"ClientOptions.logLevel",this)??qC(na("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??v4(),xe(this,md,_4),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=i,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return pe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return C4(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ua}`}defaultIdempotencyKey(){return`stainless-node-retry-${dN()}`}makeStatusError(e,n,i,r){return Pt.generate(e,n,i,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(i){throw i instanceof Se?i:new Se(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof n!="string"||!n)throw new Se(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,i){const r=!V(this,ty,"m",VI).call(this)&&i||this.baseURL,a=a4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return l4(u)||(n={...u,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new xh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:u,url:c,timeout:h}=await this.buildRequest(r,{retryCount:a-n});await this.prepareRequest(u,{url:c,options:r});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Ot(this).debug(`[${d}] sending request`,qr({retryOfRequestLogID:i,method:r.method,url:c,options:r,headers:u.headers})),r.signal?.aborted)throw new Gn;const S=new AbortController,w=await this.fetchWithTimeout(c,u,h,S).catch(Vv),C=Date.now();if(w instanceof globalThis.Error){const M=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Gn;const I=Hv(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return Ot(this).info(`[${d}] connection ${I?"timed out":"failed"} - ${M}`),Ot(this).debug(`[${d}] connection ${I?"timed out":"failed"} (${M})`,qr({retryOfRequestLogID:i,url:c,durationMs:C-y,message:w.message})),this.retryRequest(r,n,i??d);throw Ot(this).info(`[${d}] connection ${I?"timed out":"failed"} - error; no more retries left`),Ot(this).debug(`[${d}] connection ${I?"timed out":"failed"} (error; no more retries left)`,qr({retryOfRequestLogID:i,url:c,durationMs:C-y,message:w.message})),I?new t_:new Th({cause:w})}const x=[...w.headers.entries()].filter(([M])=>M==="x-request-id").map(([M,I])=>", "+M+": "+JSON.stringify(I)).join(""),A=`[${d}${m}${x}] ${u.method} ${c} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${C-y}ms`;if(!w.ok){const M=await this.shouldRetry(w);if(n&&M){const O=`retrying, ${n} attempts remaining`;return await y4(w.body),Ot(this).info(`${A} - ${O}`),Ot(this).debug(`[${d}] response error (${O})`,qr({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:C-y})),this.retryRequest(r,n,i??d,w.headers)}const I=M?"error; no more retries left":"error; not retryable";Ot(this).info(`${A} - ${I}`);const N=await w.text().catch(O=>Vv(O).message),D=f4(N),L=D?void 0:N;throw Ot(this).debug(`[${d}] response error (${I})`,qr({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,message:L,durationMs:Date.now()-y})),this.makeStatusError(w.status,D,L,w.headers)}return Ot(this).info(A),Ot(this).debug(`[${d}] response start`,qr({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:C-y})),{response:w,options:r,controller:S,requestLogID:d,retryOfRequestLogID:i,startTime:y}}getAPIList(e,n,i){return this.requestAPIList(n,{method:"get",path:e,...i})}requestAPIList(e,n){const i=this.makeRequest(n,null,void 0);return new k4(this,i,e)}async fetchWithTimeout(e,n,i,r){const{signal:a,method:u,...c}=n||{};a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:r.signal,...d?{duplex:"half"}:{},method:"GET",...c};u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){let a;const u=r?.get("retry-after-ms");if(u){const h=parseFloat(u);Number.isNaN(h)||(a=h)}const c=r?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await ju(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const i={...e},{method:r,path:a,query:u,defaultBaseURL:c}=i,h=this.buildURL(a,u,c);"timeout"in i&&c4("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:i}),y=await this.buildHeaders({options:e,method:r,bodyHeaders:d,retryCount:n});return{req:{method:r,headers:y,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...i.fetchOptions??{}},url:h,timeout:i.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=pe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...g4(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=pe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:CN(e)}:V(this,md,"f").call(this,{body:e,headers:i})}}E_=Oe,md=new WeakMap,ty=new WeakSet,VI=function(){return this.baseURL!=="https://api.openai.com/v1"};Oe.OpenAI=E_;Oe.DEFAULT_TIMEOUT=6e5;Oe.OpenAIError=Se;Oe.APIError=Pt;Oe.APIConnectionError=Th;Oe.APIConnectionTimeoutError=t_;Oe.APIUserAbortError=Gn;Oe.NotFoundError=gN;Oe.ConflictError=vN;Oe.RateLimitError=_N;Oe.BadRequestError=hN;Oe.AuthenticationError=pN;Oe.InternalServerError=SN;Oe.PermissionDeniedError=mN;Oe.UnprocessableEntityError=yN;Oe.InvalidWebhookSignatureError=Yl;Oe.toFile=B4;Oe.Completions=yI;Oe.Chat=c_;Oe.Embeddings=bI;Oe.Files=EI;Oe.Images=MI;Oe.Audio=Ku;Oe.Moderations=II;Oe.Models=NI;Oe.FineTuning=$a;Oe.Graders=S_;Oe.VectorStores=Oh;Oe.Webhooks=HI;Oe.Beta=Ba;Oe.Batches=cI;Oe.Uploads=w_;Oe.Responses=Dh;Oe.Realtime=Ih;Oe.Conversations=p_;Oe.Evals=g_;Oe.Containers=h_;Oe.Videos=$I;class ux extends Error{}const zI=["gpt-4o-mini","gpt-5.1","gpt-5-mini","gpt-5-nano","gpt-5"];class jd{static getApiKey=null;static setApiKey=null;static getClient(){const e=this.getApiKey?.()||"";if(!e)throw new ux("No OpenAI API key set");return new Oe({apiKey:e,dangerouslyAllowBrowser:!0})}static async txt2txt(e,n,i="gpt-4o-mini",r){try{const a=this.getClient(),u=[];n&&u.push({role:"system",content:n}),e&&u.push({role:"user",content:[{type:"input_text",text:e}]}),r&&console.log(r);const c={model:i,input:u};console.log("GPT Payload:",c);const d=(await a.responses.create(c)).output_text;return console.log("GPT Response TEXT:",{text:d}),d}catch(a){if(console.error("ChatGPT Error:",a),(a?.message||"").includes("Incorrect API key provided")||a instanceof ux){const c=window.prompt("Your OpenAI API key is missing or invalid. Please enter a valid key:");return c?this.setApiKey?.(c):console.warn("User did not provide a valid API key."),null}throw a}}}class d6 extends ar{project=null;data={};constructor(e,n){super(n,e),this.project=n,vr(this,{project:Te.ref,data:Te,load:ut})}async load(){try{const e={};for await(const n of this.handle.values()){if(n.kind!=="directory")continue;const i=n.name,r=n,a=new ar(this,r),u={};for await(const c of r.values()){if(c.kind!=="directory")continue;const h=c.name,d=c,m=new ar(a,d),y=[];for await(const S of d.values()){if(S.kind!=="file"||!S.name.match(/\.(png|jpg|jpeg|webp|gif)$/i))continue;const w=S,C=`${i}/${h}/${w.name}`;y.push(new h6(w,m,C,this))}u[h]=y}e[i]=u}we(()=>{this.data=e})}catch(e){console.error("Error loading artbook:",e),we(()=>{this.data={}})}}getTag(e){if(!e)return null;const n=e.split("/");if(n.length<3)return null;const[i,r,a]=n,u=this.data[i];if(!u)return null;const c=u[r];return c&&c.find(d=>d.handle.name===a)||null}log(){console.log(yo(this))}getJson(){const e={};for(const[n,i]of Object.entries(this.data)){e[n]={};for(const[r,a]of Object.entries(i))e[n][r]=a.map(u=>u.handle.name)}return e}}class h6{handle;folder;image;artInfo=null;path;artbook;constructor(e,n,i,r=null){this.handle=e,this.folder=n.handle,this.image=new mo(e,n),this.path=i,this.artbook=r,Oa(this)}async getArtInfo(){if(this.artInfo)return this.artInfo;try{const e=await cr.create(this.folder,this.handle.name+".json");we(()=>{this.artInfo=e})}catch(e){console.warn("Unable to load art info for:",this.handle.name,e)}return this.artInfo}}const zg=30;class p6{doc;fcpxml;resources;project;spine;timelineName;constructor(e="Test RESOLVE",n=1e4){this.timelineName=e,this.doc=document.implementation.createDocument("","",null),this.fcpxml=this.doc.createElement("fcpxml"),this.fcpxml.setAttribute("version","1.10"),this.doc.appendChild(this.fcpxml),this.resources=this.doc.createElement("resources"),this.fcpxml.appendChild(this.resources);const i=this.doc.createElement("format");i.setAttribute("id","r0"),i.setAttribute("name",`FFVideoFormat1080p${zg}`),i.setAttribute("frameDuration",`1/${zg}s`),i.setAttribute("width","1080"),i.setAttribute("height","1920"),this.resources.appendChild(i);const r=this.doc.createElement("library");this.fcpxml.appendChild(r);const a=this.doc.createElement("event");a.setAttribute("name","Auto Import"),r.appendChild(a),this.project=this.doc.createElement("project"),this.project.setAttribute("name",this.timelineName),a.appendChild(this.project);const u=this.doc.createElement("sequence");u.setAttribute("format","r0"),u.setAttribute("duration",`${n}/${zg}s`),u.setAttribute("tcStart","0/1s"),u.setAttribute("tcFormat","NDF"),this.project.appendChild(u),this.spine=this.doc.createElement("spine"),u.appendChild(this.spine);const c=this.doc.createElement("effect");c.setAttribute("uid",".../Generators.localized/Solids.localized/Vivid.localized/Vivid.motn"),c.setAttribute("name","Vivid"),c.setAttribute("id","r1"),this.resources.appendChild(c);const h=this.doc.createElement("effect");h.setAttribute("uid",".../Titles.localized/Lower Thirds.localized/Basic Lower Third.localized/Basic Lower Third.moti"),h.setAttribute("name","Basic Title"),h.setAttribute("id","r2"),this.resources.appendChild(h)}addAsset(e,n,i=!1,r=5){const a=this.doc.createElement("asset");a.setAttribute("format","r0"),a.setAttribute("src",`file://localhost/${e.replace(/\\/g,"/")}`),a.setAttribute("start","0/1s"),a.setAttribute("name",n),i&&(a.setAttribute("duration",`${r}/1s`),a.setAttribute("hasVideo","1"));const c=this.resources.children.length;return a.setAttribute("id",`r${c}`),this.resources.appendChild(a),a.getAttribute("id")}appendClip(e,n,i,r,a=0){const u=this.doc.createElement("video");u.setAttribute("start","0/24s"),u.setAttribute("ref",e),u.setAttribute("name",n),u.setAttribute("enabled","1"),u.setAttribute("lane",a.toString()),u.setAttribute("duration",`${i}/1s`),u.setAttribute("offset",`${r}/1s`),this.spine.appendChild(u)}appendText(e,n,i,r=3,a="Rich"){const u=this.doc.createElement("title");u.setAttribute("start","1/24s"),u.setAttribute("ref","r2"),u.setAttribute("name",a),u.setAttribute("lane",r.toString()),u.setAttribute("offset",`${i}/1s`),u.setAttribute("duration",`${n}/1s`),u.setAttribute("enabled","1");const c=this.doc.createElement("text");c.setAttribute("roll-up-height","0");const h=this.doc.createElement("text-style");h.setAttribute("ref","ts0"),h.textContent=e,c.appendChild(h),u.appendChild(c);const d=this.doc.createElement("text-style-def");d.setAttribute("id","ts0");const m=this.doc.createElement("text-style");m.setAttribute("fontSize","32"),m.setAttribute("italic","0"),m.setAttribute("fontColor","1 1 1 1"),m.setAttribute("bold","1"),m.setAttribute("lineSpacing","0"),m.setAttribute("font","Open Sans"),m.setAttribute("alignment","center"),m.setAttribute("strokeWidth","0"),m.setAttribute("strokeColor","0 0 0 1"),d.appendChild(m),u.appendChild(d);const y=this.doc.createElement("adjust-transform");y.setAttribute("scale","1 1"),y.setAttribute("anchor","0 0"),y.setAttribute("position","0 1"),u.appendChild(y),this.spine.appendChild(u)}getXmlString(){let n=new XMLSerializer().serializeToString(this.doc);return n=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fcpxml>
`+n,n}log(){const n=/(>)(<)(\/*)/g;let i=this.getXmlString().replace(n,`$1\r
$2$3`),r=0;const a=i.split(`\r
`).map(u=>{let c="";u.match(/<\/\w/)&&(r-=1);for(let h=0;h<r;h++)c+="  ";return u.match(/<[^!?].*>[^<]*$/)&&(r+=1),c+u}).join(`\r
`);console.log(a)}async save(e){try{const i=await(await e.getFileHandle(this.timelineName+".xml",{create:!0})).createWritable();await i.write(this.getXmlString()),await i.close()}catch(n){console.error("Failed to save file",n)}}}const m6={tags:[],shotsjson:"",script:"",split_shots_prompt:{preset:"split_shots"}};class cx extends ar{sceneJson=null;shots=[];project;is_generating_shotsjson=!1;is_generating_tags=!1;is_generating_all_shot_images=!1;split_shots_prompt=null;selectedShot=null;constructor(e,n,i){super(i,e),this.project=n,vr(this,{sceneJson:Te,shots:Te,is_generating_shotsjson:Te,is_generating_tags:Te,is_generating_all_shot_images:Te,split_shots_prompt:Te,selectedShot:Te,finishedShotsNum:lr,tags:lr,selectShot:ut})}selectShot(e){this.shots.includes(e)&&(this.selectedShot=e)}async load(){try{this.sceneJson=await cr.create(this.handle,"sceneinfo.json",m6),this.shots=[];for await(const e of this.handle.values())if(e.kind==="directory"){const n=new kC(e,this);await n.load(),this.shots.push(n)}}catch(e){console.error("Error loading scene:",e),this.sceneJson=null,this.shots=[]}}removeTag(e){this.sceneJson?.data?.tags&&(this.sceneJson.data.tags=this.sceneJson.data.tags.filter(n=>n!==e),this.sceneJson.save())}async delete(){if(!this.project?.handle){console.error("Cannot delete scene: project root not set");return}try{await(await this.project.handle.getDirectoryHandle("SCENES")).removeEntry(this.name,{recursive:!0}),we(()=>{this.project&&(this.project.scenes=this.project.scenes.filter(n=>n!==this))})}catch(e){console.error("Failed to delete scene:",e)}}async createShot(e){if(!this.handle)return console.error("No scene folder available"),null;const n=this.shots.find(i=>i.name===e);if(n)return n;try{const i=await this.handle.getDirectoryHandle(e,{create:!0}),r=new kC(i,this);return await r.load(),we(()=>{const a=this.shots.findIndex(u=>u.name.localeCompare(e)>0);a===-1?this.shots.push(r):this.shots.splice(a,0,r)}),r}catch(i){return console.error("Failed to create shot:",i),null}}get finishedShotsNum(){return this.shots.filter(e=>e.shotJson?.data?.finished).length}async generateShotsJson(){if(!this.sceneJson?.data?.script)return null;we(()=>{this.is_generating_shotsjson=!0});const e=this.sceneJson.data.script,n=`
${this.project.workflows.split_scene_into_shots.prompt}

${this.sceneJson.data.split_prompt}

SCRIPT:
${e}
`,i=this.project.projinfo?.getField("workflows/split_scene_into_shots/system_message");try{return await jd.txt2txt(n,i,this.project?.projinfo?.getField("workflows/split_scene_into_shots/model"))}catch(r){return console.error("Error generating shots JSON:",r),null}finally{we(()=>{this.is_generating_shotsjson=!1})}}async createShotsFromShotsJson(){if(!this.sceneJson?.data?.shotsjson){console.warn("No shots JSON found in scene.");return}let e;try{e=JSON.parse(this.sceneJson.data.shotsjson)}catch(n){console.error("Invalid shots JSON:",n),alert("Error: The shots JSON is invalid. Please check the format.");return}for(const n of Object.keys(e)){const i=e[n];if(!i||typeof i!="object"){console.warn(`Skipping invalid shot data for key: ${n}`);continue}try{const r=await this.createShot(n);if(!r){console.error(`Failed to create shot ${n}`);continue}r.shotJson&&(Object.assign(r.shotJson.data,i),await r.shotJson.save())}catch(r){console.error(`Error creating shot ${n}:`,r)}}}log(){console.log(yo(this))}getTags(){if(!this.sceneJson?.data?.tags||!this.project?.artbook)return[];const e=[];for(const n of this.sceneJson.data.tags){const i=this.project.artbook.getTag(n);i&&e.push(i)}return e}get tags(){return this.getTags()}async generateTags(){we(()=>{this.is_generating_tags=!0});const e=`
${this.project?.projinfo?.data?.generate_tags_prompt}

SCRIPT:
${this.sceneJson?.data.script}

SHOTS JSON:
${this.sceneJson?.data.shotsjson}

REFS DICTIONARY:
${JSON.stringify(this.project?.artbook?.getJson(),null,2)}

`,n="You are a helpful assistant. Do not write explanations. ";try{const i=await jd.txt2txt(e,n,this.project?.projinfo?.data.gpt_model);for(const r of i?.split(`
`)||[]){const a=r.trim();a&&(console.log("Adding Tag: ",a),this.addTag(a))}return i}catch(i){return console.error("Error generating tags:",i),null}finally{we(()=>{this.is_generating_tags=!1})}}addTag(e){we(()=>{this.sceneJson?.data.tags.includes(e)||(this.project?.artbook?.getTag(e)?(this.sceneJson?.data.tags.push(e),this.sceneJson?.save()):console.log("Tag not found: ",e))})}async generateAllShotImages(){we(()=>{this.is_generating_all_shot_images=!0});const e=this.shots.filter(n=>!n.srcImage).map(n=>n.GenerateImage());await Promise.all(e),we(()=>{this.is_generating_all_shot_images=!1})}async createResolveXML(){const e=new p6(this.name);let n=1e3;for(const i of this.shots){let r="r1";if(i.srcImage){const u=this.project.projinfo?.getField("project_path")+i.srcImage.path;r=e.addAsset(u,i.name)}if(i.outVideo){const u=this.project.projinfo?.getField("project_path")+i.outVideo.path,c=e.addAsset(u,i.name,!0,5);e.appendClip(c,i.name,5,n,1)}e.appendClip(r,i.name,5,n),e.appendText(this.name+" "+i.name,5,n),n+=5}e.log(),e.save(this.project.timelinesDirHandle)}}const ny=(t,e)=>e.some(n=>t instanceof n);let fx,dx;function g6(){return fx||(fx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v6(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iy=new WeakMap,qg=new WeakMap,kh=new WeakMap;function y6(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Wr(t.result)),r()},u=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return kh.set(e,t),e}function _6(t){if(iy.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});iy.set(t,e)}let oy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qI(t){oy=t(oy)}function S6(t){return v6().includes(t)?function(...e){return t.apply(ry(this),e),Wr(this.request)}:function(...e){return Wr(t.apply(ry(this),e))}}function b6(t){return typeof t=="function"?S6(t):(t instanceof IDBTransaction&&_6(t),ny(t,g6())?new Proxy(t,oy):t)}function Wr(t){if(t instanceof IDBRequest)return y6(t);if(qg.has(t))return qg.get(t);const e=b6(t);return e!==t&&(qg.set(t,e),kh.set(e,t)),e}const ry=t=>kh.get(t);function w6(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),c=Wr(u);return i&&u.addEventListener("upgradeneeded",h=>{i(Wr(u.result),h.oldVersion,h.newVersion,Wr(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const E6=["get","getKey","getAll","getAllKeys","count"],T6=["put","add","delete","clear"],jg=new Map;function hx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=T6.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||E6.includes(n)))return;const a=async function(u,...c){const h=this.transaction(u,r?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&h.done]))[0]};return jg.set(e,a),a}qI(t=>({...t,get:(e,n,i)=>hx(e,n)||t.get(e,n,i),has:(e,n)=>!!hx(e,n)||t.has(e,n)}));const C6=["continue","continuePrimaryKey","advance"],px={},sy=new WeakMap,jI=new WeakMap,x6={get(t,e){if(!C6.includes(e))return t[e];let n=px[e];return n||(n=px[e]=function(...i){sy.set(this,jI.get(this)[e](...i))}),n}};async function*A6(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,x6);for(jI.set(n,e),kh.set(n,ry(e));e;)yield n,e=await(sy.get(n)||e.continue()),sy.delete(n)}function mx(t,e){return e===Symbol.asyncIterator&&ny(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ny(t,[IDBIndex,IDBObjectStore])}qI(t=>({...t,get(e,n,i){return mx(e,n)?A6:t.get(e,n,i)},has(e,n){return mx(e,n)||t.has(e,n)}}));const R6="ShotMasterRE",qf="settings";class M6{db=null;data={id:"settings",lastOpenedFolder:null,recentFolders:[],api_keys:{}};constructor(){Oa(this.data)}async getDB(){return this.db?this.db:(this.db=await w6(R6,1,{upgrade(e){e.objectStoreNames.contains(qf)||e.createObjectStore(qf,{keyPath:"id"})}}),this.db)}async load(){const n=await(await this.getDB()).get(qf,"settings");return n&&we(()=>{Object.assign(this.data,n)}),this.data}async save(){const e=await this.getDB(),n=yo(this.data);await e.put(qf,n)}async update(e){we(()=>e(this.data)),await this.save()}}class N6{fileHandle;text="";scenes=new Map;project=null;constructor(e,n=null){this.fileHandle=e,this.project=n,Oa(this,{},{autoBind:!0})}async load(){const e=await this.fileHandle.getFile();this.text=(await e.text()).replace(/\r\n/g,`
`),this.splitIntoScenes()}async save(){const e=await this.fileHandle.createWritable();await e.write(this.text),await e.close()}setText(e){this.text=e,this.splitIntoScenes()}splitIntoScenes(){this.scenes.clear();const e=/^SC_[^\n]{1,32}$/gm,n=[...this.text.matchAll(e)];if(n.length===0){this.scenes.set("",this.text);return}for(let i=0;i<n.length;i++){const r=n[i][0],a=n[i].index;if(i===0&&a>0){const h=this.text.slice(0,a);this.scenes.set("",h)}const u=i+1<n.length?n[i+1].index:this.text.length,c=this.text.slice(a,u);this.scenes.set(r,c)}}get sortedSceneKeys(){return Array.from(this.scenes.keys()).sort((e,n)=>e.localeCompare(n))}joinScenes(){let e="";for(const n of this.sortedSceneKeys)e+=this.scenes.get(n);return e}setSceneText(e,n){this.scenes.set(e,n),this.text=this.joinScenes(),this.splitIntoScenes()}async createScenes(){if(!this.project){console.error("Script has no project reference");return}for(const e of this.sortedSceneKeys){if(e==="")continue;const n=this.scenes.get(e)??"";try{const i=await this.project.createScene(e);if(!i){console.error(`Failed to create scene ${e}`);continue}i.sceneJson&&(i.sceneJson.data.script=n,await i.sceneJson.save())}catch(i){console.error(`Error creating scene ${e}:`,i)}}}}const I6={gpt_model:"gpt-4o-mini",describe_prompt:"        . ",generate_tags_prompt:`
     (SCRIPT)     (SHOTS JSON)        REFS DICTIONARY     .

     ,        ,      :
  ENV/ROOM1/Night.png
  CHAR/VICTOR/Portrait.png


  `,split_shot_prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,prompt_presets:{split_shots:{model:"gpt-4o",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_tags:{model:"gpt-4o",prompt:"Generate Tags ",system_message:"You are a tagger "}},workflows:{generate_shot_image:{model:"gemini-2.5-flash-image"},split_scene_into_shots:{model:"gpt-4o-mini",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_video_kling:{model:Ie.options.img2video.model.v2_6,mode:Ie.options.img2video.mode.std,duration:Ie.options.img2video.duration.five,sound:Ie.options.img2video.sound.off},kling_motion_control:{mode:Ie.options.motion_control.mode.std,character_orientation:Ie.options.motion_control.character_orientation.image,keep_original_sound:Ie.options.motion_control.keep_original_sound.no}}};class Jg extends ar{scenes=[];artbook=null;script=null;userSettingsDB;projinfo=null;currentView={type:"none"};selectedScene=null;timelinesDirHandle=null;scenesLocalFolder=null;constructor(e,n){super(null,e),this.userSettingsDB=n,vr(this,{parentFolder:Te,scenes:Te,artbook:Te,script:Te,currentView:Te,selectedScene:Te,loadFromFolder:ut,setView:ut,setScene:ut})}async loadFromFolder(e){e&&(this.handle=e,this.path="",this.timelinesDirHandle=await this.handle.getDirectoryHandle("Timelines",{create:!0}),we(async()=>{this.userSettingsDB.data.lastOpenedFolder=e,(await Promise.all(this.userSettingsDB.data.recentFolders.map(async i=>{try{return await i.isSameEntry(e)}catch{return!1}}))).includes(!0)||(this.userSettingsDB.data.recentFolders.push(e),this.userSettingsDB.data.recentFolders=this.userSettingsDB.data.recentFolders.slice(-5)),await this.userSettingsDB.save(),this.projinfo=await cr.create(this.handle,"projinfo.json",I6)}),await Promise.all([this.loadScenes(),this.loadArtbook(),this.loadScript(),this.loadDB()]))}async loadScenes(){if(this.handle)try{const e=await this.handle.getDirectoryHandle("SCENES",{create:!0});this.scenesLocalFolder=new ar(this,e);const n=[];for await(const i of e.values())if(i.kind==="directory"){const r=new cx(i,this,this.scenesLocalFolder);await r.load(),n.push(r)}we(()=>{this.scenes=n})}catch(e){console.error("Error loading scenes:",e),we(()=>{this.scenes=[]})}}async loadArtbook(){if(this.handle)try{const e=await this.handle.getDirectoryHandle("REFS",{create:!0}),n=new d6(e,this);await n.load(),we(()=>{this.artbook=n})}catch(e){console.error("Error loading artbook:",e),we(()=>{this.artbook=null})}}async loadScript(){if(this.handle)try{const e=await this.handle.getFileHandle("script.txt",{create:!0}),n=new N6(e,this);await n.load(),we(()=>{this.script=n})}catch(e){console.error("Error loading script:",e),we(()=>{this.script=null})}}async loadDB(){await this.userSettingsDB.load(),Ti.getApiKey=()=>this.userSettingsDB.data.api_keys.Google_API_KEY||null,Ti.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.Google_API_KEY=e})},jd.getApiKey=()=>this.userSettingsDB.data.api_keys.GPT_API_KEY||null,jd.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.GPT_API_KEY=e})},Ie.getKeysDict=()=>({accessKey:this.userSettingsDB.data.api_keys.Kling_Acess_Key,secretKey:this.userSettingsDB.data.api_keys.Kling_Secret_Key})}async createScene(e){if(!this.handle)return console.error("No project folder open"),null;const n=this.scenes.find(i=>i.handle.name===e);if(n)return n;try{const r=await(await this.handle.getDirectoryHandle("SCENES",{create:!0})).getDirectoryHandle(e,{create:!0}),a=new cx(r,this,this.scenesLocalFolder);return await a.load(),we(()=>{const u=this.scenes.findIndex(c=>c.name.localeCompare(a.name)>0);u===-1?this.scenes.push(a):this.scenes.splice(u,0,a)}),a}catch(i){return console.error("Failed to create scene:",i),null}}log(){console.log(yo(this))}setView(e,n=null){this.currentView=e,this.selectedScene=n}setScene(e){this.setView({type:"scene"},e)}get promptPresets(){return this.projinfo?this.projinfo.data.prompt_presets:{}}savePromptPreset(e){we(()=>{this.projinfo&&(this.projinfo.data.prompt_presets[e.preset]=e,this.projinfo?.save())})}get workflows(){return this.projinfo?.data.workflows}updateWorkflow(e,n,i){we(()=>{this.workflows[e]||(this.workflows[e]={}),this.workflows[e][n]=i,this.projinfo?.save()})}download_asset(e,n){const i=document.createElement("a");i.href=e,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}const D6=({onOpenFolder:t,recentFolders:e,onOpenRecent:n,project:i})=>{const r=[{name:"Open",onClick:t},{name:"Recent",subItems:e.length?e.map(c=>({name:c.name,onClick:()=>n(c)})):[{name:"No Recent"}]}],a=[{name:"Undo"},{name:"Redo"}],u=[{name:"About"}];return b.jsx(ZE,{expand:!0,children:b.jsxs(pR,{fluid:!0,children:[b.jsx(ZE.Brand,{children:"ShotMasterRT"}),b.jsxs(N2,{className:"me-auto",style:{userSelect:"none"},children:[b.jsx(Hr,{title:"File",items:r}),b.jsx(Hr,{title:"Edit",items:a}),b.jsx(Hr,{title:"Help",items:u}),i&&b.jsxs(b.Fragment,{children:[b.jsx(Hr,{title:"Settings",onClick:()=>i.setView({type:"settings"})}),b.jsx(Hr,{title:"Script",onClick:()=>i.setView({type:"script"})}),b.jsx(Hr,{title:"Artbook",onClick:()=>i.setView({type:"artbook"})}),b.jsx(Hr,{title:"TaskView",onClick:()=>i.setView({type:"taskview"})})]})]})]})})},O6=He(({scene:t})=>{const e=()=>{!t||!t.sceneJson||t.project?.setView({type:"scene"},t)},n=t.project?.selectedScene===t;return b.jsxs("li",{className:"d-flex justify-content-between align-items-center py-1 px-2",style:{cursor:"pointer"},onClick:e,children:[b.jsx("span",{className:n?"text-success":void 0,children:t.name}),b.jsxs("span",{className:"text-muted",children:[t.finishedShotsNum," / ",t.shots.length]})]})}),tt=({onClick:t,label:e="Click",className:n=""})=>b.jsx("button",{className:`btn btn-sm btn-outline-secondary ${n}`,onClick:t,children:e}),k6=He(({project:t})=>{if(!t)return b.jsx("div",{children:"No Project Opened"});const e=async()=>{const i=prompt("Enter new scene name");i&&await t.createScene(i)},n=t.name||"No Project Opened";return b.jsxs("div",{style:{width:"200px",minWidth:"200px",borderRight:"1px solid #ced4da",padding:"10px",display:"flex",flexDirection:"column"},children:[b.jsx("h5",{style:{flexShrink:0,marginBottom:8},children:n}),b.jsx(tt,{label:"+ Add Scene",onClick:e,className:"mb-2"}),b.jsx("ul",{className:"list-unstyled",style:{margin:0,padding:0,overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:t.scenes.map((i,r)=>b.jsx(O6,{scene:i},r))})]})});class jf extends E.Component{constructor(e){super(e),this.state={value:e.value}}handleChange=e=>{const n=e.target.value;this.setState({value:n}),this.props.onChange(n)};render(){const{label:e}=this.props,{value:n}=this.state;return b.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:12},children:[b.jsx("label",{style:{marginRight:8,minWidth:120},children:e}),b.jsx("input",{type:"text",value:n,onChange:this.handleChange,style:{flexGrow:1,padding:6}})]})}}const Ga=({label:t="Section",children:e,defaultCollapsed:n=!1,className:i="",headerExtra:r})=>{const[a,u]=E.useState(n);return b.jsxs("div",{className:`border rounded p-2 mb-2 ${i}`,children:[b.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsx("button",{className:"btn btn-sm ",onClick:()=>u(!a),children:a?"":""}),b.jsx("strong",{children:t})]}),r&&!a&&b.jsx("div",{children:r})]}),!a&&b.jsx("div",{className:"mt-2",children:e})]})},ay=({label:t,initialText:e,onSave:n,onEdit:i,fitHeight:r=!1,headerExtra:a})=>{const[u,c]=E.useState(e),[h,d]=E.useState(e),[m,y]=E.useState(!1),[S,w]=E.useState(!1),C=E.useRef(null);E.useEffect(()=>{c(e),d(e),r&&C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},[e,r]);const x=u!==h,A=N=>{c(N),i&&i(N)},M=async()=>{n&&(w(!0),await n(u),d(u),w(!1))};E.useEffect(()=>{if(!m||!x)return;const N=setTimeout(()=>M(),1e3);return()=>clearTimeout(N)},[u,m,x]),E.useEffect(()=>{r&&C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},[u,r]);const I=b.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a&&b.jsx(b.Fragment,{children:a}),b.jsx("button",{className:"btn btn-primary btn-sm",disabled:S||!x||!n,onClick:M,children:S?"Saving...":x?"Save*":"Save"}),b.jsxs("label",{className:"d-flex align-items-center gap-1 mb-0",children:[b.jsx("input",{type:"checkbox",checked:m,onChange:N=>y(N.target.checked)}),"Auto-save"]})]});return b.jsx(Ga,{label:t,headerExtra:I,children:b.jsx("textarea",{ref:C,className:"form-control",style:{fontFamily:"monospace",overflowY:"auto",maxHeight:"800px"},value:u,onChange:N=>A(N.target.value)})})},zt=He(({localJson:t,field:e,fitHeight:n=!1,headerExtra:i})=>{if(!t)return;const r=async a=>{await t.updateField(e,a)};return b.jsx(ay,{label:e,initialText:t.getField(e)??"",onSave:r,fitHeight:n,headerExtra:i})}),fr=({tabs:t})=>{const e=Object.keys(t),[n,i]=E.useState(e[0]);return b.jsxs("div",{children:[b.jsx("ul",{className:"nav nav-tabs",children:e.map(r=>b.jsx("li",{className:"nav-item",children:b.jsx("button",{className:`nav-link ${n===r?"active":""}`,onClick:()=>i(r),children:r})},r))}),b.jsx("div",{className:"tab-content p-3 border border-top-0",children:b.jsx("div",{className:"tab-pane fade show active",children:t[n]})})]})};function JI({items:t,currentItem:e,onPicked:n,labelRenderer:i,className:r=""}){return b.jsxs(Df,{className:r,children:[b.jsx(Df.Toggle,{variant:"outline-secondary",size:"sm",children:i?i(e):String(e)}),b.jsx(Df.Menu,{children:t.map((a,u)=>b.jsx(Df.Item,{onClick:()=>n(a),children:i?i(a):String(a)},u))})]})}const P6=He(({project:t})=>{const{userSettingsDB:e}=t;if(!e)return null;const n=t.projinfo?{"  ":b.jsx(zt,{localJson:t.projinfo,field:"split_shot_prompt",fitHeight:!0})," ":b.jsx(zt,{localJson:t.projinfo,field:"generate_tags_prompt",fitHeight:!0})}:{};return b.jsxs("div",{style:{padding:20},children:[b.jsx("h3",{children:"API Keys"}),b.jsx(tt,{onClick:()=>{t.log()},label:"LOG Project"}),b.jsx(tt,{onClick:()=>{t.download_asset("assets/server.exe","server.exe")},label:"Download Server"}),b.jsx(zt,{localJson:t.projinfo,field:"project_path",fitHeight:!0}),b.jsx(jf,{label:"GPT API Key",value:e.data.api_keys.GPT_API_KEY||"",onChange:async i=>{await e.update(r=>{r.api_keys.GPT_API_KEY=i})}}),b.jsx(jf,{label:"Google API Key",value:e.data.api_keys.Google_API_KEY||"",onChange:async i=>{await e.update(r=>{r.api_keys.Google_API_KEY=i})}}),b.jsx(jf,{label:"Kling Acess Key",value:e.data.api_keys.Kling_Acess_Key||"",onChange:async i=>{await e.update(r=>{r.api_keys.Kling_Acess_Key=i})}}),b.jsx(jf,{label:"Kling Secret Key",value:e.data.api_keys.Kling_Secret_Key||"",onChange:async i=>{await e.update(r=>{r.api_keys.Kling_Secret_Key=i})}}),b.jsx("div",{children:b.jsx(JI,{items:zI,currentItem:t.projinfo?.data.gpt_model,onPicked:i=>{t.projinfo?.updateField("gpt_model",i)}})}),b.jsx("h2",{children:"Prompts"}),Object.keys(n).length>0&&b.jsx(fr,{tabs:n})]})}),L6=He(({project:t})=>{if(!t.script)return b.jsx("div",{children:"No script loaded in project."});const e=async r=>{t.script.setText(r),await t.script.save()},n={};for(const r of t.script.sortedSceneKeys)n[r||"Intro"]=b.jsx(ay,{label:r||"Intro",initialText:t.script.scenes.get(r),onSave:async a=>{t.script.setSceneText(r,a),await t.script.save()},fitHeight:!0});const i=async()=>{try{await t.script.createScenes(),alert("Scenes created successfully!")}catch(r){console.error("Error creating scenes:",r),alert("Failed to create scenes. See console for details.")}};return b.jsxs("div",{style:{padding:"1rem"},children:[b.jsx("h4",{children:"Script"}),b.jsx(tt,{label:"Create Scenes from Script",onClick:i,className:"mb-2"}),b.jsx(fr,{tabs:{"Full Script":b.jsx(ay,{label:"Full Script",initialText:t.script.text,onSave:e,fitHeight:!0}),Scenes:b.jsx(fr,{tabs:n})}})]})}),U6=He(({art:t,onClose:e})=>{const[n,i]=E.useState(null),[r,a]=E.useState(!0);E.useEffect(()=>{let c=!0,h=t;a(!0),i(null);async function d(){const m=await h.image.getUrlObject();if(!c||t!==h)return;i(m);const y=await h.getArtInfo();!c||t!==h||(h.artInfo=y,a(!1))}return d(),()=>{c=!1}},[t]);const u=t.handle.name;return r?b.jsx("div",{children:"Loading art info..."}):b.jsxs("div",{className:"art-info-card",style:{border:"1px solid #ccc",padding:"1rem",borderRadius:"8px"},children:[b.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("strong",{children:u}),b.jsx("button",{onClick:e,style:{cursor:"pointer",border:"none",background:"transparent",fontSize:"1.2rem"},children:""})]}),n?b.jsx("img",{src:n,className:"preview-img",style:{maxWidth:"1000px",width:"auto",maxHeight:"1000px",objectFit:"contain",borderRadius:"4px",display:"block",marginBottom:"1rem"}}):b.jsx("div",{style:{padding:"4rem",textAlign:"center"},children:b.jsx("span",{children:"Loading image..."})}),t.artInfo&&b.jsx(zt,{localJson:t.artInfo,field:"prompt",fitHeight:!0})]})}),F6=He(({artbook:t})=>{const[e,n]=E.useState(null);if(!Object.keys(t.data).length)return b.jsx("div",{children:"No Artbook content found."});const i=({art:c})=>{const[h,d]=E.useState(null);return E.useEffect(()=>{let m=!0;return c.image.getUrlObject().then(y=>{m&&d(y)}),()=>{m=!1}},[c]),b.jsx(hR,{xs:6,md:3,lg:2,style:{marginBottom:"1rem"},children:b.jsxs(Nf,{onClick:()=>n(c),style:{cursor:"pointer"},children:[h?b.jsx(Nf.Img,{variant:"top",src:h}):b.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:b.jsx(pM,{animation:"border"})}),b.jsx(Nf.Body,{children:b.jsx(Nf.Text,{style:{fontSize:"0.8rem"},children:c.handle.name})})]})})},r=(c,h)=>b.jsxs("div",{style:{marginBottom:"2rem"},children:[b.jsx("h5",{children:c}),b.jsx(hM,{children:h.map(d=>b.jsx(i,{art:d},d.handle.name))}),e&&h.includes(e)&&b.jsx("div",{style:{marginTop:"1rem"},children:b.jsx(U6,{art:e,onClose:()=>n(null)})})]},c),a=c=>b.jsxs("div",{style:{padding:"1rem"},children:[Object.entries(c).map(([h,d])=>r(h,d)),b.jsx("div",{style:{height:"500px"}})]}),u={};for(const c in t.data)u[c]=a(t.data[c]);return b.jsxs("div",{style:{padding:"1rem"},children:[b.jsx("h2",{className:"mb-3",children:"Artbook"}),b.jsx(fr,{tabs:u})]})}),B6=He(({art:t,scene:e})=>{const[n,i]=E.useState(null);if(E.useEffect(()=>{t.getArtInfo();let a=!0;return(async()=>{const c=await t.image.getUrlObject();a&&i(c||null)})(),()=>{a=!1,t.image.revokeUrl()}},[t]),!n)return null;const r=()=>{e.removeTag(t.path)};return b.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsx("img",{src:n,alt:t.handle.name,style:{width:40,height:40,objectFit:"cover",marginRight:8}}),b.jsxs("div",{children:[b.jsx("div",{children:t.handle.name}),b.jsx("small",{className:"text-muted",children:t.path}),t.artInfo&&b.jsx("div",{children:b.jsx("small",{children:t.artInfo.data?.description||""})})]})]}),b.jsx(tt,{onClick:r,label:"X"})]})}),$6=({art:t,onClick:e})=>{const[n,i]=E.useState("");return E.useEffect(()=>{let r=!0;return t.image.getUrlObject().then(a=>{r&&i(a)}),()=>{r=!1,t.image.revokeUrl()}},[t]),b.jsxs("div",{className:"px-2 py-1 hover-bg-light d-flex align-items-center",style:{cursor:"pointer",gap:6},onClick:e,children:[n&&b.jsx("img",{src:n,alt:t.handle.name,style:{width:36,height:36,objectFit:"cover",borderRadius:2}}),b.jsx("span",{children:t.handle.name})]})},Ph=({onClick:t,label:e="Click",className:n="",is_loading:i=!1})=>b.jsx(tt,{onClick:t,className:`${n} ${i?"disabled":""}`,label:b.jsxs("span",{className:"d-flex align-items-center justify-content-center",children:[b.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true",style:{animation:i?void 0:"none",borderColor:i?void 0:"#6c757d"}}),b.jsx("span",{children:e})]})});function Ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function gx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Lh(...t){return e=>{let n=!1;const i=t.map(r=>{const a=gx(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():gx(t[r],null)}}}}function rn(...t){return E.useCallback(Lh(...t),t)}function Yu(t,e=[]){let n=[];function i(a,u){const c=E.createContext(u),h=n.length;n=[...n,u];const d=y=>{const{scope:S,children:w,...C}=y,x=S?.[t]?.[h]||c,A=E.useMemo(()=>C,Object.values(C));return b.jsx(x.Provider,{value:A,children:w})};d.displayName=a+"Provider";function m(y,S){const w=S?.[t]?.[h]||c,C=E.useContext(w);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[d,m]}const r=()=>{const a=n.map(u=>E.createContext(u));return function(c){const h=c?.[t]||a;return E.useMemo(()=>({[`__scope${t}`]:{...c,[t]:h}}),[c,h])}};return r.scopeName=t,[i,G6(r,...e)]}function G6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const u=i.reduce((c,{useScope:h,scopeName:d})=>{const y=h(a)[`__scope${d}`];return{...c,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}var dr=globalThis?.document?E.useLayoutEffect:()=>{},H6=Zx[" useInsertionEffect ".trim().toString()]||dr;function T_({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,u]=V6({defaultProp:e,onChange:n}),c=t!==void 0,h=c?t:r;{const m=E.useRef(t!==void 0);E.useEffect(()=>{const y=m.current;y!==c&&console.warn(`${i} is changing from ${y?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,i])}const d=E.useCallback(m=>{if(c){const y=z6(m)?m(t):m;y!==t&&u.current?.(y)}else a(m)},[c,t,a,u]);return[h,d]}function V6({defaultProp:t,onChange:e}){const[n,i]=E.useState(t),r=E.useRef(n),a=E.useRef(e);return H6(()=>{a.current=e},[e]),E.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,i,a]}function z6(t){return typeof t=="function"}function Jd(t){const e=q6(t),n=E.forwardRef((i,r)=>{const{children:a,...u}=i,c=E.Children.toArray(a),h=c.find(J6);if(h){const d=h.props.children,m=c.map(y=>y===h?E.Children.count(d)>1?E.Children.only(null):E.isValidElement(d)?d.props.children:null:y);return b.jsx(e,{...u,ref:r,children:E.isValidElement(d)?E.cloneElement(d,void 0,m):null})}return b.jsx(e,{...u,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function q6(t){const e=E.forwardRef((n,i)=>{const{children:r,...a}=n;if(E.isValidElement(r)){const u=Y6(r),c=K6(a,r.props);return r.type!==E.Fragment&&(c.ref=i?Lh(i,u):u),E.cloneElement(r,c)}return E.Children.count(r)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var j6=Symbol("radix.slottable");function J6(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===j6}function K6(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...c)=>{const h=a(...c);return r(...c),h}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function Y6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var X6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qt=X6.reduce((t,e)=>{const n=Jd(`Primitive.${e}`),i=E.forwardRef((r,a)=>{const{asChild:u,...c}=r,h=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(h,{...c,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function KI(t,e){t&&ah.flushSync(()=>t.dispatchEvent(e))}function YI(t){const e=t+"CollectionProvider",[n,i]=Yu(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=x=>{const{scope:A,children:M}=x,I=ot.useRef(null),N=ot.useRef(new Map).current;return b.jsx(r,{scope:A,itemMap:N,collectionRef:I,children:M})};u.displayName=e;const c=t+"CollectionSlot",h=Jd(c),d=ot.forwardRef((x,A)=>{const{scope:M,children:I}=x,N=a(c,M),D=rn(A,N.collectionRef);return b.jsx(h,{ref:D,children:I})});d.displayName=c;const m=t+"CollectionItemSlot",y="data-radix-collection-item",S=Jd(m),w=ot.forwardRef((x,A)=>{const{scope:M,children:I,...N}=x,D=ot.useRef(null),L=rn(A,D),U=a(m,M);return ot.useEffect(()=>(U.itemMap.set(D,{ref:D,...N}),()=>void U.itemMap.delete(D))),b.jsx(S,{[y]:"",ref:L,children:I})});w.displayName=m;function C(x){const A=a(t+"CollectionConsumer",x);return ot.useCallback(()=>{const I=A.collectionRef.current;if(!I)return[];const N=Array.from(I.querySelectorAll(`[${y}]`));return Array.from(A.itemMap.values()).sort((U,O)=>N.indexOf(U.ref.current)-N.indexOf(O.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:u,Slot:d,ItemSlot:w},C,i]}var W6=E.createContext(void 0);function XI(t){const e=E.useContext(W6);return t||e||"ltr"}function ki(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}function Q6(t,e=globalThis?.document){const n=ki(t);E.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Z6="DismissableLayer",ly="dismissableLayer.update",e5="dismissableLayer.pointerDownOutside",t5="dismissableLayer.focusOutside",vx,WI=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),QI=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:u,onDismiss:c,...h}=t,d=E.useContext(WI),[m,y]=E.useState(null),S=m?.ownerDocument??globalThis?.document,[,w]=E.useState({}),C=rn(e,O=>y(O)),x=Array.from(d.layers),[A]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),M=x.indexOf(A),I=m?x.indexOf(m):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,D=I>=M,L=o5(O=>{const q=O.target,j=[...d.branches].some(Y=>Y.contains(q));!D||j||(r?.(O),u?.(O),O.defaultPrevented||c?.())},S),U=r5(O=>{const q=O.target;[...d.branches].some(Y=>Y.contains(q))||(a?.(O),u?.(O),O.defaultPrevented||c?.())},S);return Q6(O=>{I===d.layers.size-1&&(i?.(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},S),E.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(vx=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),yx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(S.body.style.pointerEvents=vx)}},[m,S,n,d]),E.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),yx())},[m,d]),E.useEffect(()=>{const O=()=>w({});return document.addEventListener(ly,O),()=>document.removeEventListener(ly,O)},[]),b.jsx(qt.div,{...h,ref:C,style:{pointerEvents:N?D?"auto":"none":void 0,...t.style},onFocusCapture:Ge(t.onFocusCapture,U.onFocusCapture),onBlurCapture:Ge(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Ge(t.onPointerDownCapture,L.onPointerDownCapture)})});QI.displayName=Z6;var n5="DismissableLayerBranch",i5=E.forwardRef((t,e)=>{const n=E.useContext(WI),i=E.useRef(null),r=rn(e,i);return E.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),b.jsx(qt.div,{...t,ref:r})});i5.displayName=n5;function o5(t,e=globalThis?.document){const n=ki(t),i=E.useRef(!1),r=E.useRef(()=>{});return E.useEffect(()=>{const a=c=>{if(c.target&&!i.current){let h=function(){ZI(e5,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);i.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function r5(t,e=globalThis?.document){const n=ki(t),i=E.useRef(!1);return E.useEffect(()=>{const r=a=>{a.target&&!i.current&&ZI(t5,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function yx(){const t=new CustomEvent(ly);document.dispatchEvent(t)}function ZI(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?KI(r,a):r.dispatchEvent(a)}var Kg=0;function s5(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??_x()),document.body.insertAdjacentElement("beforeend",t[1]??_x()),Kg++,()=>{Kg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kg--}},[])}function _x(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yg="focusScope.autoFocusOnMount",Xg="focusScope.autoFocusOnUnmount",Sx={bubbles:!1,cancelable:!0},a5="FocusScope",eD=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...u}=t,[c,h]=E.useState(null),d=ki(r),m=ki(a),y=E.useRef(null),S=rn(e,x=>h(x)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(i){let x=function(N){if(w.paused||!c)return;const D=N.target;c.contains(D)?y.current=D:tr(y.current,{select:!0})},A=function(N){if(w.paused||!c)return;const D=N.relatedTarget;D!==null&&(c.contains(D)||tr(y.current,{select:!0}))},M=function(N){if(document.activeElement===document.body)for(const L of N)L.removedNodes.length>0&&tr(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",A);const I=new MutationObserver(M);return c&&I.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",A),I.disconnect()}}},[i,c,w.paused]),E.useEffect(()=>{if(c){wx.add(w);const x=document.activeElement;if(!c.contains(x)){const M=new CustomEvent(Yg,Sx);c.addEventListener(Yg,d),c.dispatchEvent(M),M.defaultPrevented||(l5(h5(tD(c)),{select:!0}),document.activeElement===x&&tr(c))}return()=>{c.removeEventListener(Yg,d),setTimeout(()=>{const M=new CustomEvent(Xg,Sx);c.addEventListener(Xg,m),c.dispatchEvent(M),M.defaultPrevented||tr(x??document.body,{select:!0}),c.removeEventListener(Xg,m),wx.remove(w)},0)}}},[c,d,m,w]);const C=E.useCallback(x=>{if(!n&&!i||w.paused)return;const A=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,M=document.activeElement;if(A&&M){const I=x.currentTarget,[N,D]=u5(I);N&&D?!x.shiftKey&&M===D?(x.preventDefault(),n&&tr(N,{select:!0})):x.shiftKey&&M===N&&(x.preventDefault(),n&&tr(D,{select:!0})):M===I&&x.preventDefault()}},[n,i,w.paused]);return b.jsx(qt.div,{tabIndex:-1,...u,ref:S,onKeyDown:C})});eD.displayName=a5;function l5(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(tr(i,{select:e}),document.activeElement!==n)return}function u5(t){const e=tD(t),n=bx(e,t),i=bx(e.reverse(),t);return[n,i]}function tD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bx(t,e){for(const n of t)if(!c5(n,{upTo:e}))return n}function c5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function f5(t){return t instanceof HTMLInputElement&&"select"in t}function tr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&f5(t)&&e&&t.select()}}var wx=d5();function d5(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Ex(t,e),t.unshift(e)},remove(e){t=Ex(t,e),t[0]?.resume()}}}function Ex(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function h5(t){return t.filter(e=>e.tagName!=="A")}var p5=Zx[" useId ".trim().toString()]||(()=>{}),m5=0;function bu(t){const[e,n]=E.useState(p5());return dr(()=>{n(i=>i??String(m5++))},[t]),t||(e?`radix-${e}`:"")}const g5=["top","right","bottom","left"],hr=Math.min,_n=Math.max,Kd=Math.round,Jf=Math.floor,Oi=t=>({x:t,y:t}),v5={left:"right",right:"left",bottom:"top",top:"bottom"},y5={start:"end",end:"start"};function uy(t,e,n){return _n(t,hr(e,n))}function bo(t,e){return typeof t=="function"?t(e):t}function wo(t){return t.split("-")[0]}function Ha(t){return t.split("-")[1]}function C_(t){return t==="x"?"y":"x"}function x_(t){return t==="y"?"height":"width"}const _5=new Set(["top","bottom"]);function Ai(t){return _5.has(wo(t))?"y":"x"}function A_(t){return C_(Ai(t))}function S5(t,e,n){n===void 0&&(n=!1);const i=Ha(t),r=A_(t),a=x_(r);let u=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(u=Yd(u)),[u,Yd(u)]}function b5(t){const e=Yd(t);return[cy(t),e,cy(e)]}function cy(t){return t.replace(/start|end/g,e=>y5[e])}const Tx=["left","right"],Cx=["right","left"],w5=["top","bottom"],E5=["bottom","top"];function T5(t,e,n){switch(t){case"top":case"bottom":return n?e?Cx:Tx:e?Tx:Cx;case"left":case"right":return e?w5:E5;default:return[]}}function C5(t,e,n,i){const r=Ha(t);let a=T5(wo(t),n==="start",i);return r&&(a=a.map(u=>u+"-"+r),e&&(a=a.concat(a.map(cy)))),a}function Yd(t){return t.replace(/left|right|bottom|top/g,e=>v5[e])}function x5(t){return{top:0,right:0,bottom:0,left:0,...t}}function nD(t){return typeof t!="number"?x5(t):{top:t,right:t,bottom:t,left:t}}function Xd(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function xx(t,e,n){let{reference:i,floating:r}=t;const a=Ai(e),u=A_(e),c=x_(u),h=wo(e),d=a==="y",m=i.x+i.width/2-r.width/2,y=i.y+i.height/2-r.height/2,S=i[c]/2-r[c]/2;let w;switch(h){case"top":w={x:m,y:i.y-r.height};break;case"bottom":w={x:m,y:i.y+i.height};break;case"right":w={x:i.x+i.width,y};break;case"left":w={x:i.x-r.width,y};break;default:w={x:i.x,y:i.y}}switch(Ha(e)){case"start":w[u]-=S*(n&&d?-1:1);break;case"end":w[u]+=S*(n&&d?-1:1);break}return w}const A5=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:u}=n,c=a.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(e));let d=await u.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y}=xx(d,i,h),S=i,w={},C=0;for(let x=0;x<c.length;x++){const{name:A,fn:M}=c[x],{x:I,y:N,data:D,reset:L}=await M({x:m,y,initialPlacement:i,placement:S,strategy:r,middlewareData:w,rects:d,platform:u,elements:{reference:t,floating:e}});m=I??m,y=N??y,w={...w,[A]:{...w[A],...D}},L&&C<=50&&(C++,typeof L=="object"&&(L.placement&&(S=L.placement),L.rects&&(d=L.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:r}):L.rects),{x:m,y}=xx(d,S,h)),x=-1)}return{x:m,y,placement:S,strategy:r,middlewareData:w}};async function wu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:u,elements:c,strategy:h}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:S=!1,padding:w=0}=bo(e,t),C=nD(w),A=c[S?y==="floating"?"reference":"floating":y],M=Xd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(A)))==null||n?A:A.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:m,strategy:h})),I=y==="floating"?{x:i,y:r,width:u.floating.width,height:u.floating.height}:u.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),D=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},L=Xd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:I,offsetParent:N,strategy:h}):I);return{top:(M.top-L.top+C.top)/D.y,bottom:(L.bottom-M.bottom+C.bottom)/D.y,left:(M.left-L.left+C.left)/D.x,right:(L.right-M.right+C.right)/D.x}}const R5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:u,elements:c,middlewareData:h}=e,{element:d,padding:m=0}=bo(t,e)||{};if(d==null)return{};const y=nD(m),S={x:n,y:i},w=A_(r),C=x_(w),x=await u.getDimensions(d),A=w==="y",M=A?"top":"left",I=A?"bottom":"right",N=A?"clientHeight":"clientWidth",D=a.reference[C]+a.reference[w]-S[w]-a.floating[C],L=S[w]-a.reference[w],U=await(u.getOffsetParent==null?void 0:u.getOffsetParent(d));let O=U?U[N]:0;(!O||!await(u.isElement==null?void 0:u.isElement(U)))&&(O=c.floating[N]||a.floating[C]);const q=D/2-L/2,j=O/2-x[C]/2-1,Y=hr(y[M],j),W=hr(y[I],j),re=Y,ie=O-x[C]-W,ae=O/2-x[C]/2+q,de=uy(re,ae,ie),B=!h.arrow&&Ha(r)!=null&&ae!==de&&a.reference[C]/2-(ae<re?Y:W)-x[C]/2<0,Q=B?ae<re?ae-re:ae-ie:0;return{[w]:S[w]+Q,data:{[w]:de,centerOffset:ae-de-Q,...B&&{alignmentOffset:Q}},reset:B}}}),M5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:u,initialPlacement:c,platform:h,elements:d}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:S,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:x=!0,...A}=bo(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const M=wo(r),I=Ai(c),N=wo(c)===c,D=await(h.isRTL==null?void 0:h.isRTL(d.floating)),L=S||(N||!x?[Yd(c)]:b5(c)),U=C!=="none";!S&&U&&L.push(...C5(c,x,C,D));const O=[c,...L],q=await wu(e,A),j=[];let Y=((i=a.flip)==null?void 0:i.overflows)||[];if(m&&j.push(q[M]),y){const ae=S5(r,u,D);j.push(q[ae[0]],q[ae[1]])}if(Y=[...Y,{placement:r,overflows:j}],!j.every(ae=>ae<=0)){var W,re;const ae=(((W=a.flip)==null?void 0:W.index)||0)+1,de=O[ae];if(de&&(!(y==="alignment"?I!==Ai(de):!1)||Y.every(ee=>Ai(ee.placement)===I?ee.overflows[0]>0:!0)))return{data:{index:ae,overflows:Y},reset:{placement:de}};let B=(re=Y.filter(Q=>Q.overflows[0]<=0).sort((Q,ee)=>Q.overflows[1]-ee.overflows[1])[0])==null?void 0:re.placement;if(!B)switch(w){case"bestFit":{var ie;const Q=(ie=Y.filter(ee=>{if(U){const ne=Ai(ee.placement);return ne===I||ne==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(ne=>ne>0).reduce((ne,ce)=>ne+ce,0)]).sort((ee,ne)=>ee[1]-ne[1])[0])==null?void 0:ie[0];Q&&(B=Q);break}case"initialPlacement":B=c;break}if(r!==B)return{reset:{placement:B}}}return{}}}};function Ax(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Rx(t){return g5.some(e=>t[e]>=0)}const N5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=bo(t,e);switch(i){case"referenceHidden":{const a=await wu(e,{...r,elementContext:"reference"}),u=Ax(a,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:Rx(u)}}}case"escaped":{const a=await wu(e,{...r,altBoundary:!0}),u=Ax(a,n.floating);return{data:{escapedOffsets:u,escaped:Rx(u)}}}default:return{}}}}},iD=new Set(["left","top"]);async function I5(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),u=wo(n),c=Ha(n),h=Ai(n)==="y",d=iD.has(u)?-1:1,m=a&&h?-1:1,y=bo(e,t);let{mainAxis:S,crossAxis:w,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof C=="number"&&(w=c==="end"?C*-1:C),h?{x:w*m,y:S*d}:{x:S*d,y:w*m}}const D5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:u,middlewareData:c}=e,h=await I5(e,t);return u===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:r+h.x,y:a+h.y,data:{...h,placement:u}}}}},O5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:u=!1,limiter:c={fn:A=>{let{x:M,y:I}=A;return{x:M,y:I}}},...h}=bo(t,e),d={x:n,y:i},m=await wu(e,h),y=Ai(wo(r)),S=C_(y);let w=d[S],C=d[y];if(a){const A=S==="y"?"top":"left",M=S==="y"?"bottom":"right",I=w+m[A],N=w-m[M];w=uy(I,w,N)}if(u){const A=y==="y"?"top":"left",M=y==="y"?"bottom":"right",I=C+m[A],N=C-m[M];C=uy(I,C,N)}const x=c.fn({...e,[S]:w,[y]:C});return{...x,data:{x:x.x-n,y:x.y-i,enabled:{[S]:a,[y]:u}}}}}},k5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:u}=e,{offset:c=0,mainAxis:h=!0,crossAxis:d=!0}=bo(t,e),m={x:n,y:i},y=Ai(r),S=C_(y);let w=m[S],C=m[y];const x=bo(c,e),A=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const N=S==="y"?"height":"width",D=a.reference[S]-a.floating[N]+A.mainAxis,L=a.reference[S]+a.reference[N]-A.mainAxis;w<D?w=D:w>L&&(w=L)}if(d){var M,I;const N=S==="y"?"width":"height",D=iD.has(wo(r)),L=a.reference[y]-a.floating[N]+(D&&((M=u.offset)==null?void 0:M[y])||0)+(D?0:A.crossAxis),U=a.reference[y]+a.reference[N]+(D?0:((I=u.offset)==null?void 0:I[y])||0)-(D?A.crossAxis:0);C<L?C=L:C>U&&(C=U)}return{[S]:w,[y]:C}}}},P5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:u,elements:c}=e,{apply:h=()=>{},...d}=bo(t,e),m=await wu(e,d),y=wo(r),S=Ha(r),w=Ai(r)==="y",{width:C,height:x}=a.floating;let A,M;y==="top"||y==="bottom"?(A=y,M=S===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(M=y,A=S==="end"?"top":"bottom");const I=x-m.top-m.bottom,N=C-m.left-m.right,D=hr(x-m[A],I),L=hr(C-m[M],N),U=!e.middlewareData.shift;let O=D,q=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(q=N),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(O=I),U&&!S){const Y=_n(m.left,0),W=_n(m.right,0),re=_n(m.top,0),ie=_n(m.bottom,0);w?q=C-2*(Y!==0||W!==0?Y+W:_n(m.left,m.right)):O=x-2*(re!==0||ie!==0?re+ie:_n(m.top,m.bottom))}await h({...e,availableWidth:q,availableHeight:O});const j=await u.getDimensions(c.floating);return C!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};function Uh(){return typeof window<"u"}function Va(t){return oD(t)?(t.nodeName||"").toLowerCase():"#document"}function wn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ui(t){var e;return(e=(oD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oD(t){return Uh()?t instanceof Node||t instanceof wn(t).Node:!1}function ci(t){return Uh()?t instanceof Element||t instanceof wn(t).Element:!1}function Pi(t){return Uh()?t instanceof HTMLElement||t instanceof wn(t).HTMLElement:!1}function Mx(t){return!Uh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wn(t).ShadowRoot}const L5=new Set(["inline","contents"]);function Xu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=fi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!L5.has(r)}const U5=new Set(["table","td","th"]);function F5(t){return U5.has(Va(t))}const B5=[":popover-open",":modal"];function Fh(t){return B5.some(e=>{try{return t.matches(e)}catch{return!1}})}const $5=["transform","translate","scale","rotate","perspective"],G5=["transform","translate","scale","rotate","perspective","filter"],H5=["paint","layout","strict","content"];function R_(t){const e=M_(),n=ci(t)?fi(t):t;return $5.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||G5.some(i=>(n.willChange||"").includes(i))||H5.some(i=>(n.contain||"").includes(i))}function V5(t){let e=pr(t);for(;Pi(e)&&!Ma(e);){if(R_(e))return e;if(Fh(e))return null;e=pr(e)}return null}function M_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const z5=new Set(["html","body","#document"]);function Ma(t){return z5.has(Va(t))}function fi(t){return wn(t).getComputedStyle(t)}function Bh(t){return ci(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pr(t){if(Va(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Mx(t)&&t.host||Ui(t);return Mx(e)?e.host:e}function rD(t){const e=pr(t);return Ma(e)?t.ownerDocument?t.ownerDocument.body:t.body:Pi(e)&&Xu(e)?e:rD(e)}function Eu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=rD(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),u=wn(r);if(a){const c=fy(u);return e.concat(u,u.visualViewport||[],Xu(r)?r:[],c&&n?Eu(c):[])}return e.concat(r,Eu(r,[],n))}function fy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sD(t){const e=fi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Pi(t),a=r?t.offsetWidth:n,u=r?t.offsetHeight:i,c=Kd(n)!==a||Kd(i)!==u;return c&&(n=a,i=u),{width:n,height:i,$:c}}function N_(t){return ci(t)?t:t.contextElement}function Sa(t){const e=N_(t);if(!Pi(e))return Oi(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=sD(e);let u=(a?Kd(n.width):n.width)/i,c=(a?Kd(n.height):n.height)/r;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const q5=Oi(0);function aD(t){const e=wn(t);return!M_()||!e.visualViewport?q5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function j5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==wn(t)?!1:e}function ss(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=N_(t);let u=Oi(1);e&&(i?ci(i)&&(u=Sa(i)):u=Sa(t));const c=j5(a,n,i)?aD(a):Oi(0);let h=(r.left+c.x)/u.x,d=(r.top+c.y)/u.y,m=r.width/u.x,y=r.height/u.y;if(a){const S=wn(a),w=i&&ci(i)?wn(i):i;let C=S,x=fy(C);for(;x&&i&&w!==C;){const A=Sa(x),M=x.getBoundingClientRect(),I=fi(x),N=M.left+(x.clientLeft+parseFloat(I.paddingLeft))*A.x,D=M.top+(x.clientTop+parseFloat(I.paddingTop))*A.y;h*=A.x,d*=A.y,m*=A.x,y*=A.y,h+=N,d+=D,C=wn(x),x=fy(C)}}return Xd({width:m,height:y,x:h,y:d})}function $h(t,e){const n=Bh(t).scrollLeft;return e?e.left+n:ss(Ui(t)).left+n}function lD(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-$h(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function J5(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",u=Ui(i),c=e?Fh(e.floating):!1;if(i===u||c&&a)return n;let h={scrollLeft:0,scrollTop:0},d=Oi(1);const m=Oi(0),y=Pi(i);if((y||!y&&!a)&&((Va(i)!=="body"||Xu(u))&&(h=Bh(i)),Pi(i))){const w=ss(i);d=Sa(i),m.x=w.x+i.clientLeft,m.y=w.y+i.clientTop}const S=u&&!y&&!a?lD(u,h):Oi(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-h.scrollLeft*d.x+m.x+S.x,y:n.y*d.y-h.scrollTop*d.y+m.y+S.y}}function K5(t){return Array.from(t.getClientRects())}function Y5(t){const e=Ui(t),n=Bh(t),i=t.ownerDocument.body,r=_n(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=_n(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let u=-n.scrollLeft+$h(t);const c=-n.scrollTop;return fi(i).direction==="rtl"&&(u+=_n(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:u,y:c}}const Nx=25;function X5(t,e){const n=wn(t),i=Ui(t),r=n.visualViewport;let a=i.clientWidth,u=i.clientHeight,c=0,h=0;if(r){a=r.width,u=r.height;const m=M_();(!m||m&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}const d=$h(i);if(d<=0){const m=i.ownerDocument,y=m.body,S=getComputedStyle(y),w=m.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,C=Math.abs(i.clientWidth-y.clientWidth-w);C<=Nx&&(a-=C)}else d<=Nx&&(a+=d);return{width:a,height:u,x:c,y:h}}const W5=new Set(["absolute","fixed"]);function Q5(t,e){const n=ss(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=Pi(t)?Sa(t):Oi(1),u=t.clientWidth*a.x,c=t.clientHeight*a.y,h=r*a.x,d=i*a.y;return{width:u,height:c,x:h,y:d}}function Ix(t,e,n){let i;if(e==="viewport")i=X5(t,n);else if(e==="document")i=Y5(Ui(t));else if(ci(e))i=Q5(e,n);else{const r=aD(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Xd(i)}function uD(t,e){const n=pr(t);return n===e||!ci(n)||Ma(n)?!1:fi(n).position==="fixed"||uD(n,e)}function Z5(t,e){const n=e.get(t);if(n)return n;let i=Eu(t,[],!1).filter(c=>ci(c)&&Va(c)!=="body"),r=null;const a=fi(t).position==="fixed";let u=a?pr(t):t;for(;ci(u)&&!Ma(u);){const c=fi(u),h=R_(u);!h&&c.position==="fixed"&&(r=null),(a?!h&&!r:!h&&c.position==="static"&&!!r&&W5.has(r.position)||Xu(u)&&!h&&uD(t,u))?i=i.filter(m=>m!==u):r=c,u=pr(u)}return e.set(t,i),i}function ej(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const u=[...n==="clippingAncestors"?Fh(e)?[]:Z5(e,this._c):[].concat(n),i],c=u[0],h=u.reduce((d,m)=>{const y=Ix(e,m,r);return d.top=_n(y.top,d.top),d.right=hr(y.right,d.right),d.bottom=hr(y.bottom,d.bottom),d.left=_n(y.left,d.left),d},Ix(e,c,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function tj(t){const{width:e,height:n}=sD(t);return{width:e,height:n}}function nj(t,e,n){const i=Pi(e),r=Ui(e),a=n==="fixed",u=ss(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const h=Oi(0);function d(){h.x=$h(r)}if(i||!i&&!a)if((Va(e)!=="body"||Xu(r))&&(c=Bh(e)),i){const w=ss(e,!0,a,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else r&&d();a&&!i&&r&&d();const m=r&&!i&&!a?lD(r,c):Oi(0),y=u.left+c.scrollLeft-h.x-m.x,S=u.top+c.scrollTop-h.y-m.y;return{x:y,y:S,width:u.width,height:u.height}}function Wg(t){return fi(t).position==="static"}function Dx(t,e){if(!Pi(t)||fi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ui(t)===n&&(n=n.ownerDocument.body),n}function cD(t,e){const n=wn(t);if(Fh(t))return n;if(!Pi(t)){let r=pr(t);for(;r&&!Ma(r);){if(ci(r)&&!Wg(r))return r;r=pr(r)}return n}let i=Dx(t,e);for(;i&&F5(i)&&Wg(i);)i=Dx(i,e);return i&&Ma(i)&&Wg(i)&&!R_(i)?n:i||V5(t)||n}const ij=async function(t){const e=this.getOffsetParent||cD,n=this.getDimensions,i=await n(t.floating);return{reference:nj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function oj(t){return fi(t).direction==="rtl"}const rj={convertOffsetParentRelativeRectToViewportRelativeRect:J5,getDocumentElement:Ui,getClippingRect:ej,getOffsetParent:cD,getElementRects:ij,getClientRects:K5,getDimensions:tj,getScale:Sa,isElement:ci,isRTL:oj};function fD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function sj(t,e){let n=null,i;const r=Ui(t);function a(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function u(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const d=t.getBoundingClientRect(),{left:m,top:y,width:S,height:w}=d;if(c||e(),!S||!w)return;const C=Jf(y),x=Jf(r.clientWidth-(m+S)),A=Jf(r.clientHeight-(y+w)),M=Jf(m),N={rootMargin:-C+"px "+-x+"px "+-A+"px "+-M+"px",threshold:_n(0,hr(1,h))||1};let D=!0;function L(U){const O=U[0].intersectionRatio;if(O!==h){if(!D)return u();O?u(!1,O):i=setTimeout(()=>{u(!1,1e-7)},1e3)}O===1&&!fD(d,t.getBoundingClientRect())&&u(),D=!1}try{n=new IntersectionObserver(L,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(L,N)}n.observe(t)}return u(!0),a}function aj(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,d=N_(t),m=r||a?[...d?Eu(d):[],...Eu(e)]:[];m.forEach(M=>{r&&M.addEventListener("scroll",n,{passive:!0}),a&&M.addEventListener("resize",n)});const y=d&&c?sj(d,n):null;let S=-1,w=null;u&&(w=new ResizeObserver(M=>{let[I]=M;I&&I.target===d&&w&&(w.unobserve(e),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var N;(N=w)==null||N.observe(e)})),n()}),d&&!h&&w.observe(d),w.observe(e));let C,x=h?ss(t):null;h&&A();function A(){const M=ss(t);x&&!fD(x,M)&&n(),x=M,C=requestAnimationFrame(A)}return n(),()=>{var M;m.forEach(I=>{r&&I.removeEventListener("scroll",n),a&&I.removeEventListener("resize",n)}),y?.(),(M=w)==null||M.disconnect(),w=null,h&&cancelAnimationFrame(C)}}const lj=D5,uj=O5,cj=M5,fj=P5,dj=N5,Ox=R5,hj=k5,pj=(t,e,n)=>{const i=new Map,r={platform:rj,...n},a={...r.platform,_c:i};return A5(t,e,{...r,platform:a})};var mj=typeof document<"u",gj=function(){},gd=mj?E.useLayoutEffect:gj;function Wd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Wd(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!Wd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function dD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kx(t,e){const n=dD(t);return Math.round(e*n)/n}function Qg(t){const e=E.useRef(t);return gd(()=>{e.current=t}),e}function vj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:u}={},transform:c=!0,whileElementsMounted:h,open:d}=t,[m,y]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[S,w]=E.useState(i);Wd(S,i)||w(i);const[C,x]=E.useState(null),[A,M]=E.useState(null),I=E.useCallback(ee=>{ee!==U.current&&(U.current=ee,x(ee))},[]),N=E.useCallback(ee=>{ee!==O.current&&(O.current=ee,M(ee))},[]),D=a||C,L=u||A,U=E.useRef(null),O=E.useRef(null),q=E.useRef(m),j=h!=null,Y=Qg(h),W=Qg(r),re=Qg(d),ie=E.useCallback(()=>{if(!U.current||!O.current)return;const ee={placement:e,strategy:n,middleware:S};W.current&&(ee.platform=W.current),pj(U.current,O.current,ee).then(ne=>{const ce={...ne,isPositioned:re.current!==!1};ae.current&&!Wd(q.current,ce)&&(q.current=ce,ah.flushSync(()=>{y(ce)}))})},[S,e,n,W,re]);gd(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,y(ee=>({...ee,isPositioned:!1})))},[d]);const ae=E.useRef(!1);gd(()=>(ae.current=!0,()=>{ae.current=!1}),[]),gd(()=>{if(D&&(U.current=D),L&&(O.current=L),D&&L){if(Y.current)return Y.current(D,L,ie);ie()}},[D,L,ie,Y,j]);const de=E.useMemo(()=>({reference:U,floating:O,setReference:I,setFloating:N}),[I,N]),B=E.useMemo(()=>({reference:D,floating:L}),[D,L]),Q=E.useMemo(()=>{const ee={position:n,left:0,top:0};if(!B.floating)return ee;const ne=kx(B.floating,m.x),ce=kx(B.floating,m.y);return c?{...ee,transform:"translate("+ne+"px, "+ce+"px)",...dD(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:ce}},[n,c,B.floating,m.x,m.y]);return E.useMemo(()=>({...m,update:ie,refs:de,elements:B,floatingStyles:Q}),[m,ie,de,B,Q])}const yj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Ox({element:i.current,padding:r}).fn(n):{}:i?Ox({element:i,padding:r}).fn(n):{}}}},_j=(t,e)=>({...lj(t),options:[t,e]}),Sj=(t,e)=>({...uj(t),options:[t,e]}),bj=(t,e)=>({...hj(t),options:[t,e]}),wj=(t,e)=>({...cj(t),options:[t,e]}),Ej=(t,e)=>({...fj(t),options:[t,e]}),Tj=(t,e)=>({...dj(t),options:[t,e]}),Cj=(t,e)=>({...yj(t),options:[t,e]});var xj="Arrow",hD=E.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return b.jsx(qt.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});hD.displayName=xj;var Aj=hD;function Rj(t){const[e,n]=E.useState(void 0);return dr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let u,c;if("borderBoxSize"in a){const h=a.borderBoxSize,d=Array.isArray(h)?h[0]:h;u=d.inlineSize,c=d.blockSize}else u=t.offsetWidth,c=t.offsetHeight;n({width:u,height:c})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var I_="Popper",[pD,mD]=Yu(I_),[Mj,gD]=pD(I_),vD=t=>{const{__scopePopper:e,children:n}=t,[i,r]=E.useState(null);return b.jsx(Mj,{scope:e,anchor:i,onAnchorChange:r,children:n})};vD.displayName=I_;var yD="PopperAnchor",_D=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=gD(yD,n),u=E.useRef(null),c=rn(e,u),h=E.useRef(null);return E.useEffect(()=>{const d=h.current;h.current=i?.current||u.current,d!==h.current&&a.onAnchorChange(h.current)}),i?null:b.jsx(qt.div,{...r,ref:c})});_D.displayName=yD;var D_="PopperContent",[Nj,Ij]=pD(D_),SD=E.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:S=!1,updatePositionStrategy:w="optimized",onPlaced:C,...x}=t,A=gD(D_,n),[M,I]=E.useState(null),N=rn(e,ve=>I(ve)),[D,L]=E.useState(null),U=Rj(D),O=U?.width??0,q=U?.height??0,j=i+(a!=="center"?"-"+a:""),Y=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},W=Array.isArray(d)?d:[d],re=W.length>0,ie={padding:Y,boundary:W.filter(Oj),altBoundary:re},{refs:ae,floatingStyles:de,placement:B,isPositioned:Q,middlewareData:ee}=vj({strategy:"fixed",placement:j,whileElementsMounted:(...ve)=>aj(...ve,{animationFrame:w==="always"}),elements:{reference:A.anchor},middleware:[_j({mainAxis:r+q,alignmentAxis:u}),h&&Sj({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?bj():void 0,...ie}),h&&wj({...ie}),Ej({...ie,apply:({elements:ve,rects:Je,availableWidth:Ke,availableHeight:sn})=>{const{width:Cn,height:pi}=Je.reference,jt=ve.floating.style;jt.setProperty("--radix-popper-available-width",`${Ke}px`),jt.setProperty("--radix-popper-available-height",`${sn}px`),jt.setProperty("--radix-popper-anchor-width",`${Cn}px`),jt.setProperty("--radix-popper-anchor-height",`${pi}px`)}}),D&&Cj({element:D,padding:c}),kj({arrowWidth:O,arrowHeight:q}),S&&Tj({strategy:"referenceHidden",...ie})]}),[ne,ce]=ED(B),P=ki(C);dr(()=>{Q&&P?.()},[Q,P]);const K=ee.arrow?.x,se=ee.arrow?.y,le=ee.arrow?.centerOffset!==0,[me,be]=E.useState();return dr(()=>{M&&be(window.getComputedStyle(M).zIndex)},[M]),b.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:Q?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[ee.transformOrigin?.x,ee.transformOrigin?.y].join(" "),...ee.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:b.jsx(Nj,{scope:n,placedSide:ne,onArrowChange:L,arrowX:K,arrowY:se,shouldHideArrow:le,children:b.jsx(qt.div,{"data-side":ne,"data-align":ce,...x,ref:N,style:{...x.style,animation:Q?void 0:"none"}})})})});SD.displayName=D_;var bD="PopperArrow",Dj={top:"bottom",right:"left",bottom:"top",left:"right"},wD=E.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=Ij(bD,i),u=Dj[a.placedSide];return b.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:b.jsx(Aj,{...r,ref:n,style:{...r.style,display:"block"}})})});wD.displayName=bD;function Oj(t){return t!==null}var kj=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,u=r.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,h=u?0:t.arrowHeight,[d,m]=ED(n),y={start:"0%",center:"50%",end:"100%"}[m],S=(r.arrow?.x??0)+c/2,w=(r.arrow?.y??0)+h/2;let C="",x="";return d==="bottom"?(C=u?y:`${S}px`,x=`${-h}px`):d==="top"?(C=u?y:`${S}px`,x=`${i.floating.height+h}px`):d==="right"?(C=`${-h}px`,x=u?y:`${w}px`):d==="left"&&(C=`${i.floating.width+h}px`,x=u?y:`${w}px`),{data:{x:C,y:x}}}});function ED(t){const[e,n="center"]=t.split("-");return[e,n]}var TD=vD,Pj=_D,Lj=SD,Uj=wD,Fj="Portal",CD=E.forwardRef((t,e)=>{const{container:n,...i}=t,[r,a]=E.useState(!1);dr(()=>a(!0),[]);const u=n||r&&globalThis?.document?.body;return u?Jr.createPortal(b.jsx(qt.div,{...i,ref:e}),u):null});CD.displayName=Fj;function Bj(t,e){return E.useReducer((n,i)=>e[n][i]??n,t)}var Wu=t=>{const{present:e,children:n}=t,i=$j(e),r=typeof n=="function"?n({present:i.isPresent}):E.Children.only(n),a=rn(i.ref,Gj(r));return typeof n=="function"||i.isPresent?E.cloneElement(r,{ref:a}):null};Wu.displayName="Presence";function $j(t){const[e,n]=E.useState(),i=E.useRef(null),r=E.useRef(t),a=E.useRef("none"),u=t?"mounted":"unmounted",[c,h]=Bj(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const d=Kf(i.current);a.current=c==="mounted"?d:"none"},[c]),dr(()=>{const d=i.current,m=r.current;if(m!==t){const S=a.current,w=Kf(d);t?h("MOUNT"):w==="none"||d?.display==="none"?h("UNMOUNT"):h(m&&S!==w?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,h]),dr(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,y=w=>{const x=Kf(i.current).includes(CSS.escape(w.animationName));if(w.target===e&&x&&(h("ANIMATION_END"),!r.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},S=w=>{w.target===e&&(a.current=Kf(i.current))};return e.addEventListener("animationstart",S),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",S),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:E.useCallback(d=>{i.current=d?getComputedStyle(d):null,n(d)},[])}}function Kf(t){return t?.animationName||"none"}function Gj(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Zg="rovingFocusGroup.onEntryFocus",Hj={bubbles:!1,cancelable:!0},Qu="RovingFocusGroup",[dy,xD,Vj]=YI(Qu),[zj,AD]=Yu(Qu,[Vj]),[qj,jj]=zj(Qu),RD=E.forwardRef((t,e)=>b.jsx(dy.Provider,{scope:t.__scopeRovingFocusGroup,children:b.jsx(dy.Slot,{scope:t.__scopeRovingFocusGroup,children:b.jsx(Jj,{...t,ref:e})})}));RD.displayName=Qu;var Jj=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:a,currentTabStopId:u,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:h,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...y}=t,S=E.useRef(null),w=rn(e,S),C=XI(a),[x,A]=T_({prop:u,defaultProp:c??null,onChange:h,caller:Qu}),[M,I]=E.useState(!1),N=ki(d),D=xD(n),L=E.useRef(!1),[U,O]=E.useState(0);return E.useEffect(()=>{const q=S.current;if(q)return q.addEventListener(Zg,N),()=>q.removeEventListener(Zg,N)},[N]),b.jsx(qj,{scope:n,orientation:i,dir:C,loop:r,currentTabStopId:x,onItemFocus:E.useCallback(q=>A(q),[A]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>O(q=>q+1),[]),onFocusableItemRemove:E.useCallback(()=>O(q=>q-1),[]),children:b.jsx(qt.div,{tabIndex:M||U===0?-1:0,"data-orientation":i,...y,ref:w,style:{outline:"none",...t.style},onMouseDown:Ge(t.onMouseDown,()=>{L.current=!0}),onFocus:Ge(t.onFocus,q=>{const j=!L.current;if(q.target===q.currentTarget&&j&&!M){const Y=new CustomEvent(Zg,Hj);if(q.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const W=D().filter(B=>B.focusable),re=W.find(B=>B.active),ie=W.find(B=>B.id===x),de=[re,ie,...W].filter(Boolean).map(B=>B.ref.current);ID(de,m)}}L.current=!1}),onBlur:Ge(t.onBlur,()=>I(!1))})})}),MD="RovingFocusGroupItem",ND=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:a,children:u,...c}=t,h=bu(),d=a||h,m=jj(MD,n),y=m.currentTabStopId===d,S=xD(n),{onFocusableItemAdd:w,onFocusableItemRemove:C,currentTabStopId:x}=m;return E.useEffect(()=>{if(i)return w(),()=>C()},[i,w,C]),b.jsx(dy.ItemSlot,{scope:n,id:d,focusable:i,active:r,children:b.jsx(qt.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:Ge(t.onMouseDown,A=>{i?m.onItemFocus(d):A.preventDefault()}),onFocus:Ge(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:Ge(t.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){m.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const M=Xj(A,m.orientation,m.dir);if(M!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let N=S().filter(D=>D.focusable).map(D=>D.ref.current);if(M==="last")N.reverse();else if(M==="prev"||M==="next"){M==="prev"&&N.reverse();const D=N.indexOf(A.currentTarget);N=m.loop?Wj(N,D+1):N.slice(D+1)}setTimeout(()=>ID(N))}}),children:typeof u=="function"?u({isCurrentTabStop:y,hasTabStop:x!=null}):u})})});ND.displayName=MD;var Kj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Yj(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Xj(t,e,n){const i=Yj(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return Kj[i]}function ID(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function Wj(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Qj=RD,Zj=ND,e8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},oa=new WeakMap,Yf=new WeakMap,Xf={},ev=0,DD=function(t){return t&&(t.host||DD(t.parentNode))},t8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=DD(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},n8=function(t,e,n,i){var r=t8(e,Array.isArray(t)?t:[t]);Xf[n]||(Xf[n]=new WeakMap);var a=Xf[n],u=[],c=new Set,h=new Set(r),d=function(y){!y||c.has(y)||(c.add(y),d(y.parentNode))};r.forEach(d);var m=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(S){if(c.has(S))m(S);else try{var w=S.getAttribute(i),C=w!==null&&w!=="false",x=(oa.get(S)||0)+1,A=(a.get(S)||0)+1;oa.set(S,x),a.set(S,A),u.push(S),x===1&&C&&Yf.set(S,!0),A===1&&S.setAttribute(n,"true"),C||S.setAttribute(i,"true")}catch(M){console.error("aria-hidden: cannot operate on ",S,M)}})};return m(e),c.clear(),ev++,function(){u.forEach(function(y){var S=oa.get(y)-1,w=a.get(y)-1;oa.set(y,S),a.set(y,w),S||(Yf.has(y)||y.removeAttribute(i),Yf.delete(y)),w||y.removeAttribute(n)}),ev--,ev||(oa=new WeakMap,oa=new WeakMap,Yf=new WeakMap,Xf={})}},i8=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e8(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),n8(i,r,n,"aria-hidden")):function(){return null}},wi=function(){return wi=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wi.apply(this,arguments)};function OD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function o8(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var vd="right-scroll-bar-position",yd="width-before-scroll-bar",r8="with-scroll-bars-hidden",s8="--removed-body-scroll-bar-size";function tv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function a8(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var l8=typeof window<"u"?E.useLayoutEffect:E.useEffect,Px=new WeakMap;function u8(t,e){var n=a8(null,function(i){return t.forEach(function(r){return tv(r,i)})});return l8(function(){var i=Px.get(n);if(i){var r=new Set(i),a=new Set(t),u=n.current;r.forEach(function(c){a.has(c)||tv(c,null)}),a.forEach(function(c){r.has(c)||tv(c,u)})}Px.set(n,t)},[t]),n}function c8(t){return t}function f8(t,e){e===void 0&&(e=c8);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var u=e(a,i);return n.push(u),function(){n=n.filter(function(c){return c!==u})}},assignSyncMedium:function(a){for(i=!0;n.length;){var u=n;n=[],u.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){i=!0;var u=[];if(n.length){var c=n;n=[],c.forEach(a),u=n}var h=function(){var m=u;u=[],m.forEach(a)},d=function(){return Promise.resolve().then(h)};d(),n={push:function(m){u.push(m),d()},filter:function(m){return u=u.filter(m),n}}}};return r}function d8(t){t===void 0&&(t={});var e=f8(null);return e.options=wi({async:!0,ssr:!1},t),e}var kD=function(t){var e=t.sideCar,n=OD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return E.createElement(i,wi({},n))};kD.isSideCarExport=!0;function h8(t,e){return t.useMedium(e),kD}var PD=d8(),nv=function(){},Gh=E.forwardRef(function(t,e){var n=E.useRef(null),i=E.useState({onScrollCapture:nv,onWheelCapture:nv,onTouchMoveCapture:nv}),r=i[0],a=i[1],u=t.forwardProps,c=t.children,h=t.className,d=t.removeScrollBar,m=t.enabled,y=t.shards,S=t.sideCar,w=t.noRelative,C=t.noIsolation,x=t.inert,A=t.allowPinchZoom,M=t.as,I=M===void 0?"div":M,N=t.gapMode,D=OD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=S,U=u8([n,e]),O=wi(wi({},D),r);return E.createElement(E.Fragment,null,m&&E.createElement(L,{sideCar:PD,removeScrollBar:d,shards:y,noRelative:w,noIsolation:C,inert:x,setCallbacks:a,allowPinchZoom:!!A,lockRef:n,gapMode:N}),u?E.cloneElement(E.Children.only(c),wi(wi({},O),{ref:U})):E.createElement(I,wi({},O,{className:h,ref:U}),c))});Gh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gh.classNames={fullWidth:yd,zeroRight:vd};var p8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function m8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=p8();return e&&t.setAttribute("nonce",e),t}function g8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function v8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var y8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=m8())&&(g8(e,n),v8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_8=function(){var t=y8();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},LD=function(){var t=_8(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},S8={left:0,top:0,right:0,gap:0},iv=function(t){return parseInt(t||"",10)||0},b8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[iv(n),iv(i),iv(r)]},w8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return S8;var e=b8(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},E8=LD(),ba="data-scroll-locked",T8=function(t,e,n,i){var r=t.left,a=t.top,u=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(r8,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(c,"px ").concat(i,`;
  }
  body[`).concat(ba,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vd,` {
    right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(yd,` {
    margin-right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(vd," .").concat(vd,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ba,`] {
    `).concat(s8,": ").concat(c,`px;
  }
`)},Lx=function(){var t=parseInt(document.body.getAttribute(ba)||"0",10);return isFinite(t)?t:0},C8=function(){E.useEffect(function(){return document.body.setAttribute(ba,(Lx()+1).toString()),function(){var t=Lx()-1;t<=0?document.body.removeAttribute(ba):document.body.setAttribute(ba,t.toString())}},[])},x8=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;C8();var a=E.useMemo(function(){return w8(r)},[r]);return E.createElement(E8,{styles:T8(a,!e,r,n?"":"!important")})},hy=!1;if(typeof window<"u")try{var Wf=Object.defineProperty({},"passive",{get:function(){return hy=!0,!0}});window.addEventListener("test",Wf,Wf),window.removeEventListener("test",Wf,Wf)}catch{hy=!1}var ra=hy?{passive:!1}:!1,A8=function(t){return t.tagName==="TEXTAREA"},UD=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!A8(t)&&n[e]==="visible")},R8=function(t){return UD(t,"overflowY")},M8=function(t){return UD(t,"overflowX")},Ux=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=FD(t,i);if(r){var a=BD(t,i),u=a[1],c=a[2];if(u>c)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},N8=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},I8=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},FD=function(t,e){return t==="v"?R8(e):M8(e)},BD=function(t,e){return t==="v"?N8(e):I8(e)},D8=function(t,e){return t==="h"&&e==="rtl"?-1:1},O8=function(t,e,n,i,r){var a=D8(t,window.getComputedStyle(e).direction),u=a*i,c=n.target,h=e.contains(c),d=!1,m=u>0,y=0,S=0;do{if(!c)break;var w=BD(t,c),C=w[0],x=w[1],A=w[2],M=x-A-a*C;(C||M)&&FD(t,c)&&(y+=M,S+=C);var I=c.parentNode;c=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!h&&c!==document.body||h&&(e.contains(c)||e===c));return(m&&Math.abs(y)<1||!m&&Math.abs(S)<1)&&(d=!0),d},Qf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Fx=function(t){return[t.deltaX,t.deltaY]},Bx=function(t){return t&&"current"in t?t.current:t},k8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},P8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},L8=0,sa=[];function U8(t){var e=E.useRef([]),n=E.useRef([0,0]),i=E.useRef(),r=E.useState(L8++)[0],a=E.useState(LD)[0],u=E.useRef(t);E.useEffect(function(){u.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=o8([t.lockRef.current],(t.shards||[]).map(Bx),!0).filter(Boolean);return x.forEach(function(A){return A.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=E.useCallback(function(x,A){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!u.current.allowPinchZoom;var M=Qf(x),I=n.current,N="deltaX"in x?x.deltaX:I[0]-M[0],D="deltaY"in x?x.deltaY:I[1]-M[1],L,U=x.target,O=Math.abs(N)>Math.abs(D)?"h":"v";if("touches"in x&&O==="h"&&U.type==="range")return!1;var q=window.getSelection(),j=q&&q.anchorNode,Y=j?j===U||j.contains(U):!1;if(Y)return!1;var W=Ux(O,U);if(!W)return!0;if(W?L=O:(L=O==="v"?"h":"v",W=Ux(O,U)),!W)return!1;if(!i.current&&"changedTouches"in x&&(N||D)&&(i.current=L),!L)return!0;var re=i.current||L;return O8(re,A,x,re==="h"?N:D)},[]),h=E.useCallback(function(x){var A=x;if(!(!sa.length||sa[sa.length-1]!==a)){var M="deltaY"in A?Fx(A):Qf(A),I=e.current.filter(function(L){return L.name===A.type&&(L.target===A.target||A.target===L.shadowParent)&&k8(L.delta,M)})[0];if(I&&I.should){A.cancelable&&A.preventDefault();return}if(!I){var N=(u.current.shards||[]).map(Bx).filter(Boolean).filter(function(L){return L.contains(A.target)}),D=N.length>0?c(A,N[0]):!u.current.noIsolation;D&&A.cancelable&&A.preventDefault()}}},[]),d=E.useCallback(function(x,A,M,I){var N={name:x,delta:A,target:M,should:I,shadowParent:F8(M)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(D){return D!==N})},1)},[]),m=E.useCallback(function(x){n.current=Qf(x),i.current=void 0},[]),y=E.useCallback(function(x){d(x.type,Fx(x),x.target,c(x,t.lockRef.current))},[]),S=E.useCallback(function(x){d(x.type,Qf(x),x.target,c(x,t.lockRef.current))},[]);E.useEffect(function(){return sa.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:S}),document.addEventListener("wheel",h,ra),document.addEventListener("touchmove",h,ra),document.addEventListener("touchstart",m,ra),function(){sa=sa.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,ra),document.removeEventListener("touchmove",h,ra),document.removeEventListener("touchstart",m,ra)}},[]);var w=t.removeScrollBar,C=t.inert;return E.createElement(E.Fragment,null,C?E.createElement(a,{styles:P8(r)}):null,w?E.createElement(x8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function F8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const B8=h8(PD,U8);var $D=E.forwardRef(function(t,e){return E.createElement(Gh,wi({},t,{ref:e,sideCar:B8}))});$D.classNames=Gh.classNames;var py=["Enter"," "],$8=["ArrowDown","PageUp","Home"],GD=["ArrowUp","PageDown","End"],G8=[...$8,...GD],H8={ltr:[...py,"ArrowRight"],rtl:[...py,"ArrowLeft"]},V8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zu="Menu",[Tu,z8,q8]=YI(Zu),[ds,HD]=Yu(Zu,[q8,mD,AD]),ec=mD(),VD=AD(),[zD,wr]=ds(Zu),[j8,tc]=ds(Zu),qD=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:a,modal:u=!0}=t,c=ec(e),[h,d]=E.useState(null),m=E.useRef(!1),y=ki(a),S=XI(r);return E.useEffect(()=>{const w=()=>{m.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>m.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),b.jsx(TD,{...c,children:b.jsx(zD,{scope:e,open:n,onOpenChange:y,content:h,onContentChange:d,children:b.jsx(j8,{scope:e,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:S,modal:u,children:i})})})};qD.displayName=Zu;var J8="MenuAnchor",O_=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=ec(n);return b.jsx(Pj,{...r,...i,ref:e})});O_.displayName=J8;var k_="MenuPortal",[K8,jD]=ds(k_,{forceMount:void 0}),JD=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,a=wr(k_,e);return b.jsx(K8,{scope:e,forceMount:n,children:b.jsx(Wu,{present:n||a.open,children:b.jsx(CD,{asChild:!0,container:r,children:i})})})};JD.displayName=k_;var Vn="MenuContent",[Y8,P_]=ds(Vn),KD=E.forwardRef((t,e)=>{const n=jD(Vn,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,a=wr(Vn,t.__scopeMenu),u=tc(Vn,t.__scopeMenu);return b.jsx(Tu.Provider,{scope:t.__scopeMenu,children:b.jsx(Wu,{present:i||a.open,children:b.jsx(Tu.Slot,{scope:t.__scopeMenu,children:u.modal?b.jsx(X8,{...r,ref:e}):b.jsx(W8,{...r,ref:e})})})})}),X8=E.forwardRef((t,e)=>{const n=wr(Vn,t.__scopeMenu),i=E.useRef(null),r=rn(e,i);return E.useEffect(()=>{const a=i.current;if(a)return i8(a)},[]),b.jsx(L_,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ge(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),W8=E.forwardRef((t,e)=>{const n=wr(Vn,t.__scopeMenu);return b.jsx(L_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Q8=Jd("MenuContent.ScrollLock"),L_=E.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:u,disableOutsidePointerEvents:c,onEntryFocus:h,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:w,disableOutsideScroll:C,...x}=t,A=wr(Vn,n),M=tc(Vn,n),I=ec(n),N=VD(n),D=z8(n),[L,U]=E.useState(null),O=E.useRef(null),q=rn(e,O,A.onContentChange),j=E.useRef(0),Y=E.useRef(""),W=E.useRef(0),re=E.useRef(null),ie=E.useRef("right"),ae=E.useRef(0),de=C?$D:E.Fragment,B=C?{as:Q8,allowPinchZoom:!0}:void 0,Q=ne=>{const ce=Y.current+ne,P=D().filter(ve=>!ve.disabled),K=document.activeElement,se=P.find(ve=>ve.ref.current===K)?.textValue,le=P.map(ve=>ve.textValue),me=cJ(le,ce,se),be=P.find(ve=>ve.textValue===me)?.ref.current;(function ve(Je){Y.current=Je,window.clearTimeout(j.current),Je!==""&&(j.current=window.setTimeout(()=>ve(""),1e3))})(ce),be&&setTimeout(()=>be.focus())};E.useEffect(()=>()=>window.clearTimeout(j.current),[]),s5();const ee=E.useCallback(ne=>ie.current===re.current?.side&&dJ(ne,re.current?.area),[]);return b.jsx(Y8,{scope:n,searchRef:Y,onItemEnter:E.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),onItemLeave:E.useCallback(ne=>{ee(ne)||(O.current?.focus(),U(null))},[ee]),onTriggerLeave:E.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),pointerGraceTimerRef:W,onPointerGraceIntentChange:E.useCallback(ne=>{re.current=ne},[]),children:b.jsx(de,{...B,children:b.jsx(eD,{asChild:!0,trapped:r,onMountAutoFocus:Ge(a,ne=>{ne.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:b.jsx(QI,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:w,children:b.jsx(Qj,{asChild:!0,...N,dir:M.dir,orientation:"vertical",loop:i,currentTabStopId:L,onCurrentTabStopIdChange:U,onEntryFocus:Ge(h,ne=>{M.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:b.jsx(Lj,{role:"menu","aria-orientation":"vertical","data-state":f1(A.open),"data-radix-menu-content":"",dir:M.dir,...I,...x,ref:q,style:{outline:"none",...x.style},onKeyDown:Ge(x.onKeyDown,ne=>{const P=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,K=ne.ctrlKey||ne.altKey||ne.metaKey,se=ne.key.length===1;P&&(ne.key==="Tab"&&ne.preventDefault(),!K&&se&&Q(ne.key));const le=O.current;if(ne.target!==le||!G8.includes(ne.key))return;ne.preventDefault();const be=D().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);GD.includes(ne.key)&&be.reverse(),lJ(be)}),onBlur:Ge(t.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(j.current),Y.current="")}),onPointerMove:Ge(t.onPointerMove,Cu(ne=>{const ce=ne.target,P=ae.current!==ne.clientX;if(ne.currentTarget.contains(ce)&&P){const K=ne.clientX>ae.current?"right":"left";ie.current=K,ae.current=ne.clientX}}))})})})})})})});KD.displayName=Vn;var Z8="MenuGroup",U_=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return b.jsx(qt.div,{role:"group",...i,ref:e})});U_.displayName=Z8;var eJ="MenuLabel",YD=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return b.jsx(qt.div,{...i,ref:e})});YD.displayName=eJ;var Qd="MenuItem",$x="menu.itemSelect",Hh=E.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,a=E.useRef(null),u=tc(Qd,t.__scopeMenu),c=P_(Qd,t.__scopeMenu),h=rn(e,a),d=E.useRef(!1),m=()=>{const y=a.current;if(!n&&y){const S=new CustomEvent($x,{bubbles:!0,cancelable:!0});y.addEventListener($x,w=>i?.(w),{once:!0}),KI(y,S),S.defaultPrevented?d.current=!1:u.onClose()}};return b.jsx(XD,{...r,ref:h,disabled:n,onClick:Ge(t.onClick,m),onPointerDown:y=>{t.onPointerDown?.(y),d.current=!0},onPointerUp:Ge(t.onPointerUp,y=>{d.current||y.currentTarget?.click()}),onKeyDown:Ge(t.onKeyDown,y=>{const S=c.searchRef.current!=="";n||S&&y.key===" "||py.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});Hh.displayName=Qd;var XD=E.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...a}=t,u=P_(Qd,n),c=VD(n),h=E.useRef(null),d=rn(e,h),[m,y]=E.useState(!1),[S,w]=E.useState("");return E.useEffect(()=>{const C=h.current;C&&w((C.textContent??"").trim())},[a.children]),b.jsx(Tu.ItemSlot,{scope:n,disabled:i,textValue:r??S,children:b.jsx(Zj,{asChild:!0,...c,focusable:!i,children:b.jsx(qt.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...a,ref:d,onPointerMove:Ge(t.onPointerMove,Cu(C=>{i?u.onItemLeave(C):(u.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ge(t.onPointerLeave,Cu(C=>u.onItemLeave(C))),onFocus:Ge(t.onFocus,()=>y(!0)),onBlur:Ge(t.onBlur,()=>y(!1))})})})}),tJ="MenuCheckboxItem",WD=E.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return b.jsx(n1,{scope:t.__scopeMenu,checked:n,children:b.jsx(Hh,{role:"menuitemcheckbox","aria-checked":Zd(n)?"mixed":n,...r,ref:e,"data-state":$_(n),onSelect:Ge(r.onSelect,()=>i?.(Zd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});WD.displayName=tJ;var QD="MenuRadioGroup",[nJ,iJ]=ds(QD,{value:void 0,onValueChange:()=>{}}),ZD=E.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,a=ki(i);return b.jsx(nJ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:b.jsx(U_,{...r,ref:e})})});ZD.displayName=QD;var e1="MenuRadioItem",t1=E.forwardRef((t,e)=>{const{value:n,...i}=t,r=iJ(e1,t.__scopeMenu),a=n===r.value;return b.jsx(n1,{scope:t.__scopeMenu,checked:a,children:b.jsx(Hh,{role:"menuitemradio","aria-checked":a,...i,ref:e,"data-state":$_(a),onSelect:Ge(i.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});t1.displayName=e1;var F_="MenuItemIndicator",[n1,oJ]=ds(F_,{checked:!1}),i1=E.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,a=oJ(F_,n);return b.jsx(Wu,{present:i||Zd(a.checked)||a.checked===!0,children:b.jsx(qt.span,{...r,ref:e,"data-state":$_(a.checked)})})});i1.displayName=F_;var rJ="MenuSeparator",o1=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return b.jsx(qt.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});o1.displayName=rJ;var sJ="MenuArrow",r1=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=ec(n);return b.jsx(Uj,{...r,...i,ref:e})});r1.displayName=sJ;var B_="MenuSub",[aJ,s1]=ds(B_),a1=t=>{const{__scopeMenu:e,children:n,open:i=!1,onOpenChange:r}=t,a=wr(B_,e),u=ec(e),[c,h]=E.useState(null),[d,m]=E.useState(null),y=ki(r);return E.useEffect(()=>(a.open===!1&&y(!1),()=>y(!1)),[a.open,y]),b.jsx(TD,{...u,children:b.jsx(zD,{scope:e,open:i,onOpenChange:y,content:d,onContentChange:m,children:b.jsx(aJ,{scope:e,contentId:bu(),triggerId:bu(),trigger:c,onTriggerChange:h,children:n})})})};a1.displayName=B_;var ou="MenuSubTrigger",l1=E.forwardRef((t,e)=>{const n=wr(ou,t.__scopeMenu),i=tc(ou,t.__scopeMenu),r=s1(ou,t.__scopeMenu),a=P_(ou,t.__scopeMenu),u=E.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:h}=a,d={__scopeMenu:t.__scopeMenu},m=E.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return E.useEffect(()=>m,[m]),E.useEffect(()=>{const y=c.current;return()=>{window.clearTimeout(y),h(null)}},[c,h]),b.jsx(O_,{asChild:!0,...d,children:b.jsx(XD,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":f1(n.open),...t,ref:Lh(e,r.onTriggerChange),onClick:y=>{t.onClick?.(y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ge(t.onPointerMove,Cu(y=>{a.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!n.open&&!u.current&&(a.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Ge(t.onPointerLeave,Cu(y=>{m();const S=n.content?.getBoundingClientRect();if(S){const w=n.content?.dataset.side,C=w==="right",x=C?-5:5,A=S[C?"left":"right"],M=S[C?"right":"left"];a.onPointerGraceIntentChange({area:[{x:y.clientX+x,y:y.clientY},{x:A,y:S.top},{x:M,y:S.top},{x:M,y:S.bottom},{x:A,y:S.bottom}],side:w}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(y),y.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ge(t.onKeyDown,y=>{const S=a.searchRef.current!=="";t.disabled||S&&y.key===" "||H8[i.dir].includes(y.key)&&(n.onOpenChange(!0),n.content?.focus(),y.preventDefault())})})})});l1.displayName=ou;var u1="MenuSubContent",c1=E.forwardRef((t,e)=>{const n=jD(Vn,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,a=wr(Vn,t.__scopeMenu),u=tc(Vn,t.__scopeMenu),c=s1(u1,t.__scopeMenu),h=E.useRef(null),d=rn(e,h);return b.jsx(Tu.Provider,{scope:t.__scopeMenu,children:b.jsx(Wu,{present:i||a.open,children:b.jsx(Tu.Slot,{scope:t.__scopeMenu,children:b.jsx(L_,{id:c.contentId,"aria-labelledby":c.triggerId,...r,ref:d,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{u.isUsingKeyboardRef.current&&h.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ge(t.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ge(t.onEscapeKeyDown,m=>{u.onClose(),m.preventDefault()}),onKeyDown:Ge(t.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),S=V8[u.dir].includes(m.key);y&&S&&(a.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});c1.displayName=u1;function f1(t){return t?"open":"closed"}function Zd(t){return t==="indeterminate"}function $_(t){return Zd(t)?"indeterminate":t?"checked":"unchecked"}function lJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function uJ(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function cJ(t,e,n){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let u=uJ(t,Math.max(a,0));r.length===1&&(u=u.filter(d=>d!==n));const h=u.find(d=>d.toLowerCase().startsWith(r.toLowerCase()));return h!==n?h:void 0}function fJ(t,e){const{x:n,y:i}=t;let r=!1;for(let a=0,u=e.length-1;a<e.length;u=a++){const c=e[a],h=e[u],d=c.x,m=c.y,y=h.x,S=h.y;m>i!=S>i&&n<(y-d)*(i-m)/(S-m)+d&&(r=!r)}return r}function dJ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return fJ(n,e)}function Cu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var hJ=qD,pJ=O_,mJ=JD,gJ=KD,vJ=U_,yJ=YD,_J=Hh,SJ=WD,bJ=ZD,wJ=t1,EJ=i1,TJ=o1,CJ=r1,xJ=a1,AJ=l1,RJ=c1,Vh="DropdownMenu",[MJ]=Yu(Vh,[HD]),Bt=HD(),[NJ,d1]=MJ(Vh),h1=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:a,onOpenChange:u,modal:c=!0}=t,h=Bt(e),d=E.useRef(null),[m,y]=T_({prop:r,defaultProp:a??!1,onChange:u,caller:Vh});return b.jsx(NJ,{scope:e,triggerId:bu(),triggerRef:d,contentId:bu(),open:m,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(S=>!S),[y]),modal:c,children:b.jsx(hJ,{...h,open:m,onOpenChange:y,dir:i,modal:c,children:n})})};h1.displayName=Vh;var p1="DropdownMenuTrigger",m1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,a=d1(p1,n),u=Bt(n);return b.jsx(pJ,{asChild:!0,...u,children:b.jsx(qt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Lh(e,a.triggerRef),onPointerDown:Ge(t.onPointerDown,c=>{!i&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Ge(t.onKeyDown,c=>{i||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});m1.displayName=p1;var IJ="DropdownMenuPortal",g1=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Bt(e);return b.jsx(mJ,{...i,...n})};g1.displayName=IJ;var v1="DropdownMenuContent",y1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=d1(v1,n),a=Bt(n),u=E.useRef(!1);return b.jsx(gJ,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...i,ref:e,onCloseAutoFocus:Ge(t.onCloseAutoFocus,c=>{u.current||r.triggerRef.current?.focus(),u.current=!1,c.preventDefault()}),onInteractOutside:Ge(t.onInteractOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,m=h.button===2||d;(!r.modal||m)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});y1.displayName=v1;var DJ="DropdownMenuGroup",OJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(vJ,{...r,...i,ref:e})});OJ.displayName=DJ;var kJ="DropdownMenuLabel",PJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(yJ,{...r,...i,ref:e})});PJ.displayName=kJ;var LJ="DropdownMenuItem",UJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(_J,{...r,...i,ref:e})});UJ.displayName=LJ;var FJ="DropdownMenuCheckboxItem",BJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(SJ,{...r,...i,ref:e})});BJ.displayName=FJ;var $J="DropdownMenuRadioGroup",GJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(bJ,{...r,...i,ref:e})});GJ.displayName=$J;var HJ="DropdownMenuRadioItem",VJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(wJ,{...r,...i,ref:e})});VJ.displayName=HJ;var zJ="DropdownMenuItemIndicator",qJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(EJ,{...r,...i,ref:e})});qJ.displayName=zJ;var jJ="DropdownMenuSeparator",JJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(TJ,{...r,...i,ref:e})});JJ.displayName=jJ;var KJ="DropdownMenuArrow",YJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(CJ,{...r,...i,ref:e})});YJ.displayName=KJ;var XJ=t=>{const{__scopeDropdownMenu:e,children:n,open:i,onOpenChange:r,defaultOpen:a}=t,u=Bt(e),[c,h]=T_({prop:i,defaultProp:a??!1,onChange:r,caller:"DropdownMenuSub"});return b.jsx(xJ,{...u,open:c,onOpenChange:h,children:n})},WJ="DropdownMenuSubTrigger",_1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(AJ,{...r,...i,ref:e})});_1.displayName=WJ;var QJ="DropdownMenuSubContent",S1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(RJ,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S1.displayName=QJ;var ZJ=h1,eK=m1,tK=g1,nK=y1,Gx=XJ,Hx=_1,Vx=S1;const iK=He(({scene:t})=>{if(!t.sceneJson||!t.sceneJson.data)return null;const e=t.sceneJson.data.tags,n=t.project?.artbook,i=a=>{t.addTag(a)};if(!n)return null;const r=a=>b.jsxs(ZJ,{children:[b.jsx(eK,{className:"dropdown-trigger",children:"Add Tag"}),b.jsx(tK,{children:b.jsx(nK,{className:"dropdown-content",align:"start",children:Object.entries(a).map(([u,c])=>b.jsxs(Gx,{children:[b.jsx(Hx,{className:"submenu-trigger",children:u}),b.jsx(Vx,{className:"dropdown-content",children:Object.entries(c).map(([h,d])=>b.jsxs(Gx,{children:[b.jsx(Hx,{className:"submenu-trigger",children:h}),b.jsx(Vx,{className:"dropdown-content",children:d.map(m=>b.jsx($6,{art:m,onClick:()=>i(m.path)},m.path))})]},h))})]},u))})})]});return b.jsx(Ga,{label:"Tags",headerExtra:b.jsxs("div",{className:"d-flex align-items-center gap-2",children:[r(n.data),b.jsx(Ph,{onClick:()=>{t.generateTags()},className:"btn-outline-success",label:"Generate Tags",is_loading:t.is_generating_tags}),b.jsx(tt,{onClick:()=>t.project?.artbook?.log(),label:"Log"})]}),children:e.length?b.jsx("ul",{className:"list-group list-group-flush",children:e.map((a,u)=>{const c=n.getTag(a);return c?b.jsx("li",{className:"list-group-item",children:b.jsx(B6,{art:c,scene:t})},u):null})}):b.jsx("div",{children:"No tags yet."})})}),Na=({value:t,options:e,onChange:n,label:i,className:r=""})=>b.jsxs("div",{className:"btn-group",role:"group",children:[i&&b.jsx("span",{className:"btn btn-sm btn-outline-secondary disabled",children:i}),b.jsx("div",{className:`btn btn-sm btn-outline-secondary p-0 ${r}`,children:b.jsx("select",{className:"form-select form-select-sm border-0 rounded-0",value:t,onChange:a=>n?.(a.target.value),children:e.map(a=>b.jsx("option",{value:a,children:a},a))})})]}),hs=({isLoading:t,className:e="",asButton:n=!1})=>{const i=b.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{animation:t?void 0:"none",borderColor:t?void 0:"#6c757d"}});return n?b.jsx("button",{type:"button",className:`btn btn-sm btn-outline-secondary disabled d-flex align-items-center justify-content-center ${e}`,tabIndex:-1,style:{pointerEvents:"none"},children:i}):b.jsx("span",{className:e,children:i})},nc=({buttons:t,content:e,className:n=""})=>{const[i,r]=E.useState(!1);return b.jsxs("div",{className:`w-100 ${n}`,style:{display:"inline-block"},children:[b.jsxs("div",{className:"btn-group",role:"group",children:[t,b.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>r(a=>!a),"aria-label":"Toggle settings",type:"button",style:{borderBottomRightRadius:i?0:void 0},children:""})]}),i&&b.jsx("div",{className:"w-100 border p-2",style:{borderTopLeftRadius:0,borderTopRightRadius:5,borderBottomLeftRadius:5,borderBottomRightRadius:5,backgroundColor:"#383838ff",marginTop:0},children:e})]})},oK=He(({scene:t})=>{if(!t.sceneJson)return b.jsx("div",{children:"No scene data available."});const e=async()=>{window.confirm(`Are you sure you want to delete scene "${t.name}"?`)&&await t.delete()},n=async()=>{t.createShotsFromShotsJson()};return b.jsxs("div",{children:[b.jsxs("div",{style:{marginBottom:"10px"},children:[b.jsx(tt,{onClick:e,label:"Delete Scene",className:"btn-outline-danger"}),b.jsx(tt,{onClick:()=>t.log(),label:"LOG"})]}),b.jsx(nc,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{const i=await t.generateShotsJson();t.sceneJson?.updateField("shotsjson",i)},children:" Split Into Shots "}),b.jsx(Na,{value:t.project.workflows.split_scene_into_shots.model,options:zI,onChange:i=>{t.project.updateWorkflow("split_scene_into_shots","model",i)}}),b.jsx(hs,{isLoading:t.is_generating_shotsjson,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.sceneJson,field:"split_prompt",fitHeight:!0}),b.jsx(zt,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/system_message",fitHeight:!0}),b.jsx(zt,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/prompt",fitHeight:!0})]})}),b.jsx(zt,{localJson:t.sceneJson,field:"script",fitHeight:!0}),b.jsx(zt,{localJson:t.sceneJson,field:"shotsjson",fitHeight:!0,headerExtra:b.jsx(tt,{onClick:n,label:"Create Shots"})}),b.jsx(iK,{scene:t}),b.jsx("div",{style:{height:"500px"}})]})}),G_=({label:t,value:e,onToggle:n,useIndicator:i=!1})=>i?b.jsx("div",{onClick:()=>n(!e),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:e?"green":"transparent",border:"2px solid green",cursor:"pointer"}}):b.jsx("button",{className:`btn btn-sm ${e?"btn-success":"btn-outline-secondary"}`,onClick:()=>n(!e),children:t}),ov="https://cdn.pixabay.com/photo/2021/05/09/06/07/dog-6240043_1280.jpg",rK=He(({shot:t,isSelected:e,onClick:n})=>{const[i,r]=E.useState(ov);return E.useEffect(()=>{let a=!1;return(async()=>{if(t.srcImage)try{const c=await t.srcImage.getUrlObject();!a&&c&&r(c)}catch(c){console.error("Failed to load srcImage URL:",c),a||r(ov)}else r(ov)})(),()=>{a=!0}},[t.srcImage]),b.jsxs("div",{className:"flex-shrink-0 position-relative d-flex align-items-center justify-content-center",style:{height:"100%",cursor:"pointer",borderWidth:e?2:0,borderColor:e?"#04914a":"#dee2e6",borderStyle:"solid"},onClick:()=>n(t),children:[b.jsx("img",{src:i,alt:t.name,className:"img-fluid",style:{height:"100%",width:"auto",objectFit:"contain",display:"block"}}),b.jsx("div",{className:"position-absolute text-white px-1",style:{bottom:0,left:0,backgroundColor:"rgba(0,0,0,0.5)",fontSize:"0.75rem",borderTopRightRadius:"4px"},children:t.name}),b.jsx("div",{className:"position-absolute",style:{top:2,right:2},onClick:a=>a.stopPropagation(),children:b.jsx(G_,{label:"Finished",value:!!t.shotJson?.data?.finished,useIndicator:!0,onToggle:a=>{t.shotJson&&t.shotJson.updateField("finished",a)}})})]})}),sK=({initialHeight:t=80,minHeight:e=30,children:n})=>{const[i,r]=E.useState(t),a=E.useRef(null),u=E.useRef(!1),c=y=>{u.current=!0,y.preventDefault()},h=y=>{if(!u.current||!a.current)return;const S=a.current.getBoundingClientRect(),w=y.clientY-S.top;w>e&&r(w)},d=()=>{u.current=!1};E.useEffect(()=>(window.addEventListener("mousemove",h),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",d)}),[]);const m=6;return b.jsxs("div",{ref:a,className:"position-relative",style:{height:`${i}px`},children:[b.jsx("div",{style:{height:"100%",paddingBottom:`${m}px`,boxSizing:"border-box"},children:n}),b.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:`${m}px`,cursor:"ns-resize",zIndex:10,backgroundColor:"#0d6efd",opacity:.5},onMouseDown:c})]})},zx=He(({localImage:t,...e})=>(E.useEffect(()=>{t.urlObject||t.getUrlObject()},[t]),t.urlObject?b.jsx("img",{src:t.urlObject,...e}):b.jsx("div",{children:"Loading..."}))),b1=({localImage:t,height:e=150,onClick:n,zoomOnHover:i=!1})=>{const[r,a]=E.useState(!1);return b.jsxs("div",{className:"position-relative d-inline-block",style:{height:e,cursor:"pointer"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[b.jsx(zx,{localImage:t,className:"img-fluid",style:{height:e,width:"auto",objectFit:"contain",display:"block"},onClick:n,alt:"Media"}),r&&i&&b.jsx(zx,{localImage:t,style:{position:"absolute",top:"100%",left:"100%",width:400,zIndex:5e4,borderRadius:6,boxShadow:"0 10px 30px rgba(0,0,0,0.4)"}})]})},aK=He(({localVideo:t,...e})=>(E.useEffect(()=>{t.urlObject||t.getUrlObject()},[t]),t.urlObject?b.jsx("video",{src:t.urlObject,...e}):b.jsx("div",{children:"Loading..."}))),zh=He(({localVideo:t,height:e=250,fillParent:n=!1,onClick:i,autoPlay:r=!0,loop:a=!0,muted:u=!0})=>{const c=n?"100%":`${e}px`,h=n?"100%":"auto";return b.jsx("div",{className:"position-relative d-inline-block",style:{height:c,width:h,cursor:"pointer"},children:b.jsx(aK,{localVideo:t,onClick:i,autoPlay:r,loop:a,muted:u,style:{height:c,width:h,objectFit:"contain",display:"block"}})})}),w1=({localAudio:t,height:e=250,width:n=250,onClick:i,autoPlay:r=!1,loop:a=!1,muted:u=!1})=>{const[c,h]=E.useState(null);return E.useEffect(()=>{let d=!0;return(async()=>{try{const y=await t.getUrlObject();d&&y&&h(y)}catch(y){console.error("Error loading LocalAudio",y)}})(),()=>{d=!1,t.revokeUrl()}},[t]),b.jsxs("div",{className:"position-relative d-inline-flex flex-column align-items-center justify-content-center",style:{height:e,width:n,cursor:"pointer",paddingTop:"20px",paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px"},onClick:i,children:[b.jsx("div",{className:"text-center text-truncate w-100",style:{fontSize:"0.8rem",marginBottom:"5px"},title:t.name,children:t.name}),c?b.jsx("audio",{src:c,controls:!0,autoPlay:r,loop:a,muted:u,style:{width:"100%",height:"50px"}}):b.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded w-100",style:{height:e},children:"Loading..."})]})},Li=He(({mediaItem:t,height:e=300,onSelectMedia:n,autoPlay:i=!0,children:r=[]})=>t instanceof mo?b.jsxs("div",{className:"position-relative d-inline-block",children:[b.jsx(b1,{localImage:t,height:e,onClick:()=>n?.(t)},t.path),r]}):t instanceof qu?b.jsxs("div",{className:"position-relative d-inline-block",children:[b.jsx(zh,{localVideo:t,height:e,onClick:()=>n?.(t),autoPlay:i},t.path),r]}):t instanceof Eh?b.jsxs("div",{className:"position-relative d-inline-block",children:[b.jsx(w1,{localAudio:t,height:e,onClick:()=>n?.(t)},t.path),r]}):null),E1=({media:t,previewHeight:e=300,inlinePreviewHeight:n=25,filenameVisibleChars:i=8,hoverPosition:r="bottom"})=>{if(!t)return null;const a=lK(t.name,i),u=r==="top"?{bottom:"100%",top:"auto"}:{top:"100%",bottom:"auto"};return b.jsxs("div",{className:"d-inline-block position-relative",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsx(Li,{mediaItem:t,height:n,autoPlay:!1}),b.jsx("span",{className:"text-muted",style:{cursor:"pointer"},onClick:()=>t.openInNewTab(),title:t.name,children:a})]}),b.jsx("div",{className:"position-absolute d-none shadow border rounded bg-white",style:{zIndex:1050,left:"100%",width:"max-content",...u},children:b.jsx(Li,{mediaItem:t,height:e})}),b.jsx("style",{children:`
          .d-inline-block.position-relative:hover > div.position-absolute {
            display: block !important;
          }
        `})]})};function lK(t,e=8){if(!t)return"";if(t.length<=e+3)return t;const n=t.lastIndexOf("."),i=n>=0?t.slice(n):"";return`...${(n>=0?t.slice(0,n):t).slice(-e)}${i}`}const uK={submitted:"gray",processing:"orange",succeed:"green",failed:"red"},T1=He(({task:t,show_path:e=!1})=>{const n=t.status,i=uK[n]??"gray";return b.jsx("div",{className:"card mb-0",children:b.jsxs("div",{className:"card-body d-flex align-items-center justify-content-between py-0",children:[b.jsxs("div",{className:"d-flex align-items-center gap-2",children:[b.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:i}}),e&&b.jsxs("span",{className:"text-muted",style:{cursor:"pointer"},onClick:()=>{t.navigate()},children:[t.shot.scene.name,"/",t.shot.name,"/"]}),b.jsx("span",{className:"fw-bold",children:t.id}),b.jsx("span",{className:"text-muted",children:n}),t.result&&b.jsx(E1,{media:t.result})]}),b.jsxs("div",{className:"d-flex gap-0",children:[b.jsx("span",{className:"text-muted me-2",children:t._status_log}),b.jsx(tt,{label:"Check Status",className:"btn-outline-primary btn-sm rounded-0",onClick:()=>{t.check_status()}}),b.jsx(tt,{label:"Delete",className:"btn-outline-danger btn-sm rounded-0",onClick:()=>{window.confirm(`Delete task ${t.id}?`)&&t.delete()}}),b.jsx(tt,{label:"Log",className:"btn-outline-secondary btn-sm rounded-0",onClick:()=>{t.log()}}),b.jsx(hs,{isLoading:t.is_checking_status,asButton:!0})]})]})})}),qx=He(({shot:t})=>!t.tasks||t.tasks.length===0?b.jsx("div",{className:"mt-2 text-muted",children:"No tasks"}):b.jsx(Ga,{label:`Tasks (${t.tasks.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:b.jsx("div",{className:"d-flex flex-column gap-0",children:t.tasks.map(e=>b.jsx(T1,{task:e},e.id))})})),cK=({label:t="Media Gallery",children:e,defaultCollapsed:n=!1,className:i="",headerExtra:r,editWindow:a})=>b.jsxs(Ga,{label:t,defaultCollapsed:n,className:i,headerExtra:r,children:[b.jsx("div",{className:"d-flex flex-wrap gap-2",children:e}),a&&b.jsx("div",{className:"mb-3",children:a})]}),fK=({width:t=400,height:e=200,onDrop:n,children:i})=>{const[r,a]=E.useState(!1),u=d=>{d.preventDefault(),a(!0)},c=()=>{a(!1)},h=d=>{d.preventDefault(),a(!1);const m=Array.from(d.dataTransfer.files);m.length>0&&n(m)};return b.jsx("div",{className:`drop-area ${r?"dragging":""}`,style:{width:t,height:e,border:r?"2px solid #42a5f5":"2px dashed #606060",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:r?"#294457":"#2a2a31",boxShadow:r?"0 0 10px rgba(66,165,245,0.5)":"none",transition:"all 0.2s ease-in-out"},onDragOver:u,onDragLeave:c,onDrop:h,children:i||b.jsx("span",{style:{display:"block",textAlign:"center",width:"100%",color:"#5e727e"},children:"Drag and Drop Here"})})};function lt(t,e="Assertion error"){if(!t)throw Error(e)}function my(t,e){return e.sort(t==="horizontal"?dK:hK)}function dK(t,e){const n=t.element.offsetLeft-e.element.offsetLeft;return n!==0?n:t.element.offsetWidth-e.element.offsetWidth}function hK(t,e){const n=t.element.offsetTop-e.element.offsetTop;return n!==0?n:t.element.offsetHeight-e.element.offsetHeight}function qh({group:t}){const{orientation:e,panels:n}=t;return n.reduce((i,r)=>(i+=e==="horizontal"?r.element.offsetWidth:r.element.offsetHeight,i),0)}function C1(t){const{element:e,orientation:n,panels:i,separators:r}=t,a=my(n,Array.from(e.children).filter(d=>d instanceof HTMLElement).map(d=>({element:d}))).map(({element:d})=>d),u=[];let c,h;for(const d of a){const m=i.find(y=>y.element===d);if(m){if(c){const y=c.element.getBoundingClientRect(),S=d.getBoundingClientRect();u.push({group:t,groupSize:qh({group:t}),panels:[c,m],separator:h,rect:n==="horizontal"?new DOMRect(y.right,S.top,S.left-y.right,S.height):new DOMRect(S.left,y.bottom,S.width,S.top-y.bottom)})}c=m,h=void 0}else{const y=r.find(S=>S.element===d);y?h=y:(c=void 0,h=void 0)}}return u}function pK(t,e){const n=getComputedStyle(t),i=parseFloat(n.fontSize);return e*i}function mK(t,e){const n=getComputedStyle(t.ownerDocument.body),i=parseFloat(n.fontSize);return e*i}function gK(t){return t/100*window.innerHeight}function vK(t){return t/100*window.innerWidth}function yK(t){switch(typeof t){case"number":return[t,"px"];case"string":{const e=parseFloat(t);return t.endsWith("%")?[e,"%"]:t.endsWith("px")?[e,"px"]:t.endsWith("rem")?[e,"rem"]:t.endsWith("em")?[e,"em"]:t.endsWith("vh")?[e,"vh"]:t.endsWith("vw")?[e,"vw"]:[e,"%"]}}}function Zf({groupSize:t,panelElement:e,styleProp:n}){let i;const[r,a]=yK(n);switch(a){case"%":{i=r/100*t;break}case"px":{i=r;break}case"rem":{i=mK(e,r);break}case"em":{i=pK(e,r);break}case"vh":{i=gK(r);break}case"vw":{i=vK(r);break}}return i}function ii(t){return parseFloat(t.toFixed(3))}function jx(t){const{panels:e}=t,n=qh({group:t});return e.map(i=>{const{element:r,panelConstraints:a}=i;let u=0;if(a.collapsedSize){const m=Zf({groupSize:n,panelElement:r,styleProp:a.collapsedSize});u=ii(m/n*100)}let c;if(a.defaultSize){const m=Zf({groupSize:n,panelElement:r,styleProp:a.defaultSize});c=ii(m/n*100)}let h=0;if(a.minSize){const m=Zf({groupSize:n,panelElement:r,styleProp:a.minSize});h=ii(m/n*100)}let d=100;if(a.maxSize){const m=Zf({groupSize:n,panelElement:r,styleProp:a.maxSize});d=ii(m/n*100)}return{collapsedSize:u,collapsible:a.collapsible===!0,defaultSize:c,minSize:h,maxSize:d,panelId:i.id}})}class _K{#e={};addListener(e,n){const i=this.#e[e];return i===void 0?this.#e[e]=[n]:i.includes(n)||i.push(n),()=>{this.removeListener(e,n)}}emit(e,n){const i=this.#e[e];if(i!==void 0)if(i.length===1)i[0].call(null,n);else{let r=!1,a=null;const u=Array.from(i);for(let c=0;c<u.length;c++){const h=u[c];try{h.call(null,n)}catch(d){a===null&&(r=!0,a=d)}}if(r)throw a}}removeAllListeners(){this.#e={}}removeListener(e,n){const i=this.#e[e];if(i!==void 0){const r=i.indexOf(n);r>=0&&i.splice(r,1)}}}function Vt(t,e,n=0){return Math.abs(ii(t)-ii(e))<=n}let Ln={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const Qr=new _K;function Fi(){return Ln}function zn(t){const e=typeof t=="function"?t(Ln):t;if(Ln===e)return Ln;const n=Ln;return Ln={...Ln,...e},e.cursorFlags!==void 0&&Qr.emit("cursorFlagsChange",Ln.cursorFlags),e.interactionState!==void 0&&Qr.emit("interactionStateChange",Ln.interactionState),e.mountedGroups!==void 0&&(Ln.mountedGroups.forEach((i,r)=>{i.derivedPanelConstraints.forEach(a=>{if(a.collapsible){const{layout:u}=n.mountedGroups.get(r)??{};if(u){const c=Vt(a.collapsedSize,i.layout[a.panelId]),h=Vt(a.collapsedSize,u[a.panelId]);c&&!h&&(r.inMemoryLastExpandedPanelSizes[a.panelId]=u[a.panelId])}}})}),Qr.emit("mountedGroupsChange",Ln.mountedGroups)),Ln}const SK=t=>t,rv=()=>{},x1=1,A1=2,R1=4,M1=8,Jx={coarse:10,precise:5};function bK({cursorFlags:t,groups:e,state:n}){let i=0,r=0;switch(n){case"active":case"hover":e.forEach(a=>{if(!a.disableCursor)switch(a.orientation){case"horizontal":{i++;break}case"vertical":{r++;break}}})}if(i===0&&r===0)return null;switch(n){case"active":{const a=(t&x1)!==0,u=(t&A1)!==0,c=(t&R1)!==0,h=(t&M1)!==0;if(t){if(a)return c?"se-resize":h?"ne-resize":"e-resize";if(u)return c?"sw-resize":h?"nw-resize":"w-resize";if(c)return"s-resize";if(h)return"n-resize"}break}}return i>0&&r>0?"move":i>0?"ew-resize":"ns-resize"}let sv,Si;function H_(){Si===void 0&&(Si=new CSSStyleSheet,document.adoptedStyleSheets=[Si]);const{cursorFlags:t,interactionState:e}=Fi();switch(e.state){case"active":case"hover":{const n=bK({cursorFlags:t,groups:e.hitRegions.map(r=>r.group),state:e.state}),i=`*{cursor: ${n} !important; ${e.state==="active"?"touch-action: none;":""} }`;if(sv===i)return;sv=i,n?Si.cssRules.length===0?Si.insertRule(i):Si.replaceSync(i):Si.cssRules.length===1&&Si.deleteRule(0);break}case"inactive":{sv=void 0,Si.cssRules.length===1&&Si.deleteRule(0);break}}}function wK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function xu(t,e){return Vt(t,e)?0:t>e?1:-1}function va({panelConstraints:t,size:e}){const{collapsedSize:n=0,collapsible:i,maxSize:r=100,minSize:a=0}=t;if(xu(e,a)<0)if(i){const u=(n+a)/2;xu(e,u)<0?e=n:e=a}else e=a;return e=Math.min(r,e),e=ii(e),e}function Au({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:r,trigger:a}){if(Vt(t,0))return e;const u=Object.values(e),c=Object.values(r),h=[...u],[d,m]=i;lt(d!=null,"Invalid first pivot index"),lt(m!=null,"Invalid second pivot index");let y=0;if(a==="keyboard"){{const C=t<0?m:d,x=n[C];lt(x,`Panel constraints not found for index ${C}`);const{collapsedSize:A=0,collapsible:M,minSize:I=0}=x;if(M){const N=u[C];if(lt(N!=null,`Previous layout not found for panel index ${C}`),Vt(N,A)){const D=I-N;xu(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}{const C=t<0?d:m,x=n[C];lt(x,`No panel constraints found for index ${C}`);const{collapsedSize:A=0,collapsible:M,minSize:I=0}=x;if(M){const N=u[C];if(lt(N!=null,`Previous layout not found for panel index ${C}`),Vt(N,I)){const D=N-A;xu(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}}{const C=t<0?1:-1;let x=t<0?m:d,A=0;for(;;){const I=u[x];lt(I!=null,`Previous layout not found for panel index ${x}`);const N=va({panelConstraints:n[x],size:100})-I;if(A+=N,x+=C,x<0||x>=n.length)break}const M=Math.min(Math.abs(t),Math.abs(A));t=t<0?0-M:M}{let C=t<0?d:m;for(;C>=0&&C<n.length;){const x=Math.abs(t)-Math.abs(y),A=u[C];lt(A!=null,`Previous layout not found for panel index ${C}`);const M=A-x,I=va({panelConstraints:n[C],size:M});if(!Vt(A,I)&&(y+=A-I,h[C]=I,y.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?C--:C++}}if(wK(c,h))return r;{const C=t<0?m:d,x=u[C];lt(x!=null,`Previous layout not found for panel index ${C}`);const A=x+y,M=va({panelConstraints:n[C],size:A});if(h[C]=M,!Vt(M,A)){let I=A-M,N=t<0?m:d;for(;N>=0&&N<n.length;){const D=h[N];lt(D!=null,`Previous layout not found for panel index ${N}`);const L=D+I,U=va({panelConstraints:n[N],size:L});if(Vt(D,U)||(I-=U-D,h[N]=U),Vt(I,0))break;t>0?N--:N++}}}const S=Object.values(h).reduce((C,x)=>x+C,0);if(!Vt(S,100,.1))return r;const w=Object.keys(r);return h.reduce((C,x,A)=>(C[w[A]]=x,C),{})}function ic(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(xu(t[n],e[n])!==0)return!1;return!0}function N1({event:t,hitRegions:e,initialLayoutMap:n,mountedGroups:i,pointerDownAtPoint:r}){let a=0;const u=new Map(i);e.forEach(c=>{const{group:h,groupSize:d}=c,{disableCursor:m,orientation:y,panels:S}=h;let w=0;r?y==="horizontal"?w=(t.clientX-r.x)/d*100:w=(t.clientY-r.y)/d*100:y==="horizontal"?w=t.clientX<0?-100:100:w=t.clientY<0?-100:100;const C=n.get(h),{derivedPanelConstraints:x,layout:A,separatorToPanels:M}=i.get(h)??{};if(x&&C&&A&&M){const I=Au({delta:w,initialLayout:C,panelConstraints:x,pivotIndices:c.panels.map(N=>S.indexOf(N)),prevLayout:A,trigger:"mouse-or-touch"});if(ic(I,A)){if(w!==0&&!m)switch(y){case"horizontal":{a|=w<0?x1:A1;break}case"vertical":{a|=w<0?R1:M1;break}}}else{u.set(c.group,{derivedPanelConstraints:x,layout:I,separatorToPanels:M});const N=c.group.panels.map(({id:D})=>D).join(",");c.group.inMemoryLayouts[N]=I}}}),zn({cursorFlags:a,mountedGroups:u}),H_()}function Kx(t){if(t.defaultPrevented||t.relatedTarget!==null||t.clientX===0&&t.clientY===0)return;const{interactionState:e,mountedGroups:n}=Fi();switch(e.state){case"active":e.hitRegions.forEach(i=>{t.currentTarget===i.group.element&&N1({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n})})}}function _d(t){const e=t.parentElement;lt(e,"Parent group element not found");const{mountedGroups:n}=Fi();for(const[i]of n)if(i.element===e)return i;throw Error("Could not find parent Group for separator element")}function as({layout:t,panelConstraints:e}){const n=[...Object.values(t)],i=n.reduce((u,c)=>u+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(u=>`${u}%`).join(", ")}`);if(!Vt(i,100)&&n.length>0)for(let u=0;u<e.length;u++){const c=n[u];lt(c!=null,`No layout data found for index ${u}`);const h=100/i*c;n[u]=h}let r=0;for(let u=0;u<e.length;u++){const c=n[u];lt(c!=null,`No layout data found for index ${u}`);const h=va({panelConstraints:e[u],size:c});c!=h&&(r+=c-h,n[u]=h)}if(!Vt(r,0))for(let u=0;u<e.length;u++){const c=n[u];lt(c!=null,`No layout data found for index ${u}`);const h=c+r,d=va({panelConstraints:e[u],size:h});if(c!==d&&(r-=d-c,n[u]=d,Vt(r,0)))break}const a=Object.keys(t);return n.reduce((u,c,h)=>(u[a[h]]=c,u),{})}function I1({groupId:t}){const e=()=>{const{mountedGroups:n}=Fi();for(const[i,r]of n)if(i.id===t)return{group:i,...r};throw Error(`Group ${t} not found`)};return{getLayout(){const{layout:n}=e();return n},setLayout(n){const{derivedPanelConstraints:i,group:r,layout:a,separatorToPanels:u}=e(),c=as({layout:n,panelConstraints:i});return ic(a,c)||zn(h=>({mountedGroups:new Map(h.mountedGroups).set(r,{derivedPanelConstraints:i,layout:c,separatorToPanels:u})})),c}}}function D1(t){const{mountedGroups:e}=Fi(),n=e.get(t);return lt(n,`Mounted Group ${t.id} not found`),n}function Vr(t,e){const n=_d(t),i=D1(n),r=n.separators.find(m=>m.element===t);lt(r,"Matching separator not found");const a=i.separatorToPanels.get(r);lt(a,"Matching panels not found");const u=a.map(m=>n.panels.indexOf(m)),c=I1({groupId:n.id}).getLayout(),h=Au({delta:e,initialLayout:c,panelConstraints:i.derivedPanelConstraints,pivotIndices:u,prevLayout:c,trigger:"keyboard"}),d=as({layout:h,panelConstraints:i.derivedPanelConstraints});ic(c,d)||zn(m=>({mountedGroups:new Map(m.mountedGroups).set(n,{derivedPanelConstraints:i.derivedPanelConstraints,layout:d,separatorToPanels:i.separatorToPanels})}))}function Yx(t){if(t.defaultPrevented)return;const e=t.currentTarget,n=_d(e);if(!n.disabled)switch(t.key){case"ArrowDown":{t.preventDefault(),n.orientation==="vertical"&&Vr(e,5);break}case"ArrowLeft":{t.preventDefault(),n.orientation==="horizontal"&&Vr(e,-5);break}case"ArrowRight":{t.preventDefault(),n.orientation==="horizontal"&&Vr(e,5);break}case"ArrowUp":{t.preventDefault(),n.orientation==="vertical"&&Vr(e,-5);break}case"End":{t.preventDefault(),Vr(e,100);break}case"Enter":{t.preventDefault();const i=_d(e),{derivedPanelConstraints:r,layout:a,separatorToPanels:u}=D1(i),c=i.separators.find(y=>y.element===e);lt(c,"Matching separator not found");const h=u.get(c);lt(h,"Matching panels not found");const d=h[0],m=r.find(y=>y.panelId===d.id);if(lt(m,"Panel metadata not found"),m.collapsible){const y=a[d.id],S=m.collapsedSize===y?i.inMemoryLastExpandedPanelSizes[d.id]??m.minSize:m.collapsedSize;Vr(e,S-y)}break}case"F6":{t.preventDefault();const i=_d(e).separators.map(u=>u.element),r=Array.from(i).findIndex(u=>u===t.currentTarget);lt(r!==null,"Index not found");const a=t.shiftKey?r>0?r-1:i.length-1:r+1<i.length?r+1:0;i[a].focus();break}case"Home":{t.preventDefault(),Vr(e,-100);break}}}function EK(t,e){return{x:t.x>=e.left&&t.x<=e.right?0:Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),y:t.y>=e.top&&t.y<=e.bottom?0:Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom))}}function TK(t,e,n){let i,r={x:1/0,y:1/0};for(const a of e){const u=EK(n,a.rect);switch(t){case"horizontal":{u.x<=r.x&&(i=a,r=u);break}case"vertical":{u.y<=r.y&&(i=a,r=u);break}}}return i?{distance:r,hitRegion:i}:void 0}let ed;function CK(){return ed===void 0&&(typeof matchMedia=="function"?ed=!!matchMedia("(pointer:coarse)").matches:ed=!1),ed}function O1(t,e){const n=[];return e.forEach((i,r)=>{if(r.disabled)return;const a=CK()?Jx.coarse:Jx.precise,u=C1(r),c=TK(r.orientation,u,{x:t.clientX,y:t.clientY});c&&c.distance.x<=a&&c.distance.y<=a&&n.push(c.hitRegion)}),n}function Xx(t){if(t.defaultPrevented)return;const{mountedGroups:e}=Fi(),n=O1(t,e),i=new Set,r=new Set,a=new Set,u=new Map;let c=!1;n.forEach(h=>{i.add(h.group),h.panels.forEach(m=>{r.add(m)}),h.separator&&(a.add(h.separator),c||(c=!0,h.separator.element.focus()));const d=e.get(h.group);d&&u.set(h.group,d.layout)}),zn({interactionState:{hitRegions:n,initialLayoutMap:u,pointerDownAtPoint:{x:t.clientX,y:t.clientY},state:"active"}}),n.length&&t.preventDefault()}function Wx(t){if(t.defaultPrevented)return;const{interactionState:e,mountedGroups:n}=Fi();switch(e.state){case"active":{if(t.type!=="pointerleave"&&t.buttons===0){zn(i=>i.interactionState.state==="inactive"?i:{cursorFlags:0,interactionState:{state:"inactive"}});return}N1({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:e.pointerDownAtPoint});break}default:{const i=O1(t,n);i.length===0?e.state!=="inactive"&&zn({interactionState:{state:"inactive"}}):zn({interactionState:{hitRegions:i,state:"hover"}}),H_();break}}}function Qx(t){if(t.defaultPrevented)return;t.preventDefault();const{interactionState:e}=Fi();switch(e.state){case"active":zn({cursorFlags:0,interactionState:{state:"inactive"}}),H_()}}function xK(t){let e=0,n=0;const i={};for(const a of t)if(a.defaultSize!==void 0){e++;const u=ii(a.defaultSize);n+=u,i[a.panelId]=u}else i[a.panelId]=void 0;const r=t.length-e;if(r!==0){const a=ii((100-n)/r);for(const u of t)u.defaultSize===void 0&&(i[u.panelId]=a)}return i}function AK(t,e,n){const i=n[0];if(!i)return;const r=t.panels.find(u=>u.element===e);if(!r||!r.onResize)return;const a=qh({group:t});r.onResize({asPercentage:ii(i.inlineSize/a*100),inPixels:i.inlineSize},r.id)}function RK(t){let e=!0;lt(t.separators.length===0||t.separators.length<t.panels.length,"Invalid Group configuration; too many Separator components");const n=new Set,i=new Set,r=new ResizeObserver(y=>{for(const S of y){const{borderBoxSize:w,target:C}=S;C===t.element?e&&zn(x=>{const A=x.mountedGroups.get(t);if(A){const M=jx(t),I=A.layout,N=as({layout:I,panelConstraints:M});return{mountedGroups:new Map(x.mountedGroups).set(t,{derivedPanelConstraints:M,layout:N,separatorToPanels:A.separatorToPanels})}}return x}):AK(t,C,w)}});r.observe(t.element),t.panels.forEach(y=>{lt(!n.has(y.id),`Panel ids must be unique; id "${y.id}" was used more than once`),n.add(y.id),y.onResize&&r.observe(y.element)});const a=jx(t),u=t.panels.map(({id:y})=>y).join(","),c=t.inMemoryLayouts[u]??t.defaultLayout??xK(a),h=as({layout:c,panelConstraints:a}),d=C1(t),m=zn(y=>({mountedGroups:new Map(y.mountedGroups).set(t,{derivedPanelConstraints:a,layout:h,separatorToPanels:new Map(d.filter(S=>S.separator).map(S=>[S.separator,S.panels]))})}));return t.element.addEventListener("pointerleave",Kx),t.separators.forEach(y=>{lt(!i.has(y.id),`Separator ids must be unique; id "${y.id}" was used more than once`),i.add(y.id),y.element.addEventListener("keydown",Yx)}),m.mountedGroups.size===1&&(window.addEventListener("pointerdown",Xx),window.addEventListener("pointermove",Wx),window.addEventListener("pointerup",Qx)),function(){e=!1;const y=zn(S=>{const w=new Map(S.mountedGroups);return w.delete(t),{mountedGroups:w}});t.element.removeEventListener("pointerleave",Kx),t.separators.forEach(S=>{S.element.removeEventListener("keydown",Yx)}),y.mountedGroups.size===0&&(window.removeEventListener("pointerdown",Xx),window.removeEventListener("pointermove",Wx),window.removeEventListener("pointerup",Qx)),r.disconnect()}}function V_(t){const e=E.useId();return`${t??e}`}const za=typeof window<"u"?E.useLayoutEffect:E.useEffect;function z_(t){const e=E.useRef(t);return za(()=>{e.current=t},[t]),E.useCallback(n=>e.current?.(n),[e])}function q_(...t){return z_(e=>{t.forEach(n=>{if(n)switch(typeof n){case"function":{n(e);break}case"object":{n.current=e;break}}})})}const k1="--react-resizable-panels--panel--pointer-events";function P1(t,e){const n=t.replace(/[^a-zA-Z0-9\-_]/g,""),i=e.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${i}`}const L1=E.createContext(null);function MK(t,e){const n=E.useRef({getLayout:()=>({}),setLayout:SK});E.useImperativeHandle(e,()=>n.current,[]),za(()=>{Object.assign(n.current,I1({groupId:t}))})}function U1({children:t,className:e,defaultLayout:n,disableCursor:i,disabled:r,elementRef:a,groupRef:u,id:c,onLayoutChange:h,orientation:d="horizontal",style:m,...y}){const S=E.useRef({}),w=z_(ae=>{ic(S.current,ae)||(S.current=ae,h?.(ae))}),C=V_(c),[x,A]=E.useState(!1),[M,I]=E.useState(null),[N,D]=E.useState(n??{}),[L,U]=E.useState([]),[O,q]=E.useState([]),j=E.useRef({}),Y=E.useRef({}),W=q_(I,a);MK(C,u);const re=E.useMemo(()=>({id:C,orientation:d,registerPanel:ae=>(U(de=>my(d,[...de,ae])),()=>{U(de=>de.filter(B=>B!==ae))}),registerSeparator:ae=>(q(de=>my(d,[...de,ae])),()=>{q(de=>de.filter(B=>B!==ae))})}),[C,d]);za(()=>{if(M!==null&&L.length>0){const ae={defaultLayout:n,disableCursor:!!i,disabled:!!r,element:M,id:C,inMemoryLastExpandedPanelSizes:j.current,inMemoryLayouts:Y.current,orientation:d,panels:L,separators:O},de=RK(ae),B=Fi().mountedGroups.get(ae);B&&(D(B.layout),w?.(B.layout));const Q=Qr.addListener("interactionStateChange",ne=>{switch(ne.state){case"active":case"hover":{A(ne.hitRegions.some(ce=>ce.group===ae));break}}}),ee=Qr.addListener("mountedGroupsChange",ne=>{const ce=ne.get(ae);ce&&ce.derivedPanelConstraints.length>0&&(D(ce.layout),w?.(ce.layout))});return()=>{de(),Q(),ee()}}},[n,i,r,M,C,w,d,L,O]);const ie={[k1]:x?"none":void 0};for(const ae in N){const de=P1(C,ae),B=N[ae];ie[de]=B}return b.jsx(L1.Provider,{value:re,children:b.jsx("div",{...y,"aria-orientation":d,className:e,"data-group":!0,"data-testid":C,id:C,ref:W,style:{...m,...ie,display:"flex",flexDirection:d==="horizontal"?"row":"column",flexWrap:"nowrap"},children:t})})}function j_(){const t=E.useContext(L1);return lt(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function NK({groupId:t,panelId:e}){const n=()=>{const{mountedGroups:c}=Fi();for(const[h,{derivedPanelConstraints:d,layout:m,separatorToPanels:y}]of c)if(h.id===t)return{derivedPanelConstraints:d,group:h,layout:m,separatorToPanels:y};throw Error(`Group ${t} not found`)},i=()=>{const c=n().derivedPanelConstraints.find(h=>h.panelId===e);if(c!==void 0)return c;throw Error(`Panel constraints not found for Panel ${e}`)},r=()=>{const c=n().group.panels.find(h=>h.id===e);if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},a=()=>{const c=n().layout[e];if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},u=c=>{const h=a();if(c===h)return;const{derivedPanelConstraints:d,group:m,layout:y,separatorToPanels:S}=n(),w=m.panels.findIndex(M=>M.id===e),C=w===m.panels.length-1,x=Au({delta:C?h-c:c-h,initialLayout:y,panelConstraints:d,pivotIndices:C?[w-1,w]:[w,w+1],prevLayout:y,trigger:"imperative-api"}),A=as({layout:x,panelConstraints:d});ic(y,A)||zn(M=>({mountedGroups:new Map(M.mountedGroups).set(m,{derivedPanelConstraints:d,layout:A,separatorToPanels:S})}))};return{collapse:()=>{const{collapsible:c,collapsedSize:h}=i(),d=a();c&&d!==h&&u(h)},expand:()=>{const{collapsible:c,collapsedSize:h,minSize:d}=i(),m=a();c&&m===h&&u(d)},getSize:()=>{const{group:c}=n(),h=a(),{element:d}=r(),m=c.orientation==="horizontal"?d.offsetWidth:d.offsetHeight;return{asPercentage:h,inPixels:m}},isCollapsed:()=>{const{collapsible:c,collapsedSize:h}=i(),d=a();return c&&Vt(h,d)},resize:c=>{if(a()!==c){let h;switch(typeof c){case"number":{const{group:d}=n(),m=qh({group:d});h=ii(c/m*100);break}case"string":{h=parseFloat(c);break}}u(h)}}}}function IK(t,e){const{id:n}=j_(),i=E.useRef({collapse:rv,expand:rv,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:rv});E.useImperativeHandle(e,()=>i.current,[]),za(()=>{Object.assign(i.current,NK({groupId:n,panelId:t}))})}function eh({children:t,className:e,collapsedSize:n="0%",collapsible:i=!1,defaultSize:r,elementRef:a,id:u,maxSize:c="100%",minSize:h="0%",onResize:d,panelRef:m,style:y,...S}){const w=!!u,C=V_(u),[x,A]=E.useState(null),M=q_(A,a),{id:I,registerPanel:N}=j_(),D=d!==null,L=z_(O=>{d?.(O,u)});za(()=>{if(x!==null)return N({element:x,id:C,idIsStable:w,onResize:D?L:void 0,panelConstraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:c,minSize:h}})},[n,i,r,x,D,C,w,c,h,L,N]),IK(C,m);const U=P1(I,C);return b.jsx("div",{...S,"data-panel":!0,"data-testid":C,id:C,ref:M,style:{...DK,flexBasis:0,flexGrow:`var(${U}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${k1})`},children:b.jsx("div",{className:e,style:{width:"100%",height:"100%",...y},children:t})})}const DK={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function OK({layout:t,panelConstraints:e,panelId:n,panelIndex:i}){let r,a;const u=t[n],c=e.find(h=>h.panelId===n);if(c){const h=c.maxSize,d=a=c.collapsible?c.collapsedSize:c.minSize,m=[i,i+1];a=as({layout:Au({delta:d-u,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n],r=as({layout:Au({delta:h-u,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n]}return{valueControls:n,valueMax:r,valueMin:a,valueNow:u}}function F1({children:t,className:e,elementRef:n,id:i,style:r,...a}){const u=V_(i),[c,h]=E.useState({}),[d,m]=E.useState("inactive"),[y,S]=E.useState(null),w=q_(S,n),{id:C,orientation:x,registerSeparator:A}=j_(),M=x==="horizontal"?"vertical":"horizontal";return za(()=>{if(y!==null){const I={element:y,id:u},N=A(I),D=Qr.addListener("interactionStateChange",U=>{m(U.state!=="inactive"&&U.hitRegions.some(O=>O.separator===I)?U.state:"inactive")}),L=Qr.addListener("mountedGroupsChange",U=>{U.forEach(({derivedPanelConstraints:O,layout:q,separatorToPanels:j},Y)=>{if(Y.id===C){const W=j.get(I);if(W){const re=W[0],ie=Y.panels.indexOf(re);h(OK({layout:q,panelConstraints:O,panelId:re.id,panelIndex:ie}))}}})});return()=>{D(),L(),N()}}},[y,C,u,A]),b.jsx("div",{...a,"aria-controls":c.valueControls,"aria-orientation":M,"aria-valuemax":c.valueMax,"aria-valuemin":c.valueMin,"aria-valuenow":c.valueNow,children:t,className:e,"data-separator":d,"data-testid":u,id:u,ref:w,role:"separator",style:{flexBasis:"auto",...r,flexGrow:0,flexShrink:0},tabIndex:0})}const J_=He(({shot:t})=>{const e=t.scene;if(!e.sceneJson||!e.sceneJson.data)return null;const n=e.sceneJson.data.tags,i=e.project?.artbook;return i?b.jsx(Ga,{label:"Tags",children:n.length?b.jsx("ul",{className:"list-group list-group-flush",children:n.map((r,a)=>{const u=i.getTag(r);if(!u)return null;const c=!t.getSkippedTags().includes(u.path);return b.jsxs("li",{className:"list-group-item p-0 border-0 d-flex align-items-center gap-2",children:[b.jsx(b1,{localImage:u.image,height:25,zoomOnHover:!0}),b.jsx("input",{type:"checkbox",className:"form-check-input m-0",checked:c,onChange:h=>{t.setTagSkipped(u.path,!h.target.checked)}}),b.jsx("span",{className:c?"":"text-muted",children:u.path})]},a)})}):b.jsx("div",{children:"No tags."})}):null}),th=({label:t,className:e,style:n})=>t?b.jsx("div",{className:`position-absolute bottom-0 start-50 translate-middle-x bg-dark text-white px-2 py-1 rounded small text-nowrap opacity-75 pe-none mb-1 ${e||""}`,style:n,children:t}):null,kK=He(({localImage:t,onClose:e,reference_images:n=[]})=>{const[i,r]=E.useState(null),[a,u]=E.useState(!1),[c,h]=E.useState(Ti.options.img_models.flash_image),[d,m]=E.useState(!!t.shot);E.useEffect(()=>{let S=!0;return t.getUrlObject().then(w=>{S&&r(w)}),()=>{S=!1}},[t]);const y=async()=>{u(!0);try{const S=await t.getBase64(),w=await Promise.all(n.map(I=>I.getBase64())),C=t.mediaJson?.getField("image_edit_prompt"),x=d&&t.shot?await t.shot.getImageTags():[],A=await Ti.img2img(C||"",c,[{rawBase64:S.rawBase64,mime:S.mime,description:"source_image"},...w.map((I,N)=>({rawBase64:I.rawBase64,mime:I.mime,description:`ref${N+1}`})),...x]);console.log("Image generated:",A);const M=await Ti.saveResultImage(A,t.parentFolder);M&&(await t.mediaFolder?.loadFile(M?.handle))?.mediaJson?.updateField("geninfo",{workflow:"image_edit",prompt:C,model:c,refs:n.map(N=>N.path),art_refs:d&&t.shot?t.shot.getFilteredTags().map(N=>N.path):[],source:t.path})}catch(S){console.error("GenerateImage failed:",S)}finally{u(!1)}};return b.jsx(b.Fragment,{children:b.jsxs("div",{className:"border d-flex flex-column position-relative",style:{height:"700px"},children:[e&&b.jsx("button",{type:"button",onClick:e,style:{position:"absolute",top:"8px",right:"8px",cursor:"pointer",background:"transparent",border:"none",fontSize:"1.2rem"},children:""}),b.jsxs(U1,{orientation:"horizontal",style:{height:"100%"},children:[b.jsx(eh,{defaultSize:500,minSize:10,children:b.jsx("div",{className:"d-flex align-items-center justify-content-center overflow-hidden position-relative",style:{height:"100%"},children:i?b.jsxs(b.Fragment,{children:[b.jsx("img",{src:i,alt:"Preview",className:"img-fluid",style:{objectFit:"contain",maxHeight:"100%",maxWidth:"100%"}}),b.jsx("div",{className:`\r
                    position-absolute \r
                    bottom-0\r
                    start-50\r
                    translate-middle-x\r
                    mb-2\r
                    px-2\r
                    py-1\r
                    text-white\r
                    bg-dark\r
                    bg-opacity-50\r
                    rounded\r
                    small\r
                    text-nowrap\r
                  `,style:{pointerEvents:"none"},children:"(Source Image)"})]}):b.jsx("div",{children:"Loading image"})})}),b.jsx(F1,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),b.jsx(eh,{minSize:10,children:b.jsx("div",{className:"d-flex flex-column h-100 p-3",style:{height:"100%"},children:b.jsx(fr,{tabs:{ImageEdit:b.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[n.length>0&&b.jsx("div",{className:"d-flex gap-2 mb-2 flex-wrap",children:n.map((S,w)=>S.urlObject?b.jsxs("div",{style:{position:"relative",width:100,height:100},children:[b.jsx("img",{src:S.urlObject,alt:`ref-${w}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:4,border:"1px solid #444",display:"block"}}),b.jsxs("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.6)",color:"#fff",fontSize:12,padding:"2px 6px",borderRadius:3,pointerEvents:"none",whiteSpace:"nowrap"},children:["ref",w+1]})]},w):(S.getUrlObject(),null))}),t.shot&&b.jsxs("label",{className:"d-flex align-items-center gap-2 mb-2",children:[b.jsx("input",{type:"checkbox",checked:d,onChange:S=>m(S.target.checked)}),"Use shot tags"]}),t.shot&&d&&b.jsx(J_,{shot:t.shot}),b.jsxs(b.Fragment,{children:[b.jsx(b.Fragment,{children:"Prompt : "}),b.jsx(zt,{localJson:t.mediaJson,field:"image_edit_prompt",fitHeight:!0})]}),b.jsx(Na,{value:c,options:Object.values(Ti.options.img_models),label:"Model:",onChange:S=>{h(S)}}),b.jsx(Ph,{onClick:y,label:"Generate",is_loading:a})]}),GenerateInfo:b.jsxs(b.Fragment,{children:[t.sourceImage&&b.jsx(b.Fragment,{children:b.jsx(Li,{mediaItem:t.sourceImage,height:150,onSelectMedia:()=>{(t.sourceImage?.parentFolder).setSelectedMedia(t.sourceImage)},children:b.jsx(th,{label:"SOURCE"})})}),t.generatedMedia?.length>0&&b.jsx(b.Fragment,{children:t.generatedMedia.map(S=>b.jsx(Li,{height:150,mediaItem:S,onSelectMedia:()=>{S.parentFolder.setSelectedMedia(S)},children:b.jsx(th,{label:"Child"})},S.path))}),b.jsx("div",{children:b.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(t.mediaJson?.data.geninfo,null,2)})})]})}})})})]})]})})}),PK=({localVideo:t,initialText:e="",onVideoTaskCreated:n,onClose:i})=>{const[r,a]=E.useState(e),[u,c]=E.useState(!1),[h,d]=E.useState(Ie.options.omni_video.mode.pro),[m,y]=E.useState(Ie.options.omni_video.video.keep_original_sound.yes),S=async()=>{c(!0);try{const w=await t.getWebUrl(),C=await Ie.omniVideo({prompt:r,model:Ie.options.omni_video.model.o1,mode:h,video_list:[{video_url:w,refer_type:Ie.options.omni_video.video.refer_type.base,keep_original_sound:m}]});C.geninfo={workflow:"kling_VideoEditO1",prompt:r,model:Ie.options.omni_video.model.o1,source:t.path,kling:{mode:h,keep_original_sound:m}},n?.(C)}catch(w){console.error("GenerateVideoEdit failed:",w)}finally{c(!1)}};return b.jsxs("div",{className:"border d-flex flex-column position-relative",style:{height:"700px"},children:[i&&b.jsx("button",{type:"button",onClick:i,style:{position:"absolute",top:"8px",right:"8px",cursor:"pointer",background:"transparent",border:"none",fontSize:"1.2rem"},children:""}),b.jsxs(U1,{orientation:"horizontal",style:{height:"100%"},children:[b.jsx(eh,{defaultSize:500,minSize:10,children:b.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:b.jsx(zh,{localVideo:t,fillParent:!0})})}),b.jsx(F1,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),b.jsx(eh,{minSize:10,children:b.jsx("div",{className:"d-flex flex-column h-100 p-3",style:{height:"100%"},children:b.jsx(fr,{tabs:{VideoEdit:b.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[b.jsx("textarea",{value:r,onChange:w=>a(w.target.value),placeholder:"[@Video] make the character smile",style:{flexGrow:1,resize:"none",padding:"8px",fontSize:"14px",height:"300px"}}),b.jsx(Na,{label:"Mode:",value:h,options:Object.values(Ie.options.omni_video.mode),onChange:w=>d(w)}),b.jsx(Na,{label:"Keep Original Sound:",value:m,options:Object.values(Ie.options.omni_video.video.keep_original_sound),onChange:w=>y(w)}),b.jsx(Ph,{onClick:S,label:"Generate",is_loading:u})]}),GenerateInfo:b.jsxs(b.Fragment,{children:[t.sourceImage&&b.jsx(b.Fragment,{children:b.jsx(Li,{mediaItem:t.sourceImage,height:150,onSelectMedia:()=>{(t.sourceImage?.parentFolder).setSelectedMedia(t.sourceImage)},children:b.jsx(th,{label:"SOURCE"})})}),b.jsx("div",{children:b.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(t.mediaJson?.data.geninfo,null,2)})})]})}})})})]})]})},LK=()=>b.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",backdropFilter:"grayscale(100%)",zIndex:10,transition:"filter 2.3s ease"}}),av=({children:t,showOutline:e=!1,color:n="#085db7",width:i=3,style:r,className:a,name:u="Outline"})=>b.jsx("div",{className:a,"data-name":u,style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",border:e?`${i}px solid ${n}`:"none",borderRadius:r?.borderRadius||0,boxSizing:"border-box",...r},children:t}),UK=He(({mediaItem:t,className:e,style:n})=>t.tags?.length?b.jsx("div",{className:`position-absolute bottom-0 start-50 translate-middle-x d-flex flex-wrap gap-1 justify-center mb-1 ${e||""}`,style:{maxWidth:"90%",...n},children:t.tags.map((i,r)=>b.jsx("div",{className:"bg-dark text-white px-2 py-1 rounded small text-nowrap opacity-75",style:{cursor:"pointer"},onClick:()=>t.removeTag(i),children:i},`${i}-${r}`))}):null),FK=({children:t,hoverElements:e})=>{const[n,i]=E.useState(!1);return b.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[t,n&&e&&b.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,pointerEvents:"none"},children:b.jsx("div",{style:{pointerEvents:"auto"},children:e})})]})},BK=({children:t,className:e="",style:n={}})=>b.jsx("div",{className:`position-absolute ${e}`,style:{top:5,right:5,zIndex:10,display:"flex",gap:5,...n},children:t}),ni=He(({mediaFolder:t,label:e=null,itemHeight:n=300,showEditWindow:i=!0})=>{const[r,a]=E.useState(!0);return!t||!t.handle?null:(e=e||t.name,b.jsx(b.Fragment,{children:b.jsxs(cK,{label:e,headerExtra:b.jsxs(b.Fragment,{children:[b.jsx(G_,{label:"Highlight Gen Relations",value:r,onToggle:u=>{a(u)}}),b.jsx(tt,{label:"Log",className:"btn-outline-secondary btn-sm",onClick:()=>{t.log()}}),b.jsx(tt,{label:"Import URL",className:"btn-outline-secondary btn-sm",onClick:async()=>{try{const u=await navigator.clipboard.readText();u&&(u.startsWith("http://")||u.startsWith("https://"))?(console.log("Importing URL from clipboard:",u),t.downloadFromUrl(u)):alert("Clipboard does not contain a valid URL.")}catch(u){console.error("Failed to read clipboard:",u),alert("Failed to access clipboard.")}}}),b.jsx(tt,{label:"Paste",className:"btn-outline-secondary btn-sm",onClick:()=>{t.copyFromClipboard()}})]}),editWindow:i?b.jsxs(b.Fragment,{children:[t.selectedMedia instanceof mo?b.jsx(kK,{localImage:t.selectedMedia,reference_images:t.getMediaWithTag("ref_frame"),onClose:()=>t.setSelectedMedia(null)}):null,t.selectedMedia instanceof qu?b.jsx(b.Fragment,{children:b.jsx(PK,{localVideo:t.selectedMedia,initialText:"Notes for this video",onVideoTaskCreated:async u=>{console.log("Video task created:",u);const h=t.shot.addTask(u.id,{provider:cu.KLING,workflow:u.workflow,geninfo:u.geninfo});await new Promise(d=>setTimeout(d,100)),console.log("created_task"),h.check_status()},onClose:()=>t.setSelectedMedia(null)})}):null]}):null,children:[t.mediaOrdered.map(u=>b.jsx(FK,{hoverElements:b.jsx(b.Fragment,{children:b.jsxs(BK,{children:[b.jsx(tt,{label:"Delete",className:"btn-outline-danger btn-sm",onClick:async()=>{await t.deleteMedia(u)}}),b.jsx(tt,{label:"LOG",className:"btn-outline-secondary btn-sm",onClick:async()=>{u.log()}}),b.jsx(JI,{items:t.tags,currentItem:"TAG",onPicked:c=>{u.toggleTag(c)}})]})}),children:b.jsxs(Li,{mediaItem:u,height:n,onSelectMedia:c=>{t.setSelectedMedia(c)},children:[t.selectedMedia!=null&&t.selectedMedia!==u&&t.selectedMedia?.sourceImage!==u&&!t.selectedMedia?.generatedMedia.includes(u)&&r&&b.jsx(LK,{}),b.jsx(av,{showOutline:t.selectedMedia==u,color:"#0a74ff",width:5}),b.jsx(av,{showOutline:t.selectedMedia?.sourceImage==u,color:"#ff0ab565",width:5}),b.jsx(av,{showOutline:t.selectedMedia?.generatedMedia.includes(u),color:"#fffb0a65",width:5}),b.jsx(UK,{mediaItem:u})]})},u.path)),b.jsx(fK,{width:100,height:n,onDrop:async u=>{await t.saveFiles(u)}})]})}))}),co=He(function({workflowName:e,project:n,optionName:i,label:r,values:a}){const u=n?.workflows?.[e]?.[i];return b.jsx(Na,{value:u,options:a,label:r,onChange:c=>{n.updateWorkflow(e,i,c)}})}),$K=He(({shot:t})=>{const e=t.scene.project;return b.jsx(nc,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo()},children:"Generate Video"}),b.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"model",values:Object.values(Ie.options.img2video.model)}),b.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"mode",label:"mode:",values:Object.values(Ie.options.img2video.mode)}),b.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"duration",label:"Duration:",values:Object.values(Ie.options.img2video.duration)}),b.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"sound",label:"Sound:",values:Object.values(Ie.options.img2video.sound)}),b.jsx(hs,{isLoading:t.is_submitting_video,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.shotJson,field:"video_prompt",fitHeight:!0}),b.jsx(Li,{mediaItem:t.srcImage,height:400}),b.jsx(Li,{mediaItem:t.end_frame,height:400}),b.jsx(ni,{mediaFolder:t.MediaFolder_results,label:"Source Image",itemHeight:300})]})})}),GK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(nc,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo_KlingMotionControl()},children:"Gen Motion Control Video"}),b.jsx(co,{project:e,workflowName:"kling_motion_control",optionName:"character_orientation",label:"Orient:",values:Object.values(Ie.options.motion_control.character_orientation)}),b.jsx(co,{project:e,workflowName:"kling_motion_control",optionName:"mode",label:"mode:",values:Object.values(Ie.options.motion_control.mode)}),b.jsx(co,{project:e,workflowName:"kling_motion_control",optionName:"keep_original_sound",label:"Sound:",values:Object.values(Ie.options.motion_control.keep_original_sound)}),b.jsx(hs,{isLoading:t.is_submitting_video,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.shotJson,field:"video_prompt",fitHeight:!0}),b.jsx(Li,{mediaItem:t.srcImage,height:400}),t.kling_motion_video&&b.jsx(zh,{localVideo:t.kling_motion_video,height:400}),b.jsx(ni,{mediaFolder:t.MediaFolder_results,label:"Source Image",itemHeight:300}),b.jsx(ni,{mediaFolder:t.MediaFolder_refVideo,label:"Motion Video",itemHeight:300})]})})}),HK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(nc,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.StylizeImage()},children:"Stylize Image"}),b.jsx(co,{project:e,workflowName:"stylize_image_google",optionName:"model",values:e_}),b.jsx(hs,{isLoading:t.is_generating,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(Li,{mediaItem:t.unreal_frame,height:300,children:b.jsx(th,{label:"REFERENCE"})}),b.jsx(zt,{localJson:e.projinfo,field:"workflows/stylize_image_google/prompt",fitHeight:!0}),b.jsx(zt,{localJson:t.shotJson,field:"stylize_prompt",fitHeight:!0}),b.jsx(ni,{mediaFolder:t.MediaFolder_results,label:"pick reference Frame",itemHeight:300}),b.jsx(J_,{shot:t})]})})}),VK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(nc,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{console.log("Generate Image"),t.GenerateImage()},children:"Generate Image"}),b.jsx(co,{project:e,workflowName:"generate_shot_image",optionName:"model",values:e_}),b.jsx(hs,{isLoading:t.is_generating,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.shotJson,field:"prompt",fitHeight:!0}),b.jsx(J_,{shot:t})]})})}),zK=He(({shot:t})=>b.jsxs("div",{className:"mb-3",children:[b.jsxs("div",{className:"mb-3 d-flex gap-2",children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.Kling_IdentyfiFace()},children:"Identify Face"}),b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.Kling_LypSync()},children:"Lip Sync"}),b.jsx(hs,{isLoading:t.is_submitting_video,asButton:!0})]}),t.outVideo?b.jsx(zh,{localVideo:t.outVideo,height:400}):b.jsx("div",{className:"text-left text-muted my-3",children:"No OutVideo Selected"}),t.kling_face_id_data?.face_data?.length>0&&b.jsx("div",{className:"d-flex overflow-auto py-2",children:t.kling_face_id_data.face_data.map((e,n)=>b.jsxs("div",{className:"position-relative flex-shrink-0 me-3",children:[b.jsx("img",{src:e.face_image,alt:`Face ${n+1}`,className:"rounded",style:{width:"96px",height:"96px",objectFit:"cover"}}),b.jsxs("div",{className:"position-absolute top-0 start-50 translate-middle-x text-white text-center w-100",style:{textShadow:"1px 1px 2px black",fontSize:"0.75rem",lineHeight:"1rem"},children:["ID: ",e.face_id]}),b.jsxs("div",{className:"position-absolute bottom-0 start-50 translate-middle-x text-white text-center w-100",style:{textShadow:"1px 1px 2px black",fontSize:"0.75rem",lineHeight:"1rem"},children:[Math.floor(e.start_time/1e3),"s - ",Math.floor(e.end_time/1e3),"s"]})]},e.face_id||n))}),["ID-0","ID-1","ID-2"].map(e=>{const n=t.MediaFolder_Audio?.getFirstMediaWithTag(e);return n?b.jsxs("div",{className:"mb-3 text-left",children:[b.jsx("div",{className:"mb-1 fw-bold",children:e}),b.jsx(w1,{localAudio:n,width:500,height:100,autoPlay:!1})]},e):null}),b.jsx(ni,{mediaFolder:t.MediaFolder_genVideo,label:"Generated Videos"}),b.jsx(ni,{mediaFolder:t.MediaFolder_Audio,label:"Generated Audios"})]})),qK=He(({shot:t})=>{if(!t.shotJson)return b.jsx("div",{children:"Loading shot info..."});const e=async()=>{window.confirm(`Are you sure you want to delete shot "${t.name}"?`)&&await t.delete()};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[b.jsx("strong",{children:t.name}),b.jsxs("div",{className:"d-flex gap-2",children:[b.jsx(Na,{value:t.shotJson.getField("shot_type")||"shot_type",options:["simple shot","actor shot"],onChange:n=>{t.shotJson?.updateField("shot_type",n)}}),b.jsx(G_,{label:"Finished",value:!!t.shotJson.data?.finished,onToggle:n=>{t.shotJson&&t.shotJson.updateField("finished",n)}}),b.jsx(tt,{onClick:()=>{t.log()},label:"Log Shot"}),b.jsx(tt,{onClick:e,label:"Delete Shot",className:"btn-outline-danger"})]})]}),b.jsx(fr,{tabs:{Generate_Image:b.jsx("div",{className:"card mb-2",children:b.jsxs("div",{className:"card-body",children:[b.jsx(HK,{shot:t}),b.jsx(VK,{shot:t}),b.jsx(ni,{mediaFolder:t.MediaFolder_results})]})}),Generate_VIDEO:b.jsxs(b.Fragment,{children:[b.jsx($K,{shot:t}),b.jsx(GK,{shot:t}),b.jsx(qx,{shot:t}),b.jsx(ni,{mediaFolder:t.MediaFolder_genVideo})]}),LipSync:b.jsxs(b.Fragment,{children:[b.jsx(zK,{shot:t}),b.jsx(qx,{shot:t})]}),Output:b.jsxs(b.Fragment,{children:[b.jsx(ni,{mediaFolder:t.MediaFolder_genVideo}),b.jsx(ni,{mediaFolder:t.MediaFolder_results}),b.jsx(ni,{mediaFolder:t.MediaFolder_refVideo})]})}})]})}),jK=He(({scene:t})=>{const e=async()=>{const n=prompt("Enter new shot name:");if(!n)return;const i=await t.createShot(n);i&&t.selectShot(i)};return b.jsxs("div",{className:"d-flex flex-column gap-3",children:[b.jsx(sK,{initialHeight:200,children:b.jsxs("div",{className:"d-flex overflow-auto gap-2 h-100",children:[t.shots.map(n=>b.jsx(rK,{shot:n,isSelected:t.selectedShot===n,onClick:()=>{t.selectShot(n)}},n.name)),b.jsx("div",{className:"mt-2",children:b.jsx(tt,{label:"+ Add Shot",onClick:e})})]})}),b.jsxs("div",{children:[b.jsx(Ph,{onClick:()=>{t.generateAllShotImages()},label:"Generate ALL",is_loading:t.is_generating_all_shot_images}),b.jsx(tt,{label:"+ Add Shot",onClick:e}),b.jsx(tt,{label:"Export Resolve XML",onClick:()=>{t.createResolveXML()}})]}),t.selectedShot&&b.jsx(qK,{shot:t.selectedShot})]})}),JK=He(({project:t})=>{const e=t.scenes.flatMap(n=>n.shots.flatMap(i=>i.tasks.map(r=>r)));return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"TASK VIEW"}),b.jsx(tt,{label:"Delete Failed",onClick:()=>{for(const n of e)n.status=="failed"&&n.delete()}}),b.jsx(tt,{label:"Delete Succeed",onClick:()=>{for(const n of e)n.status=="succeed"&&n.delete()}}),b.jsx(tt,{label:"Check ALL Submitted",onClick:()=>{for(const n of e)(n.status=="submitted"||n.status=="processing")&&n.check_status()}}),b.jsx(tt,{label:"Notify ",onClick:()=>{Ci.add("Project loaded",Ci.types.success,{onClick:()=>{console.log("test"),t.setScene(t.scenes[3])}})}}),b.jsx(tt,{label:"Notify 2 ",onClick:()=>{Ci.add("Project loaded V2",Ci.types.error)}}),b.jsx(Ga,{label:`Tasks (${e.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:b.jsx("div",{className:"d-flex flex-column gap-0",children:e.map(n=>b.jsx(T1,{task:n,show_path:!0},n.id))})})]})}),KK=He(({project:t})=>{if(!t)return null;switch(t.currentView.type){case"settings":return b.jsx(P6,{project:t});case"script":return b.jsx(L6,{project:t});case"artbook":return t.artbook?b.jsx(F6,{artbook:t.artbook}):b.jsx("div",{children:"No Artbook found."});case"scene":if(!t.selectedScene)return null;const e=t.selectedScene;return b.jsxs("div",{children:[b.jsx("h2",{children:e.name}),b.jsx(fr,{tabs:{Scene:b.jsx(oK,{scene:e}),Shots:b.jsx(jK,{scene:e})}})]});case"taskview":return b.jsx(JK,{project:t});default:return null}}),YK={info:"alert-primary",success:"alert-success",warning:"alert-warning",error:"alert-danger"},XK=({notification:t})=>{const e=!!t.onClick,n=()=>{t.onClick?.()},i=r=>{r.stopPropagation(),Ci.remove(t.id)};return b.jsxs("div",{className:`alert ${YK[t.type]} shadow-sm d-flex align-items-center mb-1 p-1`,role:"alert",onClick:e?n:void 0,style:{cursor:e?"pointer":"default",paddingRight:"2.5rem",userSelect:"none"},children:[b.jsxs("div",{className:"d-flex align-items-center flex-grow-1",children:[b.jsx("span",{className:"me-1",children:t.message}),t.media&&b.jsx(E1,{media:t.media,hoverPosition:"top",inlinePreviewHeight:25})]}),b.jsx("button",{type:"button",className:"btn-close ms-3","aria-label":"Close",onClick:i})]})},WK=He(()=>{const[t,e]=E.useState(!1),n=Ci.notifications.length;return b.jsxs("div",{style:{position:"fixed",bottom:16,left:16,zIndex:9999,maxWidth:700,pointerEvents:"none"},children:[!t&&n>0&&b.jsx("div",{className:"d-flex flex-column gap-0",style:{pointerEvents:"auto"},children:Ci.notifications.map(i=>b.jsx(XK,{notification:i},i.id))}),b.jsxs("div",{className:"d-flex gap-1 mt-2 justify-content-start",style:{pointerEvents:"auto"},children:[b.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>e(i=>!i),children:["Notifications (",n,")"]}),!t&&n>0&&b.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Ci.clear(),children:["Clear (",n,")"]})]})]})}),QK=He(()=>{const[t,e]=E.useState(null),n=E.useRef(new M6),i=async()=>{try{const a=await window.showDirectoryPicker(),u=new Jg(a,n.current);await u.loadFromFolder(a),e(u)}catch(a){console.error(a)}},r=async a=>{let u=await a.queryPermission({mode:"readwrite"});if(u!=="granted"&&(u=await a.requestPermission({mode:"readwrite"})),u==="granted"){const c=new Jg(a,n.current);await c.loadFromFolder(a),e(c)}};return E.useEffect(()=>{(async()=>{if(await n.current.load(),n.current.data.lastOpenedFolder){const u=n.current.data.lastOpenedFolder;let c=await u.queryPermission({mode:"readwrite"});if(c!=="granted"&&(c=await u.requestPermission({mode:"readwrite"})),c==="granted"){const h=new Jg(u,n.current);await h.loadFromFolder(u),e(h)}}})()},[]),b.jsxs("div",{style:{minHeight:"100vh"},children:[b.jsx(D6,{onOpenFolder:i,recentFolders:n.current.data.recentFolders,onOpenRecent:r,project:t}),b.jsxs("div",{className:"d-flex",style:{height:"calc(100vh - 56px)",overflow:"hidden"},children:[b.jsx(k6,{project:t}),b.jsx("div",{className:"flex-grow-1 d-flex flex-column overflow-hidden",children:b.jsx("div",{className:"flex-grow-1 overflow-auto p-3",children:b.jsx(KK,{project:t})})})]}),b.jsx(WK,{})]})}),ZK=E.createContext(void 0),eY=({children:t})=>{const[e,n]=E.useState(null);return b.jsx(ZK.Provider,{value:{contentArea:e,setContentArea:n},children:t})};hP.createRoot(document.getElementById("root")).render(b.jsx(E.StrictMode,{children:b.jsx(eY,{children:b.jsx(QK,{})})}));
