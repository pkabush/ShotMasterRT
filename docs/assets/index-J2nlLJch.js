function XP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Eu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eg={exports:{}},Pl={};var Bw;function WP(){if(Bw)return Pl;Bw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:u,ref:r!==void 0?r:null,props:a}}return Pl.Fragment=e,Pl.jsx=n,Pl.jsxs=n,Pl}var Fw;function QP(){return Fw||(Fw=1,eg.exports=WP()),eg.exports}var w=QP(),tg={exports:{}},Ae={};var $w;function ZP(){if($w)return Ae;$w=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function M(L,K,se){this.props=L,this.context=K,this.refs=A,this.updater=se||C}M.prototype.isReactComponent={},M.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function I(){}I.prototype=M.prototype;function N(L,K,se){this.props=L,this.context=K,this.refs=A,this.updater=se||C}var D=N.prototype=new I;D.constructor=N,x(D,M.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function J(L,K,se){var le=se.ref;return{$$typeof:t,type:L,key:K,ref:le!==void 0?le:null,props:se}}function Y(L,K){return J(L.type,K,L.props)}function W(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function re(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return K[se]})}var ie=/\/+/g;function ae(L,K){return typeof L=="object"&&L!==null&&L.key!=null?re(""+L.key):K.toString(36)}function de(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(U,U):(L.status="pending",L.then(function(K){L.status==="pending"&&(L.status="fulfilled",L.value=K)},function(K){L.status==="pending"&&(L.status="rejected",L.reason=K)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,K,se,le,me){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var ve=!1;if(L===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(L.$$typeof){case t:case e:ve=!0;break;case m:return ve=L._init,F(ve(L._payload),K,se,le,me)}}if(ve)return me=me(L),ve=le===""?"."+ae(L,0):le,k(me)?(se="",ve!=null&&(se=ve.replace(ie,"$&/")+"/"),F(me,K,se,"",function(rn){return rn})):me!=null&&(W(me)&&(me=Y(me,se+(me.key==null||L&&L.key===me.key?"":(""+me.key).replace(ie,"$&/")+"/")+ve)),K.push(me)),1;ve=0;var qe=le===""?".":le+":";if(k(L))for(var Je=0;Je<L.length;Je++)le=L[Je],be=qe+ae(le,Je),ve+=F(le,K,se,be,me);else if(Je=b(L),typeof Je=="function")for(L=Je.call(L),Je=0;!(le=L.next()).done;)le=le.value,be=qe+ae(le,Je++),ve+=F(le,K,se,be,me);else if(be==="object"){if(typeof L.then=="function")return F(de(L),K,se,le,me);throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ve}function Q(L,K,se){if(L==null)return L;var le=[],me=0;return F(L,le,"","",function(be){return K.call(se,be,me++)}),le}function ee(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var ne=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ce={map:Q,forEach:function(L,K,se){Q(L,function(){K.apply(this,arguments)},se)},count:function(L){var K=0;return Q(L,function(){K++}),K},toArray:function(L){return Q(L,function(K){return K})||[]},only:function(L){if(!W(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ae.Activity=y,Ae.Children=ce,Ae.Component=M,Ae.Fragment=n,Ae.Profiler=r,Ae.PureComponent=N,Ae.StrictMode=i,Ae.Suspense=h,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(L){return O.H.useMemoCache(L)}},Ae.cache=function(L){return function(){return L.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(L,K,se){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var le=x({},L.props),me=L.key;if(K!=null)for(be in K.key!==void 0&&(me=""+K.key),K)!q.call(K,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&K.ref===void 0||(le[be]=K[be]);var be=arguments.length-2;if(be===1)le.children=se;else if(1<be){for(var ve=Array(be),qe=0;qe<be;qe++)ve[qe]=arguments[qe+2];le.children=ve}return J(L.type,me,le)},Ae.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Ae.createElement=function(L,K,se){var le,me={},be=null;if(K!=null)for(le in K.key!==void 0&&(be=""+K.key),K)q.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=K[le]);var ve=arguments.length-2;if(ve===1)me.children=se;else if(1<ve){for(var qe=Array(ve),Je=0;Je<ve;Je++)qe[Je]=arguments[Je+2];me.children=qe}if(L&&L.defaultProps)for(le in ve=L.defaultProps,ve)me[le]===void 0&&(me[le]=ve[le]);return J(L,be,me)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(L){return{$$typeof:c,render:L}},Ae.isValidElement=W,Ae.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:ee}},Ae.memo=function(L,K){return{$$typeof:d,type:L,compare:K===void 0?null:K}},Ae.startTransition=function(L){var K=O.T,se={};O.T=se;try{var le=L(),me=O.S;me!==null&&me(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(U,ne)}catch(be){ne(be)}finally{K!==null&&se.types!==null&&(K.types=se.types),O.T=K}},Ae.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ae.use=function(L){return O.H.use(L)},Ae.useActionState=function(L,K,se){return O.H.useActionState(L,K,se)},Ae.useCallback=function(L,K){return O.H.useCallback(L,K)},Ae.useContext=function(L){return O.H.useContext(L)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(L,K){return O.H.useDeferredValue(L,K)},Ae.useEffect=function(L,K){return O.H.useEffect(L,K)},Ae.useEffectEvent=function(L){return O.H.useEffectEvent(L)},Ae.useId=function(){return O.H.useId()},Ae.useImperativeHandle=function(L,K,se){return O.H.useImperativeHandle(L,K,se)},Ae.useInsertionEffect=function(L,K){return O.H.useInsertionEffect(L,K)},Ae.useLayoutEffect=function(L,K){return O.H.useLayoutEffect(L,K)},Ae.useMemo=function(L,K){return O.H.useMemo(L,K)},Ae.useOptimistic=function(L,K){return O.H.useOptimistic(L,K)},Ae.useReducer=function(L,K,se){return O.H.useReducer(L,K,se)},Ae.useRef=function(L){return O.H.useRef(L)},Ae.useState=function(L){return O.H.useState(L)},Ae.useSyncExternalStore=function(L,K,se){return O.H.useSyncExternalStore(L,K,se)},Ae.useTransition=function(){return O.H.useTransition()},Ae.version="19.2.1",Ae}var Hw;function Wd(){return Hw||(Hw=1,tg.exports=ZP()),tg.exports}var E=Wd();const nt=Eu(E),qx=XP({__proto__:null,default:nt},[E]);var ng={exports:{}},kl={},ig={exports:{}},og={};var Gw;function ek(){return Gw||(Gw=1,(function(t){function e(F,Q){var ee=F.length;F.push(Q);e:for(;0<ee;){var ne=ee-1>>>1,ce=F[ne];if(0<r(ce,Q))F[ne]=Q,F[ee]=ce,ee=ne;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var Q=F[0],ee=F.pop();if(ee!==Q){F[0]=ee;e:for(var ne=0,ce=F.length,L=ce>>>1;ne<L;){var K=2*(ne+1)-1,se=F[K],le=K+1,me=F[le];if(0>r(se,ee))le<ce&&0>r(me,se)?(F[ne]=me,F[le]=ee,ne=le):(F[ne]=se,F[K]=ee,ne=K);else if(le<ce&&0>r(me,ee))F[ne]=me,F[le]=ee,ne=le;else break e}}return Q}function r(F,Q){var ee=F.sortIndex-Q.sortIndex;return ee!==0?ee:F.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var h=[],d=[],m=1,y=null,S=3,b=!1,C=!1,x=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var Q=n(d);Q!==null;){if(Q.callback===null)i(d);else if(Q.startTime<=F)i(d),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=n(d)}}function k(F){if(x=!1,D(F),!C)if(n(h)!==null)C=!0,U||(U=!0,re());else{var Q=n(d);Q!==null&&de(k,Q.startTime-F)}}var U=!1,O=-1,q=5,J=-1;function Y(){return A?!0:!(t.unstable_now()-J<q)}function W(){if(A=!1,U){var F=t.unstable_now();J=F;var Q=!0;try{e:{C=!1,x&&(x=!1,I(O),O=-1),b=!0;var ee=S;try{t:{for(D(F),y=n(h);y!==null&&!(y.expirationTime>F&&Y());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,S=y.priorityLevel;var ce=ne(y.expirationTime<=F);if(F=t.unstable_now(),typeof ce=="function"){y.callback=ce,D(F),Q=!0;break t}y===n(h)&&i(h),D(F)}else i(h);y=n(h)}if(y!==null)Q=!0;else{var L=n(d);L!==null&&de(k,L.startTime-F),Q=!1}}break e}finally{y=null,S=ee,b=!1}Q=void 0}}finally{Q?re():U=!1}}}var re;if(typeof N=="function")re=function(){N(W)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=W,re=function(){ae.postMessage(null)}}else re=function(){M(W,0)};function de(F,Q){O=M(function(){F(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(F){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ee=S;S=Q;try{return F()}finally{S=ee}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=S;S=F;try{return Q()}finally{S=ee}},t.unstable_scheduleCallback=function(F,Q,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,F){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,F={id:m++,callback:Q,priorityLevel:F,startTime:ee,expirationTime:ce,sortIndex:-1},ee>ne?(F.sortIndex=ee,e(d,F),n(h)===null&&F===n(d)&&(x?(I(O),O=-1):x=!0,de(k,ee-ne))):(F.sortIndex=ce,e(h,F),C||b||(C=!0,U||(U=!0,re()))),F},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(F){var Q=S;return function(){var ee=S;S=Q;try{return F.apply(this,arguments)}finally{S=ee}}}})(og)),og}var Vw;function tk(){return Vw||(Vw=1,ig.exports=ek()),ig.exports}var rg={exports:{}},kt={};var zw;function nk(){if(zw)return kt;zw=1;var t=Wd();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:d,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,kt.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,m)},kt.flushSync=function(h){var d=u.T,m=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=d,i.p=m,i.d.f()}},kt.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},kt.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},kt.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),S=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:b}):m==="script"&&i.d.X(h,{crossOrigin:y,integrity:S,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kt.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},kt.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);i.d.L(h,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kt.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},kt.requestFormReset=function(h){i.d.r(h)},kt.unstable_batchedUpdates=function(h,d){return h(d)},kt.useFormState=function(h,d,m){return u.H.useFormState(h,d,m)},kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},kt.version="19.2.1",kt}var qw;function Jx(){if(qw)return rg.exports;qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rg.exports=nk(),rg.exports}var Jw;function ik(){if(Jw)return kl;Jw=1;var t=tk(),e=Wd(),n=Jx();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function c(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function d(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,f=s;;){var v=l.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===l)return h(v),o;if(_===f)return h(v),s;_=_.sibling}throw Error(i(188))}if(l.return!==f.return)l=v,f=_;else{for(var T=!1,R=v.child;R;){if(R===l){T=!0,l=v,f=_;break}if(R===f){T=!0,f=v,l=_;break}R=R.sibling}if(!T){for(R=_.child;R;){if(R===l){T=!0,l=_,f=v;break}if(R===f){T=!0,f=_,l=v;break}R=R.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==f)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function m(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=m(o),s!==null)return s;o=o.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var ie=Symbol.for("react.client.reference");function ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ie?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case U:return"SuspenseList";case J:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case C:return"Portal";case N:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case D:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return s=o.displayName||null,s!==null?s:ae(o.type)||"Memo";case q:s=o._payload,o=o._init;try{return ae(o(s))}catch{}}return null}var de=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ne=[],ce=-1;function L(o){return{current:o}}function K(o){0>ce||(o.current=ne[ce],ne[ce]=null,ce--)}function se(o,s){ce++,ne[ce]=o.current,o.current=s}var le=L(null),me=L(null),be=L(null),ve=L(null);function qe(o,s){switch(se(be,s),se(me,o),se(le,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?aw(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=aw(s),o=lw(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}K(le),se(le,o)}function Je(){K(le),K(me),K(be)}function rn(o){o.memoizedState!==null&&se(ve,o);var s=le.current,l=lw(s,o.type);s!==l&&(se(me,o),se(le,l))}function Tn(o){me.current===o&&(K(le),K(me)),ve.current===o&&(K(ve),Nl._currentValue=ee)}var gi,qt;function Jt(o){if(gi===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);gi=s&&s[1]||"",qt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gi+o+qt}var et=!1;function Fi(o,s){if(!o||et)return"";et=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(j){var z=j}Reflect.construct(o,[],te)}else{try{te.call()}catch(j){z=j}o.call(te.prototype)}}else{try{throw Error()}catch(j){z=j}(te=o())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(j){if(j&&z&&typeof j.stack=="string")return[j.stack,z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),T=_[0],R=_[1];if(T&&R){var P=T.split(`
`),G=R.split(`
`);for(v=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;v<G.length&&!G[v].includes("DetermineComponentFrameRoot");)v++;if(f===P.length||v===G.length)for(f=P.length-1,v=G.length-1;1<=f&&0<=v&&P[f]!==G[v];)v--;for(;1<=f&&0<=v;f--,v--)if(P[f]!==G[v]){if(f!==1||v!==1)do if(f--,v--,0>v||P[f]!==G[v]){var X=`
`+P[f].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=f&&0<=v);break}}}finally{et=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?Jt(l):""}function Co(o,s){switch(o.tag){case 26:case 27:case 5:return Jt(o.type);case 16:return Jt("Lazy");case 13:return o.child!==s&&s!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Fi(o.type,!1);case 11:return Fi(o.type.render,!1);case 1:return Fi(o.type,!0);case 31:return Jt("Activity");default:return""}}function Zu(o){try{var s="",l=null;do s+=Co(o,l),l=o,o=o.return;while(o);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Fa=Object.prototype.hasOwnProperty,Xn=t.unstable_scheduleCallback,xo=t.unstable_cancelCallback,ec=t.unstable_shouldYield,tc=t.unstable_requestPaint,xt=t.unstable_now,nc=t.unstable_getCurrentPriorityLevel,$a=t.unstable_ImmediatePriority,Ha=t.unstable_UserBlockingPriority,vr=t.unstable_NormalPriority,I1=t.unstable_LowPriority,H_=t.unstable_IdlePriority,D1=t.log,O1=t.unstable_setDisableYieldValue,Ga=null,sn=null;function Ao(o){if(typeof D1=="function"&&O1(o),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Ga,o)}catch{}}var an=Math.clz32?Math.clz32:L1,P1=Math.log,k1=Math.LN2;function L1(o){return o>>>=0,o===0?32:31-(P1(o)/k1|0)|0}var ic=256,oc=262144,rc=4194304;function yr(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function sc(o,s,l){var f=o.pendingLanes;if(f===0)return 0;var v=0,_=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var R=f&134217727;return R!==0?(f=R&~_,f!==0?v=yr(f):(T&=R,T!==0?v=yr(T):l||(l=R&~o,l!==0&&(v=yr(l))))):(R=f&~_,R!==0?v=yr(R):T!==0?v=yr(T):l||(l=f&~o,l!==0&&(v=yr(l)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:v}function Va(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function U1(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G_(){var o=rc;return rc<<=1,(rc&62914560)===0&&(rc=4194304),o}function Gh(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function za(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function B1(o,s,l,f,v,_){var T=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var R=o.entanglements,P=o.expirationTimes,G=o.hiddenUpdates;for(l=T&~l;0<l;){var X=31-an(l),te=1<<X;R[X]=0,P[X]=-1;var z=G[X];if(z!==null)for(G[X]=null,X=0;X<z.length;X++){var j=z[X];j!==null&&(j.lane&=-536870913)}l&=~te}f!==0&&V_(o,f,0),_!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=_&~(T&~s))}function V_(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var f=31-an(s);o.entangledLanes|=s,o.entanglements[f]=o.entanglements[f]|1073741824|l&261930}function z_(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var f=31-an(l),v=1<<f;v&s|o[f]&s&&(o[f]|=s),l&=~v}}function q_(o,s){var l=s&-s;return l=(l&42)!==0?1:Vh(l),(l&(o.suspendedLanes|s))!==0?0:l}function Vh(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function zh(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function J_(){var o=Q.p;return o!==0?o:(o=window.event,o===void 0?32:Iw(o.type))}function j_(o,s){var l=Q.p;try{return Q.p=o,s()}finally{Q.p=l}}var Ro=Math.random().toString(36).slice(2),At="__reactFiber$"+Ro,jt="__reactProps$"+Ro,us="__reactContainer$"+Ro,qh="__reactEvents$"+Ro,F1="__reactListeners$"+Ro,$1="__reactHandles$"+Ro,K_="__reactResources$"+Ro,qa="__reactMarker$"+Ro;function Jh(o){delete o[At],delete o[jt],delete o[qh],delete o[F1],delete o[$1]}function cs(o){var s=o[At];if(s)return s;for(var l=o.parentNode;l;){if(s=l[us]||l[At]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=mw(o);o!==null;){if(l=o[At])return l;o=mw(o)}return s}o=l,l=o.parentNode}return null}function fs(o){if(o=o[At]||o[us]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function Ja(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function ds(o){var s=o[K_];return s||(s=o[K_]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(o){o[qa]=!0}var Y_=new Set,X_={};function _r(o,s){hs(o,s),hs(o+"Capture",s)}function hs(o,s){for(X_[o]=s,o=0;o<s.length;o++)Y_.add(s[o])}var H1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),W_={},Q_={};function G1(o){return Fa.call(Q_,o)?!0:Fa.call(W_,o)?!1:H1.test(o)?Q_[o]=!0:(W_[o]=!0,!1)}function ac(o,s,l){if(G1(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function lc(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function $i(o,s,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+f)}}function Cn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Z_(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function V1(o,s,l){var f=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(T){l=""+T,_.call(this,T)}}),Object.defineProperty(o,s,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function jh(o){if(!o._valueTracker){var s=Z_(o)?"checked":"value";o._valueTracker=V1(o,s,""+o[s])}}function e0(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),f="";return o&&(f=Z_(o)?o.checked?"true":"false":o.value),o=f,o!==l?(s.setValue(o),!0):!1}function uc(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var z1=/[\n"\\]/g;function xn(o){return o.replace(z1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Kh(o,s,l,f,v,_,T,R){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),s!=null?T==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Cn(s)):o.value!==""+Cn(s)&&(o.value=""+Cn(s)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),s!=null?Yh(o,T,Cn(s)):l!=null?Yh(o,T,Cn(l)):f!=null&&o.removeAttribute("value"),v==null&&_!=null&&(o.defaultChecked=!!_),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+Cn(R):o.removeAttribute("name")}function t0(o,s,l,f,v,_,T,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){jh(o);return}l=l!=null?""+Cn(l):"",s=s!=null?""+Cn(s):l,R||s===o.value||(o.value=s),o.defaultValue=s}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=R?o.checked:!!f,o.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T),jh(o)}function Yh(o,s,l){s==="number"&&uc(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function ps(o,s,l,f){if(o=o.options,s){s={};for(var v=0;v<l.length;v++)s["$"+l[v]]=!0;for(l=0;l<o.length;l++)v=s.hasOwnProperty("$"+o[l].value),o[l].selected!==v&&(o[l].selected=v),v&&f&&(o[l].defaultSelected=!0)}else{for(l=""+Cn(l),s=null,v=0;v<o.length;v++){if(o[v].value===l){o[v].selected=!0,f&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function n0(o,s,l){if(s!=null&&(s=""+Cn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Cn(l):""}function i0(o,s,l,f){if(s==null){if(f!=null){if(l!=null)throw Error(i(92));if(de(f)){if(1<f.length)throw Error(i(93));f=f[0]}l=f}l==null&&(l=""),s=l}l=Cn(s),o.defaultValue=l,f=o.textContent,f===l&&f!==""&&f!==null&&(o.value=f),jh(o)}function ms(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var q1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function o0(o,s,l){var f=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":f?o.setProperty(s,l):typeof l!="number"||l===0||q1.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function r0(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var v in s)f=s[v],s.hasOwnProperty(v)&&l[v]!==f&&o0(o,v,f)}else for(var _ in s)s.hasOwnProperty(_)&&o0(o,_,s[_])}function Xh(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(o){return j1.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Hi(){}var Wh=null;function Qh(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var gs=null,vs=null;function s0(o){var s=fs(o);if(s&&(o=s.stateNode)){var l=o[jt]||null;e:switch(o=s.stateNode,s.type){case"input":if(Kh(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+xn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var f=l[s];if(f!==o&&f.form===o.form){var v=f[jt]||null;if(!v)throw Error(i(90));Kh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<l.length;s++)f=l[s],f.form===o.form&&e0(f)}break e;case"textarea":n0(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&ps(o,!!l.multiple,s,!1)}}}var Zh=!1;function a0(o,s,l){if(Zh)return o(s,l);Zh=!0;try{var f=o(s);return f}finally{if(Zh=!1,(gs!==null||vs!==null)&&(Wc(),gs&&(s=gs,o=vs,vs=gs=null,s0(s),o)))for(s=0;s<o.length;s++)s0(o[s])}}function ja(o,s){var l=o.stateNode;if(l===null)return null;var f=l[jt]||null;if(f===null)return null;l=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ep=!1;if(Gi)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){ep=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{ep=!1}var Mo=null,tp=null,fc=null;function l0(){if(fc)return fc;var o,s=tp,l=s.length,f,v="value"in Mo?Mo.value:Mo.textContent,_=v.length;for(o=0;o<l&&s[o]===v[o];o++);var T=l-o;for(f=1;f<=T&&s[l-f]===v[_-f];f++);return fc=v.slice(o,1<f?1-f:void 0)}function dc(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function hc(){return!0}function u0(){return!1}function Kt(o){function s(l,f,v,_,T){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(l=o[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?hc:u0,this.isPropagationStopped=u0,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),s}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pc=Kt(Sr),Ya=y({},Sr,{view:0,detail:0}),K1=Kt(Ya),np,ip,Xa,mc=y({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Xa&&(Xa&&o.type==="mousemove"?(np=o.screenX-Xa.screenX,ip=o.screenY-Xa.screenY):ip=np=0,Xa=o),np)},movementY:function(o){return"movementY"in o?o.movementY:ip}}),c0=Kt(mc),Y1=y({},mc,{dataTransfer:0}),X1=Kt(Y1),W1=y({},Ya,{relatedTarget:0}),op=Kt(W1),Q1=y({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Z1=Kt(Q1),eO=y({},Sr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),tO=Kt(eO),nO=y({},Sr,{data:0}),f0=Kt(nO),iO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sO(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=rO[o])?!!s[o]:!1}function rp(){return sO}var aO=y({},Ya,{key:function(o){if(o.key){var s=iO[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=dc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?oO[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(o){return o.type==="keypress"?dc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?dc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),lO=Kt(aO),uO=y({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d0=Kt(uO),cO=y({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),fO=Kt(cO),dO=y({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),hO=Kt(dO),pO=y({},mc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),mO=Kt(pO),gO=y({},Sr,{newState:0,oldState:0}),vO=Kt(gO),yO=[9,13,27,32],sp=Gi&&"CompositionEvent"in window,Wa=null;Gi&&"documentMode"in document&&(Wa=document.documentMode);var _O=Gi&&"TextEvent"in window&&!Wa,h0=Gi&&(!sp||Wa&&8<Wa&&11>=Wa),p0=" ",m0=!1;function g0(o,s){switch(o){case"keyup":return yO.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ys=!1;function SO(o,s){switch(o){case"compositionend":return v0(s);case"keypress":return s.which!==32?null:(m0=!0,p0);case"textInput":return o=s.data,o===p0&&m0?null:o;default:return null}}function bO(o,s){if(ys)return o==="compositionend"||!sp&&g0(o,s)?(o=l0(),fc=tp=Mo=null,ys=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return h0&&s.locale!=="ko"?null:s.data;default:return null}}var wO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y0(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!wO[o.type]:s==="textarea"}function _0(o,s,l,f){gs?vs?vs.push(f):vs=[f]:gs=f,s=rf(s,"onChange"),0<s.length&&(l=new pc("onChange","change",null,l,f),o.push({event:l,listeners:s}))}var Qa=null,Za=null;function EO(o){tw(o,0)}function gc(o){var s=Ja(o);if(e0(s))return o}function S0(o,s){if(o==="change")return s}var b0=!1;if(Gi){var ap;if(Gi){var lp="oninput"in document;if(!lp){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),lp=typeof w0.oninput=="function"}ap=lp}else ap=!1;b0=ap&&(!document.documentMode||9<document.documentMode)}function E0(){Qa&&(Qa.detachEvent("onpropertychange",T0),Za=Qa=null)}function T0(o){if(o.propertyName==="value"&&gc(Za)){var s=[];_0(s,Za,o,Qh(o)),a0(EO,s)}}function TO(o,s,l){o==="focusin"?(E0(),Qa=s,Za=l,Qa.attachEvent("onpropertychange",T0)):o==="focusout"&&E0()}function CO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return gc(Za)}function xO(o,s){if(o==="click")return gc(s)}function AO(o,s){if(o==="input"||o==="change")return gc(s)}function RO(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var ln=typeof Object.is=="function"?Object.is:RO;function el(o,s){if(ln(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),f=Object.keys(s);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!Fa.call(s,v)||!ln(o[v],s[v]))return!1}return!0}function C0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function x0(o,s){var l=C0(o);o=0;for(var f;l;){if(l.nodeType===3){if(f=o+l.textContent.length,o<=s&&f>=s)return{node:l,offset:s-o};o=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=C0(l)}}function A0(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?A0(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function R0(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=uc(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=uc(o.document)}return s}function up(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var MO=Gi&&"documentMode"in document&&11>=document.documentMode,_s=null,cp=null,tl=null,fp=!1;function M0(o,s,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fp||_s==null||_s!==uc(f)||(f=_s,"selectionStart"in f&&up(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),tl&&el(tl,f)||(tl=f,f=rf(cp,"onSelect"),0<f.length&&(s=new pc("onSelect","select",null,s,l),o.push({event:s,listeners:f}),s.target=_s)))}function br(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Ss={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},dp={},N0={};Gi&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function wr(o){if(dp[o])return dp[o];if(!Ss[o])return o;var s=Ss[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in N0)return dp[o]=s[l];return o}var I0=wr("animationend"),D0=wr("animationiteration"),O0=wr("animationstart"),NO=wr("transitionrun"),IO=wr("transitionstart"),DO=wr("transitioncancel"),P0=wr("transitionend"),k0=new Map,hp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hp.push("scrollEnd");function Wn(o,s){k0.set(o,s),_r(s,[o])}var vc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},An=[],bs=0,pp=0;function yc(){for(var o=bs,s=pp=bs=0;s<o;){var l=An[s];An[s++]=null;var f=An[s];An[s++]=null;var v=An[s];An[s++]=null;var _=An[s];if(An[s++]=null,f!==null&&v!==null){var T=f.pending;T===null?v.next=v:(v.next=T.next,T.next=v),f.pending=v}_!==0&&L0(l,v,_)}}function _c(o,s,l,f){An[bs++]=o,An[bs++]=s,An[bs++]=l,An[bs++]=f,pp|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function mp(o,s,l,f){return _c(o,s,l,f),Sc(o)}function Er(o,s){return _c(o,null,null,s),Sc(o)}function L0(o,s,l){o.lanes|=l;var f=o.alternate;f!==null&&(f.lanes|=l);for(var v=!1,_=o.return;_!==null;)_.childLanes|=l,f=_.alternate,f!==null&&(f.childLanes|=l),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(v=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,v&&s!==null&&(v=31-an(l),o=_.hiddenUpdates,f=o[v],f===null?o[v]=[s]:f.push(s),s.lane=l|536870912),_):null}function Sc(o){if(50<El)throw El=0,Tm=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var ws={};function OO(o,s,l,f){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(o,s,l,f){return new OO(o,s,l,f)}function gp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Vi(o,s){var l=o.alternate;return l===null?(l=un(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function U0(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function bc(o,s,l,f,v,_){var T=0;if(f=o,typeof o=="function")gp(o)&&(T=1);else if(typeof o=="string")T=BP(o,l,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case J:return o=un(31,l,s,v),o.elementType=J,o.lanes=_,o;case x:return Tr(l.children,v,_,s);case A:T=8,v|=24;break;case M:return o=un(12,l,s,v|2),o.elementType=M,o.lanes=_,o;case k:return o=un(13,l,s,v),o.elementType=k,o.lanes=_,o;case U:return o=un(19,l,s,v),o.elementType=U,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:T=10;break e;case I:T=9;break e;case D:T=11;break e;case O:T=14;break e;case q:T=16,f=null;break e}T=29,l=Error(i(130,o===null?"null":typeof o,"")),f=null}return s=un(T,l,s,v),s.elementType=o,s.type=f,s.lanes=_,s}function Tr(o,s,l,f){return o=un(7,o,f,s),o.lanes=l,o}function vp(o,s,l){return o=un(6,o,null,s),o.lanes=l,o}function B0(o){var s=un(18,null,null,0);return s.stateNode=o,s}function yp(o,s,l){return s=un(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var F0=new WeakMap;function Rn(o,s){if(typeof o=="object"&&o!==null){var l=F0.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Zu(s)},F0.set(o,s),s)}return{value:o,source:s,stack:Zu(s)}}var Es=[],Ts=0,wc=null,nl=0,Mn=[],Nn=0,No=null,vi=1,yi="";function zi(o,s){Es[Ts++]=nl,Es[Ts++]=wc,wc=o,nl=s}function $0(o,s,l){Mn[Nn++]=vi,Mn[Nn++]=yi,Mn[Nn++]=No,No=o;var f=vi;o=yi;var v=32-an(f)-1;f&=~(1<<v),l+=1;var _=32-an(s)+v;if(30<_){var T=v-v%5;_=(f&(1<<T)-1).toString(32),f>>=T,v-=T,vi=1<<32-an(s)+v|l<<v|f,yi=_+o}else vi=1<<_|l<<v|f,yi=o}function _p(o){o.return!==null&&(zi(o,1),$0(o,1,0))}function Sp(o){for(;o===wc;)wc=Es[--Ts],Es[Ts]=null,nl=Es[--Ts],Es[Ts]=null;for(;o===No;)No=Mn[--Nn],Mn[Nn]=null,yi=Mn[--Nn],Mn[Nn]=null,vi=Mn[--Nn],Mn[Nn]=null}function H0(o,s){Mn[Nn++]=vi,Mn[Nn++]=yi,Mn[Nn++]=No,vi=s.id,yi=s.overflow,No=o}var Rt=null,rt=null,Ue=!1,Io=null,In=!1,bp=Error(i(519));function Do(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw il(Rn(s,o)),bp}function G0(o){var s=o.stateNode,l=o.type,f=o.memoizedProps;switch(s[At]=o,s[jt]=f,l){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(l=0;l<Cl.length;l++)Pe(Cl[l],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),t0(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),i0(s,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||f.suppressHydrationWarning===!0||rw(s.textContent,l)?(f.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),f.onScroll!=null&&Pe("scroll",s),f.onScrollEnd!=null&&Pe("scrollend",s),f.onClick!=null&&(s.onclick=Hi),s=!0):s=!1,s||Do(o,!0)}function V0(o){for(Rt=o.return;Rt;)switch(Rt.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Rt=Rt.return}}function Cs(o){if(o!==Rt)return!1;if(!Ue)return V0(o),Ue=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||Fm(o.type,o.memoizedProps)),l=!l),l&&rt&&Do(o),V0(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));rt=pw(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));rt=pw(o)}else s===27?(s=rt,Jo(o.type)?(o=zm,zm=null,rt=o):rt=s):rt=Rt?On(o.stateNode.nextSibling):null;return!0}function Cr(){rt=Rt=null,Ue=!1}function wp(){var o=Io;return o!==null&&(Qt===null?Qt=o:Qt.push.apply(Qt,o),Io=null),o}function il(o){Io===null?Io=[o]:Io.push(o)}var Ep=L(null),xr=null,qi=null;function Oo(o,s,l){se(Ep,s._currentValue),s._currentValue=l}function Ji(o){o._currentValue=Ep.current,K(Ep)}function Tp(o,s,l){for(;o!==null;){var f=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),o===l)break;o=o.return}}function Cp(o,s,l,f){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var _=v.dependencies;if(_!==null){var T=v.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=v;for(var P=0;P<s.length;P++)if(R.context===s[P]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),Tp(_.return,l,o),f||(T=null);break e}_=R.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(i(341));T.lanes|=l,_=T.alternate,_!==null&&(_.lanes|=l),Tp(T,l,o),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===o){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function xs(o,s,l,f){o=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var R=v.type;ln(v.pendingProps.value,T.value)||(o!==null?o.push(R):o=[R])}}else if(v===ve.current){if(T=v.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Nl):o=[Nl])}v=v.return}o!==null&&Cp(s,o,l,f),s.flags|=262144}function Ec(o){for(o=o.firstContext;o!==null;){if(!ln(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ar(o){xr=o,qi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Mt(o){return z0(xr,o)}function Tc(o,s){return xr===null&&Ar(o),z0(o,s)}function z0(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},qi===null){if(o===null)throw Error(i(308));qi=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else qi=qi.next=s;return l}var PO=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,f){o.push(f)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},kO=t.unstable_scheduleCallback,LO=t.unstable_NormalPriority,pt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xp(){return{controller:new PO,data:new Map,refCount:0}}function ol(o){o.refCount--,o.refCount===0&&kO(LO,function(){o.controller.abort()})}var rl=null,Ap=0,As=0,Rs=null;function UO(o,s){if(rl===null){var l=rl=[];Ap=0,As=Nm(),Rs={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Ap++,s.then(q0,q0),s}function q0(){if(--Ap===0&&rl!==null){Rs!==null&&(Rs.status="fulfilled");var o=rl;rl=null,As=0,Rs=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function BO(o,s){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return o.then(function(){f.status="fulfilled",f.value=s;for(var v=0;v<l.length;v++)(0,l[v])(s)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var J0=F.S;F.S=function(o,s){Mb=xt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&UO(o,s),J0!==null&&J0(o,s)};var Rr=L(null);function Rp(){var o=Rr.current;return o!==null?o:tt.pooledCache}function Cc(o,s){s===null?se(Rr,Rr.current):se(Rr,s.pool)}function j0(){var o=Rp();return o===null?null:{parent:pt._currentValue,pool:o}}var Ms=Error(i(460)),Mp=Error(i(474)),xc=Error(i(542)),Ac={then:function(){}};function K0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Y0(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(Hi,Hi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,W0(o),o;default:if(typeof s.status=="string")s.then(Hi,Hi);else{if(o=tt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(f){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=f}},function(f){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,W0(o),o}throw Nr=s,Ms}}function Mr(o){try{var s=o._init;return s(o._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Nr=l,Ms):l}}var Nr=null;function X0(){if(Nr===null)throw Error(i(459));var o=Nr;return Nr=null,o}function W0(o){if(o===Ms||o===xc)throw Error(i(483))}var Ns=null,sl=0;function Rc(o){var s=sl;return sl+=1,Ns===null&&(Ns=[]),Y0(Ns,o,s)}function al(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Mc(o,s){throw s.$$typeof===S?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Q0(o){function s($,B){if(o){var H=$.deletions;H===null?($.deletions=[B],$.flags|=16):H.push(B)}}function l($,B){if(!o)return null;for(;B!==null;)s($,B),B=B.sibling;return null}function f($){for(var B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function v($,B){return $=Vi($,B),$.index=0,$.sibling=null,$}function _($,B,H){return $.index=H,o?(H=$.alternate,H!==null?(H=H.index,H<B?($.flags|=67108866,B):H):($.flags|=67108866,B)):($.flags|=1048576,B)}function T($){return o&&$.alternate===null&&($.flags|=67108866),$}function R($,B,H,Z){return B===null||B.tag!==6?(B=vp(H,$.mode,Z),B.return=$,B):(B=v(B,H),B.return=$,B)}function P($,B,H,Z){var _e=H.type;return _e===x?X($,B,H.props.children,Z,H.key):B!==null&&(B.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&Mr(_e)===B.type)?(B=v(B,H.props),al(B,H),B.return=$,B):(B=bc(H.type,H.key,H.props,null,$.mode,Z),al(B,H),B.return=$,B)}function G($,B,H,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=yp(H,$.mode,Z),B.return=$,B):(B=v(B,H.children||[]),B.return=$,B)}function X($,B,H,Z,_e){return B===null||B.tag!==7?(B=Tr(H,$.mode,Z,_e),B.return=$,B):(B=v(B,H),B.return=$,B)}function te($,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=vp(""+B,$.mode,H),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return H=bc(B.type,B.key,B.props,null,$.mode,H),al(H,B),H.return=$,H;case C:return B=yp(B,$.mode,H),B.return=$,B;case q:return B=Mr(B),te($,B,H)}if(de(B)||re(B))return B=Tr(B,$.mode,H,null),B.return=$,B;if(typeof B.then=="function")return te($,Rc(B),H);if(B.$$typeof===N)return te($,Tc($,B),H);Mc($,B)}return null}function z($,B,H,Z){var _e=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:R($,B,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===_e?P($,B,H,Z):null;case C:return H.key===_e?G($,B,H,Z):null;case q:return H=Mr(H),z($,B,H,Z)}if(de(H)||re(H))return _e!==null?null:X($,B,H,Z,null);if(typeof H.then=="function")return z($,B,Rc(H),Z);if(H.$$typeof===N)return z($,B,Tc($,H),Z);Mc($,H)}return null}function j($,B,H,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return $=$.get(H)||null,R(B,$,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return $=$.get(Z.key===null?H:Z.key)||null,P(B,$,Z,_e);case C:return $=$.get(Z.key===null?H:Z.key)||null,G(B,$,Z,_e);case q:return Z=Mr(Z),j($,B,H,Z,_e)}if(de(Z)||re(Z))return $=$.get(H)||null,X(B,$,Z,_e,null);if(typeof Z.then=="function")return j($,B,H,Rc(Z),_e);if(Z.$$typeof===N)return j($,B,H,Tc(B,Z),_e);Mc(B,Z)}return null}function he($,B,H,Z){for(var _e=null,He=null,ge=B,Me=B=0,Le=null;ge!==null&&Me<H.length;Me++){ge.index>Me?(Le=ge,ge=null):Le=ge.sibling;var Ge=z($,ge,H[Me],Z);if(Ge===null){ge===null&&(ge=Le);break}o&&ge&&Ge.alternate===null&&s($,ge),B=_(Ge,B,Me),He===null?_e=Ge:He.sibling=Ge,He=Ge,ge=Le}if(Me===H.length)return l($,ge),Ue&&zi($,Me),_e;if(ge===null){for(;Me<H.length;Me++)ge=te($,H[Me],Z),ge!==null&&(B=_(ge,B,Me),He===null?_e=ge:He.sibling=ge,He=ge);return Ue&&zi($,Me),_e}for(ge=f(ge);Me<H.length;Me++)Le=j(ge,$,Me,H[Me],Z),Le!==null&&(o&&Le.alternate!==null&&ge.delete(Le.key===null?Me:Le.key),B=_(Le,B,Me),He===null?_e=Le:He.sibling=Le,He=Le);return o&&ge.forEach(function(Wo){return s($,Wo)}),Ue&&zi($,Me),_e}function Ee($,B,H,Z){if(H==null)throw Error(i(151));for(var _e=null,He=null,ge=B,Me=B=0,Le=null,Ge=H.next();ge!==null&&!Ge.done;Me++,Ge=H.next()){ge.index>Me?(Le=ge,ge=null):Le=ge.sibling;var Wo=z($,ge,Ge.value,Z);if(Wo===null){ge===null&&(ge=Le);break}o&&ge&&Wo.alternate===null&&s($,ge),B=_(Wo,B,Me),He===null?_e=Wo:He.sibling=Wo,He=Wo,ge=Le}if(Ge.done)return l($,ge),Ue&&zi($,Me),_e;if(ge===null){for(;!Ge.done;Me++,Ge=H.next())Ge=te($,Ge.value,Z),Ge!==null&&(B=_(Ge,B,Me),He===null?_e=Ge:He.sibling=Ge,He=Ge);return Ue&&zi($,Me),_e}for(ge=f(ge);!Ge.done;Me++,Ge=H.next())Ge=j(ge,$,Me,Ge.value,Z),Ge!==null&&(o&&Ge.alternate!==null&&ge.delete(Ge.key===null?Me:Ge.key),B=_(Ge,B,Me),He===null?_e=Ge:He.sibling=Ge,He=Ge);return o&&ge.forEach(function(YP){return s($,YP)}),Ue&&zi($,Me),_e}function Qe($,B,H,Z){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var _e=H.key;B!==null;){if(B.key===_e){if(_e=H.type,_e===x){if(B.tag===7){l($,B.sibling),Z=v(B,H.props.children),Z.return=$,$=Z;break e}}else if(B.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&Mr(_e)===B.type){l($,B.sibling),Z=v(B,H.props),al(Z,H),Z.return=$,$=Z;break e}l($,B);break}else s($,B);B=B.sibling}H.type===x?(Z=Tr(H.props.children,$.mode,Z,H.key),Z.return=$,$=Z):(Z=bc(H.type,H.key,H.props,null,$.mode,Z),al(Z,H),Z.return=$,$=Z)}return T($);case C:e:{for(_e=H.key;B!==null;){if(B.key===_e)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){l($,B.sibling),Z=v(B,H.children||[]),Z.return=$,$=Z;break e}else{l($,B);break}else s($,B);B=B.sibling}Z=yp(H,$.mode,Z),Z.return=$,$=Z}return T($);case q:return H=Mr(H),Qe($,B,H,Z)}if(de(H))return he($,B,H,Z);if(re(H)){if(_e=re(H),typeof _e!="function")throw Error(i(150));return H=_e.call(H),Ee($,B,H,Z)}if(typeof H.then=="function")return Qe($,B,Rc(H),Z);if(H.$$typeof===N)return Qe($,B,Tc($,H),Z);Mc($,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(l($,B.sibling),Z=v(B,H),Z.return=$,$=Z):(l($,B),Z=vp(H,$.mode,Z),Z.return=$,$=Z),T($)):l($,B)}return function($,B,H,Z){try{sl=0;var _e=Qe($,B,H,Z);return Ns=null,_e}catch(ge){if(ge===Ms||ge===xc)throw ge;var He=un(29,ge,null,$.mode);return He.lanes=Z,He.return=$,He}finally{}}}var Ir=Q0(!0),Z0=Q0(!1),Po=!1;function Np(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ip(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ko(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Lo(o,s,l){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(je&2)!==0){var v=f.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),f.pending=s,s=Sc(o),L0(o,null,l),s}return _c(o,f,s,l),Sc(o)}function ll(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var f=s.lanes;f&=o.pendingLanes,l|=f,s.lanes=l,z_(o,l)}}function Dp(o,s){var l=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?v=_=T:_=_.next=T,l=l.next}while(l!==null);_===null?v=_=s:_=_.next=s}else v=_=s;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var Op=!1;function ul(){if(Op){var o=Rs;if(o!==null)throw o}}function cl(o,s,l,f){Op=!1;var v=o.updateQueue;Po=!1;var _=v.firstBaseUpdate,T=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var P=R,G=P.next;P.next=null,T===null?_=G:T.next=G,T=P;var X=o.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==T&&(R===null?X.firstBaseUpdate=G:R.next=G,X.lastBaseUpdate=P))}if(_!==null){var te=v.baseState;T=0,X=G=P=null,R=_;do{var z=R.lane&-536870913,j=z!==R.lane;if(j?(ke&z)===z:(f&z)===z){z!==0&&z===As&&(Op=!0),X!==null&&(X=X.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var he=o,Ee=R;z=s;var Qe=l;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){te=he.call(Qe,te,z);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,z=typeof he=="function"?he.call(Qe,te,z):he,z==null)break e;te=y({},te,z);break e;case 2:Po=!0}}z=R.callback,z!==null&&(o.flags|=64,j&&(o.flags|=8192),j=v.callbacks,j===null?v.callbacks=[z]:j.push(z))}else j={lane:z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(G=X=j,P=te):X=X.next=j,T|=z;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;j=R,R=j.next,j.next=null,v.lastBaseUpdate=j,v.shared.pending=null}}while(!0);X===null&&(P=te),v.baseState=P,v.firstBaseUpdate=G,v.lastBaseUpdate=X,_===null&&(v.shared.lanes=0),Ho|=T,o.lanes=T,o.memoizedState=te}}function eS(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function tS(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)eS(l[o],s)}var Is=L(null),Nc=L(0);function nS(o,s){o=to,se(Nc,o),se(Is,s),to=o|s.baseLanes}function Pp(){se(Nc,to),se(Is,Is.current)}function kp(){to=Nc.current,K(Is),K(Nc)}var cn=L(null),Dn=null;function Uo(o){var s=o.alternate;se(ft,ft.current&1),se(cn,o),Dn===null&&(s===null||Is.current!==null||s.memoizedState!==null)&&(Dn=o)}function Lp(o){se(ft,ft.current),se(cn,o),Dn===null&&(Dn=o)}function iS(o){o.tag===22?(se(ft,ft.current),se(cn,o),Dn===null&&(Dn=o)):Bo()}function Bo(){se(ft,ft.current),se(cn,cn.current)}function fn(o){K(cn),Dn===o&&(Dn=null),K(ft)}var ft=L(0);function Ic(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Gm(l)||Vm(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ji=0,Re=null,Xe=null,mt=null,Dc=!1,Ds=!1,Dr=!1,Oc=0,fl=0,Os=null,FO=0;function ut(){throw Error(i(321))}function Up(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!ln(o[l],s[l]))return!1;return!0}function Bp(o,s,l,f,v,_){return ji=_,Re=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=o===null||o.memoizedState===null?$S:Zp,Dr=!1,_=l(f,v),Dr=!1,Ds&&(_=rS(s,l,f,v)),oS(o),_}function oS(o){F.H=pl;var s=Xe!==null&&Xe.next!==null;if(ji=0,mt=Xe=Re=null,Dc=!1,fl=0,Os=null,s)throw Error(i(300));o===null||gt||(o=o.dependencies,o!==null&&Ec(o)&&(gt=!0))}function rS(o,s,l,f){Re=o;var v=0;do{if(Ds&&(Os=null),fl=0,Ds=!1,25<=v)throw Error(i(301));if(v+=1,mt=Xe=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=HS,_=s(l,f)}while(Ds);return _}function $O(){var o=F.H,s=o.useState()[0];return s=typeof s.then=="function"?dl(s):s,o=o.useState()[0],(Xe!==null?Xe.memoizedState:null)!==o&&(Re.flags|=1024),s}function Fp(){var o=Oc!==0;return Oc=0,o}function $p(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function Hp(o){if(Dc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Dc=!1}ji=0,mt=Xe=Re=null,Ds=!1,fl=Oc=0,Os=null}function Ft(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Re.memoizedState=mt=o:mt=mt.next=o,mt}function dt(){if(Xe===null){var o=Re.alternate;o=o!==null?o.memoizedState:null}else o=Xe.next;var s=mt===null?Re.memoizedState:mt.next;if(s!==null)mt=s,Xe=o;else{if(o===null)throw Re.alternate===null?Error(i(467)):Error(i(310));Xe=o,o={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},mt===null?Re.memoizedState=mt=o:mt=mt.next=o}return mt}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(o){var s=fl;return fl+=1,Os===null&&(Os=[]),o=Y0(Os,o,s),s=Re,(mt===null?s.memoizedState:mt.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?$S:Zp),o}function kc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return dl(o);if(o.$$typeof===N)return Mt(o)}throw Error(i(438,String(o)))}function Gp(o){var s=null,l=Re.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var f=Re.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Pc(),Re.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),f=0;f<o;f++)l[f]=Y;return s.index++,l}function Ki(o,s){return typeof s=="function"?s(o):s}function Lc(o){var s=dt();return Vp(s,Xe,o)}function Vp(o,s,l){var f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=l;var v=o.baseQueue,_=f.pending;if(_!==null){if(v!==null){var T=v.next;v.next=_.next,_.next=T}s.baseQueue=v=_,f.pending=null}if(_=o.baseState,v===null)o.memoizedState=_;else{s=v.next;var R=T=null,P=null,G=s,X=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(ke&te)===te:(ji&te)===te){var z=G.revertLane;if(z===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===As&&(X=!0);else if((ji&z)===z){G=G.next,z===As&&(X=!0);continue}else te={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(R=P=te,T=_):P=P.next=te,Re.lanes|=z,Ho|=z;te=G.action,Dr&&l(_,te),_=G.hasEagerState?G.eagerState:l(_,te)}else z={lane:te,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(R=P=z,T=_):P=P.next=z,Re.lanes|=te,Ho|=te;G=G.next}while(G!==null&&G!==s);if(P===null?T=_:P.next=R,!ln(_,o.memoizedState)&&(gt=!0,X&&(l=Rs,l!==null)))throw l;o.memoizedState=_,o.baseState=T,o.baseQueue=P,f.lastRenderedState=_}return v===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function zp(o){var s=dt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var f=l.dispatch,v=l.pending,_=s.memoizedState;if(v!==null){l.pending=null;var T=v=v.next;do _=o(_,T.action),T=T.next;while(T!==v);ln(_,s.memoizedState)||(gt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,f]}function sS(o,s,l){var f=Re,v=dt(),_=Ue;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var T=!ln((Xe||v).memoizedState,l);if(T&&(v.memoizedState=l,gt=!0),v=v.queue,jp(uS.bind(null,f,v,o),[o]),v.getSnapshot!==s||T||mt!==null&&mt.memoizedState.tag&1){if(f.flags|=2048,Ps(9,{destroy:void 0},lS.bind(null,f,v,l,s),null),tt===null)throw Error(i(349));_||(ji&127)!==0||aS(f,s,l)}return l}function aS(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=Re.updateQueue,s===null?(s=Pc(),Re.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function lS(o,s,l,f){s.value=l,s.getSnapshot=f,cS(s)&&fS(o)}function uS(o,s,l){return l(function(){cS(s)&&fS(o)})}function cS(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!ln(o,l)}catch{return!0}}function fS(o){var s=Er(o,2);s!==null&&Zt(s,o,2)}function qp(o){var s=Ft();if(typeof o=="function"){var l=o;if(o=l(),Dr){Ao(!0);try{l()}finally{Ao(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:o},s}function dS(o,s,l,f){return o.baseState=l,Vp(o,Xe,typeof f=="function"?f:Ki)}function HO(o,s,l,f,v){if(Fc(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};F.T!==null?l(!0):_.isTransition=!1,f(_),l=s.pending,l===null?(_.next=s.pending=_,hS(s,_)):(_.next=l.next,s.pending=l.next=_)}}function hS(o,s){var l=s.action,f=s.payload,v=o.state;if(s.isTransition){var _=F.T,T={};F.T=T;try{var R=l(v,f),P=F.S;P!==null&&P(T,R),pS(o,s,R)}catch(G){Jp(o,s,G)}finally{_!==null&&T.types!==null&&(_.types=T.types),F.T=_}}else try{_=l(v,f),pS(o,s,_)}catch(G){Jp(o,s,G)}}function pS(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){mS(o,s,f)},function(f){return Jp(o,s,f)}):mS(o,s,l)}function mS(o,s,l){s.status="fulfilled",s.value=l,gS(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,hS(o,l)))}function Jp(o,s,l){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=l,gS(s),s=s.next;while(s!==f)}o.action=null}function gS(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function vS(o,s){return s}function yS(o,s){if(Ue){var l=tt.formState;if(l!==null){e:{var f=Re;if(Ue){if(rt){t:{for(var v=rt,_=In;v.nodeType!==8;){if(!_){v=null;break t}if(v=On(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){rt=On(v.nextSibling),f=v.data==="F!";break e}}Do(f)}f=!1}f&&(s=l[0])}}return l=Ft(),l.memoizedState=l.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vS,lastRenderedState:s},l.queue=f,l=US.bind(null,Re,f),f.dispatch=l,f=qp(!1),_=Qp.bind(null,Re,!1,f.queue),f=Ft(),v={state:s,dispatch:null,action:o,pending:null},f.queue=v,l=HO.bind(null,Re,v,_,l),v.dispatch=l,f.memoizedState=o,[s,l,!1]}function _S(o){var s=dt();return SS(s,Xe,o)}function SS(o,s,l){if(s=Vp(o,s,vS)[0],o=Lc(Ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=dl(s)}catch(T){throw T===Ms?xc:T}else f=s;s=dt();var v=s.queue,_=v.dispatch;return l!==s.memoizedState&&(Re.flags|=2048,Ps(9,{destroy:void 0},GO.bind(null,v,l),null)),[f,_,o]}function GO(o,s){o.action=s}function bS(o){var s=dt(),l=Xe;if(l!==null)return SS(s,l,o);dt(),s=s.memoizedState,l=dt();var f=l.queue.dispatch;return l.memoizedState=o,[s,f,!1]}function Ps(o,s,l,f){return o={tag:o,create:l,deps:f,inst:s,next:null},s=Re.updateQueue,s===null&&(s=Pc(),Re.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(f=l.next,l.next=o,o.next=f,s.lastEffect=o),o}function wS(){return dt().memoizedState}function Uc(o,s,l,f){var v=Ft();Re.flags|=o,v.memoizedState=Ps(1|s,{destroy:void 0},l,f===void 0?null:f)}function Bc(o,s,l,f){var v=dt();f=f===void 0?null:f;var _=v.memoizedState.inst;Xe!==null&&f!==null&&Up(f,Xe.memoizedState.deps)?v.memoizedState=Ps(s,_,l,f):(Re.flags|=o,v.memoizedState=Ps(1|s,_,l,f))}function ES(o,s){Uc(8390656,8,o,s)}function jp(o,s){Bc(2048,8,o,s)}function VO(o){Re.flags|=4;var s=Re.updateQueue;if(s===null)s=Pc(),Re.updateQueue=s,s.events=[o];else{var l=s.events;l===null?s.events=[o]:l.push(o)}}function TS(o){var s=dt().memoizedState;return VO({ref:s,nextImpl:o}),function(){if((je&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function CS(o,s){return Bc(4,2,o,s)}function xS(o,s){return Bc(4,4,o,s)}function AS(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function RS(o,s,l){l=l!=null?l.concat([o]):null,Bc(4,4,AS.bind(null,s,o),l)}function Kp(){}function MS(o,s){var l=dt();s=s===void 0?null:s;var f=l.memoizedState;return s!==null&&Up(s,f[1])?f[0]:(l.memoizedState=[o,s],o)}function NS(o,s){var l=dt();s=s===void 0?null:s;var f=l.memoizedState;if(s!==null&&Up(s,f[1]))return f[0];if(f=o(),Dr){Ao(!0);try{o()}finally{Ao(!1)}}return l.memoizedState=[f,s],f}function Yp(o,s,l){return l===void 0||(ji&1073741824)!==0&&(ke&261930)===0?o.memoizedState=s:(o.memoizedState=l,o=Ib(),Re.lanes|=o,Ho|=o,l)}function IS(o,s,l,f){return ln(l,s)?l:Is.current!==null?(o=Yp(o,l,f),ln(o,s)||(gt=!0),o):(ji&42)===0||(ji&1073741824)!==0&&(ke&261930)===0?(gt=!0,o.memoizedState=l):(o=Ib(),Re.lanes|=o,Ho|=o,s)}function DS(o,s,l,f,v){var _=Q.p;Q.p=_!==0&&8>_?_:8;var T=F.T,R={};F.T=R,Qp(o,!1,s,l);try{var P=v(),G=F.S;if(G!==null&&G(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var X=BO(P,f);hl(o,s,X,pn(o))}else hl(o,s,f,pn(o))}catch(te){hl(o,s,{then:function(){},status:"rejected",reason:te},pn())}finally{Q.p=_,T!==null&&R.types!==null&&(T.types=R.types),F.T=T}}function zO(){}function Xp(o,s,l,f){if(o.tag!==5)throw Error(i(476));var v=OS(o).queue;DS(o,v,s,ee,l===null?zO:function(){return PS(o),l(f)})}function OS(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ee},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function PS(o){var s=OS(o);s.next===null&&(s=o.alternate.memoizedState),hl(o,s.next.queue,{},pn())}function Wp(){return Mt(Nl)}function kS(){return dt().memoizedState}function LS(){return dt().memoizedState}function qO(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=pn();o=ko(l);var f=Lo(s,o,l);f!==null&&(Zt(f,s,l),ll(f,s,l)),s={cache:xp()},o.payload=s;return}s=s.return}}function JO(o,s,l){var f=pn();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Fc(o)?BS(s,l):(l=mp(o,s,l,f),l!==null&&(Zt(l,o,f),FS(l,s,f)))}function US(o,s,l){var f=pn();hl(o,s,l,f)}function hl(o,s,l,f){var v={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Fc(o))BS(s,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var T=s.lastRenderedState,R=_(T,l);if(v.hasEagerState=!0,v.eagerState=R,ln(R,T))return _c(o,s,v,0),tt===null&&yc(),!1}catch{}finally{}if(l=mp(o,s,v,f),l!==null)return Zt(l,o,f),FS(l,s,f),!0}return!1}function Qp(o,s,l,f){if(f={lane:2,revertLane:Nm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Fc(o)){if(s)throw Error(i(479))}else s=mp(o,l,f,2),s!==null&&Zt(s,o,2)}function Fc(o){var s=o.alternate;return o===Re||s!==null&&s===Re}function BS(o,s){Ds=Dc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function FS(o,s,l){if((l&4194048)!==0){var f=s.lanes;f&=o.pendingLanes,l|=f,s.lanes=l,z_(o,l)}}var pl={readContext:Mt,use:kc,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};pl.useEffectEvent=ut;var $S={readContext:Mt,use:kc,useCallback:function(o,s){return Ft().memoizedState=[o,s===void 0?null:s],o},useContext:Mt,useEffect:ES,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Uc(4194308,4,AS.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Uc(4194308,4,o,s)},useInsertionEffect:function(o,s){Uc(4,2,o,s)},useMemo:function(o,s){var l=Ft();s=s===void 0?null:s;var f=o();if(Dr){Ao(!0);try{o()}finally{Ao(!1)}}return l.memoizedState=[f,s],f},useReducer:function(o,s,l){var f=Ft();if(l!==void 0){var v=l(s);if(Dr){Ao(!0);try{l(s)}finally{Ao(!1)}}}else v=s;return f.memoizedState=f.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},f.queue=o,o=o.dispatch=JO.bind(null,Re,o),[f.memoizedState,o]},useRef:function(o){var s=Ft();return o={current:o},s.memoizedState=o},useState:function(o){o=qp(o);var s=o.queue,l=US.bind(null,Re,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:Kp,useDeferredValue:function(o,s){var l=Ft();return Yp(l,o,s)},useTransition:function(){var o=qp(!1);return o=DS.bind(null,Re,o.queue,!0,!1),Ft().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var f=Re,v=Ft();if(Ue){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),tt===null)throw Error(i(349));(ke&127)!==0||aS(f,s,l)}v.memoizedState=l;var _={value:l,getSnapshot:s};return v.queue=_,ES(uS.bind(null,f,_,o),[o]),f.flags|=2048,Ps(9,{destroy:void 0},lS.bind(null,f,_,l,s),null),l},useId:function(){var o=Ft(),s=tt.identifierPrefix;if(Ue){var l=yi,f=vi;l=(f&~(1<<32-an(f)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Oc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=FO++,s="_"+s+"r_"+l.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:Wp,useFormState:yS,useActionState:yS,useOptimistic:function(o){var s=Ft();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Qp.bind(null,Re,!0,l),l.dispatch=s,[o,s]},useMemoCache:Gp,useCacheRefresh:function(){return Ft().memoizedState=qO.bind(null,Re)},useEffectEvent:function(o){var s=Ft(),l={impl:o};return s.memoizedState=l,function(){if((je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Zp={readContext:Mt,use:kc,useCallback:MS,useContext:Mt,useEffect:jp,useImperativeHandle:RS,useInsertionEffect:CS,useLayoutEffect:xS,useMemo:NS,useReducer:Lc,useRef:wS,useState:function(){return Lc(Ki)},useDebugValue:Kp,useDeferredValue:function(o,s){var l=dt();return IS(l,Xe.memoizedState,o,s)},useTransition:function(){var o=Lc(Ki)[0],s=dt().memoizedState;return[typeof o=="boolean"?o:dl(o),s]},useSyncExternalStore:sS,useId:kS,useHostTransitionStatus:Wp,useFormState:_S,useActionState:_S,useOptimistic:function(o,s){var l=dt();return dS(l,Xe,o,s)},useMemoCache:Gp,useCacheRefresh:LS};Zp.useEffectEvent=TS;var HS={readContext:Mt,use:kc,useCallback:MS,useContext:Mt,useEffect:jp,useImperativeHandle:RS,useInsertionEffect:CS,useLayoutEffect:xS,useMemo:NS,useReducer:zp,useRef:wS,useState:function(){return zp(Ki)},useDebugValue:Kp,useDeferredValue:function(o,s){var l=dt();return Xe===null?Yp(l,o,s):IS(l,Xe.memoizedState,o,s)},useTransition:function(){var o=zp(Ki)[0],s=dt().memoizedState;return[typeof o=="boolean"?o:dl(o),s]},useSyncExternalStore:sS,useId:kS,useHostTransitionStatus:Wp,useFormState:bS,useActionState:bS,useOptimistic:function(o,s){var l=dt();return Xe!==null?dS(l,Xe,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:Gp,useCacheRefresh:LS};HS.useEffectEvent=TS;function em(o,s,l,f){s=o.memoizedState,l=l(f,s),l=l==null?s:y({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var tm={enqueueSetState:function(o,s,l){o=o._reactInternals;var f=pn(),v=ko(f);v.payload=s,l!=null&&(v.callback=l),s=Lo(o,v,f),s!==null&&(Zt(s,o,f),ll(s,o,f))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var f=pn(),v=ko(f);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Lo(o,v,f),s!==null&&(Zt(s,o,f),ll(s,o,f))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=pn(),f=ko(l);f.tag=2,s!=null&&(f.callback=s),s=Lo(o,f,l),s!==null&&(Zt(s,o,l),ll(s,o,l))}};function GS(o,s,l,f,v,_,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,_,T):s.prototype&&s.prototype.isPureReactComponent?!el(l,f)||!el(v,_):!0}function VS(o,s,l,f){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,f),s.state!==o&&tm.enqueueReplaceState(s,s.state,null)}function Or(o,s){var l=s;if("ref"in s){l={};for(var f in s)f!=="ref"&&(l[f]=s[f])}if(o=o.defaultProps){l===s&&(l=y({},l));for(var v in o)l[v]===void 0&&(l[v]=o[v])}return l}function zS(o){vc(o)}function qS(o){console.error(o)}function JS(o){vc(o)}function $c(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function jS(o,s,l){try{var f=o.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function nm(o,s,l){return l=ko(l),l.tag=3,l.payload={element:null},l.callback=function(){$c(o,s)},l}function KS(o){return o=ko(o),o.tag=3,o}function YS(o,s,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;o.payload=function(){return v(_)},o.callback=function(){jS(s,l,f)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){jS(s,l,f),typeof v!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function jO(o,s,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=l.alternate,s!==null&&xs(s,l,v,!0),l=cn.current,l!==null){switch(l.tag){case 31:case 13:return Dn===null?Qc():l.alternate===null&&ct===0&&(ct=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===Ac?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([f]):s.add(f),Am(o,f,v)),!1;case 22:return l.flags|=65536,f===Ac?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([f]):l.add(f)),Am(o,f,v)),!1}throw Error(i(435,l.tag))}return Am(o,f,v),Qc(),!1}if(Ue)return s=cn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,f!==bp&&(o=Error(i(422),{cause:f}),il(Rn(o,l)))):(f!==bp&&(s=Error(i(423),{cause:f}),il(Rn(s,l))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,f=Rn(f,l),v=nm(o.stateNode,f,v),Dp(o,v),ct!==4&&(ct=2)),!1;var _=Error(i(520),{cause:f});if(_=Rn(_,l),wl===null?wl=[_]:wl.push(_),ct!==4&&(ct=2),s===null)return!0;f=Rn(f,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=v&-v,l.lanes|=o,o=nm(l.stateNode,f,o),Dp(l,o),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Go===null||!Go.has(_))))return l.flags|=65536,v&=-v,l.lanes|=v,v=KS(v),YS(v,o,l,f),Dp(l,v),!1}l=l.return}while(l!==null);return!1}var im=Error(i(461)),gt=!1;function Nt(o,s,l,f){s.child=o===null?Z0(s,null,l,f):Ir(s,o.child,l,f)}function XS(o,s,l,f,v){l=l.render;var _=s.ref;if("ref"in f){var T={};for(var R in f)R!=="ref"&&(T[R]=f[R])}else T=f;return Ar(s),f=Bp(o,s,l,T,_,v),R=Fp(),o!==null&&!gt?($p(o,s,v),Yi(o,s,v)):(Ue&&R&&_p(s),s.flags|=1,Nt(o,s,f,v),s.child)}function WS(o,s,l,f,v){if(o===null){var _=l.type;return typeof _=="function"&&!gp(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,QS(o,s,_,f,v)):(o=bc(l.type,null,f,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!fm(o,v)){var T=_.memoizedProps;if(l=l.compare,l=l!==null?l:el,l(T,f)&&o.ref===s.ref)return Yi(o,s,v)}return s.flags|=1,o=Vi(_,f),o.ref=s.ref,o.return=s,s.child=o}function QS(o,s,l,f,v){if(o!==null){var _=o.memoizedProps;if(el(_,f)&&o.ref===s.ref)if(gt=!1,s.pendingProps=f=_,fm(o,v))(o.flags&131072)!==0&&(gt=!0);else return s.lanes=o.lanes,Yi(o,s,v)}return om(o,s,l,f,v)}function ZS(o,s,l,f){var v=f.children,_=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,o!==null){for(f=s.child=o.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,s.child=null;return eb(o,s,_,l,f)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Cc(s,_!==null?_.cachePool:null),_!==null?nS(s,_):Pp(),iS(s);else return f=s.lanes=536870912,eb(o,s,_!==null?_.baseLanes|l:l,l,f)}else _!==null?(Cc(s,_.cachePool),nS(s,_),Bo(),s.memoizedState=null):(o!==null&&Cc(s,null),Pp(),Bo());return Nt(o,s,v,l),s.child}function ml(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function eb(o,s,l,f,v){var _=Rp();return _=_===null?null:{parent:pt._currentValue,pool:_},s.memoizedState={baseLanes:l,cachePool:_},o!==null&&Cc(s,null),Pp(),iS(s),o!==null&&xs(o,s,f,!0),s.childLanes=v,null}function Hc(o,s){return s=Vc({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function tb(o,s,l){return Ir(s,o.child,null,l),o=Hc(s,s.pendingProps),o.flags|=2,fn(s),s.memoizedState=null,o}function KO(o,s,l){var f=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(Ue){if(f.mode==="hidden")return o=Hc(s,f),s.lanes=536870912,ml(null,o);if(Lp(s),(o=rt)?(o=hw(o,In),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:No!==null?{id:vi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},l=B0(o),l.return=s,s.child=l,Rt=s,rt=null)):o=null,o===null)throw Do(s);return s.lanes=536870912,null}return Hc(s,f)}var _=o.memoizedState;if(_!==null){var T=_.dehydrated;if(Lp(s),v)if(s.flags&256)s.flags&=-257,s=tb(o,s,l);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(gt||xs(o,s,l,!1),v=(l&o.childLanes)!==0,gt||v){if(f=tt,f!==null&&(T=q_(f,l),T!==0&&T!==_.retryLane))throw _.retryLane=T,Er(o,T),Zt(f,o,T),im;Qc(),s=tb(o,s,l)}else o=_.treeContext,rt=On(T.nextSibling),Rt=s,Ue=!0,Io=null,In=!1,o!==null&&H0(s,o),s=Hc(s,f),s.flags|=4096;return s}return o=Vi(o.child,{mode:f.mode,children:f.children}),o.ref=s.ref,s.child=o,o.return=s,o}function Gc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function om(o,s,l,f,v){return Ar(s),l=Bp(o,s,l,f,void 0,v),f=Fp(),o!==null&&!gt?($p(o,s,v),Yi(o,s,v)):(Ue&&f&&_p(s),s.flags|=1,Nt(o,s,l,v),s.child)}function nb(o,s,l,f,v,_){return Ar(s),s.updateQueue=null,l=rS(s,f,l,v),oS(o),f=Fp(),o!==null&&!gt?($p(o,s,_),Yi(o,s,_)):(Ue&&f&&_p(s),s.flags|=1,Nt(o,s,l,_),s.child)}function ib(o,s,l,f,v){if(Ar(s),s.stateNode===null){var _=ws,T=l.contextType;typeof T=="object"&&T!==null&&(_=Mt(T)),_=new l(f,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=tm,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=f,_.state=s.memoizedState,_.refs={},Np(s),T=l.contextType,_.context=typeof T=="object"&&T!==null?Mt(T):ws,_.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(em(s,l,T,f),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&tm.enqueueReplaceState(_,_.state,null),cl(s,f,_,v),ul(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(o===null){_=s.stateNode;var R=s.memoizedProps,P=Or(l,R);_.props=P;var G=_.context,X=l.contextType;T=ws,typeof X=="object"&&X!==null&&(T=Mt(X));var te=l.getDerivedStateFromProps;X=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||G!==T)&&VS(s,_,f,T),Po=!1;var z=s.memoizedState;_.state=z,cl(s,f,_,v),ul(),G=s.memoizedState,R||z!==G||Po?(typeof te=="function"&&(em(s,l,te,f),G=s.memoizedState),(P=Po||GS(s,l,P,f,z,G,T))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=G),_.props=f,_.state=G,_.context=T,f=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,Ip(o,s),T=s.memoizedProps,X=Or(l,T),_.props=X,te=s.pendingProps,z=_.context,G=l.contextType,P=ws,typeof G=="object"&&G!==null&&(P=Mt(G)),R=l.getDerivedStateFromProps,(G=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==te||z!==P)&&VS(s,_,f,P),Po=!1,z=s.memoizedState,_.state=z,cl(s,f,_,v),ul();var j=s.memoizedState;T!==te||z!==j||Po||o!==null&&o.dependencies!==null&&Ec(o.dependencies)?(typeof R=="function"&&(em(s,l,R,f),j=s.memoizedState),(X=Po||GS(s,l,X,f,z,j,P)||o!==null&&o.dependencies!==null&&Ec(o.dependencies))?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,j,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,j,P)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=j),_.props=f,_.state=j,_.context=P,f=X):(typeof _.componentDidUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&z===o.memoizedState||(s.flags|=1024),f=!1)}return _=f,Gc(o,s),f=(s.flags&128)!==0,_||f?(_=s.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&f?(s.child=Ir(s,o.child,null,v),s.child=Ir(s,null,l,v)):Nt(o,s,l,v),s.memoizedState=_.state,o=s.child):o=Yi(o,s,v),o}function ob(o,s,l,f){return Cr(),s.flags|=256,Nt(o,s,l,f),s.child}var rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sm(o){return{baseLanes:o,cachePool:j0()}}function am(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=hn),o}function rb(o,s,l){var f=s.pendingProps,v=!1,_=(s.flags&128)!==0,T;if((T=_)||(T=o!==null&&o.memoizedState===null?!1:(ft.current&2)!==0),T&&(v=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,o===null){if(Ue){if(v?Uo(s):Bo(),(o=rt)?(o=hw(o,In),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:No!==null?{id:vi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},l=B0(o),l.return=s,s.child=l,Rt=s,rt=null)):o=null,o===null)throw Do(s);return Vm(o)?s.lanes=32:s.lanes=536870912,null}var R=f.children;return f=f.fallback,v?(Bo(),v=s.mode,R=Vc({mode:"hidden",children:R},v),f=Tr(f,v,l,null),R.return=s,f.return=s,R.sibling=f,s.child=R,f=s.child,f.memoizedState=sm(l),f.childLanes=am(o,T,l),s.memoizedState=rm,ml(null,f)):(Uo(s),lm(s,R))}var P=o.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(_)s.flags&256?(Uo(s),s.flags&=-257,s=um(o,s,l)):s.memoizedState!==null?(Bo(),s.child=o.child,s.flags|=128,s=null):(Bo(),R=f.fallback,v=s.mode,f=Vc({mode:"visible",children:f.children},v),R=Tr(R,v,l,null),R.flags|=2,f.return=s,R.return=s,f.sibling=R,s.child=f,Ir(s,o.child,null,l),f=s.child,f.memoizedState=sm(l),f.childLanes=am(o,T,l),s.memoizedState=rm,s=ml(null,f));else if(Uo(s),Vm(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var G=T.dgst;T=G,f=Error(i(419)),f.stack="",f.digest=T,il({value:f,source:null,stack:null}),s=um(o,s,l)}else if(gt||xs(o,s,l,!1),T=(l&o.childLanes)!==0,gt||T){if(T=tt,T!==null&&(f=q_(T,l),f!==0&&f!==P.retryLane))throw P.retryLane=f,Er(o,f),Zt(T,o,f),im;Gm(R)||Qc(),s=um(o,s,l)}else Gm(R)?(s.flags|=192,s.child=o.child,s=null):(o=P.treeContext,rt=On(R.nextSibling),Rt=s,Ue=!0,Io=null,In=!1,o!==null&&H0(s,o),s=lm(s,f.children),s.flags|=4096);return s}return v?(Bo(),R=f.fallback,v=s.mode,P=o.child,G=P.sibling,f=Vi(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,G!==null?R=Vi(G,R):(R=Tr(R,v,l,null),R.flags|=2),R.return=s,f.return=s,f.sibling=R,s.child=f,ml(null,f),f=s.child,R=o.child.memoizedState,R===null?R=sm(l):(v=R.cachePool,v!==null?(P=pt._currentValue,v=v.parent!==P?{parent:P,pool:P}:v):v=j0(),R={baseLanes:R.baseLanes|l,cachePool:v}),f.memoizedState=R,f.childLanes=am(o,T,l),s.memoizedState=rm,ml(o.child,f)):(Uo(s),l=o.child,o=l.sibling,l=Vi(l,{mode:"visible",children:f.children}),l.return=s,l.sibling=null,o!==null&&(T=s.deletions,T===null?(s.deletions=[o],s.flags|=16):T.push(o)),s.child=l,s.memoizedState=null,l)}function lm(o,s){return s=Vc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Vc(o,s){return o=un(22,o,null,s),o.lanes=0,o}function um(o,s,l){return Ir(s,o.child,null,l),o=lm(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function sb(o,s,l){o.lanes|=s;var f=o.alternate;f!==null&&(f.lanes|=s),Tp(o.return,s,l)}function cm(o,s,l,f,v,_){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v,treeForkCount:_}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=f,T.tail=l,T.tailMode=v,T.treeForkCount=_)}function ab(o,s,l){var f=s.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var T=ft.current,R=(T&2)!==0;if(R?(T=T&1|2,s.flags|=128):T&=1,se(ft,T),Nt(o,s,f,l),f=Ue?nl:0,!R&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&sb(o,l,s);else if(o.tag===19)sb(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(l=s.child,v=null;l!==null;)o=l.alternate,o!==null&&Ic(o)===null&&(v=l),l=l.sibling;l=v,l===null?(v=s.child,s.child=null):(v=l.sibling,l.sibling=null),cm(s,!1,v,l,_,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&Ic(o)===null){s.child=v;break}o=v.sibling,v.sibling=l,l=v,v=o}cm(s,!0,l,null,_,f);break;case"together":cm(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Yi(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Ho|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(xs(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=Vi(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=Vi(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function fm(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Ec(o)))}function YO(o,s,l){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),Oo(s,pt,o.memoizedState.cache),Cr();break;case 27:case 5:rn(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:Oo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Lp(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Uo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?rb(o,s,l):(Uo(s),o=Yi(o,s,l),o!==null?o.sibling:null);Uo(s);break;case 19:var v=(o.flags&128)!==0;if(f=(l&s.childLanes)!==0,f||(xs(o,s,l,!1),f=(l&s.childLanes)!==0),v){if(f)return ab(o,s,l);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(ft,ft.current),f)break;return null;case 22:return s.lanes=0,ZS(o,s,l,s.pendingProps);case 24:Oo(s,pt,o.memoizedState.cache)}return Yi(o,s,l)}function lb(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)gt=!0;else{if(!fm(o,l)&&(s.flags&128)===0)return gt=!1,YO(o,s,l);gt=(o.flags&131072)!==0}else gt=!1,Ue&&(s.flags&1048576)!==0&&$0(s,nl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(o=Mr(s.elementType),s.type=o,typeof o=="function")gp(o)?(f=Or(o,f),s.tag=1,s=ib(null,s,o,f,l)):(s.tag=0,s=om(null,s,o,f,l));else{if(o!=null){var v=o.$$typeof;if(v===D){s.tag=11,s=XS(null,s,o,f,l);break e}else if(v===O){s.tag=14,s=WS(null,s,o,f,l);break e}}throw s=ae(o)||o,Error(i(306,s,""))}}return s;case 0:return om(o,s,s.type,s.pendingProps,l);case 1:return f=s.type,v=Or(f,s.pendingProps),ib(o,s,f,v,l);case 3:e:{if(qe(s,s.stateNode.containerInfo),o===null)throw Error(i(387));f=s.pendingProps;var _=s.memoizedState;v=_.element,Ip(o,s),cl(s,f,null,l);var T=s.memoizedState;if(f=T.cache,Oo(s,pt,f),f!==_.cache&&Cp(s,[pt],l,!0),ul(),f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=ob(o,s,f,l);break e}else if(f!==v){v=Rn(Error(i(424)),s),il(v),s=ob(o,s,f,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(rt=On(o.firstChild),Rt=s,Ue=!0,Io=null,In=!0,l=Z0(s,null,f,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Cr(),f===v){s=Yi(o,s,l);break e}Nt(o,s,f,l)}s=s.child}return s;case 26:return Gc(o,s),o===null?(l=_w(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ue||(l=s.type,o=s.pendingProps,f=sf(be.current).createElement(l),f[At]=s,f[jt]=o,It(f,l,o),wt(f),s.stateNode=f):s.memoizedState=_w(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return rn(s),o===null&&Ue&&(f=s.stateNode=gw(s.type,s.pendingProps,be.current),Rt=s,In=!0,v=rt,Jo(s.type)?(zm=v,rt=On(f.firstChild)):rt=v),Nt(o,s,s.pendingProps.children,l),Gc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Ue&&((v=f=rt)&&(f=CP(f,s.type,s.pendingProps,In),f!==null?(s.stateNode=f,Rt=s,rt=On(f.firstChild),In=!1,v=!0):v=!1),v||Do(s)),rn(s),v=s.type,_=s.pendingProps,T=o!==null?o.memoizedProps:null,f=_.children,Fm(v,_)?f=null:T!==null&&Fm(v,T)&&(s.flags|=32),s.memoizedState!==null&&(v=Bp(o,s,$O,null,null,l),Nl._currentValue=v),Gc(o,s),Nt(o,s,f,l),s.child;case 6:return o===null&&Ue&&((o=l=rt)&&(l=xP(l,s.pendingProps,In),l!==null?(s.stateNode=l,Rt=s,rt=null,o=!0):o=!1),o||Do(s)),null;case 13:return rb(o,s,l);case 4:return qe(s,s.stateNode.containerInfo),f=s.pendingProps,o===null?s.child=Ir(s,null,f,l):Nt(o,s,f,l),s.child;case 11:return XS(o,s,s.type,s.pendingProps,l);case 7:return Nt(o,s,s.pendingProps,l),s.child;case 8:return Nt(o,s,s.pendingProps.children,l),s.child;case 12:return Nt(o,s,s.pendingProps.children,l),s.child;case 10:return f=s.pendingProps,Oo(s,s.type,f.value),Nt(o,s,f.children,l),s.child;case 9:return v=s.type._context,f=s.pendingProps.children,Ar(s),v=Mt(v),f=f(v),s.flags|=1,Nt(o,s,f,l),s.child;case 14:return WS(o,s,s.type,s.pendingProps,l);case 15:return QS(o,s,s.type,s.pendingProps,l);case 19:return ab(o,s,l);case 31:return KO(o,s,l);case 22:return ZS(o,s,l,s.pendingProps);case 24:return Ar(s),f=Mt(pt),o===null?(v=Rp(),v===null&&(v=tt,_=xp(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=l),v=_),s.memoizedState={parent:f,cache:v},Np(s),Oo(s,pt,v)):((o.lanes&l)!==0&&(Ip(o,s),cl(s,null,null,l),ul()),v=o.memoizedState,_=s.memoizedState,v.parent!==f?(v={parent:f,cache:f},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Oo(s,pt,f)):(f=_.cache,Oo(s,pt,f),f!==v.cache&&Cp(s,[pt],l,!0))),Nt(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Xi(o){o.flags|=4}function dm(o,s,l,f,v){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(kb())o.flags|=8192;else throw Nr=Ac,Mp}else o.flags&=-16777217}function ub(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Tw(s))if(kb())o.flags|=8192;else throw Nr=Ac,Mp}function zc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?G_():536870912,o.lanes|=s,Bs|=s)}function gl(o,s){if(!Ue)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function st(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,f=0;if(s)for(var v=o.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=f,o.childLanes=l,s}function XO(o,s,l){var f=s.pendingProps;switch(Sp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(s),null;case 1:return st(s),null;case 3:return l=s.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Ji(pt),Je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(Cs(s)?Xi(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,wp())),st(s),null;case 26:var v=s.type,_=s.memoizedState;return o===null?(Xi(s),_!==null?(st(s),ub(s,_)):(st(s),dm(s,v,null,f,l))):_?_!==o.memoizedState?(Xi(s),st(s),ub(s,_)):(st(s),s.flags&=-16777217):(o=o.memoizedProps,o!==f&&Xi(s),st(s),dm(s,v,o,f,l)),null;case 27:if(Tn(s),l=be.current,v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&Xi(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return st(s),null}o=le.current,Cs(s)?G0(s):(o=gw(v,f,l),s.stateNode=o,Xi(s))}return st(s),null;case 5:if(Tn(s),v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&Xi(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return st(s),null}if(_=le.current,Cs(s))G0(s);else{var T=sf(be.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?T.createElement("select",{is:f.is}):T.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?T.createElement(v,{is:f.is}):T.createElement(v)}}_[At]=s,_[jt]=f;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=_;e:switch(It(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Xi(s)}}return st(s),dm(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,l),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==f&&Xi(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(o=be.current,Cs(s)){if(o=s.stateNode,l=s.memoizedProps,f=null,v=Rt,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}o[At]=s,o=!!(o.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||rw(o.nodeValue,l)),o||Do(s,!0)}else o=sf(o).createTextNode(f),o[At]=s,s.stateNode=o}return st(s),null;case 31:if(l=s.memoizedState,o===null||o.memoizedState!==null){if(f=Cs(s),l!==null){if(o===null){if(!f)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[At]=s}else Cr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),o=!1}else l=wp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=l),o=!0;if(!o)return s.flags&256?(fn(s),s):(fn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return st(s),null;case 13:if(f=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Cs(s),f!==null&&f.dehydrated!==null){if(o===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[At]=s}else Cr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),v=!1}else v=wp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(fn(s),s):(fn(s),null)}return fn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=f!==null,o=o!==null&&o.memoizedState!==null,l&&(f=s.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),l!==o&&l&&(s.child.flags|=8192),zc(s,s.updateQueue),st(s),null);case 4:return Je(),o===null&&Pm(s.stateNode.containerInfo),st(s),null;case 10:return Ji(s.type),st(s),null;case 19:if(K(ft),f=s.memoizedState,f===null)return st(s),null;if(v=(s.flags&128)!==0,_=f.rendering,_===null)if(v)gl(f,!1);else{if(ct!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Ic(o),_!==null){for(s.flags|=128,gl(f,!1),o=_.updateQueue,s.updateQueue=o,zc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)U0(l,o),l=l.sibling;return se(ft,ft.current&1|2),Ue&&zi(s,f.treeForkCount),s.child}o=o.sibling}f.tail!==null&&xt()>Yc&&(s.flags|=128,v=!0,gl(f,!1),s.lanes=4194304)}else{if(!v)if(o=Ic(_),o!==null){if(s.flags|=128,v=!0,o=o.updateQueue,s.updateQueue=o,zc(s,o),gl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Ue)return st(s),null}else 2*xt()-f.renderingStartTime>Yc&&l!==536870912&&(s.flags|=128,v=!0,gl(f,!1),s.lanes=4194304);f.isBackwards?(_.sibling=s.child,s.child=_):(o=f.last,o!==null?o.sibling=_:s.child=_,f.last=_)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=xt(),o.sibling=null,l=ft.current,se(ft,v?l&1|2:l&1),Ue&&zi(s,f.treeForkCount),o):(st(s),null);case 22:case 23:return fn(s),kp(),f=s.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(l&536870912)!==0&&(s.flags&128)===0&&(st(s),s.subtreeFlags&6&&(s.flags|=8192)):st(s),l=s.updateQueue,l!==null&&zc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==l&&(s.flags|=2048),o!==null&&K(Rr),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ji(pt),st(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function WO(o,s){switch(Sp(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Ji(pt),Je(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Tn(s),null;case 31:if(s.memoizedState!==null){if(fn(s),s.alternate===null)throw Error(i(340));Cr()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(fn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Cr()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return K(ft),null;case 4:return Je(),null;case 10:return Ji(s.type),null;case 22:case 23:return fn(s),kp(),o!==null&&K(Rr),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Ji(pt),null;case 25:return null;default:return null}}function cb(o,s){switch(Sp(s),s.tag){case 3:Ji(pt),Je();break;case 26:case 27:case 5:Tn(s);break;case 4:Je();break;case 31:s.memoizedState!==null&&fn(s);break;case 13:fn(s);break;case 19:K(ft);break;case 10:Ji(s.type);break;case 22:case 23:fn(s),kp(),o!==null&&K(Rr);break;case 24:Ji(pt)}}function vl(o,s){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&o)===o){f=void 0;var _=l.create,T=l.inst;f=_(),T.destroy=f}l=l.next}while(l!==v)}}catch(R){Ye(s,s.return,R)}}function Fo(o,s,l){try{var f=s.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&o)===o){var T=f.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,v=s;var P=l,G=R;try{G()}catch(X){Ye(v,P,X)}}}f=f.next}while(f!==_)}}catch(X){Ye(s,s.return,X)}}function fb(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{tS(s,l)}catch(f){Ye(o,o.return,f)}}}function db(o,s,l){l.props=Or(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(f){Ye(o,s,f)}}function yl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof l=="function"?o.refCleanup=l(f):l.current=f}}catch(v){Ye(o,s,v)}}function _i(o,s){var l=o.ref,f=o.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){Ye(o,s,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Ye(o,s,v)}else l.current=null}function hb(o){var s=o.type,l=o.memoizedProps,f=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){Ye(o,o.return,v)}}function hm(o,s,l){try{var f=o.stateNode;_P(f,o.type,l,s),f[jt]=s}catch(v){Ye(o,o.return,v)}}function pb(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Jo(o.type)||o.tag===4}function pm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||pb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Jo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function mm(o,s,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Hi));else if(f!==4&&(f===27&&Jo(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(mm(o,s,l),o=o.sibling;o!==null;)mm(o,s,l),o=o.sibling}function qc(o,s,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(f!==4&&(f===27&&Jo(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(qc(o,s,l),o=o.sibling;o!==null;)qc(o,s,l),o=o.sibling}function mb(o){var s=o.stateNode,l=o.memoizedProps;try{for(var f=o.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);It(s,f,l),s[At]=o,s[jt]=l}catch(_){Ye(o,o.return,_)}}var Wi=!1,vt=!1,gm=!1,gb=typeof WeakSet=="function"?WeakSet:Set,Et=null;function QO(o,s){if(o=o.containerInfo,Um=hf,o=R0(o),up(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var T=0,R=-1,P=-1,G=0,X=0,te=o,z=null;t:for(;;){for(var j;te!==l||v!==0&&te.nodeType!==3||(R=T+v),te!==_||f!==0&&te.nodeType!==3||(P=T+f),te.nodeType===3&&(T+=te.nodeValue.length),(j=te.firstChild)!==null;)z=te,te=j;for(;;){if(te===o)break t;if(z===l&&++G===v&&(R=T),z===_&&++X===f&&(P=T),(j=te.nextSibling)!==null)break;te=z,z=te.parentNode}te=j}l=R===-1||P===-1?null:{start:R,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bm={focusedElem:o,selectionRange:l},hf=!1,Et=s;Et!==null;)if(s=Et,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Et=o;else for(;Et!==null;){switch(s=Et,_=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(l=0;l<o.length;l++)v=o[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,l=s,v=_.memoizedProps,_=_.memoizedState,f=l.stateNode;try{var he=Or(l.type,v);o=f.getSnapshotBeforeUpdate(he,_),f.__reactInternalSnapshotBeforeUpdate=o}catch(Ee){Ye(l,l.return,Ee)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)Hm(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Hm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,Et=o;break}Et=s.return}}function vb(o,s,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Zi(o,l),f&4&&vl(5,l);break;case 1:if(Zi(o,l),f&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(T){Ye(l,l.return,T)}else{var v=Or(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(v,s,o.__reactInternalSnapshotBeforeUpdate)}catch(T){Ye(l,l.return,T)}}f&64&&fb(l),f&512&&yl(l,l.return);break;case 3:if(Zi(o,l),f&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{tS(o,s)}catch(T){Ye(l,l.return,T)}}break;case 27:s===null&&f&4&&mb(l);case 26:case 5:Zi(o,l),s===null&&f&4&&hb(l),f&512&&yl(l,l.return);break;case 12:Zi(o,l);break;case 31:Zi(o,l),f&4&&Sb(o,l);break;case 13:Zi(o,l),f&4&&bb(o,l),f&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=aP.bind(null,l),AP(o,l))));break;case 22:if(f=l.memoizedState!==null||Wi,!f){s=s!==null&&s.memoizedState!==null||vt,v=Wi;var _=vt;Wi=f,(vt=s)&&!_?eo(o,l,(l.subtreeFlags&8772)!==0):Zi(o,l),Wi=v,vt=_}break;case 30:break;default:Zi(o,l)}}function yb(o){var s=o.alternate;s!==null&&(o.alternate=null,yb(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Jh(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var lt=null,Yt=!1;function Qi(o,s,l){for(l=l.child;l!==null;)_b(o,s,l),l=l.sibling}function _b(o,s,l){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Ga,l)}catch{}switch(l.tag){case 26:vt||_i(l,s),Qi(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:vt||_i(l,s);var f=lt,v=Yt;Jo(l.type)&&(lt=l.stateNode,Yt=!1),Qi(o,s,l),Al(l.stateNode),lt=f,Yt=v;break;case 5:vt||_i(l,s);case 6:if(f=lt,v=Yt,lt=null,Qi(o,s,l),lt=f,Yt=v,lt!==null)if(Yt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(l.stateNode)}catch(_){Ye(l,s,_)}else try{lt.removeChild(l.stateNode)}catch(_){Ye(l,s,_)}break;case 18:lt!==null&&(Yt?(o=lt,fw(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Js(o)):fw(lt,l.stateNode));break;case 4:f=lt,v=Yt,lt=l.stateNode.containerInfo,Yt=!0,Qi(o,s,l),lt=f,Yt=v;break;case 0:case 11:case 14:case 15:Fo(2,l,s),vt||Fo(4,l,s),Qi(o,s,l);break;case 1:vt||(_i(l,s),f=l.stateNode,typeof f.componentWillUnmount=="function"&&db(l,s,f)),Qi(o,s,l);break;case 21:Qi(o,s,l);break;case 22:vt=(f=vt)||l.memoizedState!==null,Qi(o,s,l),vt=f;break;default:Qi(o,s,l)}}function Sb(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Js(o)}catch(l){Ye(s,s.return,l)}}}function bb(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Js(o)}catch(l){Ye(s,s.return,l)}}function ZO(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new gb),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new gb),s;default:throw Error(i(435,o.tag))}}function Jc(o,s){var l=ZO(o);s.forEach(function(f){if(!l.has(f)){l.add(f);var v=lP.bind(null,o,f);f.then(v,v)}})}function Xt(o,s){var l=s.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],_=o,T=s,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(Jo(R.type)){lt=R.stateNode,Yt=!1;break e}break;case 5:lt=R.stateNode,Yt=!1;break e;case 3:case 4:lt=R.stateNode.containerInfo,Yt=!0;break e}R=R.return}if(lt===null)throw Error(i(160));_b(_,T,v),lt=null,Yt=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wb(s,o),s=s.sibling}var Qn=null;function wb(o,s){var l=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Xt(s,o),Wt(o),f&4&&(Fo(3,o,o.return),vl(3,o),Fo(5,o,o.return));break;case 1:Xt(s,o),Wt(o),f&512&&(vt||l===null||_i(l,l.return)),f&64&&Wi&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=Qn;if(Xt(s,o),Wt(o),f&512&&(vt||l===null||_i(l,l.return)),f&4){var _=l!==null?l.memoizedState:null;if(f=o.memoizedState,l===null)if(f===null)if(o.stateNode===null){e:{f=o.type,l=o.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[qa]||_[At]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),It(_,f,l),_[At]=o,wt(_),f=_;break e;case"link":var T=ww("link","href",v).get(f+(l.href||""));if(T){for(var R=0;R<T.length;R++)if(_=T[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(R,1);break t}}_=v.createElement(f),It(_,f,l),v.head.appendChild(_);break;case"meta":if(T=ww("meta","content",v).get(f+(l.content||""))){for(R=0;R<T.length;R++)if(_=T[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(R,1);break t}}_=v.createElement(f),It(_,f,l),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[At]=o,wt(_),f=_}o.stateNode=f}else Ew(v,o.type,o.stateNode);else o.stateNode=bw(v,f,o.memoizedProps);else _!==f?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,f===null?Ew(v,o.type,o.stateNode):bw(v,f,o.memoizedProps)):f===null&&o.stateNode!==null&&hm(o,o.memoizedProps,l.memoizedProps)}break;case 27:Xt(s,o),Wt(o),f&512&&(vt||l===null||_i(l,l.return)),l!==null&&f&4&&hm(o,o.memoizedProps,l.memoizedProps);break;case 5:if(Xt(s,o),Wt(o),f&512&&(vt||l===null||_i(l,l.return)),o.flags&32){v=o.stateNode;try{ms(v,"")}catch(he){Ye(o,o.return,he)}}f&4&&o.stateNode!=null&&(v=o.memoizedProps,hm(o,v,l!==null?l.memoizedProps:v)),f&1024&&(gm=!0);break;case 6:if(Xt(s,o),Wt(o),f&4){if(o.stateNode===null)throw Error(i(162));f=o.memoizedProps,l=o.stateNode;try{l.nodeValue=f}catch(he){Ye(o,o.return,he)}}break;case 3:if(uf=null,v=Qn,Qn=af(s.containerInfo),Xt(s,o),Qn=v,Wt(o),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Js(s.containerInfo)}catch(he){Ye(o,o.return,he)}gm&&(gm=!1,Eb(o));break;case 4:f=Qn,Qn=af(o.stateNode.containerInfo),Xt(s,o),Wt(o),Qn=f;break;case 12:Xt(s,o),Wt(o);break;case 31:Xt(s,o),Wt(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Jc(o,f)));break;case 13:Xt(s,o),Wt(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Kc=xt()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Jc(o,f)));break;case 22:v=o.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,G=Wi,X=vt;if(Wi=G||v,vt=X||P,Xt(s,o),vt=X,Wi=G,Wt(o),f&8192)e:for(s=o.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(l===null||P||Wi||vt||Pr(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){P=l=s;try{if(_=P.stateNode,v)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=P.stateNode;var te=P.memoizedProps.style,z=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(he){Ye(P,P.return,he)}}}else if(s.tag===6){if(l===null){P=s;try{P.stateNode.nodeValue=v?"":P.memoizedProps}catch(he){Ye(P,P.return,he)}}}else if(s.tag===18){if(l===null){P=s;try{var j=P.stateNode;v?dw(j,!0):dw(P.stateNode,!1)}catch(he){Ye(P,P.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=o.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Jc(o,l))));break;case 19:Xt(s,o),Wt(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Jc(o,f)));break;case 30:break;case 21:break;default:Xt(s,o),Wt(o)}}function Wt(o){var s=o.flags;if(s&2){try{for(var l,f=o.return;f!==null;){if(pb(f)){l=f;break}f=f.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,_=pm(o);qc(o,_,v);break;case 5:var T=l.stateNode;l.flags&32&&(ms(T,""),l.flags&=-33);var R=pm(o);qc(o,R,T);break;case 3:case 4:var P=l.stateNode.containerInfo,G=pm(o);mm(o,G,P);break;default:throw Error(i(161))}}catch(X){Ye(o,o.return,X)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Eb(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Eb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function Zi(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vb(o,s.alternate,s),s=s.sibling}function Pr(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Fo(4,s,s.return),Pr(s);break;case 1:_i(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&db(s,s.return,l),Pr(s);break;case 27:Al(s.stateNode);case 26:case 5:_i(s,s.return),Pr(s);break;case 22:s.memoizedState===null&&Pr(s);break;case 30:Pr(s);break;default:Pr(s)}o=o.sibling}}function eo(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,v=o,_=s,T=_.flags;switch(_.tag){case 0:case 11:case 15:eo(v,_,l),vl(4,_);break;case 1:if(eo(v,_,l),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(G){Ye(f,f.return,G)}if(f=_,v=f.updateQueue,v!==null){var R=f.stateNode;try{var P=v.shared.hiddenCallbacks;if(P!==null)for(v.shared.hiddenCallbacks=null,v=0;v<P.length;v++)eS(P[v],R)}catch(G){Ye(f,f.return,G)}}l&&T&64&&fb(_),yl(_,_.return);break;case 27:mb(_);case 26:case 5:eo(v,_,l),l&&f===null&&T&4&&hb(_),yl(_,_.return);break;case 12:eo(v,_,l);break;case 31:eo(v,_,l),l&&T&4&&Sb(v,_);break;case 13:eo(v,_,l),l&&T&4&&bb(v,_);break;case 22:_.memoizedState===null&&eo(v,_,l),yl(_,_.return);break;case 30:break;default:eo(v,_,l)}s=s.sibling}}function vm(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&ol(l))}function ym(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&ol(o))}function Zn(o,s,l,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Tb(o,s,l,f),s=s.sibling}function Tb(o,s,l,f){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Zn(o,s,l,f),v&2048&&vl(9,s);break;case 1:Zn(o,s,l,f);break;case 3:Zn(o,s,l,f),v&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&ol(o)));break;case 12:if(v&2048){Zn(o,s,l,f),o=s.stateNode;try{var _=s.memoizedProps,T=_.id,R=_.onPostCommit;typeof R=="function"&&R(T,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(P){Ye(s,s.return,P)}}else Zn(o,s,l,f);break;case 31:Zn(o,s,l,f);break;case 13:Zn(o,s,l,f);break;case 23:break;case 22:_=s.stateNode,T=s.alternate,s.memoizedState!==null?_._visibility&2?Zn(o,s,l,f):_l(o,s):_._visibility&2?Zn(o,s,l,f):(_._visibility|=2,ks(o,s,l,f,(s.subtreeFlags&10256)!==0||!1)),v&2048&&vm(T,s);break;case 24:Zn(o,s,l,f),v&2048&&ym(s.alternate,s);break;default:Zn(o,s,l,f)}}function ks(o,s,l,f,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=o,T=s,R=l,P=f,G=T.flags;switch(T.tag){case 0:case 11:case 15:ks(_,T,R,P,v),vl(8,T);break;case 23:break;case 22:var X=T.stateNode;T.memoizedState!==null?X._visibility&2?ks(_,T,R,P,v):_l(_,T):(X._visibility|=2,ks(_,T,R,P,v)),v&&G&2048&&vm(T.alternate,T);break;case 24:ks(_,T,R,P,v),v&&G&2048&&ym(T.alternate,T);break;default:ks(_,T,R,P,v)}s=s.sibling}}function _l(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,f=s,v=f.flags;switch(f.tag){case 22:_l(l,f),v&2048&&vm(f.alternate,f);break;case 24:_l(l,f),v&2048&&ym(f.alternate,f);break;default:_l(l,f)}s=s.sibling}}var Sl=8192;function Ls(o,s,l){if(o.subtreeFlags&Sl)for(o=o.child;o!==null;)Cb(o,s,l),o=o.sibling}function Cb(o,s,l){switch(o.tag){case 26:Ls(o,s,l),o.flags&Sl&&o.memoizedState!==null&&FP(l,Qn,o.memoizedState,o.memoizedProps);break;case 5:Ls(o,s,l);break;case 3:case 4:var f=Qn;Qn=af(o.stateNode.containerInfo),Ls(o,s,l),Qn=f;break;case 22:o.memoizedState===null&&(f=o.alternate,f!==null&&f.memoizedState!==null?(f=Sl,Sl=16777216,Ls(o,s,l),Sl=f):Ls(o,s,l));break;default:Ls(o,s,l)}}function xb(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function bl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];Et=f,Rb(f,o)}xb(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ab(o),o=o.sibling}function Ab(o){switch(o.tag){case 0:case 11:case 15:bl(o),o.flags&2048&&Fo(9,o,o.return);break;case 3:bl(o);break;case 12:bl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,jc(o)):bl(o);break;default:bl(o)}}function jc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];Et=f,Rb(f,o)}xb(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Fo(8,s,s.return),jc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,jc(s));break;default:jc(s)}o=o.sibling}}function Rb(o,s){for(;Et!==null;){var l=Et;switch(l.tag){case 0:case 11:case 15:Fo(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ol(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Et=f;else e:for(l=o;Et!==null;){f=Et;var v=f.sibling,_=f.return;if(yb(f),f===l){Et=null;break e}if(v!==null){v.return=_,Et=v;break e}Et=_}}}var eP={getCacheForType:function(o){var s=Mt(pt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l},cacheSignal:function(){return Mt(pt).controller.signal}},tP=typeof WeakMap=="function"?WeakMap:Map,je=0,tt=null,Oe=null,ke=0,Ke=0,dn=null,$o=!1,Us=!1,_m=!1,to=0,ct=0,Ho=0,kr=0,Sm=0,hn=0,Bs=0,wl=null,Qt=null,bm=!1,Kc=0,Mb=0,Yc=1/0,Xc=null,Go=null,_t=0,Vo=null,Fs=null,no=0,wm=0,Em=null,Nb=null,El=0,Tm=null;function pn(){return(je&2)!==0&&ke!==0?ke&-ke:F.T!==null?Nm():J_()}function Ib(){if(hn===0)if((ke&536870912)===0||Ue){var o=oc;oc<<=1,(oc&3932160)===0&&(oc=262144),hn=o}else hn=536870912;return o=cn.current,o!==null&&(o.flags|=32),hn}function Zt(o,s,l){(o===tt&&(Ke===2||Ke===9)||o.cancelPendingCommit!==null)&&($s(o,0),zo(o,ke,hn,!1)),za(o,l),((je&2)===0||o!==tt)&&(o===tt&&((je&2)===0&&(kr|=l),ct===4&&zo(o,ke,hn,!1)),Si(o))}function Db(o,s,l){if((je&6)!==0)throw Error(i(327));var f=!l&&(s&127)===0&&(s&o.expiredLanes)===0||Va(o,s),v=f?oP(o,s):xm(o,s,!0),_=f;do{if(v===0){Us&&!f&&zo(o,s,0,!1);break}else{if(l=o.current.alternate,_&&!nP(l)){v=xm(o,s,!1),_=!1;continue}if(v===2){if(_=s,o.errorRecoveryDisabledLanes&_)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var R=o;v=wl;var P=R.current.memoizedState.isDehydrated;if(P&&($s(R,T).flags|=256),T=xm(R,T,!1),T!==2){if(_m&&!P){R.errorRecoveryDisabledLanes|=_,kr|=_,v=4;break e}_=Qt,Qt=v,_!==null&&(Qt===null?Qt=_:Qt.push.apply(Qt,_))}v=T}if(_=!1,v!==2)continue}}if(v===1){$s(o,0),zo(o,s,0,!0);break}e:{switch(f=o,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:zo(f,s,hn,!$o);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=Kc+300-xt(),10<v)){if(zo(f,s,hn,!$o),sc(f,0,!0)!==0)break e;no=s,f.timeoutHandle=uw(Ob.bind(null,f,l,Qt,Xc,bm,s,hn,kr,Bs,$o,_,"Throttled",-0,0),v);break e}Ob(f,l,Qt,Xc,bm,s,hn,kr,Bs,$o,_,null,-0,0)}}break}while(!0);Si(o)}function Ob(o,s,l,f,v,_,T,R,P,G,X,te,z,j){if(o.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hi},Cb(s,_,te);var he=(_&62914560)===_?Kc-xt():(_&4194048)===_?Mb-xt():0;if(he=$P(te,he),he!==null){no=_,o.cancelPendingCommit=he(Hb.bind(null,o,s,_,l,f,v,T,R,P,X,te,null,z,j)),zo(o,_,T,!G);return}}Hb(o,s,_,l,f,v,T,R,P)}function nP(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],_=v.getSnapshot;v=v.value;try{if(!ln(_(),v))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zo(o,s,l,f){s&=~Sm,s&=~kr,o.suspendedLanes|=s,o.pingedLanes&=~s,f&&(o.warmLanes|=s),f=o.expirationTimes;for(var v=s;0<v;){var _=31-an(v),T=1<<_;f[_]=-1,v&=~T}l!==0&&V_(o,l,s)}function Wc(){return(je&6)===0?(Tl(0),!1):!0}function Cm(){if(Oe!==null){if(Ke===0)var o=Oe.return;else o=Oe,qi=xr=null,Hp(o),Ns=null,sl=0,o=Oe;for(;o!==null;)cb(o.alternate,o),o=o.return;Oe=null}}function $s(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,wP(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),no=0,Cm(),tt=o,Oe=l=Vi(o.current,null),ke=s,Ke=0,dn=null,$o=!1,Us=Va(o,s),_m=!1,Bs=hn=Sm=kr=Ho=ct=0,Qt=wl=null,bm=!1,(s&8)!==0&&(s|=s&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=s;0<f;){var v=31-an(f),_=1<<v;s|=o[v],f&=~_}return to=s,yc(),l}function Pb(o,s){Re=null,F.H=pl,s===Ms||s===xc?(s=X0(),Ke=3):s===Mp?(s=X0(),Ke=4):Ke=s===im?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,dn=s,Oe===null&&(ct=1,$c(o,Rn(s,o.current)))}function kb(){var o=cn.current;return o===null?!0:(ke&4194048)===ke?Dn===null:(ke&62914560)===ke||(ke&536870912)!==0?o===Dn:!1}function Lb(){var o=F.H;return F.H=pl,o===null?pl:o}function Ub(){var o=F.A;return F.A=eP,o}function Qc(){ct=4,$o||(ke&4194048)!==ke&&cn.current!==null||(Us=!0),(Ho&134217727)===0&&(kr&134217727)===0||tt===null||zo(tt,ke,hn,!1)}function xm(o,s,l){var f=je;je|=2;var v=Lb(),_=Ub();(tt!==o||ke!==s)&&(Xc=null,$s(o,s)),s=!1;var T=ct;e:do try{if(Ke!==0&&Oe!==null){var R=Oe,P=dn;switch(Ke){case 8:Cm(),T=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(s=!0);var G=Ke;if(Ke=0,dn=null,Hs(o,R,P,G),l&&Us){T=0;break e}break;default:G=Ke,Ke=0,dn=null,Hs(o,R,P,G)}}iP(),T=ct;break}catch(X){Pb(o,X)}while(!0);return s&&o.shellSuspendCounter++,qi=xr=null,je=f,F.H=v,F.A=_,Oe===null&&(tt=null,ke=0,yc()),T}function iP(){for(;Oe!==null;)Bb(Oe)}function oP(o,s){var l=je;je|=2;var f=Lb(),v=Ub();tt!==o||ke!==s?(Xc=null,Yc=xt()+500,$s(o,s)):Us=Va(o,s);e:do try{if(Ke!==0&&Oe!==null){s=Oe;var _=dn;t:switch(Ke){case 1:Ke=0,dn=null,Hs(o,s,_,1);break;case 2:case 9:if(K0(_)){Ke=0,dn=null,Fb(s);break}s=function(){Ke!==2&&Ke!==9||tt!==o||(Ke=7),Si(o)},_.then(s,s);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:K0(_)?(Ke=0,dn=null,Fb(s)):(Ke=0,dn=null,Hs(o,s,_,7));break;case 5:var T=null;switch(Oe.tag){case 26:T=Oe.memoizedState;case 5:case 27:var R=Oe;if(T?Tw(T):R.stateNode.complete){Ke=0,dn=null;var P=R.sibling;if(P!==null)Oe=P;else{var G=R.return;G!==null?(Oe=G,Zc(G)):Oe=null}break t}}Ke=0,dn=null,Hs(o,s,_,5);break;case 6:Ke=0,dn=null,Hs(o,s,_,6);break;case 8:Cm(),ct=6;break e;default:throw Error(i(462))}}rP();break}catch(X){Pb(o,X)}while(!0);return qi=xr=null,F.H=f,F.A=v,je=l,Oe!==null?0:(tt=null,ke=0,yc(),ct)}function rP(){for(;Oe!==null&&!ec();)Bb(Oe)}function Bb(o){var s=lb(o.alternate,o,to);o.memoizedProps=o.pendingProps,s===null?Zc(o):Oe=s}function Fb(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=nb(l,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=nb(l,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:Hp(s);default:cb(l,s),s=Oe=U0(s,to),s=lb(l,s,to)}o.memoizedProps=o.pendingProps,s===null?Zc(o):Oe=s}function Hs(o,s,l,f){qi=xr=null,Hp(s),Ns=null,sl=0;var v=s.return;try{if(jO(o,v,s,l,ke)){ct=1,$c(o,Rn(l,o.current)),Oe=null;return}}catch(_){if(v!==null)throw Oe=v,_;ct=1,$c(o,Rn(l,o.current)),Oe=null;return}s.flags&32768?(Ue||f===1?o=!0:Us||(ke&536870912)!==0?o=!1:($o=o=!0,(f===2||f===9||f===3||f===6)&&(f=cn.current,f!==null&&f.tag===13&&(f.flags|=16384))),$b(s,o)):Zc(s)}function Zc(o){var s=o;do{if((s.flags&32768)!==0){$b(s,$o);return}o=s.return;var l=XO(s.alternate,s,to);if(l!==null){Oe=l;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=o}while(s!==null);ct===0&&(ct=5)}function $b(o,s){do{var l=WO(o.alternate,o);if(l!==null){l.flags&=32767,Oe=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){Oe=o;return}Oe=o=l}while(o!==null);ct=6,Oe=null}function Hb(o,s,l,f,v,_,T,R,P){o.cancelPendingCommit=null;do ef();while(_t!==0);if((je&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=pp,B1(o,l,_,T,R,P),o===tt&&(Oe=tt=null,ke=0),Fs=s,Vo=o,no=l,wm=_,Em=v,Nb=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,uP(vr,function(){return Jb(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=F.T,F.T=null,v=Q.p,Q.p=2,T=je,je|=4;try{QO(o,s,l)}finally{je=T,Q.p=v,F.T=f}}_t=1,Gb(),Vb(),zb()}}function Gb(){if(_t===1){_t=0;var o=Vo,s=Fs,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var f=Q.p;Q.p=2;var v=je;je|=4;try{wb(s,o);var _=Bm,T=R0(o.containerInfo),R=_.focusedElem,P=_.selectionRange;if(T!==R&&R&&R.ownerDocument&&A0(R.ownerDocument.documentElement,R)){if(P!==null&&up(R)){var G=P.start,X=P.end;if(X===void 0&&(X=G),"selectionStart"in R)R.selectionStart=G,R.selectionEnd=Math.min(X,R.value.length);else{var te=R.ownerDocument||document,z=te&&te.defaultView||window;if(z.getSelection){var j=z.getSelection(),he=R.textContent.length,Ee=Math.min(P.start,he),Qe=P.end===void 0?Ee:Math.min(P.end,he);!j.extend&&Ee>Qe&&(T=Qe,Qe=Ee,Ee=T);var $=x0(R,Ee),B=x0(R,Qe);if($&&B&&(j.rangeCount!==1||j.anchorNode!==$.node||j.anchorOffset!==$.offset||j.focusNode!==B.node||j.focusOffset!==B.offset)){var H=te.createRange();H.setStart($.node,$.offset),j.removeAllRanges(),Ee>Qe?(j.addRange(H),j.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),j.addRange(H))}}}}for(te=[],j=R;j=j.parentNode;)j.nodeType===1&&te.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var Z=te[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}hf=!!Um,Bm=Um=null}finally{je=v,Q.p=f,F.T=l}}o.current=s,_t=2}}function Vb(){if(_t===2){_t=0;var o=Vo,s=Fs,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var f=Q.p;Q.p=2;var v=je;je|=4;try{vb(o,s.alternate,s)}finally{je=v,Q.p=f,F.T=l}}_t=3}}function zb(){if(_t===4||_t===3){_t=0,tc();var o=Vo,s=Fs,l=no,f=Nb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?_t=5:(_t=0,Fs=Vo=null,qb(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Go=null),zh(l),s=s.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Ga,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=F.T,v=Q.p,Q.p=2,F.T=null;try{for(var _=o.onRecoverableError,T=0;T<f.length;T++){var R=f[T];_(R.value,{componentStack:R.stack})}}finally{F.T=s,Q.p=v}}(no&3)!==0&&ef(),Si(o),v=o.pendingLanes,(l&261930)!==0&&(v&42)!==0?o===Tm?El++:(El=0,Tm=o):El=0,Tl(0)}}function qb(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,ol(s)))}function ef(){return Gb(),Vb(),zb(),Jb()}function Jb(){if(_t!==5)return!1;var o=Vo,s=wm;wm=0;var l=zh(no),f=F.T,v=Q.p;try{Q.p=32>l?32:l,F.T=null,l=Em,Em=null;var _=Vo,T=no;if(_t=0,Fs=Vo=null,no=0,(je&6)!==0)throw Error(i(331));var R=je;if(je|=4,Ab(_.current),Tb(_,_.current,T,l),je=R,Tl(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Ga,_)}catch{}return!0}finally{Q.p=v,F.T=f,qb(o,s)}}function jb(o,s,l){s=Rn(l,s),s=nm(o.stateNode,s,2),o=Lo(o,s,2),o!==null&&(za(o,2),Si(o))}function Ye(o,s,l){if(o.tag===3)jb(o,o,l);else for(;s!==null;){if(s.tag===3){jb(s,o,l);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Go===null||!Go.has(f))){o=Rn(l,o),l=KS(2),f=Lo(s,l,2),f!==null&&(YS(l,f,s,o),za(f,2),Si(f));break}}s=s.return}}function Am(o,s,l){var f=o.pingCache;if(f===null){f=o.pingCache=new tP;var v=new Set;f.set(s,v)}else v=f.get(s),v===void 0&&(v=new Set,f.set(s,v));v.has(l)||(_m=!0,v.add(l),o=sP.bind(null,o,s,l),s.then(o,o))}function sP(o,s,l){var f=o.pingCache;f!==null&&f.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,tt===o&&(ke&l)===l&&(ct===4||ct===3&&(ke&62914560)===ke&&300>xt()-Kc?(je&2)===0&&$s(o,0):Sm|=l,Bs===ke&&(Bs=0)),Si(o)}function Kb(o,s){s===0&&(s=G_()),o=Er(o,s),o!==null&&(za(o,s),Si(o))}function aP(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),Kb(o,l)}function lP(o,s){var l=0;switch(o.tag){case 31:case 13:var f=o.stateNode,v=o.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),Kb(o,l)}function uP(o,s){return Xn(o,s)}var tf=null,Gs=null,Rm=!1,nf=!1,Mm=!1,qo=0;function Si(o){o!==Gs&&o.next===null&&(Gs===null?tf=Gs=o:Gs=Gs.next=o),nf=!0,Rm||(Rm=!0,fP())}function Tl(o,s){if(!Mm&&nf){Mm=!0;do for(var l=!1,f=tf;f!==null;){if(o!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var T=f.suspendedLanes,R=f.pingedLanes;_=(1<<31-an(42|o)+1)-1,_&=v&~(T&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,Qb(f,_))}else _=ke,_=sc(f,f===tt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Va(f,_)||(l=!0,Qb(f,_));f=f.next}while(l);Mm=!1}}function cP(){Yb()}function Yb(){nf=Rm=!1;var o=0;qo!==0&&bP()&&(o=qo);for(var s=xt(),l=null,f=tf;f!==null;){var v=f.next,_=Xb(f,s);_===0?(f.next=null,l===null?tf=v:l.next=v,v===null&&(Gs=l)):(l=f,(o!==0||(_&3)!==0)&&(nf=!0)),f=v}_t!==0&&_t!==5||Tl(o),qo!==0&&(qo=0)}function Xb(o,s){for(var l=o.suspendedLanes,f=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var T=31-an(_),R=1<<T,P=v[T];P===-1?((R&l)===0||(R&f)!==0)&&(v[T]=U1(R,s)):P<=s&&(o.expiredLanes|=R),_&=~R}if(s=tt,l=ke,l=sc(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,l===0||o===s&&(Ke===2||Ke===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&xo(f),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||Va(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(f!==null&&xo(f),zh(l)){case 2:case 8:l=Ha;break;case 32:l=vr;break;case 268435456:l=H_;break;default:l=vr}return f=Wb.bind(null,o),l=Xn(l,f),o.callbackPriority=s,o.callbackNode=l,s}return f!==null&&f!==null&&xo(f),o.callbackPriority=2,o.callbackNode=null,2}function Wb(o,s){if(_t!==0&&_t!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(ef()&&o.callbackNode!==l)return null;var f=ke;return f=sc(o,o===tt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(Db(o,f,s),Xb(o,xt()),o.callbackNode!=null&&o.callbackNode===l?Wb.bind(null,o):null)}function Qb(o,s){if(ef())return null;Db(o,s,!0)}function fP(){EP(function(){(je&6)!==0?Xn($a,cP):Yb()})}function Nm(){if(qo===0){var o=As;o===0&&(o=ic,ic<<=1,(ic&261888)===0&&(ic=256)),qo=o}return qo}function Zb(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:cc(""+o)}function ew(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function dP(o,s,l,f,v){if(s==="submit"&&l&&l.stateNode===v){var _=Zb((v[jt]||null).action),T=f.submitter;T&&(s=(s=T[jt]||null)?Zb(s.formAction):T.getAttribute("formAction"),s!==null&&(_=s,T=null));var R=new pc("action","action",null,f,v);o.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(qo!==0){var P=T?ew(v,T):new FormData(v);Xp(l,{pending:!0,data:P,method:v.method,action:_},null,P)}}else typeof _=="function"&&(R.preventDefault(),P=T?ew(v,T):new FormData(v),Xp(l,{pending:!0,data:P,method:v.method,action:_},_,P))},currentTarget:v}]})}}for(var Im=0;Im<hp.length;Im++){var Dm=hp[Im],hP=Dm.toLowerCase(),pP=Dm[0].toUpperCase()+Dm.slice(1);Wn(hP,"on"+pP)}Wn(I0,"onAnimationEnd"),Wn(D0,"onAnimationIteration"),Wn(O0,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(NO,"onTransitionRun"),Wn(IO,"onTransitionStart"),Wn(DO,"onTransitionCancel"),Wn(P0,"onTransitionEnd"),hs("onMouseEnter",["mouseout","mouseover"]),hs("onMouseLeave",["mouseout","mouseover"]),hs("onPointerEnter",["pointerout","pointerover"]),hs("onPointerLeave",["pointerout","pointerover"]),_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_r("onBeforeInput",["compositionend","keypress","textInput","paste"]),_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function tw(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var f=o[l],v=f.event;f=f.listeners;e:{var _=void 0;if(s)for(var T=f.length-1;0<=T;T--){var R=f[T],P=R.instance,G=R.currentTarget;if(R=R.listener,P!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=G;try{_(v)}catch(X){vc(X)}v.currentTarget=null,_=P}else for(T=0;T<f.length;T++){if(R=f[T],P=R.instance,G=R.currentTarget,R=R.listener,P!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=G;try{_(v)}catch(X){vc(X)}v.currentTarget=null,_=P}}}}function Pe(o,s){var l=s[qh];l===void 0&&(l=s[qh]=new Set);var f=o+"__bubble";l.has(f)||(nw(s,o,2,!1),l.add(f))}function Om(o,s,l){var f=0;s&&(f|=4),nw(l,o,f,s)}var of="_reactListening"+Math.random().toString(36).slice(2);function Pm(o){if(!o[of]){o[of]=!0,Y_.forEach(function(l){l!=="selectionchange"&&(mP.has(l)||Om(l,!1,o),Om(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[of]||(s[of]=!0,Om("selectionchange",!1,s))}}function nw(o,s,l,f){switch(Iw(s)){case 2:var v=VP;break;case 8:v=zP;break;default:v=Ym}l=v.bind(null,s,l,o),v=void 0,!ep||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),f?v!==void 0?o.addEventListener(s,l,{capture:!0,passive:v}):o.addEventListener(s,l,!0):v!==void 0?o.addEventListener(s,l,{passive:v}):o.addEventListener(s,l,!1)}function km(o,s,l,f,v){var _=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var R=f.stateNode.containerInfo;if(R===v)break;if(T===4)for(T=f.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;R!==null;){if(T=cs(R),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){f=_=T;continue e}R=R.parentNode}}f=f.return}a0(function(){var G=_,X=Qh(l),te=[];e:{var z=k0.get(o);if(z!==void 0){var j=pc,he=o;switch(o){case"keypress":if(dc(l)===0)break e;case"keydown":case"keyup":j=lO;break;case"focusin":he="focus",j=op;break;case"focusout":he="blur",j=op;break;case"beforeblur":case"afterblur":j=op;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=c0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=X1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=fO;break;case I0:case D0:case O0:j=Z1;break;case P0:j=hO;break;case"scroll":case"scrollend":j=K1;break;case"wheel":j=mO;break;case"copy":case"cut":case"paste":j=tO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=d0;break;case"toggle":case"beforetoggle":j=vO}var Ee=(s&4)!==0,Qe=!Ee&&(o==="scroll"||o==="scrollend"),$=Ee?z!==null?z+"Capture":null:z;Ee=[];for(var B=G,H;B!==null;){var Z=B;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||$===null||(Z=ja(B,$),Z!=null&&Ee.push(xl(B,Z,H))),Qe)break;B=B.return}0<Ee.length&&(z=new j(z,he,null,l,X),te.push({event:z,listeners:Ee}))}}if((s&7)===0){e:{if(z=o==="mouseover"||o==="pointerover",j=o==="mouseout"||o==="pointerout",z&&l!==Wh&&(he=l.relatedTarget||l.fromElement)&&(cs(he)||he[us]))break e;if((j||z)&&(z=X.window===X?X:(z=X.ownerDocument)?z.defaultView||z.parentWindow:window,j?(he=l.relatedTarget||l.toElement,j=G,he=he?cs(he):null,he!==null&&(Qe=a(he),Ee=he.tag,he!==Qe||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(j=null,he=G),j!==he)){if(Ee=c0,Z="onMouseLeave",$="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=d0,Z="onPointerLeave",$="onPointerEnter",B="pointer"),Qe=j==null?z:Ja(j),H=he==null?z:Ja(he),z=new Ee(Z,B+"leave",j,l,X),z.target=Qe,z.relatedTarget=H,Z=null,cs(X)===G&&(Ee=new Ee($,B+"enter",he,l,X),Ee.target=H,Ee.relatedTarget=Qe,Z=Ee),Qe=Z,j&&he)t:{for(Ee=gP,$=j,B=he,H=0,Z=$;Z;Z=Ee(Z))H++;Z=0;for(var _e=B;_e;_e=Ee(_e))Z++;for(;0<H-Z;)$=Ee($),H--;for(;0<Z-H;)B=Ee(B),Z--;for(;H--;){if($===B||B!==null&&$===B.alternate){Ee=$;break t}$=Ee($),B=Ee(B)}Ee=null}else Ee=null;j!==null&&iw(te,z,j,Ee,!1),he!==null&&Qe!==null&&iw(te,Qe,he,Ee,!0)}}e:{if(z=G?Ja(G):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var He=S0;else if(y0(z))if(b0)He=AO;else{He=CO;var ge=TO}else j=z.nodeName,!j||j.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?G&&Xh(G.elementType)&&(He=S0):He=xO;if(He&&(He=He(o,G))){_0(te,He,l,X);break e}ge&&ge(o,z,G),o==="focusout"&&G&&z.type==="number"&&G.memoizedProps.value!=null&&Yh(z,"number",z.value)}switch(ge=G?Ja(G):window,o){case"focusin":(y0(ge)||ge.contentEditable==="true")&&(_s=ge,cp=G,tl=null);break;case"focusout":tl=cp=_s=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,M0(te,l,X);break;case"selectionchange":if(MO)break;case"keydown":case"keyup":M0(te,l,X)}var Me;if(sp)e:{switch(o){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ys?g0(o,l)&&(Le="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(h0&&l.locale!=="ko"&&(ys||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ys&&(Me=l0()):(Mo=X,tp="value"in Mo?Mo.value:Mo.textContent,ys=!0)),ge=rf(G,Le),0<ge.length&&(Le=new f0(Le,o,null,l,X),te.push({event:Le,listeners:ge}),Me?Le.data=Me:(Me=v0(l),Me!==null&&(Le.data=Me)))),(Me=_O?SO(o,l):bO(o,l))&&(Le=rf(G,"onBeforeInput"),0<Le.length&&(ge=new f0("onBeforeInput","beforeinput",null,l,X),te.push({event:ge,listeners:Le}),ge.data=Me)),dP(te,o,G,l,X)}tw(te,s)})}function xl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function rf(o,s){for(var l=s+"Capture",f=[];o!==null;){var v=o,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=ja(o,l),v!=null&&f.unshift(xl(o,v,_)),v=ja(o,s),v!=null&&f.push(xl(o,v,_))),o.tag===3)return f;o=o.return}return[]}function gP(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function iw(o,s,l,f,v){for(var _=s._reactName,T=[];l!==null&&l!==f;){var R=l,P=R.alternate,G=R.stateNode;if(R=R.tag,P!==null&&P===f)break;R!==5&&R!==26&&R!==27||G===null||(P=G,v?(G=ja(l,_),G!=null&&T.unshift(xl(l,G,P))):v||(G=ja(l,_),G!=null&&T.push(xl(l,G,P)))),l=l.return}T.length!==0&&o.push({event:s,listeners:T})}var vP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function ow(o){return(typeof o=="string"?o:""+o).replace(vP,`
`).replace(yP,"")}function rw(o,s){return s=ow(s),ow(o)===s}function We(o,s,l,f,v,_){switch(l){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||ms(o,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&ms(o,""+f);break;case"className":lc(o,"class",f);break;case"tabIndex":lc(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":lc(o,l,f);break;case"style":r0(o,f,_);break;case"data":if(s!=="object"){lc(o,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(l);break}f=cc(""+f),o.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&We(o,s,"name",v.name,v,null),We(o,s,"formEncType",v.formEncType,v,null),We(o,s,"formMethod",v.formMethod,v,null),We(o,s,"formTarget",v.formTarget,v,null)):(We(o,s,"encType",v.encType,v,null),We(o,s,"method",v.method,v,null),We(o,s,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(l);break}f=cc(""+f),o.setAttribute(l,f);break;case"onClick":f!=null&&(o.onclick=Hi);break;case"onScroll":f!=null&&Pe("scroll",o);break;case"onScrollEnd":f!=null&&Pe("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}l=cc(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,""+f):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":f===!0?o.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,f):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(l,f):o.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(l):o.setAttribute(l,f);break;case"popover":Pe("beforetoggle",o),Pe("toggle",o),ac(o,"popover",f);break;case"xlinkActuate":$i(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":$i(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":$i(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":$i(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":$i(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":$i(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":$i(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":$i(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":$i(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":ac(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=J1.get(l)||l,ac(o,l,f))}}function Lm(o,s,l,f,v,_){switch(l){case"style":r0(o,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof f=="string"?ms(o,f):(typeof f=="number"||typeof f=="bigint")&&ms(o,""+f);break;case"onScroll":f!=null&&Pe("scroll",o);break;case"onScrollEnd":f!=null&&Pe("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!X_.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),s=l.slice(2,v?l.length-7:void 0),_=o[jt]||null,_=_!=null?_[l]:null,typeof _=="function"&&o.removeEventListener(s,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,f,v);break e}l in o?o[l]=f:f===!0?o.setAttribute(l,""):ac(o,l,f)}}}function It(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",o),Pe("load",o);var f=!1,v=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var T=l[_];if(T!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:We(o,s,_,T,l,null)}}v&&We(o,s,"srcSet",l.srcSet,l,null),f&&We(o,s,"src",l.src,l,null);return;case"input":Pe("invalid",o);var R=_=T=v=null,P=null,G=null;for(f in l)if(l.hasOwnProperty(f)){var X=l[f];if(X!=null)switch(f){case"name":v=X;break;case"type":T=X;break;case"checked":P=X;break;case"defaultChecked":G=X;break;case"value":_=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:We(o,s,f,X,l,null)}}t0(o,_,R,P,G,T,v,!1);return;case"select":Pe("invalid",o),f=T=_=null;for(v in l)if(l.hasOwnProperty(v)&&(R=l[v],R!=null))switch(v){case"value":_=R;break;case"defaultValue":T=R;break;case"multiple":f=R;default:We(o,s,v,R,l,null)}s=_,l=T,o.multiple=!!f,s!=null?ps(o,!!f,s,!1):l!=null&&ps(o,!!f,l,!0);return;case"textarea":Pe("invalid",o),_=v=f=null;for(T in l)if(l.hasOwnProperty(T)&&(R=l[T],R!=null))switch(T){case"value":f=R;break;case"defaultValue":v=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:We(o,s,T,R,l,null)}i0(o,f,v,_);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(f=l[P],f!=null))switch(P){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:We(o,s,P,f,l,null)}return;case"dialog":Pe("beforetoggle",o),Pe("toggle",o),Pe("cancel",o),Pe("close",o);break;case"iframe":case"object":Pe("load",o);break;case"video":case"audio":for(f=0;f<Cl.length;f++)Pe(Cl[f],o);break;case"image":Pe("error",o),Pe("load",o);break;case"details":Pe("toggle",o);break;case"embed":case"source":case"link":Pe("error",o),Pe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(f=l[G],f!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:We(o,s,G,f,l,null)}return;default:if(Xh(s)){for(X in l)l.hasOwnProperty(X)&&(f=l[X],f!==void 0&&Lm(o,s,X,f,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(f=l[R],f!=null&&We(o,s,R,f,l,null))}function _P(o,s,l,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,T=null,R=null,P=null,G=null,X=null;for(j in l){var te=l[j];if(l.hasOwnProperty(j)&&te!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":P=te;default:f.hasOwnProperty(j)||We(o,s,j,null,f,te)}}for(var z in f){var j=f[z];if(te=l[z],f.hasOwnProperty(z)&&(j!=null||te!=null))switch(z){case"type":_=j;break;case"name":v=j;break;case"checked":G=j;break;case"defaultChecked":X=j;break;case"value":T=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,s));break;default:j!==te&&We(o,s,z,j,f,te)}}Kh(o,T,R,P,G,X,_,v);return;case"select":j=T=R=z=null;for(_ in l)if(P=l[_],l.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":j=P;default:f.hasOwnProperty(_)||We(o,s,_,null,f,P)}for(v in f)if(_=f[v],P=l[v],f.hasOwnProperty(v)&&(_!=null||P!=null))switch(v){case"value":z=_;break;case"defaultValue":R=_;break;case"multiple":T=_;default:_!==P&&We(o,s,v,_,f,P)}s=R,l=T,f=j,z!=null?ps(o,!!l,z,!1):!!f!=!!l&&(s!=null?ps(o,!!l,s,!0):ps(o,!!l,l?[]:"",!1));return;case"textarea":j=z=null;for(R in l)if(v=l[R],l.hasOwnProperty(R)&&v!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:We(o,s,R,null,f,v)}for(T in f)if(v=f[T],_=l[T],f.hasOwnProperty(T)&&(v!=null||_!=null))switch(T){case"value":z=v;break;case"defaultValue":j=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&We(o,s,T,v,f,_)}n0(o,z,j);return;case"option":for(var he in l)if(z=l[he],l.hasOwnProperty(he)&&z!=null&&!f.hasOwnProperty(he))switch(he){case"selected":o.selected=!1;break;default:We(o,s,he,null,f,z)}for(P in f)if(z=f[P],j=l[P],f.hasOwnProperty(P)&&z!==j&&(z!=null||j!=null))switch(P){case"selected":o.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:We(o,s,P,z,f,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)z=l[Ee],l.hasOwnProperty(Ee)&&z!=null&&!f.hasOwnProperty(Ee)&&We(o,s,Ee,null,f,z);for(G in f)if(z=f[G],j=l[G],f.hasOwnProperty(G)&&z!==j&&(z!=null||j!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,s));break;default:We(o,s,G,z,f,j)}return;default:if(Xh(s)){for(var Qe in l)z=l[Qe],l.hasOwnProperty(Qe)&&z!==void 0&&!f.hasOwnProperty(Qe)&&Lm(o,s,Qe,void 0,f,z);for(X in f)z=f[X],j=l[X],!f.hasOwnProperty(X)||z===j||z===void 0&&j===void 0||Lm(o,s,X,z,f,j);return}}for(var $ in l)z=l[$],l.hasOwnProperty($)&&z!=null&&!f.hasOwnProperty($)&&We(o,s,$,null,f,z);for(te in f)z=f[te],j=l[te],!f.hasOwnProperty(te)||z===j||z==null&&j==null||We(o,s,te,z,f,j)}function sw(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SP(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var v=l[f],_=v.transferSize,T=v.initiatorType,R=v.duration;if(_&&R&&sw(T)){for(T=0,R=v.responseEnd,f+=1;f<l.length;f++){var P=l[f],G=P.startTime;if(G>R)break;var X=P.transferSize,te=P.initiatorType;X&&sw(te)&&(P=P.responseEnd,T+=X*(P<R?1:(R-G)/(P-G)))}if(--f,s+=8*(_+T)/(v.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Um=null,Bm=null;function sf(o){return o.nodeType===9?o:o.ownerDocument}function aw(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lw(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Fm(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $m=null;function bP(){var o=window.event;return o&&o.type==="popstate"?o===$m?!1:($m=o,!0):($m=null,!1)}var uw=typeof setTimeout=="function"?setTimeout:void 0,wP=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,EP=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(o){return cw.resolve(null).then(o).catch(TP)}:uw;function TP(o){setTimeout(function(){throw o})}function Jo(o){return o==="head"}function fw(o,s){var l=s,f=0;do{var v=l.nextSibling;if(o.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(f===0){o.removeChild(v),Js(s);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")Al(o.ownerDocument.documentElement);else if(l==="head"){l=o.ownerDocument.head,Al(l);for(var _=l.firstChild;_;){var T=_.nextSibling,R=_.nodeName;_[qa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=T}}else l==="body"&&Al(o.ownerDocument.body);l=v}while(l);Js(s)}function dw(o,s){var l=o;o=0;do{var f=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(o===0)break;o--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||o++;l=f}while(l)}function Hm(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Hm(l),Jh(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function CP(o,s,l,f){for(;o.nodeType===1;){var v=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[qa])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=On(o.nextSibling),o===null)break}return null}function xP(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=On(o.nextSibling),o===null))return null;return o}function hw(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=On(o.nextSibling),o===null))return null;return o}function Gm(o){return o.data==="$?"||o.data==="$~"}function Vm(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function AP(o,s){var l=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||l.readyState!=="loading")s();else{var f=function(){s(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function On(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var zm=null;function pw(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"||l==="/&"){if(s===0)return On(o.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}o=o.nextSibling}return null}function mw(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return o;s--}else l!=="/$"&&l!=="/&"||s++}o=o.previousSibling}return null}function gw(o,s,l){switch(s=sf(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Al(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Jh(o)}var Pn=new Map,vw=new Set;function af(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var io=Q.d;Q.d={f:RP,r:MP,D:NP,C:IP,L:DP,m:OP,X:kP,S:PP,M:LP};function RP(){var o=io.f(),s=Wc();return o||s}function MP(o){var s=fs(o);s!==null&&s.tag===5&&s.type==="form"?PS(s):io.r(o)}var Vs=typeof document>"u"?null:document;function yw(o,s,l){var f=Vs;if(f&&typeof s=="string"&&s){var v=xn(s);v='link[rel="'+o+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),vw.has(v)||(vw.add(v),o={rel:o,crossOrigin:l,href:s},f.querySelector(v)===null&&(s=f.createElement("link"),It(s,"link",o),wt(s),f.head.appendChild(s)))}}function NP(o){io.D(o),yw("dns-prefetch",o,null)}function IP(o,s){io.C(o,s),yw("preconnect",o,s)}function DP(o,s,l){io.L(o,s,l);var f=Vs;if(f&&o&&s){var v='link[rel="preload"][as="'+xn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+xn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+xn(l.imageSizes)+'"]')):v+='[href="'+xn(o)+'"]';var _=v;switch(s){case"style":_=zs(o);break;case"script":_=qs(o)}Pn.has(_)||(o=y({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),Pn.set(_,o),f.querySelector(v)!==null||s==="style"&&f.querySelector(Rl(_))||s==="script"&&f.querySelector(Ml(_))||(s=f.createElement("link"),It(s,"link",o),wt(s),f.head.appendChild(s)))}}function OP(o,s){io.m(o,s);var l=Vs;if(l&&o){var f=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+xn(f)+'"][href="'+xn(o)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=qs(o)}if(!Pn.has(_)&&(o=y({rel:"modulepreload",href:o},s),Pn.set(_,o),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ml(_)))return}f=l.createElement("link"),It(f,"link",o),wt(f),l.head.appendChild(f)}}}function PP(o,s,l){io.S(o,s,l);var f=Vs;if(f&&o){var v=ds(f).hoistableStyles,_=zs(o);s=s||"default";var T=v.get(_);if(!T){var R={loading:0,preload:null};if(T=f.querySelector(Rl(_)))R.loading=5;else{o=y({rel:"stylesheet",href:o,"data-precedence":s},l),(l=Pn.get(_))&&qm(o,l);var P=T=f.createElement("link");wt(P),It(P,"link",o),P._p=new Promise(function(G,X){P.onload=G,P.onerror=X}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,lf(T,s,f)}T={type:"stylesheet",instance:T,count:1,state:R},v.set(_,T)}}}function kP(o,s){io.X(o,s);var l=Vs;if(l&&o){var f=ds(l).hoistableScripts,v=qs(o),_=f.get(v);_||(_=l.querySelector(Ml(v)),_||(o=y({src:o,async:!0},s),(s=Pn.get(v))&&Jm(o,s),_=l.createElement("script"),wt(_),It(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function LP(o,s){io.M(o,s);var l=Vs;if(l&&o){var f=ds(l).hoistableScripts,v=qs(o),_=f.get(v);_||(_=l.querySelector(Ml(v)),_||(o=y({src:o,async:!0,type:"module"},s),(s=Pn.get(v))&&Jm(o,s),_=l.createElement("script"),wt(_),It(_,"link",o),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function _w(o,s,l,f){var v=(v=be.current)?af(v):null;if(!v)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=zs(l.href),l=ds(v).hoistableStyles,f=l.get(s),f||(f={type:"style",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=zs(l.href);var _=ds(v).hoistableStyles,T=_.get(o);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,T),(_=v.querySelector(Rl(o)))&&!_._p&&(T.instance=_,T.state.loading=5),Pn.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pn.set(o,l),_||UP(v,o,l,T.state))),s&&f===null)throw Error(i(528,""));return T}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qs(l),l=ds(v).hoistableScripts,f=l.get(s),f||(f={type:"script",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function zs(o){return'href="'+xn(o)+'"'}function Rl(o){return'link[rel="stylesheet"]['+o+"]"}function Sw(o){return y({},o,{"data-precedence":o.precedence,precedence:null})}function UP(o,s,l,f){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=o.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),It(s,"link",l),wt(s),o.head.appendChild(s))}function qs(o){return'[src="'+xn(o)+'"]'}function Ml(o){return"script[async]"+o}function bw(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var f=o.querySelector('style[data-href~="'+xn(l.href)+'"]');if(f)return s.instance=f,wt(f),f;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),wt(f),It(f,"style",v),lf(f,l.precedence,o),s.instance=f;case"stylesheet":v=zs(l.href);var _=o.querySelector(Rl(v));if(_)return s.state.loading|=4,s.instance=_,wt(_),_;f=Sw(l),(v=Pn.get(v))&&qm(f,v),_=(o.ownerDocument||o).createElement("link"),wt(_);var T=_;return T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),It(_,"link",f),s.state.loading|=4,lf(_,l.precedence,o),s.instance=_;case"script":return _=qs(l.src),(v=o.querySelector(Ml(_)))?(s.instance=v,wt(v),v):(f=l,(v=Pn.get(_))&&(f=y({},l),Jm(f,v)),o=o.ownerDocument||o,v=o.createElement("script"),wt(v),It(v,"link",f),o.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,lf(f,l.precedence,o));return s.instance}function lf(o,s,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,T=0;T<f.length;T++){var R=f[T];if(R.dataset.precedence===s)_=R;else if(_!==v)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function qm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function Jm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var uf=null;function ww(o,s,l){if(uf===null){var f=new Map,v=uf=new Map;v.set(l,f)}else v=uf,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(o))return f;for(f.set(o,null),l=l.getElementsByTagName(o),v=0;v<l.length;v++){var _=l[v];if(!(_[qa]||_[At]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(s)||"";T=o+T;var R=f.get(T);R?R.push(_):f.set(T,[_])}}return f}function Ew(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function BP(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Tw(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function FP(o,s,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=zs(f.href),_=s.querySelector(Rl(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=cf.bind(o),s.then(o,o)),l.state.loading|=4,l.instance=_,wt(_);return}_=s.ownerDocument||s,f=Sw(f),(v=Pn.get(v))&&qm(f,v),_=_.createElement("link"),wt(_);var T=_;T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),It(_,"link",f),l.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(o.count++,l=cf.bind(o),s.addEventListener("load",l),s.addEventListener("error",l))}}var jm=0;function $P(o,s){return o.stylesheets&&o.count===0&&df(o,o.stylesheets),0<o.count||0<o.imgCount?function(l){var f=setTimeout(function(){if(o.stylesheets&&df(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+s);0<o.imgBytes&&jm===0&&(jm=62500*SP());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&df(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>jm?50:800)+s);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ff=null;function df(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ff=new Map,s.forEach(HP,o),ff=null,cf.call(o))}function HP(o,s){if(!(s.state.loading&4)){var l=ff.get(o);if(l)var f=l.get(null);else{l=new Map,ff.set(o,l);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var T=v[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),f=T)}f&&l.set(null,f)}v=s.instance,T=v.getAttribute("data-precedence"),_=l.get(T)||f,_===f&&l.set(null,v),l.set(T,v),this.count++,f=cf.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),s.state.loading|=4}}var Nl={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function GP(o,s,l,f,v,_,T,R,P){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gh(0),this.hiddenUpdates=Gh(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Cw(o,s,l,f,v,_,T,R,P,G,X,te){return o=new GP(o,s,l,T,P,G,X,te,R),s=1,_===!0&&(s|=24),_=un(3,null,null,s),o.current=_,_.stateNode=o,s=xp(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:f,isDehydrated:l,cache:s},Np(_),o}function xw(o){return o?(o=ws,o):ws}function Aw(o,s,l,f,v,_){v=xw(v),f.context===null?f.context=v:f.pendingContext=v,f=ko(s),f.payload={element:l},_=_===void 0?null:_,_!==null&&(f.callback=_),l=Lo(o,f,s),l!==null&&(Zt(l,o,s),ll(l,o,s))}function Rw(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function Km(o,s){Rw(o,s),(o=o.alternate)&&Rw(o,s)}function Mw(o){if(o.tag===13||o.tag===31){var s=Er(o,67108864);s!==null&&Zt(s,o,67108864),Km(o,67108864)}}function Nw(o){if(o.tag===13||o.tag===31){var s=pn();s=Vh(s);var l=Er(o,s);l!==null&&Zt(l,o,s),Km(o,s)}}var hf=!0;function VP(o,s,l,f){var v=F.T;F.T=null;var _=Q.p;try{Q.p=2,Ym(o,s,l,f)}finally{Q.p=_,F.T=v}}function zP(o,s,l,f){var v=F.T;F.T=null;var _=Q.p;try{Q.p=8,Ym(o,s,l,f)}finally{Q.p=_,F.T=v}}function Ym(o,s,l,f){if(hf){var v=Xm(f);if(v===null)km(o,s,f,pf,l),Dw(o,f);else if(JP(v,o,s,l,f))f.stopPropagation();else if(Dw(o,f),s&4&&-1<qP.indexOf(o)){for(;v!==null;){var _=fs(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=yr(_.pendingLanes);if(T!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var P=1<<31-an(T);R.entanglements[1]|=P,T&=~P}Si(_),(je&6)===0&&(Yc=xt()+500,Tl(0))}}break;case 31:case 13:R=Er(_,2),R!==null&&Zt(R,_,2),Wc(),Km(_,2)}if(_=Xm(f),_===null&&km(o,s,f,pf,l),_===v)break;v=_}v!==null&&f.stopPropagation()}else km(o,s,f,null,l)}}function Xm(o){return o=Qh(o),Wm(o)}var pf=null;function Wm(o){if(pf=null,o=cs(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=u(s),o!==null)return o;o=null}else if(l===31){if(o=c(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return pf=o,null}function Iw(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nc()){case $a:return 2;case Ha:return 8;case vr:case I1:return 32;case H_:return 268435456;default:return 32}default:return 32}}var Qm=!1,jo=null,Ko=null,Yo=null,Il=new Map,Dl=new Map,Xo=[],qP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dw(o,s){switch(o){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":Il.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(s.pointerId)}}function Ol(o,s,l,f,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:l,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},s!==null&&(s=fs(s),s!==null&&Mw(s)),o):(o.eventSystemFlags|=f,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function JP(o,s,l,f,v){switch(s){case"focusin":return jo=Ol(jo,o,s,l,f,v),!0;case"dragenter":return Ko=Ol(Ko,o,s,l,f,v),!0;case"mouseover":return Yo=Ol(Yo,o,s,l,f,v),!0;case"pointerover":var _=v.pointerId;return Il.set(_,Ol(Il.get(_)||null,o,s,l,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Dl.set(_,Ol(Dl.get(_)||null,o,s,l,f,v)),!0}return!1}function Ow(o){var s=cs(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){o.blockedOn=s,j_(o.priority,function(){Nw(l)});return}}else if(s===31){if(s=c(l),s!==null){o.blockedOn=s,j_(o.priority,function(){Nw(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function mf(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=Xm(o.nativeEvent);if(l===null){l=o.nativeEvent;var f=new l.constructor(l.type,l);Wh=f,l.target.dispatchEvent(f),Wh=null}else return s=fs(l),s!==null&&Mw(s),o.blockedOn=l,!1;s.shift()}return!0}function Pw(o,s,l){mf(o)&&l.delete(s)}function jP(){Qm=!1,jo!==null&&mf(jo)&&(jo=null),Ko!==null&&mf(Ko)&&(Ko=null),Yo!==null&&mf(Yo)&&(Yo=null),Il.forEach(Pw),Dl.forEach(Pw)}function gf(o,s){o.blockedOn===s&&(o.blockedOn=null,Qm||(Qm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jP)))}var vf=null;function kw(o){vf!==o&&(vf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vf===o&&(vf=null);for(var s=0;s<o.length;s+=3){var l=o[s],f=o[s+1],v=o[s+2];if(typeof f!="function"){if(Wm(f||l)===null)continue;break}var _=fs(l);_!==null&&(o.splice(s,3),s-=3,Xp(_,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function Js(o){function s(P){return gf(P,o)}jo!==null&&gf(jo,o),Ko!==null&&gf(Ko,o),Yo!==null&&gf(Yo,o),Il.forEach(s),Dl.forEach(s);for(var l=0;l<Xo.length;l++){var f=Xo[l];f.blockedOn===o&&(f.blockedOn=null)}for(;0<Xo.length&&(l=Xo[0],l.blockedOn===null);)Ow(l),l.blockedOn===null&&Xo.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],_=l[f+1],T=v[jt]||null;if(typeof _=="function")T||kw(l);else if(T){var R=null;if(_&&_.hasAttribute("formAction")){if(v=_,T=_[jt]||null)R=T.formAction;else if(Wm(v)!==null)continue}else R=T.action;typeof R=="function"?l[f+1]=R:(l.splice(f,3),f-=3),kw(l)}}}function Lw(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return v=T})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Zm(o){this._internalRoot=o}yf.prototype.render=Zm.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,f=pn();Aw(l,f,o,s,null,null)},yf.prototype.unmount=Zm.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Aw(o.current,2,null,o,null,null),Wc(),s[us]=null}};function yf(o){this._internalRoot=o}yf.prototype.unstable_scheduleHydration=function(o){if(o){var s=J_();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Xo.length&&s!==0&&s<Xo[l].priority;l++);Xo.splice(l,0,o),l===0&&Ow(o)}};var Uw=e.version;if(Uw!=="19.2.1")throw Error(i(527,Uw,"19.2.1"));Q.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(s),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var KP={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Ga=_f.inject(KP),sn=_f}catch{}}return kl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,f="",v=zS,_=qS,T=JS;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Cw(o,1,!1,null,null,l,f,null,v,_,T,Lw),o[us]=s.current,Pm(o),new Zm(s)},kl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var f=!1,v="",_=zS,T=qS,R=JS,P=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),s=Cw(o,1,!0,s,l??null,f,v,P,_,T,R,Lw),s.context=xw(null),l=s.current,f=pn(),f=Vh(f),v=ko(f),v.callback=null,Lo(l,v,f),l=f,s.current.lanes=l,za(s,l),Si(s),o[us]=s.current,Pm(o),new yf(s)},kl.version="19.2.1",kl}var jw;function ok(){if(jw)return ng.exports;jw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ng.exports=ik(),ng.exports}var rk=ok();function Fe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var sk={};function Qd(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:sk}var jx=Object.assign,gd=Object.getOwnPropertyDescriptor,Ri=Object.defineProperty,Tu=Object.prototype,nv=[];Object.freeze(nv);var Kx={};Object.freeze(Kx);var ak=typeof Proxy<"u",lk=Object.toString();function Yx(){ak||Fe("Proxy not available")}function Xx(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var aa=function(){};function ci(t){return typeof t=="function"}function jr(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Zd(t){return t!==null&&typeof t=="object"}function go(t){if(!Zd(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n.toString()===lk}function Wx(t){var e=t?.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Cu(t,e,n){Ri(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Qx(t,e,n){Ri(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function cr(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(i){return Zd(i)&&i[n]===!0}}function xa(t){return t!=null&&Object.prototype.toString.call(t)==="[object Map]"}function uk(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e),i=Object.getPrototypeOf(n);return i===null}function ao(t){return t!=null&&Object.prototype.toString.call(t)==="[object Set]"}var Zx=typeof Object.getOwnPropertySymbols<"u";function ck(t){var e=Object.keys(t);if(!Zx)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter(function(i){return Tu.propertyIsEnumerable.call(t,i)})):e}var ga=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Zx?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function eA(t){return t===null?null:typeof t=="object"?""+t:t}function fo(t,e){return Tu.hasOwnProperty.call(t,e)}var fk=Object.getOwnPropertyDescriptors||function(e){var n={};return ga(e).forEach(function(i){n[i]=gd(e,i)}),n};function _n(t,e){return!!(t&e)}function Sn(t,e,n){return n?t|=e:t&=~e,t}function Kw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function dk(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,pk(i.key),i)}}function Aa(t,e,n){return e&&dk(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function la(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=mk(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kr(){return Kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kr.apply(null,arguments)}function tA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,iv(t,e)}function iv(t,e){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},iv(t,e)}function hk(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pk(t){var e=hk(t,"string");return typeof e=="symbol"?e:e+""}function mk(t,e){if(t){if(typeof t=="string")return Kw(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kw(t,e):void 0}}var Ci=Symbol("mobx-stored-annotations");function Mi(t){function e(n,i){if(Au(i))return t.decorate_20223_(n,i);xu(n,i,t)}return Object.assign(e,t)}function xu(t,e,n){fo(t,Ci)||Cu(t,Ci,Kr({},t[Ci])),wk(n)||(t[Ci][e]=n)}function gk(t){return fo(t,Ci)||Cu(t,Ci,Kr({},t[Ci])),t[Ci]}function Au(t){return typeof t=="object"&&typeof t.kind=="string"}var Te=Symbol("mobx administration"),fr=(function(){function t(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.reportObserved=function(){return yA(this)},e.reportChanged=function(){Fn(),_A(this),$n()},e.toString=function(){return this.name_},Aa(t,[{key:"isBeingObserved",get:function(){return _n(this.flags_,t.isBeingObservedMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return _n(this.flags_,t.isPendingUnobservationMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return _n(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=Sn(this.flags_,t.diffValueMask_,i===1)}}])})();fr.isBeingObservedMask_=1;fr.isPendingUnobservationMask_=2;fr.diffValueMask_=4;var cy=cr("Atom",fr);function nA(t,e,n){e===void 0&&(e=aa),n===void 0&&(n=aa);var i=new fr(t);return e!==aa&&CL(i,e),n!==aa&&CA(i,n),i}function vk(t,e){return BA(t,e)}function yk(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var vd={structural:vk,default:yk};function Yr(t,e,n){return my(t)?t:Array.isArray(t)?ht.array(t,{name:n}):go(t)?ht.object(t,void 0,{name:n}):xa(t)?ht.map(t,{name:n}):ao(t)?ht.set(t,{name:n}):typeof t=="function"&&!va(t)&&!uu(t)?Wx(t)?ya(t):lu(n,t):t}function _k(t,e,n){if(t==null||Ou(t)||Du(t)||dr(t)||ni(t))return t;if(Array.isArray(t))return ht.array(t,{name:n,deep:!1});if(go(t))return ht.object(t,void 0,{name:n,deep:!1});if(xa(t))return ht.map(t,{name:n,deep:!1});if(ao(t))return ht.set(t,{name:n,deep:!1})}function eh(t){return t}function Sk(t,e){return BA(t,e)?e:t}var bk="override";function wk(t){return t.annotationType_===bk}function Ru(t,e){return{annotationType_:t,options_:e,make_:Ek,extend_:Tk,decorate_20223_:Ck}}function Ek(t,e,n,i){var r;if((r=this.options_)!=null&&r.bound)return this.extend_(t,e,n,!1)===null?0:1;if(i===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if(va(n.value))return 1;var a=iA(t,this,e,n,!1);return Ri(i,e,a),2}function Tk(t,e,n,i){var r=iA(t,this,e,n);return t.defineProperty_(e,r,i)}function Ck(t,e){var n=e.kind,i=e.name,r=e.addInitializer,a=this,u=function(d){var m,y,S,b;return Xr((m=(y=a.options_)==null?void 0:y.name)!=null?m:i.toString(),d,(S=(b=a.options_)==null?void 0:b.autoAction)!=null?S:!1)};if(n=="field")return function(h){var d,m=h;return va(m)||(m=u(m)),(d=a.options_)!=null&&d.bound&&(m=m.bind(this),m.isMobxAction=!0),m};if(n=="method"){var c;return va(t)||(t=u(t)),(c=this.options_)!=null&&c.bound&&r(function(){var h=this,d=h[i].bind(h);d.isMobxAction=!0,h[i]=d}),t}Fe("Cannot apply '"+a.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):"+(`
'`+a.annotationType_+"' can only be used on properties with a function value."))}function xk(t,e,n,i){e.annotationType_,i.value}function iA(t,e,n,i,r){var a,u,c,h,d,m,y;r===void 0&&(r=ue.safeDescriptors),xk(t,e,n,i);var S=i.value;if((a=e.options_)!=null&&a.bound){var b;S=S.bind((b=t.proxy_)!=null?b:t.target_)}return{value:Xr((u=(c=e.options_)==null?void 0:c.name)!=null?u:n.toString(),S,(h=(d=e.options_)==null?void 0:d.autoAction)!=null?h:!1,(m=e.options_)!=null&&m.bound?(y=t.proxy_)!=null?y:t.target_:void 0),configurable:r?t.isPlainObject_:!0,enumerable:!1,writable:!r}}function oA(t,e){return{annotationType_:t,options_:e,make_:Ak,extend_:Rk,decorate_20223_:Mk}}function Ak(t,e,n,i){var r;if(i===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if((r=this.options_)!=null&&r.bound&&(!fo(t.target_,e)||!uu(t.target_[e]))&&this.extend_(t,e,n,!1)===null)return 0;if(uu(n.value))return 1;var a=rA(t,this,e,n,!1,!1);return Ri(i,e,a),2}function Rk(t,e,n,i){var r,a=rA(t,this,e,n,(r=this.options_)==null?void 0:r.bound);return t.defineProperty_(e,a,i)}function Mk(t,e){var n,i=e.name,r=e.addInitializer;return uu(t)||(t=ya(t)),(n=this.options_)!=null&&n.bound&&r(function(){var a=this,u=a[i].bind(a);u.isMobXFlow=!0,a[i]=u}),t}function Nk(t,e,n,i){e.annotationType_,i.value}function rA(t,e,n,i,r,a){a===void 0&&(a=ue.safeDescriptors),Nk(t,e,n,i);var u=i.value;if(uu(u)||(u=ya(u)),r){var c;u=u.bind((c=t.proxy_)!=null?c:t.target_),u.isMobXFlow=!0}return{value:u,configurable:a?t.isPlainObject_:!0,enumerable:!1,writable:!a}}function fy(t,e){return{annotationType_:t,options_:e,make_:Ik,extend_:Dk,decorate_20223_:Ok}}function Ik(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function Dk(t,e,n,i){return Pk(t,this,e,n),t.defineComputedProperty_(e,Kr({},this.options_,{get:n.get,set:n.set}),i)}function Ok(t,e){var n=this,i=e.name,r=e.addInitializer;return r(function(){var a=os(this)[Te],u=Kr({},n.options_,{get:t,context:this});u.name||(u.name="ObservableObject."+i.toString()),a.values_.set(i,new fi(u))}),function(){return this[Te].getObservablePropValue_(i)}}function Pk(t,e,n,i){e.annotationType_,i.get}function th(t,e){return{annotationType_:t,options_:e,make_:kk,extend_:Lk,decorate_20223_:Uk}}function kk(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function Lk(t,e,n,i){var r,a;return Bk(t,this),t.defineObservableProperty_(e,n.value,(r=(a=this.options_)==null?void 0:a.enhancer)!=null?r:Yr,i)}function Uk(t,e){var n=this,i=e.kind,r=e.name,a=new WeakSet;function u(c,h){var d,m,y=os(c)[Te],S=new rr(h,(d=(m=n.options_)==null?void 0:m.enhancer)!=null?d:Yr,"ObservableObject."+r.toString(),!1);y.values_.set(r,S),a.add(c)}if(i=="accessor")return{get:function(){return a.has(this)||u(this,t.get.call(this)),this[Te].getObservablePropValue_(r)},set:function(h){return a.has(this)||u(this,h),this[Te].setObservablePropValue_(r,h)},init:function(h){return a.has(this)||u(this,h),h}}}function Bk(t,e,n,i){e.annotationType_}var Fk="true",$k=sA();function sA(t){return{annotationType_:Fk,options_:t,make_:Hk,extend_:Gk,decorate_20223_:Vk}}function Hk(t,e,n,i){var r,a;if(n.get)return nh.make_(t,e,n,i);if(n.set){var u=va(n.set)?n.set:Xr(e.toString(),n.set);return i===t.target_?t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:u})===null?0:2:(Ri(i,e,{configurable:!0,set:u}),2)}if(i!==t.target_&&typeof n.value=="function"){var c;if(Wx(n.value)){var h,d=(h=this.options_)!=null&&h.autoBind?ya.bound:ya;return d.make_(t,e,n,i)}var m=(c=this.options_)!=null&&c.autoBind?lu.bound:lu;return m.make_(t,e,n,i)}var y=((r=this.options_)==null?void 0:r.deep)===!1?ht.ref:ht;if(typeof n.value=="function"&&(a=this.options_)!=null&&a.autoBind){var S;n.value=n.value.bind((S=t.proxy_)!=null?S:t.target_)}return y.make_(t,e,n,i)}function Gk(t,e,n,i){var r,a;if(n.get)return nh.extend_(t,e,n,i);if(n.set)return t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:Xr(e.toString(),n.set)},i);if(typeof n.value=="function"&&(r=this.options_)!=null&&r.autoBind){var u;n.value=n.value.bind((u=t.proxy_)!=null?u:t.target_)}var c=((a=this.options_)==null?void 0:a.deep)===!1?ht.ref:ht;return c.extend_(t,e,n,i)}function Vk(t,e){Fe("'"+this.annotationType_+"' cannot be used as a decorator")}var zk="observable",qk="observable.ref",Jk="observable.shallow",jk="observable.struct",aA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(aA);function Sf(t){return t||aA}var ov=th(zk),Kk=th(qk,{enhancer:eh}),Yk=th(Jk,{enhancer:_k}),Xk=th(jk,{enhancer:Sk}),lA=Mi(ov);function bf(t){return t.deep===!0?Yr:t.deep===!1?eh:Qk(t.defaultDecorator)}function Wk(t){var e;return t?(e=t.defaultDecorator)!=null?e:sA(t):void 0}function Qk(t){var e,n;return t&&(e=(n=t.options_)==null?void 0:n.enhancer)!=null?e:Yr}function uA(t,e,n){if(Au(e))return ov.decorate_20223_(t,e);if(jr(e)){xu(t,e,ov);return}return my(t)?t:go(t)?ht.object(t,e,n):Array.isArray(t)?ht.array(t,e):xa(t)?ht.map(t,e):ao(t)?ht.set(t,e):typeof t=="object"&&t!==null?t:ht.box(t,e)}jx(uA,lA);var Zk={box:function(e,n){var i=Sf(n);return new rr(e,bf(i),i.name,!0,i.equals)},array:function(e,n){var i=Sf(n);return(ue.useProxies===!1||i.proxy===!1?YL:FL)(e,bf(i),i.name)},map:function(e,n){var i=Sf(n);return new DA(e,bf(i),i.name)},set:function(e,n){var i=Sf(n);return new OA(e,bf(i),i.name)},object:function(e,n,i){return hr(function(){return AA(ue.useProxies===!1||i?.proxy===!1?os({},i):LL({},i),e,n)})},ref:Mi(Kk),shallow:Mi(Yk),deep:lA,struct:Mi(Xk)},ht=jx(uA,Zk),cA="computed",eL="computed.struct",rv=fy(cA),tL=fy(eL,{equals:vd.structural}),nh=function(e,n){if(Au(n))return rv.decorate_20223_(e,n);if(jr(n))return xu(e,n,rv);if(go(e))return Mi(fy(cA,e));var i=go(n)?n:{};return i.get=e,i.name||(i.name=e.name||""),new fi(i)};Object.assign(nh,rv);nh.struct=Mi(tL);var Yw,Xw,yd=0,nL=1,iL=(Yw=(Xw=gd(function(){},"name"))==null?void 0:Xw.configurable)!=null?Yw:!1,Ww={value:"action",configurable:!0,writable:!1,enumerable:!1};function Xr(t,e,n,i){n===void 0&&(n=!1);function r(){return fA(t,n,e,i||this,arguments)}return r.isMobxAction=!0,r.toString=function(){return e.toString()},iL&&(Ww.value=t,Ri(r,"name",Ww)),r}function fA(t,e,n,i,r){var a=oL(t,e);try{return n.apply(i,r)}catch(u){throw a.error_=u,u}finally{rL(a)}}function oL(t,e,n,i){var r=!1,a=0,u=ue.trackingDerivation,c=!e||!u;Fn();var h=ue.allowStateChanges;c&&(is(),h=dy(!0));var d=py(!0),m={runAsAction_:c,prevDerivation_:u,prevAllowStateChanges_:h,prevAllowStateReads_:d,notifySpy_:r,startTime_:a,actionId_:nL++,parentActionId_:yd};return yd=m.actionId_,m}function rL(t){yd!==t.actionId_&&Fe(30),yd=t.parentActionId_,t.error_!==void 0&&(ue.suppressReactionErrors=!0),hy(t.prevAllowStateChanges_),Zl(t.prevAllowStateReads_),$n(),t.runAsAction_&&ho(t.prevDerivation_),ue.suppressReactionErrors=!1}function dy(t){var e=ue.allowStateChanges;return ue.allowStateChanges=t,e}function hy(t){ue.allowStateChanges=t}var rr=(function(t){function e(i,r,a,u,c){var h;return a===void 0&&(a="ObservableValue"),c===void 0&&(c=vd.default),h=t.call(this,a)||this,h.enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=r,h.name_=a,h.equals=c,h.value_=r(i,void 0,a),h}tA(e,t);var n=e.prototype;return n.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.set=function(r){this.value_,r=this.prepareNewValue_(r),r!==ue.UNCHANGED&&this.setNewValue_(r)},n.prepareNewValue_=function(r){if(Un(this)){var a=Bn(this,{object:this,type:Ni,newValue:r});if(!a)return ue.UNCHANGED;r=a.newValue}return r=this.enhancer(r,this.value_,this.name_),this.equals(this.value_,r)?ue.UNCHANGED:r},n.setNewValue_=function(r){var a=this.value_;this.value_=r,this.reportChanged(),si(this)&&ai(this,{type:Ni,object:this,newValue:r,oldValue:a})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(r){return Nu(this,r)},n.observe_=function(r,a){return a&&r({observableKind:"value",debugObjectName:this.name_,object:this,type:Ni,newValue:this.value_,oldValue:void 0}),Iu(this,r)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return eA(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e})(fr),sL=cr("ObservableValue",rr),fi=(function(){function t(n){this.dependenciesState_=Ve.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Sd(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=_d.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||Fe(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=Xr("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?vd.structural:vd.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){fL(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.get=function(){if(this.isComputing&&Fe(32,this.name_,this.derivation),ue.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)sv(this)&&(this.warnAboutUntrackedRead_(),Fn(),this.value_=this.computeValue_(!1),$n());else if(yA(this),sv(this)){var i=ue.trackingContext;this.keepAlive_&&!i&&(ue.trackingContext=this),this.trackAndCompute()&&cL(this),ue.trackingContext=i}var r=this.value_;if(Wf(r))throw r.cause;return r},e.set=function(i){if(this.setter_){this.isRunningSetter&&Fe(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,i)}finally{this.isRunningSetter=!1}}else Fe(34,this.name_)},e.trackAndCompute=function(){var i=this.value_,r=this.dependenciesState_===Ve.NOT_TRACKING_,a=this.computeValue_(!0),u=r||Wf(i)||Wf(a)||!this.equals_(i,a);return u&&(this.value_=a),u},e.computeValue_=function(i){this.isComputing=!0;var r=dy(!1),a;if(i)a=dA(this,this.derivation,this.scope_);else if(ue.disableErrorBoundaries===!0)a=this.derivation.call(this.scope_);else try{a=this.derivation.call(this.scope_)}catch(u){a=new Sd(u)}return hy(r),this.isComputing=!1,a},e.suspend_=function(){this.keepAlive_||(av(this),this.value_=void 0)},e.observe_=function(i,r){var a=this,u=!0,c=void 0;return SL(function(){var h=a.get();if(!u||r){var d=is();i({observableKind:"computed",debugObjectName:a.name_,type:Ni,object:a,newValue:h,oldValue:c}),ho(d)}u=!1,c=h})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return eA(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},Aa(t,[{key:"isComputing",get:function(){return _n(this.flags_,t.isComputingMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isComputingMask_,i)}},{key:"isRunningSetter",get:function(){return _n(this.flags_,t.isRunningSetterMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isRunningSetterMask_,i)}},{key:"isBeingObserved",get:function(){return _n(this.flags_,t.isBeingObservedMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return _n(this.flags_,t.isPendingUnobservationMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return _n(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=Sn(this.flags_,t.diffValueMask_,i===1)}}])})();fi.isComputingMask_=1;fi.isRunningSetterMask_=2;fi.isBeingObservedMask_=4;fi.isPendingUnobservationMask_=8;fi.diffValueMask_=16;var Mu=cr("ComputedValue",fi),Ve;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(Ve||(Ve={}));var _d;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(_d||(_d={}));var Sd=function(e){this.cause=void 0,this.cause=e};function Wf(t){return t instanceof Sd}function sv(t){switch(t.dependenciesState_){case Ve.UP_TO_DATE_:return!1;case Ve.NOT_TRACKING_:case Ve.STALE_:return!0;case Ve.POSSIBLY_STALE_:{for(var e=py(!0),n=is(),i=t.observing_,r=i.length,a=0;a<r;a++){var u=i[a];if(Mu(u)){if(ue.disableErrorBoundaries)u.get();else try{u.get()}catch{return ho(n),Zl(e),!0}if(t.dependenciesState_===Ve.STALE_)return ho(n),Zl(e),!0}}return pA(t),ho(n),Zl(e),!1}}}function dA(t,e,n){var i=py(!0);pA(t),t.newObserving_=new Array(t.runId_===0?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++ue.runId;var r=ue.trackingDerivation;ue.trackingDerivation=t,ue.inBatch++;var a;if(ue.disableErrorBoundaries===!0)a=e.call(n);else try{a=e.call(n)}catch(u){a=new Sd(u)}return ue.inBatch--,ue.trackingDerivation=r,aL(t),Zl(i),a}function aL(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,i=Ve.UP_TO_DATE_,r=0,a=t.unboundDepsCount_,u=0;u<a;u++){var c=n[u];c.diffValue===0&&(c.diffValue=1,r!==u&&(n[r]=c),r++),c.dependenciesState_>i&&(i=c.dependenciesState_)}for(n.length=r,t.newObserving_=null,a=e.length;a--;){var h=e[a];h.diffValue===0&&gA(h,t),h.diffValue=0}for(;r--;){var d=n[r];d.diffValue===1&&(d.diffValue=0,uL(d,t))}i!==Ve.UP_TO_DATE_&&(t.dependenciesState_=i,t.onBecomeStale_())}function av(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)gA(e[n],t);t.dependenciesState_=Ve.NOT_TRACKING_}function hA(t){var e=is();try{return t()}finally{ho(e)}}function is(){var t=ue.trackingDerivation;return ue.trackingDerivation=null,t}function ho(t){ue.trackingDerivation=t}function py(t){var e=ue.allowStateReads;return ue.allowStateReads=t,e}function Zl(t){ue.allowStateReads=t}function pA(t){if(t.dependenciesState_!==Ve.UP_TO_DATE_){t.dependenciesState_=Ve.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=Ve.UP_TO_DATE_}}var Qf=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Zf=!0,mA=!1,ue=(function(){var t=Qd();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Zf=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new Qf().version&&(Zf=!1),Zf?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Qf):(setTimeout(function(){mA||Fe(35)},1),new Qf)})();function lL(){if((ue.pendingReactions.length||ue.inBatch||ue.isRunningReactions)&&Fe(36),mA=!0,Zf){var t=Qd();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),ue=new Qf}}function uL(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function gA(t,e){t.observers_.delete(e),t.observers_.size===0&&vA(t)}function vA(t){t.isPendingUnobservation===!1&&(t.isPendingUnobservation=!0,ue.pendingUnobservations.push(t))}function Fn(){ue.inBatch++}function $n(){if(--ue.inBatch===0){SA();for(var t=ue.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof fi&&n.suspend_())}ue.pendingUnobservations=[]}}function yA(t){var e=ue.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&ue.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(t.observers_.size===0&&ue.inBatch>0&&vA(t),!1)}function _A(t){t.lowestObserverState_!==Ve.STALE_&&(t.lowestObserverState_=Ve.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ve.STALE_}))}function cL(t){t.lowestObserverState_!==Ve.STALE_&&(t.lowestObserverState_=Ve.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Ve.POSSIBLY_STALE_?e.dependenciesState_=Ve.STALE_:e.dependenciesState_===Ve.UP_TO_DATE_&&(t.lowestObserverState_=Ve.UP_TO_DATE_)}))}function fL(t){t.lowestObserverState_===Ve.UP_TO_DATE_&&(t.lowestObserverState_=Ve.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&(e.dependenciesState_=Ve.POSSIBLY_STALE_,e.onBecomeStale_())}))}var vo=(function(){function t(n,i,r,a){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ve.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=_d.NONE,this.name_=n,this.onInvalidate_=i,this.errorHandler_=r,this.requiresObservable_=a}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,ue.pendingReactions.push(this),SA())},e.runReaction_=function(){if(!this.isDisposed){Fn(),this.isScheduled=!1;var i=ue.trackingContext;if(ue.trackingContext=this,sv(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(r){this.reportExceptionInDerivation_(r)}}ue.trackingContext=i,$n()}},e.track=function(i){if(!this.isDisposed){Fn(),this.isRunning=!0;var r=ue.trackingContext;ue.trackingContext=this;var a=dA(this,i,void 0);ue.trackingContext=r,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&av(this),Wf(a)&&this.reportExceptionInDerivation_(a.cause),$n()}},e.reportExceptionInDerivation_=function(i){var r=this;if(this.errorHandler_){this.errorHandler_(i,this);return}if(ue.disableErrorBoundaries)throw i;var a="[mobx] uncaught error in '"+this+"'";ue.suppressReactionErrors||console.error(a,i),ue.globalReactionErrorHandlers.forEach(function(u){return u(i,r)})},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Fn(),av(this),$n()))},e.getDisposer_=function(i){var r=this,a=function u(){r.dispose(),i==null||i.removeEventListener==null||i.removeEventListener("abort",u)};return i==null||i.addEventListener==null||i.addEventListener("abort",a),a[Te]=this,"dispose"in Symbol&&typeof Symbol.dispose=="symbol"&&(a[Symbol.dispose]=a),a},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(i){},Aa(t,[{key:"isDisposed",get:function(){return _n(this.flags_,t.isDisposedMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isDisposedMask_,i)}},{key:"isScheduled",get:function(){return _n(this.flags_,t.isScheduledMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isScheduledMask_,i)}},{key:"isTrackPending",get:function(){return _n(this.flags_,t.isTrackPendingMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isTrackPendingMask_,i)}},{key:"isRunning",get:function(){return _n(this.flags_,t.isRunningMask_)},set:function(i){this.flags_=Sn(this.flags_,t.isRunningMask_,i)}},{key:"diffValue",get:function(){return _n(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=Sn(this.flags_,t.diffValueMask_,i===1)}}])})();vo.isDisposedMask_=1;vo.isScheduledMask_=2;vo.isTrackPendingMask_=4;vo.isRunningMask_=8;vo.diffValueMask_=16;var dL=100,lv=function(e){return e()};function SA(){ue.inBatch>0||ue.isRunningReactions||lv(hL)}function hL(){ue.isRunningReactions=!0;for(var t=ue.pendingReactions,e=0;t.length>0;){++e===dL&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}ue.isRunningReactions=!1}var bd=cr("Reaction",vo);function pL(t){var e=lv;lv=function(i){return t(function(){return e(i)})}}function eu(){return!1}function mL(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var bA="action",gL="action.bound",wA="autoAction",vL="autoAction.bound",EA="<unnamed action>",uv=Ru(bA),yL=Ru(gL,{bound:!0}),cv=Ru(wA,{autoAction:!0}),_L=Ru(vL,{autoAction:!0,bound:!0});function TA(t){var e=function(i,r){if(ci(i))return Xr(i.name||EA,i,t);if(ci(r))return Xr(i,r,t);if(Au(r))return(t?cv:uv).decorate_20223_(i,r);if(jr(r))return xu(i,r,t?cv:uv);if(jr(i))return Mi(Ru(t?wA:bA,{name:i,autoAction:t}))};return e}var Ln=TA(!1);Object.assign(Ln,uv);var lu=TA(!0);Object.assign(lu,cv);Ln.bound=Mi(yL);lu.bound=Mi(_L);function we(t){return fA(t.name||EA,!1,t,this,void 0)}function va(t){return ci(t)&&t.isMobxAction===!0}function SL(t,e){var n,i,r,a;e===void 0&&(e=Kx);var u=(n=(i=e)==null?void 0:i.name)!=null?n:"Autorun",c=!e.scheduler&&!e.delay,h;if(c)h=new vo(u,function(){this.track(y)},e.onError,e.requiresObservable);else{var d=wL(e),m=!1;h=new vo(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed||h.track(y)}))},e.onError,e.requiresObservable)}function y(){t(h)}return(r=e)!=null&&(r=r.signal)!=null&&r.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var bL=function(e){return e()};function wL(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:bL}var EL="onBO",TL="onBUO";function CL(t,e,n){return xA(EL,t,e,n)}function CA(t,e,n){return xA(TL,t,e,n)}function xA(t,e,n,i){var r=Td(e),a=ci(i)?i:n,u=t+"L";return r[u]?r[u].add(a):r[u]=new Set([a]),function(){var c=r[u];c&&(c.delete(a),c.size===0&&delete r[u])}}var xL="never",wf="always",AL="observed";function RL(t){t.isolateGlobalState===!0&&lL();var e=t.useProxies,n=t.enforceActions;if(e!==void 0&&(ue.useProxies=e===wf?!0:e===xL?!1:typeof Proxy<"u"),e==="ifavailable"&&(ue.verifyProxies=!0),n!==void 0){var i=n===wf?wf:n===AL;ue.enforceActions=i,ue.allowStateChanges=!(i===!0||i===wf)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(r){r in t&&(ue[r]=!!t[r])}),ue.allowStateReads=!ue.observableRequiresReaction,t.reactionScheduler&&pL(t.reactionScheduler)}function AA(t,e,n,i){var r=fk(e);return hr(function(){var a=os(t,i)[Te];ga(r).forEach(function(u){a.extend_(u,r[u],n&&u in n?n[u]:!0)})}),t}function ML(t,e){return RA(Td(t,e))}function RA(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=NL(t.observing_).map(RA)),e}function NL(t){return Array.from(new Set(t))}var IL=0;function MA(){this.message="FLOW_CANCELLED"}MA.prototype=Object.create(Error.prototype);var sg=oA("flow"),DL=oA("flow.bound",{bound:!0}),ya=Object.assign(function(e,n){if(Au(n))return sg.decorate_20223_(e,n);if(jr(n))return xu(e,n,sg);var i=e,r=i.name||"<unnamed flow>",a=function(){var c=this,h=arguments,d=++IL,m=Ln(r+" - runid: "+d+" - init",i).apply(c,h),y,S=void 0,b=new Promise(function(C,x){var A=0;y=x;function M(D){S=void 0;var k;try{k=Ln(r+" - runid: "+d+" - yield "+A++,m.next).call(m,D)}catch(U){return x(U)}N(k)}function I(D){S=void 0;var k;try{k=Ln(r+" - runid: "+d+" - yield "+A++,m.throw).call(m,D)}catch(U){return x(U)}N(k)}function N(D){if(ci(D?.then)){D.then(N,x);return}return D.done?C(D.value):(S=Promise.resolve(D.value),S.then(M,I))}M(void 0)});return b.cancel=Ln(r+" - runid: "+d+" - cancel",function(){try{S&&Qw(S);var C=m.return(void 0),x=Promise.resolve(C.value);x.then(aa,aa),Qw(x),y(new MA)}catch(A){y(A)}}),b};return a.isMobXFlow=!0,a},sg);ya.bound=Mi(DL);function Qw(t){ci(t.cancel)&&t.cancel()}function uu(t){return t?.isMobXFlow===!0}function OL(t,e){return t?Ou(t)||!!t[Te]||cy(t)||bd(t)||Mu(t):!1}function my(t){return OL(t)}function PL(t){if(Ou(t))return t[Te].ownKeys_();Fe(38)}function Ef(t,e,n){return t.set(e,n),n}function na(t,e){if(t==null||typeof t!="object"||t instanceof Date||!my(t))return t;if(sL(t)||Mu(t))return na(t.get(),e);if(e.has(t))return e.get(t);if(Du(t)){var n=Ef(e,t,new Array(t.length));return t.forEach(function(u,c){n[c]=na(u,e)}),n}if(ni(t)){var i=Ef(e,t,new Set);return t.forEach(function(u){i.add(na(u,e))}),i}if(dr(t)){var r=Ef(e,t,new Map);return t.forEach(function(u,c){r.set(c,na(u,e))}),r}else{var a=Ef(e,t,{});return PL(t).forEach(function(u){Tu.propertyIsEnumerable.call(t,u)&&(a[u]=na(t[u],e))}),a}}function Hn(t,e){return na(t,new Map)}function lo(t,e){e===void 0&&(e=void 0),Fn();try{return t.apply(e)}finally{$n()}}function js(t){return t[Te]}var kL={has:function(e,n){return js(e).has_(n)},get:function(e,n){return js(e).get_(n)},set:function(e,n,i){var r;return jr(n)?(r=js(e).set_(n,i,!0))!=null?r:!0:!1},deleteProperty:function(e,n){var i;return jr(n)?(i=js(e).delete_(n,!0))!=null?i:!0:!1},defineProperty:function(e,n,i){var r;return(r=js(e).defineProperty_(n,i))!=null?r:!0},ownKeys:function(e){return js(e).ownKeys_()},preventExtensions:function(e){Fe(13)}};function LL(t,e){var n,i;return Yx(),t=os(t,e),(i=(n=t[Te]).proxy_)!=null?i:n.proxy_=new Proxy(t,kL)}function Un(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function Nu(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),Xx(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function Bn(t,e){var n=is();try{for(var i=[].concat(t.interceptors_||[]),r=0,a=i.length;r<a&&(e=i[r](e),e&&!e.type&&Fe(14),!!e);r++);return e}finally{ho(n)}}function si(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function Iu(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),Xx(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function ai(t,e){var n=is(),i=t.changeListeners_;if(i){i=i.slice();for(var r=0,a=i.length;r<a;r++)i[r](e);ho(n)}}function NA(t,e,n){return hr(function(){var i,r=os(t,n)[Te];(i=e)!=null||(e=gk(t)),ga(e).forEach(function(a){return r.make_(a,e[a])})}),t}var ag=Symbol("mobx-keys");function Li(t,e,n){return go(t)?AA(t,t,e,n):(hr(function(){var i=os(t,n)[Te];if(!t[ag]){var r=Object.getPrototypeOf(t),a=new Set([].concat(ga(t),ga(r)));a.delete("constructor"),a.delete(Te),Cu(r,ag,a)}t[ag].forEach(function(u){return i.make_(u,e&&u in e?e[u]:!0)})}),t)}var Zw="splice",Ni="update",UL=1e4,BL={get:function(e,n){var i=e[Te];return n===Te?i:n==="length"?i.getArrayLength_():typeof n=="string"&&!isNaN(n)?i.get_(parseInt(n)):fo(wd,n)?wd[n]:e[n]},set:function(e,n,i){var r=e[Te];return n==="length"&&r.setArrayLength_(i),typeof n=="symbol"||isNaN(n)?e[n]=i:r.set_(parseInt(n),i),!0},preventExtensions:function(){Fe(15)}},gy=(function(){function t(n,i,r,a){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=a,this.atom_=new fr(n),this.enhancer_=function(u,c){return i(u,c,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.dehanceValues_=function(i){return this.dehancer!==void 0&&i.length>0?i.map(this.dehancer):i},e.intercept_=function(i){return Nu(this,i)},e.observe_=function(i,r){return r===void 0&&(r=!1),r&&i({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Iu(this,i)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(i){(typeof i!="number"||isNaN(i)||i<0)&&Fe("Out of range: "+i);var r=this.values_.length;if(i!==r)if(i>r){for(var a=new Array(i-r),u=0;u<i-r;u++)a[u]=void 0;this.spliceWithArray_(r,0,a)}else this.spliceWithArray_(i,r-i)},e.updateArrayLength_=function(i,r){i!==this.lastKnownLength_&&Fe(16),this.lastKnownLength_+=r,this.legacyMode_&&r>0&&UA(i+r+1)},e.spliceWithArray_=function(i,r,a){var u=this;this.atom_;var c=this.values_.length;if(i===void 0?i=0:i>c?i=c:i<0&&(i=Math.max(0,c+i)),arguments.length===1?r=c-i:r==null?r=0:r=Math.max(0,Math.min(r,c-i)),a===void 0&&(a=nv),Un(this)){var h=Bn(this,{object:this.proxy_,type:Zw,index:i,removedCount:r,added:a});if(!h)return nv;r=h.removedCount,a=h.added}if(a=a.length===0?a:a.map(function(y){return u.enhancer_(y,void 0)}),this.legacyMode_){var d=a.length-r;this.updateArrayLength_(c,d)}var m=this.spliceItemsIntoValues_(i,r,a);return(r!==0||a.length!==0)&&this.notifyArraySplice_(i,a,m),this.dehanceValues_(m)},e.spliceItemsIntoValues_=function(i,r,a){if(a.length<UL){var u;return(u=this.values_).splice.apply(u,[i,r].concat(a))}else{var c=this.values_.slice(i,i+r),h=this.values_.slice(i+r);this.values_.length+=a.length-r;for(var d=0;d<a.length;d++)this.values_[i+d]=a[d];for(var m=0;m<h.length;m++)this.values_[i+a.length+m]=h[m];return c}},e.notifyArrayChildUpdate_=function(i,r,a){var u=!this.owned_&&eu(),c=si(this),h=c||u?{observableKind:"array",object:this.proxy_,type:Ni,debugObjectName:this.atom_.name_,index:i,newValue:r,oldValue:a}:null;this.atom_.reportChanged(),c&&ai(this,h)},e.notifyArraySplice_=function(i,r,a){var u=!this.owned_&&eu(),c=si(this),h=c||u?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Zw,index:i,removed:a,added:r,removedCount:a.length,addedCount:r.length}:null;this.atom_.reportChanged(),c&&ai(this,h)},e.get_=function(i){if(this.legacyMode_&&i>=this.values_.length){console.warn("[mobx] Out of bounds read: "+i);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[i])},e.set_=function(i,r){var a=this.values_;if(this.legacyMode_&&i>a.length&&Fe(17,i,a.length),i<a.length){this.atom_;var u=a[i];if(Un(this)){var c=Bn(this,{type:Ni,object:this.proxy_,index:i,newValue:r});if(!c)return;r=c.newValue}r=this.enhancer_(r,u);var h=r!==u;h&&(a[i]=r,this.notifyArrayChildUpdate_(i,r,u))}else{for(var d=new Array(i+1-a.length),m=0;m<d.length-1;m++)d[m]=void 0;d[d.length-1]=r,this.spliceWithArray_(a.length,0,d)}},t})();function FL(t,e,n,i){return n===void 0&&(n="ObservableArray"),i===void 0&&(i=!1),Yx(),hr(function(){var r=new gy(n,e,i,!1);Qx(r.values_,Te,r);var a=new Proxy(r.values_,BL);return r.proxy_=a,t&&t.length&&r.spliceWithArray_(0,0,t),a})}var wd={clear:function(){return this.splice(0)},replace:function(e){var n=this[Te];return n.spliceWithArray_(0,n.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];var u=this[Te];switch(arguments.length){case 0:return[];case 1:return u.spliceWithArray_(e);case 2:return u.spliceWithArray_(e,n)}return u.spliceWithArray_(e,n,r)},spliceWithArray:function(e,n,i){return this[Te].spliceWithArray_(e,n,i)},push:function(){for(var e=this[Te],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,i),e.values_.length},pop:function(){return this.splice(Math.max(this[Te].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Te],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(0,0,i),e.values_.length},reverse:function(){return ue.trackingDerivation&&Fe(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ue.trackingDerivation&&Fe(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var n=this[Te],i=n.dehanceValues_(n.values_).indexOf(e);return i>-1?(this.splice(i,1),!0):!1}};ot("at",En);ot("concat",En);ot("flat",En);ot("includes",En);ot("indexOf",En);ot("join",En);ot("lastIndexOf",En);ot("slice",En);ot("toString",En);ot("toLocaleString",En);ot("toSorted",En);ot("toSpliced",En);ot("with",En);ot("every",pi);ot("filter",pi);ot("find",pi);ot("findIndex",pi);ot("findLast",pi);ot("findLastIndex",pi);ot("flatMap",pi);ot("forEach",pi);ot("map",pi);ot("some",pi);ot("toReversed",pi);ot("reduce",IA);ot("reduceRight",IA);function ot(t,e){typeof Array.prototype[t]=="function"&&(wd[t]=e(t))}function En(t){return function(){var e=this[Te];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function pi(t){return function(e,n){var i=this,r=this[Te];r.atom_.reportObserved();var a=r.dehanceValues_(r.values_);return a[t](function(u,c){return e.call(n,u,c,i)})}}function IA(t){return function(){var e=this,n=this[Te];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(a,u,c){return r(a,u,c,e)},i[t].apply(i,arguments)}}var $L=cr("ObservableArrayAdministration",gy);function Du(t){return Zd(t)&&$L(t[Te])}var HL={},nr="add",Ed="delete",DA=(function(){function t(n,i,r){var a=this;i===void 0&&(i=Yr),r===void 0&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Te]=HL,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=i,this.name_=r,ci(Map)||Fe(18),hr(function(){a.keysAtom_=nA("ObservableMap.keys()"),a.data_=new Map,a.hasMap_=new Map,n&&a.merge(n)})}var e=t.prototype;return e.has_=function(i){return this.data_.has(i)},e.has=function(i){var r=this;if(!ue.trackingDerivation)return this.has_(i);var a=this.hasMap_.get(i);if(!a){var u=a=new rr(this.has_(i),eh,"ObservableMap.key?",!1);this.hasMap_.set(i,u),CA(u,function(){return r.hasMap_.delete(i)})}return a.get()},e.set=function(i,r){var a=this.has_(i);if(Un(this)){var u=Bn(this,{type:a?Ni:nr,object:this,newValue:r,name:i});if(!u)return this;r=u.newValue}return a?this.updateValue_(i,r):this.addValue_(i,r),this},e.delete=function(i){var r=this;if(this.keysAtom_,Un(this)){var a=Bn(this,{type:Ed,object:this,name:i});if(!a)return!1}if(this.has_(i)){var u=eu(),c=si(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:Ed,object:this,oldValue:this.data_.get(i).value_,name:i}:null;return lo(function(){var d;r.keysAtom_.reportChanged(),(d=r.hasMap_.get(i))==null||d.setNewValue_(!1);var m=r.data_.get(i);m.setNewValue_(void 0),r.data_.delete(i)}),c&&ai(this,h),!0}return!1},e.updateValue_=function(i,r){var a=this.data_.get(i);if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var u=eu(),c=si(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:Ni,object:this,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),c&&ai(this,h)}},e.addValue_=function(i,r){var a=this;this.keysAtom_,lo(function(){var d,m=new rr(r,a.enhancer_,"ObservableMap.key",!1);a.data_.set(i,m),r=m.value_,(d=a.hasMap_.get(i))==null||d.setNewValue_(!0),a.keysAtom_.reportChanged()});var u=eu(),c=si(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:nr,object:this,name:i,newValue:r}:null;c&&ai(this,h)},e.get=function(i){return this.has(i)?this.dehanceValue_(this.data_.get(i).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var i=this,r=this.keys();return eE({next:function(){var u=r.next(),c=u.done,h=u.value;return{done:c,value:c?void 0:i.get(h)}}})},e.entries=function(){var i=this,r=this.keys();return eE({next:function(){var u=r.next(),c=u.done,h=u.value;return{done:c,value:c?void 0:[h,i.get(h)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(i,r){for(var a=la(this),u;!(u=a()).done;){var c=u.value,h=c[0],d=c[1];i.call(r,d,h,this)}},e.merge=function(i){var r=this;return dr(i)&&(i=new Map(i)),lo(function(){go(i)?ck(i).forEach(function(a){return r.set(a,i[a])}):Array.isArray(i)?i.forEach(function(a){var u=a[0],c=a[1];return r.set(u,c)}):xa(i)?(uk(i)||Fe(19,i),i.forEach(function(a,u){return r.set(u,a)})):i!=null&&Fe(20,i)}),this},e.clear=function(){var i=this;lo(function(){hA(function(){for(var r=la(i.keys()),a;!(a=r()).done;){var u=a.value;i.delete(u)}})})},e.replace=function(i){var r=this;return lo(function(){for(var a=GL(i),u=new Map,c=!1,h=la(r.data_.keys()),d;!(d=h()).done;){var m=d.value;if(!a.has(m)){var y=r.delete(m);if(y)c=!0;else{var S=r.data_.get(m);u.set(m,S)}}}for(var b=la(a.entries()),C;!(C=b()).done;){var x=C.value,A=x[0],M=x[1],I=r.data_.has(A);if(r.set(A,M),r.data_.has(A)){var N=r.data_.get(A);u.set(A,N),I||(c=!0)}}if(!c)if(r.data_.size!==u.size)r.keysAtom_.reportChanged();else for(var D=r.data_.keys(),k=u.keys(),U=D.next(),O=k.next();!U.done;){if(U.value!==O.value){r.keysAtom_.reportChanged();break}U=D.next(),O=k.next()}r.data_=u}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(i,r){return Iu(this,i)},e.intercept_=function(i){return Nu(this,i)},Aa(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])})(),dr=cr("ObservableMap",DA);function eE(t){return t[Symbol.toStringTag]="MapIterator",yy(t)}function GL(t){if(xa(t)||dr(t))return t;if(Array.isArray(t))return new Map(t);if(go(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}else return Fe(21,t)}var VL={},OA=(function(){function t(n,i,r){var a=this;i===void 0&&(i=Yr),r===void 0&&(r="ObservableSet"),this.name_=void 0,this[Te]=VL,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,ci(Set)||Fe(22),this.enhancer_=function(u,c){return i(u,c,r)},hr(function(){a.atom_=nA(a.name_),n&&a.replace(n)})}var e=t.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.clear=function(){var i=this;lo(function(){hA(function(){for(var r=la(i.data_.values()),a;!(a=r()).done;){var u=a.value;i.delete(u)}})})},e.forEach=function(i,r){for(var a=la(this),u;!(u=a()).done;){var c=u.value;i.call(r,c,c,this)}},e.add=function(i){var r=this;if(this.atom_,Un(this)){var a=Bn(this,{type:nr,object:this,newValue:i});if(!a)return this;i=a.newValue}if(!this.has(i)){lo(function(){r.data_.add(r.enhancer_(i,void 0)),r.atom_.reportChanged()});var u=!1,c=si(this),h=c||u?{observableKind:"set",debugObjectName:this.name_,type:nr,object:this,newValue:i}:null;c&&ai(this,h)}return this},e.delete=function(i){var r=this;if(Un(this)){var a=Bn(this,{type:Ed,object:this,oldValue:i});if(!a)return!1}if(this.has(i)){var u=!1,c=si(this),h=c||u?{observableKind:"set",debugObjectName:this.name_,type:Ed,object:this,oldValue:i}:null;return lo(function(){r.atom_.reportChanged(),r.data_.delete(i)}),c&&ai(this,h),!0}return!1},e.has=function(i){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(i))},e.entries=function(){var i=this.values();return tE({next:function(){var a=i.next(),u=a.value,c=a.done;return c?{value:void 0,done:c}:{value:[u,u],done:c}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var i=this,r=this.data_.values();return tE({next:function(){var u=r.next(),c=u.value,h=u.done;return h?{value:void 0,done:h}:{value:i.dehanceValue_(c),done:h}}})},e.intersection=function(i){if(ao(i)&&!ni(i))return i.intersection(this);var r=new Set(this);return r.intersection(i)},e.union=function(i){if(ao(i)&&!ni(i))return i.union(this);var r=new Set(this);return r.union(i)},e.difference=function(i){return new Set(this).difference(i)},e.symmetricDifference=function(i){if(ao(i)&&!ni(i))return i.symmetricDifference(this);var r=new Set(this);return r.symmetricDifference(i)},e.isSubsetOf=function(i){return new Set(this).isSubsetOf(i)},e.isSupersetOf=function(i){return new Set(this).isSupersetOf(i)},e.isDisjointFrom=function(i){if(ao(i)&&!ni(i))return i.isDisjointFrom(this);var r=new Set(this);return r.isDisjointFrom(i)},e.replace=function(i){var r=this;return ni(i)&&(i=new Set(i)),lo(function(){Array.isArray(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):ao(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):i!=null&&Fe("Cannot initialize set from "+i)}),this},e.observe_=function(i,r){return Iu(this,i)},e.intercept_=function(i){return Nu(this,i)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},Aa(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])})(),ni=cr("ObservableSet",OA);function tE(t){return t[Symbol.toStringTag]="SetIterator",yy(t)}var nE=Object.create(null),iE="remove",PA=(function(){function t(n,i,r,a){i===void 0&&(i=new Map),a===void 0&&(a=$k),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=i,this.name_=r,this.defaultAnnotation_=a,this.keysAtom_=new fr("ObservableObject.keys"),this.isPlainObject_=go(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(i){return this.values_.get(i).get()},e.setObservablePropValue_=function(i,r){var a=this.values_.get(i);if(a instanceof fi)return a.set(r),!0;if(Un(this)){var u=Bn(this,{type:Ni,object:this.proxy_||this.target_,name:i,newValue:r});if(!u)return null;r=u.newValue}if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var c=si(this),h=!1,d=c||h?{type:Ni,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),c&&ai(this,d)}return!0},e.get_=function(i){return ue.trackingDerivation&&!fo(this.target_,i)&&this.has_(i),this.target_[i]},e.set_=function(i,r,a){return a===void 0&&(a=!1),fo(this.target_,i)?this.values_.has(i)?this.setObservablePropValue_(i,r):a?Reflect.set(this.target_,i,r):(this.target_[i]=r,!0):this.extend_(i,{value:r,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,a)},e.has_=function(i){if(!ue.trackingDerivation)return i in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var r=this.pendingKeys_.get(i);return r||(r=new rr(i in this.target_,eh,"ObservableObject.key?",!1),this.pendingKeys_.set(i,r)),r.get()},e.make_=function(i,r){if(r===!0&&(r=this.defaultAnnotation_),r!==!1){if(!(i in this.target_)){var a;if((a=this.target_[Ci])!=null&&a[i])return;Fe(1,r.annotationType_,this.name_+"."+i.toString())}for(var u=this.target_;u&&u!==Tu;){var c=gd(u,i);if(c){var h=r.make_(this,i,c,u);if(h===0)return;if(h===1)break}u=Object.getPrototypeOf(u)}rE(this,r,i)}},e.extend_=function(i,r,a,u){if(u===void 0&&(u=!1),a===!0&&(a=this.defaultAnnotation_),a===!1)return this.defineProperty_(i,r,u);var c=a.extend_(this,i,r,u);return c&&rE(this,a,i),c},e.defineProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Fn();var u=this.delete_(i);if(!u)return u;if(Un(this)){var c=Bn(this,{object:this.proxy_||this.target_,name:i,type:nr,newValue:r.value});if(!c)return null;var h=c.newValue;r.value!==h&&(r=Kr({},r,{value:h}))}if(a){if(!Reflect.defineProperty(this.target_,i,r))return!1}else Ri(this.target_,i,r);this.notifyPropertyAddition_(i,r.value)}finally{$n()}return!0},e.defineObservableProperty_=function(i,r,a,u){u===void 0&&(u=!1),this.keysAtom_;try{Fn();var c=this.delete_(i);if(!c)return c;if(Un(this)){var h=Bn(this,{object:this.proxy_||this.target_,name:i,type:nr,newValue:r});if(!h)return null;r=h.newValue}var d=oE(i),m={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:d.get,set:d.set};if(u){if(!Reflect.defineProperty(this.target_,i,m))return!1}else Ri(this.target_,i,m);var y=new rr(r,a,"ObservableObject.key",!1);this.values_.set(i,y),this.notifyPropertyAddition_(i,y.value_)}finally{$n()}return!0},e.defineComputedProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Fn();var u=this.delete_(i);if(!u)return u;if(Un(this)){var c=Bn(this,{object:this.proxy_||this.target_,name:i,type:nr,newValue:void 0});if(!c)return null}r.name||(r.name="ObservableObject.key"),r.context=this.proxy_||this.target_;var h=oE(i),d={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,i,d))return!1}else Ri(this.target_,i,d);this.values_.set(i,new fi(r)),this.notifyPropertyAddition_(i,void 0)}finally{$n()}return!0},e.delete_=function(i,r){if(r===void 0&&(r=!1),this.keysAtom_,!fo(this.target_,i))return!0;if(Un(this)){var a=Bn(this,{object:this.proxy_||this.target_,name:i,type:iE});if(!a)return null}try{var u;Fn();var c=si(this),h=!1,d=this.values_.get(i),m=void 0;if(!d&&(c||h)){var y;m=(y=gd(this.target_,i))==null?void 0:y.value}if(r){if(!Reflect.deleteProperty(this.target_,i))return!1}else delete this.target_[i];if(d&&(this.values_.delete(i),d instanceof rr&&(m=d.value_),_A(d)),this.keysAtom_.reportChanged(),(u=this.pendingKeys_)==null||(u=u.get(i))==null||u.set(i in this.target_),c||h){var S={type:iE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:i};c&&ai(this,S)}}finally{$n()}return!0},e.observe_=function(i,r){return Iu(this,i)},e.intercept_=function(i){return Nu(this,i)},e.notifyPropertyAddition_=function(i,r){var a,u=si(this),c=!1;if(u||c){var h=u||c?{type:nr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:i,newValue:r}:null;u&&ai(this,h)}(a=this.pendingKeys_)==null||(a=a.get(i))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),ga(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t})();function os(t,e){var n;if(fo(t,Te))return t;var i=(n=e?.name)!=null?n:"ObservableObject",r=new PA(t,new Map,String(i),Wk(e));return Cu(t,Te,r),t}var zL=cr("ObservableObjectAdministration",PA);function oE(t){return nE[t]||(nE[t]={get:function(){return this[Te].getObservablePropValue_(t)},set:function(n){return this[Te].setObservablePropValue_(t,n)}})}function Ou(t){return Zd(t)?zL(t[Te]):!1}function rE(t,e,n){var i;(i=t.target_[Ci])==null||delete i[n]}var qL=LA(0),JL=(function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1})(),lg=0,kA=function(){};function jL(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}jL(kA,Array.prototype);var vy=(function(t){function e(i,r,a,u){var c;return a===void 0&&(a="ObservableArray"),u===void 0&&(u=!1),c=t.call(this)||this,hr(function(){var h=new gy(a,r,u,!0);h.proxy_=c,Qx(c,Te,h),i&&i.length&&c.spliceWithArray(0,0,i),JL&&Object.defineProperty(c,"0",qL)}),c}tA(e,t);var n=e.prototype;return n.concat=function(){this[Te].atom_.reportObserved();for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return Array.prototype.concat.apply(this.slice(),a.map(function(c){return Du(c)?c.slice():c}))},n[Symbol.iterator]=function(){var i=this,r=0;return yy({next:function(){return r<i.length?{value:i[r++],done:!1}:{done:!0,value:void 0}}})},Aa(e,[{key:"length",get:function(){return this[Te].getArrayLength_()},set:function(r){this[Te].setArrayLength_(r)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])})(kA);Object.entries(wd).forEach(function(t){var e=t[0],n=t[1];e!=="concat"&&Cu(vy.prototype,e,n)});function LA(t){return{enumerable:!1,configurable:!0,get:function(){return this[Te].get_(t)},set:function(n){this[Te].set_(t,n)}}}function KL(t){Ri(vy.prototype,""+t,LA(t))}function UA(t){if(t>lg){for(var e=lg;e<t+100;e++)KL(e);lg=t}}UA(1e3);function YL(t,e,n){return new vy(t,e,n)}function Td(t,e){if(typeof t=="object"&&t!==null){if(Du(t))return e!==void 0&&Fe(23),t[Te].atom_;if(ni(t))return t.atom_;if(dr(t)){if(e===void 0)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||Fe(25,e,fv(t)),n}if(Ou(t)){if(!e)return Fe(26);var i=t[Te].values_.get(e);return i||Fe(27,e,fv(t)),i}if(cy(t)||Mu(t)||bd(t))return t}else if(ci(t)&&bd(t[Te]))return t[Te];Fe(28)}function XL(t,e){if(t||Fe(29),cy(t)||Mu(t)||bd(t)||dr(t)||ni(t))return t;if(t[Te])return t[Te];Fe(24,t)}function fv(t,e){var n;if(e!==void 0)n=Td(t,e);else{if(va(t))return t.name;Ou(t)||dr(t)||ni(t)?n=XL(t):n=Td(t)}return n.name_}function hr(t){var e=is(),n=dy(!0);Fn();try{return t()}finally{$n(),hy(n),ho(e)}}var sE=Tu.toString;function BA(t,e,n){return n===void 0&&(n=-1),dv(t,e,n)}function dv(t,e,n,i,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var a=typeof t;if(a!=="function"&&a!=="object"&&typeof e!="object")return!1;var u=sE.call(t);if(u!==sE.call(e))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=aE(t),e=aE(e);var c=u==="[object Array]";if(!c){if(typeof t!="object"||typeof e!="object")return!1;var h=t.constructor,d=e.constructor;if(h!==d&&!(ci(h)&&h instanceof h&&ci(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),i=i||[],r=r||[];for(var m=i.length;m--;)if(i[m]===t)return r[m]===e;if(i.push(t),r.push(e),c){if(m=t.length,m!==e.length)return!1;for(;m--;)if(!dv(t[m],e[m],n-1,i,r))return!1}else{var y=Object.keys(t),S=y.length;if(Object.keys(e).length!==S)return!1;for(var b=0;b<S;b++){var C=y[b];if(!(fo(e,C)&&dv(t[C],e[C],n-1,i,r)))return!1}}return i.pop(),r.pop(),!0}function aE(t){return Du(t)?t.slice():xa(t)||dr(t)||ao(t)||ni(t)?Array.from(t.entries()):t}var lE,WL=((lE=Qd().Iterator)==null?void 0:lE.prototype)||{};function yy(t){return t[Symbol.iterator]=QL,Object.assign(Object.create(WL),t)}function QL(){return this}["Symbol","Map","Set"].forEach(function(t){var e=Qd();typeof e[t]>"u"&&Fe("MobX requires global '"+t+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:mL,extras:{getDebugName:fv},$mobx:Te});if(!E.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!NA)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var ih=Jx();const Hr=Eu(ih);function ZL(t){t()}function eU(t){t||(t=ZL),RL({reactionScheduler:t})}function tU(t){return ML(t)}var nU=1e4,iU=1e4,oU=(function(){function t(e){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(i){i===void 0&&(i=nU),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var r=Date.now();n.registrations.forEach(function(a,u){r-a.registeredAt>=i&&(n.finalize(a.value),n.registrations.delete(u))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n,i){this.registrations.set(i,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,iU))}}),t})(),rU=typeof FinalizationRegistry<"u"?FinalizationRegistry:oU,hv=new rU(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),ug={exports:{}},cg={};var uE;function sU(){if(uE)return cg;uE=1;var t=Wd();function e(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,a=t.useLayoutEffect,u=t.useDebugValue;function c(y,S){var b=S(),C=i({inst:{value:b,getSnapshot:S}}),x=C[0].inst,A=C[1];return a(function(){x.value=b,x.getSnapshot=S,h(x)&&A({inst:x})},[y,b,S]),r(function(){return h(x)&&A({inst:x}),y(function(){h(x)&&A({inst:x})})},[y]),u(b),b}function h(y){var S=y.getSnapshot;y=y.value;try{var b=S();return!n(y,b)}catch{return!0}}function d(y,S){return S()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return cg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,cg}var cE;function aU(){return cE||(cE=1,ug.exports=sU()),ug.exports}var lU=aU();function fE(t){t.reaction=new vo("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function uU(t,e){e===void 0&&(e="observed");var n=nt.useRef(null);if(!n.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(c){return hv.unregister(i),i.onStoreChange=c,i.reaction||(fE(i),i.stateVersion=Symbol()),function(){var h;i.onStoreChange=null,(h=i.reaction)===null||h===void 0||h.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};n.current=i}var r=n.current;r.reaction||(fE(r),hv.register(n,r,r)),nt.useDebugValue(r.reaction,tU),lU.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getSnapshot);var a,u;if(r.reaction.track(function(){try{a=t()}catch(c){u=c}}),u)throw u;return a}var fg,dg,FA=typeof Symbol=="function"&&Symbol.for,cU=(dg=(fg=Object.getOwnPropertyDescriptor(function(){},"name"))===null||fg===void 0?void 0:fg.configurable)!==null&&dg!==void 0?dg:!1,dE=FA?Symbol.for("react.forward_ref"):typeof E.forwardRef=="function"&&E.forwardRef(function(t){return null}).$$typeof,hE=FA?Symbol.for("react.memo"):typeof E.memo=="function"&&E.memo(function(t){return null}).$$typeof;function Ze(t,e){var n;if(hE&&t.$$typeof===hE)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=(n=void 0)!==null&&n!==void 0?n:!1,r=t,a=t.displayName||t.name;if(dE&&t.$$typeof===dE&&(i=!0,r=t.render,typeof r!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var u=function(c,h){return uU(function(){return r(c,h)},a)};return u.displayName=t.displayName,cU&&Object.defineProperty(u,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(u.contextTypes=t.contextTypes),i&&(u=E.forwardRef(u)),u=E.memo(u),dU(t,u),u}var fU={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function dU(t,e){Object.keys(t).forEach(function(n){fU[n]||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}var hg;eU(ih.unstable_batchedUpdates);hg=hv.finalizeAllImmediately;var pg={exports:{}};var pE;function hU(){return pE||(pE=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(a=r(a,i(c)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var u="";for(var c in a)e.call(a,c)&&a[c]&&(u=r(u,c));return u}function r(a,u){return u?a?a+" "+u:a+u:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(pg)),pg.exports}var pU=hU();const Ne=Eu(pU);function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pv.apply(null,arguments)}function $A(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function mE(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function mU(t){var e=gU(t,"string");return typeof e=="symbol"?e:String(e)}function gU(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vU(t,e,n){var i=E.useRef(t!==void 0),r=E.useState(e),a=r[0],u=r[1],c=t!==void 0,h=i.current;return i.current=c,!c&&h&&a!==e&&u(e),[c?t:a,E.useCallback(function(d){for(var m=arguments.length,y=new Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];n&&n.apply(void 0,[d].concat(y)),u(d)},[n])]}function _y(t,e){return Object.keys(e).reduce(function(n,i){var r,a=n,u=a[mE(i)],c=a[i],h=$A(a,[mE(i),i].map(mU)),d=e[i],m=vU(c,u,t[d]),y=m[0],S=m[1];return pv({},h,(r={},r[i]=y,r[d]=S,r))},t)}function mv(t,e){return mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mv(t,e)}function yU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,mv(t,e)}const _U=["xxl","xl","lg","md","sm","xs"],SU="xs",Pu=E.createContext({prefixes:{},breakpoints:_U,minBreakpoint:SU}),{Consumer:LK,Provider:UK}=Pu;function Be(t,e){const{prefixes:n}=E.useContext(Pu);return t||n[e]||e}function HA(){const{breakpoints:t}=E.useContext(Pu);return t}function GA(){const{minBreakpoint:t}=E.useContext(Pu);return t}function bU(){const{dir:t}=E.useContext(Pu);return t==="rtl"}function oh(t){return t&&t.ownerDocument||document}function wU(t){var e=oh(t);return e&&e.defaultView||window}function EU(t,e){return wU(t).getComputedStyle(t,e)}var TU=/([A-Z])/g;function CU(t){return t.replace(TU,"-$1").toLowerCase()}var xU=/^ms-/;function Tf(t){return CU(t).replace(xU,"-ms-")}var AU=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function RU(t){return!!(t&&AU.test(t))}function po(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Tf(e))||EU(t).getPropertyValue(Tf(e));Object.keys(e).forEach(function(r){var a=e[r];!a&&a!==0?t.style.removeProperty(Tf(r)):RU(r)?i+=r+"("+a+") ":n+=Tf(r)+": "+a+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var mg={exports:{}},gg,gE;function MU(){if(gE)return gg;gE=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gg=t,gg}var vg,vE;function NU(){if(vE)return vg;vE=1;var t=MU();function e(){}function n(){}return n.resetWarningCache=e,vg=function(){function i(u,c,h,d,m,y){if(y!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},vg}var yE;function IU(){return yE||(yE=1,mg.exports=NU()()),mg.exports}var DU=IU();const yg=Eu(DU),_E={disabled:!1},VA=nt.createContext(null);var OU=function(e){return e.scrollTop},$l="unmounted",tr="exited",ti="entering",uo="entered",cu="exiting",wo=(function(t){yU(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var u=r,c=u&&!u.isMounting?i.enter:i.appear,h;return a.appearStatus=null,i.in?c?(h=tr,a.appearStatus=ti):h=uo:i.unmountOnExit||i.mountOnEnter?h=$l:h=tr,a.state={status:h},a.nextCallback=null,a}e.getDerivedStateFromProps=function(r,a){var u=r.in;return u&&a.status===$l?{status:tr}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var a=null;if(r!==this.props){var u=this.state.status;this.props.in?u!==ti&&u!==uo&&(a=ti):(u===ti||u===uo)&&(a=cu)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,a,u,c;return a=u=c=r,r!=null&&typeof r!="number"&&(a=r.exit,u=r.enter,c=r.appear!==void 0?r.appear:u),{exit:a,enter:u,appear:c}},n.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===ti){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Hr.findDOMNode(this);u&&OU(u)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===tr&&this.setState({status:$l})},n.performEnter=function(r){var a=this,u=this.props.enter,c=this.context?this.context.isMounting:r,h=this.props.nodeRef?[c]:[Hr.findDOMNode(this),c],d=h[0],m=h[1],y=this.getTimeouts(),S=c?y.appear:y.enter;if(!r&&!u||_E.disabled){this.safeSetState({status:uo},function(){a.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:ti},function(){a.props.onEntering(d,m),a.onTransitionEnd(S,function(){a.safeSetState({status:uo},function(){a.props.onEntered(d,m)})})})},n.performExit=function(){var r=this,a=this.props.exit,u=this.getTimeouts(),c=this.props.nodeRef?void 0:Hr.findDOMNode(this);if(!a||_E.disabled){this.safeSetState({status:tr},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:cu},function(){r.props.onExiting(c),r.onTransitionEnd(u.exit,function(){r.safeSetState({status:tr},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},n.setNextCallback=function(r){var a=this,u=!0;return this.nextCallback=function(c){u&&(u=!1,a.nextCallback=null,r(c))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},n.onTransitionEnd=function(r,a){this.setNextCallback(a);var u=this.props.nodeRef?this.props.nodeRef.current:Hr.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!u||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=h[0],m=h[1];this.props.addEndListener(d,m)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===$l)return null;var a=this.props,u=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var c=$A(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return nt.createElement(VA.Provider,{value:null},typeof u=="function"?u(r,c):nt.cloneElement(nt.Children.only(u),c))},e})(nt.Component);wo.contextType=VA;wo.propTypes={};function Ks(){}wo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ks,onEntering:Ks,onEntered:Ks,onExit:Ks,onExiting:Ks,onExited:Ks};wo.UNMOUNTED=$l;wo.EXITED=tr;wo.ENTERING=ti;wo.ENTERED=uo;wo.EXITING=cu;function PU(t){return t.code==="Escape"||t.keyCode===27}function kU(){const t=E.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function Ra(t){if(!t||typeof t=="function")return null;const{major:e}=kU();return e>=19?t.props.ref:t.ref}const rh=!!(typeof window<"u"&&window.document&&window.document.createElement);var gv=!1,vv=!1;try{var _g={get passive(){return gv=!0},get once(){return vv=gv=!0}};rh&&(window.addEventListener("test",_g,_g),window.removeEventListener("test",_g,!0))}catch{}function zA(t,e,n,i){if(i&&typeof i!="boolean"&&!vv){var r=i.once,a=i.capture,u=n;!vv&&r&&(u=n.__once||function c(h){this.removeEventListener(e,c,a),n.call(this,h)},n.__once=u),t.addEventListener(e,u,gv?i:a)}t.addEventListener(e,n,i)}function LU(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function ir(t,e,n,i){return zA(t,e,n,i),function(){LU(t,e,n,i)}}function UU(t,e,n,i){if(i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function BU(t){var e=po(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function FU(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||UU(t,"transitionend",!0)},e+n),a=ir(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),a()}}function $U(t,e,n,i){n==null&&(n=BU(t)||0);var r=FU(t,n,i),a=ir(t,"transitionend",e);return function(){r(),a()}}function SE(t,e){const n=po(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function Sy(t,e){const n=SE(t,"transitionDuration"),i=SE(t,"transitionDelay"),r=$U(t,a=>{a.target===t&&(r(),e(a))},n+i)}function Ll(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function qA(t){t.offsetHeight}const bE=t=>!t||typeof t=="function"?t:e=>{t.current=e};function HU(t,e){const n=bE(t),i=bE(e);return r=>{n&&n(r),i&&i(r)}}function by(t,e){return E.useMemo(()=>HU(t,e),[t,e])}function GU(t){return t&&"setState"in t?Hr.findDOMNode(t):t??null}const sh=nt.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:a,addEndListener:u,children:c,childRef:h,...d},m)=>{const y=E.useRef(null),S=by(y,h),b=U=>{S(GU(U))},C=U=>O=>{U&&y.current&&U(y.current,O)},x=E.useCallback(C(t),[t]),A=E.useCallback(C(e),[e]),M=E.useCallback(C(n),[n]),I=E.useCallback(C(i),[i]),N=E.useCallback(C(r),[r]),D=E.useCallback(C(a),[a]),k=E.useCallback(C(u),[u]);return w.jsx(wo,{ref:m,...d,onEnter:x,onEntered:M,onEntering:A,onExit:I,onExited:D,onExiting:N,addEndListener:k,nodeRef:y,children:typeof c=="function"?(U,O)=>c(U,{...O,ref:b}):nt.cloneElement(c,{ref:b})})});sh.displayName="TransitionWrapper";const VU={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function zU(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,i=e[n],r=VU[t];return i+parseInt(po(e,r[0]),10)+parseInt(po(e,r[1]),10)}const qU={[tr]:"collapse",[cu]:"collapsing",[ti]:"collapsing",[uo]:"collapse show"},JA=nt.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,className:a,children:u,dimension:c="height",in:h=!1,timeout:d=300,mountOnEnter:m=!1,unmountOnExit:y=!1,appear:S=!1,getDimensionValue:b=zU,...C},x)=>{const A=typeof c=="function"?c():c,M=E.useMemo(()=>Ll(U=>{U.style[A]="0"},t),[A,t]),I=E.useMemo(()=>Ll(U=>{const O=`scroll${A[0].toUpperCase()}${A.slice(1)}`;U.style[A]=`${U[O]}px`},e),[A,e]),N=E.useMemo(()=>Ll(U=>{U.style[A]=null},n),[A,n]),D=E.useMemo(()=>Ll(U=>{U.style[A]=`${b(A,U)}px`,qA(U)},i),[i,b,A]),k=E.useMemo(()=>Ll(U=>{U.style[A]=null},r),[A,r]);return w.jsx(sh,{ref:x,addEndListener:Sy,...C,"aria-expanded":C.role?h:null,onEnter:M,onEntering:I,onEntered:N,onExit:D,onExiting:k,childRef:Ra(u),in:h,timeout:d,mountOnEnter:m,unmountOnExit:y,appear:S,children:(U,O)=>nt.cloneElement(u,{...O,className:Ne(a,u.props.className,qU[U],A==="width"&&"collapse-horizontal")})})});JA.displayName="Collapse";function JU(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t},[t]),e}function ku(t){const e=JU(t);return E.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const wy=(t=>E.forwardRef((e,n)=>w.jsx("div",{...e,ref:n,className:Ne(e.className,t)})));function jU(){return E.useState(null)}function KU(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t},[t]),e}function Lt(t){const e=KU(t);return E.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function YU(t,e,n,i=!1){const r=Lt(n);E.useEffect(()=>{const a=typeof t=="function"?t():t;return a.addEventListener(e,r,i),()=>a.removeEventListener(e,r,i)},[t])}function jA(){const t=E.useRef(!0),e=E.useRef(()=>t.current);return E.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function KA(t){const e=E.useRef(null);return E.useEffect(()=>{e.current=t}),e.current}const XU=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",WU=typeof document<"u",wE=WU||XU?E.useLayoutEffect:E.useEffect,QU=["as","disabled"];function ZU(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function e2(t){return!t||t.trim()==="#"}function Ey({tagName:t,disabled:e,href:n,target:i,rel:r,role:a,onClick:u,tabIndex:c=0,type:h}){t||(n!=null||i!=null||r!=null?t="a":t="button");const d={tagName:t};if(t==="button")return[{type:h||"button",disabled:e},d];const m=S=>{if((e||t==="a"&&e2(n))&&S.preventDefault(),e){S.stopPropagation();return}u?.(S)},y=S=>{S.key===" "&&(S.preventDefault(),m(S))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:m,onKeyDown:y},d]}const Ty=E.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=ZU(t,QU);const[a,{tagName:u}]=Ey(Object.assign({tagName:n,disabled:i},r));return w.jsx(u,Object.assign({},r,a,{ref:e}))});Ty.displayName="Button";const t2=["onKeyDown"];function n2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function i2(t){return!t||t.trim()==="#"}const Cy=E.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=n2(t,t2);const[r]=Ey(Object.assign({tagName:"a"},i)),a=Lt(u=>{r.onKeyDown(u),n?.(u)});return i2(i.href)||i.role==="button"?w.jsx("a",Object.assign({ref:e},i,r,{onKeyDown:a})):w.jsx("a",Object.assign({ref:e},i,{onKeyDown:n}))});Cy.displayName="Anchor";const o2={[ti]:"show",[uo]:"show"},YA=E.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},a)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=E.useCallback((h,d)=>{qA(h),i?.(h,d)},[i]);return w.jsx(sh,{ref:a,addEndListener:Sy,...u,onEnter:c,childRef:Ra(e),children:(h,d)=>E.cloneElement(e,{...d,className:Ne("fade",t,e.props.className,o2[h],n[h])})})});YA.displayName="Fade";const r2={"aria-label":yg.string,onClick:yg.func,variant:yg.oneOf(["white"])},xy=E.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>w.jsx("button",{ref:r,type:"button",className:Ne("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));xy.displayName="CloseButton";xy.propTypes=r2;const XA=E.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:a=!1,className:u,...c},h)=>{const d=Be(e,"btn"),[m,{tagName:y}]=Ey({tagName:t,disabled:a,...c}),S=y;return w.jsx(S,{...m,...c,ref:h,disabled:a,className:Ne(u,d,r&&"active",n&&`${d}-${n}`,i&&`${d}-${i}`,c.href&&a&&"disabled")})});XA.displayName="Button";const Ay=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-body"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));Ay.displayName="CardBody";const WA=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-footer"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));WA.displayName="CardFooter";const Ry=E.createContext(null);Ry.displayName="CardHeaderContext";const QA=E.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const a=Be(t,"card-header"),u=E.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return w.jsx(Ry.Provider,{value:u,children:w.jsx(n,{ref:r,...i,className:Ne(e,a)})})});QA.displayName="CardHeader";const ZA=E.forwardRef(({bsPrefix:t,className:e,variant:n,as:i="img",...r},a)=>{const u=Be(t,"card-img");return w.jsx(i,{ref:a,className:Ne(n?`${u}-${n}`:u,e),...r})});ZA.displayName="CardImg";const eR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-img-overlay"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));eR.displayName="CardImgOverlay";const tR=E.forwardRef(({className:t,bsPrefix:e,as:n="a",...i},r)=>(e=Be(e,"card-link"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));tR.displayName="CardLink";const s2=wy("h6"),nR=E.forwardRef(({className:t,bsPrefix:e,as:n=s2,...i},r)=>(e=Be(e,"card-subtitle"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));nR.displayName="CardSubtitle";const iR=E.forwardRef(({className:t,bsPrefix:e,as:n="p",...i},r)=>(e=Be(e,"card-text"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));iR.displayName="CardText";const a2=wy("h5"),oR=E.forwardRef(({className:t,bsPrefix:e,as:n=a2,...i},r)=>(e=Be(e,"card-title"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));oR.displayName="CardTitle";const rR=E.forwardRef(({bsPrefix:t,className:e,bg:n,text:i,border:r,body:a=!1,children:u,as:c="div",...h},d)=>{const m=Be(t,"card");return w.jsx(c,{ref:d,...h,className:Ne(e,m,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:a?w.jsx(Ay,{children:u}):u})});rR.displayName="Card";const Cf=Object.assign(rR,{Img:ZA,Title:oR,Subtitle:nR,Body:Ay,Link:tR,Text:iR,Header:QA,Footer:WA,ImgOverlay:eR});function l2({as:t,bsPrefix:e,className:n,...i}){e=Be(e,"col");const r=HA(),a=GA(),u=[],c=[];return r.forEach(h=>{const d=i[h];delete i[h];let m,y,S;typeof d=="object"&&d!=null?{span:m,offset:y,order:S}=d:m=d;const b=h!==a?`-${h}`:"";m&&u.push(m===!0?`${e}${b}`:`${e}${b}-${m}`),S!=null&&c.push(`order${b}-${S}`),y!=null&&c.push(`offset${b}-${y}`)}),[{...i,className:Ne(n,...u,...c)},{as:t,bsPrefix:e,spans:u}]}const sR=E.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:a,spans:u}]=l2(t);return w.jsx(r,{...i,ref:e,className:Ne(n,!u.length&&a)})});sR.displayName="Col";const aR=E.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:i,...r},a)=>{const u=Be(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return w.jsx(n,{ref:a,...r,className:Ne(i,e?`${u}${c}`:u)})});aR.displayName="Container";var u2=Function.prototype.bind.call(Function.prototype.call,[].slice);function so(t,e){return u2(t.querySelectorAll(e))}function c2(t,e,n){const i=E.useRef(t!==void 0),[r,a]=E.useState(e),u=t!==void 0,c=i.current;return i.current=u,!u&&c&&r!==e&&a(e),[u?t:r,E.useCallback((...h)=>{const[d,...m]=h;let y=n?.(d,...m);return a(d),y},[n])]}function lR(){const[,t]=E.useReducer(e=>e+1,0);return t}const ah=E.createContext(null);var EE=Object.prototype.hasOwnProperty;function TE(t,e,n){for(n of t.keys())if(tu(n,e))return n}function tu(t,e){var n,i,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&tu(t[i],e[i]););return i===-1}if(n===Set){if(t.size!==e.size)return!1;for(i of t)if(r=i,r&&typeof r=="object"&&(r=TE(e,r),!r)||!e.has(r))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t)if(r=i[0],r&&typeof r=="object"&&(r=TE(e,r),!r)||!tu(i[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return i===-1}if(!n||typeof t=="object"){i=0;for(n in t)if(EE.call(t,n)&&++i&&!EE.call(e,n)||!(n in e)||!tu(t[n],e[n]))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}function f2(t){const e=jA();return[t[0],E.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var tn="top",Jn="bottom",jn="right",nn="left",My="auto",Lu=[tn,Jn,jn,nn],_a="start",fu="end",d2="clippingParents",uR="viewport",Ul="popper",h2="reference",CE=Lu.reduce(function(t,e){return t.concat([e+"-"+_a,e+"-"+fu])},[]),cR=[].concat(Lu,[My]).reduce(function(t,e){return t.concat([e,e+"-"+_a,e+"-"+fu])},[]),p2="beforeRead",m2="read",g2="afterRead",v2="beforeMain",y2="main",_2="afterMain",S2="beforeWrite",b2="write",w2="afterWrite",E2=[p2,m2,g2,v2,y2,_2,S2,b2,w2];function Ii(t){return t.split("-")[0]}function wn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wr(t){var e=wn(t).Element;return t instanceof e||t instanceof Element}function Di(t){var e=wn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Ny(t){if(typeof ShadowRoot>"u")return!1;var e=wn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var zr=Math.max,Cd=Math.min,Sa=Math.round;function yv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function fR(){return!/^((?!chrome|android).)*safari/i.test(yv())}function ba(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,a=1;e&&Di(t)&&(r=t.offsetWidth>0&&Sa(i.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Sa(i.height)/t.offsetHeight||1);var u=Wr(t)?wn(t):window,c=u.visualViewport,h=!fR()&&n,d=(i.left+(h&&c?c.offsetLeft:0))/r,m=(i.top+(h&&c?c.offsetTop:0))/a,y=i.width/r,S=i.height/a;return{width:y,height:S,top:m,right:d+y,bottom:m+S,left:d,x:d,y:m}}function Iy(t){var e=ba(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function dR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ny(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function sr(t){return t?(t.nodeName||"").toLowerCase():null}function yo(t){return wn(t).getComputedStyle(t)}function T2(t){return["table","td","th"].indexOf(sr(t))>=0}function pr(t){return((Wr(t)?t.ownerDocument:t.document)||window.document).documentElement}function lh(t){return sr(t)==="html"?t:t.assignedSlot||t.parentNode||(Ny(t)?t.host:null)||pr(t)}function xE(t){return!Di(t)||yo(t).position==="fixed"?null:t.offsetParent}function C2(t){var e=/firefox/i.test(yv()),n=/Trident/i.test(yv());if(n&&Di(t)){var i=yo(t);if(i.position==="fixed")return null}var r=lh(t);for(Ny(r)&&(r=r.host);Di(r)&&["html","body"].indexOf(sr(r))<0;){var a=yo(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function Uu(t){for(var e=wn(t),n=xE(t);n&&T2(n)&&yo(n).position==="static";)n=xE(n);return n&&(sr(n)==="html"||sr(n)==="body"&&yo(n).position==="static")?e:n||C2(t)||e}function Dy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function nu(t,e,n){return zr(t,Cd(e,n))}function x2(t,e,n){var i=nu(t,e,n);return i>n?n:i}function hR(){return{top:0,right:0,bottom:0,left:0}}function pR(t){return Object.assign({},hR(),t)}function mR(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var A2=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,pR(typeof e!="number"?e:mR(e,Lu))};function R2(t){var e,n=t.state,i=t.name,r=t.options,a=n.elements.arrow,u=n.modifiersData.popperOffsets,c=Ii(n.placement),h=Dy(c),d=[nn,jn].indexOf(c)>=0,m=d?"height":"width";if(!(!a||!u)){var y=A2(r.padding,n),S=Iy(a),b=h==="y"?tn:nn,C=h==="y"?Jn:jn,x=n.rects.reference[m]+n.rects.reference[h]-u[h]-n.rects.popper[m],A=u[h]-n.rects.reference[h],M=Uu(a),I=M?h==="y"?M.clientHeight||0:M.clientWidth||0:0,N=x/2-A/2,D=y[b],k=I-S[m]-y[C],U=I/2-S[m]/2+N,O=nu(D,U,k),q=h;n.modifiersData[i]=(e={},e[q]=O,e.centerOffset=O-U,e)}}function M2(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||dR(e.elements.popper,r)&&(e.elements.arrow=r))}const N2={name:"arrow",enabled:!0,phase:"main",fn:R2,effect:M2,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wa(t){return t.split("-")[1]}var I2={top:"auto",right:"auto",bottom:"auto",left:"auto"};function D2(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Sa(n*r)/r||0,y:Sa(i*r)/r||0}}function AE(t){var e,n=t.popper,i=t.popperRect,r=t.placement,a=t.variation,u=t.offsets,c=t.position,h=t.gpuAcceleration,d=t.adaptive,m=t.roundOffsets,y=t.isFixed,S=u.x,b=S===void 0?0:S,C=u.y,x=C===void 0?0:C,A=typeof m=="function"?m({x:b,y:x}):{x:b,y:x};b=A.x,x=A.y;var M=u.hasOwnProperty("x"),I=u.hasOwnProperty("y"),N=nn,D=tn,k=window;if(d){var U=Uu(n),O="clientHeight",q="clientWidth";if(U===wn(n)&&(U=pr(n),yo(U).position!=="static"&&c==="absolute"&&(O="scrollHeight",q="scrollWidth")),U=U,r===tn||(r===nn||r===jn)&&a===fu){D=Jn;var J=y&&U===k&&k.visualViewport?k.visualViewport.height:U[O];x-=J-i.height,x*=h?1:-1}if(r===nn||(r===tn||r===Jn)&&a===fu){N=jn;var Y=y&&U===k&&k.visualViewport?k.visualViewport.width:U[q];b-=Y-i.width,b*=h?1:-1}}var W=Object.assign({position:c},d&&I2),re=m===!0?D2({x:b,y:x},wn(n)):{x:b,y:x};if(b=re.x,x=re.y,h){var ie;return Object.assign({},W,(ie={},ie[D]=I?"0":"",ie[N]=M?"0":"",ie.transform=(k.devicePixelRatio||1)<=1?"translate("+b+"px, "+x+"px)":"translate3d("+b+"px, "+x+"px, 0)",ie))}return Object.assign({},W,(e={},e[D]=I?x+"px":"",e[N]=M?b+"px":"",e.transform="",e))}function O2(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,a=n.adaptive,u=a===void 0?!0:a,c=n.roundOffsets,h=c===void 0?!0:c,d={placement:Ii(e.placement),variation:wa(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,AE(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,AE(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const P2={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:O2,data:{}};var xf={passive:!0};function k2(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,a=r===void 0?!0:r,u=i.resize,c=u===void 0?!0:u,h=wn(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(m){m.addEventListener("scroll",n.update,xf)}),c&&h.addEventListener("resize",n.update,xf),function(){a&&d.forEach(function(m){m.removeEventListener("scroll",n.update,xf)}),c&&h.removeEventListener("resize",n.update,xf)}}const L2={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:k2,data:{}};var U2={left:"right",right:"left",bottom:"top",top:"bottom"};function ed(t){return t.replace(/left|right|bottom|top/g,function(e){return U2[e]})}var B2={start:"end",end:"start"};function RE(t){return t.replace(/start|end/g,function(e){return B2[e]})}function Oy(t){var e=wn(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Py(t){return ba(pr(t)).left+Oy(t).scrollLeft}function F2(t,e){var n=wn(t),i=pr(t),r=n.visualViewport,a=i.clientWidth,u=i.clientHeight,c=0,h=0;if(r){a=r.width,u=r.height;var d=fR();(d||!d&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}return{width:a,height:u,x:c+Py(t),y:h}}function $2(t){var e,n=pr(t),i=Oy(t),r=(e=t.ownerDocument)==null?void 0:e.body,a=zr(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),u=zr(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-i.scrollLeft+Py(t),h=-i.scrollTop;return yo(r||n).direction==="rtl"&&(c+=zr(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:u,x:c,y:h}}function ky(t){var e=yo(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function gR(t){return["html","body","#document"].indexOf(sr(t))>=0?t.ownerDocument.body:Di(t)&&ky(t)?t:gR(lh(t))}function iu(t,e){var n;e===void 0&&(e=[]);var i=gR(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),a=wn(i),u=r?[a].concat(a.visualViewport||[],ky(i)?i:[]):i,c=e.concat(u);return r?c:c.concat(iu(lh(u)))}function _v(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function H2(t,e){var n=ba(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function ME(t,e,n){return e===uR?_v(F2(t,n)):Wr(e)?H2(e,n):_v($2(pr(t)))}function G2(t){var e=iu(lh(t)),n=["absolute","fixed"].indexOf(yo(t).position)>=0,i=n&&Di(t)?Uu(t):t;return Wr(i)?e.filter(function(r){return Wr(r)&&dR(r,i)&&sr(r)!=="body"}):[]}function V2(t,e,n,i){var r=e==="clippingParents"?G2(t):[].concat(e),a=[].concat(r,[n]),u=a[0],c=a.reduce(function(h,d){var m=ME(t,d,i);return h.top=zr(m.top,h.top),h.right=Cd(m.right,h.right),h.bottom=Cd(m.bottom,h.bottom),h.left=zr(m.left,h.left),h},ME(t,u,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function vR(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ii(i):null,a=i?wa(i):null,u=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,h;switch(r){case tn:h={x:u,y:e.y-n.height};break;case Jn:h={x:u,y:e.y+e.height};break;case jn:h={x:e.x+e.width,y:c};break;case nn:h={x:e.x-n.width,y:c};break;default:h={x:e.x,y:e.y}}var d=r?Dy(r):null;if(d!=null){var m=d==="y"?"height":"width";switch(a){case _a:h[d]=h[d]-(e[m]/2-n[m]/2);break;case fu:h[d]=h[d]+(e[m]/2-n[m]/2);break}}return h}function du(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,a=n.strategy,u=a===void 0?t.strategy:a,c=n.boundary,h=c===void 0?d2:c,d=n.rootBoundary,m=d===void 0?uR:d,y=n.elementContext,S=y===void 0?Ul:y,b=n.altBoundary,C=b===void 0?!1:b,x=n.padding,A=x===void 0?0:x,M=pR(typeof A!="number"?A:mR(A,Lu)),I=S===Ul?h2:Ul,N=t.rects.popper,D=t.elements[C?I:S],k=V2(Wr(D)?D:D.contextElement||pr(t.elements.popper),h,m,u),U=ba(t.elements.reference),O=vR({reference:U,element:N,placement:r}),q=_v(Object.assign({},N,O)),J=S===Ul?q:U,Y={top:k.top-J.top+M.top,bottom:J.bottom-k.bottom+M.bottom,left:k.left-J.left+M.left,right:J.right-k.right+M.right},W=t.modifiersData.offset;if(S===Ul&&W){var re=W[r];Object.keys(Y).forEach(function(ie){var ae=[jn,Jn].indexOf(ie)>=0?1:-1,de=[tn,Jn].indexOf(ie)>=0?"y":"x";Y[ie]+=re[de]*ae})}return Y}function z2(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,a=n.rootBoundary,u=n.padding,c=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?cR:h,m=wa(i),y=m?c?CE:CE.filter(function(C){return wa(C)===m}):Lu,S=y.filter(function(C){return d.indexOf(C)>=0});S.length===0&&(S=y);var b=S.reduce(function(C,x){return C[x]=du(t,{placement:x,boundary:r,rootBoundary:a,padding:u})[Ii(x)],C},{});return Object.keys(b).sort(function(C,x){return b[C]-b[x]})}function q2(t){if(Ii(t)===My)return[];var e=ed(t);return[RE(t),e,RE(e)]}function J2(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,u=n.altAxis,c=u===void 0?!0:u,h=n.fallbackPlacements,d=n.padding,m=n.boundary,y=n.rootBoundary,S=n.altBoundary,b=n.flipVariations,C=b===void 0?!0:b,x=n.allowedAutoPlacements,A=e.options.placement,M=Ii(A),I=M===A,N=h||(I||!C?[ed(A)]:q2(A)),D=[A].concat(N).reduce(function(le,me){return le.concat(Ii(me)===My?z2(e,{placement:me,boundary:m,rootBoundary:y,padding:d,flipVariations:C,allowedAutoPlacements:x}):me)},[]),k=e.rects.reference,U=e.rects.popper,O=new Map,q=!0,J=D[0],Y=0;Y<D.length;Y++){var W=D[Y],re=Ii(W),ie=wa(W)===_a,ae=[tn,Jn].indexOf(re)>=0,de=ae?"width":"height",F=du(e,{placement:W,boundary:m,rootBoundary:y,altBoundary:S,padding:d}),Q=ae?ie?jn:nn:ie?Jn:tn;k[de]>U[de]&&(Q=ed(Q));var ee=ed(Q),ne=[];if(a&&ne.push(F[re]<=0),c&&ne.push(F[Q]<=0,F[ee]<=0),ne.every(function(le){return le})){J=W,q=!1;break}O.set(W,ne)}if(q)for(var ce=C?3:1,L=function(me){var be=D.find(function(ve){var qe=O.get(ve);if(qe)return qe.slice(0,me).every(function(Je){return Je})});if(be)return J=be,"break"},K=ce;K>0;K--){var se=L(K);if(se==="break")break}e.placement!==J&&(e.modifiersData[i]._skip=!0,e.placement=J,e.reset=!0)}}const j2={name:"flip",enabled:!0,phase:"main",fn:J2,requiresIfExists:["offset"],data:{_skip:!1}};function NE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function IE(t){return[tn,jn,Jn,nn].some(function(e){return t[e]>=0})}function K2(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,u=du(e,{elementContext:"reference"}),c=du(e,{altBoundary:!0}),h=NE(u,i),d=NE(c,r,a),m=IE(h),y=IE(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":y})}const Y2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:K2};function X2(t,e,n){var i=Ii(t),r=[nn,tn].indexOf(i)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,u=a[0],c=a[1];return u=u||0,c=(c||0)*r,[nn,jn].indexOf(i)>=0?{x:c,y:u}:{x:u,y:c}}function W2(t){var e=t.state,n=t.options,i=t.name,r=n.offset,a=r===void 0?[0,0]:r,u=cR.reduce(function(m,y){return m[y]=X2(y,e.rects,a),m},{}),c=u[e.placement],h=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=u}const Q2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:W2};function Z2(t){var e=t.state,n=t.name;e.modifiersData[n]=vR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const eB={name:"popperOffsets",enabled:!0,phase:"read",fn:Z2,data:{}};function tB(t){return t==="x"?"y":"x"}function nB(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,a=r===void 0?!0:r,u=n.altAxis,c=u===void 0?!1:u,h=n.boundary,d=n.rootBoundary,m=n.altBoundary,y=n.padding,S=n.tether,b=S===void 0?!0:S,C=n.tetherOffset,x=C===void 0?0:C,A=du(e,{boundary:h,rootBoundary:d,padding:y,altBoundary:m}),M=Ii(e.placement),I=wa(e.placement),N=!I,D=Dy(M),k=tB(D),U=e.modifiersData.popperOffsets,O=e.rects.reference,q=e.rects.popper,J=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,Y=typeof J=="number"?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(U){if(a){var ie,ae=D==="y"?tn:nn,de=D==="y"?Jn:jn,F=D==="y"?"height":"width",Q=U[D],ee=Q+A[ae],ne=Q-A[de],ce=b?-q[F]/2:0,L=I===_a?O[F]:q[F],K=I===_a?-q[F]:-O[F],se=e.elements.arrow,le=b&&se?Iy(se):{width:0,height:0},me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:hR(),be=me[ae],ve=me[de],qe=nu(0,O[F],le[F]),Je=N?O[F]/2-ce-qe-be-Y.mainAxis:L-qe-be-Y.mainAxis,rn=N?-O[F]/2+ce+qe+ve+Y.mainAxis:K+qe+ve+Y.mainAxis,Tn=e.elements.arrow&&Uu(e.elements.arrow),gi=Tn?D==="y"?Tn.clientTop||0:Tn.clientLeft||0:0,qt=(ie=W?.[D])!=null?ie:0,Jt=Q+Je-qt-gi,et=Q+rn-qt,Fi=nu(b?Cd(ee,Jt):ee,Q,b?zr(ne,et):ne);U[D]=Fi,re[D]=Fi-Q}if(c){var Co,Zu=D==="x"?tn:nn,Fa=D==="x"?Jn:jn,Xn=U[k],xo=k==="y"?"height":"width",ec=Xn+A[Zu],tc=Xn-A[Fa],xt=[tn,nn].indexOf(M)!==-1,nc=(Co=W?.[k])!=null?Co:0,$a=xt?ec:Xn-O[xo]-q[xo]-nc+Y.altAxis,Ha=xt?Xn+O[xo]+q[xo]-nc-Y.altAxis:tc,vr=b&&xt?x2($a,Xn,Ha):nu(b?$a:ec,Xn,b?Ha:tc);U[k]=vr,re[k]=vr-Xn}e.modifiersData[i]=re}}const iB={name:"preventOverflow",enabled:!0,phase:"main",fn:nB,requiresIfExists:["offset"]};function oB(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function rB(t){return t===wn(t)||!Di(t)?Oy(t):oB(t)}function sB(t){var e=t.getBoundingClientRect(),n=Sa(e.width)/t.offsetWidth||1,i=Sa(e.height)/t.offsetHeight||1;return n!==1||i!==1}function aB(t,e,n){n===void 0&&(n=!1);var i=Di(e),r=Di(e)&&sB(e),a=pr(e),u=ba(t,r,n),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&((sr(e)!=="body"||ky(a))&&(c=rB(e)),Di(e)?(h=ba(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=Py(a))),{x:u.left+c.scrollLeft-h.x,y:u.top+c.scrollTop-h.y,width:u.width,height:u.height}}function lB(t){var e=new Map,n=new Set,i=[];t.forEach(function(a){e.set(a.name,a)});function r(a){n.add(a.name);var u=[].concat(a.requires||[],a.requiresIfExists||[]);u.forEach(function(c){if(!n.has(c)){var h=e.get(c);h&&r(h)}}),i.push(a)}return t.forEach(function(a){n.has(a.name)||r(a)}),i}function uB(t){var e=lB(t);return E2.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function cB(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function fB(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var DE={placement:"bottom",modifiers:[],strategy:"absolute"};function OE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function dB(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,a=r===void 0?DE:r;return function(c,h,d){d===void 0&&(d=a);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},DE,a),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},y=[],S=!1,b={state:m,setOptions:function(M){var I=typeof M=="function"?M(m.options):M;x(),m.options=Object.assign({},a,m.options,I),m.scrollParents={reference:Wr(c)?iu(c):c.contextElement?iu(c.contextElement):[],popper:iu(h)};var N=uB(fB([].concat(i,m.options.modifiers)));return m.orderedModifiers=N.filter(function(D){return D.enabled}),C(),b.update()},forceUpdate:function(){if(!S){var M=m.elements,I=M.reference,N=M.popper;if(OE(I,N)){m.rects={reference:aB(I,Uu(N),m.options.strategy==="fixed"),popper:Iy(N)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(Y){return m.modifiersData[Y.name]=Object.assign({},Y.data)});for(var D=0;D<m.orderedModifiers.length;D++){if(m.reset===!0){m.reset=!1,D=-1;continue}var k=m.orderedModifiers[D],U=k.fn,O=k.options,q=O===void 0?{}:O,J=k.name;typeof U=="function"&&(m=U({state:m,options:q,name:J,instance:b})||m)}}}},update:cB(function(){return new Promise(function(A){b.forceUpdate(),A(m)})}),destroy:function(){x(),S=!0}};if(!OE(c,h))return b;b.setOptions(d).then(function(A){!S&&d.onFirstUpdate&&d.onFirstUpdate(A)});function C(){m.orderedModifiers.forEach(function(A){var M=A.name,I=A.options,N=I===void 0?{}:I,D=A.effect;if(typeof D=="function"){var k=D({state:m,name:M,instance:b,options:N}),U=function(){};y.push(k||U)}})}function x(){y.forEach(function(A){return A()}),y=[]}return b}}const hB=dB({defaultModifiers:[Y2,eB,P2,L2,Q2,j2,iB,N2]}),pB=["enabled","placement","strategy","modifiers"];function mB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const gB={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},vB={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const i=(e.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);i.length?e.setAttribute("aria-describedby",i.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:i}=t.elements,r=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in i){const a=i.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(n.id)!==-1)return;i.setAttribute("aria-describedby",a?`${a},${n.id}`:n.id)}}},yB=[];function _B(t,e,n={}){let{enabled:i=!0,placement:r="bottom",strategy:a="absolute",modifiers:u=yB}=n,c=mB(n,pB);const h=E.useRef(u),d=E.useRef(),m=E.useCallback(()=>{var A;(A=d.current)==null||A.update()},[]),y=E.useCallback(()=>{var A;(A=d.current)==null||A.forceUpdate()},[]),[S,b]=f2(E.useState({placement:r,update:m,forceUpdate:y,attributes:{},styles:{popper:{},arrow:{}}})),C=E.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:A})=>{const M={},I={};Object.keys(A.elements).forEach(N=>{M[N]=A.styles[N],I[N]=A.attributes[N]}),b({state:A,styles:M,attributes:I,update:m,forceUpdate:y,placement:A.placement})}}),[m,y,b]),x=E.useMemo(()=>(tu(h.current,u)||(h.current=u),h.current),[u]);return E.useEffect(()=>{!d.current||!i||d.current.setOptions({placement:r,strategy:a,modifiers:[...x,C,gB]})},[a,r,C,i,x]),E.useEffect(()=>{if(!(!i||t==null||e==null))return d.current=hB(t,e,Object.assign({},c,{placement:r,strategy:a,modifiers:[...x,vB,C]})),()=>{d.current!=null&&(d.current.destroy(),d.current=void 0,b(A=>Object.assign({},A,{attributes:{},styles:{popper:{}}})))}},[i,t,e]),S}function xd(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var Sg,PE;function SB(){if(PE)return Sg;PE=1;var t=function(){};return Sg=t,Sg}var bB=SB();const wB=Eu(bB),kE=()=>{};function EB(t){return t.button===0}function TB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const bg=t=>t&&("current"in t?t.current:t),LE={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function CB(t,e=kE,{disabled:n,clickTrigger:i="click"}={}){const r=E.useRef(!1),a=E.useRef(!1),u=E.useCallback(d=>{const m=bg(t);wB(!!m,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!m||TB(d)||!EB(d)||!!xd(m,d.target)||a.current,a.current=!1},[t]),c=Lt(d=>{const m=bg(t);m&&xd(m,d.target)?a.current=!0:a.current=!1}),h=Lt(d=>{r.current||e(d)});E.useEffect(()=>{var d,m;if(n||t==null)return;const y=oh(bg(t)),S=y.defaultView||window;let b=(d=S.event)!=null?d:(m=S.parent)==null?void 0:m.event,C=null;LE[i]&&(C=ir(y,LE[i],c,!0));const x=ir(y,i,u,!0),A=ir(y,i,I=>{if(I===b){b=void 0;return}h(I)});let M=[];return"ontouchstart"in y.documentElement&&(M=[].slice.call(y.body.children).map(I=>ir(I,"mousemove",kE))),()=>{C?.(),x(),A(),M.forEach(I=>I())}},[t,n,i,u,c,h])}function xB(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function AB(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function RB({enabled:t,enableEvents:e,placement:n,flip:i,offset:r,fixed:a,containerPadding:u,arrowElement:c,popperConfig:h={}}){var d,m,y,S,b;const C=xB(h.modifiers);return Object.assign({},h,{placement:n,enabled:t,strategy:a?"fixed":h.strategy,modifiers:AB(Object.assign({},C,{eventListeners:{enabled:e,options:(d=C.eventListeners)==null?void 0:d.options},preventOverflow:Object.assign({},C.preventOverflow,{options:u?Object.assign({padding:u},(m=C.preventOverflow)==null?void 0:m.options):(y=C.preventOverflow)==null?void 0:y.options}),offset:{options:Object.assign({offset:r},(S=C.offset)==null?void 0:S.options)},arrow:Object.assign({},C.arrow,{enabled:!!c,options:Object.assign({},(b=C.arrow)==null?void 0:b.options,{element:c})}),flip:Object.assign({enabled:!!i},C.flip)}))})}const MB=["children","usePopper"];function NB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const IB=()=>{};function yR(t={}){const e=E.useContext(ah),[n,i]=jU(),r=E.useRef(!1),{flip:a,offset:u,rootCloseEvent:c,fixed:h=!1,placement:d,popperConfig:m={},enableEventListeners:y=!0,usePopper:S=!!e}=t,b=e?.show==null?!!t.show:e.show;b&&!r.current&&(r.current=!0);const C=U=>{e?.toggle(!1,U)},{placement:x,setMenu:A,menuElement:M,toggleElement:I}=e||{},N=_B(I,M,RB({placement:d||x||"bottom-start",enabled:S,enableEvents:y??b,offset:u,flip:a,fixed:h,arrowElement:n,popperConfig:m})),D=Object.assign({ref:A||IB,"aria-labelledby":I?.id},N.attributes.popper,{style:N.styles.popper}),k={show:b,placement:x,hasShown:r.current,toggle:e?.toggle,popper:S?N:null,arrowProps:S?Object.assign({ref:i},N.attributes.arrow,{style:N.styles.arrow}):{}};return CB(M,C,{clickTrigger:c,disabled:!b}),[D,k]}function _R(t){let{children:e,usePopper:n=!0}=t,i=NB(t,MB);const[r,a]=yR(Object.assign({},i,{usePopper:n}));return w.jsx(w.Fragment,{children:e(r,a)})}_R.displayName="DropdownMenu";const SR={prefix:String(Math.round(Math.random()*1e10)),current:0},bR=nt.createContext(SR),DB=nt.createContext(!1);let wg=new WeakMap;function OB(t=!1){let e=E.useContext(bR),n=E.useRef(null);if(n.current===null&&!t){var i,r;let a=(r=nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(a){let u=wg.get(a);u==null?wg.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==u.state&&(e.current=u.id,wg.delete(a))}n.current=++e.current}return n.current}function PB(t){let e=E.useContext(bR),n=OB(!!t),i=`react-aria${e.prefix}`;return t||`${i}-${n}`}function kB(t){let e=nt.useId(),[n]=E.useState($B()),i=n?"react-aria":`react-aria${SR.prefix}`;return t||`${i}-${e}`}const LB=typeof nt.useId=="function"?kB:PB;function UB(){return!1}function BB(){return!0}function FB(t){return()=>{}}function $B(){return typeof nt.useSyncExternalStore=="function"?nt.useSyncExternalStore(FB,UB,BB):E.useContext(DB)}const wR=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},UE=()=>{};function ER(){const t=LB(),{show:e=!1,toggle:n=UE,setToggle:i,menuElement:r}=E.useContext(ah)||{},a=E.useCallback(c=>{n(!e,c)},[e,n]),u={id:t,ref:i||UE,onClick:a,"aria-expanded":!!e};return r&&wR(r)&&(u["aria-haspopup"]=!0),[u,{show:e,toggle:n}]}function TR({children:t}){const[e,n]=ER();return w.jsx(w.Fragment,{children:t(e,n)})}TR.displayName="DropdownToggle";const Qr=E.createContext(null),hu=(t,e=null)=>t!=null?String(t):e||null,uh=E.createContext(null);uh.displayName="NavContext";const HB="data-rr-ui-",GB="rrUi";function Ma(t){return`${HB}${t}`}function VB(t){return`${GB}${t}`}const zB=["eventKey","disabled","onClick","active","as"];function qB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function CR({key:t,href:e,active:n,disabled:i,onClick:r}){const a=E.useContext(Qr),u=E.useContext(uh),{activeKey:c}=u||{},h=hu(t,e),d=n==null&&t!=null?hu(c)===h:n;return[{onClick:Lt(y=>{i||(r?.(y),a&&!y.isPropagationStopped()&&a(h,y))}),"aria-disabled":i||void 0,"aria-selected":d,[Ma("dropdown-item")]:""},{isActive:d}]}const xR=E.forwardRef((t,e)=>{let{eventKey:n,disabled:i,onClick:r,active:a,as:u=Ty}=t,c=qB(t,zB);const[h]=CR({key:n,href:c.href,disabled:i,onClick:r,active:a});return w.jsx(u,Object.assign({},c,{ref:e},h))});xR.displayName="DropdownItem";const AR=E.createContext(rh?window:void 0);AR.Provider;function ch(){return E.useContext(AR)}function BE(){const t=lR(),e=E.useRef(null),n=E.useCallback(i=>{e.current=i,t()},[t]);return[e,n]}function Bu({defaultShow:t,show:e,onSelect:n,onToggle:i,itemSelector:r=`* [${Ma("dropdown-item")}]`,focusFirstItemOnShow:a,placement:u="bottom-start",children:c}){const h=ch(),[d,m]=c2(e,t,i),[y,S]=BE(),b=y.current,[C,x]=BE(),A=C.current,M=KA(d),I=E.useRef(null),N=E.useRef(!1),D=E.useContext(Qr),k=E.useCallback((W,re,ie=re?.type)=>{m(W,{originalEvent:re,source:ie})},[m]),U=Lt((W,re)=>{n?.(W,re),k(!1,re,"select"),re.isPropagationStopped()||D?.(W,re)}),O=E.useMemo(()=>({toggle:k,placement:u,show:d,menuElement:b,toggleElement:A,setMenu:S,setToggle:x}),[k,u,d,b,A,S,x]);b&&M&&!d&&(N.current=b.contains(b.ownerDocument.activeElement));const q=Lt(()=>{A&&A.focus&&A.focus()}),J=Lt(()=>{const W=I.current;let re=a;if(re==null&&(re=y.current&&wR(y.current)?"keyboard":!1),re===!1||re==="keyboard"&&!/^key.+$/.test(W))return;const ie=so(y.current,r)[0];ie&&ie.focus&&ie.focus()});E.useEffect(()=>{d?J():N.current&&(N.current=!1,q())},[d,N,q,J]),E.useEffect(()=>{I.current=null});const Y=(W,re)=>{if(!y.current)return null;const ie=so(y.current,r);let ae=ie.indexOf(W)+re;return ae=Math.max(0,Math.min(ae,ie.length)),ie[ae]};return YU(E.useCallback(()=>h.document,[h]),"keydown",W=>{var re,ie;const{key:ae}=W,de=W.target,F=(re=y.current)==null?void 0:re.contains(de),Q=(ie=C.current)==null?void 0:ie.contains(de);if(/input|textarea/i.test(de.tagName)&&(ae===" "||ae!=="Escape"&&F||ae==="Escape"&&de.type==="search")||!F&&!Q||ae==="Tab"&&(!y.current||!d))return;I.current=W.type;const ne={originalEvent:W,source:W.type};switch(ae){case"ArrowUp":{const ce=Y(de,-1);ce&&ce.focus&&ce.focus(),W.preventDefault();return}case"ArrowDown":if(W.preventDefault(),!d)m(!0,ne);else{const ce=Y(de,1);ce&&ce.focus&&ce.focus()}return;case"Tab":zA(de.ownerDocument,"keyup",ce=>{var L;(ce.key==="Tab"&&!ce.target||!((L=y.current)!=null&&L.contains(ce.target)))&&m(!1,ne)},{once:!0});break;case"Escape":ae==="Escape"&&(W.preventDefault(),W.stopPropagation()),m(!1,ne);break}}),w.jsx(Qr.Provider,{value:U,children:w.jsx(ah.Provider,{value:O,children:c})})}Bu.displayName="Dropdown";Bu.Menu=_R;Bu.Toggle=TR;Bu.Item=xR;const Ly=E.createContext({});Ly.displayName="DropdownContext";const RR=E.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:i="separator",...r},a)=>(e=Be(e,"dropdown-divider"),w.jsx(n,{ref:a,className:Ne(t,e),role:i,...r})));RR.displayName="DropdownDivider";const MR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",role:i="heading",...r},a)=>(e=Be(e,"dropdown-header"),w.jsx(n,{ref:a,className:Ne(t,e),role:i,...r})));MR.displayName="DropdownHeader";const NR=E.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:i=!1,onClick:r,active:a,as:u=Cy,...c},h)=>{const d=Be(t,"dropdown-item"),[m,y]=CR({key:n,href:c.href,disabled:i,onClick:r,active:a});return w.jsx(u,{...c,...m,ref:h,className:Ne(e,d,y.isActive&&"active",i&&"disabled")})});NR.displayName="DropdownItem";const IR=E.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Be(e,"dropdown-item-text"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));IR.displayName="DropdownItemText";const JB=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",jB=typeof document<"u",DR=jB||JB?E.useLayoutEffect:E.useEffect,Uy=E.createContext(null);Uy.displayName="InputGroupContext";const rs=E.createContext(null);rs.displayName="NavbarContext";function OR(t,e){return t}function PR(t,e,n){const i=n?"top-end":"top-start",r=n?"top-start":"top-end",a=n?"bottom-end":"bottom-start",u=n?"bottom-start":"bottom-end",c=n?"right-start":"left-start",h=n?"right-end":"left-end",d=n?"left-start":"right-start",m=n?"left-end":"right-end";let y=t?u:a;return e==="up"?y=t?r:i:e==="end"?y=t?m:d:e==="start"?y=t?h:c:e==="down-centered"?y="bottom":e==="up-centered"&&(y="top"),y}const kR=E.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:i,flip:r=!0,show:a,renderOnMount:u,as:c="div",popperConfig:h,variant:d,...m},y)=>{let S=!1;const b=E.useContext(rs),C=Be(t,"dropdown-menu"),{align:x,drop:A,isRTL:M}=E.useContext(Ly);n=n||x;const I=E.useContext(Uy),N=[];if(n)if(typeof n=="object"){const W=Object.keys(n);if(W.length){const re=W[0],ie=n[re];S=ie==="start",N.push(`${C}-${re}-${ie}`)}}else n==="end"&&(S=!0);const D=PR(S,A,M),[k,{hasShown:U,popper:O,show:q,toggle:J}]=yR({flip:r,rootCloseEvent:i,show:a,usePopper:!b&&N.length===0,offset:[0,2],popperConfig:h,placement:D});if(k.ref=by(OR(y),k.ref),DR(()=>{q&&O?.update()},[q]),!U&&!u&&!I)return null;typeof c!="string"&&(k.show=q,k.close=()=>J?.(!1),k.align=n);let Y=m.style;return O!=null&&O.placement&&(Y={...m.style,...k.style},m["x-placement"]=O.placement),w.jsx(c,{...m,...k,style:Y,...(N.length||b)&&{"data-bs-popper":"static"},className:Ne(e,C,q&&"show",S&&`${C}-end`,d&&`${C}-${d}`,...N)})});kR.displayName="DropdownMenu";const LR=E.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:i,as:r=XA,...a},u)=>{const c=Be(t,"dropdown-toggle"),h=E.useContext(ah);i!==void 0&&(a.bsPrefix=i);const[d]=ER();return d.ref=by(d.ref,OR(u)),w.jsx(r,{className:Ne(n,c,e&&`${c}-split`,h?.show&&"show"),...d,...a})});LR.displayName="DropdownToggle";const UR=E.forwardRef((t,e)=>{const{bsPrefix:n,drop:i="down",show:r,className:a,align:u="start",onSelect:c,onToggle:h,focusFirstItemOnShow:d,as:m="div",navbar:y,autoClose:S=!0,...b}=_y(t,{show:"onToggle"}),C=E.useContext(Uy),x=Be(n,"dropdown"),A=bU(),M=O=>S===!1?O==="click":S==="inside"?O!=="rootClose":S==="outside"?O!=="select":!0,I=ku((O,q)=>{var J;!((J=q.originalEvent)==null||(J=J.target)==null)&&J.classList.contains("dropdown-toggle")&&q.source==="mousedown"||(q.originalEvent.currentTarget===document&&(q.source!=="keydown"||q.originalEvent.key==="Escape")&&(q.source="rootClose"),M(q.source)&&h?.(O,q))}),D=PR(u==="end",i,A),k=E.useMemo(()=>({align:u,drop:i,isRTL:A}),[u,i,A]),U={down:x,"down-centered":`${x}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return w.jsx(Ly.Provider,{value:k,children:w.jsx(Bu,{placement:D,show:r,onSelect:c,onToggle:I,focusFirstItemOnShow:d,itemSelector:`.${x}-item:not(.disabled):not(:disabled)`,children:C?b.children:w.jsx(m,{...b,ref:e,className:Ne(a,r&&"show",U[i])})})})});UR.displayName="Dropdown";const Af=Object.assign(UR,{Toggle:LR,Menu:kR,Item:NR,ItemText:IR,Divider:RR,Header:MR}),FE=t=>!t||typeof t=="function"?t:e=>{t.current=e};function KB(t,e){const n=FE(t),i=FE(e);return r=>{n&&n(r),i&&i(r)}}function fh(t,e){return E.useMemo(()=>KB(t,e),[t,e])}const BR=E.createContext(null),YB=["as","active","eventKey"];function XB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function FR({key:t,onClick:e,active:n,id:i,role:r,disabled:a}){const u=E.useContext(Qr),c=E.useContext(uh),h=E.useContext(BR);let d=n;const m={role:r};if(c){!r&&c.role==="tablist"&&(m.role="tab");const y=c.getControllerId(t??null),S=c.getControlledId(t??null);m[Ma("event-key")]=t,m.id=y||i,d=n==null&&t!=null?c.activeKey===t:n,(d||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(m["aria-controls"]=S)}return m.role==="tab"&&(m["aria-selected"]=d,d||(m.tabIndex=-1),a&&(m.tabIndex=-1,m["aria-disabled"]=!0)),m.onClick=Lt(y=>{a||(e?.(y),t!=null&&u&&!y.isPropagationStopped()&&u(t,y))}),[m,{isActive:d}]}const $R=E.forwardRef((t,e)=>{let{as:n=Ty,active:i,eventKey:r}=t,a=XB(t,YB);const[u,c]=FR(Object.assign({key:hu(r,a.href),active:i},a));return u[Ma("active")]=c.isActive,w.jsx(n,Object.assign({},a,u,{ref:e}))});$R.displayName="NavItem";const WB=["as","onSelect","activeKey","role","onKeyDown"];function QB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const $E=()=>{},HE=Ma("event-key"),HR=E.forwardRef((t,e)=>{let{as:n="div",onSelect:i,activeKey:r,role:a,onKeyDown:u}=t,c=QB(t,WB);const h=lR(),d=E.useRef(!1),m=E.useContext(Qr),y=E.useContext(BR);let S,b;y&&(a=a||"tablist",r=y.activeKey,S=y.getControlledId,b=y.getControllerId);const C=E.useRef(null),x=N=>{const D=C.current;if(!D)return null;const k=so(D,`[${HE}]:not([aria-disabled=true])`),U=D.querySelector("[aria-selected=true]");if(!U||U!==document.activeElement)return null;const O=k.indexOf(U);if(O===-1)return null;let q=O+N;return q>=k.length&&(q=0),q<0&&(q=k.length-1),k[q]},A=(N,D)=>{N!=null&&(i?.(N,D),m?.(N,D))},M=N=>{if(u?.(N),!y)return;let D;switch(N.key){case"ArrowLeft":case"ArrowUp":D=x(-1);break;case"ArrowRight":case"ArrowDown":D=x(1);break;default:return}D&&(N.preventDefault(),A(D.dataset[VB("EventKey")]||null,N),d.current=!0,h())};E.useEffect(()=>{if(C.current&&d.current){const N=C.current.querySelector(`[${HE}][aria-selected=true]`);N?.focus()}d.current=!1});const I=fh(e,C);return w.jsx(Qr.Provider,{value:A,children:w.jsx(uh.Provider,{value:{role:a,activeKey:hu(r),getControlledId:S||$E,getControllerId:b||$E},children:w.jsx(n,Object.assign({},c,{onKeyDown:M,ref:I,role:a}))})})});HR.displayName="Nav";const ZB=Object.assign(HR,{Item:$R});function Eg(t){t===void 0&&(t=oh());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function eF(t){const e=E.useRef(t);return e.current=t,e}function tF(t){const e=eF(t);E.useEffect(()=>()=>e.current(),[])}function nF(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const GE=Ma("modal-open");class By{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return nF(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(po(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(GE,""),po(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(GE),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Tg=(t,e)=>rh?t==null?(e||oh()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function iF(t,e){const n=ch(),[i,r]=E.useState(()=>Tg(t,n?.document));if(!i){const a=Tg(t);a&&r(a)}return E.useEffect(()=>{},[e,i]),E.useEffect(()=>{const a=Tg(t);a!==i&&r(a)},[t,i]),i}function oF({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const a=E.useRef(null),u=E.useRef(e),c=Lt(n);E.useEffect(()=>{e?u.current=!0:c(a.current)},[e,c]);const h=fh(a,Ra(t)),d=E.cloneElement(t,{ref:h});return e?d:r||!u.current&&i?null:d}const rF=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function sF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function aF(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:a,onExited:u,addEndListener:c,children:h}=t,d=sF(t,rF);const m=E.useRef(null),y=fh(m,Ra(h)),S=D=>k=>{D&&m.current&&D(m.current,k)},b=E.useCallback(S(e),[e]),C=E.useCallback(S(n),[n]),x=E.useCallback(S(i),[i]),A=E.useCallback(S(r),[r]),M=E.useCallback(S(a),[a]),I=E.useCallback(S(u),[u]),N=E.useCallback(S(c),[c]);return Object.assign({},d,{nodeRef:m},e&&{onEnter:b},n&&{onEntering:C},i&&{onEntered:x},r&&{onExit:A},a&&{onExiting:M},u&&{onExited:I},c&&{addEndListener:N},{children:typeof h=="function"?(D,k)=>h(D,Object.assign({},k,{ref:y})):E.cloneElement(h,{ref:y})})}const lF=["component"];function uF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const cF=E.forwardRef((t,e)=>{let{component:n}=t,i=uF(t,lF);const r=aF(i);return w.jsx(n,Object.assign({ref:e},r))});function fF({in:t,onTransition:e}){const n=E.useRef(null),i=E.useRef(!0),r=Lt(e);return wE(()=>{if(!n.current)return;let a=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>a}),()=>{a=!0}},[t,r]),wE(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function dF({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[a,u]=E.useState(!e);e&&a&&u(!1);const c=fF({in:!!e,onTransition:d=>{const m=()=>{d.isStale()||(d.in?i?.(d.element,d.initial):(u(!0),n?.(d.element)))};Promise.resolve(r(d)).then(m,y=>{throw d.in||u(!0),y})}}),h=fh(c,Ra(t));return a&&!e?null:E.cloneElement(t,{ref:h})}function VE(t,e,n){return t?w.jsx(cF,Object.assign({},n,{component:t})):e?w.jsx(dF,Object.assign({},n,{transition:e})):w.jsx(oF,Object.assign({},n))}const hF=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function pF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let Cg;function mF(t){return Cg||(Cg=new By({ownerDocument:t?.document})),Cg}function gF(t){const e=ch(),n=t||mF(e),i=E.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:E.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:E.useCallback(r=>{i.current.backdrop=r},[])})}const GR=E.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:a,children:u,backdrop:c=!0,keyboard:h=!0,onBackdropClick:d,onEscapeKeyDown:m,transition:y,runTransition:S,backdropTransition:b,runBackdropTransition:C,autoFocus:x=!0,enforceFocus:A=!0,restoreFocus:M=!0,restoreFocusOptions:I,renderDialog:N,renderBackdrop:D=et=>w.jsx("div",Object.assign({},et)),manager:k,container:U,onShow:O,onHide:q=()=>{},onExit:J,onExited:Y,onExiting:W,onEnter:re,onEntering:ie,onEntered:ae}=t,de=pF(t,hF);const F=ch(),Q=iF(U),ee=gF(k),ne=jA(),ce=KA(n),[L,K]=E.useState(!n),se=E.useRef(null);E.useImperativeHandle(e,()=>ee,[ee]),rh&&!ce&&n&&(se.current=Eg(F?.document)),n&&L&&K(!1);const le=Lt(()=>{if(ee.add(),rn.current=ir(document,"keydown",qe),Je.current=ir(document,"focus",()=>setTimeout(be),!0),O&&O(),x){var et,Fi;const Co=Eg((et=(Fi=ee.dialog)==null?void 0:Fi.ownerDocument)!=null?et:F?.document);ee.dialog&&Co&&!xd(ee.dialog,Co)&&(se.current=Co,ee.dialog.focus())}}),me=Lt(()=>{if(ee.remove(),rn.current==null||rn.current(),Je.current==null||Je.current(),M){var et;(et=se.current)==null||et.focus==null||et.focus(I),se.current=null}});E.useEffect(()=>{!n||!Q||le()},[n,Q,le]),E.useEffect(()=>{L&&me()},[L,me]),tF(()=>{me()});const be=Lt(()=>{if(!A||!ne()||!ee.isTopModal())return;const et=Eg(F?.document);ee.dialog&&et&&!xd(ee.dialog,et)&&ee.dialog.focus()}),ve=Lt(et=>{et.target===et.currentTarget&&(d?.(et),c===!0&&q())}),qe=Lt(et=>{h&&PU(et)&&ee.isTopModal()&&(m?.(et),et.defaultPrevented||q())}),Je=E.useRef(),rn=E.useRef(),Tn=(...et)=>{K(!0),Y?.(...et)};if(!Q)return null;const gi=Object.assign({role:i,ref:ee.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},de,{style:a,className:r,tabIndex:-1});let qt=N?N(gi):w.jsx("div",Object.assign({},gi,{children:E.cloneElement(u,{role:"document"})}));qt=VE(y,S,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:J,onExiting:W,onExited:Tn,onEnter:re,onEntering:ie,onEntered:ae,children:qt});let Jt=null;return c&&(Jt=D({ref:ee.setBackdropRef,onClick:ve}),Jt=VE(b,C,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Jt})),w.jsx(w.Fragment,{children:Hr.createPortal(w.jsxs(w.Fragment,{children:[Jt,qt]}),Q)})});GR.displayName="Modal";const vF=Object.assign(GR,{Manager:By});function yF(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function _F(t,e){t.classList?t.classList.add(e):yF(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function zE(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function SF(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=zE(t.className,e):t.setAttribute("class",zE(t.className&&t.className.baseVal||"",e))}const Ys={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class VR extends By{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,po(n,{[e]:`${parseFloat(po(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],po(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(_F(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";so(n,Ys.FIXED_CONTENT).forEach(a=>this.adjustAndStore(i,a,e.scrollBarWidth)),so(n,Ys.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-e.scrollBarWidth)),so(n,Ys.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();SF(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";so(n,Ys.FIXED_CONTENT).forEach(a=>this.restore(i,a)),so(n,Ys.STICKY_CONTENT).forEach(a=>this.restore(r,a)),so(n,Ys.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let xg;function bF(t){return xg||(xg=new VR(t)),xg}const zR=E.createContext({onHide(){}}),qR=E.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...a},u)=>{const c=E.useContext(zR),h=ku(()=>{c?.onHide(),i?.()});return w.jsxs("div",{ref:u,...a,children:[r,n&&w.jsx(xy,{"aria-label":t,variant:e,onClick:h})]})});qR.displayName="AbstractModalHeader";const JR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"nav-item"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));JR.displayName="NavItem";const jR=E.forwardRef(({bsPrefix:t,className:e,as:n=Cy,active:i,eventKey:r,disabled:a=!1,...u},c)=>{t=Be(t,"nav-link");const[h,d]=FR({key:hu(r,u.href),active:i,disabled:a,...u});return w.jsx(n,{...u,...h,ref:c,disabled:a,className:Ne(e,t,a&&"disabled",d.isActive&&"active")})});jR.displayName="NavLink";const KR=E.forwardRef((t,e)=>{const{as:n="div",bsPrefix:i,variant:r,fill:a=!1,justify:u=!1,navbar:c,navbarScroll:h,className:d,activeKey:m,...y}=_y(t,{activeKey:"onSelect"}),S=Be(i,"nav");let b,C,x=!1;const A=E.useContext(rs),M=E.useContext(Ry);return A?(b=A.bsPrefix,x=c??!0):M&&({cardHeaderBsPrefix:C}=M),w.jsx(ZB,{as:n,ref:e,activeKey:m,className:Ne(d,{[S]:!x,[`${b}-nav`]:x,[`${b}-nav-scroll`]:x&&h,[`${C}-${r}`]:!!C,[`${S}-${r}`]:!!r,[`${S}-fill`]:a,[`${S}-justified`]:u}),...y})});KR.displayName="Nav";const wF=Object.assign(KR,{Item:JR,Link:jR}),YR=E.forwardRef(({bsPrefix:t,className:e,as:n,...i},r)=>{t=Be(t,"navbar-brand");const a=n||(i.href?"a":"span");return w.jsx(a,{...i,ref:r,className:Ne(e,t)})});YR.displayName="NavbarBrand";const XR=E.forwardRef(({children:t,bsPrefix:e,...n},i)=>{e=Be(e,"navbar-collapse");const r=E.useContext(rs);return w.jsx(JA,{in:!!(r&&r.expanded),...n,children:w.jsx("div",{ref:i,className:e,children:t})})});XR.displayName="NavbarCollapse";const WR=E.forwardRef(({bsPrefix:t,className:e,children:n,label:i="Toggle navigation",as:r="button",onClick:a,...u},c)=>{t=Be(t,"navbar-toggler");const{onToggle:h,expanded:d}=E.useContext(rs)||{},m=ku(y=>{a&&a(y),h&&h()});return r==="button"&&(u.type="button"),w.jsx(r,{...u,ref:c,onClick:m,"aria-label":i,className:Ne(e,t,!d&&"collapsed"),children:n||w.jsx("span",{className:`${t}-icon`})})});WR.displayName="NavbarToggle";const Sv=new WeakMap,qE=(t,e)=>{if(!t||!e)return;const n=Sv.get(e)||new Map;Sv.set(e,n);let i=n.get(t);return i||(i=e.matchMedia(t),i.refCount=0,n.set(i.media,i)),i};function EF(t,e=typeof window>"u"?void 0:window){const n=qE(t,e),[i,r]=E.useState(()=>n?n.matches:!1);return DR(()=>{let a=qE(t,e);if(!a)return r(!1);let u=Sv.get(e);const c=()=>{r(a.matches)};return a.refCount++,a.addListener(c),c(),()=>{a.removeListener(c),a.refCount--,a.refCount<=0&&u?.delete(a.media),a=void 0}},[t]),i}function TF(t){const e=Object.keys(t);function n(c,h){return c===h?h:c?`${c} and ${h}`:h}function i(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function r(c){const h=i(c);let d=t[h];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function a(c){let h=t[c];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function u(c,h,d){let m;typeof c=="object"?(m=c,d=h,h=!0):(h=h||!0,m={[c]:h});let y=E.useMemo(()=>Object.entries(m).reduce((S,[b,C])=>((C==="up"||C===!0)&&(S=n(S,a(b))),(C==="down"||C===!0)&&(S=n(S,r(b))),S),""),[JSON.stringify(m)]);return EF(y,d)}return u}const CF=TF({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),QR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"offcanvas-body"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));QR.displayName="OffcanvasBody";const xF={[ti]:"show",[uo]:"show"},ZR=E.forwardRef(({bsPrefix:t,className:e,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:a=!1,appear:u=!1,...c},h)=>(t=Be(t,"offcanvas"),w.jsx(sh,{ref:h,addEndListener:Sy,in:i,mountOnEnter:r,unmountOnExit:a,appear:u,...c,childRef:Ra(n),children:(d,m)=>E.cloneElement(n,{...m,className:Ne(e,n.props.className,(d===ti||d===cu)&&`${t}-toggling`,xF[d])})})));ZR.displayName="OffcanvasToggling";const eM=E.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},a)=>(t=Be(t,"offcanvas-header"),w.jsx(qR,{ref:a,...r,className:Ne(e,t),closeLabel:n,closeButton:i})));eM.displayName="OffcanvasHeader";const AF=wy("h5"),tM=E.forwardRef(({className:t,bsPrefix:e,as:n=AF,...i},r)=>(e=Be(e,"offcanvas-title"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));tM.displayName="OffcanvasTitle";function RF(t){return w.jsx(ZR,{...t})}function MF(t){return w.jsx(YA,{...t})}const nM=E.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":i,placement:r="start",responsive:a,show:u=!1,backdrop:c=!0,keyboard:h=!0,scroll:d=!1,onEscapeKeyDown:m,onShow:y,onHide:S,container:b,autoFocus:C=!0,enforceFocus:x=!0,restoreFocus:A=!0,restoreFocusOptions:M,onEntered:I,onExit:N,onExiting:D,onEnter:k,onEntering:U,onExited:O,backdropClassName:q,manager:J,renderStaticNode:Y=!1,...W},re)=>{const ie=E.useRef();t=Be(t,"offcanvas");const[ae,de]=E.useState(!1),F=ku(S),Q=CF(a||"xs","up");E.useEffect(()=>{de(a?u&&!Q:u)},[u,a,Q]);const ee=E.useMemo(()=>({onHide:F}),[F]);function ne(){return J||(d?(ie.current||(ie.current=new VR({handleContainerOverflow:!1})),ie.current):bF())}const ce=(le,...me)=>{le&&(le.style.visibility="visible"),k?.(le,...me)},L=(le,...me)=>{le&&(le.style.visibility=""),O?.(...me)},K=E.useCallback(le=>w.jsx("div",{...le,className:Ne(`${t}-backdrop`,q)}),[q,t]),se=le=>w.jsx("div",{...le,...W,className:Ne(e,a?`${t}-${a}`:t,`${t}-${r}`),"aria-labelledby":i,children:n});return w.jsxs(w.Fragment,{children:[!ae&&(a||Y)&&se({}),w.jsx(zR.Provider,{value:ee,children:w.jsx(vF,{show:ae,ref:re,backdrop:c,container:b,keyboard:h,autoFocus:C,enforceFocus:x&&!d,restoreFocus:A,restoreFocusOptions:M,onEscapeKeyDown:m,onShow:y,onHide:F,onEnter:ce,onEntering:U,onEntered:I,onExit:N,onExiting:D,onExited:L,manager:ne(),transition:RF,backdropTransition:MF,renderBackdrop:K,renderDialog:se})})]})});nM.displayName="Offcanvas";const NF=Object.assign(nM,{Body:QR,Header:eM,Title:tM}),iM=E.forwardRef(({onHide:t,...e},n)=>{const i=E.useContext(rs),r=ku(()=>{i==null||i.onToggle==null||i.onToggle(),t?.()});return w.jsx(NF,{ref:n,show:!!(i!=null&&i.expanded),...e,renderStaticNode:!0,onHide:r})});iM.displayName="NavbarOffcanvas";const oM=E.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Be(e,"navbar-text"),w.jsx(n,{ref:r,className:Ne(t,e),...i})));oM.displayName="NavbarText";const rM=E.forwardRef((t,e)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:a,fixed:u,sticky:c,className:h,as:d="nav",expanded:m,onToggle:y,onSelect:S,collapseOnSelect:b=!1,...C}=_y(t,{expanded:"onToggle"}),x=Be(n,"navbar"),A=E.useCallback((...N)=>{S?.(...N),b&&m&&y?.(!1)},[S,b,m,y]);C.role===void 0&&d!=="nav"&&(C.role="navigation");let M=`${x}-expand`;typeof i=="string"&&(M=`${M}-${i}`);const I=E.useMemo(()=>({onToggle:()=>y?.(!m),bsPrefix:x,expanded:!!m,expand:i}),[x,m,i,y]);return w.jsx(rs.Provider,{value:I,children:w.jsx(Qr.Provider,{value:A,children:w.jsx(d,{ref:e,...C,className:Ne(h,x,i&&M,r&&`${x}-${r}`,a&&`bg-${a}`,c&&`sticky-${c}`,u&&`fixed-${u}`)})})})});rM.displayName="Navbar";const JE=Object.assign(rM,{Brand:YR,Collapse:XR,Offcanvas:iM,Text:oM,Toggle:WR}),sM=E.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const a=Be(t,"row"),u=HA(),c=GA(),h=`${a}-cols`,d=[];return u.forEach(m=>{const y=i[m];delete i[m];let S;y!=null&&typeof y=="object"?{cols:S}=y:S=y;const b=m!==c?`-${m}`:"";S!=null&&d.push(`${h}${b}-${S}`)}),w.jsx(n,{ref:r,...i,className:Ne(e,a,...d)})});sM.displayName="Row";const aM=E.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:i,as:r="div",className:a,...u},c)=>{t=Be(t,"spinner");const h=`${t}-${n}`;return w.jsx(r,{ref:c,...u,className:Ne(a,h,i&&`${h}-${i}`,e&&`text-${e}`)})});aM.displayName="Spinner";const lM=({name:t,onClick:e,subItems:n})=>{const[i,r]=E.useState(!1);return w.jsxs("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[w.jsxs("div",{className:"dropdown-item d-flex justify-content-between",style:{cursor:"pointer"},onClick:e,children:[t," ",n?w.jsx("span",{children:""}):null]}),n&&i&&w.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:0,left:"100%",minWidth:"180px",zIndex:1e3},children:n.map((a,u)=>w.jsx(lM,{name:a.name,onClick:a.onClick,subItems:a.subItems},u))})]})},Lr=({title:t,items:e,onClick:n})=>{const[i,r]=E.useState(!1),a=e&&e.length>0;return w.jsxs("div",{className:"nav-item dropdown",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[w.jsx("span",{className:"nav-link dropdown-toggle",style:{cursor:a||n?"pointer":"default"},onClick:()=>{n&&n()},children:t}),i&&a&&w.jsx("div",{className:"dropdown-menu show",style:{minWidth:"180px"},children:e.map((u,c)=>w.jsx(lM,{...u},c))})]})};class Zr{fileHandle;data;constructor(e,n){this.fileHandle=e,this.data=ht(n),Li(this)}static async create(e,n,i={}){try{const r=await e.getFileHandle(n,{create:!0}),u=await(await r.getFile()).text(),c=u.trim()===""?{...i}:{...i,...JSON.parse(u)};return new Zr(r,c)}catch(r){console.error("Error loading JSON:",r);const a=await e.getFileHandle(n,{create:!0});return new Zr(a,{...i})}}async save(){try{let e=await this.fileHandle.queryPermission({mode:"readwrite"});if(e!=="granted"&&(e=await this.fileHandle.requestPermission({mode:"readwrite"})),e!=="granted")throw new Error("No permission to write file");const n=await this.fileHandle.createWritable();await n.write(JSON.stringify(this.data,null,2)),await n.close()}catch(e){console.error("Error saving JSON:",e)}}async updateField(e,n,i=!0){we(()=>{const r=e.split("/").filter(Boolean);let a=this.data;for(let u=0;u<r.length;u++){const c=r[u];u===r.length-1?a[c]=n:((a[c]===void 0||a[c]===null||typeof a[c]!="object")&&(a[c]={}),a=a[c])}}),i&&await this.save()}getField(e){const n=e.split("/").filter(Boolean);let i=this.data;for(const r of n){if(i==null||typeof i!="object")return;i=i[r]}return i}}async function IF(t){try{console.log("[tmpfiles] Uploading:",t.name);const e=new FormData;e.append("file",t);const n=await fetch("https://tmpfiles.org/api/v1/upload",{method:"POST",body:e});if(!n.ok)throw new Error(`HTTP ${n.status}`);const i=await n.json();console.log("[tmpfiles] Response:",i);const r=i?.data?.url;if(!r)throw new Error("No URL returned");return r.replace("tmpfiles.org/","tmpfiles.org/dl/")}catch(e){throw console.error("[tmpfiles] Upload failed:",e),e}}async function DF(t,e){try{if(e&&((r,a)=>{const u=r.name.toLowerCase(),c=decodeURIComponent(a.split("/").pop()||"").toLowerCase();return u===c})(t,e))return console.log("[ensureUploaded] Existing URL is valid:",e),e;console.log("[ensureUploaded] Uploading file because URL is missing or invalid:",t.name);const i=await IF(t);return console.log("[ensureUploaded] Uploaded URL:",i),i}catch(n){throw console.error("[ensureUploaded] Error ensuring file upload:",n),n}}class Fu{handle;parent;path;shot;urlObject=null;web_url="";tags=[];mediaFolder=null;onTagChanged;constructor(e,n,i="",r=null){this.handle=e,this.parent=n,this.path=i+"/"+e.name,this.shot=r,NA(this,{urlObject:ht,web_url:ht,revokeUrl:Ln,delete:Ln,getUrlObject:Ln,tags:ht,addTag:Ln,removeTag:Ln,setTags:Ln})}get name(){return this.handle.name}async delete(){try{this.revokeUrl(),await this.parent.removeEntry(this.handle.name)}catch(e){throw console.error("Failed to delete video file:",e),e}}revokeUrl(){this.urlObject&&(URL.revokeObjectURL(this.urlObject),this.urlObject=null)}async getWebUrl(){const e=await DF(await this.handle.getFile(),this.web_url);return we(()=>{this.web_url=e}),this.web_url}async getUrlObject(){if(!this.urlObject)try{const e=await this.handle.getFile(),n=URL.createObjectURL(e);we(()=>{this.urlObject=n})}catch(e){console.error("Failed to create object URL:",e),we(()=>{this.urlObject=""})}return this.urlObject}static async fromUrl(e,n){try{const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch video: ${i.statusText}`);const r=await i.blob(),a=e.split("/"),u=a[a.length-1].split("?")[0],c=await n.getFileHandle(u,{create:!0}),h=await c.createWritable();return await h.write(r),await h.close(),new Fu(c,n)}catch(i){throw console.error("Failed to create LocalVideo from URL:",i),i}}log(){console.log(Hn(this))}addTag(e){e&&(this.tags.includes(e)||(this.tags.push(e),this.onTagChanged?.(this,e,!0)))}removeTag(e){this.tags.includes(e)&&(this.tags=this.tags.filter(n=>n!==e),this.onTagChanged?.(this,e,!1))}setTags(e){e&&(this.tags=Array.from(new Set(e.filter(Boolean))))}hasTag(e){return this.tags.includes(e)}toggleTag(e){e&&(this.hasTag(e)?this.removeTag(e):this.addTag(e))}}class mo extends Fu{base64Data=null;async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.handle.getFile(),n=await e.arrayBuffer(),i=e.type||"image/png",r=OF(n);return this.base64Data={rawBase64:r,mime:i},this.base64Data}catch(e){return console.error("Failed to create Base64 from file:",e),{rawBase64:"",mime:"image/png"}}}static async fromBase64(e,n,i){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const u=atob(r),c=u.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=u.charCodeAt(S);const d=await n.getFileHandle(i,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new mo(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalImage from Base64:",r),r}}}function OF(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}var PF={};let kF,LF;function UF(){return{geminiUrl:kF,vertexUrl:LF}}function BF(t,e,n,i){var r,a;if(!t?.baseUrl){const u=UF();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}class Eo{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const c=u.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(n))for(let d=0;d<h.length;d++){const m=h[d];g(m,e.slice(a+1),n[d])}else for(const d of h)g(d,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const c=u.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];g(h[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function FF(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),a=i.split("."),u=new Set;let c=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const d=a[h];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&u.add(d)}bv(t,r,a,0,u)}}function bv(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),c=t;if(u in c&&Array.isArray(c[u]))for(const h of c[u])bv(h,e,n,i+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,c=Object.keys(u).filter(d=>!d.startsWith("_")&&!r.has(d)),h={};for(const d of c)h[d]=u[d];for(const[d,m]of Object.entries(h)){const y=[];for(const S of n.slice(i))S==="*"?y.push(d):y.push(S);g(u,y,m)}for(const d of c)delete u[d]}}else{const u=t;a in u&&bv(u[a],e,n,i+1,r)}}function Fy(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function $F(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function HF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],VF(u)),e}function GF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],zF(u)),e}function VF(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>qF(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function zF(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>JF(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function qF(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],QF(n)),e}function JF(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],ZF(n)),e}function jF(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function KF(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function YF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],XF(u)),e}function XF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function uM(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],WF(u)),e}function WF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function QF(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Fy(i));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function ZF(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Fy(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}var jE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jE||(jE={}));var KE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(KE||(KE={}));var YE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(YE||(YE={}));var or;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(or||(or={}));var XE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(XE||(XE={}));var WE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(WE||(WE={}));var QE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(QE||(QE={}));var ZE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ZE||(ZE={}));var eT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(eT||(eT={}));var tT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(tT||(tT={}));var nT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(nT||(nT={}));var iT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(iT||(iT={}));var oT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(oT||(oT={}));var rT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(rT||(rT={}));var sT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(sT||(sT={}));var aT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(aT||(aT={}));var lT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(lT||(lT={}));var uT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(uT||(uT={}));var cT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cT||(cT={}));var Ad;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ad||(Ad={}));var fT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(fT||(fT={}));var dT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(dT||(dT={}));var hT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hT||(hT={}));var wv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wv||(wv={}));var pT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(pT||(pT={}));var mT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mT||(mT={}));var gT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(gT||(gT={}));var vT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(vT||(vT={}));var yT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yT||(yT={}));var _T;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_T||(_T={}));var ST;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ST||(ST={}));var bT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(bT||(bT={}));var wT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(wT||(wT={}));var ET;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ET||(ET={}));var TT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(TT||(TT={}));var CT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(CT||(CT={}));var xT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xT||(xT={}));var AT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(AT||(AT={}));var RT;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(RT||(RT={}));var MT;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(MT||(MT={}));var NT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(NT||(NT={}));var IT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(IT||(IT={}));var DT;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(DT||(DT={}));var OT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(OT||(OT={}));var PT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(PT||(PT={}));var kT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(kT||(kT={}));var LT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(LT||(LT={}));var UT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(UT||(UT={}));var BT;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(BT||(BT={}));var FT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(FT||(FT={}));var $T;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($T||($T={}));var HT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(HT||(HT={}));var GT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(GT||(GT={}));var VT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(VT||(VT={}));var zT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(zT||(zT={}));var ua;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ua||(ua={}));class Ev{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bl{get text(){var e,n,i,r,a,u,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const y=[];for(const S of(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[b,C]of Object.entries(S))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&y.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;m=!0,d+=S.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,i,r,a,u,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const y of(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[S,b]of Object.entries(y))S!=="inlineData"&&(b!==null||b!==void 0)&&m.push(S);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,a,u,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,a,u,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,a,u,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.output}}class qT{}class JT{}class e${}class t${}class n${}class i${}class jT{}class KT{}class YT{}class o${}class Rd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Rd;let r;const a=e;return n?r=GF(a):r=HF(a),Object.assign(i,r),i}}class XT{}class WT{}class QT{}class ZT{}class r${}class s${}class a${}class $y{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new $y,a=YF(e);return Object.assign(i,a),i}}class l${}class u${}class c${}class eC{}class f${get text(){var e,n,i;let r="",a=!1;const u=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,d]of Object.entries(c))h!=="text"&&h!=="thought"&&d!==null&&u.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,r+=c.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(u))c!=="inlineData"&&h!==null&&a.push(c);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class d${get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Hy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Hy,a=uM(e);return Object.assign(i,a),i}}function ze(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cM(t,e){const n=ze(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function fM(t){return Array.isArray(t)?t.map(e=>Md(e)):[Md(t)]}function Md(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dM(t){const e=Md(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hM(t){const e=Md(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tC(e)):[tC(t)]}function Tv(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function nC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function iC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ut(t){if(t==null)throw new Error("ContentUnion is required");return Tv(t)?t:{role:"user",parts:pM(t)}}function Gy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ut(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Ut(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ut(n)):[Ut(e)]}function Vn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(nC(t)||iC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ut(t)]}const e=[],n=[],i=Tv(t[0]);for(const r of t){const a=Tv(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(nC(r)||iC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:pM(n)}),e}function h$(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(or).includes(n[0].toUpperCase())?n[0].toUpperCase():or.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(or).includes(i.toUpperCase())?i.toUpperCase():or.TYPE_UNSPECIFIED})}}function da(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&h$(t.type,e);for(const[u,c]of Object.entries(t))if(c!=null)if(u=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(or).includes(c.toUpperCase())?c.toUpperCase():or.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=da(c);else if(i.includes(u)){const h=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}h.push(da(d))}e[u]=h}else if(r.includes(u)){const h={};for(const[d,m]of Object.entries(c))h[d]=da(m);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=c}return e}function Vy(t){return da(t)}function zy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function qy(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Na(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=da(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=da(e.response));return t}function Ia(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function p$(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function To(t,e){if(typeof e!="string")throw new Error("name must be a string");return p$(t,e,"cachedContents")}function mM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mr(t){return Fy(t)}function m$(t){return t!=null&&typeof t=="object"&&"name"in t}function g$(t){return t!=null&&typeof t=="object"&&"video"in t}function v$(t){return t!=null&&typeof t=="object"&&"uri"in t}function gM(t){var e;let n;if(m$(t)&&(n=t.name),!(v$(t)&&(n=t.uri,n===void 0))&&!(g$(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function vM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function yM(t){for(const e of["models","tunedModels","publisherModels"])if(y$(t,e))return t[e];return[]}function y$(t,e){return t!==null&&typeof t=="object"&&e in t}function _$(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function S$(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=_$(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function _M(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function b$(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function SM(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Da(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function bM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function w$(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>nH(u))),g(e,["inlinedResponses"],a)}const r=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function E$(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const r=p(t,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function T$(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function td(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["metadata","state"]);r!=null&&g(e,["state"],bM(r));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=p(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const h=p(t,["metadata","model"]);h!=null&&g(e,["model"],h);const d=p(t,["metadata","output"]);return d!=null&&g(e,["dest"],w$(SM(d))),e}function Cv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["state"]);r!=null&&g(e,["state"],bM(r));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["createTime"]);u!=null&&g(e,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(e,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(e,["updateTime"],d);const m=p(t,["model"]);m!=null&&g(e,["model"],m);const y=p(t,["inputConfig"]);y!=null&&g(e,["src"],C$(y));const S=p(t,["outputConfig"]);S!=null&&g(e,["dest"],E$(SM(S)));const b=p(t,["completionStats"]);return b!=null&&g(e,["completionStats"],b),e}function C$(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const r=p(t,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function x$(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>tH(t,u))),g(n,["requests","requests"],a)}return n}function A$(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function R$(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function M$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Da(t,i)),n}function N$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Da(t,i)),n}function I$(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],D$(i));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function D$(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function wM(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>uH(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function O$(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function P$(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],T$(b$(r))),n}function oC(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],x$(t,_M(t,r)));const a=p(e,["config"]);return a!=null&&O$(a,n),n}function k$(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],ze(t,i));const r=p(e,["src"]);r!=null&&g(n,["inputConfig"],A$(_M(t,r)));const a=p(e,["config"]);return a!=null&&P$(a,n),n}function L$(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function U$(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],z$(t,r));const a=p(e,["config"]);return a!=null&&L$(a,n),n}function B$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Da(t,i)),n}function F$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Da(t,i)),n}function $$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function H$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function G$(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=Gy(t,i);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(g(n,["_self"],V$(r,n)),FF(n,{"requests[].*":"requests[].request.*"})),n}function V$(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function z$(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&g(n,["requests"],G$(t,r)),n}function q$(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function J$(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function j$(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K$(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],wM(Ut(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=p(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const C=p(e,["frequencyPenalty"]);C!=null&&g(i,["frequencyPenalty"],C);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Vy(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let ie=N;Array.isArray(ie)&&(ie=ie.map(ae=>cH(ae))),g(n,["safetySettings"],ie)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let ie=Ia(D);Array.isArray(ie)&&(ie=ie.map(ae=>dH(Na(ae)))),g(n,["tools"],ie)}const k=p(e,["toolConfig"]);if(n!==void 0&&k!=null&&g(n,["toolConfig"],fH(k)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],To(t,U));const O=p(e,["responseModalities"]);O!=null&&g(i,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const J=p(e,["speechConfig"]);if(J!=null&&g(i,["speechConfig"],zy(J)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=p(e,["thinkingConfig"]);Y!=null&&g(i,["thinkingConfig"],Y);const W=p(e,["imageConfig"]);W!=null&&g(i,["imageConfig"],eH(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(i,["enableEnhancedCivicAnswers"],re),i}function Y$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>I$(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function X$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Da(t,i)),n}function W$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Da(t,i)),n}function Q$(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function Z$(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function eH(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function tH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let c=Vn(r);Array.isArray(c)&&(c=c.map(h=>wM(h))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(e,["config"]);return u!=null&&g(n,["request","generationConfig"],K$(t,u,p(n,["request"],{}))),n}function nH(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],Y$(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function iH(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function oH(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function rH(t){const e={},n=p(t,["config"]);return n!=null&&iH(n,e),e}function sH(t){const e={},n=p(t,["config"]);return n!=null&&oH(n,e),e}function aH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>td(u))),g(e,["batchJobs"],a)}return e}function lH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Cv(u))),g(e,["batchJobs"],a)}return e}function uH(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],q$(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],J$(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],R$(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function cH(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function fH(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],j$(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function dH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],Q$(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],Z$(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}var _o;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(_o||(_o={}));class ss{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}let hH=class extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ss(_o.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=oC(this.apiClient,e),i=n._url,r=fe("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,h=c.requests,d=[];for(const m of h){const y=Object.assign({},m);if(y.systemInstruction){const S=y.systemInstruction;delete y.systemInstruction;const b=y.request;b.systemInstruction=S,y.request=b}d.push(y)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=k$(this.apiClient,e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Cv(m))}else{const d=oC(this.apiClient,e);return c=fe("{model}:batchGenerateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>td(m))}}async createEmbeddingsInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U$(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>td(h))}}async get(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=W$(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Cv(m))}else{const d=X$(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>td(m))}}async cancel(e){var n,i,r,a;let u="",c={};if(this.apiClient.isVertexAI()){const h=N$(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=M$(this.apiClient,e);u=fe("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=sH(e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=lH(m),S=new eC;return Object.assign(S,y),S})}else{const d=rH(e);return c=fe("batches",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=aH(m),S=new eC;return Object.assign(S,y),S})}}async delete(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=F$(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>H$(m))}else{const d=B$(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>$$(m))}}};function pH(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function rC(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UH(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function mH(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let m=Vn(u);Array.isArray(m)&&(m=m.map(y=>rC(y))),g(e,["contents"],m)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],rC(Ut(c)));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>FH(y))),g(e,["tools"],m)}const d=p(t,["toolConfig"]);if(e!==void 0&&d!=null&&g(e,["toolConfig"],BH(d)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function gH(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let y=Vn(u);Array.isArray(y)&&(y=y.map(S=>S)),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Ut(c));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(S=>$H(S))),g(e,["tools"],y)}const d=p(t,["toolConfig"]);e!==void 0&&d!=null&&g(e,["toolConfig"],d);const m=p(t,["kmsKeyName"]);return e!==void 0&&m!=null&&g(e,["encryption_spec","kmsKeyName"],m),n}function vH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],cM(t,i));const r=p(e,["config"]);return r!=null&&mH(r,n),n}function yH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],cM(t,i));const r=p(e,["config"]);return r!=null&&gH(r,n),n}function _H(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],To(t,i)),n}function SH(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],To(t,i)),n}function bH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function wH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function EH(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function TH(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CH(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xH(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function AH(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],To(t,i)),n}function RH(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],To(t,i)),n}function MH(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function NH(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function IH(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function DH(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function OH(t){const e={},n=p(t,["config"]);return n!=null&&IH(n,e),e}function PH(t){const e={},n=p(t,["config"]);return n!=null&&DH(n,e),e}function kH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function LH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function UH(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],EH(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],TH(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],pH(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function BH(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],CH(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function FH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],MH(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],NH(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function $H(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>xH(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function HH(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function GH(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function VH(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],To(t,i));const r=p(e,["config"]);return r!=null&&HH(r,n),n}function zH(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],To(t,i));const r=p(e,["config"]);return r!=null&&GH(r,n),n}class qH extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ss(_o.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=yH(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=vH(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async get(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=RH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=AH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async delete(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=SH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=wH(m),S=new QT;return Object.assign(S,y),S})}else{const d=_H(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=bH(m),S=new QT;return Object.assign(S,y),S})}}async update(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=zH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=VH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=PH(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=LH(m),S=new ZT;return Object.assign(S,y),S})}else{const d=OH(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=kH(m),S=new ZT;return Object.assign(S,y),S})}}}function Nd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function sC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(t){return this instanceof xe?(this.v=t,this):new xe(t)}function li(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(b){return function(C){return Promise.resolve(C).then(b,y)}}function c(b,C){i[b]&&(r[b]=function(x){return new Promise(function(A,M){a.push([b,x,A,M])>1||h(b,x)})},C&&(r[b]=C(r[b])))}function h(b,C){try{d(i[b](C))}catch(x){S(a[0][3],x)}}function d(b){b.value instanceof xe?Promise.resolve(b.value.v).then(m,y):S(a[0][2],b)}function m(b){h("next",b)}function y(b){h("throw",b)}function S(b,C){b(C),a.shift(),a.length&&h(a[0][0],a[0][1])}}function ui(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sC=="function"?sC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(c,h){u=t[a](u),r(c,h,u.done,u.value)})}}function r(a,u,c,h){Promise.resolve(h).then(function(d){a({value:d,done:c})},u)}}function JH(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:EM(n)}function EM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function jH(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function aC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!EM(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class KH{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new YH(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let YH=class{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),jH(a)}async sendMessage(e){var n;await this.sendPromise;const i=Ut(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,c;const h=await r,d=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,m=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let S=[];m!=null&&(S=(c=m.slice(y))!==null&&c!==void 0?c:[]);const b=d?[d]:[];this.recordHistory(i,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Ut(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?aC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return li(this,arguments,function*(){var r,a,u,c,h,d;const m=[];try{for(var y=!0,S=ui(e),b;b=yield xe(S.next()),r=b.done,!r;y=!0){c=b.value,y=!1;const C=c;if(JH(C)){const x=(d=(h=C.candidates)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.content;x!==void 0&&m.push(x)}yield yield xe(C)}}catch(C){a={error:C}}finally{try{!y&&!r&&(u=S.return)&&(yield xe(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(n,m)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...aC(i)):this.history.push(e),this.history.push(...r)}};class dh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dh.prototype)}}function XH(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function WH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function QH(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],gM(n)),e}function ZH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function eG(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],gM(n)),e}function tG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function nG(t){const e={},n=p(t,["config"]);return n!=null&&tG(n,e),e}function iG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}let oG=class extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ss(_o.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nG(e);return a=fe("files",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=iG(h),m=new l$;return Object.assign(m,d),m})}}async createInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XH(e);return a=fe("upload/v1beta/files",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=WH(h),m=new u$;return Object.assign(m,d),m})}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eG(e);return a=fe("files/{file}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=QH(e);return a=fe("files/{file}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=ZH(h),m=new c$;return Object.assign(m,d),m})}}};function nd(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function rG(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>bG(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function sG(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function aG(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lG(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function uG(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=p(t,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const C=p(t,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const x=p(t,["responseSchema"]);x!=null&&g(e,["responseSchema"],x);const A=p(t,["routingConfig"]);A!=null&&g(e,["routingConfig"],A);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],TM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const k=p(t,["thinkingConfig"]);k!=null&&g(e,["thinkingConfig"],k);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function cG(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function fG(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function dG(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],qy(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=p(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],rG(Ut(C)));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let U=Ia(x);Array.isArray(U)&&(U=U.map(O=>EG(Na(O)))),g(e,["setup","tools"],U)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],wG(A));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const k=p(t,["proactivity"]);if(e!==void 0&&k!=null&&g(e,["setup","proactivity"],k),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function hG(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],uG(i));const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],TM(qy(y)));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=p(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],Ut(C));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let O=Ia(x);Array.isArray(O)&&(O=O.map(q=>TG(Na(q)))),g(e,["setup","tools"],O)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],A);const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const k=p(t,["proactivity"]);e!==void 0&&k!=null&&g(e,["setup","proactivity"],k);const U=p(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&g(e,["setup","explicitVadSignal"],U),n}function pG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],ze(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],dG(r,n)),n}function mG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],ze(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],hG(r,n)),n}function gG(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function vG(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["weightedPrompts"],i)}return e}function yG(t){const e={},n=p(t,["media"]);if(n!=null){let d=fM(n);Array.isArray(d)&&(d=d.map(m=>nd(m))),g(e,["mediaChunks"],d)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],nd(hM(i)));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],nd(dM(a)));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function _G(t){const e={},n=p(t,["media"]);if(n!=null){let d=fM(n);Array.isArray(d)&&(d=d.map(m=>m)),g(e,["mediaChunks"],d)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],hM(i));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],dM(a));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function SG(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const r=p(t,["toolCall"]);r!=null&&g(e,["toolCall"],r);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=p(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],CG(u));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const h=p(t,["sessionResumptionUpdate"]);h!=null&&g(e,["sessionResumptionUpdate"],h);const d=p(t,["voiceActivityDetectionSignal"]);return d!=null&&g(e,["voiceActivityDetectionSignal"],d),e}function bG(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],sG(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],aG(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],nd(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function wG(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function TM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const i=p(t,["languageCode"]);if(i!=null&&g(e,["languageCode"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function EG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],cG(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],fG(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function TG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>lG(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function CG(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const r=p(t,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=p(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const h=p(t,["promptTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(C=>C)),g(e,["promptTokensDetails"],b)}const d=p(t,["cacheTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>C)),g(e,["cacheTokensDetails"],b)}const m=p(t,["candidatesTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(C=>C)),g(e,["responseTokensDetails"],b)}const y=p(t,["toolUsePromptTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(C=>C)),g(e,["toolUsePromptTokensDetails"],b)}const S=p(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}function xG(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function AG(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],RG(i));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function RG(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function MG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let a=Vn(r);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function NG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["tokensInfo"],r)}return e}function IG(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],DG(i)),e}function DG(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function hh(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>HV(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function OG(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function PG(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kG(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],Ut(i));const r=p(t,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>MM(c))),g(e,["tools"],u)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],xV(a)),n}function LG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let u=Vn(r);Array.isArray(u)&&(u=u.map(c=>hh(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&PG(a),n}function UG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let u=Vn(r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&kG(a,n),n}function BG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const r=p(t,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function FG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function $G(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ze(t,i)),n}function HG(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ze(t,i)),n}function GG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function VG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function zG(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=p(t,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const C=p(t,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const x=p(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&g(e,["parameters","outputOptions","compressionQuality"],x);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["editMode"]);e!==void 0&&I!=null&&g(e,["parameters","editMode"],I);const N=p(t,["baseSteps"]);return e!==void 0&&N!=null&&g(e,["parameters","editConfig","baseSteps"],N),n}function qG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>jV(h))),g(n,["instances[0]","referenceImages"],c)}const u=p(e,["config"]);return u!=null&&zG(u,n),n}function JG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>ph(a))),g(e,["generatedImages"],r)}return e}function jG(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function KG(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=p(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function YG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let c=Gy(t,r);Array.isArray(c)&&(c=c.map(h=>h)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&jG(a,n);const u=p(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],ze(t,u)),n}function XG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let u=Gy(t,r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["instances[]","content"],u)}const a=p(e,["config"]);return a!=null&&KG(a,n),n}function WG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function QG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>IG(u))),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function ZG(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function eV(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function tV(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nV(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iV(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function oV(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],hh(Ut(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=p(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const C=p(e,["frequencyPenalty"]);C!=null&&g(i,["frequencyPenalty"],C);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Vy(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let ie=N;Array.isArray(ie)&&(ie=ie.map(ae=>KV(ae))),g(n,["safetySettings"],ie)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let ie=Ia(D);Array.isArray(ie)&&(ie=ie.map(ae=>tz(Na(ae)))),g(n,["tools"],ie)}const k=p(e,["toolConfig"]);if(n!==void 0&&k!=null&&g(n,["toolConfig"],ez(k)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],To(t,U));const O=p(e,["responseModalities"]);O!=null&&g(i,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const J=p(e,["speechConfig"]);if(J!=null&&g(i,["speechConfig"],zy(J)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=p(e,["thinkingConfig"]);Y!=null&&g(i,["thinkingConfig"],Y);const W=p(e,["imageConfig"]);W!=null&&g(i,["imageConfig"],IV(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(i,["enableEnhancedCivicAnswers"],re),i}function rV(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],Ut(r));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=p(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const C=p(e,["frequencyPenalty"]);C!=null&&g(i,["frequencyPenalty"],C);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Vy(M));const I=p(e,["responseJsonSchema"]);I!=null&&g(i,["responseJsonSchema"],I);const N=p(e,["routingConfig"]);N!=null&&g(i,["routingConfig"],N);const D=p(e,["modelSelectionConfig"]);D!=null&&g(i,["modelConfig"],D);const k=p(e,["safetySettings"]);if(n!==void 0&&k!=null){let F=k;Array.isArray(F)&&(F=F.map(Q=>Q)),g(n,["safetySettings"],F)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let F=Ia(U);Array.isArray(F)&&(F=F.map(Q=>MM(Na(Q)))),g(n,["tools"],F)}const O=p(e,["toolConfig"]);n!==void 0&&O!=null&&g(n,["toolConfig"],O);const q=p(e,["labels"]);n!==void 0&&q!=null&&g(n,["labels"],q);const J=p(e,["cachedContent"]);n!==void 0&&J!=null&&g(n,["cachedContent"],To(t,J));const Y=p(e,["responseModalities"]);Y!=null&&g(i,["responseModalities"],Y);const W=p(e,["mediaResolution"]);W!=null&&g(i,["mediaResolution"],W);const re=p(e,["speechConfig"]);re!=null&&g(i,["speechConfig"],RM(zy(re)));const ie=p(e,["audioTimestamp"]);ie!=null&&g(i,["audioTimestamp"],ie);const ae=p(e,["thinkingConfig"]);ae!=null&&g(i,["thinkingConfig"],ae);const de=p(e,["imageConfig"]);if(de!=null&&g(i,["imageConfig"],DV(de)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function lC(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let u=Vn(r);Array.isArray(u)&&(u=u.map(c=>hh(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],oV(t,a,n)),n}function uC(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["contents"]);if(r!=null){let u=Vn(r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],rV(t,a,n)),n}function cC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>AG(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function fC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>m)),g(e,["candidates"],d)}const r=p(t,["createTime"]);r!=null&&g(e,["createTime"],r);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=p(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const h=p(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function sV(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const h=p(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&g(e,["parameters","includeSafetyAttributes"],h);const d=p(t,["includeRaiReason"]);e!==void 0&&d!=null&&g(e,["parameters","includeRaiReason"],d);const m=p(t,["language"]);e!==void 0&&m!=null&&g(e,["parameters","language"],m);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const S=p(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=p(t,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function aV(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=p(t,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const C=p(t,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const x=p(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&g(e,["parameters","outputOptions","compressionQuality"],x);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I);const N=p(t,["enhancePrompt"]);return e!==void 0&&N!=null&&g(e,["parameters","enhancePrompt"],N),n}function lV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&sV(a,n),n}function uV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&aV(a,n),n}function cV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>wV(u))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],xM(r)),e}function fV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ph(u))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],AM(r)),e}function dV(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(t,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=p(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=p(t,["negativePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","negativePrompt"],h);const d=p(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&g(e,["parameters","enhancePrompt"],d),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=p(t,["lastFrame"]);e!==void 0&&m!=null&&g(e,["instances[0]","lastFrame"],mh(m));const y=p(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(b=>pz(b))),g(e,["instances[0]","referenceImages"],S)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function hV(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=p(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const h=p(t,["aspectRatio"]);e!==void 0&&h!=null&&g(e,["parameters","aspectRatio"],h);const d=p(t,["resolution"]);e!==void 0&&d!=null&&g(e,["parameters","resolution"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["pubsubTopic"]);e!==void 0&&y!=null&&g(e,["parameters","pubsubTopic"],y);const S=p(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const b=p(t,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const C=p(t,["generateAudio"]);e!==void 0&&C!=null&&g(e,["parameters","generateAudio"],C);const x=p(t,["lastFrame"]);e!==void 0&&x!=null&&g(e,["instances[0]","lastFrame"],mi(x));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let N=A;Array.isArray(N)&&(N=N.map(D=>mz(D))),g(e,["instances[0]","referenceImages"],N)}const M=p(t,["mask"]);e!==void 0&&M!=null&&g(e,["instances[0]","mask"],hz(M));const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&g(e,["parameters","compressionQuality"],I),n}function pV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],yV(u)),e}function mV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],_V(u)),e}function gV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],mh(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],NM(u));const c=p(e,["source"]);c!=null&&SV(c,n);const h=p(e,["config"]);return h!=null&&dV(h,n),n}function vV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],mi(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],IM(u));const c=p(e,["source"]);c!=null&&bV(c,n);const h=p(e,["config"]);return h!=null&&hV(h,n),n}function yV(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>TV(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function _V(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>CV(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function SV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],mh(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],NM(a)),n}function bV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],mi(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],IM(a)),n}function wV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],OV(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(t,["_self"]);return r!=null&&g(e,["safetyAttributes"],xM(r)),e}function ph(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],CM(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(t,["_self"]);r!=null&&g(e,["safetyAttributes"],AM(r));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function EV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],CM(n));const i=p(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["labels"],r)}return e}function TV(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],fz(n)),e}function CV(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],dz(n)),e}function xV(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=p(t,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const C=p(t,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const x=p(t,["responseSchema"]);x!=null&&g(e,["responseSchema"],x);const A=p(t,["routingConfig"]);A!=null&&g(e,["routingConfig"],A);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],RM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const k=p(t,["thinkingConfig"]);k!=null&&g(e,["thinkingConfig"],k);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function AV(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ze(t,i)),n}function RV(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ze(t,i)),n}function MV(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function NV(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function IV(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function DV(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&g(e,["imageSize"],i);const r=p(t,["outputMimeType"]);r!=null&&g(e,["imageOutputOptions","mimeType"],r);const a=p(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function OV(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],mr(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function CM(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],mr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function mh(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],mr(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mi(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],mr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function PV(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],vM(t,c)),i}function kV(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],vM(t,c)),i}function LV(t,e){const n={},i=p(e,["config"]);return i!=null&&PV(t,i,n),n}function UV(t,e){const n={},i=p(e,["config"]);return i!=null&&kV(t,i,n),n}function BV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let a=yM(r);Array.isArray(a)&&(a=a.map(u=>xv(u))),g(e,["models"],a)}return e}function FV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let a=yM(r);Array.isArray(a)&&(a=a.map(u=>Av(u))),g(e,["models"],a)}return e}function $V(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const r=p(t,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function xv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const u=p(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],nz(u));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const h=p(t,["outputTokenLimit"]);h!=null&&g(e,["outputTokenLimit"],h);const d=p(t,["supportedGenerationMethods"]);d!=null&&g(e,["supportedActions"],d);const m=p(t,["temperature"]);m!=null&&g(e,["temperature"],m);const y=p(t,["maxTemperature"]);y!=null&&g(e,["maxTemperature"],y);const S=p(t,["topP"]);S!=null&&g(e,["topP"],S);const b=p(t,["topK"]);b!=null&&g(e,["topK"],b);const C=p(t,["thinking"]);return C!=null&&g(e,["thinking"],C),e}function Av(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const u=p(t,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(S=>ZG(S))),g(e,["endpoints"],y)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const h=p(t,["_self"]);h!=null&&g(e,["tunedModelInfo"],iz(h));const d=p(t,["defaultCheckpointId"]);d!=null&&g(e,["defaultCheckpointId"],d);const m=p(t,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(S=>S)),g(e,["checkpoints"],y)}return e}function HV(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],eV(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],tV(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],xG(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function GV(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],mi(n)),e}function VV(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const d=p(t,["addWatermark"]);e!==void 0&&d!=null&&g(e,["parameters","addWatermark"],d);const m=p(t,["outputMimeType"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","mimeType"],m);const y=p(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","compressionQuality"],y);const S=p(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const b=p(t,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),n}function zV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["source"]);r!=null&&JV(r,n);const a=p(e,["config"]);return a!=null&&VV(a,n),n}function qV(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ph(r))),g(e,["generatedImages"],i)}return e}function JV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],mi(r));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>GV(c))),g(e,["instances[0]","productImages"],u)}return n}function jV(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],mi(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const r=p(t,["referenceType"]);r!=null&&g(e,["referenceType"],r);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],$V(a));const u=p(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],OG(u));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const h=p(t,["subjectImageConfig"]);return h!=null&&g(e,["subjectImageConfig"],h),e}function xM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function AM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function KV(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function YV(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],mi(n)),e}function XV(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const r=p(t,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=p(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const h=p(t,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),n}function WV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["source"]);r!=null&&ZV(r,n);const a=p(e,["config"]);return a!=null&&XV(a,n),n}function QV(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>EV(r))),g(e,["generatedMasks"],i)}return e}function ZV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],mi(r));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],YV(a)),n}function RM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const i=p(t,["languageCode"]);if(i!=null&&g(e,["languageCode"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ez(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],nV(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function tz(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],MV(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],NV(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function MM(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>iV(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function nz(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function iz(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function oz(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function rz(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function sz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],ze(t,i));const r=p(e,["config"]);return r!=null&&oz(r,n),n}function az(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["config"]);return r!=null&&rz(r,n),n}function lz(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=p(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const h=p(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","compressionQuality"],h);const d=p(t,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=p(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const b=p(t,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),n}function uz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ze(t,i));const r=p(e,["image"]);r!=null&&g(n,["instances[0]","image"],mi(r));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=p(e,["config"]);return u!=null&&lz(u,n),n}function cz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>ph(a))),g(e,["generatedImages"],r)}return e}function fz(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],mr(i));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function dz(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],mr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function hz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],mi(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function pz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],mh(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function mz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],mi(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function NM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],mr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function IM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],mr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function gz(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function vz(t){const e={},n=p(t,["config"]);return n!=null&&gz(n,e),e}function yz(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function _z(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&yz(i,e),e}function Sz(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function bz(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const r=p(t,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),n}function wz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],Tz(u)),e}function Ez(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const r=p(t,["config"]);return r!=null&&bz(r,e),e}function Tz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function Cz(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function xz(t){const e={},n=p(t,["config"]);return n!=null&&Cz(n,e),e}function Az(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function DM(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),g(e,["customMetadata"],c)}const u=p(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function Rz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&DM(i,e),e}function Mz(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}const Nz="Content-Type",Iz="X-Server-Timeout",Dz="User-Agent",Rv="x-goog-api-client",Oz="1.33.0",Pz=`google-genai-sdk/${Oz}`,kz="v1beta1",Lz="v1beta";class Uz{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:kz,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Lz,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,c]of Object.entries(e.queryParams))r.searchParams.append(u,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const a=new AbortController,u=a.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&Bz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await dC(r),new Ev(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await dC(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return li(this,arguments,function*(){var i;const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield xe(r.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=a.decode(m,{stream:!0});try{const C=JSON.parse(y);if("error"in C){const x=JSON.parse(JSON.stringify(C.error)),A=x.status,M=x.code,I=`got status: ${A}. ${JSON.stringify(C)}`;if(M>=400&&M<600)throw new dh({message:I,status:M})}}catch(C){if(C.name==="ApiError")throw C}u+=y;let S=-1,b=0;for(;;){S=-1,b=0;for(const A of h){const M=u.indexOf(A);M!==-1&&(S===-1||M<S)&&(S=M,b=A.length)}if(S===-1)break;const C=u.substring(0,S);u=u.substring(S+b);const x=C.trim();if(x.startsWith(c)){const A=x.substring(c.length).trim();try{const M=new Response(A,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield xe(new Ev(M))}catch(M){throw new Error(`exception parsing stream chunk ${A}. ${M}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Pz+" "+this.clientOptions.userAgentExtra;return e[Dz]=n,e[Rv]=n,e[Nz]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(Iz,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const c=(i=n?.mimeType)!==null&&i!==void 0?i:u.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const h={file:r},d=this.getFileName(e),m=fe("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,d,h,n?.httpOptions);return a.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const a=this.clientOptions.uploader,u=await a.stat(n),c=String(u.size),h=(r=i?.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),y={};i!=null&&DM(i,y);const S=await this.fetchUploadUrl(d,c,h,m,y,i?.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,a,u){var c;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function dC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new dh({message:r,status:n}):new Error(r)}}function Bz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const c=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const d=u[h],m=c[h];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[h]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[h]=d)}return c}const r=i(n,e);t.body=JSON.stringify(r)}const Fz="mcp_used/unknown";let $z=!1;function OM(t){for(const e of t)if(Hz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $z}function PM(t){var e;const n=(e=t[Rv])!==null&&e!==void 0?e:"";t[Rv]=(n+` ${Fz}`).trimStart()}function Hz(t){return t!==null&&typeof t=="object"&&t instanceof Jy}function Gz(t){return li(this,arguments,function*(n,i=100){let r,a=0;for(;a<i;){const u=yield xe(n.listTools({cursor:r}));for(const c of u.tools)yield yield xe(c),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class Jy{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Jy(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const m of this.mcpClients)try{for(var c=!0,h=(n=void 0,ui(Gz(m))),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const y=r;u.push(y);const S=y.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=m}}catch(y){n={error:y}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),S$(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}async function Vz(t,e,n){const i=new d$;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class zz{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=jz(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(N=>{d=N}),y=e.callbacks,S=function(){d({})},b=this.apiClient,C={onopen:S,onmessage:N=>{Vz(b,y.onmessage,N)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=y?.onclose)!==null&&i!==void 0?i:function(N){}},x=this.webSocketFactory.create(h,Jz(u),C);x.connect(),await m;const I={setup:{model:ze(this.apiClient,e.model)}};return x.send(JSON.stringify(I)),new qz(x,this.apiClient)}}class qz{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=vG(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=gG(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ua.PLAY)}pause(){this.sendPlaybackControl(ua.PAUSE)}stop(){this.sendPlaybackControl(ua.STOP)}resetContext(){this.sendPlaybackControl(ua.RESET_CONTEXT)}close(){this.conn.close()}}function Jz(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function jz(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const Kz="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Yz(t,e,n){const i=new f$;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=SG(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class Xz{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new zz(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,u,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&OM(e.config.tools)&&PM(y);const S=eq(y);if(this.apiClient.isVertexAI())m=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,m);else{const J=this.apiClient.getApiKey();let Y="BidiGenerateContent",W="key";J?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Y="BidiGenerateContentConstrained",W="access_token"),m=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${Y}?${W}=${J}`}let b=()=>{};const C=new Promise(J=>{b=J}),x=e.callbacks,A=function(){var J;(J=x?.onopen)===null||J===void 0||J.call(x),b({})},M=this.apiClient,I={onopen:A,onmessage:J=>{Yz(M,x.onmessage,J)},onerror:(n=x?.onerror)!==null&&n!==void 0?n:function(J){},onclose:(i=x?.onclose)!==null&&i!==void 0?i:function(J){}},N=this.webSocketFactory.create(m,Zz(S),I);N.connect(),await C;let D=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const J=this.apiClient.getProject(),Y=this.apiClient.getLocation();D=`projects/${J}/locations/${Y}/`+D}let k={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ad.AUDIO]}:e.config.responseModalities=[Ad.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(c=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[],O=[];for(const J of U)if(this.isCallableTool(J)){const Y=J;O.push(await Y.tool())}else O.push(J);O.length>0&&(e.config.tools=O);const q={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=mG(this.apiClient,q):k=pG(this.apiClient,q),delete k.config,N.send(JSON.stringify(k)),new Qz(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Wz={turnComplete:!0};class Qz{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Vn(n.turns),e.isVertexAI()||(i=i.map(r=>hh(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Kz)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Wz),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:_G(e)}:n={realtimeInput:yG(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Zz(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function eq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const hC=10;function pC(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t?.tools)!==null&&n!==void 0?n:[])if(ha(u)){r=!0;break}if(!r)return!0;const a=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ha(t){return"callTool"in t&&typeof t.callTool=="function"}function tq(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ha(r)))!==null&&i!==void 0?i:!1}function mC(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ha(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function gC(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}let nq=class extends Eo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,u,c;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!tq(n)||pC(n.config))return await this.generateContentInternal(h);const d=mC(n);if(d.length>0){const x=d.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let m,y;const S=Vn(h.contents),b=(a=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:hC;let C=0;for(;C<b&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const x=m.candidates[0].content,A=[];for(const M of(c=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[])if(ha(M)){const N=await M.callTool(m.functionCalls);A.push(...N)}C++,y={role:"user",parts:A},h.contents=Vn(h.contents),h.contents.push(x),h.contents.push(y),gC(h.config)&&(S.push(x),S.push(y))}return gC(h.config)&&(m.automaticFunctionCallingHistory=S),m},this.generateContentStream=async n=>{var i,r,a,u,c;if(this.maybeMoveToResponseJsonSchem(n),pC(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const h=mC(n);if(h.length>0){const y=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(r=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,m=(c=(u=n?.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const u=[];if(i?.generatedImages)for(const h of i.generatedImages)h&&h?.safetyAttributes&&((r=h?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h?.safetyAttributes:u.push(h);let c;return a?c={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ss(_o.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,a,u,c,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(c=n.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>ha(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(c.config.tools=u,e.config&&e.config.tools&&OM(e.config.tools)){const h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),PM(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ha(u)){const c=u,h=await c.tool();for(const d of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:hC;let u=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(d,m,y){return li(this,arguments,function*(){for(var S,b,C,x,A,M;c<a;){u&&(c++,u=!1);const k=yield xe(d.processParamsMaybeAddMcpUsage(y)),U=yield xe(d.generateContentStreamInternal(k)),O=[],q=[];try{for(var I=!0,N=(b=void 0,ui(U)),D;D=yield xe(N.next()),S=D.done,!S;I=!0){x=D.value,I=!1;const J=x;if(yield yield xe(J),J.candidates&&(!((A=J.candidates[0])===null||A===void 0)&&A.content)){q.push(J.candidates[0].content);for(const Y of(M=J.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(c<a&&Y.functionCall){if(!Y.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(Y.functionCall.name)){const W=yield xe(m.get(Y.functionCall.name).callTool([Y.functionCall]));O.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${Y.functionCall.name}`)}}}}catch(J){b={error:J}}finally{try{!I&&!S&&(C=N.return)&&(yield xe(C.call(N)))}finally{if(b)throw b.error}}if(O.length>0){u=!0;const J=new Bl;J.candidates=[{content:{role:"user",parts:O}}],yield yield xe(J);const Y=[];Y.push(...q),Y.push({role:"user",parts:O});const W=Vn(y.contents).concat(Y);y.contents=W}else break}})})(this,h,e)}async generateContentInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=uC(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=fC(m),S=new Bl;return Object.assign(S,y),S})}else{const d=lC(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=cC(m),S=new Bl;return Object.assign(S,y),S})}}async generateContentStreamInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=uC(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(y){return li(this,arguments,function*(){var S,b,C,x;try{for(var A=!0,M=ui(y),I;I=yield xe(M.next()),S=I.done,!S;A=!0){x=I.value,A=!1;const N=x,D=fC(yield xe(N.json()));D.sdkHttpResponse={headers:N.headers};const k=new Bl;Object.assign(k,D),yield yield xe(k)}}catch(N){b={error:N}}finally{try{!A&&!S&&(C=M.return)&&(yield xe(C.call(M)))}finally{if(b)throw b.error}}})})}else{const d=lC(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(y){return li(this,arguments,function*(){var S,b,C,x;try{for(var A=!0,M=ui(y),I;I=yield xe(M.next()),S=I.done,!S;A=!0){x=I.value,A=!1;const N=x,D=cC(yield xe(N.json()));D.sdkHttpResponse={headers:N.headers};const k=new Bl;Object.assign(k,D),yield yield xe(k)}}catch(N){b={error:N}}finally{try{!A&&!S&&(C=M.return)&&(yield xe(C.call(M)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=XG(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=QG(m),S=new qT;return Object.assign(S,y),S})}else{const d=YG(this.apiClient,e);return c=fe("{model}:batchEmbedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=WG(m),S=new qT;return Object.assign(S,y),S})}}async generateImagesInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=uV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=fV(m),S=new JT;return Object.assign(S,y),S})}else{const d=lV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=cV(m),S=new JT;return Object.assign(S,y),S})}}async editImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=qG(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=JG(h),m=new e$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=uz(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=cz(h),m=new t$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=zV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=qV(h),m=new n$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=WV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=QV(h),m=new i$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=RV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Av(m))}else{const d=AV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>xv(m))}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=UV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=FV(m),S=new jT;return Object.assign(S,y),S})}else{const d=LV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=BV(m),S=new jT;return Object.assign(S,y),S})}}async update(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=az(this.apiClient,e);return c=fe("{model}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>Av(m))}else{const d=sz(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>xv(m))}}async delete(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=HG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=VG(m),S=new KT;return Object.assign(S,y),S})}else{const d=$G(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=GG(m),S=new KT;return Object.assign(S,y),S})}}async countTokens(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=UG(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=FG(m),S=new YT;return Object.assign(S,y),S})}else{const d=LG(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=BG(m),S=new YT;return Object.assign(S,y),S})}}async computeTokens(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=MG(this.apiClient,e);return a=fe("{model}:computeTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=NG(h),m=new o$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=vV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u.then(m=>{const y=mV(m),S=new Rd;return Object.assign(S,y),S})}else{const d=gV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>{const y=pV(m),S=new Rd;return Object.assign(S,y),S})}}};class iq extends Eo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=KF(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),u}else{const d=jF(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=$F(e);return a=fe("{resourceName}:fetchPredictOperation",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function oq(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function rq(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>pq(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function sq(t,e,n){const i={},r=p(e,["expireTime"]);n!==void 0&&r!=null&&g(n,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=p(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],hq(t,c));const h=p(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&g(n,["fieldMask"],h),i}function aq(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],sq(t,i,n)),n}function lq(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function uq(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cq(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function fq(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function dq(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],qy(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=p(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],rq(Ut(C)));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let U=Ia(x);Array.isArray(U)&&(U=U.map(O=>gq(Na(O)))),g(e,["setup","tools"],U)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],mq(A));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const k=p(t,["proactivity"]);if(e!==void 0&&k!=null&&g(e,["setup","proactivity"],k),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function hq(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],ze(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],dq(r,n)),n}function pq(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],lq(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],uq(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],oq(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function mq(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gq(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],cq(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],fq(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function vq(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function yq(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=vq(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(d=>u.includes(d)?`generationConfig.${d}`:d));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class _q extends Eo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=aq(this.apiClient,e);a=fe("auth_tokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query;const h=yq(c,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function Sq(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function bq(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&Sq(i,e),e}function wq(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function Eq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function Tq(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&Eq(i,e),e}function Cq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}class xq extends Eo{constructor(e){super(),this.apiClient=e,this.list=async n=>new ss(_o.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=wq(e);return a=fe("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bq(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Tq(e);return a=fe("{parent}/documents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Cq(h),m=new r$;return Object.assign(m,d),m})}}}class Aq extends Eo{constructor(e,n=new xq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ss(_o.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vz(e);return a=fe("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Sz(e);return a=fe("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_z(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xz(e);return a=fe("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Az(h),m=new s$;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Rz(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Mz(h),m=new a$;return Object.assign(m,d),m})}}async importFile(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ez(e);return a=fe("{file_search_store_name}:importFile",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=wz(h),m=new $y;return Object.assign(m,d),m})}}}let kM=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return kM=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Rq=()=>kM();function Mv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Nv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Kn extends Error{}let Yn=class Iv extends Kn{constructor(e,n,i,r){super(`${Iv.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new gh({message:i,cause:Nv(n)});const a=n;return e===400?new UM(e,a,i,r):e===401?new BM(e,a,i,r):e===403?new FM(e,a,i,r):e===404?new $M(e,a,i,r):e===409?new HM(e,a,i,r):e===422?new GM(e,a,i,r):e===429?new VM(e,a,i,r):e>=500?new zM(e,a,i,r):new Iv(e,a,i,r)}},Dv=class extends Yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},gh=class extends Yn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},LM=class extends gh{constructor({message:e}={}){super({message:e??"Request timed out."})}},UM=class extends Yn{},BM=class extends Yn{},FM=class extends Yn{},$M=class extends Yn{},HM=class extends Yn{},GM=class extends Yn{},VM=class extends Yn{},zM=class extends Yn{};const Mq=/^[a-z][a-z0-9+.-]*:/i,Nq=t=>Mq.test(t);let Ov=t=>(Ov=Array.isArray,Ov(t));const Iq=Ov;let Dq=Iq;const vC=Dq;function Oq(t){if(!t)return!0;for(const e in t)return!1;return!0}function Pq(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const kq=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Kn(`${t} must be an integer`);if(e<0)throw new Kn(`${t} must be a positive integer`);return e},Lq=t=>{try{return JSON.parse(t)}catch{return}};const Uq=t=>new Promise(e=>setTimeout(e,t));const ia="0.0.1";function Bq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Fq=()=>{var t,e,n,i,r;const a=Bq();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ia,"X-Stainless-OS":_C(Deno.build.os),"X-Stainless-Arch":yC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ia,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ia,"X-Stainless-OS":_C((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":yC((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=$q();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ia,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ia,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $q(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const yC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",_C=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Rf;const Hq=()=>Rf??(Rf=Fq());function Gq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function qM(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Vq(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return qM({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function JM(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function zq(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}const qq=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const jM=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ag(t,e,n){return jM(),new File(t,e??"unknown_file",n)}function Jq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const jq=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const KM=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Kq=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&KM(t),Yq=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Xq(t,e,n){if(jM(),t=await t,Kq(t))return t instanceof File?t:Ag([await t.arrayBuffer()],t.name);if(Yq(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ag(await Pv(r),e,n)}const i=await Pv(t);if(e||(e=Jq(t)),!n?.type){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Ag(i,e,n)}async function Pv(t){var e,n,i,r,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(KM(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(jq(t))try{for(var c=!0,h=ui(t),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const m=r;u.push(...await Pv(m))}}catch(m){n={error:m}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}else{const m=(a=t?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${Wq(t)}`)}return u}function Wq(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let YM=class{constructor(e){this._client=e}};YM._key=[];function XM(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const SC=Object.freeze(Object.create(null)),Qq=(t=XM)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((m,y,S)=>{var b,C,x;/[?#]/.test(y)&&(r=!0);const A=i[S];let M=(r?encodeURIComponent:t)(""+A);return S!==i.length&&(A==null||typeof A=="object"&&A.toString===((x=Object.getPrototypeOf((C=Object.getPrototypeOf((b=A.hasOwnProperty)!==null&&b!==void 0?b:SC))!==null&&C!==void 0?C:SC))===null||x===void 0?void 0:x.toString))&&(M=A+"",a.push({start:m.length+y.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),m+y+(S===i.length?"":M)},""),c=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,b)=>{const C=" ".repeat(b.start-m),x="^".repeat(b.length);return m=b.start+b.length,S+C+x},"");throw new Kn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${y}`)}return u}),Mf=Qq(XM);class WM extends YM{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,a=Nd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Kn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Kn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Mf`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Mf`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Mf`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const a=n??{},{api_version:u=this._client.apiVersion}=a,c=Nd(a,["api_version"]);return this._client.get(Mf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}}WM._key=Object.freeze(["interactions"]);class QM extends WM{}function Zq(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Nf;function jy(t){let e;return(Nf??(e=new globalThis.TextEncoder,Nf=e.encode.bind(e)))(t)}let If;function bC(t){let e;return(If??(e=new globalThis.TextDecoder,If=e.decode.bind(e)))(t)}let vh=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?jy(e):e;this.buffer=Zq([this.buffer,n]);const i=[];let r;for(;(r=e3(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(bC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=bC(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};vh.NEWLINE_CHARS=new Set([`
`,"\r"]);vh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function e3(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function t3(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Id={off:0,error:200,warn:300,info:400,debug:500},wC=(t,e,n)=>{if(t){if(Pq(Id,t))return t;Ht(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Id))}`)}};function Hl(){}function Df(t,e,n){return!e||Id[t]>Id[n]?Hl:e[t].bind(e)}const n3={error:Hl,warn:Hl,info:Hl,debug:Hl};let EC=new WeakMap;function Ht(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return n3;const r=EC.get(n);if(r&&r[0]===i)return r[1];const a={error:Df("error",n,i),warn:Df("warn",n,i),info:Df("info",n,i),debug:Df("debug",n,i)};return EC.set(n,[i,a]),a}const Br=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);let i3=class Gl{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const a=i?Ht(i):console;function u(){return li(this,arguments,function*(){var h,d,m,y;if(r)throw new Kn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var b=!0,C=ui(o3(e,n)),x;x=yield xe(C.next()),h=x.done,!h;b=!0){y=x.value,b=!1;const A=y;if(!S)if(A.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield xe(JSON.parse(A.data))}catch(M){throw a.error("Could not parse message into JSON:",A.data),a.error("From chunk:",A.raw),M}}}catch(A){d={error:A}}finally{try{!b&&!h&&(m=C.return)&&(yield xe(m.call(C)))}finally{if(d)throw d.error}}S=!0}catch(A){if(Mv(A))return yield xe(void 0);throw A}finally{S||n.abort()}})}return new Gl(u,n,i)}static fromReadableStream(e,n,i){let r=!1;function a(){return li(this,arguments,function*(){var h,d,m,y;const S=new vh,b=JM(e);try{for(var C=!0,x=ui(b),A;A=yield xe(x.next()),h=A.done,!h;C=!0){y=A.value,C=!1;const M=y;for(const I of S.decode(M))yield yield xe(I)}}catch(M){d={error:M}}finally{try{!C&&!h&&(m=x.return)&&(yield xe(m.call(x)))}finally{if(d)throw d.error}}for(const M of S.flush())yield yield xe(M)})}function u(){return li(this,arguments,function*(){var h,d,m,y;if(r)throw new Kn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var b=!0,C=ui(a()),x;x=yield xe(C.next()),h=x.done,!h;b=!0){y=x.value,b=!1;const A=y;S||A&&(yield yield xe(JSON.parse(A)))}}catch(A){d={error:A}}finally{try{!b&&!h&&(m=C.return)&&(yield xe(m.call(C)))}finally{if(d)throw d.error}}S=!0}catch(A){if(Mv(A))return yield xe(void 0);throw A}finally{S||n.abort()}})}return new Gl(u,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new Gl(()=>r(e),this.controller,this.client),new Gl(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return qM({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const u=jy(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function o3(t,e){return li(this,arguments,function*(){var i,r,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Kn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Kn("Attempted to iterate over a response with no body");const c=new s3,h=new vh,d=JM(t.body);try{for(var m=!0,y=ui(r3(d)),S;S=yield xe(y.next()),i=S.done,!i;m=!0){u=S.value,m=!1;const b=u;for(const C of h.decode(b)){const x=c.decode(C);x&&(yield yield xe(x))}}}catch(b){r={error:b}}finally{try{!m&&!i&&(a=y.return)&&(yield xe(a.call(y)))}finally{if(r)throw r.error}}for(const b of h.flush()){const C=c.decode(b);C&&(yield yield xe(C))}})}function r3(t){return li(this,arguments,function*(){var n,i,r,a;let u=new Uint8Array;try{for(var c=!0,h=ui(t),d;d=yield xe(h.next()),n=d.done,!n;c=!0){a=d.value,c=!1;const m=a;if(m==null)continue;const y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?jy(m):m;let S=new Uint8Array(u.length+y.length);S.set(u),S.set(y,u.length),u=S;let b;for(;(b=t3(u))!==-1;)yield yield xe(u.slice(0,b)),u=u.slice(b)}}catch(m){i={error:m}}finally{try{!c&&!n&&(r=h.return)&&(yield xe(r.call(h)))}finally{if(i)throw i.error}}u.length>0&&(yield yield xe(u))})}let s3=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=a3(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function a3(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function l3(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var c;if(e.options.stream)return Ht(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):i3.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),d=(c=h?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Ht(t).debug(`[${i}] response parsed`,Br({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}let u3=class ZM extends Promise{constructor(e,n,i=l3){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new ZM(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};const eN=Symbol("brand.privateNullableHeaders");function*c3(t){if(!t)return;if(eN in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():vC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=vC(i[1])?i[1]:[i[1]];let u=!1;for(const c of a)c!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,c])}}const Rg=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,u]of c3(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),u===null?(e.delete(a),n.add(c)):(e.append(a,u),n.delete(c))}}return{[eN]:!0,values:e,nulls:n}};const Mg=t=>{var e,n,i,r,a,u;if(typeof globalThis.process<"u")return(i=(n=(e=PF)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||u===void 0?void 0:u.trim()};var tN;class yh{constructor(e){var n,i,r,a,u,c,h,d=e===void 0?{}:e,{baseURL:m=Mg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Mg("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:S="v1beta"}=d,b=Nd(d,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:y,apiVersion:S},b),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:yh.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(u=(a=wC(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:wC(Mg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:x,this.fetchOptions=C.fetchOptions,this.maxRetries=(c=C.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=C.fetch)!==null&&h!==void 0?h:Gq(),this.encoder=qq,this._options=C,this.apiKey=y,this.apiVersion=S}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return Rg([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Kn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ia}`}defaultIdempotencyKey(){return`stainless-node-retry-${Rq()}`}makeStatusError(e,n,i,r){return Yn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=Nq(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return Oq(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new u3(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,a,u;const c=await e,h=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=h),await this.prepareOptions(c);const{req:d,url:m,timeout:y}=await this.buildRequest(c,{retryCount:h-n});await this.prepareRequest(d,{url:m,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=i===void 0?"":`, retryOf: ${i}`,C=Date.now();if(Ht(this).debug(`[${S}] sending request`,Br({retryOfRequestLogID:i,method:c.method,url:m,options:c,headers:d.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new Dv;const x=new AbortController,A=await this.fetchWithTimeout(m,d,y,x).catch(Nv),M=Date.now();if(A instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((u=c.signal)===null||u===void 0)&&u.aborted)throw new Dv;const D=Mv(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(n)return Ht(this).info(`[${S}] connection ${D?"timed out":"failed"} - ${N}`),Ht(this).debug(`[${S}] connection ${D?"timed out":"failed"} (${N})`,Br({retryOfRequestLogID:i,url:m,durationMs:M-C,message:A.message})),this.retryRequest(c,n,i??S);throw Ht(this).info(`[${S}] connection ${D?"timed out":"failed"} - error; no more retries left`),Ht(this).debug(`[${S}] connection ${D?"timed out":"failed"} (error; no more retries left)`,Br({retryOfRequestLogID:i,url:m,durationMs:M-C,message:A.message})),D?new LM:new gh({cause:A})}const I=`[${S}${b}] ${d.method} ${m} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${M-C}ms`;if(!A.ok){const N=await this.shouldRetry(A);if(n&&N){const J=`retrying, ${n} attempts remaining`;return await zq(A.body),Ht(this).info(`${I} - ${J}`),Ht(this).debug(`[${S}] response error (${J})`,Br({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,durationMs:M-C})),this.retryRequest(c,n,i??S,A.headers)}const D=N?"error; no more retries left":"error; not retryable";Ht(this).info(`${I} - ${D}`);const k=await A.text().catch(J=>Nv(J).message),U=Lq(k),O=U?void 0:k;throw Ht(this).debug(`[${S}] response error (${D})`,Br({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,message:O,durationMs:Date.now()-C})),this.makeStatusError(A.status,U,O,A.headers)}return Ht(this).info(I),Ht(this).debug(`[${S}] response start`,Br({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,durationMs:M-C})),{response:A,options:c,controller:x,requestLogID:S,retryOfRequestLogID:i,startTime:C}}async fetchWithTimeout(e,n,i,r){const a=n||{},{signal:u,method:c}=a,h=Nd(a,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),i),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},m?{duplex:"half"}:{}),{method:"GET"}),h);c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var a;let u;const c=r?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(u=d)}const h=r?.get("retry-after");if(h&&!u){const d=parseFloat(h);Number.isNaN(d)?u=Date.parse(h)-Date.now():u=d*1e3}if(!(u&&0<=u&&u<60*1e3)){const d=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Uq(u),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,a;const u=Object.assign({},e),{method:c,path:h,query:d,defaultBaseURL:m}=u,y=this.buildURL(h,d,m);"timeout"in u&&kq("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:b}=this.buildBody({options:u}),C=await this.buildHeaders({options:e,method:c,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:C},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:y,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=Rg([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Hq()),await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Rg([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Vq(e)}:this.encoder({body:e,headers:i})}}yh.DEFAULT_TIMEOUT=6e4;class Ct extends yh{constructor(){super(...arguments),this.interactions=new QM(this)}}tN=Ct;Ct.GeminiNextGenAPIClient=tN;Ct.GeminiNextGenAPIClientError=Kn;Ct.APIError=Yn;Ct.APIConnectionError=gh;Ct.APIConnectionTimeoutError=LM;Ct.APIUserAbortError=Dv;Ct.NotFoundError=$M;Ct.ConflictError=HM;Ct.RateLimitError=VM;Ct.BadRequestError=UM;Ct.AuthenticationError=BM;Ct.InternalServerError=zM;Ct.PermissionDeniedError=FM;Ct.UnprocessableEntityError=GM;Ct.toFile=Xq;Ct.Interactions=QM;function f3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function d3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function h3(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function p3(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function m3(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=p(t,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const h=p(t,["learningRate"]);if(e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","learningRate"],h),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function g3(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=p(t,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],TC(b))}else if(r==="PREFERENCE_TUNING"){const b=p(t,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],TC(b))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=p(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=p(t,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=p(t,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const b=p(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(h==="PREFERENCE_TUNING"){const b=p(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=p(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(d==="PREFERENCE_TUNING"){const b=p(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let m=p(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=p(t,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(m==="PREFERENCE_TUNING"){const b=p(t,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function v3(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&R3(a);const u=p(t,["config"]);return u!=null&&m3(u,n),n}function y3(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&M3(a,n,e);const u=p(t,["config"]);return u!=null&&g3(u,n,e),n}function _3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function S3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function b3(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function w3(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function E3(t,e){const n={},i=p(t,["config"]);return i!=null&&b3(i,n),n}function T3(t,e){const n={},i=p(t,["config"]);return i!=null&&w3(i,n),n}function C3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>nN(c))),g(n,["tuningJobs"],u)}return n}function x3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>kv(c))),g(n,["tuningJobs"],u)}return n}function A3(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const r=p(t,["name"]);return r!=null&&g(n,["endpoint"],r),n}function R3(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(n,["examples","examples"],r)}return n}function M3(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function nN(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],mM(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["tuningTask","completeTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["description"]);m!=null&&g(n,["description"],m);const y=p(t,["baseModel"]);y!=null&&g(n,["baseModel"],y);const S=p(t,["_self"]);return S!=null&&g(n,["tunedModel"],A3(S)),n}function kv(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],mM(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["error"]);m!=null&&g(n,["error"],m);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const S=p(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const b=p(t,["tunedModel"]);b!=null&&g(n,["tunedModel"],b);const C=p(t,["preTunedModel"]);C!=null&&g(n,["preTunedModel"],C);const x=p(t,["supervisedTuningSpec"]);x!=null&&g(n,["supervisedTuningSpec"],x);const A=p(t,["preferenceOptimizationSpec"]);A!=null&&g(n,["preferenceOptimizationSpec"],A);const M=p(t,["tuningDataStats"]);M!=null&&g(n,["tuningDataStats"],M);const I=p(t,["encryptionSpec"]);I!=null&&g(n,["encryptionSpec"],I);const N=p(t,["partnerModelTuningSpec"]);N!=null&&g(n,["partnerModelTuningSpec"],N);const D=p(t,["customBaseModel"]);D!=null&&g(n,["customBaseModel"],D);const k=p(t,["experiment"]);k!=null&&g(n,["experiment"],k);const U=p(t,["labels"]);U!=null&&g(n,["labels"],U);const O=p(t,["outputUri"]);O!=null&&g(n,["outputUri"],O);const q=p(t,["pipelineJob"]);q!=null&&g(n,["pipelineJob"],q);const J=p(t,["serviceAccount"]);J!=null&&g(n,["serviceAccount"],J);const Y=p(t,["tunedModelDisplayName"]);Y!=null&&g(n,["tunedModelDisplayName"],Y);const W=p(t,["veoTuningSpec"]);return W!=null&&g(n,["veoTuningSpec"],W),n}function N3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(t,["done"]);u!=null&&g(n,["done"],u);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function TC(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const r=p(t,["vertexDatasetResource"]);return r!=null&&g(n,["validationDatasetUri"],r),n}class I3 extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ss(_o.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:wv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=S3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>kv(m))}else{const d=_3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>nN(m))}}async listInternal(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=T3(e);return c=fe("tuningJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=x3(m),S=new XT;return Object.assign(S,y),S})}else{const d=E3(e);return c=fe("tunedModels",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=C3(m),S=new XT;return Object.assign(S,y),S})}}async cancel(e){var n,i,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=d3(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=p3(m),S=new WT;return Object.assign(S,y),S})}else{const d=f3(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=h3(m),S=new WT;return Object.assign(S,y),S})}}async tuneInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=y3(e,e);return a=fe("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>kv(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=v3(e);return a=fe("tunedModels",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>N3(h))}}}class D3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const O3=1024*1024*8,P3=3,k3=1e3,L3=2,Dd="x-goog-upload-status";async function U3(t,e,n){var i;const r=await iN(t,e,n),a=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Dd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function B3(t,e,n){var i;const r=await iN(t,e,n),a=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Dd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=uM(a),c=new Hy;return Object.assign(c,u),c}async function iN(t,e,n){var i,r;let a=0,u=0,c=new Ev(new Response),h="upload";for(a=t.size;u<a;){const d=Math.min(O3,a-u),m=t.slice(u,u+d);u+d>=a&&(h+=", finalize");let y=0,S=k3;for(;y<P3&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(d)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[Dd]));)y++,await $3(S),S=S*L3;if(u+=d,((r=c?.headers)===null||r===void 0?void 0:r[Dd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function F3(t){return{size:t.size,type:t.type}}function $3(t){return new Promise(e=>setTimeout(e,t))}class H3{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await U3(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await B3(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await F3(e)}}class G3{create(e,n,i){return new V3(e,n,i)}}class V3{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const CC="x-goog-api-key";class z3{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(CC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(CC,this.apiKey)}}}const q3="gl-node/";class J3{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ct({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=BF(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new z3(this.apiKey);this.apiClient=new Uz({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:q3+"web",uploader:new H3,downloader:new D3}),this.models=new nq(this.apiClient),this.live=new Xz(this.apiClient,r,new G3),this.batches=new hH(this.apiClient),this.chats=new KH(this.models,this.apiClient),this.caches=new qH(this.apiClient),this.files=new oG(this.apiClient),this.operations=new iq(this.apiClient),this.authTokens=new _q(this.apiClient),this.tunings=new I3(this.apiClient),this.fileSearchStores=new Aq(this.apiClient)}}let Ng=class extends Error{};const Ky=["gemini-2.5-flash-image","gemini-3-pro-image-preview"];class ii{static options={img_models:{flash_image:"gemini-2.5-flash-image",pro_image:"gemini-3-pro-image-preview"}};static getApiKey=null;static setApiKey=null;static getGenAI(){const e=this.getApiKey?.()||"";if(console.log(e),!e)throw new Ng("No Google API key set");return new J3({apiKey:e})}static async txt2txt(e){try{const n=this.getGenAI(),i={},r=await n.models.generateContent({model:"gemini-2.5-flash",contents:e,config:i});return console.log("RES TEXT",r.text),r.text}catch(n){console.error("Goo Err Response",n);const i=n?.message||"";if(i.includes("API key not valid")||i.includes("API_KEY_INVALID")||n instanceof Ng)return this.showKeyPromptWindow(),null;throw n}}static async img2img(e,n=Ky[0],i){try{const r=this.getGenAI(),a=[{text:e}];if(i?.length)for(const m of i)!m?.rawBase64||!m?.mime||(m.description&&a.push({text:m.description}),a.push({inlineData:{data:m.rawBase64,mimeType:m.mime}}));const u={model:n,contents:a,config:{imageConfig:{aspectRatio:"9:16",response_modalities:["Image"]}}};console.log("Gemini Payload",u);const c=await r.models.generateContent(u);console.log("GEMINI RES",c);const d=(c?.candidates??[])[0]?.content?.parts??[];for(const m of d)if(m.inlineData){const y=m.inlineData.data,S=m.inlineData.mimeType||"image/png";return{base64Obj:{rawBase64:y,mime:S},id:c.responseId}}return null}catch(r){const a=r?.message||"";if(a.includes("API key not valid")||a.includes("API_KEY_INVALID")||r instanceof Ng)return this.showKeyPromptWindow(),null;throw console.error("img2img error",r),r}}static showKeyPromptWindow(){const e=window.prompt("Your Google API key is missing or invalid. Please enter a valid key:");e?this.setApiKey?.(e):console.warn("User did not provide a valid API key.")}static async saveResultImage(e,n){return e&&e.base64Obj?.rawBase64?(console.log(e.base64Obj.mime.split("/")[1]),await mo.fromBase64({rawBase64:e.base64Obj.rawBase64,mime:e.base64Obj.mime},n,`${e.id}.${e.base64Obj.mime.split("/")[1]}`)):(console.warn("No valid image returned from GoogleAI.img2img"),null)}}async function j3(t,e){const n=Math.floor(Date.now()/1e3),i={alg:"HS256",typ:"JWT"},r={iss:t,exp:n+1800,nbf:n-5},a=Ig(JSON.stringify(i)),u=Ig(JSON.stringify(r)),c=`${a}.${u}`,h=await crypto.subtle.importKey("raw",new TextEncoder().encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),d=await crypto.subtle.sign("HMAC",h,new TextEncoder().encode(c));return`${c}.${Ig(d)}`}function Ig(t){let e;typeof t=="string"?e=new TextEncoder().encode(t):e=new Uint8Array(t);let n="";for(let i=0;i<e.length;i++)n+=String.fromCharCode(e[i]);return btoa(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class De{static getKeysDict=null;static videoModels=["kling-v1","kling-v1-5","kling-v1-6","kling-v2-master","kling-v2-1","kling-v2-1-master","kling-v2-5-turbo","kling-v2-6"];static options={img2video:{duration:{five:"5",ten:"10"},mode:{std:"std",pro:"pro"},model:{v1:"kling-v1",v1_5:"kling-v1-5",v1_6:"kling-v1-6",v2_0m:"kling-v2-master",v2_1:"kling-v2-1",v2_1m:"kling-v2-1-master",v2_5:"kling-v2-5-turbo",v2_6:"kling-v2-6",vo1:"kling-video-o1"},sound:{on:"on",off:"off"}},motion_control:{mode:{std:"std",pro:"pro"},character_orientation:{image:"image",video:"video"},keep_original_sound:{yes:"yes",no:"no"}},omni_video:{model:{o1:"kling-video-o1"},mode:{std:"std",pro:"pro"},aspect_ratio:{landscape:"16:9",portrait:"9:16",square:"1:1"},duration:{three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"},video:{refer_type:{base:"base",feature:"feature"},keep_original_sound:{yes:"yes",no:"no"}},image:{type:{first_frame:"first_frame",end_frame:"end_frame"}}}};static async getToken(){const e=this.getKeysDict?.();if(!e)throw new Error("No Kling API keys provided or getKeysDict not set");return await j3(e.accessKey,e.secretKey)}static async postToKling(e,n){const r=`http://localhost:4000/proxy/${encodeURIComponent(e)}`,a=await this.getToken();console.log(`Kling API request to ${e}:`,n);const u=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!u.ok){const h=await u.text();throw new Error(`Kling API request failed: ${h}`)}const c=await u.json();return console.log(`Kling API response from ${e}:`,c),c}static async txt2video(e,n="kling-v1"){const i={model_name:n,mode:"std",duration:"5",prompt:e,cfg_scale:.5};return{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/text2video",i)).data.task_id,workflow:"text2video"}}static async img2video(e){const{image:n,prompt:i,model:r=De.options.img2video.model.v2_6,duration:a=De.options.img2video.duration,mode:u=De.options.img2video.mode.std,cfg_scale:c=.5,static_mask:h,dynamic_masks:d,image_tail:m,camera_control:y,voice_list:S,sound:b="off",negative_prompt:C,callback_url:x,external_task_id:A}=e,M={model_name:r,image:n,prompt:i,duration:a,mode:u,cfg_scale:c,sound:b};return h&&(M.static_mask=h),d&&(M.dynamic_masks=d),m&&(M.image_tail=m),y&&(M.camera_control=y),S&&(M.voice_list=S),C&&(M.negative_prompt=C),x&&(M.callback_url=x),A&&(M.external_task_id=A),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/image2video",M)).data.task_id,workflow:"image2video"}}static async motionControl(e){const{image:n,video_url:i,prompt:r,mode:a=De.options.motion_control.mode.std,character_orientation:u,keep_original_sound:c=De.options.motion_control.keep_original_sound.yes,callback_url:h,external_task_id:d}=e,m={image_url:n,video_url:i,character_orientation:u,mode:a,keep_original_sound:c};return r&&(m.prompt=r),h&&(m.callback_url=h),d&&(m.external_task_id=d),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/motion-control",m)).data.task_id,workflow:"motion-control"}}static async getStatus(e,n="text2video"){const i=`https://api-singapore.klingai.com/v1/videos/${n}/${e}`,a=`http://localhost:4000/proxy/${encodeURIComponent(i)}`,u=await this.getToken();console.log("KLING_AI Get Status sent");const c=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});if(!c.ok){const d=await c.text();throw new Error(`Task status request failed: ${d}`)}if((c.headers.get("content-type")||"").includes("application/json")){const d=await c.json();return console.log("KLING check status:",d),{status:d?.data?.task_status||"unknown",status_msg:d?.data?.task_status_msg||"",url:d?.data?.task_result?.videos?.[0]?.url||null}}}static async omniVideo(e){const{prompt:n,model:i="kling-video-o1",mode:r="pro",aspect_ratio:a,duration:u="5",image_list:c,element_list:h,video_list:d,callback_url:m,external_task_id:y}=e;if(!n)throw new Error("OmniVideo requires a prompt");const S={model_name:i,prompt:n,mode:r,duration:u};return a&&(S.aspect_ratio=a),c&&(S.image_list=c),h&&(S.element_list=h),d&&(S.video_list=d),m&&(S.callback_url=m),y&&(S.external_task_id=y),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/omni-video",S)).data.task_id,workflow:"omni-video"}}static async identifyFace(e){const{video_id:n,video_url:i}=e;if(!n&&!i||n&&i)throw new Error("You must provide either video_id or video_url, but not both.");const r={};return n&&(r.video_id=n),i&&(r.video_url=i),await this.postToKling("https://api-singapore.klingai.com/v1/videos/identify-face",r)}static async lipSync(e){const{session_id:n,face_choose:i,callback_url:r,external_task_id:a}=e;if(!n)throw new Error("session_id is required for LipSync");if(!i||i.length===0)throw new Error("face_choose must include at least one face");const u={session_id:n,face_choose:i};return r&&(u.callback_url=r),a&&(u.external_task_id=a),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/advanced-lip-sync",u)).data.task_id,workflow:"advanced-lip-sync"}}}const ou={KLING:"kling",GPT:"gpt",GOOGLE:"google"};class xC{shot;id;is_checking_status=!1;_status_log="";constructor(e,n){this.shot=e,this.id=n,Li(this)}update(e){const i={...this.data||{},...e};this.shot.shotJson?.updateField(`tasks/${this.id}`,i)}log(){console.log({task:Hn(this),data:Hn(this.data)})}delete(){this.shot.removeTask(this)}get data(){return this.shot.shotJson?.getField(`tasks/${this.id}`)}get status(){return this.data.status??"submitted"}finish_checking(){we(()=>{this.is_checking_status=!1}),this._status_log=""}async check_status(e=30,n=15e3){if(this.data.provider===ou.KLING){we(()=>{this.is_checking_status=!0,this._status_log="start checking"}),console.log("started checking status");for(let i=0;i<=e;i++){try{console.log("new attempt");const r=await De.getStatus(this.id,this.data.workflow);if(console.log("status",r),this.update(r),r?.status==="succeed"&&r.url){await this.downloadResults(),this.finish_checking();return}if(r?.status==="failed"){console.warn(`Task ${this.id} failed.`),this.finish_checking();return}}catch(r){console.error("Status check failed:",r)}i<e&&(we(()=>{this._status_log=`(attempt ${i+1}/${e})`}),await new Promise(r=>setTimeout(r,n)))}console.warn(`Task ${this.id} did not finish after ${e} retries.`),this.finish_checking()}}async downloadResults(){const e=this.data?.url;this.shot.MediaFolder_genVideo?.downloadFromUrl(e)}}class $u extends Fu{static async fromBase64(e,n,i){try{const r=atob(e),a=r.length,u=new Uint8Array(a);for(let d=0;d<a;d++)u[d]=r.charCodeAt(d);const c=await n.getFileHandle(i,{create:!0}),h=await c.createWritable();return await h.write(u),await h.close(),new $u(c,n)}catch(r){throw console.error("Failed to create LocalVideo from Base64:",r),r}}}class _h extends Fu{base64Data=null;async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.handle.getFile(),n=await e.arrayBuffer(),i=e.type||"audio/mpeg",r=K3(n);return this.base64Data={rawBase64:r,mime:i},this.base64Data}catch(e){return console.error("Failed to create Base64 from audio file:",e),{rawBase64:"",mime:"audio/mpeg"}}}static async fromBase64(e,n,i){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const u=atob(r),c=u.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=u.charCodeAt(S);const d=await n.getFileHandle(i,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new _h(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalAudio from Base64:",r),r}}async getDuration(){const e=await this.handle.getFile(),n=URL.createObjectURL(e);return await new Promise((i,r)=>{const a=new Audio;a.src=n,a.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(n),i(a.duration)}),a.addEventListener("error",()=>{URL.revokeObjectURL(n),r(new Error("Failed to load audio"))})})}}function K3(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}class Of{parentFolder;folderName;folder=null;media=[];path="";pickedMedia=null;selectedMedia=null;tags=["picked","start_frame","end_frame","motion_ref"];multi_tags=["ref_frame"];storage_json=null;shot=null;onPicked;onSelected;constructor(e,n,i="",r=null,a=null){this.parentFolder=e,this.folderName=n,this.path=i?`${i}/${n}`:n,this.storage_json=r,this.shot=a,Li(this)}async load(){try{this.folder=await this.parentFolder.getDirectoryHandle(this.folderName,{create:!0});for await(const[,e]of this.folder.entries())e.kind==="file"&&this.loadFile(e)}catch(e){console.error(`Failed to load MediaFolder '${this.folderName}':`,e),we(()=>{this.folder=null,this.media=[]})}}async deleteMedia(e,n=!0){if(!this.folder)throw new Error("Folder not loaded");if(!(n&&!window.confirm(`Delete this ${e instanceof mo?"image":"video"}?`)))try{await e.delete(),we(()=>{this.media=this.media.filter(i=>i!==e)})}catch(i){console.error("Failed to delete media:",i),alert(`Failed to delete ${e instanceof mo?"image":"video"}.`)}}setSelectedMedia(e){this.selectedMedia!==e&&(we(()=>{this.selectedMedia=e}),this.onSelected?.(e))}log(){console.log(Hn(this))}async downloadFromUrl(e){if(!this.folder)throw new Error("MediaFolder not loaded");try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch: ${n.statusText}`);const i=await n.blob();let a=new URL(e).pathname.split("/").pop()||"download";if(!a.includes(".")){const d=i.type.split("/")[1];d&&(a+=`.${d}`)}const u=await this.folder.getFileHandle(a,{create:!0}),c=await u.createWritable();return await c.write(i),await c.close(),this.loadFile(u)}catch(n){throw console.error("Failed to download media from URL:",n),n}}loadFile(e){const n=e.name;let i=null;return n.match(/\.(png|jpe?g|gif|webp)$/i)?i=new mo(e,this.folder,this.path,this.shot):n.match(/\.(mp4|mov|webm|avi)$/i)?i=new $u(e,this.folder,this.path,this.shot):n.match(/\.(mp3|wav|m4a)$/i)&&(i=new _h(e,this.folder,this.path,this.shot)),i?(i.setTags(Hn(this.storage_json?.getField("MF_"+this.folderName+"/"+i.name))),i.onTagChanged=(r,a,u)=>{if(u&&!this.multi_tags.includes(a))for(const c of this.media)c!==r&&c.hasTag(a)&&c.removeTag(a);this.storage_json&&this.storage_json.updateField("MF_"+this.folderName,this.mediaJson)},we(()=>{this.media.push(i)}),i):null}async saveFiles(e){if(!this.folder)throw new Error("MediaFolder not loaded");for(const n of e)try{const i=await this.folder.getFileHandle(n.name,{create:!0}),r=await i.createWritable();await r.write(n),await r.close(),this.loadFile(i)}catch(i){console.error(`Failed to save file '${n.name}':`,i)}}async copyFromClipboard(){if(!this.folder)throw new Error("MediaFolder not loaded");if(!navigator.clipboard||!navigator.clipboard.read){console.warn("Clipboard API not supported");return}const e=[];try{const n=await navigator.clipboard.read();console.log(n);for(const i of n)for(const r of i.types){if(!r.startsWith("image/")&&!r.startsWith("video/"))continue;const a=await i.getType(r),u=a.name||`clipboard-${Date.now()}.${r.split("/")[1]}`;e.push(a instanceof File?a:new File([a],u,{type:r}))}if(e.length===0){console.info("Clipboard does not contain files");return}await this.saveFiles(e)}catch(n){console.error("Failed to read from clipboard:",n);return}}get mediaJson(){const e={};for(const n of this.media)n.tags.length>0&&(e[n.name]=Hn(n.tags));return Hn(e)}getMediaWithTag(e){return e?this.media.filter(n=>n.hasTag(e)):[]}getFirstMediaWithTag(e){return this.media.find(n=>n.hasTag(e))??null}hasAnyMediaWithTag(e){return this.media.some(n=>n.hasTag(e))}}class AC{folder;path="";scene;shotJson=null;tasks=[];is_submitting_video=!1;is_generating=!1;MediaFolder_results=null;MediaFolder_genVideo=null;MediaFolder_refVideo=null;MediaFolder_Audio=null;constructor(e,n){this.folder=e,this.scene=n,this.path=n.path+"/"+e.name,Li(this)}get srcImage(){return this.MediaFolder_results.getFirstMediaWithTag("start_frame")}get end_frame(){return this.MediaFolder_results.getFirstMediaWithTag("end_frame")}get kling_motion_video(){return this.MediaFolder_refVideo.getFirstMediaWithTag("motion_ref")}get outVideo(){return this.MediaFolder_genVideo.getFirstMediaWithTag("picked")}get unreal_frame(){return this.MediaFolder_results.getFirstMediaWithTag("unreal_frame")}get kling_face_id_data(){return this.outVideo?this.shotJson?.getField("KlingFaceID/"+this.outVideo.name):null}async load(){try{this.shotJson=await Zr.create(this.folder,"shotinfo.json"),this.MediaFolder_results=new Of(this.folder,"results",this.path,this.shotJson,this),this.MediaFolder_results.tags=["start_frame","end_frame","ref_frame","unreal_frame"],await this.MediaFolder_results.load(),this.MediaFolder_genVideo=new Of(this.folder,"genVideo",this.path,this.shotJson,this),this.MediaFolder_genVideo.tags=["picked"],await this.MediaFolder_genVideo.load(),this.MediaFolder_refVideo=new Of(this.folder,"refVideo",this.path,this.shotJson,this),this.MediaFolder_refVideo.tags=["motion_ref"],await this.MediaFolder_refVideo.load(),this.MediaFolder_Audio=new Of(this.folder,"audio",this.path,this.shotJson,this),this.MediaFolder_Audio.tags=["ID-0","ID-1","ID-2"],await this.MediaFolder_Audio.load(),this.loadTasks()}catch(e){console.error("Error loading shot:",this.folder.name,e),this.shotJson=null}}loadTasks(){const e=this.shotJson?.getField("tasks");we(()=>{if(this.tasks=[],!(!e||typeof e!="object"))for(const n of Object.keys(e))this.tasks.push(new xC(this,n))})}addTask(e,n){const i=new xC(this,e);return we(()=>{this.tasks.push(i)}),i.update(n),i}removeTask(e){we(()=>{this.tasks=this.tasks.filter(i=>i!==e)});const n=this.shotJson?.getField("tasks")??{};delete n[e.id],this.shotJson?.updateField("tasks",n)}async delete(){if(!this.scene?.folder){console.error("Cannot delete shot: scene folder not set");return}try{await this.scene.folder.removeEntry(this.folder.name,{recursive:!0}),we(()=>{this.scene.shots=this.scene.shots.filter(e=>e!==this)})}catch(e){console.error("Failed to delete shot:",e)}}async GenerateVideo(){we(()=>{this.is_submitting_video=!0});const e=this.shotJson?.data.video_prompt||"";try{const n=this.scene.project.workflows.generate_video_kling,i=n.model;let r=null;if(i===De.options.omni_video.model.o1){const u=[];this.srcImage&&u.push({image_url:(await this.srcImage.getBase64()).rawBase64,type:De.options.omni_video.image.type.first_frame}),this.end_frame&&u.push({image_url:(await this.end_frame.getBase64()).rawBase64,type:De.options.omni_video.image.type.end_frame}),r=await De.omniVideo({prompt:e,model:"kling-video-o1",mode:n.mode??"pro",duration:n.duration??"5",aspect_ratio:"16:9",image_list:u.length?u:void 0})}else if(this.srcImage){const u=(await this.srcImage.getBase64()).rawBase64,c=(await this.end_frame?.getBase64())?.rawBase64;r=await De.img2video({image:u,image_tail:c,prompt:e,model:i,mode:n.mode,duration:n.duration,sound:n?.sound??De.options.img2video.sound.off})}if(!r)return;const a=this.addTask(r.id,{provider:ou.KLING,workflow:r.workflow});await new Promise(u=>setTimeout(u,100)),a.check_status()}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{we(()=>{this.is_submitting_video=!1})}}async Kling_IdentyfiFace(){we(()=>{this.is_submitting_video=!0});try{if(console.log("Identyfying Video Face"),this.outVideo){const e=await this.outVideo.getWebUrl(),n=await De.identifyFace({video_url:e});console.log("FACE ID res:",n),n.message=="SUCCEED"&&this.shotJson?.updateField("KlingFaceID/"+this.outVideo.name,n.data)}}catch(e){console.error("Face Identification Failed:",e)}finally{we(()=>{this.is_submitting_video=!1})}}async Kling_LypSync(){we(()=>{this.is_submitting_video=!0});try{const e=[];for(const r of["ID-0","ID-1","ID-2"]){const a=this.MediaFolder_Audio.getFirstMediaWithTag(r);if(!a)continue;const u=await a.getBase64();if(!u)continue;const c=await a.getDuration();e.push({face_id:r.replace("ID-",""),sound_file:u.rawBase64,sound_start_time:0,sound_end_time:Math.min(c*1e3,5e3),sound_insert_time:0,sound_volume:1,original_audio_volume:1})}if(e.length===0){console.warn("No audios found for lip-sync.");return}const n=await De.lipSync({session_id:this.kling_face_id_data.session_id,face_choose:e}),i=this.addTask(n.id,{provider:ou.KLING,workflow:n.workflow});await new Promise(r=>setTimeout(r,100)),i.check_status(),await new Promise(r=>setTimeout(r,2e3))}catch(e){console.error("Submitting Lip Sync Failed:",e)}finally{we(()=>{this.is_submitting_video=!1})}}async GenerateVideo_KlingMotionControl(){we(()=>{this.is_submitting_video=!0});let e=this.shotJson?.data.video_prompt||"";try{const n=this.scene.project.workflows.kling_motion_control;if(this.srcImage&&this.kling_motion_video){const i=(await this.srcImage.getBase64()).rawBase64,r=await this.kling_motion_video.getWebUrl(),a=await De.motionControl({image:i,video_url:r,prompt:e,mode:n.mode,character_orientation:n.character_orientation,keep_original_sound:n.keep_original_sound}),u=this.addTask(a.id,{provider:ou.KLING,workflow:a.workflow});await new Promise(c=>setTimeout(c,100)),u.check_status(),await new Promise(c=>setTimeout(c,2e3))}}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{we(()=>{this.is_submitting_video=!1})}}async getImageTags(){const e=this.getSkippedTags(),n=[];for(const i of this.scene.getTags())if(!e.includes(i.path))try{const r=await i.image.getBase64();n.push({rawBase64:r.rawBase64,mime:r.mime,description:i.path})}catch(r){console.warn("Failed to load tag image:",i.path,r)}return n}async GenerateImage(){we(()=>{this.is_generating=!0});try{const e=await this.getImageTags(),n=this.shotJson?.data.prompt||"",i=await ii.img2img(n,this.scene.project.workflows.generate_shot_image.model,e),r=await ii.saveResultImage(i,this.MediaFolder_results?.folder);r&&this.MediaFolder_results?.loadFile(r.handle)}catch(e){console.error("GenerateImage failed:",e)}finally{we(()=>{this.is_generating=!1})}}async StylizeImage(){if(!this.unreal_frame){console.error("No Reference Frame");return}we(()=>{this.is_generating=!0});try{const e=[],n=await this.unreal_frame.getBase64();e.push({rawBase64:n.rawBase64,mime:n.mime,description:"Base Image"}),e.push(...await this.getImageTags());const i=(this.scene.project.workflows.stylize_image_google.prompt||"")+(this.shotJson?.data.stylize_prompt||""),r=await ii.img2img(i,this.scene.project.workflows.stylize_image_google.model,e),a=await ii.saveResultImage(r,this.MediaFolder_results?.folder);a&&this.MediaFolder_results?.loadFile(a.handle)}catch(e){console.error("StylizeImage failed:",e)}finally{we(()=>{this.is_generating=!1})}}async saveGoogleResultImage(e,n=!1){const i=await ii.saveResultImage(e,this.MediaFolder_results?.folder);if(i){const r=this.MediaFolder_results.loadFile(i.handle);n&&this.MediaFolder_results?.setSelectedMedia(r)}}getSkippedTags(){return this.shotJson?.data?.skippedTags||[]}setTagSkipped(e,n){this.shotJson?.data&&(Array.isArray(this.shotJson.data.skippedTags)||(this.shotJson.data.skippedTags=[]),we(()=>{const i=this.shotJson.data.skippedTags;n?i.includes(e)||i.push(e):this.shotJson.data.skippedTags=i.filter(r=>r!==e)}),this.shotJson.save())}log(){console.log(Hn(this))}}function Ce(t,e,n,i,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function V(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}let oN=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return oN=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};function Lv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Uv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Se extends Error{}class Pt extends Se{constructor(e,n,i,r){super(`${Pt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Sh({message:i,cause:Uv(n)});const a=n?.error;return e===400?new rN(e,a,i,r):e===401?new sN(e,a,i,r):e===403?new aN(e,a,i,r):e===404?new lN(e,a,i,r):e===409?new uN(e,a,i,r):e===422?new cN(e,a,i,r):e===429?new fN(e,a,i,r):e>=500?new dN(e,a,i,r):new Pt(e,a,i,r)}}class Gn extends Pt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Sh extends Pt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Yy extends Sh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class rN extends Pt{}class sN extends Pt{}class aN extends Pt{}class lN extends Pt{}class uN extends Pt{}class cN extends Pt{}class fN extends Pt{}class dN extends Pt{}class hN extends Se{constructor(){super("Could not parse response content as the length limit was reached")}}class pN extends Se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Vl extends Error{constructor(e){super(e)}}const Y3=/^[a-z][a-z0-9+.-]*:/i,X3=t=>Y3.test(t);let en=t=>(en=Array.isArray,en(t)),RC=en;function mN(t){return typeof t!="object"?{}:t??{}}function W3(t){if(!t)return!0;for(const e in t)return!1;return!0}function Q3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Dg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Z3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Se(`${t} must be an integer`);if(e<0)throw new Se(`${t} must be a positive integer`);return e},e4=t=>{try{return JSON.parse(t)}catch{return}},Hu=t=>new Promise(e=>setTimeout(e,t)),oa="6.10.0",t4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function n4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const i4=()=>{const t=n4();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":NC(Deno.build.os),"X-Stainless-Arch":MC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":NC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":MC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=o4();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function o4(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const MC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",NC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let IC;const r4=()=>IC??(IC=i4());function s4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gN(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function vN(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return gN({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function yN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function a4(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const l4=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),_N="RFC3986",SN=t=>String(t),DC={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:SN},u4="RFC1738";let Bv=(t,e)=>(Bv=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Bv(t,e));const bi=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Og=1024,c4=(t,e,n,i,r)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let u="";for(let c=0;c<a.length;c+=Og){const h=a.length>=Og?a.slice(c,c+Og):a,d=[];for(let m=0;m<h.length;++m){let y=h.charCodeAt(m);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||r===u4&&(y===40||y===41)){d[d.length]=h.charAt(m);continue}if(y<128){d[d.length]=bi[y];continue}if(y<2048){d[d.length]=bi[192|y>>6]+bi[128|y&63];continue}if(y<55296||y>=57344){d[d.length]=bi[224|y>>12]+bi[128|y>>6&63]+bi[128|y&63];continue}m+=1,y=65536+((y&1023)<<10|h.charCodeAt(m)&1023),d[d.length]=bi[240|y>>18]+bi[128|y>>12&63]+bi[128|y>>6&63]+bi[128|y&63]}u+=d.join("")}return u};function f4(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function OC(t,e){if(en(t)){const n=[];for(let i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)}const bN={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},wN=function(t,e){Array.prototype.push.apply(t,en(e)?e:[e])};let PC;const bt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:c4,encodeValuesOnly:!1,format:_N,formatter:SN,indices:!1,serializeDate(t){return(PC??(PC=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function d4(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Pg={};function EN(t,e,n,i,r,a,u,c,h,d,m,y,S,b,C,x,A,M){let I=t,N=M,D=0,k=!1;for(;(N=N.get(Pg))!==void 0&&!k;){const Y=N.get(t);if(D+=1,typeof Y<"u"){if(Y===D)throw new RangeError("Cyclic object value");k=!0}typeof N.get(Pg)>"u"&&(D=0)}if(typeof d=="function"?I=d(e,I):I instanceof Date?I=S?.(I):n==="comma"&&en(I)&&(I=OC(I,function(Y){return Y instanceof Date?S?.(Y):Y})),I===null){if(a)return h&&!x?h(e,bt.encoder,A,"key",b):e;I=""}if(d4(I)||f4(I)){if(h){const Y=x?e:h(e,bt.encoder,A,"key",b);return[C?.(Y)+"="+C?.(h(I,bt.encoder,A,"value",b))]}return[C?.(e)+"="+C?.(String(I))]}const U=[];if(typeof I>"u")return U;let O;if(n==="comma"&&en(I))x&&h&&(I=OC(I,h)),O=[{value:I.length>0?I.join(",")||null:void 0}];else if(en(d))O=d;else{const Y=Object.keys(I);O=m?Y.sort(m):Y}const q=c?String(e).replace(/\./g,"%2E"):String(e),J=i&&en(I)&&I.length===1?q+"[]":q;if(r&&en(I)&&I.length===0)return J+"[]";for(let Y=0;Y<O.length;++Y){const W=O[Y],re=typeof W=="object"&&typeof W.value<"u"?W.value:I[W];if(u&&re===null)continue;const ie=y&&c?W.replace(/\./g,"%2E"):W,ae=en(I)?typeof n=="function"?n(J,ie):J:J+(y?"."+ie:"["+ie+"]");M.set(t,D);const de=new WeakMap;de.set(Pg,M),wN(U,EN(re,ae,n,i,r,a,u,c,n==="comma"&&x&&en(I)?null:h,d,m,y,S,b,C,x,A,de))}return U}function h4(t=bt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||bt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=_N;if(typeof t.format<"u"){if(!Bv(DC,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const i=DC[n];let r=bt.filter;(typeof t.filter=="function"||en(t.filter))&&(r=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in bN?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=bt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:bt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:bt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:bt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:bt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?bt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:bt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:bt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:bt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:bt.encodeValuesOnly,filter:r,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:bt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:bt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:bt.strictNullHandling}}function p4(t,e={}){let n=t;const i=h4(e);let r,a;typeof i.filter=="function"?(a=i.filter,n=a("",n)):en(i.filter)&&(a=i.filter,r=a);const u=[];if(typeof n!="object"||n===null)return"";const c=bN[i.arrayFormat],h=c==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);const d=new WeakMap;for(let S=0;S<r.length;++S){const b=r[S];i.skipNulls&&n[b]===null||wN(u,EN(n[b],b,c,h,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}const m=u.join(i.delimiter);let y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""}function m4(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let kC;function Xy(t){let e;return(kC??(e=new globalThis.TextEncoder,kC=e.encode.bind(e)))(t)}let LC;function UC(t){let e;return(LC??(e=new globalThis.TextDecoder,LC=e.decode.bind(e)))(t)}var mn,gn;class bh{constructor(){mn.set(this,void 0),gn.set(this,void 0),Ce(this,mn,new Uint8Array),Ce(this,gn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Xy(e):e;Ce(this,mn,m4([V(this,mn,"f"),n]));const i=[];let r;for(;(r=g4(V(this,mn,"f"),V(this,gn,"f")))!=null;){if(r.carriage&&V(this,gn,"f")==null){Ce(this,gn,r.index);continue}if(V(this,gn,"f")!=null&&(r.index!==V(this,gn,"f")+1||r.carriage)){i.push(UC(V(this,mn,"f").subarray(0,V(this,gn,"f")-1))),Ce(this,mn,V(this,mn,"f").subarray(V(this,gn,"f"))),Ce(this,gn,null);continue}const a=V(this,gn,"f")!==null?r.preceding-1:r.preceding,u=UC(V(this,mn,"f").subarray(0,a));i.push(u),Ce(this,mn,V(this,mn,"f").subarray(r.index)),Ce(this,gn,null)}return i}flush(){return V(this,mn,"f").length?this.decode(`
`):[]}}mn=new WeakMap,gn=new WeakMap;bh.NEWLINE_CHARS=new Set([`
`,"\r"]);bh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function g4(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function v4(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Od={off:0,error:200,warn:300,info:400,debug:500},BC=(t,e,n)=>{if(t){if(Q3(Od,t))return t;Dt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Od))}`)}};function zl(){}function Pf(t,e,n){return!e||Od[t]>Od[n]?zl:e[t].bind(e)}const y4={error:zl,warn:zl,info:zl,debug:zl};let FC=new WeakMap;function Dt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return y4;const i=FC.get(e);if(i&&i[0]===n)return i[1];const r={error:Pf("error",e,n),warn:Pf("warn",e,n),info:Pf("info",e,n),debug:Pf("debug",e,n)};return FC.set(e,[n,r]),r}const Fr=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Fl;class xi{constructor(e,n,i){this.iterator=e,Fl.set(this,void 0),this.controller=n,Ce(this,Fl,i)}static fromSSEResponse(e,n,i){let r=!1;const a=i?Dt(i):console;async function*u(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of _4(e,n))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(m){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),m}if(d&&d.error)throw new Pt(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(m){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),m}if(h.event=="error")throw new Pt(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(Lv(h))return;throw h}finally{c||n.abort()}}return new xi(u,n,i)}static fromReadableStream(e,n,i){let r=!1;async function*a(){const c=new bh,h=yN(e);for await(const d of h)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*u(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(Lv(h))return;throw h}finally{c||n.abort()}}return new xi(u,n,i)}[(Fl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new xi(()=>r(e),this.controller,V(this,Fl,"f")),new xi(()=>r(n),this.controller,V(this,Fl,"f"))]}toReadableStream(){const e=this;let n;return gN({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const u=Xy(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){await n.return?.()}})}}async function*_4(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");const n=new b4,i=new bh,r=yN(t.body);for await(const a of S4(r))for(const u of i.decode(a)){const c=n.decode(u);c&&(yield c)}for(const a of i.flush()){const u=n.decode(a);u&&(yield u)}}async function*S4(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const i=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Xy(n):n;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let a;for(;(a=v4(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class b4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=w4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function w4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function TN(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{if(e.options.stream)return Dt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):xi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const y=await n.json();return CN(y,n)}return await n.text()})();return Dt(t).debug(`[${i}] response parsed`,Fr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}function CN(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ql;class wh extends Promise{constructor(e,n,i=TN){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,ql.set(this,void 0),Ce(this,ql,e)}_thenUnwrap(e){return new wh(V(this,ql,"f"),this.responsePromise,async(n,i)=>CN(e(await this.parseResponse(n,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(V(this,ql,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ql=new WeakMap;var kf;class Wy{constructor(e,n,i,r){kf.set(this,void 0),Ce(this,kf,e),this.options=r,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await V(this,kf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(kf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class E4 extends wh{constructor(e,n,i){super(e,n,async(r,a)=>new i(r,a.response,await TN(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Eh extends Wy{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class yt extends Wy{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...mN(this.options.query),after:n}}:null}}class Pd extends Wy{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...mN(this.options.query),after:e}}:null}}const xN=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ru(t,e,n){return xN(),new File(t,e??"unknown_file",n)}function id(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Qy=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",$C=async(t,e)=>Fv(t.body)?{...t,body:await AN(t.body,e)}:t,es=async(t,e)=>({...t,body:await AN(t.body,e)}),HC=new WeakMap;function T4(t){const e=typeof t=="function"?t:t.fetch,n=HC.get(e);if(n)return n;const i=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return HC.set(e,i),i}const AN=async(t,e)=>{if(!await T4(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([i,r])=>$v(n,i,r))),n},RN=t=>t instanceof Blob&&"name"in t,C4=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Qy(t)||RN(t)),Fv=t=>{if(C4(t))return!0;if(Array.isArray(t))return t.some(Fv);if(t&&typeof t=="object"){for(const e in t)if(Fv(t[e]))return!0}return!1},$v=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,ru([await n.blob()],id(n)));else if(Qy(n))t.append(e,ru([await new Response(vN(n)).blob()],id(n)));else if(RN(n))t.append(e,n,id(n));else if(Array.isArray(n))await Promise.all(n.map(i=>$v(t,e+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,r])=>$v(t,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},MN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",x4=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&MN(t),A4=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function R4(t,e,n){if(xN(),t=await t,x4(t))return t instanceof File?t:ru([await t.arrayBuffer()],t.name);if(A4(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ru(await Hv(r),e,n)}const i=await Hv(t);if(e||(e=id(t)),!n?.type){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n={...n,type:r})}return ru(i,e,n)}async function Hv(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(MN(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Qy(t))for await(const n of t)e.push(...await Hv(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${M4(t)}`)}return e}function M4(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ye{constructor(e){this._client=e}}function NN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const GC=Object.freeze(Object.create(null)),N4=(t=NN)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((m,y,S)=>{/[?#]/.test(y)&&(r=!0);const b=i[S];let C=(r?encodeURIComponent:t)(""+b);return S!==i.length&&(b==null||typeof b=="object"&&b.toString===Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??GC)??GC)?.toString)&&(C=b+"",a.push({start:m.length+y.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),m+y+(S===i.length?"":C)},""),c=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,b)=>{const C=" ".repeat(b.start-m),x="^".repeat(b.length);return m=b.start+b.length,S+C+x},"");throw new Se(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${y}`)}return u},oe=N4(NN);let IN=class extends ye{list(e,n={},i){return this._client.getAPIList(oe`/chat/completions/${e}/messages`,yt,{query:n,...i})}};function kd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Zy(t){return t?.$brand==="auto-parseable-response-format"}function Gu(t){return t?.$brand==="auto-parseable-tool"}function I4(t,e){return!e||!DN(e)?{...t,choices:t.choices.map(n=>(ON(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:e_(t,e)}function e_(t,e){const n=t.choices.map(i=>{if(i.finish_reason==="length")throw new hN;if(i.finish_reason==="content_filter")throw new pN;return ON(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(r=>O4(e,r))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?D4(e,i.message.content):null}}});return{...t,choices:n}}function D4(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function O4(t,e){const n=t.tools?.find(i=>kd(i)&&i.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Gu(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function P4(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(i=>kd(i)&&i.function?.name===e.function.name);return kd(n)&&(Gu(n)||n?.function.strict||!1)}function DN(t){return Zy(t.response_format)?!0:t.tools?.some(e=>Gu(e)||e.type==="function"&&e.function.strict===!0)??!1}function ON(t){for(const e of t||[])if(e.type!=="function")throw new Se(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function k4(t){for(const e of t??[]){if(e.type!=="function")throw new Se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Ld=t=>t?.role==="assistant",PN=t=>t?.role==="tool";var Gv,od,rd,Jl,jl,sd,Kl,ro,Yl,Ud,Bd,ra,kN;class t_{constructor(){Gv.add(this),this.controller=new AbortController,od.set(this,void 0),rd.set(this,()=>{}),Jl.set(this,()=>{}),jl.set(this,void 0),sd.set(this,()=>{}),Kl.set(this,()=>{}),ro.set(this,{}),Yl.set(this,!1),Ud.set(this,!1),Bd.set(this,!1),ra.set(this,!1),Ce(this,od,new Promise((e,n)=>{Ce(this,rd,e,"f"),Ce(this,Jl,n,"f")})),Ce(this,jl,new Promise((e,n)=>{Ce(this,sd,e,"f"),Ce(this,Kl,n,"f")})),V(this,od,"f").catch(()=>{}),V(this,jl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},V(this,Gv,"m",kN).bind(this))},0)}_connected(){this.ended||(V(this,rd,"f").call(this),this._emit("connect"))}get ended(){return V(this,Yl,"f")}get errored(){return V(this,Ud,"f")}get aborted(){return V(this,Bd,"f")}abort(){this.controller.abort()}on(e,n){return(V(this,ro,"f")[e]||(V(this,ro,"f")[e]=[])).push({listener:n}),this}off(e,n){const i=V(this,ro,"f")[e];if(!i)return this;const r=i.findIndex(a=>a.listener===n);return r>=0&&i.splice(r,1),this}once(e,n){return(V(this,ro,"f")[e]||(V(this,ro,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,i)=>{Ce(this,ra,!0),e!=="error"&&this.once("error",i),this.once(e,n)})}async done(){Ce(this,ra,!0),await V(this,jl,"f")}_emit(e,...n){if(V(this,Yl,"f"))return;e==="end"&&(Ce(this,Yl,!0),V(this,sd,"f").call(this));const i=V(this,ro,"f")[e];if(i&&(V(this,ro,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!V(this,ra,"f")&&!i?.length&&Promise.reject(r),V(this,Jl,"f").call(this,r),V(this,Kl,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!V(this,ra,"f")&&!i?.length&&Promise.reject(r),V(this,Jl,"f").call(this,r),V(this,Kl,"f").call(this,r),this._emit("end")}}_emitFinal(){}}od=new WeakMap,rd=new WeakMap,Jl=new WeakMap,jl=new WeakMap,sd=new WeakMap,Kl=new WeakMap,ro=new WeakMap,Yl=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,ra=new WeakMap,Gv=new WeakSet,kN=function(e){if(Ce(this,Ud,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Gn),e instanceof Gn)return Ce(this,Bd,!0),this._emit("abort",e);if(e instanceof Se)return this._emit("error",e);if(e instanceof Error){const n=new Se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Se(String(e)))};function L4(t){return typeof t.parse=="function"}var $t,Vv,Fd,zv,qv,Jv,LN,UN;const U4=10;class BN extends t_{constructor(){super(...arguments),$t.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),PN(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Ld(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),V(this,$t,"m",Vv).call(this)}async finalMessage(){return await this.done(),V(this,$t,"m",Fd).call(this)}async finalFunctionToolCall(){return await this.done(),V(this,$t,"m",zv).call(this)}async finalFunctionToolCallResult(){return await this.done(),V(this,$t,"m",qv).call(this)}async totalUsage(){return await this.done(),V(this,$t,"m",Jv).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=V(this,$t,"m",Fd).call(this);n&&this._emit("finalMessage",n);const i=V(this,$t,"m",Vv).call(this);i&&this._emit("finalContent",i);const r=V(this,$t,"m",zv).call(this);r&&this._emit("finalFunctionToolCall",r);const a=V(this,$t,"m",qv).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",V(this,$t,"m",Jv).call(this))}async _createChatCompletion(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,$t,"m",LN).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(e_(a,n))}async _runChatCompletion(e,n,i){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,i)}async _runTools(e,n,i){const r="tool",{tool_choice:a="auto",stream:u,...c}=n,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=U4}=i||{},m=n.tools.map(b=>{if(Gu(b)){if(!b.$callback)throw new Se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),y={};for(const b of m)b.type==="function"&&(y[b.function.name||b.function.function.name]=b.function);const S="tools"in n?m.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<d;++b){const x=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:S,messages:[...this.messages]},i)).choices[0]?.message;if(!x)throw new Se("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const A of x.tool_calls){if(A.type!=="function")continue;const M=A.id,{name:I,arguments:N}=A.function,D=y[I];if(D){if(h&&h!==I){const q=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(y).map(J=>JSON.stringify(J)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}let k;try{k=L4(D)?await D.parse(N):N}catch(q){const J=q instanceof Error?q.message:String(q);this._addMessage({role:r,tool_call_id:M,content:J});continue}const U=await D.function(k,this),O=V(this,$t,"m",UN).call(this,U);if(this._addMessage({role:r,tool_call_id:M,content:O}),h)return}}}}$t=new WeakSet,Vv=function(){return V(this,$t,"m",Fd).call(this).content??null},Fd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Ld(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},zv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Ld(n)&&n?.tool_calls?.length)return n.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},qv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(PN(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},Jv=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},LN=function(e){if(e.n!=null&&e.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},UN=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class n_ extends BN{static runTools(e,n,i){const r=new n_,a={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}_addMessage(e,n=!0){super._addMessage(e,n),Ld(e)&&e.content&&this._emit("content",e.content)}}const FN=1,$N=2,HN=4,GN=8,VN=16,zN=32,qN=64,JN=128,jN=256,KN=JN|jN,YN=VN|zN|KN|qN,XN=FN|$N|YN,WN=HN|GN,B4=XN|WN,Tt={STR:FN,NUM:$N,ARR:HN,OBJ:GN,NULL:VN,BOOL:zN,NAN:qN,INFINITY:JN,MINUS_INFINITY:jN,INF:KN,SPECIAL:YN,ATOM:XN,COLLECTION:WN,ALL:B4};class F4 extends Error{}class $4 extends Error{}function H4(t,e=Tt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return G4(t.trim(),e)}const G4=(t,e)=>{const n=t.length;let i=0;const r=S=>{throw new F4(`${S} at position ${i}`)},a=S=>{throw new $4(`${S} at position ${i}`)},u=()=>(y(),i>=n&&r("Unexpected end of input"),t[i]==='"'?c():t[i]==="{"?h():t[i]==="["?d():t.substring(i,i+4)==="null"||Tt.NULL&e&&n-i<4&&"null".startsWith(t.substring(i))?(i+=4,null):t.substring(i,i+4)==="true"||Tt.BOOL&e&&n-i<4&&"true".startsWith(t.substring(i))?(i+=4,!0):t.substring(i,i+5)==="false"||Tt.BOOL&e&&n-i<5&&"false".startsWith(t.substring(i))?(i+=5,!1):t.substring(i,i+8)==="Infinity"||Tt.INFINITY&e&&n-i<8&&"Infinity".startsWith(t.substring(i))?(i+=8,1/0):t.substring(i,i+9)==="-Infinity"||Tt.MINUS_INFINITY&e&&1<n-i&&n-i<9&&"-Infinity".startsWith(t.substring(i))?(i+=9,-1/0):t.substring(i,i+3)==="NaN"||Tt.NAN&e&&n-i<3&&"NaN".startsWith(t.substring(i))?(i+=3,NaN):m()),c=()=>{const S=i;let b=!1;for(i++;i<n&&(t[i]!=='"'||b&&t[i-1]==="\\");)b=t[i]==="\\"?!b:!1,i++;if(t.charAt(i)=='"')try{return JSON.parse(t.substring(S,++i-Number(b)))}catch(C){a(String(C))}else if(Tt.STR&e)try{return JSON.parse(t.substring(S,i-Number(b))+'"')}catch{return JSON.parse(t.substring(S,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},h=()=>{i++,y();const S={};try{for(;t[i]!=="}";){if(y(),i>=n&&Tt.OBJ&e)return S;const b=c();y(),i++;try{const C=u();Object.defineProperty(S,b,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(Tt.OBJ&e)return S;throw C}y(),t[i]===","&&i++}}catch{if(Tt.OBJ&e)return S;r("Expected '}' at end of object")}return i++,S},d=()=>{i++;const S=[];try{for(;t[i]!=="]";)S.push(u()),y(),t[i]===","&&i++}catch{if(Tt.ARR&e)return S;r("Expected ']' at end of array")}return i++,S},m=()=>{if(i===0){t==="-"&&Tt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if(Tt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(b))}}const S=i;for(t[i]==="-"&&i++;t[i]&&!",]}".includes(t[i]);)i++;i==n&&!(Tt.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(S,i))}catch{t.substring(S,i)==="-"&&Tt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(S,t.lastIndexOf("e")))}catch(C){a(String(C))}}},y=()=>{for(;i<n&&` 
\r	`.includes(t[i]);)i++};return u()},VC=t=>H4(t,Tt.ALL^Tt.NUM);var St,oo,Xs,Qo,kg,Lf,Lg,Ug,Bg,Uf,Fg,zC;class pu extends BN{constructor(e){super(),St.add(this),oo.set(this,void 0),Xs.set(this,void 0),Qo.set(this,void 0),Ce(this,oo,e),Ce(this,Xs,[])}get currentChatCompletionSnapshot(){return V(this,Qo,"f")}static fromReadableStream(e){const n=new pu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,i){const r=new pu(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,i){super._createChatCompletion;const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,St,"m",kg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const u of a)V(this,St,"m",Lg).call(this,u);if(a.controller.signal?.aborted)throw new Gn;return this._addChatCompletion(V(this,St,"m",Uf).call(this))}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),V(this,St,"m",kg).call(this),this._connected();const r=xi.fromReadableStream(e,this.controller);let a;for await(const u of r)a&&a!==u.id&&this._addChatCompletion(V(this,St,"m",Uf).call(this)),V(this,St,"m",Lg).call(this,u),a=u.id;if(r.controller.signal?.aborted)throw new Gn;return this._addChatCompletion(V(this,St,"m",Uf).call(this))}[(oo=new WeakMap,Xs=new WeakMap,Qo=new WeakMap,St=new WeakSet,kg=function(){this.ended||Ce(this,Qo,void 0)},Lf=function(n){let i=V(this,Xs,"f")[n.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},V(this,Xs,"f")[n.index]=i,i)},Lg=function(n){if(this.ended)return;const i=V(this,St,"m",zC).call(this,n);this._emit("chunk",n,i);for(const r of n.choices){const a=i.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const u=V(this,St,"m",Lf).call(this,a);a.finish_reason&&(V(this,St,"m",Bg).call(this,a),u.current_tool_call_index!=null&&V(this,St,"m",Ug).call(this,a,u.current_tool_call_index));for(const c of r.delta.tool_calls??[])u.current_tool_call_index!==c.index&&(V(this,St,"m",Bg).call(this,a),u.current_tool_call_index!=null&&V(this,St,"m",Ug).call(this,a,u.current_tool_call_index)),u.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},Ug=function(n,i){if(V(this,St,"m",Lf).call(this,n).done_tool_calls.has(i))return;const a=n.message.tool_calls?.[i];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const u=V(this,oo,"f")?.tools?.find(c=>kd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:i,arguments:a.function.arguments,parsed_arguments:Gu(u)?u.$parseRaw(a.function.arguments):u?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Bg=function(n){const i=V(this,St,"m",Lf).call(this,n);if(n.message.content&&!i.content_done){i.content_done=!0;const r=V(this,St,"m",Fg).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Uf=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,Qo,"f");if(!n)throw new Se("request ended without sending any chunks");return Ce(this,Qo,void 0),Ce(this,Xs,[]),V4(n,V(this,oo,"f"))},Fg=function(){const n=V(this,oo,"f")?.response_format;return Zy(n)?n:null},zC=function(n){var i,r,a,u;let c=V(this,Qo,"f");const{choices:h,...d}=n;c?Object.assign(c,d):c=Ce(this,Qo,{...d,choices:[]});for(const{delta:m,finish_reason:y,index:S,logprobs:b=null,...C}of n.choices){let x=c.choices[S];if(x||(x=c.choices[S]={finish_reason:y,index:S,message:{},logprobs:b,...C}),b)if(!x.logprobs)x.logprobs=Object.assign({},b);else{const{content:U,refusal:O,...q}=b;Object.assign(x.logprobs,q),U&&((i=x.logprobs).content??(i.content=[]),x.logprobs.content.push(...U)),O&&((r=x.logprobs).refusal??(r.refusal=[]),x.logprobs.refusal.push(...O))}if(y&&(x.finish_reason=y,V(this,oo,"f")&&DN(V(this,oo,"f")))){if(y==="length")throw new hN;if(y==="content_filter")throw new pN}if(Object.assign(x,C),!m)continue;const{content:A,refusal:M,function_call:I,role:N,tool_calls:D,...k}=m;if(Object.assign(x.message,k),M&&(x.message.refusal=(x.message.refusal||"")+M),N&&(x.message.role=N),I&&(x.message.function_call?(I.name&&(x.message.function_call.name=I.name),I.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=I.arguments)):x.message.function_call=I),A&&(x.message.content=(x.message.content||"")+A,!x.message.refusal&&V(this,St,"m",Fg).call(this)&&(x.message.parsed=VC(x.message.content))),D){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:U,id:O,type:q,function:J,...Y}of D){const W=(u=x.message.tool_calls)[U]??(u[U]={});Object.assign(W,Y),O&&(W.id=O),q&&(W.type=q),J&&(W.function??(W.function={name:J.name??"",arguments:""})),J?.name&&(W.function.name=J.name),J?.arguments&&(W.function.arguments+=J.arguments,P4(V(this,oo,"f"),W)&&(W.function.parsed_arguments=VC(W.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("chunk",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new xi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function V4(t,e){const{id:n,choices:i,created:r,model:a,system_fingerprint:u,...c}=t,h={...c,id:n,choices:i.map(({message:d,finish_reason:m,index:y,logprobs:S,...b})=>{if(!m)throw new Se(`missing finish_reason for choice ${y}`);const{content:C=null,function_call:x,tool_calls:A,...M}=d,I=d.role;if(!I)throw new Se(`missing role for choice ${y}`);if(x){const{arguments:N,name:D}=x;if(N==null)throw new Se(`missing function_call.arguments for choice ${y}`);if(!D)throw new Se(`missing function_call.name for choice ${y}`);return{...b,message:{content:C,function_call:{arguments:N,name:D},role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}return A?{...b,index:y,finish_reason:m,logprobs:S,message:{...M,role:I,content:C,refusal:d.refusal??null,tool_calls:A.map((N,D)=>{const{function:k,type:U,id:O,...q}=N,{arguments:J,name:Y,...W}=k||{};if(O==null)throw new Se(`missing choices[${y}].tool_calls[${D}].id
${Bf(t)}`);if(U==null)throw new Se(`missing choices[${y}].tool_calls[${D}].type
${Bf(t)}`);if(Y==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.name
${Bf(t)}`);if(J==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.arguments
${Bf(t)}`);return{...q,id:O,type:U,function:{...W,name:Y,arguments:J}}})}}:{...b,message:{...M,content:C,role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}),created:r,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return I4(h,e)}function Bf(t){return JSON.stringify(t)}class $d extends pu{static fromReadableStream(e){const n=new $d(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,i){const r=new $d(n),a={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}}let i_=class extends ye{constructor(){super(...arguments),this.messages=new IN(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(oe`/chat/completions/${e}`,n)}update(e,n,i){return this._client.post(oe`/chat/completions/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/chat/completions",yt,{query:e,...n})}delete(e,n){return this._client.delete(oe`/chat/completions/${e}`,n)}parse(e,n){return k4(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>e_(i,e))}runTools(e,n){return e.stream?$d.runTools(this._client,e,n):n_.runTools(this._client,e,n)}stream(e,n){return pu.createChatCompletion(this._client,e,n)}};i_.Messages=IN;class o_ extends ye{constructor(){super(...arguments),this.completions=new i_(this._client)}}o_.Completions=i_;const QN=Symbol("brand.privateNullableHeaders");function*z4(t){if(!t)return;if(QN in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():RC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=RC(i[1])?i[1]:[i[1]];let u=!1;for(const c of a)c!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,c])}}const pe=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,u]of z4(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),u===null?(e.delete(a),n.add(c)):(e.append(a,u),n.delete(c))}}return{[QN]:!0,values:e,nulls:n}};class ZN extends ye{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:pe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class eI extends ye{create(e,n){return this._client.post("/audio/transcriptions",es({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class tI extends ye{create(e,n){return this._client.post("/audio/translations",es({body:e,...n,__metadata:{model:e.model}},this._client))}}let Vu=class extends ye{constructor(){super(...arguments),this.transcriptions=new eI(this._client),this.translations=new tI(this._client),this.speech=new ZN(this._client)}};Vu.Transcriptions=eI;Vu.Translations=tI;Vu.Speech=ZN;class nI extends ye{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",yt,{query:e,...n})}cancel(e,n){return this._client.post(oe`/batches/${e}/cancel`,n)}}class iI extends ye{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/assistants/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",yt,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(oe`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let oI=class extends ye{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class rI extends ye{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Th=class extends ye{constructor(){super(...arguments),this.sessions=new oI(this._client),this.transcriptionSessions=new rI(this._client)}};Th.Sessions=oI;Th.TranscriptionSessions=rI;class sI extends ye{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(oe`/chatkit/sessions/${e}/cancel`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let aI=class extends ye{retrieve(e,n){return this._client.get(oe`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Pd,{query:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(oe`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},i){return this._client.getAPIList(oe`/chatkit/threads/${e}/items`,Pd,{query:n,...i,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},i?.headers])})}};class Ch extends ye{constructor(){super(...arguments),this.sessions=new sI(this._client),this.threads=new aI(this._client)}}Ch.Sessions=sI;Ch.Threads=aI;class lI extends ye{create(e,n,i){return this._client.post(oe`/threads/${e}/messages`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{thread_id:r}=n;return this._client.get(oe`/threads/${r}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/messages/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/threads/${e}/messages`,yt,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{thread_id:r}=n;return this._client.delete(oe`/threads/${r}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class uI extends ye{retrieve(e,n,i){const{thread_id:r,run_id:a,...u}=n;return this._client.get(oe`/threads/${r}/runs/${a}/steps/${e}`,{query:u,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n,i){const{thread_id:r,...a}=n;return this._client.getAPIList(oe`/threads/${r}/runs/${e}/steps`,yt,{query:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}const q4=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var J4={};const Ws=t=>{if(typeof globalThis.process<"u")return J4?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Ot,Gr,jv,Ei,ad,ei,Vr,ca,$r,Hd,vn,ld,ud,su,Xl,Wl,qC,JC,jC,KC,YC,XC,WC;class au extends t_{constructor(){super(...arguments),Ot.add(this),jv.set(this,[]),Ei.set(this,{}),ad.set(this,{}),ei.set(this,void 0),Vr.set(this,void 0),ca.set(this,void 0),$r.set(this,void 0),Hd.set(this,void 0),vn.set(this,void 0),ld.set(this,void 0),ud.set(this,void 0),su.set(this,void 0)}[(jv=new WeakMap,Ei=new WeakMap,ad=new WeakMap,ei=new WeakMap,Vr=new WeakMap,ca=new WeakMap,$r=new WeakMap,Hd=new WeakMap,vn=new WeakMap,ld=new WeakMap,ud=new WeakMap,su=new WeakMap,Ot=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Gr;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=xi.fromReadableStream(e,this.controller);for await(const a of r)V(this,Ot,"m",Xl).call(this,a);if(r.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,Ot,"m",Wl).call(this))}toReadableStream(){return new xi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,i,r){const a=new Gr;return a._run(()=>a._runToolAssistantStream(e,n,i,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,i,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},c=await e.submitToolOutputs(n,u,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,Ot,"m",Xl).call(this,h);if(c.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,Ot,"m",Wl).call(this))}static createThreadAssistantStream(e,n,i){const r=new Gr;return r._run(()=>r._threadAssistantStream(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,i,r){const a=new Gr;return a._run(()=>a._runAssistantStream(e,n,i,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return V(this,ld,"f")}currentRun(){return V(this,ud,"f")}currentMessageSnapshot(){return V(this,ei,"f")}currentRunStepSnapshot(){return V(this,su,"f")}async finalRunSteps(){return await this.done(),Object.values(V(this,Ei,"f"))}async finalMessages(){return await this.done(),Object.values(V(this,ad,"f"))}async finalRun(){if(await this.done(),!V(this,Vr,"f"))throw Error("Final run was not received.");return V(this,Vr,"f")}async _createThreadAssistantStream(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},u=await e.createAndRun(a,{...i,signal:this.controller.signal});this._connected();for await(const c of u)V(this,Ot,"m",Xl).call(this,c);if(u.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,Ot,"m",Wl).call(this))}async _createAssistantStream(e,n,i,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},c=await e.create(n,u,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,Ot,"m",Xl).call(this,h);if(c.controller.signal?.aborted)throw new Gn;return this._addRun(V(this,Ot,"m",Wl).call(this))}static accumulateDelta(e,n){for(const[i,r]of Object.entries(n)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let a=e[i];if(a==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Dg(a)&&Dg(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...r);continue}for(const u of r){if(!Dg(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const c=u.index;if(c==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(u):a[c]=this.accumulateDelta(h,u)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${a}`);e[i]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,i){return await this._createThreadAssistantStream(n,e,i)}async _runAssistantStream(e,n,i,r){return await this._createAssistantStream(n,e,i,r)}async _runToolAssistantStream(e,n,i,r){return await this._createToolAssistantStream(n,e,i,r)}}Gr=au,Xl=function(e){if(!this.ended)switch(Ce(this,ld,e),V(this,Ot,"m",jC).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":V(this,Ot,"m",WC).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":V(this,Ot,"m",JC).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":V(this,Ot,"m",qC).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Wl=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");if(!V(this,Vr,"f"))throw Error("Final run has not been received");return V(this,Vr,"f")},qC=function(e){const[n,i]=V(this,Ot,"m",YC).call(this,e,V(this,ei,"f"));Ce(this,ei,n),V(this,ad,"f")[n.id]=n;for(const r of i){const a=n.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,u=n.content[r.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=V(this,ca,"f")){if(V(this,$r,"f"))switch(V(this,$r,"f").type){case"text":this._emit("textDone",V(this,$r,"f").text,V(this,ei,"f"));break;case"image_file":this._emit("imageFileDone",V(this,$r,"f").image_file,V(this,ei,"f"));break}Ce(this,ca,r.index)}Ce(this,$r,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(V(this,ca,"f")!==void 0){const r=e.data.content[V(this,ca,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,V(this,ei,"f"));break;case"text":this._emit("textDone",r.text,V(this,ei,"f"));break}}V(this,ei,"f")&&this._emit("messageDone",e.data),Ce(this,ei,void 0)}},JC=function(e){const n=V(this,Ot,"m",KC).call(this,e);switch(Ce(this,su,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of i.step_details.tool_calls)a.index==V(this,Hd,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(V(this,vn,"f")&&this._emit("toolCallDone",V(this,vn,"f")),Ce(this,Hd,a.index),Ce(this,vn,n.step_details.tool_calls[a.index]),V(this,vn,"f")&&this._emit("toolCallCreated",V(this,vn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ce(this,su,void 0),e.data.step_details.type=="tool_calls"&&V(this,vn,"f")&&(this._emit("toolCallDone",V(this,vn,"f")),Ce(this,vn,void 0)),this._emit("runStepDone",e.data,n);break}},jC=function(e){V(this,jv,"f").push(e),this._emit("event",e)},KC=function(e){switch(e.event){case"thread.run.step.created":return V(this,Ei,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=V(this,Ei,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=Gr.accumulateDelta(n,i.delta);V(this,Ei,"f")[e.data.id]=r}return V(this,Ei,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":V(this,Ei,"f")[e.data.id]=e.data;break}if(V(this,Ei,"f")[e.data.id])return V(this,Ei,"f")[e.data.id];throw new Error("No snapshot available")},YC=function(e,n){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in n.content){let u=n.content[a.index];n.content[a.index]=V(this,Ot,"m",XC).call(this,a,u)}else n.content[a.index]=a,i.push(a);return[n,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},XC=function(e,n){return Gr.accumulateDelta(n,e)},WC=function(e){switch(Ce(this,ud,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ce(this,Vr,e.data),V(this,vn,"f")&&(this._emit("toolCallDone",V(this,vn,"f")),Ce(this,vn,void 0));break}};let r_=class extends ye{constructor(){super(...arguments),this.steps=new uI(this._client)}create(e,n,i){const{include:r,...a}=n;return this._client.post(oe`/threads/${e}/runs`,{query:{include:r},body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}retrieve(e,n,i){const{thread_id:r}=n;return this._client.get(oe`/threads/${r}/runs/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/runs/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/threads/${e}/runs`,yt,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{thread_id:r}=n;return this._client.post(oe`/threads/${r}/runs/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n,i);return await this.poll(r.id,{thread_id:e},i)}createAndStream(e,n,i){return au.createAssistantStream(e,this._client.beta.threads.runs,n,i)}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:u}=await this.retrieve(e,n,{...i,headers:{...i?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await Hu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,i){return au.createAssistantStream(e,this._client.beta.threads.runs,n,i)}submitToolOutputs(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,i){const r=await this.submitToolOutputs(e,n,i);return await this.poll(r.id,n,i)}submitToolOutputsStream(e,n,i){return au.createToolAssistantStream(e,this._client.beta.threads.runs,n,i)}};r_.Steps=uI;class xh extends ye{constructor(){super(...arguments),this.runs=new r_(this._client),this.messages=new lI(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/threads/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n){return this._client.delete(oe`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const i=await this.createAndRun(e,n);return await this.runs.poll(i.id,{thread_id:i.thread_id},n)}createAndRunStream(e,n){return au.createThreadAssistantStream(e,this._client.beta.threads,n)}}xh.Runs=r_;xh.Messages=lI;class Oa extends ye{constructor(){super(...arguments),this.realtime=new Th(this._client),this.chatkit=new Ch(this._client),this.assistants=new iI(this._client),this.threads=new xh(this._client)}}Oa.Realtime=Th;Oa.ChatKit=Ch;Oa.Assistants=iI;Oa.Threads=xh;class cI extends ye{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}let fI=class extends ye{retrieve(e,n,i){const{container_id:r}=n;return this._client.get(oe`/containers/${r}/files/${e}/content`,{...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}},s_=class extends ye{constructor(){super(...arguments),this.content=new fI(this._client)}create(e,n,i){return this._client.post(oe`/containers/${e}/files`,es({body:n,...i},this._client))}retrieve(e,n,i){const{container_id:r}=n;return this._client.get(oe`/containers/${r}/files/${e}`,i)}list(e,n={},i){return this._client.getAPIList(oe`/containers/${e}/files`,yt,{query:n,...i})}delete(e,n,i){const{container_id:r}=n;return this._client.delete(oe`/containers/${r}/files/${e}`,{...i,headers:pe([{Accept:"*/*"},i?.headers])})}};s_.Content=fI;class a_ extends ye{constructor(){super(...arguments),this.files=new s_(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",yt,{query:e,...n})}delete(e,n){return this._client.delete(oe`/containers/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}}a_.Files=s_;class dI extends ye{create(e,n,i){const{include:r,...a}=n;return this._client.post(oe`/conversations/${e}/items`,{query:{include:r},body:a,...i})}retrieve(e,n,i){const{conversation_id:r,...a}=n;return this._client.get(oe`/conversations/${r}/items/${e}`,{query:a,...i})}list(e,n={},i){return this._client.getAPIList(oe`/conversations/${e}/items`,Pd,{query:n,...i})}delete(e,n,i){const{conversation_id:r}=n;return this._client.delete(oe`/conversations/${r}/items/${e}`,i)}}class l_ extends ye{constructor(){super(...arguments),this.items=new dI(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/conversations/${e}`,n)}update(e,n,i){return this._client.post(oe`/conversations/${e}`,{body:n,...i})}delete(e,n){return this._client.delete(oe`/conversations/${e}`,n)}}l_.Items=dI;class hI extends ye{create(e,n){const i=!!e.encoding_format;let r=i?e.encoding_format:"base64";i&&Dt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return i?a:(Dt(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(c=>{const h=c.embedding;c.embedding=q4(h)}),u)))}}class pI extends ye{retrieve(e,n,i){const{eval_id:r,run_id:a}=n;return this._client.get(oe`/evals/${r}/runs/${a}/output_items/${e}`,i)}list(e,n,i){const{eval_id:r,...a}=n;return this._client.getAPIList(oe`/evals/${r}/runs/${e}/output_items`,yt,{query:a,...i})}}class u_ extends ye{constructor(){super(...arguments),this.outputItems=new pI(this._client)}create(e,n,i){return this._client.post(oe`/evals/${e}/runs`,{body:n,...i})}retrieve(e,n,i){const{eval_id:r}=n;return this._client.get(oe`/evals/${r}/runs/${e}`,i)}list(e,n={},i){return this._client.getAPIList(oe`/evals/${e}/runs`,yt,{query:n,...i})}delete(e,n,i){const{eval_id:r}=n;return this._client.delete(oe`/evals/${r}/runs/${e}`,i)}cancel(e,n,i){const{eval_id:r}=n;return this._client.post(oe`/evals/${r}/runs/${e}`,i)}}u_.OutputItems=pI;class c_ extends ye{constructor(){super(...arguments),this.runs=new u_(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/evals/${e}`,n)}update(e,n,i){return this._client.post(oe`/evals/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/evals",yt,{query:e,...n})}delete(e,n){return this._client.delete(oe`/evals/${e}`,n)}}c_.Runs=u_;let mI=class extends ye{create(e,n){return this._client.post("/files",es({body:e,...n},this._client))}retrieve(e,n){return this._client.get(oe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",yt,{query:e,...n})}delete(e,n){return this._client.delete(oe`/files/${e}`,n)}content(e,n){return this._client.get(oe`/files/${e}/content`,{...n,headers:pe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:i=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!r.has(u.status);)if(await Hu(n),u=await this.retrieve(e),Date.now()-a>i)throw new Yy({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return u}};class gI extends ye{}let vI=class extends ye{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class f_ extends ye{constructor(){super(...arguments),this.graders=new vI(this._client)}}f_.Graders=vI;class yI extends ye{create(e,n,i){return this._client.getAPIList(oe`/fine_tuning/checkpoints/${e}/permissions`,Eh,{body:n,method:"post",...i})}retrieve(e,n={},i){return this._client.get(oe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...i})}delete(e,n,i){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(oe`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}}let d_=class extends ye{constructor(){super(...arguments),this.permissions=new yI(this._client)}};d_.Permissions=yI;class _I extends ye{list(e,n={},i){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/checkpoints`,yt,{query:n,...i})}}class h_ extends ye{constructor(){super(...arguments),this.checkpoints=new _I(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",yt,{query:e,...n})}cancel(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},i){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/events`,yt,{query:n,...i})}pause(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/resume`,n)}}h_.Checkpoints=_I;class Pa extends ye{constructor(){super(...arguments),this.methods=new gI(this._client),this.jobs=new h_(this._client),this.checkpoints=new d_(this._client),this.alpha=new f_(this._client)}}Pa.Methods=gI;Pa.Jobs=h_;Pa.Checkpoints=d_;Pa.Alpha=f_;class SI extends ye{}class p_ extends ye{constructor(){super(...arguments),this.graderModels=new SI(this._client)}}p_.GraderModels=SI;class bI extends ye{createVariation(e,n){return this._client.post("/images/variations",es({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",es({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class wI extends ye{retrieve(e,n){return this._client.get(oe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Eh,e)}delete(e,n){return this._client.delete(oe`/models/${e}`,n)}}class EI extends ye{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class TI extends ye{accept(e,n,i){return this._client.post(oe`/realtime/calls/${e}/accept`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}hangup(e,n){return this._client.post(oe`/realtime/calls/${e}/hangup`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}refer(e,n,i){return this._client.post(oe`/realtime/calls/${e}/refer`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}reject(e,n={},i){return this._client.post(oe`/realtime/calls/${e}/reject`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}}class CI extends ye{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Ah extends ye{constructor(){super(...arguments),this.clientSecrets=new CI(this._client),this.calls=new TI(this._client)}}Ah.ClientSecrets=CI;Ah.Calls=TI;function j4(t,e){return!e||!Y4(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(i=>({...i,parsed:null}))}:n)}:xI(t,e)}function xI(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Q4(e,r)};if(r.type==="message"){const a=r.content.map(u=>u.type==="output_text"?{...u,parsed:K4(e,u.text)}:u);return{...r,content:a}}return r}),i=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Kv(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const r of i.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),i}function K4(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function Y4(t){return!!Zy(t.text?.format)}function X4(t){return t?.$brand==="auto-parseable-tool"}function W4(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Q4(t,e){const n=W4(t.tools??[],e.name);return{...e,...e,parsed_arguments:X4(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Kv(t){const e=[];for(const n of t.output)if(n.type==="message")for(const i of n.content)i.type==="output_text"&&e.push(i.text);t.output_text=e.join("")}var Qs,Ff,Zo,$f,QC,ZC,ex,tx;class m_ extends t_{constructor(e){super(),Qs.add(this),Ff.set(this,void 0),Zo.set(this,void 0),$f.set(this,void 0),Ce(this,Ff,e)}static createResponse(e,n,i){const r=new m_(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,Qs,"m",QC).call(this);let a,u=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),u=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const c of a)V(this,Qs,"m",ZC).call(this,c,u);if(a.controller.signal?.aborted)throw new Gn;return V(this,Qs,"m",ex).call(this)}[(Ff=new WeakMap,Zo=new WeakMap,$f=new WeakMap,Qs=new WeakSet,QC=function(){this.ended||Ce(this,Zo,void 0)},ZC=function(n,i){if(this.ended)return;const r=(u,c)=>{(i==null||c.sequence_number>i)&&this._emit(u,c)},a=V(this,Qs,"m",tx).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const u=a.output[n.output_index];if(!u)throw new Se(`missing output at index ${n.output_index}`);if(u.type==="message"){const c=u.content[n.content_index];if(!c)throw new Se(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const u=a.output[n.output_index];if(!u)throw new Se(`missing output at index ${n.output_index}`);u.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:u.arguments});break}default:r(n.type,n);break}},ex=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,Zo,"f");if(!n)throw new Se("request ended without sending any events");Ce(this,Zo,void 0);const i=Z4(n,V(this,Ff,"f"));return Ce(this,$f,i),i},tx=function(n){let i=V(this,Zo,"f");if(!i){if(n.type!=="response.created")throw new Se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return i=Ce(this,Zo,n.response),i}switch(n.type){case"response.output_item.added":{i.output.push(n.item);break}case"response.content_part.added":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);const a=r.type,u=n.part;a==="message"&&u.type!=="reasoning_text"?r.content.push(u):a==="reasoning"&&u.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(u));break}case"response.output_text.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=r.content?.[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Se(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Ce(this,Zo,n.response);break}}return i},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=V(this,$f,"f");if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}}function Z4(t,e){return j4(t,e)}class AI extends ye{list(e,n={},i){return this._client.getAPIList(oe`/responses/${e}/input_items`,yt,{query:n,...i})}}class RI extends ye{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Rh extends ye{constructor(){super(...arguments),this.inputItems=new AI(this._client),this.inputTokens=new RI(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Kv(i),i))}retrieve(e,n={},i){return this._client.get(oe`/responses/${e}`,{query:n,...i,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Kv(r),r))}delete(e,n){return this._client.delete(oe`/responses/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(i=>xI(i,e))}stream(e,n){return m_.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(oe`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}Rh.InputItems=AI;Rh.InputTokens=RI;class MI extends ye{create(e,n,i){return this._client.post(oe`/uploads/${e}/parts`,es({body:n,...i},this._client))}}class g_ extends ye{constructor(){super(...arguments),this.parts=new MI(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(oe`/uploads/${e}/cancel`,n)}complete(e,n,i){return this._client.post(oe`/uploads/${e}/complete`,{body:n,...i})}}g_.Parts=MI;const e6=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};class NI extends ye{create(e,n,i){return this._client.post(oe`/vector_stores/${e}/file_batches`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:r}=n;return this._client.get(oe`/vector_stores/${r}/file_batches/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{vector_store_id:r}=n;return this._client.post(oe`/vector_stores/${r}/file_batches/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n);return await this.poll(e,r.id,i)}listFiles(e,n,i){const{vector_store_id:r,...a}=n;return this._client.getAPIList(oe`/vector_stores/${r}/file_batches/${e}/files`,yt,{query:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:u}=await this.retrieve(n,{vector_store_id:e},{...i,headers:r}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await Hu(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:i=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,u=Math.min(a,n.length),c=this._client,h=n.values(),d=[...i];async function m(S){for(let b of S){const C=await c.files.create({file:b,purpose:"assistants"},r);d.push(C.id)}}const y=Array(u).fill(h).map(m);return await e6(y),await this.createAndPoll(e,{file_ids:d})}}class II extends ye{create(e,n,i){return this._client.post(oe`/vector_stores/${e}/files`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:r}=n;return this._client.get(oe`/vector_stores/${r}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{vector_store_id:r,...a}=n;return this._client.post(oe`/vector_stores/${r}/files/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/vector_stores/${e}/files`,yt,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{vector_store_id:r}=n;return this._client.delete(oe`/vector_stores/${r}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n,i);return await this.poll(e,r.id,i)}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...i,headers:r}).withResponse(),u=a.data;switch(u.status){case"in_progress":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await Hu(c);break;case"failed":case"completed":return u}}}async upload(e,n,i){const r=await this._client.files.create({file:n,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,n,i){const r=await this.upload(e,n,i);return await this.poll(e,r.id,i)}content(e,n,i){const{vector_store_id:r}=n;return this._client.getAPIList(oe`/vector_stores/${r}/files/${e}/content`,Eh,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class Mh extends ye{constructor(){super(...arguments),this.files=new II(this._client),this.fileBatches=new NI(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/vector_stores/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",yt,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(oe`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,i){return this._client.getAPIList(oe`/vector_stores/${e}/search`,Eh,{body:n,method:"post",...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}Mh.Files=II;Mh.FileBatches=NI;class DI extends ye{create(e,n){return this._client.post("/videos",$C({body:e,...n},this._client))}retrieve(e,n){return this._client.get(oe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Pd,{query:e,...n})}delete(e,n){return this._client.delete(oe`/videos/${e}`,n)}downloadContent(e,n={},i){return this._client.get(oe`/videos/${e}/content`,{query:n,...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}remix(e,n,i){return this._client.post(oe`/videos/${e}/remix`,$C({body:n,...i},this._client))}}var sa,OI,cd;class PI extends ye{constructor(){super(...arguments),sa.add(this)}async unwrap(e,n,i=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,i,r),JSON.parse(e)}async verifySignature(e,n,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");V(this,sa,"m",OI).call(this,i);const a=pe([n]).values,u=V(this,sa,"m",cd).call(this,a,"webhook-signature"),c=V(this,sa,"m",cd).call(this,a,"webhook-timestamp"),h=V(this,sa,"m",cd).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new Vl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>r)throw new Vl("Webhook timestamp is too old");if(d>m+r)throw new Vl("Webhook timestamp is too new");const y=u.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),S=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),b=h?`${h}.${c}.${e}`:`${c}.${e}`,C=await crypto.subtle.importKey("raw",S,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of y)try{const A=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",C,A,new TextEncoder().encode(b)))return}catch{continue}throw new Vl("The given webhook signature does not match the expected signature")}}sa=new WeakSet,OI=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},cd=function(e,n){if(!e)throw new Error("Headers are required");const i=e.get(n);if(i==null)throw new Error(`Missing required header: ${n}`);return i};var Yv,v_,fd,kI;class Ie{constructor({baseURL:e=Ws("OPENAI_BASE_URL"),apiKey:n=Ws("OPENAI_API_KEY"),organization:i=Ws("OPENAI_ORG_ID")??null,project:r=Ws("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ws("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if(Yv.add(this),fd.set(this,void 0),this.completions=new cI(this),this.chat=new o_(this),this.embeddings=new hI(this),this.files=new mI(this),this.images=new bI(this),this.audio=new Vu(this),this.moderations=new EI(this),this.models=new wI(this),this.fineTuning=new Pa(this),this.graders=new p_(this),this.vectorStores=new Mh(this),this.webhooks=new PI(this),this.beta=new Oa(this),this.batches=new nI(this),this.uploads=new g_(this),this.responses=new Rh(this),this.realtime=new Ah(this),this.conversations=new l_(this),this.evals=new c_(this),this.containers=new a_(this),this.videos=new DI(this),n===void 0)throw new Se("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:i,project:r,webhookSecret:a,...u,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&t4())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??v_.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=BC(c.logLevel,"ClientOptions.logLevel",this)??BC(Ws("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??s4(),Ce(this,fd,l4),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=i,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return pe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return p4(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${oa}`}defaultIdempotencyKey(){return`stainless-node-retry-${oN()}`}makeStatusError(e,n,i,r){return Pt.generate(e,n,i,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(i){throw i instanceof Se?i:new Se(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof n!="string"||!n)throw new Se(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,i){const r=!V(this,Yv,"m",kI).call(this)&&i||this.baseURL,a=X3(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return W3(u)||(n={...u,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new wh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:u,url:c,timeout:h}=await this.buildRequest(r,{retryCount:a-n});await this.prepareRequest(u,{url:c,options:r});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Dt(this).debug(`[${d}] sending request`,Fr({retryOfRequestLogID:i,method:r.method,url:c,options:r,headers:u.headers})),r.signal?.aborted)throw new Gn;const S=new AbortController,b=await this.fetchWithTimeout(c,u,h,S).catch(Uv),C=Date.now();if(b instanceof globalThis.Error){const M=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Gn;const I=Lv(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Dt(this).info(`[${d}] connection ${I?"timed out":"failed"} - ${M}`),Dt(this).debug(`[${d}] connection ${I?"timed out":"failed"} (${M})`,Fr({retryOfRequestLogID:i,url:c,durationMs:C-y,message:b.message})),this.retryRequest(r,n,i??d);throw Dt(this).info(`[${d}] connection ${I?"timed out":"failed"} - error; no more retries left`),Dt(this).debug(`[${d}] connection ${I?"timed out":"failed"} (error; no more retries left)`,Fr({retryOfRequestLogID:i,url:c,durationMs:C-y,message:b.message})),I?new Yy:new Sh({cause:b})}const x=[...b.headers.entries()].filter(([M])=>M==="x-request-id").map(([M,I])=>", "+M+": "+JSON.stringify(I)).join(""),A=`[${d}${m}${x}] ${u.method} ${c} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${C-y}ms`;if(!b.ok){const M=await this.shouldRetry(b);if(n&&M){const O=`retrying, ${n} attempts remaining`;return await a4(b.body),Dt(this).info(`${A} - ${O}`),Dt(this).debug(`[${d}] response error (${O})`,Fr({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:C-y})),this.retryRequest(r,n,i??d,b.headers)}const I=M?"error; no more retries left":"error; not retryable";Dt(this).info(`${A} - ${I}`);const N=await b.text().catch(O=>Uv(O).message),D=e4(N),k=D?void 0:N;throw Dt(this).debug(`[${d}] response error (${I})`,Fr({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,message:k,durationMs:Date.now()-y})),this.makeStatusError(b.status,D,k,b.headers)}return Dt(this).info(A),Dt(this).debug(`[${d}] response start`,Fr({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:C-y})),{response:b,options:r,controller:S,requestLogID:d,retryOfRequestLogID:i,startTime:y}}getAPIList(e,n,i){return this.requestAPIList(n,{method:"get",path:e,...i})}requestAPIList(e,n){const i=this.makeRequest(n,null,void 0);return new E4(this,i,e)}async fetchWithTimeout(e,n,i,r){const{signal:a,method:u,...c}=n||{};a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:r.signal,...d?{duplex:"half"}:{},method:"GET",...c};u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){let a;const u=r?.get("retry-after-ms");if(u){const h=parseFloat(u);Number.isNaN(h)||(a=h)}const c=r?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await Hu(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const i={...e},{method:r,path:a,query:u,defaultBaseURL:c}=i,h=this.buildURL(a,u,c);"timeout"in i&&Z3("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:i}),y=await this.buildHeaders({options:e,method:r,bodyHeaders:d,retryCount:n});return{req:{method:r,headers:y,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...i.fetchOptions??{}},url:h,timeout:i.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=pe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...r4(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=pe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:vN(e)}:V(this,fd,"f").call(this,{body:e,headers:i})}}v_=Ie,fd=new WeakMap,Yv=new WeakSet,kI=function(){return this.baseURL!=="https://api.openai.com/v1"};Ie.OpenAI=v_;Ie.DEFAULT_TIMEOUT=6e5;Ie.OpenAIError=Se;Ie.APIError=Pt;Ie.APIConnectionError=Sh;Ie.APIConnectionTimeoutError=Yy;Ie.APIUserAbortError=Gn;Ie.NotFoundError=lN;Ie.ConflictError=uN;Ie.RateLimitError=fN;Ie.BadRequestError=rN;Ie.AuthenticationError=sN;Ie.InternalServerError=dN;Ie.PermissionDeniedError=aN;Ie.UnprocessableEntityError=cN;Ie.InvalidWebhookSignatureError=Vl;Ie.toFile=R4;Ie.Completions=cI;Ie.Chat=o_;Ie.Embeddings=hI;Ie.Files=mI;Ie.Images=bI;Ie.Audio=Vu;Ie.Moderations=EI;Ie.Models=wI;Ie.FineTuning=Pa;Ie.Graders=p_;Ie.VectorStores=Mh;Ie.Webhooks=PI;Ie.Beta=Oa;Ie.Batches=nI;Ie.Uploads=g_;Ie.Responses=Rh;Ie.Realtime=Ah;Ie.Conversations=l_;Ie.Evals=c_;Ie.Containers=a_;Ie.Videos=DI;class nx extends Error{}const LI=["gpt-4o-mini","gpt-5.1","gpt-5-mini","gpt-5-nano","gpt-5"];class Gd{static getApiKey=null;static setApiKey=null;static getClient(){const e=this.getApiKey?.()||"";if(!e)throw new nx("No OpenAI API key set");return new Ie({apiKey:e,dangerouslyAllowBrowser:!0})}static async txt2txt(e,n,i="gpt-4o-mini",r){try{const a=this.getClient(),u=[];n&&u.push({role:"system",content:n}),e&&u.push({role:"user",content:[{type:"input_text",text:e}]}),r&&console.log(r);const c={model:i,input:u};console.log("GPT Payload:",c);const d=(await a.responses.create(c)).output_text;return console.log("GPT Response TEXT:",{text:d}),d}catch(a){if(console.error("ChatGPT Error:",a),(a?.message||"").includes("Incorrect API key provided")||a instanceof nx){const c=window.prompt("Your OpenAI API key is missing or invalid. Please enter a valid key:");return c?this.setApiKey?.(c):console.warn("User did not provide a valid API key."),null}throw a}}}class t6{rootHandle=null;project=null;data={};constructor(e=null,n=null){this.rootHandle=e,this.project=n,Li(this)}async load(){if(this.rootHandle)try{const e={};for await(const n of this.rootHandle.values()){if(n.kind!=="directory")continue;const i=n.name,r=n,a={};for await(const u of r.values()){if(u.kind!=="directory")continue;const c=u.name,h=u,d=[];for await(const m of h.values()){if(m.kind!=="file"||!m.name.match(/\.(png|jpg|jpeg|webp|gif)$/i))continue;const y=m,S=`${i}/${c}/${y.name}`;d.push(new n6(y,h,S,this))}a[c]=d}e[i]=a}we(()=>{this.data=e})}catch(e){console.error("Error loading artbook:",e),we(()=>{this.data={}})}}getTag(e){if(!e)return null;const n=e.split("/");if(n.length<3)return null;const[i,r,a]=n,u=this.data[i];if(!u)return null;const c=u[r];return c&&c.find(d=>d.handle.name===a)||null}log(){console.log(Hn(this))}getJson(){const e={};for(const[n,i]of Object.entries(this.data)){e[n]={};for(const[r,a]of Object.entries(i))e[n][r]=a.map(u=>u.handle.name)}return e}}class n6{handle;folder;image;artInfo=null;path;artbook;constructor(e,n,i,r=null){this.handle=e,this.folder=n,this.image=new mo(e,this.folder),this.path=i,this.artbook=r,Li(this)}async getArtInfo(){if(this.artInfo)return this.artInfo;try{const e=await Zr.create(this.folder,this.handle.name+".json");we(()=>{this.artInfo=e})}catch(e){console.warn("Unable to load art info for:",this.handle.name,e)}return this.artInfo}}const $g=30;class i6{doc;fcpxml;resources;project;spine;timelineName;constructor(e="Test RESOLVE",n=1e4){this.timelineName=e,this.doc=document.implementation.createDocument("","",null),this.fcpxml=this.doc.createElement("fcpxml"),this.fcpxml.setAttribute("version","1.10"),this.doc.appendChild(this.fcpxml),this.resources=this.doc.createElement("resources"),this.fcpxml.appendChild(this.resources);const i=this.doc.createElement("format");i.setAttribute("id","r0"),i.setAttribute("name",`FFVideoFormat1080p${$g}`),i.setAttribute("frameDuration",`1/${$g}s`),i.setAttribute("width","1080"),i.setAttribute("height","1920"),this.resources.appendChild(i);const r=this.doc.createElement("library");this.fcpxml.appendChild(r);const a=this.doc.createElement("event");a.setAttribute("name","Auto Import"),r.appendChild(a),this.project=this.doc.createElement("project"),this.project.setAttribute("name",this.timelineName),a.appendChild(this.project);const u=this.doc.createElement("sequence");u.setAttribute("format","r0"),u.setAttribute("duration",`${n}/${$g}s`),u.setAttribute("tcStart","0/1s"),u.setAttribute("tcFormat","NDF"),this.project.appendChild(u),this.spine=this.doc.createElement("spine"),u.appendChild(this.spine);const c=this.doc.createElement("effect");c.setAttribute("uid",".../Generators.localized/Solids.localized/Vivid.localized/Vivid.motn"),c.setAttribute("name","Vivid"),c.setAttribute("id","r1"),this.resources.appendChild(c);const h=this.doc.createElement("effect");h.setAttribute("uid",".../Titles.localized/Lower Thirds.localized/Basic Lower Third.localized/Basic Lower Third.moti"),h.setAttribute("name","Basic Title"),h.setAttribute("id","r2"),this.resources.appendChild(h)}addAsset(e,n,i=!1,r=5){const a=this.doc.createElement("asset");a.setAttribute("format","r0"),a.setAttribute("src",`file://localhost/${e.replace(/\\/g,"/")}`),a.setAttribute("start","0/1s"),a.setAttribute("name",n),i&&(a.setAttribute("duration",`${r}/1s`),a.setAttribute("hasVideo","1"));const c=this.resources.children.length;return a.setAttribute("id",`r${c}`),this.resources.appendChild(a),a.getAttribute("id")}appendClip(e,n,i,r,a=0){const u=this.doc.createElement("video");u.setAttribute("start","0/24s"),u.setAttribute("ref",e),u.setAttribute("name",n),u.setAttribute("enabled","1"),u.setAttribute("lane",a.toString()),u.setAttribute("duration",`${i}/1s`),u.setAttribute("offset",`${r}/1s`),this.spine.appendChild(u)}appendText(e,n,i,r=3,a="Rich"){const u=this.doc.createElement("title");u.setAttribute("start","1/24s"),u.setAttribute("ref","r2"),u.setAttribute("name",a),u.setAttribute("lane",r.toString()),u.setAttribute("offset",`${i}/1s`),u.setAttribute("duration",`${n}/1s`),u.setAttribute("enabled","1");const c=this.doc.createElement("text");c.setAttribute("roll-up-height","0");const h=this.doc.createElement("text-style");h.setAttribute("ref","ts0"),h.textContent=e,c.appendChild(h),u.appendChild(c);const d=this.doc.createElement("text-style-def");d.setAttribute("id","ts0");const m=this.doc.createElement("text-style");m.setAttribute("fontSize","32"),m.setAttribute("italic","0"),m.setAttribute("fontColor","1 1 1 1"),m.setAttribute("bold","1"),m.setAttribute("lineSpacing","0"),m.setAttribute("font","Open Sans"),m.setAttribute("alignment","center"),m.setAttribute("strokeWidth","0"),m.setAttribute("strokeColor","0 0 0 1"),d.appendChild(m),u.appendChild(d);const y=this.doc.createElement("adjust-transform");y.setAttribute("scale","1 1"),y.setAttribute("anchor","0 0"),y.setAttribute("position","0 1"),u.appendChild(y),this.spine.appendChild(u)}getXmlString(){let n=new XMLSerializer().serializeToString(this.doc);return n=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fcpxml>
`+n,n}log(){const n=/(>)(<)(\/*)/g;let i=this.getXmlString().replace(n,`$1\r
$2$3`),r=0;const a=i.split(`\r
`).map(u=>{let c="";u.match(/<\/\w/)&&(r-=1);for(let h=0;h<r;h++)c+="  ";return u.match(/<[^!?].*>[^<]*$/)&&(r+=1),c+u}).join(`\r
`);console.log(a)}async save(e){try{const i=await(await e.getFileHandle(this.timelineName+".xml",{create:!0})).createWritable();await i.write(this.getXmlString()),await i.close()}catch(n){console.error("Failed to save file",n)}}}const o6={tags:[],shotsjson:"",script:"",split_shots_prompt:{preset:"split_shots"}};class ix{folder;sceneJson=null;shots=[];project;is_generating_shotsjson=!1;is_generating_tags=!1;is_generating_all_shot_images=!1;split_shots_prompt=null;path="";constructor(e,n){this.folder=e,this.project=n,this.path="/SCENES/"+e.name,Li(this)}async load(){try{this.sceneJson=await Zr.create(this.folder,"sceneinfo.json",o6),this.shots=[];for await(const e of this.folder.values())if(e.kind==="directory"){const n=new AC(e,this);await n.load(),this.shots.push(n)}}catch(e){console.error("Error loading scene:",e),this.sceneJson=null,this.shots=[]}}removeTag(e){this.sceneJson?.data?.tags&&(this.sceneJson.data.tags=this.sceneJson.data.tags.filter(n=>n!==e),this.sceneJson.save())}async delete(){if(!this.project?.rootDirHandle){console.error("Cannot delete scene: project root not set");return}try{await(await this.project.rootDirHandle.getDirectoryHandle("SCENES")).removeEntry(this.folder.name,{recursive:!0}),we(()=>{this.project&&(this.project.scenes=this.project.scenes.filter(n=>n!==this))})}catch(e){console.error("Failed to delete scene:",e)}}async createShot(e){if(!this.folder)return console.error("No scene folder available"),null;const n=this.shots.find(i=>i.folder.name===e);if(n)return n;try{const i=await this.folder.getDirectoryHandle(e,{create:!0}),r=new AC(i,this);return await r.load(),we(()=>{const a=this.shots.findIndex(u=>u.folder.name.localeCompare(e)>0);a===-1?this.shots.push(r):this.shots.splice(a,0,r)}),r}catch(i){return console.error("Failed to create shot:",i),null}}get finishedShotsNum(){return this.shots.filter(e=>e.shotJson?.data?.finished).length}async generateShotsJson(){if(!this.sceneJson?.data?.script)return null;we(()=>{this.is_generating_shotsjson=!0});const e=this.sceneJson.data.script,n=`
${this.project.workflows.split_scene_into_shots.prompt}

${this.sceneJson.data.split_prompt}

SCRIPT:
${e}
`,i=this.project.projinfo?.getField("workflows/split_scene_into_shots/system_message");try{return await Gd.txt2txt(n,i,this.project?.projinfo?.getField("workflows/split_scene_into_shots/model"))}catch(r){return console.error("Error generating shots JSON:",r),null}finally{we(()=>{this.is_generating_shotsjson=!1})}}async createShotsFromShotsJson(){if(!this.sceneJson?.data?.shotsjson){console.warn("No shots JSON found in scene.");return}let e;try{e=JSON.parse(this.sceneJson.data.shotsjson)}catch(n){console.error("Invalid shots JSON:",n),alert("Error: The shots JSON is invalid. Please check the format.");return}for(const n of Object.keys(e)){const i=e[n];if(!i||typeof i!="object"){console.warn(`Skipping invalid shot data for key: ${n}`);continue}try{const r=await this.createShot(n);if(!r){console.error(`Failed to create shot ${n}`);continue}r.shotJson&&(Object.assign(r.shotJson.data,i),await r.shotJson.save())}catch(r){console.error(`Error creating shot ${n}:`,r)}}}log(){console.log(Hn(this))}getTags(){if(!this.sceneJson?.data?.tags||!this.project?.artbook)return[];const e=[];for(const n of this.sceneJson.data.tags){const i=this.project.artbook.getTag(n);i&&e.push(i)}return e}get tags(){return this.getTags()}async generateTags(){we(()=>{this.is_generating_tags=!0});const e=`
${this.project?.projinfo?.data?.generate_tags_prompt}

SCRIPT:
${this.sceneJson?.data.script}

SHOTS JSON:
${this.sceneJson?.data.shotsjson}

REFS DICTIONARY:
${JSON.stringify(this.project?.artbook?.getJson(),null,2)}

`,n="You are a helpful assistant. Do not write explanations. ";try{const i=await Gd.txt2txt(e,n,this.project?.projinfo?.data.gpt_model);for(const r of i?.split(`
`)||[]){const a=r.trim();a&&(console.log("Adding Tag: ",a),this.addTag(a))}return i}catch(i){return console.error("Error generating tags:",i),null}finally{we(()=>{this.is_generating_tags=!1})}}addTag(e){we(()=>{this.sceneJson?.data.tags.includes(e)||(this.project?.artbook?.getTag(e)?(this.sceneJson?.data.tags.push(e),this.sceneJson?.save()):console.log("Tag not found: ",e))})}async generateAllShotImages(){we(()=>{this.is_generating_all_shot_images=!0});const e=this.shots.filter(n=>!n.srcImage).map(n=>n.GenerateImage());await Promise.all(e),we(()=>{this.is_generating_all_shot_images=!1})}async createResolveXML(){const e=new i6(this.folder.name);let n=1e3;for(const i of this.shots){let r="r1";if(i.srcImage){const u=this.project.projinfo?.getField("project_path")+i.srcImage.path;r=e.addAsset(u,i.folder.name)}if(i.outVideo){const u=this.project.projinfo?.getField("project_path")+i.outVideo.path,c=e.addAsset(u,i.folder.name,!0,5);e.appendClip(c,i.folder.name,5,n,1)}e.appendClip(r,i.folder.name,5,n),e.appendText(this.folder.name+" "+i.folder.name,5,n),n+=5}e.log(),e.save(this.project.timelinesDirHandle)}}const Xv=(t,e)=>e.some(n=>t instanceof n);let ox,rx;function r6(){return ox||(ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s6(){return rx||(rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wv=new WeakMap,Hg=new WeakMap,Nh=new WeakMap;function a6(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(qr(t.result)),r()},u=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return Nh.set(e,t),e}function l6(t){if(Wv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Wv.set(t,e)}let Qv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UI(t){Qv=t(Qv)}function u6(t){return s6().includes(t)?function(...e){return t.apply(Zv(this),e),qr(this.request)}:function(...e){return qr(t.apply(Zv(this),e))}}function c6(t){return typeof t=="function"?u6(t):(t instanceof IDBTransaction&&l6(t),Xv(t,r6())?new Proxy(t,Qv):t)}function qr(t){if(t instanceof IDBRequest)return a6(t);if(Hg.has(t))return Hg.get(t);const e=c6(t);return e!==t&&(Hg.set(t,e),Nh.set(e,t)),e}const Zv=t=>Nh.get(t);function f6(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),c=qr(u);return i&&u.addEventListener("upgradeneeded",h=>{i(qr(u.result),h.oldVersion,h.newVersion,qr(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const d6=["get","getKey","getAll","getAllKeys","count"],h6=["put","add","delete","clear"],Gg=new Map;function sx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gg.get(e))return Gg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=h6.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||d6.includes(n)))return;const a=async function(u,...c){const h=this.transaction(u,r?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&h.done]))[0]};return Gg.set(e,a),a}UI(t=>({...t,get:(e,n,i)=>sx(e,n)||t.get(e,n,i),has:(e,n)=>!!sx(e,n)||t.has(e,n)}));const p6=["continue","continuePrimaryKey","advance"],ax={},ey=new WeakMap,BI=new WeakMap,m6={get(t,e){if(!p6.includes(e))return t[e];let n=ax[e];return n||(n=ax[e]=function(...i){ey.set(this,BI.get(this)[e](...i))}),n}};async function*g6(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,m6);for(BI.set(n,e),Nh.set(n,Zv(e));e;)yield n,e=await(ey.get(n)||e.continue()),ey.delete(n)}function lx(t,e){return e===Symbol.asyncIterator&&Xv(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Xv(t,[IDBIndex,IDBObjectStore])}UI(t=>({...t,get(e,n,i){return lx(e,n)?g6:t.get(e,n,i)},has(e,n){return lx(e,n)||t.has(e,n)}}));const v6="ShotMasterRE",Hf="settings";class y6{db=null;data={id:"settings",lastOpenedFolder:null,recentFolders:[],api_keys:{}};constructor(){Li(this.data)}async getDB(){return this.db?this.db:(this.db=await f6(v6,1,{upgrade(e){e.objectStoreNames.contains(Hf)||e.createObjectStore(Hf,{keyPath:"id"})}}),this.db)}async load(){const n=await(await this.getDB()).get(Hf,"settings");return n&&we(()=>{Object.assign(this.data,n)}),this.data}async save(){const e=await this.getDB(),n=Hn(this.data);await e.put(Hf,n)}async update(e){we(()=>e(this.data)),await this.save()}}class _6{fileHandle;text="";scenes=new Map;project=null;constructor(e,n=null){this.fileHandle=e,this.project=n,Li(this,{},{autoBind:!0})}async load(){const e=await this.fileHandle.getFile();this.text=(await e.text()).replace(/\r\n/g,`
`),this.splitIntoScenes()}async save(){const e=await this.fileHandle.createWritable();await e.write(this.text),await e.close()}setText(e){this.text=e,this.splitIntoScenes()}splitIntoScenes(){this.scenes.clear();const e=/^SC_[^\n]{1,32}$/gm,n=[...this.text.matchAll(e)];if(n.length===0){this.scenes.set("",this.text);return}for(let i=0;i<n.length;i++){const r=n[i][0],a=n[i].index;if(i===0&&a>0){const h=this.text.slice(0,a);this.scenes.set("",h)}const u=i+1<n.length?n[i+1].index:this.text.length,c=this.text.slice(a,u);this.scenes.set(r,c)}}get sortedSceneKeys(){return Array.from(this.scenes.keys()).sort((e,n)=>e.localeCompare(n))}joinScenes(){let e="";for(const n of this.sortedSceneKeys)e+=this.scenes.get(n);return e}setSceneText(e,n){this.scenes.set(e,n),this.text=this.joinScenes(),this.splitIntoScenes()}async createScenes(){if(!this.project){console.error("Script has no project reference");return}for(const e of this.sortedSceneKeys){if(e==="")continue;const n=this.scenes.get(e)??"";try{const i=await this.project.createScene(e);if(!i){console.error(`Failed to create scene ${e}`);continue}i.sceneJson&&(i.sceneJson.data.script=n,await i.sceneJson.save())}catch(i){console.error(`Error creating scene ${e}:`,i)}}}}const S6={gpt_model:"gpt-4o-mini",describe_prompt:"        . ",generate_tags_prompt:`
     (SCRIPT)     (SHOTS JSON)        REFS DICTIONARY     .

     ,        ,      :
  ENV/ROOM1/Night.png
  CHAR/VICTOR/Portrait.png


  `,split_shot_prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,prompt_presets:{split_shots:{model:"gpt-4o",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_tags:{model:"gpt-4o",prompt:"Generate Tags ",system_message:"You are a tagger "}},workflows:{generate_shot_image:{model:"gemini-2.5-flash-image"},split_scene_into_shots:{model:"gpt-4o-mini",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_video_kling:{model:De.options.img2video.model.v2_6,mode:De.options.img2video.mode.std,duration:De.options.img2video.duration.five,sound:De.options.img2video.sound.off},kling_motion_control:{mode:De.options.motion_control.mode.std,character_orientation:De.options.motion_control.character_orientation.image,keep_original_sound:De.options.motion_control.keep_original_sound.no}}};class b6{rootDirHandle=null;scenes=[];artbook=null;script=null;userSettingsDB=new y6;projinfo=null;currentView={type:"none"};selectedScene=null;timelinesDirHandle=null;constructor(e=null){this.rootDirHandle=e,Li(this)}async loadFromFolder(e){e&&(this.rootDirHandle=e,this.timelinesDirHandle=await this.rootDirHandle.getDirectoryHandle("Timelines",{create:!0}),we(async()=>{this.userSettingsDB.data.lastOpenedFolder=e,(await Promise.all(this.userSettingsDB.data.recentFolders.map(async i=>{try{return await i.isSameEntry(e)}catch{return!1}}))).includes(!0)||(this.userSettingsDB.data.recentFolders.push(e),this.userSettingsDB.data.recentFolders=this.userSettingsDB.data.recentFolders.slice(-5)),await this.userSettingsDB.save(),this.projinfo=await Zr.create(this.rootDirHandle,"projinfo.json",S6)}),await Promise.all([this.loadScenes(),this.loadArtbook(),this.loadScript()]))}async loadScenes(){if(this.rootDirHandle)try{const e=await this.rootDirHandle.getDirectoryHandle("SCENES",{create:!0}),n=[];for await(const i of e.values())if(i.kind==="directory"){const r=new ix(i,this);await r.load(),n.push(r)}we(()=>{this.scenes=n})}catch(e){console.error("Error loading scenes:",e),we(()=>{this.scenes=[]})}}async loadArtbook(){if(this.rootDirHandle)try{const e=await this.rootDirHandle.getDirectoryHandle("REFS",{create:!0}),n=new t6(e,this);await n.load(),we(()=>{this.artbook=n})}catch(e){console.error("Error loading artbook:",e),we(()=>{this.artbook=null})}}async loadScript(){if(this.rootDirHandle)try{const e=await this.rootDirHandle.getFileHandle("script.txt",{create:!0}),n=new _6(e,this);await n.load(),we(()=>{this.script=n})}catch(e){console.error("Error loading script:",e),we(()=>{this.script=null})}}async loadDB(){await this.userSettingsDB.load(),ii.getApiKey=()=>this.userSettingsDB.data.api_keys.Google_API_KEY||null,ii.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.Google_API_KEY=e})},Gd.getApiKey=()=>this.userSettingsDB.data.api_keys.GPT_API_KEY||null,Gd.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.GPT_API_KEY=e})},De.getKeysDict=()=>({accessKey:this.userSettingsDB.data.api_keys.Kling_Acess_Key,secretKey:this.userSettingsDB.data.api_keys.Kling_Secret_Key})}async createScene(e){if(!this.rootDirHandle)return console.error("No project folder open"),null;const n=this.scenes.find(i=>i.folder.name===e);if(n)return n;try{const r=await(await this.rootDirHandle.getDirectoryHandle("SCENES",{create:!0})).getDirectoryHandle(e,{create:!0}),a=new ix(r,this);return await a.load(),we(()=>{const u=this.scenes.findIndex(c=>c.folder.name.localeCompare(a.folder.name)>0);u===-1?this.scenes.push(a):this.scenes.splice(u,0,a)}),a}catch(i){return console.error("Failed to create scene:",i),null}}log(){console.log(Hn(this))}setView(e,n=null){this.currentView=e,this.selectedScene=n}get promptPresets(){return this.projinfo?this.projinfo.data.prompt_presets:{}}savePromptPreset(e){we(()=>{this.projinfo&&(this.projinfo.data.prompt_presets[e.preset]=e,this.projinfo?.save())})}get workflows(){return this.projinfo?.data.workflows}updateWorkflow(e,n,i){we(()=>{this.workflows[e]||(this.workflows[e]={}),this.workflows[e][n]=i,this.projinfo?.save()})}download_asset(e,n){const i=document.createElement("a");i.href=e,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}const w6=({onOpenFolder:t,recentFolders:e,onOpenRecent:n,project:i})=>{const r=[{name:"Open",onClick:t},{name:"Recent",subItems:e.length?e.map(c=>({name:c.name,onClick:()=>n(c)})):[{name:"No Recent"}]}],a=[{name:"Undo"},{name:"Redo"}],u=[{name:"About"}];return w.jsx(JE,{expand:!0,children:w.jsxs(aR,{fluid:!0,children:[w.jsx(JE.Brand,{children:"ShotMasterRT"}),w.jsxs(wF,{className:"me-auto",style:{userSelect:"none"},children:[w.jsx(Lr,{title:"File",items:r}),w.jsx(Lr,{title:"Edit",items:a}),w.jsx(Lr,{title:"Help",items:u}),w.jsx(Lr,{title:"Settings",onClick:()=>i.setView({type:"settings"})}),w.jsx(Lr,{title:"Script",onClick:()=>i.setView({type:"script"})}),w.jsx(Lr,{title:"Artbook",onClick:()=>i.setView({type:"artbook"})}),w.jsx(Lr,{title:"TaskView",onClick:()=>i.setView({type:"taskview"})})]})]})})},E6=Ze(({scene:t})=>{const e=()=>{!t||!t.sceneJson||t.project?.setView({type:"scene"},t)},n=t.project?.selectedScene===t;return w.jsxs("li",{className:"d-flex justify-content-between align-items-center py-1 px-2",style:{cursor:"pointer"},onClick:e,children:[w.jsx("span",{className:n?"text-success":void 0,children:t.folder.name}),w.jsxs("span",{className:"text-muted",children:[t.finishedShotsNum," / ",t.shots.length]})]})}),it=({onClick:t,label:e="Click",className:n=""})=>w.jsx("button",{className:`btn btn-sm btn-outline-secondary ${n}`,onClick:t,children:e}),T6=Ze(({project:t})=>{if(!t)return w.jsx("div",{children:"No Project Opened"});const e=async()=>{const i=prompt("Enter new scene name");i&&await t.createScene(i)},n=t.rootDirHandle?.name||"No Project Opened";return w.jsxs("div",{style:{width:"200px",minWidth:"200px",borderRight:"1px solid #ced4da",padding:"10px",display:"flex",flexDirection:"column"},children:[w.jsx("h5",{style:{flexShrink:0,marginBottom:8},children:n}),w.jsx(it,{label:"+ Add Scene",onClick:e,className:"mb-2"}),w.jsx("ul",{className:"list-unstyled",style:{margin:0,padding:0,overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:t.scenes.map((i,r)=>w.jsx(E6,{scene:i},r))})]})});class Gf extends E.Component{constructor(e){super(e),this.state={value:e.value}}handleChange=e=>{const n=e.target.value;this.setState({value:n}),this.props.onChange(n)};render(){const{label:e}=this.props,{value:n}=this.state;return w.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:12},children:[w.jsx("label",{style:{marginRight:8,minWidth:120},children:e}),w.jsx("input",{type:"text",value:n,onChange:this.handleChange,style:{flexGrow:1,padding:6}})]})}}const ka=({label:t="Section",children:e,defaultCollapsed:n=!1,className:i="",headerExtra:r})=>{const[a,u]=E.useState(n);return w.jsxs("div",{className:`border rounded p-2 mb-2 ${i}`,children:[w.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[w.jsxs("div",{className:"d-flex align-items-center",children:[w.jsx("button",{className:"btn btn-sm ",onClick:()=>u(!a),children:a?"":""}),w.jsx("strong",{children:t})]}),r&&!a&&w.jsx("div",{children:r})]}),!a&&w.jsx("div",{className:"mt-2",children:e})]})},ty=({label:t,initialText:e,onSave:n,onEdit:i,fitHeight:r=!1,headerExtra:a})=>{const[u,c]=E.useState(e),[h,d]=E.useState(e),[m,y]=E.useState(!1),[S,b]=E.useState(!1),C=E.useRef(null);E.useEffect(()=>{c(e),d(e),r&&C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},[e,r]);const x=u!==h,A=N=>{c(N),i&&i(N)},M=async()=>{n&&(b(!0),await n(u),d(u),b(!1))};E.useEffect(()=>{if(!m||!x)return;const N=setTimeout(()=>M(),1e3);return()=>clearTimeout(N)},[u,m,x]),E.useEffect(()=>{r&&C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},[u,r]);const I=w.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a&&w.jsx(w.Fragment,{children:a}),w.jsx("button",{className:"btn btn-primary btn-sm",disabled:S||!x||!n,onClick:M,children:S?"Saving...":x?"Save*":"Save"}),w.jsxs("label",{className:"d-flex align-items-center gap-1 mb-0",children:[w.jsx("input",{type:"checkbox",checked:m,onChange:N=>y(N.target.checked)}),"Auto-save"]})]});return w.jsx(ka,{label:t,headerExtra:I,children:w.jsx("textarea",{ref:C,className:"form-control",style:{fontFamily:"monospace",overflowY:"auto",maxHeight:"800px"},value:u,onChange:N=>A(N.target.value)})})},Vt=Ze(({localJson:t,field:e,fitHeight:n=!1,headerExtra:i})=>{if(!t)return;const r=async a=>{await t.updateField(e,a)};return w.jsx(ty,{label:e,initialText:t.getField(e)??"",onSave:r,fitHeight:n,headerExtra:i})}),Ea=({tabs:t})=>{const e=Object.keys(t),[n,i]=E.useState(e[0]);return w.jsxs("div",{children:[w.jsx("ul",{className:"nav nav-tabs",children:e.map(r=>w.jsx("li",{className:"nav-item",children:w.jsx("button",{className:`nav-link ${n===r?"active":""}`,onClick:()=>i(r),children:r})},r))}),w.jsx("div",{className:"tab-content p-3 border border-top-0",children:w.jsx("div",{className:"tab-pane fade show active",children:t[n]})})]})};function FI({items:t,currentItem:e,onPicked:n,labelRenderer:i,className:r=""}){return w.jsxs(Af,{className:r,children:[w.jsx(Af.Toggle,{variant:"outline-secondary",size:"sm",children:i?i(e):String(e)}),w.jsx(Af.Menu,{children:t.map((a,u)=>w.jsx(Af.Item,{onClick:()=>n(a),children:i?i(a):String(a)},u))})]})}const C6=Ze(({project:t})=>{const{userSettingsDB:e}=t;if(!e)return null;const n=t.projinfo?{"  ":w.jsx(Vt,{localJson:t.projinfo,field:"split_shot_prompt",fitHeight:!0})," ":w.jsx(Vt,{localJson:t.projinfo,field:"generate_tags_prompt",fitHeight:!0})}:{};return w.jsxs("div",{style:{padding:20},children:[w.jsx("h3",{children:"API Keys"}),w.jsx(it,{onClick:()=>{t.log()},label:"LOG Project"}),w.jsx(it,{onClick:()=>{t.download_asset("assets/server.exe","server.exe")},label:"Download Server"}),w.jsx(Vt,{localJson:t.projinfo,field:"project_path",fitHeight:!0}),w.jsx(Gf,{label:"GPT API Key",value:e.data.api_keys.GPT_API_KEY||"",onChange:async i=>{await e.update(r=>{r.api_keys.GPT_API_KEY=i})}}),w.jsx(Gf,{label:"Google API Key",value:e.data.api_keys.Google_API_KEY||"",onChange:async i=>{await e.update(r=>{r.api_keys.Google_API_KEY=i})}}),w.jsx(Gf,{label:"Kling Acess Key",value:e.data.api_keys.Kling_Acess_Key||"",onChange:async i=>{await e.update(r=>{r.api_keys.Kling_Acess_Key=i})}}),w.jsx(Gf,{label:"Kling Secret Key",value:e.data.api_keys.Kling_Secret_Key||"",onChange:async i=>{await e.update(r=>{r.api_keys.Kling_Secret_Key=i})}}),w.jsx("div",{children:w.jsx(FI,{items:LI,currentItem:t.projinfo?.data.gpt_model,onPicked:i=>{t.projinfo?.updateField("gpt_model",i)}})}),w.jsx("h2",{children:"Prompts"}),Object.keys(n).length>0&&w.jsx(Ea,{tabs:n})]})}),x6=Ze(({project:t})=>{if(!t.script)return w.jsx("div",{children:"No script loaded in project."});const e=async r=>{t.script.setText(r),await t.script.save()},n={};for(const r of t.script.sortedSceneKeys)n[r||"Intro"]=w.jsx(ty,{label:r||"Intro",initialText:t.script.scenes.get(r),onSave:async a=>{t.script.setSceneText(r,a),await t.script.save()},fitHeight:!0});const i=async()=>{try{await t.script.createScenes(),alert("Scenes created successfully!")}catch(r){console.error("Error creating scenes:",r),alert("Failed to create scenes. See console for details.")}};return w.jsxs("div",{style:{padding:"1rem"},children:[w.jsx("h4",{children:"Script"}),w.jsx(it,{label:"Create Scenes from Script",onClick:i,className:"mb-2"}),w.jsx(Ea,{tabs:{"Full Script":w.jsx(ty,{label:"Full Script",initialText:t.script.text,onSave:e,fitHeight:!0}),Scenes:w.jsx(Ea,{tabs:n})}})]})}),A6=Ze(({art:t,onClose:e})=>{const[n,i]=E.useState(null),[r,a]=E.useState(!0);E.useEffect(()=>{let c=!0,h=t;a(!0),i(null);async function d(){const m=await h.image.getUrlObject();if(!c||t!==h)return;i(m);const y=await h.getArtInfo();!c||t!==h||(h.artInfo=y,a(!1))}return d(),()=>{c=!1}},[t]);const u=t.handle.name;return r?w.jsx("div",{children:"Loading art info..."}):w.jsxs("div",{className:"art-info-card",style:{border:"1px solid #ccc",padding:"1rem",borderRadius:"8px"},children:[w.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[w.jsx("strong",{children:u}),w.jsx("button",{onClick:e,style:{cursor:"pointer",border:"none",background:"transparent",fontSize:"1.2rem"},children:""})]}),n?w.jsx("img",{src:n,className:"preview-img",style:{maxWidth:"1000px",width:"auto",maxHeight:"1000px",objectFit:"contain",borderRadius:"4px",display:"block",marginBottom:"1rem"}}):w.jsx("div",{style:{padding:"4rem",textAlign:"center"},children:w.jsx("span",{children:"Loading image..."})}),t.artInfo&&w.jsx(Vt,{localJson:t.artInfo,field:"prompt",fitHeight:!0})]})}),R6=Ze(({artbook:t})=>{const[e,n]=E.useState(null);if(!Object.keys(t.data).length)return w.jsx("div",{children:"No Artbook content found."});const i=({art:c})=>{const[h,d]=E.useState(null);return E.useEffect(()=>{let m=!0;return c.image.getUrlObject().then(y=>{m&&d(y)}),()=>{m=!1}},[c]),w.jsx(sR,{xs:6,md:3,lg:2,style:{marginBottom:"1rem"},children:w.jsxs(Cf,{onClick:()=>n(c),style:{cursor:"pointer"},children:[h?w.jsx(Cf.Img,{variant:"top",src:h}):w.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:w.jsx(aM,{animation:"border"})}),w.jsx(Cf.Body,{children:w.jsx(Cf.Text,{style:{fontSize:"0.8rem"},children:c.handle.name})})]})})},r=(c,h)=>w.jsxs("div",{style:{marginBottom:"2rem"},children:[w.jsx("h5",{children:c}),w.jsx(sM,{children:h.map(d=>w.jsx(i,{art:d},d.handle.name))}),e&&h.includes(e)&&w.jsx("div",{style:{marginTop:"1rem"},children:w.jsx(A6,{art:e,onClose:()=>n(null)})})]},c),a=c=>w.jsxs("div",{style:{padding:"1rem"},children:[Object.entries(c).map(([h,d])=>r(h,d)),w.jsx("div",{style:{height:"500px"}})]}),u={};for(const c in t.data)u[c]=a(t.data[c]);return w.jsxs("div",{style:{padding:"1rem"},children:[w.jsx("h2",{className:"mb-3",children:"Artbook"}),w.jsx(Ea,{tabs:u})]})}),M6=Ze(({art:t,scene:e})=>{const[n,i]=E.useState(null);if(E.useEffect(()=>{t.getArtInfo();let a=!0;return(async()=>{const c=await t.image.getUrlObject();a&&i(c||null)})(),()=>{a=!1,t.image.revokeUrl()}},[t]),!n)return null;const r=()=>{e.removeTag(t.path)};return w.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[w.jsxs("div",{className:"d-flex align-items-center",children:[w.jsx("img",{src:n,alt:t.handle.name,style:{width:40,height:40,objectFit:"cover",marginRight:8}}),w.jsxs("div",{children:[w.jsx("div",{children:t.handle.name}),w.jsx("small",{className:"text-muted",children:t.path}),t.artInfo&&w.jsx("div",{children:w.jsx("small",{children:t.artInfo.data?.description||""})})]})]}),w.jsx(it,{onClick:r,label:"X"})]})}),N6=({art:t,onClick:e})=>{const[n,i]=E.useState("");return E.useEffect(()=>{let r=!0;return t.image.getUrlObject().then(a=>{r&&i(a)}),()=>{r=!1,t.image.revokeUrl()}},[t]),w.jsxs("div",{className:"px-2 py-1 hover-bg-light d-flex align-items-center",style:{cursor:"pointer",gap:6},onClick:e,children:[n&&w.jsx("img",{src:n,alt:t.handle.name,style:{width:36,height:36,objectFit:"cover",borderRadius:2}}),w.jsx("span",{children:t.handle.name})]})},Ih=({onClick:t,label:e="Click",className:n="",is_loading:i=!1})=>w.jsx(it,{onClick:t,className:`${n} ${i?"disabled":""}`,label:w.jsxs("span",{className:"d-flex align-items-center justify-content-center",children:[w.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true",style:{animation:i?void 0:"none",borderColor:i?void 0:"#6c757d"}}),w.jsx("span",{children:e})]})});function $e(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function ux(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Dh(...t){return e=>{let n=!1;const i=t.map(r=>{const a=ux(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():ux(t[r],null)}}}}function on(...t){return E.useCallback(Dh(...t),t)}function zu(t,e=[]){let n=[];function i(a,u){const c=E.createContext(u),h=n.length;n=[...n,u];const d=y=>{const{scope:S,children:b,...C}=y,x=S?.[t]?.[h]||c,A=E.useMemo(()=>C,Object.values(C));return w.jsx(x.Provider,{value:A,children:b})};d.displayName=a+"Provider";function m(y,S){const b=S?.[t]?.[h]||c,C=E.useContext(b);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[d,m]}const r=()=>{const a=n.map(u=>E.createContext(u));return function(c){const h=c?.[t]||a;return E.useMemo(()=>({[`__scope${t}`]:{...c,[t]:h}}),[c,h])}};return r.scopeName=t,[i,I6(r,...e)]}function I6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const u=i.reduce((c,{useScope:h,scopeName:d})=>{const y=h(a)[`__scope${d}`];return{...c,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}var ar=globalThis?.document?E.useLayoutEffect:()=>{},D6=qx[" useInsertionEffect ".trim().toString()]||ar;function y_({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,u]=O6({defaultProp:e,onChange:n}),c=t!==void 0,h=c?t:r;{const m=E.useRef(t!==void 0);E.useEffect(()=>{const y=m.current;y!==c&&console.warn(`${i} is changing from ${y?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,i])}const d=E.useCallback(m=>{if(c){const y=P6(m)?m(t):m;y!==t&&u.current?.(y)}else a(m)},[c,t,a,u]);return[h,d]}function O6({defaultProp:t,onChange:e}){const[n,i]=E.useState(t),r=E.useRef(n),a=E.useRef(e);return D6(()=>{a.current=e},[e]),E.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,i,a]}function P6(t){return typeof t=="function"}function Vd(t){const e=k6(t),n=E.forwardRef((i,r)=>{const{children:a,...u}=i,c=E.Children.toArray(a),h=c.find(U6);if(h){const d=h.props.children,m=c.map(y=>y===h?E.Children.count(d)>1?E.Children.only(null):E.isValidElement(d)?d.props.children:null:y);return w.jsx(e,{...u,ref:r,children:E.isValidElement(d)?E.cloneElement(d,void 0,m):null})}return w.jsx(e,{...u,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function k6(t){const e=E.forwardRef((n,i)=>{const{children:r,...a}=n;if(E.isValidElement(r)){const u=F6(r),c=B6(a,r.props);return r.type!==E.Fragment&&(c.ref=i?Dh(i,u):u),E.cloneElement(r,c)}return E.Children.count(r)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var L6=Symbol("radix.slottable");function U6(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===L6}function B6(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...c)=>{const h=a(...c);return r(...c),h}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function F6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zt=$6.reduce((t,e)=>{const n=Vd(`Primitive.${e}`),i=E.forwardRef((r,a)=>{const{asChild:u,...c}=r,h=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(h,{...c,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function $I(t,e){t&&ih.flushSync(()=>t.dispatchEvent(e))}function HI(t){const e=t+"CollectionProvider",[n,i]=zu(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=x=>{const{scope:A,children:M}=x,I=nt.useRef(null),N=nt.useRef(new Map).current;return w.jsx(r,{scope:A,itemMap:N,collectionRef:I,children:M})};u.displayName=e;const c=t+"CollectionSlot",h=Vd(c),d=nt.forwardRef((x,A)=>{const{scope:M,children:I}=x,N=a(c,M),D=on(A,N.collectionRef);return w.jsx(h,{ref:D,children:I})});d.displayName=c;const m=t+"CollectionItemSlot",y="data-radix-collection-item",S=Vd(m),b=nt.forwardRef((x,A)=>{const{scope:M,children:I,...N}=x,D=nt.useRef(null),k=on(A,D),U=a(m,M);return nt.useEffect(()=>(U.itemMap.set(D,{ref:D,...N}),()=>void U.itemMap.delete(D))),w.jsx(S,{[y]:"",ref:k,children:I})});b.displayName=m;function C(x){const A=a(t+"CollectionConsumer",x);return nt.useCallback(()=>{const I=A.collectionRef.current;if(!I)return[];const N=Array.from(I.querySelectorAll(`[${y}]`));return Array.from(A.itemMap.values()).sort((U,O)=>N.indexOf(U.ref.current)-N.indexOf(O.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:u,Slot:d,ItemSlot:b},C,i]}var H6=E.createContext(void 0);function GI(t){const e=E.useContext(H6);return t||e||"ltr"}function Pi(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}function G6(t,e=globalThis?.document){const n=Pi(t);E.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var V6="DismissableLayer",ny="dismissableLayer.update",z6="dismissableLayer.pointerDownOutside",q6="dismissableLayer.focusOutside",cx,VI=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zI=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:u,onDismiss:c,...h}=t,d=E.useContext(VI),[m,y]=E.useState(null),S=m?.ownerDocument??globalThis?.document,[,b]=E.useState({}),C=on(e,O=>y(O)),x=Array.from(d.layers),[A]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),M=x.indexOf(A),I=m?x.indexOf(m):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,D=I>=M,k=K6(O=>{const q=O.target,J=[...d.branches].some(Y=>Y.contains(q));!D||J||(r?.(O),u?.(O),O.defaultPrevented||c?.())},S),U=Y6(O=>{const q=O.target;[...d.branches].some(Y=>Y.contains(q))||(a?.(O),u?.(O),O.defaultPrevented||c?.())},S);return G6(O=>{I===d.layers.size-1&&(i?.(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},S),E.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(cx=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),fx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(S.body.style.pointerEvents=cx)}},[m,S,n,d]),E.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),fx())},[m,d]),E.useEffect(()=>{const O=()=>b({});return document.addEventListener(ny,O),()=>document.removeEventListener(ny,O)},[]),w.jsx(zt.div,{...h,ref:C,style:{pointerEvents:N?D?"auto":"none":void 0,...t.style},onFocusCapture:$e(t.onFocusCapture,U.onFocusCapture),onBlurCapture:$e(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:$e(t.onPointerDownCapture,k.onPointerDownCapture)})});zI.displayName=V6;var J6="DismissableLayerBranch",j6=E.forwardRef((t,e)=>{const n=E.useContext(VI),i=E.useRef(null),r=on(e,i);return E.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),w.jsx(zt.div,{...t,ref:r})});j6.displayName=J6;function K6(t,e=globalThis?.document){const n=Pi(t),i=E.useRef(!1),r=E.useRef(()=>{});return E.useEffect(()=>{const a=c=>{if(c.target&&!i.current){let h=function(){qI(z6,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);i.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Y6(t,e=globalThis?.document){const n=Pi(t),i=E.useRef(!1);return E.useEffect(()=>{const r=a=>{a.target&&!i.current&&qI(q6,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function fx(){const t=new CustomEvent(ny);document.dispatchEvent(t)}function qI(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?$I(r,a):r.dispatchEvent(a)}var Vg=0;function X6(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??dx()),document.body.insertAdjacentElement("beforeend",t[1]??dx()),Vg++,()=>{Vg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vg--}},[])}function dx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var zg="focusScope.autoFocusOnMount",qg="focusScope.autoFocusOnUnmount",hx={bubbles:!1,cancelable:!0},W6="FocusScope",JI=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...u}=t,[c,h]=E.useState(null),d=Pi(r),m=Pi(a),y=E.useRef(null),S=on(e,x=>h(x)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(i){let x=function(N){if(b.paused||!c)return;const D=N.target;c.contains(D)?y.current=D:er(y.current,{select:!0})},A=function(N){if(b.paused||!c)return;const D=N.relatedTarget;D!==null&&(c.contains(D)||er(y.current,{select:!0}))},M=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&er(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",A);const I=new MutationObserver(M);return c&&I.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",A),I.disconnect()}}},[i,c,b.paused]),E.useEffect(()=>{if(c){mx.add(b);const x=document.activeElement;if(!c.contains(x)){const M=new CustomEvent(zg,hx);c.addEventListener(zg,d),c.dispatchEvent(M),M.defaultPrevented||(Q6(i5(jI(c)),{select:!0}),document.activeElement===x&&er(c))}return()=>{c.removeEventListener(zg,d),setTimeout(()=>{const M=new CustomEvent(qg,hx);c.addEventListener(qg,m),c.dispatchEvent(M),M.defaultPrevented||er(x??document.body,{select:!0}),c.removeEventListener(qg,m),mx.remove(b)},0)}}},[c,d,m,b]);const C=E.useCallback(x=>{if(!n&&!i||b.paused)return;const A=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,M=document.activeElement;if(A&&M){const I=x.currentTarget,[N,D]=Z6(I);N&&D?!x.shiftKey&&M===D?(x.preventDefault(),n&&er(N,{select:!0})):x.shiftKey&&M===N&&(x.preventDefault(),n&&er(D,{select:!0})):M===I&&x.preventDefault()}},[n,i,b.paused]);return w.jsx(zt.div,{tabIndex:-1,...u,ref:S,onKeyDown:C})});JI.displayName=W6;function Q6(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(er(i,{select:e}),document.activeElement!==n)return}function Z6(t){const e=jI(t),n=px(e,t),i=px(e.reverse(),t);return[n,i]}function jI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function px(t,e){for(const n of t)if(!e5(n,{upTo:e}))return n}function e5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function t5(t){return t instanceof HTMLInputElement&&"select"in t}function er(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&t5(t)&&e&&t.select()}}var mx=n5();function n5(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=gx(t,e),t.unshift(e)},remove(e){t=gx(t,e),t[0]?.resume()}}}function gx(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function i5(t){return t.filter(e=>e.tagName!=="A")}var o5=qx[" useId ".trim().toString()]||(()=>{}),r5=0;function mu(t){const[e,n]=E.useState(o5());return ar(()=>{n(i=>i??String(r5++))},[t]),t||(e?`radix-${e}`:"")}const s5=["top","right","bottom","left"],lr=Math.min,yn=Math.max,zd=Math.round,Vf=Math.floor,Oi=t=>({x:t,y:t}),a5={left:"right",right:"left",bottom:"top",top:"bottom"},l5={start:"end",end:"start"};function iy(t,e,n){return yn(t,lr(e,n))}function So(t,e){return typeof t=="function"?t(e):t}function bo(t){return t.split("-")[0]}function La(t){return t.split("-")[1]}function __(t){return t==="x"?"y":"x"}function S_(t){return t==="y"?"height":"width"}const u5=new Set(["top","bottom"]);function Ai(t){return u5.has(bo(t))?"y":"x"}function b_(t){return __(Ai(t))}function c5(t,e,n){n===void 0&&(n=!1);const i=La(t),r=b_(t),a=S_(r);let u=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(u=qd(u)),[u,qd(u)]}function f5(t){const e=qd(t);return[oy(t),e,oy(e)]}function oy(t){return t.replace(/start|end/g,e=>l5[e])}const vx=["left","right"],yx=["right","left"],d5=["top","bottom"],h5=["bottom","top"];function p5(t,e,n){switch(t){case"top":case"bottom":return n?e?yx:vx:e?vx:yx;case"left":case"right":return e?d5:h5;default:return[]}}function m5(t,e,n,i){const r=La(t);let a=p5(bo(t),n==="start",i);return r&&(a=a.map(u=>u+"-"+r),e&&(a=a.concat(a.map(oy)))),a}function qd(t){return t.replace(/left|right|bottom|top/g,e=>a5[e])}function g5(t){return{top:0,right:0,bottom:0,left:0,...t}}function KI(t){return typeof t!="number"?g5(t):{top:t,right:t,bottom:t,left:t}}function Jd(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function _x(t,e,n){let{reference:i,floating:r}=t;const a=Ai(e),u=b_(e),c=S_(u),h=bo(e),d=a==="y",m=i.x+i.width/2-r.width/2,y=i.y+i.height/2-r.height/2,S=i[c]/2-r[c]/2;let b;switch(h){case"top":b={x:m,y:i.y-r.height};break;case"bottom":b={x:m,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y};break;case"left":b={x:i.x-r.width,y};break;default:b={x:i.x,y:i.y}}switch(La(e)){case"start":b[u]-=S*(n&&d?-1:1);break;case"end":b[u]+=S*(n&&d?-1:1);break}return b}const v5=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:u}=n,c=a.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(e));let d=await u.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y}=_x(d,i,h),S=i,b={},C=0;for(let x=0;x<c.length;x++){const{name:A,fn:M}=c[x],{x:I,y:N,data:D,reset:k}=await M({x:m,y,initialPlacement:i,placement:S,strategy:r,middlewareData:b,rects:d,platform:u,elements:{reference:t,floating:e}});m=I??m,y=N??y,b={...b,[A]:{...b[A],...D}},k&&C<=50&&(C++,typeof k=="object"&&(k.placement&&(S=k.placement),k.rects&&(d=k.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:m,y}=_x(d,S,h)),x=-1)}return{x:m,y,placement:S,strategy:r,middlewareData:b}};async function gu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:u,elements:c,strategy:h}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:S=!1,padding:b=0}=So(e,t),C=KI(b),A=c[S?y==="floating"?"reference":"floating":y],M=Jd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(A)))==null||n?A:A.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:m,strategy:h})),I=y==="floating"?{x:i,y:r,width:u.floating.width,height:u.floating.height}:u.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),D=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},k=Jd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:I,offsetParent:N,strategy:h}):I);return{top:(M.top-k.top+C.top)/D.y,bottom:(k.bottom-M.bottom+C.bottom)/D.y,left:(M.left-k.left+C.left)/D.x,right:(k.right-M.right+C.right)/D.x}}const y5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:u,elements:c,middlewareData:h}=e,{element:d,padding:m=0}=So(t,e)||{};if(d==null)return{};const y=KI(m),S={x:n,y:i},b=b_(r),C=S_(b),x=await u.getDimensions(d),A=b==="y",M=A?"top":"left",I=A?"bottom":"right",N=A?"clientHeight":"clientWidth",D=a.reference[C]+a.reference[b]-S[b]-a.floating[C],k=S[b]-a.reference[b],U=await(u.getOffsetParent==null?void 0:u.getOffsetParent(d));let O=U?U[N]:0;(!O||!await(u.isElement==null?void 0:u.isElement(U)))&&(O=c.floating[N]||a.floating[C]);const q=D/2-k/2,J=O/2-x[C]/2-1,Y=lr(y[M],J),W=lr(y[I],J),re=Y,ie=O-x[C]-W,ae=O/2-x[C]/2+q,de=iy(re,ae,ie),F=!h.arrow&&La(r)!=null&&ae!==de&&a.reference[C]/2-(ae<re?Y:W)-x[C]/2<0,Q=F?ae<re?ae-re:ae-ie:0;return{[b]:S[b]+Q,data:{[b]:de,centerOffset:ae-de-Q,...F&&{alignmentOffset:Q}},reset:F}}}),_5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:u,initialPlacement:c,platform:h,elements:d}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:S,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:x=!0,...A}=So(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const M=bo(r),I=Ai(c),N=bo(c)===c,D=await(h.isRTL==null?void 0:h.isRTL(d.floating)),k=S||(N||!x?[qd(c)]:f5(c)),U=C!=="none";!S&&U&&k.push(...m5(c,x,C,D));const O=[c,...k],q=await gu(e,A),J=[];let Y=((i=a.flip)==null?void 0:i.overflows)||[];if(m&&J.push(q[M]),y){const ae=c5(r,u,D);J.push(q[ae[0]],q[ae[1]])}if(Y=[...Y,{placement:r,overflows:J}],!J.every(ae=>ae<=0)){var W,re;const ae=(((W=a.flip)==null?void 0:W.index)||0)+1,de=O[ae];if(de&&(!(y==="alignment"?I!==Ai(de):!1)||Y.every(ee=>Ai(ee.placement)===I?ee.overflows[0]>0:!0)))return{data:{index:ae,overflows:Y},reset:{placement:de}};let F=(re=Y.filter(Q=>Q.overflows[0]<=0).sort((Q,ee)=>Q.overflows[1]-ee.overflows[1])[0])==null?void 0:re.placement;if(!F)switch(b){case"bestFit":{var ie;const Q=(ie=Y.filter(ee=>{if(U){const ne=Ai(ee.placement);return ne===I||ne==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(ne=>ne>0).reduce((ne,ce)=>ne+ce,0)]).sort((ee,ne)=>ee[1]-ne[1])[0])==null?void 0:ie[0];Q&&(F=Q);break}case"initialPlacement":F=c;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function Sx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function bx(t){return s5.some(e=>t[e]>=0)}const S5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=So(t,e);switch(i){case"referenceHidden":{const a=await gu(e,{...r,elementContext:"reference"}),u=Sx(a,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:bx(u)}}}case"escaped":{const a=await gu(e,{...r,altBoundary:!0}),u=Sx(a,n.floating);return{data:{escapedOffsets:u,escaped:bx(u)}}}default:return{}}}}},YI=new Set(["left","top"]);async function b5(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),u=bo(n),c=La(n),h=Ai(n)==="y",d=YI.has(u)?-1:1,m=a&&h?-1:1,y=So(e,t);let{mainAxis:S,crossAxis:b,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof C=="number"&&(b=c==="end"?C*-1:C),h?{x:b*m,y:S*d}:{x:S*d,y:b*m}}const w5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:u,middlewareData:c}=e,h=await b5(e,t);return u===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:r+h.x,y:a+h.y,data:{...h,placement:u}}}}},E5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:u=!1,limiter:c={fn:A=>{let{x:M,y:I}=A;return{x:M,y:I}}},...h}=So(t,e),d={x:n,y:i},m=await gu(e,h),y=Ai(bo(r)),S=__(y);let b=d[S],C=d[y];if(a){const A=S==="y"?"top":"left",M=S==="y"?"bottom":"right",I=b+m[A],N=b-m[M];b=iy(I,b,N)}if(u){const A=y==="y"?"top":"left",M=y==="y"?"bottom":"right",I=C+m[A],N=C-m[M];C=iy(I,C,N)}const x=c.fn({...e,[S]:b,[y]:C});return{...x,data:{x:x.x-n,y:x.y-i,enabled:{[S]:a,[y]:u}}}}}},T5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:u}=e,{offset:c=0,mainAxis:h=!0,crossAxis:d=!0}=So(t,e),m={x:n,y:i},y=Ai(r),S=__(y);let b=m[S],C=m[y];const x=So(c,e),A=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const N=S==="y"?"height":"width",D=a.reference[S]-a.floating[N]+A.mainAxis,k=a.reference[S]+a.reference[N]-A.mainAxis;b<D?b=D:b>k&&(b=k)}if(d){var M,I;const N=S==="y"?"width":"height",D=YI.has(bo(r)),k=a.reference[y]-a.floating[N]+(D&&((M=u.offset)==null?void 0:M[y])||0)+(D?0:A.crossAxis),U=a.reference[y]+a.reference[N]+(D?0:((I=u.offset)==null?void 0:I[y])||0)-(D?A.crossAxis:0);C<k?C=k:C>U&&(C=U)}return{[S]:b,[y]:C}}}},C5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:u,elements:c}=e,{apply:h=()=>{},...d}=So(t,e),m=await gu(e,d),y=bo(r),S=La(r),b=Ai(r)==="y",{width:C,height:x}=a.floating;let A,M;y==="top"||y==="bottom"?(A=y,M=S===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(M=y,A=S==="end"?"top":"bottom");const I=x-m.top-m.bottom,N=C-m.left-m.right,D=lr(x-m[A],I),k=lr(C-m[M],N),U=!e.middlewareData.shift;let O=D,q=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(q=N),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(O=I),U&&!S){const Y=yn(m.left,0),W=yn(m.right,0),re=yn(m.top,0),ie=yn(m.bottom,0);b?q=C-2*(Y!==0||W!==0?Y+W:yn(m.left,m.right)):O=x-2*(re!==0||ie!==0?re+ie:yn(m.top,m.bottom))}await h({...e,availableWidth:q,availableHeight:O});const J=await u.getDimensions(c.floating);return C!==J.width||x!==J.height?{reset:{rects:!0}}:{}}}};function Oh(){return typeof window<"u"}function Ua(t){return XI(t)?(t.nodeName||"").toLowerCase():"#document"}function bn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ui(t){var e;return(e=(XI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XI(t){return Oh()?t instanceof Node||t instanceof bn(t).Node:!1}function di(t){return Oh()?t instanceof Element||t instanceof bn(t).Element:!1}function ki(t){return Oh()?t instanceof HTMLElement||t instanceof bn(t).HTMLElement:!1}function wx(t){return!Oh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bn(t).ShadowRoot}const x5=new Set(["inline","contents"]);function qu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=hi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!x5.has(r)}const A5=new Set(["table","td","th"]);function R5(t){return A5.has(Ua(t))}const M5=[":popover-open",":modal"];function Ph(t){return M5.some(e=>{try{return t.matches(e)}catch{return!1}})}const N5=["transform","translate","scale","rotate","perspective"],I5=["transform","translate","scale","rotate","perspective","filter"],D5=["paint","layout","strict","content"];function w_(t){const e=E_(),n=di(t)?hi(t):t;return N5.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||I5.some(i=>(n.willChange||"").includes(i))||D5.some(i=>(n.contain||"").includes(i))}function O5(t){let e=ur(t);for(;ki(e)&&!Ta(e);){if(w_(e))return e;if(Ph(e))return null;e=ur(e)}return null}function E_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const P5=new Set(["html","body","#document"]);function Ta(t){return P5.has(Ua(t))}function hi(t){return bn(t).getComputedStyle(t)}function kh(t){return di(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ur(t){if(Ua(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wx(t)&&t.host||Ui(t);return wx(e)?e.host:e}function WI(t){const e=ur(t);return Ta(e)?t.ownerDocument?t.ownerDocument.body:t.body:ki(e)&&qu(e)?e:WI(e)}function vu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=WI(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),u=bn(r);if(a){const c=ry(u);return e.concat(u,u.visualViewport||[],qu(r)?r:[],c&&n?vu(c):[])}return e.concat(r,vu(r,[],n))}function ry(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function QI(t){const e=hi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ki(t),a=r?t.offsetWidth:n,u=r?t.offsetHeight:i,c=zd(n)!==a||zd(i)!==u;return c&&(n=a,i=u),{width:n,height:i,$:c}}function T_(t){return di(t)?t:t.contextElement}function pa(t){const e=T_(t);if(!ki(e))return Oi(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=QI(e);let u=(a?zd(n.width):n.width)/i,c=(a?zd(n.height):n.height)/r;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const k5=Oi(0);function ZI(t){const e=bn(t);return!E_()||!e.visualViewport?k5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function L5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==bn(t)?!1:e}function ts(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=T_(t);let u=Oi(1);e&&(i?di(i)&&(u=pa(i)):u=pa(t));const c=L5(a,n,i)?ZI(a):Oi(0);let h=(r.left+c.x)/u.x,d=(r.top+c.y)/u.y,m=r.width/u.x,y=r.height/u.y;if(a){const S=bn(a),b=i&&di(i)?bn(i):i;let C=S,x=ry(C);for(;x&&i&&b!==C;){const A=pa(x),M=x.getBoundingClientRect(),I=hi(x),N=M.left+(x.clientLeft+parseFloat(I.paddingLeft))*A.x,D=M.top+(x.clientTop+parseFloat(I.paddingTop))*A.y;h*=A.x,d*=A.y,m*=A.x,y*=A.y,h+=N,d+=D,C=bn(x),x=ry(C)}}return Jd({width:m,height:y,x:h,y:d})}function Lh(t,e){const n=kh(t).scrollLeft;return e?e.left+n:ts(Ui(t)).left+n}function eD(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Lh(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function U5(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",u=Ui(i),c=e?Ph(e.floating):!1;if(i===u||c&&a)return n;let h={scrollLeft:0,scrollTop:0},d=Oi(1);const m=Oi(0),y=ki(i);if((y||!y&&!a)&&((Ua(i)!=="body"||qu(u))&&(h=kh(i)),ki(i))){const b=ts(i);d=pa(i),m.x=b.x+i.clientLeft,m.y=b.y+i.clientTop}const S=u&&!y&&!a?eD(u,h):Oi(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-h.scrollLeft*d.x+m.x+S.x,y:n.y*d.y-h.scrollTop*d.y+m.y+S.y}}function B5(t){return Array.from(t.getClientRects())}function F5(t){const e=Ui(t),n=kh(t),i=t.ownerDocument.body,r=yn(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=yn(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let u=-n.scrollLeft+Lh(t);const c=-n.scrollTop;return hi(i).direction==="rtl"&&(u+=yn(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:u,y:c}}const Ex=25;function $5(t,e){const n=bn(t),i=Ui(t),r=n.visualViewport;let a=i.clientWidth,u=i.clientHeight,c=0,h=0;if(r){a=r.width,u=r.height;const m=E_();(!m||m&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}const d=Lh(i);if(d<=0){const m=i.ownerDocument,y=m.body,S=getComputedStyle(y),b=m.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,C=Math.abs(i.clientWidth-y.clientWidth-b);C<=Ex&&(a-=C)}else d<=Ex&&(a+=d);return{width:a,height:u,x:c,y:h}}const H5=new Set(["absolute","fixed"]);function G5(t,e){const n=ts(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=ki(t)?pa(t):Oi(1),u=t.clientWidth*a.x,c=t.clientHeight*a.y,h=r*a.x,d=i*a.y;return{width:u,height:c,x:h,y:d}}function Tx(t,e,n){let i;if(e==="viewport")i=$5(t,n);else if(e==="document")i=F5(Ui(t));else if(di(e))i=G5(e,n);else{const r=ZI(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Jd(i)}function tD(t,e){const n=ur(t);return n===e||!di(n)||Ta(n)?!1:hi(n).position==="fixed"||tD(n,e)}function V5(t,e){const n=e.get(t);if(n)return n;let i=vu(t,[],!1).filter(c=>di(c)&&Ua(c)!=="body"),r=null;const a=hi(t).position==="fixed";let u=a?ur(t):t;for(;di(u)&&!Ta(u);){const c=hi(u),h=w_(u);!h&&c.position==="fixed"&&(r=null),(a?!h&&!r:!h&&c.position==="static"&&!!r&&H5.has(r.position)||qu(u)&&!h&&tD(t,u))?i=i.filter(m=>m!==u):r=c,u=ur(u)}return e.set(t,i),i}function z5(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const u=[...n==="clippingAncestors"?Ph(e)?[]:V5(e,this._c):[].concat(n),i],c=u[0],h=u.reduce((d,m)=>{const y=Tx(e,m,r);return d.top=yn(y.top,d.top),d.right=lr(y.right,d.right),d.bottom=lr(y.bottom,d.bottom),d.left=yn(y.left,d.left),d},Tx(e,c,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function q5(t){const{width:e,height:n}=QI(t);return{width:e,height:n}}function J5(t,e,n){const i=ki(e),r=Ui(e),a=n==="fixed",u=ts(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const h=Oi(0);function d(){h.x=Lh(r)}if(i||!i&&!a)if((Ua(e)!=="body"||qu(r))&&(c=kh(e)),i){const b=ts(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else r&&d();a&&!i&&r&&d();const m=r&&!i&&!a?eD(r,c):Oi(0),y=u.left+c.scrollLeft-h.x-m.x,S=u.top+c.scrollTop-h.y-m.y;return{x:y,y:S,width:u.width,height:u.height}}function Jg(t){return hi(t).position==="static"}function Cx(t,e){if(!ki(t)||hi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ui(t)===n&&(n=n.ownerDocument.body),n}function nD(t,e){const n=bn(t);if(Ph(t))return n;if(!ki(t)){let r=ur(t);for(;r&&!Ta(r);){if(di(r)&&!Jg(r))return r;r=ur(r)}return n}let i=Cx(t,e);for(;i&&R5(i)&&Jg(i);)i=Cx(i,e);return i&&Ta(i)&&Jg(i)&&!w_(i)?n:i||O5(t)||n}const j5=async function(t){const e=this.getOffsetParent||nD,n=this.getDimensions,i=await n(t.floating);return{reference:J5(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function K5(t){return hi(t).direction==="rtl"}const Y5={convertOffsetParentRelativeRectToViewportRelativeRect:U5,getDocumentElement:Ui,getClippingRect:z5,getOffsetParent:nD,getElementRects:j5,getClientRects:B5,getDimensions:q5,getScale:pa,isElement:di,isRTL:K5};function iD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function X5(t,e){let n=null,i;const r=Ui(t);function a(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function u(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const d=t.getBoundingClientRect(),{left:m,top:y,width:S,height:b}=d;if(c||e(),!S||!b)return;const C=Vf(y),x=Vf(r.clientWidth-(m+S)),A=Vf(r.clientHeight-(y+b)),M=Vf(m),N={rootMargin:-C+"px "+-x+"px "+-A+"px "+-M+"px",threshold:yn(0,lr(1,h))||1};let D=!0;function k(U){const O=U[0].intersectionRatio;if(O!==h){if(!D)return u();O?u(!1,O):i=setTimeout(()=>{u(!1,1e-7)},1e3)}O===1&&!iD(d,t.getBoundingClientRect())&&u(),D=!1}try{n=new IntersectionObserver(k,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(k,N)}n.observe(t)}return u(!0),a}function W5(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,d=T_(t),m=r||a?[...d?vu(d):[],...vu(e)]:[];m.forEach(M=>{r&&M.addEventListener("scroll",n,{passive:!0}),a&&M.addEventListener("resize",n)});const y=d&&c?X5(d,n):null;let S=-1,b=null;u&&(b=new ResizeObserver(M=>{let[I]=M;I&&I.target===d&&b&&(b.unobserve(e),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(e)})),n()}),d&&!h&&b.observe(d),b.observe(e));let C,x=h?ts(t):null;h&&A();function A(){const M=ts(t);x&&!iD(x,M)&&n(),x=M,C=requestAnimationFrame(A)}return n(),()=>{var M;m.forEach(I=>{r&&I.removeEventListener("scroll",n),a&&I.removeEventListener("resize",n)}),y?.(),(M=b)==null||M.disconnect(),b=null,h&&cancelAnimationFrame(C)}}const Q5=w5,Z5=E5,e8=_5,t8=C5,n8=S5,xx=y5,i8=T5,o8=(t,e,n)=>{const i=new Map,r={platform:Y5,...n},a={...r.platform,_c:i};return v5(t,e,{...r,platform:a})};var r8=typeof document<"u",s8=function(){},dd=r8?E.useLayoutEffect:s8;function jd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!jd(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!jd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function oD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ax(t,e){const n=oD(t);return Math.round(e*n)/n}function jg(t){const e=E.useRef(t);return dd(()=>{e.current=t}),e}function a8(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:u}={},transform:c=!0,whileElementsMounted:h,open:d}=t,[m,y]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[S,b]=E.useState(i);jd(S,i)||b(i);const[C,x]=E.useState(null),[A,M]=E.useState(null),I=E.useCallback(ee=>{ee!==U.current&&(U.current=ee,x(ee))},[]),N=E.useCallback(ee=>{ee!==O.current&&(O.current=ee,M(ee))},[]),D=a||C,k=u||A,U=E.useRef(null),O=E.useRef(null),q=E.useRef(m),J=h!=null,Y=jg(h),W=jg(r),re=jg(d),ie=E.useCallback(()=>{if(!U.current||!O.current)return;const ee={placement:e,strategy:n,middleware:S};W.current&&(ee.platform=W.current),o8(U.current,O.current,ee).then(ne=>{const ce={...ne,isPositioned:re.current!==!1};ae.current&&!jd(q.current,ce)&&(q.current=ce,ih.flushSync(()=>{y(ce)}))})},[S,e,n,W,re]);dd(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,y(ee=>({...ee,isPositioned:!1})))},[d]);const ae=E.useRef(!1);dd(()=>(ae.current=!0,()=>{ae.current=!1}),[]),dd(()=>{if(D&&(U.current=D),k&&(O.current=k),D&&k){if(Y.current)return Y.current(D,k,ie);ie()}},[D,k,ie,Y,J]);const de=E.useMemo(()=>({reference:U,floating:O,setReference:I,setFloating:N}),[I,N]),F=E.useMemo(()=>({reference:D,floating:k}),[D,k]),Q=E.useMemo(()=>{const ee={position:n,left:0,top:0};if(!F.floating)return ee;const ne=Ax(F.floating,m.x),ce=Ax(F.floating,m.y);return c?{...ee,transform:"translate("+ne+"px, "+ce+"px)",...oD(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:ce}},[n,c,F.floating,m.x,m.y]);return E.useMemo(()=>({...m,update:ie,refs:de,elements:F,floatingStyles:Q}),[m,ie,de,F,Q])}const l8=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?xx({element:i.current,padding:r}).fn(n):{}:i?xx({element:i,padding:r}).fn(n):{}}}},u8=(t,e)=>({...Q5(t),options:[t,e]}),c8=(t,e)=>({...Z5(t),options:[t,e]}),f8=(t,e)=>({...i8(t),options:[t,e]}),d8=(t,e)=>({...e8(t),options:[t,e]}),h8=(t,e)=>({...t8(t),options:[t,e]}),p8=(t,e)=>({...n8(t),options:[t,e]}),m8=(t,e)=>({...l8(t),options:[t,e]});var g8="Arrow",rD=E.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return w.jsx(zt.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});rD.displayName=g8;var v8=rD;function y8(t){const[e,n]=E.useState(void 0);return ar(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let u,c;if("borderBoxSize"in a){const h=a.borderBoxSize,d=Array.isArray(h)?h[0]:h;u=d.inlineSize,c=d.blockSize}else u=t.offsetWidth,c=t.offsetHeight;n({width:u,height:c})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var C_="Popper",[sD,aD]=zu(C_),[_8,lD]=sD(C_),uD=t=>{const{__scopePopper:e,children:n}=t,[i,r]=E.useState(null);return w.jsx(_8,{scope:e,anchor:i,onAnchorChange:r,children:n})};uD.displayName=C_;var cD="PopperAnchor",fD=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=lD(cD,n),u=E.useRef(null),c=on(e,u),h=E.useRef(null);return E.useEffect(()=>{const d=h.current;h.current=i?.current||u.current,d!==h.current&&a.onAnchorChange(h.current)}),i?null:w.jsx(zt.div,{...r,ref:c})});fD.displayName=cD;var x_="PopperContent",[S8,b8]=sD(x_),dD=E.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:S=!1,updatePositionStrategy:b="optimized",onPlaced:C,...x}=t,A=lD(x_,n),[M,I]=E.useState(null),N=on(e,ve=>I(ve)),[D,k]=E.useState(null),U=y8(D),O=U?.width??0,q=U?.height??0,J=i+(a!=="center"?"-"+a:""),Y=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},W=Array.isArray(d)?d:[d],re=W.length>0,ie={padding:Y,boundary:W.filter(E8),altBoundary:re},{refs:ae,floatingStyles:de,placement:F,isPositioned:Q,middlewareData:ee}=a8({strategy:"fixed",placement:J,whileElementsMounted:(...ve)=>W5(...ve,{animationFrame:b==="always"}),elements:{reference:A.anchor},middleware:[u8({mainAxis:r+q,alignmentAxis:u}),h&&c8({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?f8():void 0,...ie}),h&&d8({...ie}),h8({...ie,apply:({elements:ve,rects:qe,availableWidth:Je,availableHeight:rn})=>{const{width:Tn,height:gi}=qe.reference,qt=ve.floating.style;qt.setProperty("--radix-popper-available-width",`${Je}px`),qt.setProperty("--radix-popper-available-height",`${rn}px`),qt.setProperty("--radix-popper-anchor-width",`${Tn}px`),qt.setProperty("--radix-popper-anchor-height",`${gi}px`)}}),D&&m8({element:D,padding:c}),T8({arrowWidth:O,arrowHeight:q}),S&&p8({strategy:"referenceHidden",...ie})]}),[ne,ce]=mD(F),L=Pi(C);ar(()=>{Q&&L?.()},[Q,L]);const K=ee.arrow?.x,se=ee.arrow?.y,le=ee.arrow?.centerOffset!==0,[me,be]=E.useState();return ar(()=>{M&&be(window.getComputedStyle(M).zIndex)},[M]),w.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:Q?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[ee.transformOrigin?.x,ee.transformOrigin?.y].join(" "),...ee.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx(S8,{scope:n,placedSide:ne,onArrowChange:k,arrowX:K,arrowY:se,shouldHideArrow:le,children:w.jsx(zt.div,{"data-side":ne,"data-align":ce,...x,ref:N,style:{...x.style,animation:Q?void 0:"none"}})})})});dD.displayName=x_;var hD="PopperArrow",w8={top:"bottom",right:"left",bottom:"top",left:"right"},pD=E.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=b8(hD,i),u=w8[a.placedSide];return w.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:w.jsx(v8,{...r,ref:n,style:{...r.style,display:"block"}})})});pD.displayName=hD;function E8(t){return t!==null}var T8=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,u=r.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,h=u?0:t.arrowHeight,[d,m]=mD(n),y={start:"0%",center:"50%",end:"100%"}[m],S=(r.arrow?.x??0)+c/2,b=(r.arrow?.y??0)+h/2;let C="",x="";return d==="bottom"?(C=u?y:`${S}px`,x=`${-h}px`):d==="top"?(C=u?y:`${S}px`,x=`${i.floating.height+h}px`):d==="right"?(C=`${-h}px`,x=u?y:`${b}px`):d==="left"&&(C=`${i.floating.width+h}px`,x=u?y:`${b}px`),{data:{x:C,y:x}}}});function mD(t){const[e,n="center"]=t.split("-");return[e,n]}var gD=uD,C8=fD,x8=dD,A8=pD,R8="Portal",vD=E.forwardRef((t,e)=>{const{container:n,...i}=t,[r,a]=E.useState(!1);ar(()=>a(!0),[]);const u=n||r&&globalThis?.document?.body;return u?Hr.createPortal(w.jsx(zt.div,{...i,ref:e}),u):null});vD.displayName=R8;function M8(t,e){return E.useReducer((n,i)=>e[n][i]??n,t)}var Ju=t=>{const{present:e,children:n}=t,i=N8(e),r=typeof n=="function"?n({present:i.isPresent}):E.Children.only(n),a=on(i.ref,I8(r));return typeof n=="function"||i.isPresent?E.cloneElement(r,{ref:a}):null};Ju.displayName="Presence";function N8(t){const[e,n]=E.useState(),i=E.useRef(null),r=E.useRef(t),a=E.useRef("none"),u=t?"mounted":"unmounted",[c,h]=M8(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const d=zf(i.current);a.current=c==="mounted"?d:"none"},[c]),ar(()=>{const d=i.current,m=r.current;if(m!==t){const S=a.current,b=zf(d);t?h("MOUNT"):b==="none"||d?.display==="none"?h("UNMOUNT"):h(m&&S!==b?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,h]),ar(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,y=b=>{const x=zf(i.current).includes(CSS.escape(b.animationName));if(b.target===e&&x&&(h("ANIMATION_END"),!r.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},S=b=>{b.target===e&&(a.current=zf(i.current))};return e.addEventListener("animationstart",S),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",S),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:E.useCallback(d=>{i.current=d?getComputedStyle(d):null,n(d)},[])}}function zf(t){return t?.animationName||"none"}function I8(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Kg="rovingFocusGroup.onEntryFocus",D8={bubbles:!1,cancelable:!0},ju="RovingFocusGroup",[sy,yD,O8]=HI(ju),[P8,_D]=zu(ju,[O8]),[k8,L8]=P8(ju),SD=E.forwardRef((t,e)=>w.jsx(sy.Provider,{scope:t.__scopeRovingFocusGroup,children:w.jsx(sy.Slot,{scope:t.__scopeRovingFocusGroup,children:w.jsx(U8,{...t,ref:e})})}));SD.displayName=ju;var U8=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:a,currentTabStopId:u,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:h,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...y}=t,S=E.useRef(null),b=on(e,S),C=GI(a),[x,A]=y_({prop:u,defaultProp:c??null,onChange:h,caller:ju}),[M,I]=E.useState(!1),N=Pi(d),D=yD(n),k=E.useRef(!1),[U,O]=E.useState(0);return E.useEffect(()=>{const q=S.current;if(q)return q.addEventListener(Kg,N),()=>q.removeEventListener(Kg,N)},[N]),w.jsx(k8,{scope:n,orientation:i,dir:C,loop:r,currentTabStopId:x,onItemFocus:E.useCallback(q=>A(q),[A]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>O(q=>q+1),[]),onFocusableItemRemove:E.useCallback(()=>O(q=>q-1),[]),children:w.jsx(zt.div,{tabIndex:M||U===0?-1:0,"data-orientation":i,...y,ref:b,style:{outline:"none",...t.style},onMouseDown:$e(t.onMouseDown,()=>{k.current=!0}),onFocus:$e(t.onFocus,q=>{const J=!k.current;if(q.target===q.currentTarget&&J&&!M){const Y=new CustomEvent(Kg,D8);if(q.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const W=D().filter(F=>F.focusable),re=W.find(F=>F.active),ie=W.find(F=>F.id===x),de=[re,ie,...W].filter(Boolean).map(F=>F.ref.current);ED(de,m)}}k.current=!1}),onBlur:$e(t.onBlur,()=>I(!1))})})}),bD="RovingFocusGroupItem",wD=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:a,children:u,...c}=t,h=mu(),d=a||h,m=L8(bD,n),y=m.currentTabStopId===d,S=yD(n),{onFocusableItemAdd:b,onFocusableItemRemove:C,currentTabStopId:x}=m;return E.useEffect(()=>{if(i)return b(),()=>C()},[i,b,C]),w.jsx(sy.ItemSlot,{scope:n,id:d,focusable:i,active:r,children:w.jsx(zt.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:$e(t.onMouseDown,A=>{i?m.onItemFocus(d):A.preventDefault()}),onFocus:$e(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:$e(t.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){m.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const M=$8(A,m.orientation,m.dir);if(M!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let N=S().filter(D=>D.focusable).map(D=>D.ref.current);if(M==="last")N.reverse();else if(M==="prev"||M==="next"){M==="prev"&&N.reverse();const D=N.indexOf(A.currentTarget);N=m.loop?H8(N,D+1):N.slice(D+1)}setTimeout(()=>ED(N))}}),children:typeof u=="function"?u({isCurrentTabStop:y,hasTabStop:x!=null}):u})})});wD.displayName=bD;var B8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function $8(t,e,n){const i=F8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return B8[i]}function ED(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function H8(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var G8=SD,V8=wD,z8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Zs=new WeakMap,qf=new WeakMap,Jf={},Yg=0,TD=function(t){return t&&(t.host||TD(t.parentNode))},q8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=TD(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},J8=function(t,e,n,i){var r=q8(e,Array.isArray(t)?t:[t]);Jf[n]||(Jf[n]=new WeakMap);var a=Jf[n],u=[],c=new Set,h=new Set(r),d=function(y){!y||c.has(y)||(c.add(y),d(y.parentNode))};r.forEach(d);var m=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(S){if(c.has(S))m(S);else try{var b=S.getAttribute(i),C=b!==null&&b!=="false",x=(Zs.get(S)||0)+1,A=(a.get(S)||0)+1;Zs.set(S,x),a.set(S,A),u.push(S),x===1&&C&&qf.set(S,!0),A===1&&S.setAttribute(n,"true"),C||S.setAttribute(i,"true")}catch(M){console.error("aria-hidden: cannot operate on ",S,M)}})};return m(e),c.clear(),Yg++,function(){u.forEach(function(y){var S=Zs.get(y)-1,b=a.get(y)-1;Zs.set(y,S),a.set(y,b),S||(qf.has(y)||y.removeAttribute(i),qf.delete(y)),b||y.removeAttribute(n)}),Yg--,Yg||(Zs=new WeakMap,Zs=new WeakMap,qf=new WeakMap,Jf={})}},j8=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=z8(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),J8(i,r,n,"aria-hidden")):function(){return null}},Ti=function(){return Ti=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ti.apply(this,arguments)};function CD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function K8(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var hd="right-scroll-bar-position",pd="width-before-scroll-bar",Y8="with-scroll-bars-hidden",X8="--removed-body-scroll-bar-size";function Xg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function W8(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var Q8=typeof window<"u"?E.useLayoutEffect:E.useEffect,Rx=new WeakMap;function Z8(t,e){var n=W8(null,function(i){return t.forEach(function(r){return Xg(r,i)})});return Q8(function(){var i=Rx.get(n);if(i){var r=new Set(i),a=new Set(t),u=n.current;r.forEach(function(c){a.has(c)||Xg(c,null)}),a.forEach(function(c){r.has(c)||Xg(c,u)})}Rx.set(n,t)},[t]),n}function eJ(t){return t}function tJ(t,e){e===void 0&&(e=eJ);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var u=e(a,i);return n.push(u),function(){n=n.filter(function(c){return c!==u})}},assignSyncMedium:function(a){for(i=!0;n.length;){var u=n;n=[],u.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){i=!0;var u=[];if(n.length){var c=n;n=[],c.forEach(a),u=n}var h=function(){var m=u;u=[],m.forEach(a)},d=function(){return Promise.resolve().then(h)};d(),n={push:function(m){u.push(m),d()},filter:function(m){return u=u.filter(m),n}}}};return r}function nJ(t){t===void 0&&(t={});var e=tJ(null);return e.options=Ti({async:!0,ssr:!1},t),e}var xD=function(t){var e=t.sideCar,n=CD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return E.createElement(i,Ti({},n))};xD.isSideCarExport=!0;function iJ(t,e){return t.useMedium(e),xD}var AD=nJ(),Wg=function(){},Uh=E.forwardRef(function(t,e){var n=E.useRef(null),i=E.useState({onScrollCapture:Wg,onWheelCapture:Wg,onTouchMoveCapture:Wg}),r=i[0],a=i[1],u=t.forwardProps,c=t.children,h=t.className,d=t.removeScrollBar,m=t.enabled,y=t.shards,S=t.sideCar,b=t.noRelative,C=t.noIsolation,x=t.inert,A=t.allowPinchZoom,M=t.as,I=M===void 0?"div":M,N=t.gapMode,D=CD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=S,U=Z8([n,e]),O=Ti(Ti({},D),r);return E.createElement(E.Fragment,null,m&&E.createElement(k,{sideCar:AD,removeScrollBar:d,shards:y,noRelative:b,noIsolation:C,inert:x,setCallbacks:a,allowPinchZoom:!!A,lockRef:n,gapMode:N}),u?E.cloneElement(E.Children.only(c),Ti(Ti({},O),{ref:U})):E.createElement(I,Ti({},O,{className:h,ref:U}),c))});Uh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Uh.classNames={fullWidth:pd,zeroRight:hd};var oJ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rJ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=oJ();return e&&t.setAttribute("nonce",e),t}function sJ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function aJ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var lJ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=rJ())&&(sJ(e,n),aJ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},uJ=function(){var t=lJ();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},RD=function(){var t=uJ(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},cJ={left:0,top:0,right:0,gap:0},Qg=function(t){return parseInt(t||"",10)||0},fJ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Qg(n),Qg(i),Qg(r)]},dJ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return cJ;var e=fJ(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},hJ=RD(),ma="data-scroll-locked",pJ=function(t,e,n,i){var r=t.left,a=t.top,u=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Y8,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(c,"px ").concat(i,`;
  }
  body[`).concat(ma,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hd,` {
    right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(pd,` {
    margin-right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(hd," .").concat(hd,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(pd," .").concat(pd,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ma,`] {
    `).concat(X8,": ").concat(c,`px;
  }
`)},Mx=function(){var t=parseInt(document.body.getAttribute(ma)||"0",10);return isFinite(t)?t:0},mJ=function(){E.useEffect(function(){return document.body.setAttribute(ma,(Mx()+1).toString()),function(){var t=Mx()-1;t<=0?document.body.removeAttribute(ma):document.body.setAttribute(ma,t.toString())}},[])},gJ=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;mJ();var a=E.useMemo(function(){return dJ(r)},[r]);return E.createElement(hJ,{styles:pJ(a,!e,r,n?"":"!important")})},ay=!1;if(typeof window<"u")try{var jf=Object.defineProperty({},"passive",{get:function(){return ay=!0,!0}});window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{ay=!1}var ea=ay?{passive:!1}:!1,vJ=function(t){return t.tagName==="TEXTAREA"},MD=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!vJ(t)&&n[e]==="visible")},yJ=function(t){return MD(t,"overflowY")},_J=function(t){return MD(t,"overflowX")},Nx=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=ND(t,i);if(r){var a=ID(t,i),u=a[1],c=a[2];if(u>c)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},SJ=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},bJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},ND=function(t,e){return t==="v"?yJ(e):_J(e)},ID=function(t,e){return t==="v"?SJ(e):bJ(e)},wJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},EJ=function(t,e,n,i,r){var a=wJ(t,window.getComputedStyle(e).direction),u=a*i,c=n.target,h=e.contains(c),d=!1,m=u>0,y=0,S=0;do{if(!c)break;var b=ID(t,c),C=b[0],x=b[1],A=b[2],M=x-A-a*C;(C||M)&&ND(t,c)&&(y+=M,S+=C);var I=c.parentNode;c=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!h&&c!==document.body||h&&(e.contains(c)||e===c));return(m&&Math.abs(y)<1||!m&&Math.abs(S)<1)&&(d=!0),d},Kf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ix=function(t){return[t.deltaX,t.deltaY]},Dx=function(t){return t&&"current"in t?t.current:t},TJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},CJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},xJ=0,ta=[];function AJ(t){var e=E.useRef([]),n=E.useRef([0,0]),i=E.useRef(),r=E.useState(xJ++)[0],a=E.useState(RD)[0],u=E.useRef(t);E.useEffect(function(){u.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=K8([t.lockRef.current],(t.shards||[]).map(Dx),!0).filter(Boolean);return x.forEach(function(A){return A.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=E.useCallback(function(x,A){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!u.current.allowPinchZoom;var M=Kf(x),I=n.current,N="deltaX"in x?x.deltaX:I[0]-M[0],D="deltaY"in x?x.deltaY:I[1]-M[1],k,U=x.target,O=Math.abs(N)>Math.abs(D)?"h":"v";if("touches"in x&&O==="h"&&U.type==="range")return!1;var q=window.getSelection(),J=q&&q.anchorNode,Y=J?J===U||J.contains(U):!1;if(Y)return!1;var W=Nx(O,U);if(!W)return!0;if(W?k=O:(k=O==="v"?"h":"v",W=Nx(O,U)),!W)return!1;if(!i.current&&"changedTouches"in x&&(N||D)&&(i.current=k),!k)return!0;var re=i.current||k;return EJ(re,A,x,re==="h"?N:D)},[]),h=E.useCallback(function(x){var A=x;if(!(!ta.length||ta[ta.length-1]!==a)){var M="deltaY"in A?Ix(A):Kf(A),I=e.current.filter(function(k){return k.name===A.type&&(k.target===A.target||A.target===k.shadowParent)&&TJ(k.delta,M)})[0];if(I&&I.should){A.cancelable&&A.preventDefault();return}if(!I){var N=(u.current.shards||[]).map(Dx).filter(Boolean).filter(function(k){return k.contains(A.target)}),D=N.length>0?c(A,N[0]):!u.current.noIsolation;D&&A.cancelable&&A.preventDefault()}}},[]),d=E.useCallback(function(x,A,M,I){var N={name:x,delta:A,target:M,should:I,shadowParent:RJ(M)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(D){return D!==N})},1)},[]),m=E.useCallback(function(x){n.current=Kf(x),i.current=void 0},[]),y=E.useCallback(function(x){d(x.type,Ix(x),x.target,c(x,t.lockRef.current))},[]),S=E.useCallback(function(x){d(x.type,Kf(x),x.target,c(x,t.lockRef.current))},[]);E.useEffect(function(){return ta.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:S}),document.addEventListener("wheel",h,ea),document.addEventListener("touchmove",h,ea),document.addEventListener("touchstart",m,ea),function(){ta=ta.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,ea),document.removeEventListener("touchmove",h,ea),document.removeEventListener("touchstart",m,ea)}},[]);var b=t.removeScrollBar,C=t.inert;return E.createElement(E.Fragment,null,C?E.createElement(a,{styles:CJ(r)}):null,b?E.createElement(gJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function RJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const MJ=iJ(AD,AJ);var DD=E.forwardRef(function(t,e){return E.createElement(Uh,Ti({},t,{ref:e,sideCar:MJ}))});DD.classNames=Uh.classNames;var ly=["Enter"," "],NJ=["ArrowDown","PageUp","Home"],OD=["ArrowUp","PageDown","End"],IJ=[...NJ,...OD],DJ={ltr:[...ly,"ArrowRight"],rtl:[...ly,"ArrowLeft"]},OJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ku="Menu",[yu,PJ,kJ]=HI(Ku),[as,PD]=zu(Ku,[kJ,aD,_D]),Yu=aD(),kD=_D(),[LD,gr]=as(Ku),[LJ,Xu]=as(Ku),UD=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:a,modal:u=!0}=t,c=Yu(e),[h,d]=E.useState(null),m=E.useRef(!1),y=Pi(a),S=GI(r);return E.useEffect(()=>{const b=()=>{m.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>m.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),w.jsx(gD,{...c,children:w.jsx(LD,{scope:e,open:n,onOpenChange:y,content:h,onContentChange:d,children:w.jsx(LJ,{scope:e,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:S,modal:u,children:i})})})};UD.displayName=Ku;var UJ="MenuAnchor",A_=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Yu(n);return w.jsx(C8,{...r,...i,ref:e})});A_.displayName=UJ;var R_="MenuPortal",[BJ,BD]=as(R_,{forceMount:void 0}),FD=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,a=gr(R_,e);return w.jsx(BJ,{scope:e,forceMount:n,children:w.jsx(Ju,{present:n||a.open,children:w.jsx(vD,{asChild:!0,container:r,children:i})})})};FD.displayName=R_;var zn="MenuContent",[FJ,M_]=as(zn),$D=E.forwardRef((t,e)=>{const n=BD(zn,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,a=gr(zn,t.__scopeMenu),u=Xu(zn,t.__scopeMenu);return w.jsx(yu.Provider,{scope:t.__scopeMenu,children:w.jsx(Ju,{present:i||a.open,children:w.jsx(yu.Slot,{scope:t.__scopeMenu,children:u.modal?w.jsx($J,{...r,ref:e}):w.jsx(HJ,{...r,ref:e})})})})}),$J=E.forwardRef((t,e)=>{const n=gr(zn,t.__scopeMenu),i=E.useRef(null),r=on(e,i);return E.useEffect(()=>{const a=i.current;if(a)return j8(a)},[]),w.jsx(N_,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$e(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),HJ=E.forwardRef((t,e)=>{const n=gr(zn,t.__scopeMenu);return w.jsx(N_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),GJ=Vd("MenuContent.ScrollLock"),N_=E.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:u,disableOutsidePointerEvents:c,onEntryFocus:h,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:b,disableOutsideScroll:C,...x}=t,A=gr(zn,n),M=Xu(zn,n),I=Yu(n),N=kD(n),D=PJ(n),[k,U]=E.useState(null),O=E.useRef(null),q=on(e,O,A.onContentChange),J=E.useRef(0),Y=E.useRef(""),W=E.useRef(0),re=E.useRef(null),ie=E.useRef("right"),ae=E.useRef(0),de=C?DD:E.Fragment,F=C?{as:GJ,allowPinchZoom:!0}:void 0,Q=ne=>{const ce=Y.current+ne,L=D().filter(ve=>!ve.disabled),K=document.activeElement,se=L.find(ve=>ve.ref.current===K)?.textValue,le=L.map(ve=>ve.textValue),me=ej(le,ce,se),be=L.find(ve=>ve.textValue===me)?.ref.current;(function ve(qe){Y.current=qe,window.clearTimeout(J.current),qe!==""&&(J.current=window.setTimeout(()=>ve(""),1e3))})(ce),be&&setTimeout(()=>be.focus())};E.useEffect(()=>()=>window.clearTimeout(J.current),[]),X6();const ee=E.useCallback(ne=>ie.current===re.current?.side&&nj(ne,re.current?.area),[]);return w.jsx(FJ,{scope:n,searchRef:Y,onItemEnter:E.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),onItemLeave:E.useCallback(ne=>{ee(ne)||(O.current?.focus(),U(null))},[ee]),onTriggerLeave:E.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),pointerGraceTimerRef:W,onPointerGraceIntentChange:E.useCallback(ne=>{re.current=ne},[]),children:w.jsx(de,{...F,children:w.jsx(JI,{asChild:!0,trapped:r,onMountAutoFocus:$e(a,ne=>{ne.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:w.jsx(zI,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:b,children:w.jsx(G8,{asChild:!0,...N,dir:M.dir,orientation:"vertical",loop:i,currentTabStopId:k,onCurrentTabStopIdChange:U,onEntryFocus:$e(h,ne=>{M.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(x8,{role:"menu","aria-orientation":"vertical","data-state":i1(A.open),"data-radix-menu-content":"",dir:M.dir,...I,...x,ref:q,style:{outline:"none",...x.style},onKeyDown:$e(x.onKeyDown,ne=>{const L=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,K=ne.ctrlKey||ne.altKey||ne.metaKey,se=ne.key.length===1;L&&(ne.key==="Tab"&&ne.preventDefault(),!K&&se&&Q(ne.key));const le=O.current;if(ne.target!==le||!IJ.includes(ne.key))return;ne.preventDefault();const be=D().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);OD.includes(ne.key)&&be.reverse(),QJ(be)}),onBlur:$e(t.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(J.current),Y.current="")}),onPointerMove:$e(t.onPointerMove,_u(ne=>{const ce=ne.target,L=ae.current!==ne.clientX;if(ne.currentTarget.contains(ce)&&L){const K=ne.clientX>ae.current?"right":"left";ie.current=K,ae.current=ne.clientX}}))})})})})})})});$D.displayName=zn;var VJ="MenuGroup",I_=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return w.jsx(zt.div,{role:"group",...i,ref:e})});I_.displayName=VJ;var zJ="MenuLabel",HD=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return w.jsx(zt.div,{...i,ref:e})});HD.displayName=zJ;var Kd="MenuItem",Ox="menu.itemSelect",Bh=E.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,a=E.useRef(null),u=Xu(Kd,t.__scopeMenu),c=M_(Kd,t.__scopeMenu),h=on(e,a),d=E.useRef(!1),m=()=>{const y=a.current;if(!n&&y){const S=new CustomEvent(Ox,{bubbles:!0,cancelable:!0});y.addEventListener(Ox,b=>i?.(b),{once:!0}),$I(y,S),S.defaultPrevented?d.current=!1:u.onClose()}};return w.jsx(GD,{...r,ref:h,disabled:n,onClick:$e(t.onClick,m),onPointerDown:y=>{t.onPointerDown?.(y),d.current=!0},onPointerUp:$e(t.onPointerUp,y=>{d.current||y.currentTarget?.click()}),onKeyDown:$e(t.onKeyDown,y=>{const S=c.searchRef.current!=="";n||S&&y.key===" "||ly.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});Bh.displayName=Kd;var GD=E.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...a}=t,u=M_(Kd,n),c=kD(n),h=E.useRef(null),d=on(e,h),[m,y]=E.useState(!1),[S,b]=E.useState("");return E.useEffect(()=>{const C=h.current;C&&b((C.textContent??"").trim())},[a.children]),w.jsx(yu.ItemSlot,{scope:n,disabled:i,textValue:r??S,children:w.jsx(V8,{asChild:!0,...c,focusable:!i,children:w.jsx(zt.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...a,ref:d,onPointerMove:$e(t.onPointerMove,_u(C=>{i?u.onItemLeave(C):(u.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(t.onPointerLeave,_u(C=>u.onItemLeave(C))),onFocus:$e(t.onFocus,()=>y(!0)),onBlur:$e(t.onBlur,()=>y(!1))})})})}),qJ="MenuCheckboxItem",VD=E.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return w.jsx(KD,{scope:t.__scopeMenu,checked:n,children:w.jsx(Bh,{role:"menuitemcheckbox","aria-checked":Yd(n)?"mixed":n,...r,ref:e,"data-state":P_(n),onSelect:$e(r.onSelect,()=>i?.(Yd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});VD.displayName=qJ;var zD="MenuRadioGroup",[JJ,jJ]=as(zD,{value:void 0,onValueChange:()=>{}}),qD=E.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,a=Pi(i);return w.jsx(JJ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:w.jsx(I_,{...r,ref:e})})});qD.displayName=zD;var JD="MenuRadioItem",jD=E.forwardRef((t,e)=>{const{value:n,...i}=t,r=jJ(JD,t.__scopeMenu),a=n===r.value;return w.jsx(KD,{scope:t.__scopeMenu,checked:a,children:w.jsx(Bh,{role:"menuitemradio","aria-checked":a,...i,ref:e,"data-state":P_(a),onSelect:$e(i.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});jD.displayName=JD;var D_="MenuItemIndicator",[KD,KJ]=as(D_,{checked:!1}),YD=E.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,a=KJ(D_,n);return w.jsx(Ju,{present:i||Yd(a.checked)||a.checked===!0,children:w.jsx(zt.span,{...r,ref:e,"data-state":P_(a.checked)})})});YD.displayName=D_;var YJ="MenuSeparator",XD=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return w.jsx(zt.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});XD.displayName=YJ;var XJ="MenuArrow",WD=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Yu(n);return w.jsx(A8,{...r,...i,ref:e})});WD.displayName=XJ;var O_="MenuSub",[WJ,QD]=as(O_),ZD=t=>{const{__scopeMenu:e,children:n,open:i=!1,onOpenChange:r}=t,a=gr(O_,e),u=Yu(e),[c,h]=E.useState(null),[d,m]=E.useState(null),y=Pi(r);return E.useEffect(()=>(a.open===!1&&y(!1),()=>y(!1)),[a.open,y]),w.jsx(gD,{...u,children:w.jsx(LD,{scope:e,open:i,onOpenChange:y,content:d,onContentChange:m,children:w.jsx(WJ,{scope:e,contentId:mu(),triggerId:mu(),trigger:c,onTriggerChange:h,children:n})})})};ZD.displayName=O_;var Ql="MenuSubTrigger",e1=E.forwardRef((t,e)=>{const n=gr(Ql,t.__scopeMenu),i=Xu(Ql,t.__scopeMenu),r=QD(Ql,t.__scopeMenu),a=M_(Ql,t.__scopeMenu),u=E.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:h}=a,d={__scopeMenu:t.__scopeMenu},m=E.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return E.useEffect(()=>m,[m]),E.useEffect(()=>{const y=c.current;return()=>{window.clearTimeout(y),h(null)}},[c,h]),w.jsx(A_,{asChild:!0,...d,children:w.jsx(GD,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":i1(n.open),...t,ref:Dh(e,r.onTriggerChange),onClick:y=>{t.onClick?.(y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$e(t.onPointerMove,_u(y=>{a.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!n.open&&!u.current&&(a.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:$e(t.onPointerLeave,_u(y=>{m();const S=n.content?.getBoundingClientRect();if(S){const b=n.content?.dataset.side,C=b==="right",x=C?-5:5,A=S[C?"left":"right"],M=S[C?"right":"left"];a.onPointerGraceIntentChange({area:[{x:y.clientX+x,y:y.clientY},{x:A,y:S.top},{x:M,y:S.top},{x:M,y:S.bottom},{x:A,y:S.bottom}],side:b}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(y),y.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:$e(t.onKeyDown,y=>{const S=a.searchRef.current!=="";t.disabled||S&&y.key===" "||DJ[i.dir].includes(y.key)&&(n.onOpenChange(!0),n.content?.focus(),y.preventDefault())})})})});e1.displayName=Ql;var t1="MenuSubContent",n1=E.forwardRef((t,e)=>{const n=BD(zn,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,a=gr(zn,t.__scopeMenu),u=Xu(zn,t.__scopeMenu),c=QD(t1,t.__scopeMenu),h=E.useRef(null),d=on(e,h);return w.jsx(yu.Provider,{scope:t.__scopeMenu,children:w.jsx(Ju,{present:i||a.open,children:w.jsx(yu.Slot,{scope:t.__scopeMenu,children:w.jsx(N_,{id:c.contentId,"aria-labelledby":c.triggerId,...r,ref:d,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{u.isUsingKeyboardRef.current&&h.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:$e(t.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:$e(t.onEscapeKeyDown,m=>{u.onClose(),m.preventDefault()}),onKeyDown:$e(t.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),S=OJ[u.dir].includes(m.key);y&&S&&(a.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});n1.displayName=t1;function i1(t){return t?"open":"closed"}function Yd(t){return t==="indeterminate"}function P_(t){return Yd(t)?"indeterminate":t?"checked":"unchecked"}function QJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function ZJ(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function ej(t,e,n){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let u=ZJ(t,Math.max(a,0));r.length===1&&(u=u.filter(d=>d!==n));const h=u.find(d=>d.toLowerCase().startsWith(r.toLowerCase()));return h!==n?h:void 0}function tj(t,e){const{x:n,y:i}=t;let r=!1;for(let a=0,u=e.length-1;a<e.length;u=a++){const c=e[a],h=e[u],d=c.x,m=c.y,y=h.x,S=h.y;m>i!=S>i&&n<(y-d)*(i-m)/(S-m)+d&&(r=!r)}return r}function nj(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return tj(n,e)}function _u(t){return e=>e.pointerType==="mouse"?t(e):void 0}var ij=UD,oj=A_,rj=FD,sj=$D,aj=I_,lj=HD,uj=Bh,cj=VD,fj=qD,dj=jD,hj=YD,pj=XD,mj=WD,gj=ZD,vj=e1,yj=n1,Fh="DropdownMenu",[_j]=zu(Fh,[PD]),Bt=PD(),[Sj,o1]=_j(Fh),r1=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:a,onOpenChange:u,modal:c=!0}=t,h=Bt(e),d=E.useRef(null),[m,y]=y_({prop:r,defaultProp:a??!1,onChange:u,caller:Fh});return w.jsx(Sj,{scope:e,triggerId:mu(),triggerRef:d,contentId:mu(),open:m,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(S=>!S),[y]),modal:c,children:w.jsx(ij,{...h,open:m,onOpenChange:y,dir:i,modal:c,children:n})})};r1.displayName=Fh;var s1="DropdownMenuTrigger",a1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,a=o1(s1,n),u=Bt(n);return w.jsx(oj,{asChild:!0,...u,children:w.jsx(zt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Dh(e,a.triggerRef),onPointerDown:$e(t.onPointerDown,c=>{!i&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:$e(t.onKeyDown,c=>{i||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});a1.displayName=s1;var bj="DropdownMenuPortal",l1=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Bt(e);return w.jsx(rj,{...i,...n})};l1.displayName=bj;var u1="DropdownMenuContent",c1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=o1(u1,n),a=Bt(n),u=E.useRef(!1);return w.jsx(sj,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...i,ref:e,onCloseAutoFocus:$e(t.onCloseAutoFocus,c=>{u.current||r.triggerRef.current?.focus(),u.current=!1,c.preventDefault()}),onInteractOutside:$e(t.onInteractOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,m=h.button===2||d;(!r.modal||m)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});c1.displayName=u1;var wj="DropdownMenuGroup",Ej=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(aj,{...r,...i,ref:e})});Ej.displayName=wj;var Tj="DropdownMenuLabel",Cj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(lj,{...r,...i,ref:e})});Cj.displayName=Tj;var xj="DropdownMenuItem",Aj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(uj,{...r,...i,ref:e})});Aj.displayName=xj;var Rj="DropdownMenuCheckboxItem",Mj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(cj,{...r,...i,ref:e})});Mj.displayName=Rj;var Nj="DropdownMenuRadioGroup",Ij=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(fj,{...r,...i,ref:e})});Ij.displayName=Nj;var Dj="DropdownMenuRadioItem",Oj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(dj,{...r,...i,ref:e})});Oj.displayName=Dj;var Pj="DropdownMenuItemIndicator",kj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(hj,{...r,...i,ref:e})});kj.displayName=Pj;var Lj="DropdownMenuSeparator",Uj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(pj,{...r,...i,ref:e})});Uj.displayName=Lj;var Bj="DropdownMenuArrow",Fj=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(mj,{...r,...i,ref:e})});Fj.displayName=Bj;var $j=t=>{const{__scopeDropdownMenu:e,children:n,open:i,onOpenChange:r,defaultOpen:a}=t,u=Bt(e),[c,h]=y_({prop:i,defaultProp:a??!1,onChange:r,caller:"DropdownMenuSub"});return w.jsx(gj,{...u,open:c,onOpenChange:h,children:n})},Hj="DropdownMenuSubTrigger",f1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(vj,{...r,...i,ref:e})});f1.displayName=Hj;var Gj="DropdownMenuSubContent",d1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return w.jsx(yj,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});d1.displayName=Gj;var Vj=r1,zj=a1,qj=l1,Jj=c1,Px=$j,kx=f1,Lx=d1;const jj=Ze(({scene:t})=>{if(!t.sceneJson||!t.sceneJson.data)return null;const e=t.sceneJson.data.tags,n=t.project?.artbook,i=a=>{t.addTag(a)};if(!n)return null;const r=a=>w.jsxs(Vj,{children:[w.jsx(zj,{className:"dropdown-trigger",children:"Add Tag"}),w.jsx(qj,{children:w.jsx(Jj,{className:"dropdown-content",align:"start",children:Object.entries(a).map(([u,c])=>w.jsxs(Px,{children:[w.jsx(kx,{className:"submenu-trigger",children:u}),w.jsx(Lx,{className:"dropdown-content",children:Object.entries(c).map(([h,d])=>w.jsxs(Px,{children:[w.jsx(kx,{className:"submenu-trigger",children:h}),w.jsx(Lx,{className:"dropdown-content",children:d.map(m=>w.jsx(N6,{art:m,onClick:()=>i(m.path)},m.path))})]},h))})]},u))})})]});return w.jsx(ka,{label:"Tags",headerExtra:w.jsxs("div",{className:"d-flex align-items-center gap-2",children:[r(n.data),w.jsx(Ih,{onClick:()=>{t.generateTags()},className:"btn-outline-success",label:"Generate Tags",is_loading:t.is_generating_tags}),w.jsx(it,{onClick:()=>t.project?.artbook?.log(),label:"Log"})]}),children:e.length?w.jsx("ul",{className:"list-group list-group-flush",children:e.map((a,u)=>{const c=n.getTag(a);return c?w.jsx("li",{className:"list-group-item",children:w.jsx(M6,{art:c,scene:t})},u):null})}):w.jsx("div",{children:"No tags yet."})})}),Ca=({value:t,options:e,onChange:n,label:i,className:r=""})=>w.jsxs("div",{className:"btn-group",role:"group",children:[i&&w.jsx("span",{className:"btn btn-sm btn-outline-secondary disabled",children:i}),w.jsx("div",{className:`btn btn-sm btn-outline-secondary p-0 ${r}`,children:w.jsx("select",{className:"form-select form-select-sm border-0 rounded-0",value:t,onChange:a=>n?.(a.target.value),children:e.map(a=>w.jsx("option",{value:a,children:a},a))})})]}),ls=({isLoading:t,className:e="",asButton:n=!1})=>{const i=w.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{animation:t?void 0:"none",borderColor:t?void 0:"#6c757d"}});return n?w.jsx("button",{type:"button",className:`btn btn-sm btn-outline-secondary disabled d-flex align-items-center justify-content-center ${e}`,tabIndex:-1,style:{pointerEvents:"none"},children:i}):w.jsx("span",{className:e,children:i})},Wu=({buttons:t,content:e,className:n=""})=>{const[i,r]=E.useState(!1);return w.jsxs("div",{className:`w-100 ${n}`,style:{display:"inline-block"},children:[w.jsxs("div",{className:"btn-group",role:"group",children:[t,w.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>r(a=>!a),"aria-label":"Toggle settings",type:"button",style:{borderBottomRightRadius:i?0:void 0},children:""})]}),i&&w.jsx("div",{className:"w-100 border p-2",style:{borderTopLeftRadius:0,borderTopRightRadius:5,borderBottomLeftRadius:5,borderBottomRightRadius:5,backgroundColor:"#383838ff",marginTop:0},children:e})]})},Kj=Ze(({scene:t})=>{if(!t.sceneJson)return w.jsx("div",{children:"No scene data available."});const e=async()=>{window.confirm(`Are you sure you want to delete scene "${t.folder.name}"?`)&&await t.delete()},n=async()=>{t.createShotsFromShotsJson()};return w.jsxs("div",{children:[w.jsxs("div",{style:{marginBottom:"10px"},children:[w.jsx(it,{onClick:e,label:"Delete Scene",className:"btn-outline-danger"}),w.jsx(it,{onClick:()=>t.log(),label:"LOG"})]}),w.jsx(Wu,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{const i=await t.generateShotsJson();t.sceneJson?.updateField("shotsjson",i)},children:" Split Into Shots "}),w.jsx(Ca,{value:t.project.workflows.split_scene_into_shots.model,options:LI,onChange:i=>{t.project.updateWorkflow("split_scene_into_shots","model",i)}}),w.jsx(ls,{isLoading:t.is_generating_shotsjson,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[w.jsx(Vt,{localJson:t.sceneJson,field:"split_prompt",fitHeight:!0}),w.jsx(Vt,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/system_message",fitHeight:!0}),w.jsx(Vt,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/prompt",fitHeight:!0})]})}),w.jsx(Vt,{localJson:t.sceneJson,field:"script",fitHeight:!0}),w.jsx(Vt,{localJson:t.sceneJson,field:"shotsjson",fitHeight:!0,headerExtra:w.jsx(it,{onClick:n,label:"Create Shots"})}),w.jsx(jj,{scene:t}),w.jsx("div",{style:{height:"500px"}})]})}),h1=({label:t,value:e,onToggle:n,useIndicator:i=!1})=>i?w.jsx("div",{onClick:()=>n(!e),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:e?"green":"transparent",border:"2px solid green",cursor:"pointer"}}):w.jsx("button",{className:`btn btn-sm ${e?"btn-success":"btn-outline-secondary"}`,onClick:()=>n(!e),children:t}),Zg="https://cdn.pixabay.com/photo/2021/05/09/06/07/dog-6240043_1280.jpg",Yj=Ze(({shot:t,isSelected:e,onClick:n})=>{const[i,r]=E.useState(Zg);return E.useEffect(()=>{let a=!1;return(async()=>{if(t.srcImage)try{const c=await t.srcImage.getUrlObject();!a&&c&&r(c)}catch(c){console.error("Failed to load srcImage URL:",c),a||r(Zg)}else r(Zg)})(),()=>{a=!0}},[t.srcImage]),w.jsxs("div",{className:"flex-shrink-0 position-relative d-flex align-items-center justify-content-center",style:{height:"100%",cursor:"pointer",borderWidth:e?2:0,borderColor:e?"#04914a":"#dee2e6",borderStyle:"solid"},onClick:()=>n(t),children:[w.jsx("img",{src:i,alt:t.folder.name,className:"img-fluid",style:{height:"100%",width:"auto",objectFit:"contain",display:"block"}}),w.jsx("div",{className:"position-absolute text-white px-1",style:{bottom:0,left:0,backgroundColor:"rgba(0,0,0,0.5)",fontSize:"0.75rem",borderTopRightRadius:"4px"},children:t.folder.name}),w.jsx("div",{className:"position-absolute",style:{top:2,right:2},onClick:a=>a.stopPropagation(),children:w.jsx(h1,{label:"Finished",value:!!t.shotJson?.data?.finished,useIndicator:!0,onToggle:a=>{t.shotJson&&t.shotJson.updateField("finished",a)}})})]})}),Xj=({initialHeight:t=80,minHeight:e=30,children:n})=>{const[i,r]=E.useState(t),a=E.useRef(null),u=E.useRef(!1),c=y=>{u.current=!0,y.preventDefault()},h=y=>{if(!u.current||!a.current)return;const S=a.current.getBoundingClientRect(),b=y.clientY-S.top;b>e&&r(b)},d=()=>{u.current=!1};E.useEffect(()=>(window.addEventListener("mousemove",h),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",d)}),[]);const m=6;return w.jsxs("div",{ref:a,className:"position-relative",style:{height:`${i}px`},children:[w.jsx("div",{style:{height:"100%",paddingBottom:`${m}px`,boxSizing:"border-box"},children:n}),w.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:`${m}px`,cursor:"ns-resize",zIndex:10,backgroundColor:"#0d6efd",opacity:.5},onMouseDown:c})]})},Wj={submitted:"gray",processing:"orange",succeed:"green",failed:"red"},p1=Ze(({task:t,show_path:e=!1})=>{const n=t.status,i=Wj[n]??"gray";return w.jsx("div",{className:"card mb-0",children:w.jsxs("div",{className:"card-body d-flex align-items-center justify-content-between py-0",children:[w.jsxs("div",{className:"d-flex align-items-center gap-2",children:[w.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:i}}),e&&w.jsx("span",{className:"text-muted",children:t.shot.scene.folder.name+"/"+t.shot.folder.name+"/"}),w.jsx("span",{className:"fw-bold",children:t.id}),w.jsx("span",{className:"text-muted",children:n})]}),w.jsxs("div",{className:"d-flex gap-0",children:[w.jsx("span",{className:"text-muted me-2",children:t._status_log}),w.jsx(it,{label:"Check Status",className:"btn-outline-primary btn-sm rounded-0",onClick:()=>{t.check_status()}}),w.jsx(it,{label:"Delete",className:"btn-outline-danger btn-sm rounded-0",onClick:()=>{window.confirm(`Delete task ${t.id}?`)&&t.delete()}}),w.jsx(it,{label:"Log",className:"btn-outline-secondary btn-sm rounded-0",onClick:()=>{t.log()}}),w.jsx(ls,{isLoading:t.is_checking_status,asButton:!0})]})]})})}),Ux=Ze(({shot:t})=>!t.tasks||t.tasks.length===0?w.jsx("div",{className:"mt-2 text-muted",children:"No tasks"}):w.jsx(ka,{label:`Tasks (${t.tasks.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:w.jsx("div",{className:"d-flex flex-column gap-0",children:t.tasks.map(e=>w.jsx(p1,{task:e},e.id))})})),Qj=({label:t="Media Gallery",children:e,defaultCollapsed:n=!1,className:i="",headerExtra:r,editWindow:a})=>w.jsxs(ka,{label:t,defaultCollapsed:n,className:i,headerExtra:r,children:[w.jsx("div",{className:"d-flex flex-wrap gap-2",children:e}),a&&w.jsx("div",{className:"mb-3",children:a})]}),m1=({localImage:t,height:e=150,topRightExtra:n,onClick:i,isSelected:r=!1,isPicked:a=!1,zoomOnHover:u=!1})=>{const[c,h]=E.useState(null),[d,m]=E.useState(!1);return E.useEffect(()=>{let y=!0;return(async()=>{try{const b=await t.getUrlObject();y&&b&&h(b)}catch(b){console.error("Error loading LocalImage",b)}})(),()=>{y=!1}},[t]),c?w.jsxs("div",{className:"position-relative d-inline-block",style:{height:`${e}px`,cursor:"pointer",outline:a?"3px solid #085db7":"none",outlineOffset:-3},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[r&&w.jsx("div",{style:{position:"absolute",top:5,left:5,width:20,height:20,borderRadius:"50%",backgroundColor:"limegreen",border:"2px solid white",zIndex:20}}),w.jsx("img",{src:c,alt:"Media",className:"img-fluid",onClick:i,style:{height:`${e}px`,width:"auto",objectFit:"contain",display:"block"}}),n&&d&&w.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px",zIndex:10,display:"flex",gap:"5px"},children:n}),d&&u&&w.jsx("img",{src:c,style:{position:"absolute",top:"100%",left:0,width:400,zIndex:50,borderRadius:6,boxShadow:"0 10px 30px rgba(0,0,0,0.4)"}})]}):w.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded p-2",style:{height:`${e}px`,width:"auto"},children:"Loading..."})},$h=({localVideo:t,height:e=250,fillParent:n=!1,topRightExtra:i,onClick:r,autoPlay:a=!0,loop:u=!0,muted:c=!0,isSelected:h=!1,isPicked:d=!1})=>{const[m,y]=E.useState(null),[S,b]=E.useState(!1);return E.useEffect(()=>{let C=!0;return(async()=>{try{const A=await t.getUrlObject();C&&A&&y(A)}catch(A){console.error("Error loading LocalVideo",A)}})(),()=>{C=!1,t.revokeUrl()}},[t]),m?w.jsxs("div",{className:"position-relative d-inline-block",style:{height:n?"100%":`${e}px`,width:n?"100%":"auto",cursor:"pointer",outline:d?"3px solid #085db7":"none",outlineOffset:-3},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[h&&w.jsx("div",{style:{position:"absolute",top:5,left:5,width:20,height:20,borderRadius:"50%",backgroundColor:"limegreen",border:"2px solid white",zIndex:20}}),w.jsx("video",{src:m,onClick:r,autoPlay:a,loop:u,muted:c,style:{height:n?"100%":`${e}px`,width:n?"100%":"auto",objectFit:"contain",display:"block"}}),i&&S&&w.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px",zIndex:10,display:"flex",gap:"5px"},children:i})]}):w.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded p-2",style:{height:`${e}px`,width:"auto"},children:"Loading..."})},g1=({localAudio:t,height:e=250,width:n=250,topRightExtra:i,onClick:r,autoPlay:a=!1,loop:u=!1,muted:c=!1,isSelected:h=!1,isPicked:d=!1})=>{const[m,y]=E.useState(null);return E.useEffect(()=>{let S=!0;return(async()=>{try{const C=await t.getUrlObject();S&&C&&y(C)}catch(C){console.error("Error loading LocalAudio",C)}})(),()=>{S=!1,t.revokeUrl()}},[t]),w.jsxs("div",{className:"position-relative d-inline-flex flex-column align-items-center justify-content-center",style:{height:e,width:n,cursor:"pointer",outline:d?"3px solid #085db7":"none",outlineOffset:-3,paddingTop:"20px",paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px"},onClick:r,children:[w.jsx("div",{className:"text-center text-truncate w-100",style:{fontSize:"0.8rem",marginBottom:"5px"},title:t.name,children:t.name}),h&&w.jsx("div",{style:{position:"absolute",top:25,left:5,width:20,height:20,borderRadius:"50%",backgroundColor:"limegreen",border:"2px solid white",zIndex:20}}),m?w.jsx("audio",{src:m,controls:!0,autoPlay:a,loop:u,muted:c,style:{width:"100%",height:"50px"}}):w.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded w-100",style:{height:e},children:"Loading..."}),i&&w.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px",zIndex:10,display:"flex",gap:"5px"},children:i})]})},Su=Ze(({mediaItem:t,height:e=300,onSelectMedia:n,topRightExtra:i,isSelected:r=!1,isPicked:a=!1,label:u=""})=>{const c=()=>u?w.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-dark text-white px-2 py-1 rounded small text-nowrap opacity-75 pe-none mb-1",children:u}):null,h=()=>t.tags?.length?w.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x d-flex flex-wrap gap-1 justify-center mb-1",style:{maxWidth:"90%"},children:t.tags.map((d,m)=>w.jsx("div",{className:"bg-dark text-white px-2 py-1 rounded small text-nowrap opacity-75",style:{cursor:"pointer"},onClick:()=>t.removeTag(d),children:d},`${d}-${m}`))}):null;return t instanceof mo?w.jsxs("div",{className:"position-relative d-inline-block",children:[w.jsx(m1,{localImage:t,height:e,onClick:()=>n?.(t),topRightExtra:i,isSelected:r,isPicked:a},t.path),c(),h()]}):t instanceof $u?w.jsxs("div",{className:"position-relative d-inline-block",children:[w.jsx($h,{localVideo:t,height:e,onClick:()=>n?.(t),topRightExtra:i,isSelected:r,isPicked:a},t.path),c(),h()]}):t instanceof _h?w.jsxs("div",{className:"position-relative d-inline-block",children:[w.jsx(g1,{localAudio:t,height:e,onClick:()=>n?.(t),topRightExtra:i,isSelected:r,isPicked:a},t.path),c(),h()]}):null}),Zj=({width:t=400,height:e=200,onDrop:n,children:i})=>{const[r,a]=E.useState(!1),u=d=>{d.preventDefault(),a(!0)},c=()=>{a(!1)},h=d=>{d.preventDefault(),a(!1);const m=Array.from(d.dataTransfer.files);m.length>0&&n(m)};return w.jsx("div",{className:`drop-area ${r?"dragging":""}`,style:{width:t,height:e,border:r?"2px solid #42a5f5":"2px dashed #606060",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:r?"#294457":"#2a2a31",boxShadow:r?"0 0 10px rgba(66,165,245,0.5)":"none",transition:"all 0.2s ease-in-out"},onDragOver:u,onDragLeave:c,onDrop:h,children:i||w.jsx("span",{style:{display:"block",textAlign:"center",width:"100%",color:"#5e727e"},children:"Drag and Drop Here"})})};function at(t,e="Assertion error"){if(!t)throw Error(e)}function uy(t,e){return e.sort(t==="horizontal"?eK:tK)}function eK(t,e){const n=t.element.offsetLeft-e.element.offsetLeft;return n!==0?n:t.element.offsetWidth-e.element.offsetWidth}function tK(t,e){const n=t.element.offsetTop-e.element.offsetTop;return n!==0?n:t.element.offsetHeight-e.element.offsetHeight}function Hh({group:t}){const{orientation:e,panels:n}=t;return n.reduce((i,r)=>(i+=e==="horizontal"?r.element.offsetWidth:r.element.offsetHeight,i),0)}function v1(t){const{element:e,orientation:n,panels:i,separators:r}=t,a=uy(n,Array.from(e.children).filter(d=>d instanceof HTMLElement).map(d=>({element:d}))).map(({element:d})=>d),u=[];let c,h;for(const d of a){const m=i.find(y=>y.element===d);if(m){if(c){const y=c.element.getBoundingClientRect(),S=d.getBoundingClientRect();u.push({group:t,groupSize:Hh({group:t}),panels:[c,m],separator:h,rect:n==="horizontal"?new DOMRect(y.right,S.top,S.left-y.right,S.height):new DOMRect(S.left,y.bottom,S.width,S.top-y.bottom)})}c=m,h=void 0}else{const y=r.find(S=>S.element===d);y?h=y:(c=void 0,h=void 0)}}return u}function nK(t,e){const n=getComputedStyle(t),i=parseFloat(n.fontSize);return e*i}function iK(t,e){const n=getComputedStyle(t.ownerDocument.body),i=parseFloat(n.fontSize);return e*i}function oK(t){return t/100*window.innerHeight}function rK(t){return t/100*window.innerWidth}function sK(t){switch(typeof t){case"number":return[t,"px"];case"string":{const e=parseFloat(t);return t.endsWith("%")?[e,"%"]:t.endsWith("px")?[e,"px"]:t.endsWith("rem")?[e,"rem"]:t.endsWith("em")?[e,"em"]:t.endsWith("vh")?[e,"vh"]:t.endsWith("vw")?[e,"vw"]:[e,"%"]}}}function Yf({groupSize:t,panelElement:e,styleProp:n}){let i;const[r,a]=sK(n);switch(a){case"%":{i=r/100*t;break}case"px":{i=r;break}case"rem":{i=iK(e,r);break}case"em":{i=nK(e,r);break}case"vh":{i=oK(r);break}case"vw":{i=rK(r);break}}return i}function ri(t){return parseFloat(t.toFixed(3))}function Bx(t){const{panels:e}=t,n=Hh({group:t});return e.map(i=>{const{element:r,panelConstraints:a}=i;let u=0;if(a.collapsedSize){const m=Yf({groupSize:n,panelElement:r,styleProp:a.collapsedSize});u=ri(m/n*100)}let c;if(a.defaultSize){const m=Yf({groupSize:n,panelElement:r,styleProp:a.defaultSize});c=ri(m/n*100)}let h=0;if(a.minSize){const m=Yf({groupSize:n,panelElement:r,styleProp:a.minSize});h=ri(m/n*100)}let d=100;if(a.maxSize){const m=Yf({groupSize:n,panelElement:r,styleProp:a.maxSize});d=ri(m/n*100)}return{collapsedSize:u,collapsible:a.collapsible===!0,defaultSize:c,minSize:h,maxSize:d,panelId:i.id}})}class aK{#e={};addListener(e,n){const i=this.#e[e];return i===void 0?this.#e[e]=[n]:i.includes(n)||i.push(n),()=>{this.removeListener(e,n)}}emit(e,n){const i=this.#e[e];if(i!==void 0)if(i.length===1)i[0].call(null,n);else{let r=!1,a=null;const u=Array.from(i);for(let c=0;c<u.length;c++){const h=u[c];try{h.call(null,n)}catch(d){a===null&&(r=!0,a=d)}}if(r)throw a}}removeAllListeners(){this.#e={}}removeListener(e,n){const i=this.#e[e];if(i!==void 0){const r=i.indexOf(n);r>=0&&i.splice(r,1)}}}function Gt(t,e,n=0){return Math.abs(ri(t)-ri(e))<=n}let kn={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const Jr=new aK;function Bi(){return kn}function qn(t){const e=typeof t=="function"?t(kn):t;if(kn===e)return kn;const n=kn;return kn={...kn,...e},e.cursorFlags!==void 0&&Jr.emit("cursorFlagsChange",kn.cursorFlags),e.interactionState!==void 0&&Jr.emit("interactionStateChange",kn.interactionState),e.mountedGroups!==void 0&&(kn.mountedGroups.forEach((i,r)=>{i.derivedPanelConstraints.forEach(a=>{if(a.collapsible){const{layout:u}=n.mountedGroups.get(r)??{};if(u){const c=Gt(a.collapsedSize,i.layout[a.panelId]),h=Gt(a.collapsedSize,u[a.panelId]);c&&!h&&(r.inMemoryLastExpandedPanelSizes[a.panelId]=u[a.panelId])}}})}),Jr.emit("mountedGroupsChange",kn.mountedGroups)),kn}const lK=t=>t,ev=()=>{},y1=1,_1=2,S1=4,b1=8,Fx={coarse:10,precise:5};function uK({cursorFlags:t,groups:e,state:n}){let i=0,r=0;switch(n){case"active":case"hover":e.forEach(a=>{if(!a.disableCursor)switch(a.orientation){case"horizontal":{i++;break}case"vertical":{r++;break}}})}if(i===0&&r===0)return null;switch(n){case"active":{const a=(t&y1)!==0,u=(t&_1)!==0,c=(t&S1)!==0,h=(t&b1)!==0;if(t){if(a)return c?"se-resize":h?"ne-resize":"e-resize";if(u)return c?"sw-resize":h?"nw-resize":"w-resize";if(c)return"s-resize";if(h)return"n-resize"}break}}return i>0&&r>0?"move":i>0?"ew-resize":"ns-resize"}let tv,wi;function k_(){wi===void 0&&(wi=new CSSStyleSheet,document.adoptedStyleSheets=[wi]);const{cursorFlags:t,interactionState:e}=Bi();switch(e.state){case"active":case"hover":{const n=uK({cursorFlags:t,groups:e.hitRegions.map(r=>r.group),state:e.state}),i=`*{cursor: ${n} !important; ${e.state==="active"?"touch-action: none;":""} }`;if(tv===i)return;tv=i,n?wi.cssRules.length===0?wi.insertRule(i):wi.replaceSync(i):wi.cssRules.length===1&&wi.deleteRule(0);break}case"inactive":{tv=void 0,wi.cssRules.length===1&&wi.deleteRule(0);break}}}function cK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function bu(t,e){return Gt(t,e)?0:t>e?1:-1}function fa({panelConstraints:t,size:e}){const{collapsedSize:n=0,collapsible:i,maxSize:r=100,minSize:a=0}=t;if(bu(e,a)<0)if(i){const u=(n+a)/2;bu(e,u)<0?e=n:e=a}else e=a;return e=Math.min(r,e),e=ri(e),e}function wu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:r,trigger:a}){if(Gt(t,0))return e;const u=Object.values(e),c=Object.values(r),h=[...u],[d,m]=i;at(d!=null,"Invalid first pivot index"),at(m!=null,"Invalid second pivot index");let y=0;if(a==="keyboard"){{const C=t<0?m:d,x=n[C];at(x,`Panel constraints not found for index ${C}`);const{collapsedSize:A=0,collapsible:M,minSize:I=0}=x;if(M){const N=u[C];if(at(N!=null,`Previous layout not found for panel index ${C}`),Gt(N,A)){const D=I-N;bu(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}{const C=t<0?d:m,x=n[C];at(x,`No panel constraints found for index ${C}`);const{collapsedSize:A=0,collapsible:M,minSize:I=0}=x;if(M){const N=u[C];if(at(N!=null,`Previous layout not found for panel index ${C}`),Gt(N,I)){const D=N-A;bu(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}}{const C=t<0?1:-1;let x=t<0?m:d,A=0;for(;;){const I=u[x];at(I!=null,`Previous layout not found for panel index ${x}`);const N=fa({panelConstraints:n[x],size:100})-I;if(A+=N,x+=C,x<0||x>=n.length)break}const M=Math.min(Math.abs(t),Math.abs(A));t=t<0?0-M:M}{let C=t<0?d:m;for(;C>=0&&C<n.length;){const x=Math.abs(t)-Math.abs(y),A=u[C];at(A!=null,`Previous layout not found for panel index ${C}`);const M=A-x,I=fa({panelConstraints:n[C],size:M});if(!Gt(A,I)&&(y+=A-I,h[C]=I,y.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?C--:C++}}if(cK(c,h))return r;{const C=t<0?m:d,x=u[C];at(x!=null,`Previous layout not found for panel index ${C}`);const A=x+y,M=fa({panelConstraints:n[C],size:A});if(h[C]=M,!Gt(M,A)){let I=A-M,N=t<0?m:d;for(;N>=0&&N<n.length;){const D=h[N];at(D!=null,`Previous layout not found for panel index ${N}`);const k=D+I,U=fa({panelConstraints:n[N],size:k});if(Gt(D,U)||(I-=U-D,h[N]=U),Gt(I,0))break;t>0?N--:N++}}}const S=Object.values(h).reduce((C,x)=>x+C,0);if(!Gt(S,100,.1))return r;const b=Object.keys(r);return h.reduce((C,x,A)=>(C[b[A]]=x,C),{})}function Qu(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(bu(t[n],e[n])!==0)return!1;return!0}function w1({event:t,hitRegions:e,initialLayoutMap:n,mountedGroups:i,pointerDownAtPoint:r}){let a=0;const u=new Map(i);e.forEach(c=>{const{group:h,groupSize:d}=c,{disableCursor:m,orientation:y,panels:S}=h;let b=0;r?y==="horizontal"?b=(t.clientX-r.x)/d*100:b=(t.clientY-r.y)/d*100:y==="horizontal"?b=t.clientX<0?-100:100:b=t.clientY<0?-100:100;const C=n.get(h),{derivedPanelConstraints:x,layout:A,separatorToPanels:M}=i.get(h)??{};if(x&&C&&A&&M){const I=wu({delta:b,initialLayout:C,panelConstraints:x,pivotIndices:c.panels.map(N=>S.indexOf(N)),prevLayout:A,trigger:"mouse-or-touch"});if(Qu(I,A)){if(b!==0&&!m)switch(y){case"horizontal":{a|=b<0?y1:_1;break}case"vertical":{a|=b<0?S1:b1;break}}}else{u.set(c.group,{derivedPanelConstraints:x,layout:I,separatorToPanels:M});const N=c.group.panels.map(({id:D})=>D).join(",");c.group.inMemoryLayouts[N]=I}}}),qn({cursorFlags:a,mountedGroups:u}),k_()}function $x(t){if(t.defaultPrevented||t.relatedTarget!==null||t.clientX===0&&t.clientY===0)return;const{interactionState:e,mountedGroups:n}=Bi();switch(e.state){case"active":e.hitRegions.forEach(i=>{t.currentTarget===i.group.element&&w1({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n})})}}function md(t){const e=t.parentElement;at(e,"Parent group element not found");const{mountedGroups:n}=Bi();for(const[i]of n)if(i.element===e)return i;throw Error("Could not find parent Group for separator element")}function ns({layout:t,panelConstraints:e}){const n=[...Object.values(t)],i=n.reduce((u,c)=>u+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(u=>`${u}%`).join(", ")}`);if(!Gt(i,100)&&n.length>0)for(let u=0;u<e.length;u++){const c=n[u];at(c!=null,`No layout data found for index ${u}`);const h=100/i*c;n[u]=h}let r=0;for(let u=0;u<e.length;u++){const c=n[u];at(c!=null,`No layout data found for index ${u}`);const h=fa({panelConstraints:e[u],size:c});c!=h&&(r+=c-h,n[u]=h)}if(!Gt(r,0))for(let u=0;u<e.length;u++){const c=n[u];at(c!=null,`No layout data found for index ${u}`);const h=c+r,d=fa({panelConstraints:e[u],size:h});if(c!==d&&(r-=d-c,n[u]=d,Gt(r,0)))break}const a=Object.keys(t);return n.reduce((u,c,h)=>(u[a[h]]=c,u),{})}function E1({groupId:t}){const e=()=>{const{mountedGroups:n}=Bi();for(const[i,r]of n)if(i.id===t)return{group:i,...r};throw Error(`Group ${t} not found`)};return{getLayout(){const{layout:n}=e();return n},setLayout(n){const{derivedPanelConstraints:i,group:r,layout:a,separatorToPanels:u}=e(),c=ns({layout:n,panelConstraints:i});return Qu(a,c)||qn(h=>({mountedGroups:new Map(h.mountedGroups).set(r,{derivedPanelConstraints:i,layout:c,separatorToPanels:u})})),c}}}function T1(t){const{mountedGroups:e}=Bi(),n=e.get(t);return at(n,`Mounted Group ${t.id} not found`),n}function Ur(t,e){const n=md(t),i=T1(n),r=n.separators.find(m=>m.element===t);at(r,"Matching separator not found");const a=i.separatorToPanels.get(r);at(a,"Matching panels not found");const u=a.map(m=>n.panels.indexOf(m)),c=E1({groupId:n.id}).getLayout(),h=wu({delta:e,initialLayout:c,panelConstraints:i.derivedPanelConstraints,pivotIndices:u,prevLayout:c,trigger:"keyboard"}),d=ns({layout:h,panelConstraints:i.derivedPanelConstraints});Qu(c,d)||qn(m=>({mountedGroups:new Map(m.mountedGroups).set(n,{derivedPanelConstraints:i.derivedPanelConstraints,layout:d,separatorToPanels:i.separatorToPanels})}))}function Hx(t){if(t.defaultPrevented)return;const e=t.currentTarget,n=md(e);if(!n.disabled)switch(t.key){case"ArrowDown":{t.preventDefault(),n.orientation==="vertical"&&Ur(e,5);break}case"ArrowLeft":{t.preventDefault(),n.orientation==="horizontal"&&Ur(e,-5);break}case"ArrowRight":{t.preventDefault(),n.orientation==="horizontal"&&Ur(e,5);break}case"ArrowUp":{t.preventDefault(),n.orientation==="vertical"&&Ur(e,-5);break}case"End":{t.preventDefault(),Ur(e,100);break}case"Enter":{t.preventDefault();const i=md(e),{derivedPanelConstraints:r,layout:a,separatorToPanels:u}=T1(i),c=i.separators.find(y=>y.element===e);at(c,"Matching separator not found");const h=u.get(c);at(h,"Matching panels not found");const d=h[0],m=r.find(y=>y.panelId===d.id);if(at(m,"Panel metadata not found"),m.collapsible){const y=a[d.id],S=m.collapsedSize===y?i.inMemoryLastExpandedPanelSizes[d.id]??m.minSize:m.collapsedSize;Ur(e,S-y)}break}case"F6":{t.preventDefault();const i=md(e).separators.map(u=>u.element),r=Array.from(i).findIndex(u=>u===t.currentTarget);at(r!==null,"Index not found");const a=t.shiftKey?r>0?r-1:i.length-1:r+1<i.length?r+1:0;i[a].focus();break}case"Home":{t.preventDefault(),Ur(e,-100);break}}}function fK(t,e){return{x:t.x>=e.left&&t.x<=e.right?0:Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),y:t.y>=e.top&&t.y<=e.bottom?0:Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom))}}function dK(t,e,n){let i,r={x:1/0,y:1/0};for(const a of e){const u=fK(n,a.rect);switch(t){case"horizontal":{u.x<=r.x&&(i=a,r=u);break}case"vertical":{u.y<=r.y&&(i=a,r=u);break}}}return i?{distance:r,hitRegion:i}:void 0}let Xf;function hK(){return Xf===void 0&&(typeof matchMedia=="function"?Xf=!!matchMedia("(pointer:coarse)").matches:Xf=!1),Xf}function C1(t,e){const n=[];return e.forEach((i,r)=>{if(r.disabled)return;const a=hK()?Fx.coarse:Fx.precise,u=v1(r),c=dK(r.orientation,u,{x:t.clientX,y:t.clientY});c&&c.distance.x<=a&&c.distance.y<=a&&n.push(c.hitRegion)}),n}function Gx(t){if(t.defaultPrevented)return;const{mountedGroups:e}=Bi(),n=C1(t,e),i=new Set,r=new Set,a=new Set,u=new Map;let c=!1;n.forEach(h=>{i.add(h.group),h.panels.forEach(m=>{r.add(m)}),h.separator&&(a.add(h.separator),c||(c=!0,h.separator.element.focus()));const d=e.get(h.group);d&&u.set(h.group,d.layout)}),qn({interactionState:{hitRegions:n,initialLayoutMap:u,pointerDownAtPoint:{x:t.clientX,y:t.clientY},state:"active"}}),n.length&&t.preventDefault()}function Vx(t){if(t.defaultPrevented)return;const{interactionState:e,mountedGroups:n}=Bi();switch(e.state){case"active":{if(t.type!=="pointerleave"&&t.buttons===0){qn(i=>i.interactionState.state==="inactive"?i:{cursorFlags:0,interactionState:{state:"inactive"}});return}w1({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:e.pointerDownAtPoint});break}default:{const i=C1(t,n);i.length===0?e.state!=="inactive"&&qn({interactionState:{state:"inactive"}}):qn({interactionState:{hitRegions:i,state:"hover"}}),k_();break}}}function zx(t){if(t.defaultPrevented)return;t.preventDefault();const{interactionState:e}=Bi();switch(e.state){case"active":qn({cursorFlags:0,interactionState:{state:"inactive"}}),k_()}}function pK(t){let e=0,n=0;const i={};for(const a of t)if(a.defaultSize!==void 0){e++;const u=ri(a.defaultSize);n+=u,i[a.panelId]=u}else i[a.panelId]=void 0;const r=t.length-e;if(r!==0){const a=ri((100-n)/r);for(const u of t)u.defaultSize===void 0&&(i[u.panelId]=a)}return i}function mK(t,e,n){const i=n[0];if(!i)return;const r=t.panels.find(u=>u.element===e);if(!r||!r.onResize)return;const a=Hh({group:t});r.onResize({asPercentage:ri(i.inlineSize/a*100),inPixels:i.inlineSize},r.id)}function gK(t){let e=!0;at(t.separators.length===0||t.separators.length<t.panels.length,"Invalid Group configuration; too many Separator components");const n=new Set,i=new Set,r=new ResizeObserver(y=>{for(const S of y){const{borderBoxSize:b,target:C}=S;C===t.element?e&&qn(x=>{const A=x.mountedGroups.get(t);if(A){const M=Bx(t),I=A.layout,N=ns({layout:I,panelConstraints:M});return{mountedGroups:new Map(x.mountedGroups).set(t,{derivedPanelConstraints:M,layout:N,separatorToPanels:A.separatorToPanels})}}return x}):mK(t,C,b)}});r.observe(t.element),t.panels.forEach(y=>{at(!n.has(y.id),`Panel ids must be unique; id "${y.id}" was used more than once`),n.add(y.id),y.onResize&&r.observe(y.element)});const a=Bx(t),u=t.panels.map(({id:y})=>y).join(","),c=t.inMemoryLayouts[u]??t.defaultLayout??pK(a),h=ns({layout:c,panelConstraints:a}),d=v1(t),m=qn(y=>({mountedGroups:new Map(y.mountedGroups).set(t,{derivedPanelConstraints:a,layout:h,separatorToPanels:new Map(d.filter(S=>S.separator).map(S=>[S.separator,S.panels]))})}));return t.element.addEventListener("pointerleave",$x),t.separators.forEach(y=>{at(!i.has(y.id),`Separator ids must be unique; id "${y.id}" was used more than once`),i.add(y.id),y.element.addEventListener("keydown",Hx)}),m.mountedGroups.size===1&&(window.addEventListener("pointerdown",Gx),window.addEventListener("pointermove",Vx),window.addEventListener("pointerup",zx)),function(){e=!1;const y=qn(S=>{const b=new Map(S.mountedGroups);return b.delete(t),{mountedGroups:b}});t.element.removeEventListener("pointerleave",$x),t.separators.forEach(S=>{S.element.removeEventListener("keydown",Hx)}),y.mountedGroups.size===0&&(window.removeEventListener("pointerdown",Gx),window.removeEventListener("pointermove",Vx),window.removeEventListener("pointerup",zx)),r.disconnect()}}function L_(t){const e=E.useId();return`${t??e}`}const Ba=typeof window<"u"?E.useLayoutEffect:E.useEffect;function U_(t){const e=E.useRef(t);return Ba(()=>{e.current=t},[t]),E.useCallback(n=>e.current?.(n),[e])}function B_(...t){return U_(e=>{t.forEach(n=>{if(n)switch(typeof n){case"function":{n(e);break}case"object":{n.current=e;break}}})})}const x1="--react-resizable-panels--panel--pointer-events";function A1(t,e){const n=t.replace(/[^a-zA-Z0-9\-_]/g,""),i=e.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${i}`}const R1=E.createContext(null);function vK(t,e){const n=E.useRef({getLayout:()=>({}),setLayout:lK});E.useImperativeHandle(e,()=>n.current,[]),Ba(()=>{Object.assign(n.current,E1({groupId:t}))})}function M1({children:t,className:e,defaultLayout:n,disableCursor:i,disabled:r,elementRef:a,groupRef:u,id:c,onLayoutChange:h,orientation:d="horizontal",style:m,...y}){const S=E.useRef({}),b=U_(ae=>{Qu(S.current,ae)||(S.current=ae,h?.(ae))}),C=L_(c),[x,A]=E.useState(!1),[M,I]=E.useState(null),[N,D]=E.useState(n??{}),[k,U]=E.useState([]),[O,q]=E.useState([]),J=E.useRef({}),Y=E.useRef({}),W=B_(I,a);vK(C,u);const re=E.useMemo(()=>({id:C,orientation:d,registerPanel:ae=>(U(de=>uy(d,[...de,ae])),()=>{U(de=>de.filter(F=>F!==ae))}),registerSeparator:ae=>(q(de=>uy(d,[...de,ae])),()=>{q(de=>de.filter(F=>F!==ae))})}),[C,d]);Ba(()=>{if(M!==null&&k.length>0){const ae={defaultLayout:n,disableCursor:!!i,disabled:!!r,element:M,id:C,inMemoryLastExpandedPanelSizes:J.current,inMemoryLayouts:Y.current,orientation:d,panels:k,separators:O},de=gK(ae),F=Bi().mountedGroups.get(ae);F&&(D(F.layout),b?.(F.layout));const Q=Jr.addListener("interactionStateChange",ne=>{switch(ne.state){case"active":case"hover":{A(ne.hitRegions.some(ce=>ce.group===ae));break}}}),ee=Jr.addListener("mountedGroupsChange",ne=>{const ce=ne.get(ae);ce&&ce.derivedPanelConstraints.length>0&&(D(ce.layout),b?.(ce.layout))});return()=>{de(),Q(),ee()}}},[n,i,r,M,C,b,d,k,O]);const ie={[x1]:x?"none":void 0};for(const ae in N){const de=A1(C,ae),F=N[ae];ie[de]=F}return w.jsx(R1.Provider,{value:re,children:w.jsx("div",{...y,"aria-orientation":d,className:e,"data-group":!0,"data-testid":C,id:C,ref:W,style:{...m,...ie,display:"flex",flexDirection:d==="horizontal"?"row":"column",flexWrap:"nowrap"},children:t})})}function F_(){const t=E.useContext(R1);return at(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function yK({groupId:t,panelId:e}){const n=()=>{const{mountedGroups:c}=Bi();for(const[h,{derivedPanelConstraints:d,layout:m,separatorToPanels:y}]of c)if(h.id===t)return{derivedPanelConstraints:d,group:h,layout:m,separatorToPanels:y};throw Error(`Group ${t} not found`)},i=()=>{const c=n().derivedPanelConstraints.find(h=>h.panelId===e);if(c!==void 0)return c;throw Error(`Panel constraints not found for Panel ${e}`)},r=()=>{const c=n().group.panels.find(h=>h.id===e);if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},a=()=>{const c=n().layout[e];if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},u=c=>{const h=a();if(c===h)return;const{derivedPanelConstraints:d,group:m,layout:y,separatorToPanels:S}=n(),b=m.panels.findIndex(M=>M.id===e),C=b===m.panels.length-1,x=wu({delta:C?h-c:c-h,initialLayout:y,panelConstraints:d,pivotIndices:C?[b-1,b]:[b,b+1],prevLayout:y,trigger:"imperative-api"}),A=ns({layout:x,panelConstraints:d});Qu(y,A)||qn(M=>({mountedGroups:new Map(M.mountedGroups).set(m,{derivedPanelConstraints:d,layout:A,separatorToPanels:S})}))};return{collapse:()=>{const{collapsible:c,collapsedSize:h}=i(),d=a();c&&d!==h&&u(h)},expand:()=>{const{collapsible:c,collapsedSize:h,minSize:d}=i(),m=a();c&&m===h&&u(d)},getSize:()=>{const{group:c}=n(),h=a(),{element:d}=r(),m=c.orientation==="horizontal"?d.offsetWidth:d.offsetHeight;return{asPercentage:h,inPixels:m}},isCollapsed:()=>{const{collapsible:c,collapsedSize:h}=i(),d=a();return c&&Gt(h,d)},resize:c=>{if(a()!==c){let h;switch(typeof c){case"number":{const{group:d}=n(),m=Hh({group:d});h=ri(c/m*100);break}case"string":{h=parseFloat(c);break}}u(h)}}}}function _K(t,e){const{id:n}=F_(),i=E.useRef({collapse:ev,expand:ev,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:ev});E.useImperativeHandle(e,()=>i.current,[]),Ba(()=>{Object.assign(i.current,yK({groupId:n,panelId:t}))})}function Xd({children:t,className:e,collapsedSize:n="0%",collapsible:i=!1,defaultSize:r,elementRef:a,id:u,maxSize:c="100%",minSize:h="0%",onResize:d,panelRef:m,style:y,...S}){const b=!!u,C=L_(u),[x,A]=E.useState(null),M=B_(A,a),{id:I,registerPanel:N}=F_(),D=d!==null,k=U_(O=>{d?.(O,u)});Ba(()=>{if(x!==null)return N({element:x,id:C,idIsStable:b,onResize:D?k:void 0,panelConstraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:c,minSize:h}})},[n,i,r,x,D,C,b,c,h,k,N]),_K(C,m);const U=A1(I,C);return w.jsx("div",{...S,"data-panel":!0,"data-testid":C,id:C,ref:M,style:{...SK,flexBasis:0,flexGrow:`var(${U}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${x1})`},children:w.jsx("div",{className:e,style:{width:"100%",height:"100%",...y},children:t})})}const SK={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function bK({layout:t,panelConstraints:e,panelId:n,panelIndex:i}){let r,a;const u=t[n],c=e.find(h=>h.panelId===n);if(c){const h=c.maxSize,d=a=c.collapsible?c.collapsedSize:c.minSize,m=[i,i+1];a=ns({layout:wu({delta:d-u,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n],r=ns({layout:wu({delta:h-u,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n]}return{valueControls:n,valueMax:r,valueMin:a,valueNow:u}}function N1({children:t,className:e,elementRef:n,id:i,style:r,...a}){const u=L_(i),[c,h]=E.useState({}),[d,m]=E.useState("inactive"),[y,S]=E.useState(null),b=B_(S,n),{id:C,orientation:x,registerSeparator:A}=F_(),M=x==="horizontal"?"vertical":"horizontal";return Ba(()=>{if(y!==null){const I={element:y,id:u},N=A(I),D=Jr.addListener("interactionStateChange",U=>{m(U.state!=="inactive"&&U.hitRegions.some(O=>O.separator===I)?U.state:"inactive")}),k=Jr.addListener("mountedGroupsChange",U=>{U.forEach(({derivedPanelConstraints:O,layout:q,separatorToPanels:J},Y)=>{if(Y.id===C){const W=J.get(I);if(W){const re=W[0],ie=Y.panels.indexOf(re);h(bK({layout:q,panelConstraints:O,panelId:re.id,panelIndex:ie}))}}})});return()=>{D(),k(),N()}}},[y,C,u,A]),w.jsx("div",{...a,"aria-controls":c.valueControls,"aria-orientation":M,"aria-valuemax":c.valueMax,"aria-valuemin":c.valueMin,"aria-valuenow":c.valueNow,children:t,className:e,"data-separator":d,"data-testid":u,id:u,ref:b,role:"separator",style:{flexBasis:"auto",...r,flexGrow:0,flexShrink:0},tabIndex:0})}const $_=Ze(({shot:t})=>{const e=t.scene;if(!e.sceneJson||!e.sceneJson.data)return null;const n=e.sceneJson.data.tags,i=e.project?.artbook;return i?w.jsx(ka,{label:"Tags",children:n.length?w.jsx("ul",{className:"list-group list-group-flush",children:n.map((r,a)=>{const u=i.getTag(r);if(!u)return null;const c=!t.getSkippedTags().includes(u.path);return w.jsxs("li",{className:"list-group-item p-0 border-0 d-flex align-items-center gap-2",children:[w.jsx(m1,{localImage:u.image,height:25,zoomOnHover:!0}),w.jsx("input",{type:"checkbox",className:"form-check-input m-0",checked:c,onChange:h=>{t.setTagSkipped(u.path,!h.target.checked)}}),w.jsx("span",{className:c?"":"text-muted",children:u.path})]},a)})}):w.jsx("div",{children:"No tags."})}):null}),wK=Ze(({localImage:t,initialText:e="Redraw the source_image using reference images ref1,ref2,ref3.",onImageGenerated:n,onClose:i,reference_images:r=[]})=>{const[a,u]=E.useState(null),[c,h]=E.useState(e),[d,m]=E.useState(!1),[y,S]=E.useState(ii.options.img_models.flash_image),[b,C]=E.useState(!!t.shot);E.useEffect(()=>{let A=!0;return t.getUrlObject().then(M=>{A&&u(M)}),()=>{A=!1}},[t]);const x=async()=>{m(!0);try{const A=await t.getBase64(),M=await Promise.all(r.map(k=>k.getBase64())),I=t.shot?t.shot.shotJson?.getField("image_edit_prompt/"+t.name+"/prompt"):{text:c},N=b&&t.shot?await t.shot.getImageTags():[],D=await ii.img2img(I||"",y,[{rawBase64:A.rawBase64,mime:A.mime,description:"source_image"},...M.map((k,U)=>({rawBase64:k.rawBase64,mime:k.mime,description:`ref${U+1}`})),...N]);n&&n(D)}catch(A){console.error("GenerateImage failed:",A)}finally{m(!1)}};return w.jsx("div",{className:"border d-flex flex-column",style:{height:"700px"},children:w.jsxs(M1,{orientation:"horizontal",style:{height:"100%"},children:[w.jsx(Xd,{defaultSize:500,minSize:10,children:w.jsx("div",{className:"d-flex align-items-center justify-content-center overflow-hidden position-relative",style:{height:"100%"},children:a?w.jsxs(w.Fragment,{children:[w.jsx("img",{src:a,alt:"Preview",className:"img-fluid",style:{objectFit:"contain",maxHeight:"100%",maxWidth:"100%"}}),w.jsx("div",{className:`\r
                    position-absolute \r
                    bottom-0\r
                    start-50\r
                    translate-middle-x\r
                    mb-2\r
                    px-2\r
                    py-1\r
                    text-white\r
                    bg-dark\r
                    bg-opacity-50\r
                    rounded\r
                    small\r
                    text-nowrap\r
                  `,style:{pointerEvents:"none"},children:"(Source Image)"})]}):w.jsx("div",{children:"Loading image"})})}),w.jsx(N1,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),w.jsx(Xd,{minSize:10,children:w.jsxs("div",{className:"d-flex flex-column h-100 p-3",style:{height:"100%"},children:[w.jsx("div",{className:"d-flex justify-content-end mb-2",children:i&&w.jsx("button",{type:"button",onClick:i,style:{cursor:"pointer"},children:""})}),w.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[r.length>0&&w.jsx("div",{className:"d-flex gap-2 mb-2 flex-wrap",children:r.map((A,M)=>A.urlObject?w.jsxs("div",{style:{position:"relative",width:100,height:100},children:[w.jsx("img",{src:A.urlObject,alt:`ref-${M}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:4,border:"1px solid #444",display:"block"}}),w.jsxs("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.6)",color:"#fff",fontSize:12,padding:"2px 6px",borderRadius:3,pointerEvents:"none",whiteSpace:"nowrap"},children:["ref",M+1]})]},M):(A.getUrlObject(),null))}),t.shot&&w.jsxs("label",{className:"d-flex align-items-center gap-2 mb-2",children:[w.jsx("input",{type:"checkbox",checked:b,onChange:A=>C(A.target.checked)}),"Use shot tags"]}),t.shot&&b&&w.jsx($_,{shot:t.shot}),t.shot?w.jsxs(w.Fragment,{children:[w.jsx(w.Fragment,{children:"Prompt : "}),w.jsx(Vt,{localJson:t.shot.shotJson,field:"image_edit_prompt/"+t.name+"/prompt",fitHeight:!0})]}):w.jsx("textarea",{value:c,onChange:A=>h(A.target.value),placeholder:"Redraw the source_image using reference images ref1,ref2,ref3.",style:{flexGrow:1,resize:"none",padding:"8px",fontSize:"14px"}}),w.jsx(Ca,{value:y,options:Object.values(ii.options.img_models),label:"Model:",onChange:A=>{S(A)}}),w.jsx(Ih,{onClick:x,label:"Generate",is_loading:d})]})]})})]})})}),EK=({localVideo:t,initialText:e="",onVideoTaskCreated:n,onClose:i})=>{const[r,a]=E.useState(e),[u,c]=E.useState(!1),[h,d]=E.useState(De.options.omni_video.mode.pro),[m,y]=E.useState(De.options.omni_video.video.keep_original_sound.yes),S=async()=>{c(!0);try{const b=await t.getWebUrl(),C=await De.omniVideo({prompt:r,model:De.options.omni_video.model.o1,mode:h,video_list:[{video_url:b,refer_type:De.options.omni_video.video.refer_type.base,keep_original_sound:m}]});n?.(C)}catch(b){console.error("GenerateVideoEdit failed:",b)}finally{c(!1)}};return w.jsx("div",{className:"border d-flex flex-column",style:{height:"700px"},children:w.jsxs(M1,{orientation:"horizontal",style:{height:"100%"},children:[w.jsx(Xd,{defaultSize:500,minSize:10,children:w.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:w.jsx($h,{localVideo:t,fillParent:!0})})}),w.jsx(N1,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),w.jsx(Xd,{minSize:10,children:w.jsxs("div",{className:"d-flex flex-column h-100 p-3",children:[w.jsx("div",{className:"d-flex justify-content-end mb-2",children:i&&w.jsx("button",{type:"button",onClick:i,children:""})}),w.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[w.jsx("textarea",{value:r,onChange:b=>a(b.target.value),placeholder:"[@Video] make the character smile",style:{flexGrow:1,resize:"none",padding:"8px",fontSize:"14px"}}),w.jsx(Ca,{label:"Mode:",value:h,options:Object.values(De.options.omni_video.mode),onChange:b=>d(b)}),w.jsx(Ca,{label:"Keep Original Sound:",value:m,options:Object.values(De.options.omni_video.video.keep_original_sound),onChange:b=>y(b)}),w.jsx(Ih,{onClick:S,label:"Generate",is_loading:u})]})]})})]})})},oi=Ze(({mediaFolder:t,label:e=null,itemHeight:n=300,showEditWindow:i=!0})=>!t||!t.folder?null:(e=e||t.folderName,w.jsx(w.Fragment,{children:w.jsxs(Qj,{label:e,headerExtra:w.jsxs(w.Fragment,{children:[w.jsx(it,{label:"Log",className:"btn-outline-secondary btn-sm",onClick:()=>{t.log()}}),w.jsx(it,{label:"Import URL",className:"btn-outline-secondary btn-sm",onClick:async()=>{try{const r=await navigator.clipboard.readText();r&&(r.startsWith("http://")||r.startsWith("https://"))?(console.log("Importing URL from clipboard:",r),t.downloadFromUrl(r)):alert("Clipboard does not contain a valid URL.")}catch(r){console.error("Failed to read clipboard:",r),alert("Failed to access clipboard.")}}}),w.jsx(it,{label:"Paste",className:"btn-outline-secondary btn-sm",onClick:()=>{t.copyFromClipboard()}})]}),editWindow:i?w.jsxs(w.Fragment,{children:[t.selectedMedia instanceof mo?w.jsx(wK,{localImage:t.selectedMedia,reference_images:t.getMediaWithTag("ref_frame"),onImageGenerated:async r=>{console.log("Image generated:",r);const a=await ii.saveResultImage(r,t.folder);a&&t.loadFile(a?.handle)},onClose:()=>t.setSelectedMedia(null)}):null,t.selectedMedia instanceof $u?w.jsx(w.Fragment,{children:w.jsx(EK,{localVideo:t.selectedMedia,initialText:"Notes for this video",onVideoTaskCreated:async r=>{console.log("Video task created:",r);const u=t.shot.addTask(r.id,{provider:ou.KLING,workflow:r.workflow});await new Promise(c=>setTimeout(c,100)),console.log("created_task"),u.check_status()},onClose:()=>t.setSelectedMedia(null)})}):null]}):null,children:[t.media.map(r=>w.jsx(Su,{mediaItem:r,height:n,onSelectMedia:a=>{t.setSelectedMedia(a)},isSelected:r.hasTag("start_frame"),isPicked:t.selectedMedia==r,topRightExtra:w.jsxs(w.Fragment,{children:[w.jsx(it,{label:"Delete",className:"btn-outline-danger btn-sm",onClick:async()=>{await t.deleteMedia(r)}}),w.jsx(it,{label:"LOG",className:"btn-outline-secondary btn-sm",onClick:async()=>{r.log()}}),w.jsx(FI,{items:t.tags,currentItem:"TAG",onPicked:a=>{r.toggleTag(a)}})]})},r.path)),w.jsx(Zj,{width:100,height:n,onDrop:async r=>{await t.saveFiles(r)}})]})}))),co=Ze(function({workflowName:e,project:n,optionName:i,label:r,values:a}){const u=n?.workflows?.[e]?.[i];return w.jsx(Ca,{value:u,options:a,label:r,onChange:c=>{n.updateWorkflow(e,i,c)}})}),TK=Ze(({shot:t})=>{const e=t.scene.project;return w.jsx(Wu,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo()},children:"Generate Video"}),w.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"model",values:Object.values(De.options.img2video.model)}),w.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"mode",label:"mode:",values:Object.values(De.options.img2video.mode)}),w.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"duration",label:"Duration:",values:Object.values(De.options.img2video.duration)}),w.jsx(co,{project:e,workflowName:"generate_video_kling",optionName:"sound",label:"Sound:",values:Object.values(De.options.img2video.sound)}),w.jsx(ls,{isLoading:t.is_submitting_video,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[w.jsx(Vt,{localJson:t.shotJson,field:"video_prompt",fitHeight:!0}),w.jsx(Su,{mediaItem:t.srcImage,height:400}),w.jsx(Su,{mediaItem:t.end_frame,height:400}),w.jsx(oi,{mediaFolder:t.MediaFolder_results,label:"Source Image",itemHeight:300})]})})}),CK=Ze(({shot:t})=>{const e=t.scene.project;return w.jsx(Wu,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo_KlingMotionControl()},children:"Gen Motion Control Video"}),w.jsx(co,{project:e,workflowName:"kling_motion_control",optionName:"character_orientation",label:"Orient:",values:Object.values(De.options.motion_control.character_orientation)}),w.jsx(co,{project:e,workflowName:"kling_motion_control",optionName:"mode",label:"mode:",values:Object.values(De.options.motion_control.mode)}),w.jsx(co,{project:e,workflowName:"kling_motion_control",optionName:"keep_original_sound",label:"Sound:",values:Object.values(De.options.motion_control.keep_original_sound)}),w.jsx(ls,{isLoading:t.is_submitting_video,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[w.jsx(Vt,{localJson:t.shotJson,field:"video_prompt",fitHeight:!0}),w.jsx(Su,{mediaItem:t.srcImage,height:400}),t.kling_motion_video&&w.jsx($h,{localVideo:t.kling_motion_video,height:400,topRightExtra:w.jsx(w.Fragment,{})}),w.jsx(oi,{mediaFolder:t.MediaFolder_results,label:"Source Image",itemHeight:300}),w.jsx(oi,{mediaFolder:t.MediaFolder_refVideo,label:"Motion Video",itemHeight:300})]})})}),xK=Ze(({shot:t})=>{const e=t.scene.project;return w.jsx(Wu,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.StylizeImage()},children:"Stylize Image"}),w.jsx(co,{project:e,workflowName:"stylize_image_google",optionName:"model",values:Ky}),w.jsx(ls,{isLoading:t.is_generating,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[w.jsx(Su,{mediaItem:t.unreal_frame,height:300,label:"REFERENCE"}),w.jsx(Vt,{localJson:e.projinfo,field:"workflows/stylize_image_google/prompt",fitHeight:!0}),w.jsx(Vt,{localJson:t.shotJson,field:"stylize_prompt",fitHeight:!0}),w.jsx(oi,{mediaFolder:t.MediaFolder_results,label:"pick reference Frame",itemHeight:300}),w.jsx($_,{shot:t})]})})}),AK=Ze(({shot:t})=>{const e=t.scene.project;return w.jsx(Wu,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{console.log("Generate Image"),t.GenerateImage()},children:"Generate Image"}),w.jsx(co,{project:e,workflowName:"generate_shot_image",optionName:"model",values:Ky}),w.jsx(ls,{isLoading:t.is_generating,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[w.jsx(Vt,{localJson:t.shotJson,field:"prompt",fitHeight:!0}),w.jsx($_,{shot:t})]})})}),RK=Ze(({shot:t})=>w.jsxs("div",{className:"mb-3",children:[w.jsxs("div",{className:"mb-3 d-flex gap-2",children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.Kling_IdentyfiFace()},children:"Identify Face"}),w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.Kling_LypSync()},children:"Lip Sync"}),w.jsx(ls,{isLoading:t.is_submitting_video,asButton:!0})]}),t.outVideo?w.jsx($h,{localVideo:t.outVideo,height:400,topRightExtra:w.jsx(w.Fragment,{})}):w.jsx("div",{className:"text-left text-muted my-3",children:"No OutVideo Selected"}),t.kling_face_id_data?.face_data?.length>0&&w.jsx("div",{className:"d-flex overflow-auto py-2",children:t.kling_face_id_data.face_data.map((e,n)=>w.jsxs("div",{className:"position-relative flex-shrink-0 me-3",children:[w.jsx("img",{src:e.face_image,alt:`Face ${n+1}`,className:"rounded",style:{width:"96px",height:"96px",objectFit:"cover"}}),w.jsxs("div",{className:"position-absolute top-0 start-50 translate-middle-x text-white text-center w-100",style:{textShadow:"1px 1px 2px black",fontSize:"0.75rem",lineHeight:"1rem"},children:["ID: ",e.face_id]}),w.jsxs("div",{className:"position-absolute bottom-0 start-50 translate-middle-x text-white text-center w-100",style:{textShadow:"1px 1px 2px black",fontSize:"0.75rem",lineHeight:"1rem"},children:[Math.floor(e.start_time/1e3),"s - ",Math.floor(e.end_time/1e3),"s"]})]},e.face_id||n))}),["ID-0","ID-1","ID-2"].map(e=>{const n=t.MediaFolder_Audio?.getFirstMediaWithTag(e);return n?w.jsxs("div",{className:"mb-3 text-left",children:[w.jsx("div",{className:"mb-1 fw-bold",children:e}),w.jsx(g1,{localAudio:n,width:500,height:100,autoPlay:!1})]},e):null}),w.jsx(oi,{mediaFolder:t.MediaFolder_genVideo,label:"Generated Videos"}),w.jsx(oi,{mediaFolder:t.MediaFolder_Audio,label:"Generated Audios"})]})),MK=Ze(({shot:t})=>{if(!t.shotJson)return w.jsx("div",{children:"Loading shot info..."});const e=async()=>{window.confirm(`Are you sure you want to delete shot "${t.folder.name}"?`)&&await t.delete()};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[w.jsx("strong",{children:t.folder.name}),w.jsxs("div",{className:"d-flex gap-2",children:[w.jsx(Ca,{value:t.shotJson.getField("shot_type")||"shot_type",options:["simple shot","actor shot"],onChange:n=>{t.shotJson?.updateField("shot_type",n)}}),w.jsx(h1,{label:"Finished",value:!!t.shotJson.data?.finished,onToggle:n=>{t.shotJson&&t.shotJson.updateField("finished",n)}}),w.jsx(it,{onClick:()=>{t.log()},label:"Log Shot"}),w.jsx(it,{onClick:e,label:"Delete Shot",className:"btn-outline-danger"})]})]}),w.jsx(Ea,{tabs:{Generate_Image:w.jsx("div",{className:"card mb-2",children:w.jsxs("div",{className:"card-body",children:[w.jsx(xK,{shot:t}),w.jsx(AK,{shot:t}),w.jsx(oi,{mediaFolder:t.MediaFolder_results})]})}),Generate_VIDEO:w.jsxs(w.Fragment,{children:[w.jsx(TK,{shot:t}),w.jsx(CK,{shot:t}),w.jsx(Ux,{shot:t}),w.jsx(oi,{mediaFolder:t.MediaFolder_genVideo})]}),LipSync:w.jsxs(w.Fragment,{children:[w.jsx(RK,{shot:t}),w.jsx(Ux,{shot:t})]}),Output:w.jsxs(w.Fragment,{children:[w.jsx(oi,{mediaFolder:t.MediaFolder_genVideo}),w.jsx(oi,{mediaFolder:t.MediaFolder_results}),w.jsx(oi,{mediaFolder:t.MediaFolder_refVideo})]})}})]})}),NK=Ze(({scene:t})=>{const[e,n]=E.useState(null);E.useEffect(()=>{n(null)},[t]);const i=async()=>{const r=prompt("Enter new shot name:");if(!r)return;const a=await t.createShot(r);a&&n(a)};return w.jsxs("div",{className:"d-flex flex-column gap-3",children:[w.jsx(Xj,{initialHeight:200,children:w.jsxs("div",{className:"d-flex overflow-auto gap-2 h-100",children:[t.shots.map(r=>w.jsx(Yj,{shot:r,isSelected:e===r,onClick:n},r.folder.name)),w.jsx("div",{className:"mt-2",children:w.jsx(it,{label:"+ Add Shot",onClick:i})})]})}),w.jsxs("div",{children:[w.jsx(Ih,{onClick:()=>{t.generateAllShotImages()},label:"Generate ALL",is_loading:t.is_generating_all_shot_images}),w.jsx(it,{label:"+ Add Shot",onClick:i}),w.jsx(it,{label:"Export Resolve XML",onClick:()=>{t.createResolveXML()}})]}),e&&w.jsx(MK,{shot:e})]})}),IK=Ze(({project:t})=>{const e=t.scenes.flatMap(n=>n.shots.flatMap(i=>i.tasks.map(r=>r)));return w.jsxs(w.Fragment,{children:[w.jsx("h3",{children:"TASK VIEW"}),w.jsx(it,{label:"Delete Failed",onClick:()=>{for(const n of e)n.status=="failed"&&n.delete()}}),w.jsx(it,{label:"Delete Succeed",onClick:()=>{for(const n of e)n.status=="succeed"&&n.delete()}}),w.jsx(it,{label:"Check ALL Submitted",onClick:()=>{for(const n of e)(n.status=="submitted"||n.status=="processing")&&n.check_status()}}),w.jsx(ka,{label:`Tasks (${e.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:w.jsx("div",{className:"d-flex flex-column gap-0",children:e.map(n=>w.jsx(p1,{task:n,show_path:!0},n.id))})})]})}),DK=Ze(({project:t})=>{switch(t.currentView.type){case"settings":return w.jsx(C6,{project:t});case"script":return w.jsx(x6,{project:t});case"artbook":return t.artbook?w.jsx(R6,{artbook:t.artbook}):w.jsx("div",{children:"No Artbook found."});case"scene":if(!t.selectedScene)return null;const e=t.selectedScene;return w.jsxs("div",{children:[w.jsx("h2",{children:e.folder.name}),w.jsx(Ea,{tabs:{Scene:w.jsx(Kj,{scene:e}),Shots:w.jsx(NK,{scene:e})}})]});case"taskview":return w.jsx(IK,{project:t});default:return null}}),OK=Ze(()=>{const[t]=E.useState(()=>new b6(null)),e=async()=>{try{const i=await window.showDirectoryPicker();await t.loadFromFolder(i)}catch(i){console.error(i)}},n=async i=>{let r=await i.queryPermission({mode:"readwrite"});r!=="granted"&&(r=await i.requestPermission({mode:"readwrite"})),r==="granted"&&await t.loadFromFolder(i)};return E.useEffect(()=>{(async()=>{if(await t.loadDB(),t.userSettingsDB.data.lastOpenedFolder){const r=t.userSettingsDB.data.lastOpenedFolder;let a=await r.queryPermission({mode:"readwrite"});a!=="granted"&&(a=await r.requestPermission({mode:"readwrite"})),a==="granted"&&await t.loadFromFolder(r)}})()},[]),w.jsxs("div",{style:{minHeight:"100vh"},children:[w.jsx(w6,{onOpenFolder:e,recentFolders:t.userSettingsDB.data.recentFolders,onOpenRecent:n,project:t}),w.jsxs("div",{className:"d-flex",style:{height:"calc(100vh - 56px)",overflow:"hidden"},children:[w.jsx(T6,{project:t}),w.jsx("div",{className:"flex-grow-1 d-flex flex-column overflow-hidden",children:w.jsx("div",{className:"flex-grow-1 overflow-auto p-3",children:w.jsx(DK,{project:t})})})]})]})}),PK=E.createContext(void 0),kK=({children:t})=>{const[e,n]=E.useState(null);return w.jsx(PK.Provider,{value:{contentArea:e,setContentArea:n},children:t})};rk.createRoot(document.getElementById("root")).render(w.jsx(E.StrictMode,{children:w.jsx(kK,{children:w.jsx(OK,{})})}));
