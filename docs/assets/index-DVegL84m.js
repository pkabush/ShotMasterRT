function rP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Mu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sg={exports:{}},Gl={};var jw;function sP(){if(jw)return Gl;jw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:a}}return Gl.Fragment=e,Gl.jsx=n,Gl.jsxs=n,Gl}var Jw;function aP(){return Jw||(Jw=1,sg.exports=sP()),sg.exports}var b=aP(),ag={exports:{}},Re={};var Kw;function lP(){if(Kw)return Re;Kw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function M(P,K,se){this.props=P,this.context=K,this.refs=A,this.updater=se||T}M.prototype.isReactComponent={},M.prototype.setState=function(P,K){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,K,"setState")},M.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function I(){}I.prototype=M.prototype;function N(P,K,se){this.props=P,this.context=K,this.refs=A,this.updater=se||T}var D=N.prototype=new I;D.constructor=N,x(D,M.prototype),D.isPureReactComponent=!0;var L=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function j(P,K,se){var le=se.ref;return{$$typeof:t,type:P,key:K,ref:le!==void 0?le:null,props:se}}function Y(P,K){return j(P.type,K,P.props)}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function re(P){var K={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(se){return K[se]})}var ie=/\/+/g;function ae(P,K){return typeof P=="object"&&P!==null&&P.key!=null?re(""+P.key):K.toString(36)}function de(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(U,U):(P.status="pending",P.then(function(K){P.status==="pending"&&(P.status="fulfilled",P.value=K)},function(K){P.status==="pending"&&(P.status="rejected",P.reason=K)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function B(P,K,se,le,me){var be=typeof P;(be==="undefined"||be==="boolean")&&(P=null);var ve=!1;if(P===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(P.$$typeof){case t:case e:ve=!0;break;case m:return ve=P._init,B(ve(P._payload),K,se,le,me)}}if(ve)return me=me(P),ve=le===""?"."+ae(P,0):le,L(me)?(se="",ve!=null&&(se=ve.replace(ie,"$&/")+"/"),B(me,K,se,"",function(sn){return sn})):me!=null&&(W(me)&&(me=Y(me,se+(me.key==null||P&&P.key===me.key?"":(""+me.key).replace(ie,"$&/")+"/")+ve)),K.push(me)),1;ve=0;var Je=le===""?".":le+":";if(L(P))for(var Ke=0;Ke<P.length;Ke++)le=P[Ke],be=Je+ae(le,Ke),ve+=B(le,K,se,be,me);else if(Ke=w(P),typeof Ke=="function")for(P=Ke.call(P),Ke=0;!(le=P.next()).done;)le=le.value,be=Je+ae(le,Ke++),ve+=B(le,K,se,be,me);else if(be==="object"){if(typeof P.then=="function")return B(de(P),K,se,le,me);throw K=String(P),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ve}function Q(P,K,se){if(P==null)return P;var le=[],me=0;return B(P,le,"","",function(be){return K.call(se,be,me++)}),le}function ee(P){if(P._status===-1){var K=P._result;K=K(),K.then(function(se){(P._status===0||P._status===-1)&&(P._status=1,P._result=se)},function(se){(P._status===0||P._status===-1)&&(P._status=2,P._result=se)}),P._status===-1&&(P._status=0,P._result=K)}if(P._status===1)return P._result.default;throw P._result}var ne=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ce={map:Q,forEach:function(P,K,se){Q(P,function(){K.apply(this,arguments)},se)},count:function(P){var K=0;return Q(P,function(){K++}),K},toArray:function(P){return Q(P,function(K){return K})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=y,Re.Children=ce,Re.Component=M,Re.Fragment=n,Re.Profiler=r,Re.PureComponent=N,Re.StrictMode=i,Re.Suspense=h,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return O.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,K,se){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var le=x({},P.props),me=P.key;if(K!=null)for(be in K.key!==void 0&&(me=""+K.key),K)!q.call(K,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&K.ref===void 0||(le[be]=K[be]);var be=arguments.length-2;if(be===1)le.children=se;else if(1<be){for(var ve=Array(be),Je=0;Je<be;Je++)ve[Je]=arguments[Je+2];le.children=ve}return j(P.type,me,le)},Re.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},Re.createElement=function(P,K,se){var le,me={},be=null;if(K!=null)for(le in K.key!==void 0&&(be=""+K.key),K)q.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=K[le]);var ve=arguments.length-2;if(ve===1)me.children=se;else if(1<ve){for(var Je=Array(ve),Ke=0;Ke<ve;Ke++)Je[Ke]=arguments[Ke+2];me.children=Je}if(P&&P.defaultProps)for(le in ve=P.defaultProps,ve)me[le]===void 0&&(me[le]=ve[le]);return j(P,be,me)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:c,render:P}},Re.isValidElement=W,Re.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:ee}},Re.memo=function(P,K){return{$$typeof:d,type:P,compare:K===void 0?null:K}},Re.startTransition=function(P){var K=O.T,se={};O.T=se;try{var le=P(),me=O.S;me!==null&&me(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(U,ne)}catch(be){ne(be)}finally{K!==null&&se.types!==null&&(K.types=se.types),O.T=K}},Re.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Re.use=function(P){return O.H.use(P)},Re.useActionState=function(P,K,se){return O.H.useActionState(P,K,se)},Re.useCallback=function(P,K){return O.H.useCallback(P,K)},Re.useContext=function(P){return O.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,K){return O.H.useDeferredValue(P,K)},Re.useEffect=function(P,K){return O.H.useEffect(P,K)},Re.useEffectEvent=function(P){return O.H.useEffectEvent(P)},Re.useId=function(){return O.H.useId()},Re.useImperativeHandle=function(P,K,se){return O.H.useImperativeHandle(P,K,se)},Re.useInsertionEffect=function(P,K){return O.H.useInsertionEffect(P,K)},Re.useLayoutEffect=function(P,K){return O.H.useLayoutEffect(P,K)},Re.useMemo=function(P,K){return O.H.useMemo(P,K)},Re.useOptimistic=function(P,K){return O.H.useOptimistic(P,K)},Re.useReducer=function(P,K,se){return O.H.useReducer(P,K,se)},Re.useRef=function(P){return O.H.useRef(P)},Re.useState=function(P){return O.H.useState(P)},Re.useSyncExternalStore=function(P,K,se){return O.H.useSyncExternalStore(P,K,se)},Re.useTransition=function(){return O.H.useTransition()},Re.version="19.2.1",Re}var Yw;function oh(){return Yw||(Yw=1,ag.exports=lP()),ag.exports}var E=oh();const ot=Mu(E),Zx=rP({__proto__:null,default:ot},[E]);var lg={exports:{}},Hl={},ug={exports:{}},cg={};var Xw;function uP(){return Xw||(Xw=1,(function(t){function e(B,Q){var ee=B.length;B.push(Q);e:for(;0<ee;){var ne=ee-1>>>1,ce=B[ne];if(0<r(ce,Q))B[ne]=Q,B[ee]=ce,ee=ne;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Q=B[0],ee=B.pop();if(ee!==Q){B[0]=ee;e:for(var ne=0,ce=B.length,P=ce>>>1;ne<P;){var K=2*(ne+1)-1,se=B[K],le=K+1,me=B[le];if(0>r(se,ee))le<ce&&0>r(me,se)?(B[ne]=me,B[le]=ee,ne=le):(B[ne]=se,B[K]=ee,ne=K);else if(le<ce&&0>r(me,ee))B[ne]=me,B[le]=ee,ne=le;else break e}}return Q}function r(B,Q){var ee=B.sortIndex-Q.sortIndex;return ee!==0?ee:B.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],d=[],m=1,y=null,S=3,w=!1,T=!1,x=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var Q=n(d);Q!==null;){if(Q.callback===null)i(d);else if(Q.startTime<=B)i(d),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=n(d)}}function L(B){if(x=!1,D(B),!T)if(n(h)!==null)T=!0,U||(U=!0,re());else{var Q=n(d);Q!==null&&de(L,Q.startTime-B)}}var U=!1,O=-1,q=5,j=-1;function Y(){return A?!0:!(t.unstable_now()-j<q)}function W(){if(A=!1,U){var B=t.unstable_now();j=B;var Q=!0;try{e:{T=!1,x&&(x=!1,I(O),O=-1),w=!0;var ee=S;try{t:{for(D(B),y=n(h);y!==null&&!(y.expirationTime>B&&Y());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,S=y.priorityLevel;var ce=ne(y.expirationTime<=B);if(B=t.unstable_now(),typeof ce=="function"){y.callback=ce,D(B),Q=!0;break t}y===n(h)&&i(h),D(B)}else i(h);y=n(h)}if(y!==null)Q=!0;else{var P=n(d);P!==null&&de(L,P.startTime-B),Q=!1}}break e}finally{y=null,S=ee,w=!1}Q=void 0}}finally{Q?re():U=!1}}}var re;if(typeof N=="function")re=function(){N(W)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=W,re=function(){ae.postMessage(null)}}else re=function(){M(W,0)};function de(B,Q){O=M(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(B){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ee=S;S=Q;try{return B()}finally{S=ee}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=S;S=B;try{return Q()}finally{S=ee}},t.unstable_scheduleCallback=function(B,Q,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,B={id:m++,callback:Q,priorityLevel:B,startTime:ee,expirationTime:ce,sortIndex:-1},ee>ne?(B.sortIndex=ee,e(d,B),n(h)===null&&B===n(d)&&(x?(I(O),O=-1):x=!0,de(L,ee-ne))):(B.sortIndex=ce,e(h,B),T||w||(T=!0,U||(U=!0,re()))),B},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(B){var Q=S;return function(){var ee=S;S=Q;try{return B.apply(this,arguments)}finally{S=ee}}}})(cg)),cg}var Ww;function cP(){return Ww||(Ww=1,ug.exports=uP()),ug.exports}var fg={exports:{}},Lt={};var Qw;function fP(){if(Qw)return Lt;Qw=1;var t=oh();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Lt.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,m)},Lt.flushSync=function(h){var d=l.T,m=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=d,i.p=m,i.d.f()}},Lt.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},Lt.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Lt.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),S=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:w}):m==="script"&&i.d.X(h,{crossOrigin:y,integrity:S,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Lt.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},Lt.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);i.d.L(h,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Lt.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},Lt.requestFormReset=function(h){i.d.r(h)},Lt.unstable_batchedUpdates=function(h,d){return h(d)},Lt.useFormState=function(h,d,m){return l.H.useFormState(h,d,m)},Lt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Lt.version="19.2.1",Lt}var Zw;function eA(){if(Zw)return fg.exports;Zw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fg.exports=fP(),fg.exports}var eE;function dP(){if(eE)return Hl;eE=1;var t=cP(),e=oh(),n=eA();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,u=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(u=s.return),o=s.return;while(o)}return s.tag===3?u:null}function l(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function c(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function d(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var u=o,f=s;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return h(v),o;if(_===f)return h(v),s;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=_;else{for(var C=!1,R=v.child;R;){if(R===u){C=!0,u=v,f=_;break}if(R===f){C=!0,f=v,u=_;break}R=R.sibling}if(!C){for(R=_.child;R;){if(R===u){C=!0,u=_,f=v;break}if(R===f){C=!0,f=_,u=v;break}R=R.sibling}if(!C)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?o:s}function m(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=m(o),s!==null)return s;o=o.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var ie=Symbol.for("react.client.reference");function ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ie?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case U:return"SuspenseList";case j:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case N:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case D:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return s=o.displayName||null,s!==null?s:ae(o.type)||"Memo";case q:s=o._payload,o=o._init;try{return ae(o(s))}catch{}}return null}var de=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ne=[],ce=-1;function P(o){return{current:o}}function K(o){0>ce||(o.current=ne[ce],ne[ce]=null,ce--)}function se(o,s){ce++,ne[ce]=o.current,o.current=s}var le=P(null),me=P(null),be=P(null),ve=P(null);function Je(o,s){switch(se(be,s),se(me,o),se(le,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?mw(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=mw(s),o=gw(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}K(le),se(le,o)}function Ke(){K(le),K(me),K(be)}function sn(o){o.memoizedState!==null&&se(ve,o);var s=le.current,u=gw(s,o.type);s!==u&&(se(me,o),se(le,u))}function Tn(o){me.current===o&&(K(le),K(me)),ve.current===o&&(K(ve),Ul._currentValue=ee)}var gi,jt;function Jt(o){if(gi===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);gi=s&&s[1]||"",jt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gi+o+jt}var nt=!1;function Gi(o,s){if(!o||nt)return"";nt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(J){var z=J}Reflect.construct(o,[],te)}else{try{te.call()}catch(J){z=J}o.call(te.prototype)}}else{try{throw Error()}catch(J){z=J}(te=o())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(J){if(J&&z&&typeof J.stack=="string")return[J.stack,z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),C=_[0],R=_[1];if(C&&R){var k=C.split(`
`),H=R.split(`
`);for(v=f=0;f<k.length&&!k[f].includes("DetermineComponentFrameRoot");)f++;for(;v<H.length&&!H[v].includes("DetermineComponentFrameRoot");)v++;if(f===k.length||v===H.length)for(f=k.length-1,v=H.length-1;1<=f&&0<=v&&k[f]!==H[v];)v--;for(;1<=f&&0<=v;f--,v--)if(k[f]!==H[v]){if(f!==1||v!==1)do if(f--,v--,0>v||k[f]!==H[v]){var X=`
`+k[f].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=f&&0<=v);break}}}finally{nt=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?Jt(u):""}function Ro(o,s){switch(o.tag){case 26:case 27:case 5:return Jt(o.type);case 16:return Jt("Lazy");case 13:return o.child!==s&&s!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Gi(o.type,!1);case 11:return Gi(o.type.render,!1);case 1:return Gi(o.type,!0);case 31:return Jt("Activity");default:return""}}function rc(o){try{var s="",u=null;do s+=Ro(o,u),u=o,o=o.return;while(o);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var ja=Object.prototype.hasOwnProperty,Wn=t.unstable_scheduleCallback,Mo=t.unstable_cancelCallback,sc=t.unstable_shouldYield,ac=t.unstable_requestPaint,At=t.unstable_now,lc=t.unstable_getCurrentPriorityLevel,Ja=t.unstable_ImmediatePriority,Ka=t.unstable_UserBlockingPriority,Cr=t.unstable_NormalPriority,$1=t.unstable_LowPriority,Y_=t.unstable_IdlePriority,G1=t.log,H1=t.unstable_setDisableYieldValue,Ya=null,an=null;function No(o){if(typeof G1=="function"&&H1(o),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ya,o)}catch{}}var ln=Math.clz32?Math.clz32:q1,V1=Math.log,z1=Math.LN2;function q1(o){return o>>>=0,o===0?32:31-(V1(o)/z1|0)|0}var uc=256,cc=262144,fc=4194304;function Tr(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function dc(o,s,u){var f=o.pendingLanes;if(f===0)return 0;var v=0,_=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var R=f&134217727;return R!==0?(f=R&~_,f!==0?v=Tr(f):(C&=R,C!==0?v=Tr(C):u||(u=R&~o,u!==0&&(v=Tr(u))))):(R=f&~_,R!==0?v=Tr(R):C!==0?v=Tr(C):u||(u=f&~o,u!==0&&(v=Tr(u)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,u=s&-s,_>=u||_===32&&(u&4194048)!==0)?s:v}function Xa(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function j1(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X_(){var o=fc;return fc<<=1,(fc&62914560)===0&&(fc=4194304),o}function Kh(o){for(var s=[],u=0;31>u;u++)s.push(o);return s}function Wa(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function J1(o,s,u,f,v,_){var C=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var R=o.entanglements,k=o.expirationTimes,H=o.hiddenUpdates;for(u=C&~u;0<u;){var X=31-ln(u),te=1<<X;R[X]=0,k[X]=-1;var z=H[X];if(z!==null)for(H[X]=null,X=0;X<z.length;X++){var J=z[X];J!==null&&(J.lane&=-536870913)}u&=~te}f!==0&&W_(o,f,0),_!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=_&~(C&~s))}function W_(o,s,u){o.pendingLanes|=s,o.suspendedLanes&=~s;var f=31-ln(s);o.entangledLanes|=s,o.entanglements[f]=o.entanglements[f]|1073741824|u&261930}function Q_(o,s){var u=o.entangledLanes|=s;for(o=o.entanglements;u;){var f=31-ln(u),v=1<<f;v&s|o[f]&s&&(o[f]|=s),u&=~v}}function Z_(o,s){var u=s&-s;return u=(u&42)!==0?1:Yh(u),(u&(o.suspendedLanes|s))!==0?0:u}function Yh(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Xh(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function e0(){var o=Q.p;return o!==0?o:(o=window.event,o===void 0?32:Bw(o.type))}function t0(o,s){var u=Q.p;try{return Q.p=o,s()}finally{Q.p=u}}var Io=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Io,Kt="__reactProps$"+Io,gs="__reactContainer$"+Io,Wh="__reactEvents$"+Io,K1="__reactListeners$"+Io,Y1="__reactHandles$"+Io,n0="__reactResources$"+Io,Qa="__reactMarker$"+Io;function Qh(o){delete o[Rt],delete o[Kt],delete o[Wh],delete o[K1],delete o[Y1]}function vs(o){var s=o[Rt];if(s)return s;for(var u=o.parentNode;u;){if(s=u[gs]||u[Rt]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(o=Ew(o);o!==null;){if(u=o[Rt])return u;o=Ew(o)}return s}o=u,u=o.parentNode}return null}function ys(o){if(o=o[Rt]||o[gs]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function Za(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function _s(o){var s=o[n0];return s||(s=o[n0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(o){o[Qa]=!0}var i0=new Set,o0={};function xr(o,s){Ss(o,s),Ss(o+"Capture",s)}function Ss(o,s){for(o0[o]=s,o=0;o<s.length;o++)i0.add(s[o])}var X1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),r0={},s0={};function W1(o){return ja.call(s0,o)?!0:ja.call(r0,o)?!1:X1.test(o)?s0[o]=!0:(r0[o]=!0,!1)}function hc(o,s,u){if(W1(s))if(u===null)o.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+u)}}function pc(o,s,u){if(u===null)o.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+u)}}function Hi(o,s,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(s,u,""+f)}}function xn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function a0(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Q1(o,s,u){var f=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(C){u=""+C,_.call(this,C)}}),Object.defineProperty(o,s,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Zh(o){if(!o._valueTracker){var s=a0(o)?"checked":"value";o._valueTracker=Q1(o,s,""+o[s])}}function l0(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return o&&(f=a0(o)?o.checked?"true":"false":o.value),o=f,o!==u?(s.setValue(o),!0):!1}function mc(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Z1=/[\n"\\]/g;function An(o){return o.replace(Z1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ep(o,s,u,f,v,_,C,R){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+xn(s)):o.value!==""+xn(s)&&(o.value=""+xn(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?tp(o,C,xn(s)):u!=null?tp(o,C,xn(u)):f!=null&&o.removeAttribute("value"),v==null&&_!=null&&(o.defaultChecked=!!_),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+xn(R):o.removeAttribute("name")}function u0(o,s,u,f,v,_,C,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Zh(o);return}u=u!=null?""+xn(u):"",s=s!=null?""+xn(s):u,R||s===o.value||(o.value=s),o.defaultValue=s}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=R?o.checked:!!f,o.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),Zh(o)}function tp(o,s,u){s==="number"&&mc(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function bs(o,s,u,f){if(o=o.options,s){s={};for(var v=0;v<u.length;v++)s["$"+u[v]]=!0;for(u=0;u<o.length;u++)v=s.hasOwnProperty("$"+o[u].value),o[u].selected!==v&&(o[u].selected=v),v&&f&&(o[u].defaultSelected=!0)}else{for(u=""+xn(u),s=null,v=0;v<o.length;v++){if(o[v].value===u){o[v].selected=!0,f&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function c0(o,s,u){if(s!=null&&(s=""+xn(s),s!==o.value&&(o.value=s),u==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=u!=null?""+xn(u):""}function f0(o,s,u,f){if(s==null){if(f!=null){if(u!=null)throw Error(i(92));if(de(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),s=u}u=xn(s),o.defaultValue=u,f=o.textContent,f===u&&f!==""&&f!==null&&(o.value=f),Zh(o)}function ws(o,s){if(s){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=s;return}}o.textContent=s}var eO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function d0(o,s,u){var f=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":f?o.setProperty(s,u):typeof u!="number"||u===0||eO.has(s)?s==="float"?o.cssFloat=u:o[s]=(""+u).trim():o[s]=u+"px"}function h0(o,s,u){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var v in s)f=s[v],s.hasOwnProperty(v)&&u[v]!==f&&d0(o,v,f)}else for(var _ in s)s.hasOwnProperty(_)&&d0(o,_,s[_])}function np(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gc(o){return nO.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Vi(){}var ip=null;function op(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Es=null,Cs=null;function p0(o){var s=ys(o);if(s&&(o=s.stateNode)){var u=o[Kt]||null;e:switch(o=s.stateNode,s.type){case"input":if(ep(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+An(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==o&&f.form===o.form){var v=f[Kt]||null;if(!v)throw Error(i(90));ep(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<u.length;s++)f=u[s],f.form===o.form&&l0(f)}break e;case"textarea":c0(o,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&bs(o,!!u.multiple,s,!1)}}}var rp=!1;function m0(o,s,u){if(rp)return o(s,u);rp=!0;try{var f=o(s);return f}finally{if(rp=!1,(Es!==null||Cs!==null)&&(of(),Es&&(s=Es,o=Cs,Cs=Es=null,p0(s),o)))for(s=0;s<o.length;s++)p0(o[s])}}function el(o,s){var u=o.stateNode;if(u===null)return null;var f=u[Kt]||null;if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(i(231,s,typeof u));return u}var zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sp=!1;if(zi)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){sp=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{sp=!1}var Do=null,ap=null,vc=null;function g0(){if(vc)return vc;var o,s=ap,u=s.length,f,v="value"in Do?Do.value:Do.textContent,_=v.length;for(o=0;o<u&&s[o]===v[o];o++);var C=u-o;for(f=1;f<=C&&s[u-f]===v[_-f];f++);return vc=v.slice(o,1<f?1-f:void 0)}function yc(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function _c(){return!0}function v0(){return!1}function Yt(o){function s(u,f,v,_,C){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(u=o[R],this[R]=u?u(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_c:v0,this.isPropagationStopped=v0,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),s}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=Yt(Ar),nl=y({},Ar,{view:0,detail:0}),iO=Yt(nl),lp,up,il,bc=y({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==il&&(il&&o.type==="mousemove"?(lp=o.screenX-il.screenX,up=o.screenY-il.screenY):up=lp=0,il=o),lp)},movementY:function(o){return"movementY"in o?o.movementY:up}}),y0=Yt(bc),oO=y({},bc,{dataTransfer:0}),rO=Yt(oO),sO=y({},nl,{relatedTarget:0}),cp=Yt(sO),aO=y({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),lO=Yt(aO),uO=y({},Ar,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),cO=Yt(uO),fO=y({},Ar,{data:0}),_0=Yt(fO),dO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mO(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=pO[o])?!!s[o]:!1}function fp(){return mO}var gO=y({},nl,{key:function(o){if(o.key){var s=dO[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=yc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?hO[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fp,charCode:function(o){return o.type==="keypress"?yc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?yc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),vO=Yt(gO),yO=y({},bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S0=Yt(yO),_O=y({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fp}),SO=Yt(_O),bO=y({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),wO=Yt(bO),EO=y({},bc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),CO=Yt(EO),TO=y({},Ar,{newState:0,oldState:0}),xO=Yt(TO),AO=[9,13,27,32],dp=zi&&"CompositionEvent"in window,ol=null;zi&&"documentMode"in document&&(ol=document.documentMode);var RO=zi&&"TextEvent"in window&&!ol,b0=zi&&(!dp||ol&&8<ol&&11>=ol),w0=" ",E0=!1;function C0(o,s){switch(o){case"keyup":return AO.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ts=!1;function MO(o,s){switch(o){case"compositionend":return T0(s);case"keypress":return s.which!==32?null:(E0=!0,w0);case"textInput":return o=s.data,o===w0&&E0?null:o;default:return null}}function NO(o,s){if(Ts)return o==="compositionend"||!dp&&C0(o,s)?(o=g0(),vc=ap=Do=null,Ts=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return b0&&s.locale!=="ko"?null:s.data;default:return null}}var IO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!IO[o.type]:s==="textarea"}function A0(o,s,u,f){Es?Cs?Cs.push(f):Cs=[f]:Es=f,s=ff(s,"onChange"),0<s.length&&(u=new Sc("onChange","change",null,u,f),o.push({event:u,listeners:s}))}var rl=null,sl=null;function DO(o){uw(o,0)}function wc(o){var s=Za(o);if(l0(s))return o}function R0(o,s){if(o==="change")return s}var M0=!1;if(zi){var hp;if(zi){var pp="oninput"in document;if(!pp){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),pp=typeof N0.oninput=="function"}hp=pp}else hp=!1;M0=hp&&(!document.documentMode||9<document.documentMode)}function I0(){rl&&(rl.detachEvent("onpropertychange",D0),sl=rl=null)}function D0(o){if(o.propertyName==="value"&&wc(sl)){var s=[];A0(s,sl,o,op(o)),m0(DO,s)}}function OO(o,s,u){o==="focusin"?(I0(),rl=s,sl=u,rl.attachEvent("onpropertychange",D0)):o==="focusout"&&I0()}function kO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return wc(sl)}function PO(o,s){if(o==="click")return wc(s)}function LO(o,s){if(o==="input"||o==="change")return wc(s)}function UO(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var un=typeof Object.is=="function"?Object.is:UO;function al(o,s){if(un(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var u=Object.keys(o),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!ja.call(s,v)||!un(o[v],s[v]))return!1}return!0}function O0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function k0(o,s){var u=O0(o);o=0;for(var f;u;){if(u.nodeType===3){if(f=o+u.textContent.length,o<=s&&f>=s)return{node:u,offset:s-o};o=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=O0(u)}}function P0(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?P0(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function L0(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=mc(o.document);s instanceof o.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)o=s.contentWindow;else break;s=mc(o.document)}return s}function mp(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var FO=zi&&"documentMode"in document&&11>=document.documentMode,xs=null,gp=null,ll=null,vp=!1;function U0(o,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;vp||xs==null||xs!==mc(f)||(f=xs,"selectionStart"in f&&mp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ll&&al(ll,f)||(ll=f,f=ff(gp,"onSelect"),0<f.length&&(s=new Sc("onSelect","select",null,s,u),o.push({event:s,listeners:f}),s.target=xs)))}function Rr(o,s){var u={};return u[o.toLowerCase()]=s.toLowerCase(),u["Webkit"+o]="webkit"+s,u["Moz"+o]="moz"+s,u}var As={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},yp={},F0={};zi&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Mr(o){if(yp[o])return yp[o];if(!As[o])return o;var s=As[o],u;for(u in s)if(s.hasOwnProperty(u)&&u in F0)return yp[o]=s[u];return o}var B0=Mr("animationend"),$0=Mr("animationiteration"),G0=Mr("animationstart"),BO=Mr("transitionrun"),$O=Mr("transitionstart"),GO=Mr("transitioncancel"),H0=Mr("transitionend"),V0=new Map,_p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_p.push("scrollEnd");function Qn(o,s){V0.set(o,s),xr(s,[o])}var Ec=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Rn=[],Rs=0,Sp=0;function Cc(){for(var o=Rs,s=Sp=Rs=0;s<o;){var u=Rn[s];Rn[s++]=null;var f=Rn[s];Rn[s++]=null;var v=Rn[s];Rn[s++]=null;var _=Rn[s];if(Rn[s++]=null,f!==null&&v!==null){var C=f.pending;C===null?v.next=v:(v.next=C.next,C.next=v),f.pending=v}_!==0&&z0(u,v,_)}}function Tc(o,s,u,f){Rn[Rs++]=o,Rn[Rs++]=s,Rn[Rs++]=u,Rn[Rs++]=f,Sp|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function bp(o,s,u,f){return Tc(o,s,u,f),xc(o)}function Nr(o,s){return Tc(o,null,null,s),xc(o)}function z0(o,s,u){o.lanes|=u;var f=o.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=o.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(v=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,v&&s!==null&&(v=31-ln(u),o=_.hiddenUpdates,f=o[v],f===null?o[v]=[s]:f.push(s),s.lane=u|536870912),_):null}function xc(o){if(50<Nl)throw Nl=0,Nm=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Ms={};function HO(o,s,u,f){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(o,s,u,f){return new HO(o,s,u,f)}function wp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function qi(o,s){var u=o.alternate;return u===null?(u=cn(o.tag,s,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=s,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,s=o.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function q0(o,s){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,s=u.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function Ac(o,s,u,f,v,_){var C=0;if(f=o,typeof o=="function")wp(o)&&(C=1);else if(typeof o=="string")C=Jk(o,u,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case j:return o=cn(31,u,s,v),o.elementType=j,o.lanes=_,o;case x:return Ir(u.children,v,_,s);case A:C=8,v|=24;break;case M:return o=cn(12,u,s,v|2),o.elementType=M,o.lanes=_,o;case L:return o=cn(13,u,s,v),o.elementType=L,o.lanes=_,o;case U:return o=cn(19,u,s,v),o.elementType=U,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:C=10;break e;case I:C=9;break e;case D:C=11;break e;case O:C=14;break e;case q:C=16,f=null;break e}C=29,u=Error(i(130,o===null?"null":typeof o,"")),f=null}return s=cn(C,u,s,v),s.elementType=o,s.type=f,s.lanes=_,s}function Ir(o,s,u,f){return o=cn(7,o,f,s),o.lanes=u,o}function Ep(o,s,u){return o=cn(6,o,null,s),o.lanes=u,o}function j0(o){var s=cn(18,null,null,0);return s.stateNode=o,s}function Cp(o,s,u){return s=cn(4,o.children!==null?o.children:[],o.key,s),s.lanes=u,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var J0=new WeakMap;function Mn(o,s){if(typeof o=="object"&&o!==null){var u=J0.get(o);return u!==void 0?u:(s={value:o,source:s,stack:rc(s)},J0.set(o,s),s)}return{value:o,source:s,stack:rc(s)}}var Ns=[],Is=0,Rc=null,ul=0,Nn=[],In=0,Oo=null,vi=1,yi="";function ji(o,s){Ns[Is++]=ul,Ns[Is++]=Rc,Rc=o,ul=s}function K0(o,s,u){Nn[In++]=vi,Nn[In++]=yi,Nn[In++]=Oo,Oo=o;var f=vi;o=yi;var v=32-ln(f)-1;f&=~(1<<v),u+=1;var _=32-ln(s)+v;if(30<_){var C=v-v%5;_=(f&(1<<C)-1).toString(32),f>>=C,v-=C,vi=1<<32-ln(s)+v|u<<v|f,yi=_+o}else vi=1<<_|u<<v|f,yi=o}function Tp(o){o.return!==null&&(ji(o,1),K0(o,1,0))}function xp(o){for(;o===Rc;)Rc=Ns[--Is],Ns[Is]=null,ul=Ns[--Is],Ns[Is]=null;for(;o===Oo;)Oo=Nn[--In],Nn[In]=null,yi=Nn[--In],Nn[In]=null,vi=Nn[--In],Nn[In]=null}function Y0(o,s){Nn[In++]=vi,Nn[In++]=yi,Nn[In++]=Oo,vi=s.id,yi=s.overflow,Oo=o}var Mt=null,st=null,Fe=!1,ko=null,Dn=!1,Ap=Error(i(519));function Po(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(Mn(s,o)),Ap}function X0(o){var s=o.stateNode,u=o.type,f=o.memoizedProps;switch(s[Rt]=o,s[Kt]=f,u){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(u=0;u<Dl.length;u++)Pe(Dl[u],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),u0(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),f0(s,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||f.suppressHydrationWarning===!0||hw(s.textContent,u)?(f.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),f.onScroll!=null&&Pe("scroll",s),f.onScrollEnd!=null&&Pe("scrollend",s),f.onClick!=null&&(s.onclick=Vi),s=!0):s=!1,s||Po(o,!0)}function W0(o){for(Mt=o.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Mt=Mt.return}}function Ds(o){if(o!==Mt)return!1;if(!Fe)return W0(o),Fe=!0,!1;var s=o.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||qm(o.type,o.memoizedProps)),u=!u),u&&st&&Po(o),W0(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));st=ww(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));st=ww(o)}else s===27?(s=st,Yo(o.type)?(o=Xm,Xm=null,st=o):st=s):st=Mt?kn(o.stateNode.nextSibling):null;return!0}function Dr(){st=Mt=null,Fe=!1}function Rp(){var o=ko;return o!==null&&(Zt===null?Zt=o:Zt.push.apply(Zt,o),ko=null),o}function cl(o){ko===null?ko=[o]:ko.push(o)}var Mp=P(null),Or=null,Ji=null;function Lo(o,s,u){se(Mp,s._currentValue),s._currentValue=u}function Ki(o){o._currentValue=Mp.current,K(Mp)}function Np(o,s,u){for(;o!==null;){var f=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),o===u)break;o=o.return}}function Ip(o,s,u,f){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var _=v.dependencies;if(_!==null){var C=v.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=v;for(var k=0;k<s.length;k++)if(R.context===s[k]){_.lanes|=u,R=_.alternate,R!==null&&(R.lanes|=u),Np(_.return,u,o),f||(C=null);break e}_=R.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=u,_=C.alternate,_!==null&&(_.lanes|=u),Np(C,u,o),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===o){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function Os(o,s,u,f){o=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var R=v.type;un(v.pendingProps.value,C.value)||(o!==null?o.push(R):o=[R])}}else if(v===ve.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Ul):o=[Ul])}v=v.return}o!==null&&Ip(s,o,u,f),s.flags|=262144}function Mc(o){for(o=o.firstContext;o!==null;){if(!un(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function kr(o){Or=o,Ji=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Nt(o){return Q0(Or,o)}function Nc(o,s){return Or===null&&kr(o),Q0(o,s)}function Q0(o,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Ji===null){if(o===null)throw Error(i(308));Ji=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else Ji=Ji.next=s;return u}var VO=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(u,f){o.push(f)}};this.abort=function(){s.aborted=!0,o.forEach(function(u){return u()})}},zO=t.unstable_scheduleCallback,qO=t.unstable_NormalPriority,mt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dp(){return{controller:new VO,data:new Map,refCount:0}}function fl(o){o.refCount--,o.refCount===0&&zO(qO,function(){o.controller.abort()})}var dl=null,Op=0,ks=0,Ps=null;function jO(o,s){if(dl===null){var u=dl=[];Op=0,ks=Lm(),Ps={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Op++,s.then(Z0,Z0),s}function Z0(){if(--Op===0&&dl!==null){Ps!==null&&(Ps.status="fulfilled");var o=dl;dl=null,ks=0,Ps=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function JO(o,s){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return o.then(function(){f.status="fulfilled",f.value=s;for(var v=0;v<u.length;v++)(0,u[v])(s)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var eS=B.S;B.S=function(o,s){Ub=At(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&jO(o,s),eS!==null&&eS(o,s)};var Pr=P(null);function kp(){var o=Pr.current;return o!==null?o:it.pooledCache}function Ic(o,s){s===null?se(Pr,Pr.current):se(Pr,s.pool)}function tS(){var o=kp();return o===null?null:{parent:mt._currentValue,pool:o}}var Ls=Error(i(460)),Pp=Error(i(474)),Dc=Error(i(542)),Oc={then:function(){}};function nS(o){return o=o.status,o==="fulfilled"||o==="rejected"}function iS(o,s,u){switch(u=o[u],u===void 0?o.push(s):u!==s&&(s.then(Vi,Vi),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,rS(o),o;default:if(typeof s.status=="string")s.then(Vi,Vi);else{if(o=it,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(f){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=f}},function(f){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,rS(o),o}throw Ur=s,Ls}}function Lr(o){try{var s=o._init;return s(o._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ur=u,Ls):u}}var Ur=null;function oS(){if(Ur===null)throw Error(i(459));var o=Ur;return Ur=null,o}function rS(o){if(o===Ls||o===Dc)throw Error(i(483))}var Us=null,hl=0;function kc(o){var s=hl;return hl+=1,Us===null&&(Us=[]),iS(Us,o,s)}function pl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Pc(o,s){throw s.$$typeof===S?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function sS(o){function s($,F){if(o){var G=$.deletions;G===null?($.deletions=[F],$.flags|=16):G.push(F)}}function u($,F){if(!o)return null;for(;F!==null;)s($,F),F=F.sibling;return null}function f($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function v($,F){return $=qi($,F),$.index=0,$.sibling=null,$}function _($,F,G){return $.index=G,o?(G=$.alternate,G!==null?(G=G.index,G<F?($.flags|=67108866,F):G):($.flags|=67108866,F)):($.flags|=1048576,F)}function C($){return o&&$.alternate===null&&($.flags|=67108866),$}function R($,F,G,Z){return F===null||F.tag!==6?(F=Ep(G,$.mode,Z),F.return=$,F):(F=v(F,G),F.return=$,F)}function k($,F,G,Z){var _e=G.type;return _e===x?X($,F,G.props.children,Z,G.key):F!==null&&(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&Lr(_e)===F.type)?(F=v(F,G.props),pl(F,G),F.return=$,F):(F=Ac(G.type,G.key,G.props,null,$.mode,Z),pl(F,G),F.return=$,F)}function H($,F,G,Z){return F===null||F.tag!==4||F.stateNode.containerInfo!==G.containerInfo||F.stateNode.implementation!==G.implementation?(F=Cp(G,$.mode,Z),F.return=$,F):(F=v(F,G.children||[]),F.return=$,F)}function X($,F,G,Z,_e){return F===null||F.tag!==7?(F=Ir(G,$.mode,Z,_e),F.return=$,F):(F=v(F,G),F.return=$,F)}function te($,F,G){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Ep(""+F,$.mode,G),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return G=Ac(F.type,F.key,F.props,null,$.mode,G),pl(G,F),G.return=$,G;case T:return F=Cp(F,$.mode,G),F.return=$,F;case q:return F=Lr(F),te($,F,G)}if(de(F)||re(F))return F=Ir(F,$.mode,G,null),F.return=$,F;if(typeof F.then=="function")return te($,kc(F),G);if(F.$$typeof===N)return te($,Nc($,F),G);Pc($,F)}return null}function z($,F,G,Z){var _e=F!==null?F.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:R($,F,""+G,Z);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===_e?k($,F,G,Z):null;case T:return G.key===_e?H($,F,G,Z):null;case q:return G=Lr(G),z($,F,G,Z)}if(de(G)||re(G))return _e!==null?null:X($,F,G,Z,null);if(typeof G.then=="function")return z($,F,kc(G),Z);if(G.$$typeof===N)return z($,F,Nc($,G),Z);Pc($,G)}return null}function J($,F,G,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return $=$.get(G)||null,R(F,$,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return $=$.get(Z.key===null?G:Z.key)||null,k(F,$,Z,_e);case T:return $=$.get(Z.key===null?G:Z.key)||null,H(F,$,Z,_e);case q:return Z=Lr(Z),J($,F,G,Z,_e)}if(de(Z)||re(Z))return $=$.get(G)||null,X(F,$,Z,_e,null);if(typeof Z.then=="function")return J($,F,G,kc(Z),_e);if(Z.$$typeof===N)return J($,F,G,Nc(F,Z),_e);Pc(F,Z)}return null}function he($,F,G,Z){for(var _e=null,Ve=null,ge=F,Ne=F=0,Ue=null;ge!==null&&Ne<G.length;Ne++){ge.index>Ne?(Ue=ge,ge=null):Ue=ge.sibling;var ze=z($,ge,G[Ne],Z);if(ze===null){ge===null&&(ge=Ue);break}o&&ge&&ze.alternate===null&&s($,ge),F=_(ze,F,Ne),Ve===null?_e=ze:Ve.sibling=ze,Ve=ze,ge=Ue}if(Ne===G.length)return u($,ge),Fe&&ji($,Ne),_e;if(ge===null){for(;Ne<G.length;Ne++)ge=te($,G[Ne],Z),ge!==null&&(F=_(ge,F,Ne),Ve===null?_e=ge:Ve.sibling=ge,Ve=ge);return Fe&&ji($,Ne),_e}for(ge=f(ge);Ne<G.length;Ne++)Ue=J(ge,$,Ne,G[Ne],Z),Ue!==null&&(o&&Ue.alternate!==null&&ge.delete(Ue.key===null?Ne:Ue.key),F=_(Ue,F,Ne),Ve===null?_e=Ue:Ve.sibling=Ue,Ve=Ue);return o&&ge.forEach(function(er){return s($,er)}),Fe&&ji($,Ne),_e}function Ee($,F,G,Z){if(G==null)throw Error(i(151));for(var _e=null,Ve=null,ge=F,Ne=F=0,Ue=null,ze=G.next();ge!==null&&!ze.done;Ne++,ze=G.next()){ge.index>Ne?(Ue=ge,ge=null):Ue=ge.sibling;var er=z($,ge,ze.value,Z);if(er===null){ge===null&&(ge=Ue);break}o&&ge&&er.alternate===null&&s($,ge),F=_(er,F,Ne),Ve===null?_e=er:Ve.sibling=er,Ve=er,ge=Ue}if(ze.done)return u($,ge),Fe&&ji($,Ne),_e;if(ge===null){for(;!ze.done;Ne++,ze=G.next())ze=te($,ze.value,Z),ze!==null&&(F=_(ze,F,Ne),Ve===null?_e=ze:Ve.sibling=ze,Ve=ze);return Fe&&ji($,Ne),_e}for(ge=f(ge);!ze.done;Ne++,ze=G.next())ze=J(ge,$,Ne,ze.value,Z),ze!==null&&(o&&ze.alternate!==null&&ge.delete(ze.key===null?Ne:ze.key),F=_(ze,F,Ne),Ve===null?_e=ze:Ve.sibling=ze,Ve=ze);return o&&ge.forEach(function(oP){return s($,oP)}),Fe&&ji($,Ne),_e}function et($,F,G,Z){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var _e=G.key;F!==null;){if(F.key===_e){if(_e=G.type,_e===x){if(F.tag===7){u($,F.sibling),Z=v(F,G.props.children),Z.return=$,$=Z;break e}}else if(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&Lr(_e)===F.type){u($,F.sibling),Z=v(F,G.props),pl(Z,G),Z.return=$,$=Z;break e}u($,F);break}else s($,F);F=F.sibling}G.type===x?(Z=Ir(G.props.children,$.mode,Z,G.key),Z.return=$,$=Z):(Z=Ac(G.type,G.key,G.props,null,$.mode,Z),pl(Z,G),Z.return=$,$=Z)}return C($);case T:e:{for(_e=G.key;F!==null;){if(F.key===_e)if(F.tag===4&&F.stateNode.containerInfo===G.containerInfo&&F.stateNode.implementation===G.implementation){u($,F.sibling),Z=v(F,G.children||[]),Z.return=$,$=Z;break e}else{u($,F);break}else s($,F);F=F.sibling}Z=Cp(G,$.mode,Z),Z.return=$,$=Z}return C($);case q:return G=Lr(G),et($,F,G,Z)}if(de(G))return he($,F,G,Z);if(re(G)){if(_e=re(G),typeof _e!="function")throw Error(i(150));return G=_e.call(G),Ee($,F,G,Z)}if(typeof G.then=="function")return et($,F,kc(G),Z);if(G.$$typeof===N)return et($,F,Nc($,G),Z);Pc($,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,F!==null&&F.tag===6?(u($,F.sibling),Z=v(F,G),Z.return=$,$=Z):(u($,F),Z=Ep(G,$.mode,Z),Z.return=$,$=Z),C($)):u($,F)}return function($,F,G,Z){try{hl=0;var _e=et($,F,G,Z);return Us=null,_e}catch(ge){if(ge===Ls||ge===Dc)throw ge;var Ve=cn(29,ge,null,$.mode);return Ve.lanes=Z,Ve.return=$,Ve}finally{}}}var Fr=sS(!0),aS=sS(!1),Uo=!1;function Lp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Up(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Fo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bo(o,s,u){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Ye&2)!==0){var v=f.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),f.pending=s,s=xc(o),z0(o,null,u),s}return Tc(o,f,s,u),xc(o)}function ml(o,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var f=s.lanes;f&=o.pendingLanes,u|=f,s.lanes=u,Q_(o,u)}}function Fp(o,s){var u=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=C:_=_.next=C,u=u.next}while(u!==null);_===null?v=_=s:_=_.next=s}else v=_=s;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=s:o.next=s,u.lastBaseUpdate=s}var Bp=!1;function gl(){if(Bp){var o=Ps;if(o!==null)throw o}}function vl(o,s,u,f){Bp=!1;var v=o.updateQueue;Uo=!1;var _=v.firstBaseUpdate,C=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var k=R,H=k.next;k.next=null,C===null?_=H:C.next=H,C=k;var X=o.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==C&&(R===null?X.firstBaseUpdate=H:R.next=H,X.lastBaseUpdate=k))}if(_!==null){var te=v.baseState;C=0,X=H=k=null,R=_;do{var z=R.lane&-536870913,J=z!==R.lane;if(J?(Le&z)===z:(f&z)===z){z!==0&&z===ks&&(Bp=!0),X!==null&&(X=X.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var he=o,Ee=R;z=s;var et=u;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){te=he.call(et,te,z);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,z=typeof he=="function"?he.call(et,te,z):he,z==null)break e;te=y({},te,z);break e;case 2:Uo=!0}}z=R.callback,z!==null&&(o.flags|=64,J&&(o.flags|=8192),J=v.callbacks,J===null?v.callbacks=[z]:J.push(z))}else J={lane:z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(H=X=J,k=te):X=X.next=J,C|=z;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;J=R,R=J.next,J.next=null,v.lastBaseUpdate=J,v.shared.pending=null}}while(!0);X===null&&(k=te),v.baseState=k,v.firstBaseUpdate=H,v.lastBaseUpdate=X,_===null&&(v.shared.lanes=0),zo|=C,o.lanes=C,o.memoizedState=te}}function lS(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function uS(o,s){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)lS(u[o],s)}var Fs=P(null),Lc=P(0);function cS(o,s){o=io,se(Lc,o),se(Fs,s),io=o|s.baseLanes}function $p(){se(Lc,io),se(Fs,Fs.current)}function Gp(){io=Lc.current,K(Fs),K(Lc)}var fn=P(null),On=null;function $o(o){var s=o.alternate;se(ht,ht.current&1),se(fn,o),On===null&&(s===null||Fs.current!==null||s.memoizedState!==null)&&(On=o)}function Hp(o){se(ht,ht.current),se(fn,o),On===null&&(On=o)}function fS(o){o.tag===22?(se(ht,ht.current),se(fn,o),On===null&&(On=o)):Go()}function Go(){se(ht,ht.current),se(fn,fn.current)}function dn(o){K(fn),On===o&&(On=null),K(ht)}var ht=P(0);function Uc(o){for(var s=o;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Km(u)||Ym(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Yi=0,Me=null,Qe=null,gt=null,Fc=!1,Bs=!1,Br=!1,Bc=0,yl=0,$s=null,KO=0;function ft(){throw Error(i(321))}function Vp(o,s){if(s===null)return!1;for(var u=0;u<s.length&&u<o.length;u++)if(!un(o[u],s[u]))return!1;return!0}function zp(o,s,u,f,v,_){return Yi=_,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=o===null||o.memoizedState===null?KS:rm,Br=!1,_=u(f,v),Br=!1,Bs&&(_=hS(s,u,f,v)),dS(o),_}function dS(o){B.H=bl;var s=Qe!==null&&Qe.next!==null;if(Yi=0,gt=Qe=Me=null,Fc=!1,yl=0,$s=null,s)throw Error(i(300));o===null||vt||(o=o.dependencies,o!==null&&Mc(o)&&(vt=!0))}function hS(o,s,u,f){Me=o;var v=0;do{if(Bs&&($s=null),yl=0,Bs=!1,25<=v)throw Error(i(301));if(v+=1,gt=Qe=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}B.H=YS,_=s(u,f)}while(Bs);return _}function YO(){var o=B.H,s=o.useState()[0];return s=typeof s.then=="function"?_l(s):s,o=o.useState()[0],(Qe!==null?Qe.memoizedState:null)!==o&&(Me.flags|=1024),s}function qp(){var o=Bc!==0;return Bc=0,o}function jp(o,s,u){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~u}function Jp(o){if(Fc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Fc=!1}Yi=0,gt=Qe=Me=null,Bs=!1,yl=Bc=0,$s=null}function $t(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Me.memoizedState=gt=o:gt=gt.next=o,gt}function pt(){if(Qe===null){var o=Me.alternate;o=o!==null?o.memoizedState:null}else o=Qe.next;var s=gt===null?Me.memoizedState:gt.next;if(s!==null)gt=s,Qe=o;else{if(o===null)throw Me.alternate===null?Error(i(467)):Error(i(310));Qe=o,o={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},gt===null?Me.memoizedState=gt=o:gt=gt.next=o}return gt}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(o){var s=yl;return yl+=1,$s===null&&($s=[]),o=iS($s,o,s),s=Me,(gt===null?s.memoizedState:gt.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?KS:rm),o}function Gc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return _l(o);if(o.$$typeof===N)return Nt(o)}throw Error(i(438,String(o)))}function Kp(o){var s=null,u=Me.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var f=Me.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=$c(),Me.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(o),f=0;f<o;f++)u[f]=Y;return s.index++,u}function Xi(o,s){return typeof s=="function"?s(o):s}function Hc(o){var s=pt();return Yp(s,Qe,o)}function Yp(o,s,u){var f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=o.baseQueue,_=f.pending;if(_!==null){if(v!==null){var C=v.next;v.next=_.next,_.next=C}s.baseQueue=v=_,f.pending=null}if(_=o.baseState,v===null)o.memoizedState=_;else{s=v.next;var R=C=null,k=null,H=s,X=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(Le&te)===te:(Yi&te)===te){var z=H.revertLane;if(z===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===ks&&(X=!0);else if((Yi&z)===z){H=H.next,z===ks&&(X=!0);continue}else te={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(R=k=te,C=_):k=k.next=te,Me.lanes|=z,zo|=z;te=H.action,Br&&u(_,te),_=H.hasEagerState?H.eagerState:u(_,te)}else z={lane:te,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(R=k=z,C=_):k=k.next=z,Me.lanes|=te,zo|=te;H=H.next}while(H!==null&&H!==s);if(k===null?C=_:k.next=R,!un(_,o.memoizedState)&&(vt=!0,X&&(u=Ps,u!==null)))throw u;o.memoizedState=_,o.baseState=C,o.baseQueue=k,f.lastRenderedState=_}return v===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function Xp(o){var s=pt(),u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=u.dispatch,v=u.pending,_=s.memoizedState;if(v!==null){u.pending=null;var C=v=v.next;do _=o(_,C.action),C=C.next;while(C!==v);un(_,s.memoizedState)||(vt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),u.lastRenderedState=_}return[_,f]}function pS(o,s,u){var f=Me,v=pt(),_=Fe;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=s();var C=!un((Qe||v).memoizedState,u);if(C&&(v.memoizedState=u,vt=!0),v=v.queue,Zp(vS.bind(null,f,v,o),[o]),v.getSnapshot!==s||C||gt!==null&&gt.memoizedState.tag&1){if(f.flags|=2048,Gs(9,{destroy:void 0},gS.bind(null,f,v,u,s),null),it===null)throw Error(i(349));_||(Yi&127)!==0||mS(f,s,u)}return u}function mS(o,s,u){o.flags|=16384,o={getSnapshot:s,value:u},s=Me.updateQueue,s===null?(s=$c(),Me.updateQueue=s,s.stores=[o]):(u=s.stores,u===null?s.stores=[o]:u.push(o))}function gS(o,s,u,f){s.value=u,s.getSnapshot=f,yS(s)&&_S(o)}function vS(o,s,u){return u(function(){yS(s)&&_S(o)})}function yS(o){var s=o.getSnapshot;o=o.value;try{var u=s();return!un(o,u)}catch{return!0}}function _S(o){var s=Nr(o,2);s!==null&&en(s,o,2)}function Wp(o){var s=$t();if(typeof o=="function"){var u=o;if(o=u(),Br){No(!0);try{u()}finally{No(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:o},s}function SS(o,s,u,f){return o.baseState=u,Yp(o,Qe,typeof f=="function"?f:Xi)}function XO(o,s,u,f,v){if(qc(o))throw Error(i(485));if(o=s.action,o!==null){var _={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};B.T!==null?u(!0):_.isTransition=!1,f(_),u=s.pending,u===null?(_.next=s.pending=_,bS(s,_)):(_.next=u.next,s.pending=u.next=_)}}function bS(o,s){var u=s.action,f=s.payload,v=o.state;if(s.isTransition){var _=B.T,C={};B.T=C;try{var R=u(v,f),k=B.S;k!==null&&k(C,R),wS(o,s,R)}catch(H){Qp(o,s,H)}finally{_!==null&&C.types!==null&&(_.types=C.types),B.T=_}}else try{_=u(v,f),wS(o,s,_)}catch(H){Qp(o,s,H)}}function wS(o,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){ES(o,s,f)},function(f){return Qp(o,s,f)}):ES(o,s,u)}function ES(o,s,u){s.status="fulfilled",s.value=u,CS(s),o.state=u,s=o.pending,s!==null&&(u=s.next,u===s?o.pending=null:(u=u.next,s.next=u,bS(o,u)))}function Qp(o,s,u){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=u,CS(s),s=s.next;while(s!==f)}o.action=null}function CS(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function TS(o,s){return s}function xS(o,s){if(Fe){var u=it.formState;if(u!==null){e:{var f=Me;if(Fe){if(st){t:{for(var v=st,_=Dn;v.nodeType!==8;){if(!_){v=null;break t}if(v=kn(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){st=kn(v.nextSibling),f=v.data==="F!";break e}}Po(f)}f=!1}f&&(s=u[0])}}return u=$t(),u.memoizedState=u.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:TS,lastRenderedState:s},u.queue=f,u=qS.bind(null,Me,f),f.dispatch=u,f=Wp(!1),_=om.bind(null,Me,!1,f.queue),f=$t(),v={state:s,dispatch:null,action:o,pending:null},f.queue=v,u=XO.bind(null,Me,v,_,u),v.dispatch=u,f.memoizedState=o,[s,u,!1]}function AS(o){var s=pt();return RS(s,Qe,o)}function RS(o,s,u){if(s=Yp(o,s,TS)[0],o=Hc(Xi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=_l(s)}catch(C){throw C===Ls?Dc:C}else f=s;s=pt();var v=s.queue,_=v.dispatch;return u!==s.memoizedState&&(Me.flags|=2048,Gs(9,{destroy:void 0},WO.bind(null,v,u),null)),[f,_,o]}function WO(o,s){o.action=s}function MS(o){var s=pt(),u=Qe;if(u!==null)return RS(s,u,o);pt(),s=s.memoizedState,u=pt();var f=u.queue.dispatch;return u.memoizedState=o,[s,f,!1]}function Gs(o,s,u,f){return o={tag:o,create:u,deps:f,inst:s,next:null},s=Me.updateQueue,s===null&&(s=$c(),Me.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=o.next=o:(f=u.next,u.next=o,o.next=f,s.lastEffect=o),o}function NS(){return pt().memoizedState}function Vc(o,s,u,f){var v=$t();Me.flags|=o,v.memoizedState=Gs(1|s,{destroy:void 0},u,f===void 0?null:f)}function zc(o,s,u,f){var v=pt();f=f===void 0?null:f;var _=v.memoizedState.inst;Qe!==null&&f!==null&&Vp(f,Qe.memoizedState.deps)?v.memoizedState=Gs(s,_,u,f):(Me.flags|=o,v.memoizedState=Gs(1|s,_,u,f))}function IS(o,s){Vc(8390656,8,o,s)}function Zp(o,s){zc(2048,8,o,s)}function QO(o){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=$c(),Me.updateQueue=s,s.events=[o];else{var u=s.events;u===null?s.events=[o]:u.push(o)}}function DS(o){var s=pt().memoizedState;return QO({ref:s,nextImpl:o}),function(){if((Ye&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function OS(o,s){return zc(4,2,o,s)}function kS(o,s){return zc(4,4,o,s)}function PS(o,s){if(typeof s=="function"){o=o();var u=s(o);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function LS(o,s,u){u=u!=null?u.concat([o]):null,zc(4,4,PS.bind(null,s,o),u)}function em(){}function US(o,s){var u=pt();s=s===void 0?null:s;var f=u.memoizedState;return s!==null&&Vp(s,f[1])?f[0]:(u.memoizedState=[o,s],o)}function FS(o,s){var u=pt();s=s===void 0?null:s;var f=u.memoizedState;if(s!==null&&Vp(s,f[1]))return f[0];if(f=o(),Br){No(!0);try{o()}finally{No(!1)}}return u.memoizedState=[f,s],f}function tm(o,s,u){return u===void 0||(Yi&1073741824)!==0&&(Le&261930)===0?o.memoizedState=s:(o.memoizedState=u,o=Bb(),Me.lanes|=o,zo|=o,u)}function BS(o,s,u,f){return un(u,s)?u:Fs.current!==null?(o=tm(o,u,f),un(o,s)||(vt=!0),o):(Yi&42)===0||(Yi&1073741824)!==0&&(Le&261930)===0?(vt=!0,o.memoizedState=u):(o=Bb(),Me.lanes|=o,zo|=o,s)}function $S(o,s,u,f,v){var _=Q.p;Q.p=_!==0&&8>_?_:8;var C=B.T,R={};B.T=R,om(o,!1,s,u);try{var k=v(),H=B.S;if(H!==null&&H(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=JO(k,f);Sl(o,s,X,mn(o))}else Sl(o,s,f,mn(o))}catch(te){Sl(o,s,{then:function(){},status:"rejected",reason:te},mn())}finally{Q.p=_,C!==null&&R.types!==null&&(C.types=R.types),B.T=C}}function ZO(){}function nm(o,s,u,f){if(o.tag!==5)throw Error(i(476));var v=GS(o).queue;$S(o,v,s,ee,u===null?ZO:function(){return HS(o),u(f)})}function GS(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:ee},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:u},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function HS(o){var s=GS(o);s.next===null&&(s=o.alternate.memoizedState),Sl(o,s.next.queue,{},mn())}function im(){return Nt(Ul)}function VS(){return pt().memoizedState}function zS(){return pt().memoizedState}function ek(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var u=mn();o=Fo(u);var f=Bo(s,o,u);f!==null&&(en(f,s,u),ml(f,s,u)),s={cache:Dp()},o.payload=s;return}s=s.return}}function tk(o,s,u){var f=mn();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qc(o)?jS(s,u):(u=bp(o,s,u,f),u!==null&&(en(u,o,f),JS(u,s,f)))}function qS(o,s,u){var f=mn();Sl(o,s,u,f)}function Sl(o,s,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(qc(o))jS(s,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var C=s.lastRenderedState,R=_(C,u);if(v.hasEagerState=!0,v.eagerState=R,un(R,C))return Tc(o,s,v,0),it===null&&Cc(),!1}catch{}finally{}if(u=bp(o,s,v,f),u!==null)return en(u,o,f),JS(u,s,f),!0}return!1}function om(o,s,u,f){if(f={lane:2,revertLane:Lm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},qc(o)){if(s)throw Error(i(479))}else s=bp(o,u,f,2),s!==null&&en(s,o,2)}function qc(o){var s=o.alternate;return o===Me||s!==null&&s===Me}function jS(o,s){Bs=Fc=!0;var u=o.pending;u===null?s.next=s:(s.next=u.next,u.next=s),o.pending=s}function JS(o,s,u){if((u&4194048)!==0){var f=s.lanes;f&=o.pendingLanes,u|=f,s.lanes=u,Q_(o,u)}}var bl={readContext:Nt,use:Gc,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};bl.useEffectEvent=ft;var KS={readContext:Nt,use:Gc,useCallback:function(o,s){return $t().memoizedState=[o,s===void 0?null:s],o},useContext:Nt,useEffect:IS,useImperativeHandle:function(o,s,u){u=u!=null?u.concat([o]):null,Vc(4194308,4,PS.bind(null,s,o),u)},useLayoutEffect:function(o,s){return Vc(4194308,4,o,s)},useInsertionEffect:function(o,s){Vc(4,2,o,s)},useMemo:function(o,s){var u=$t();s=s===void 0?null:s;var f=o();if(Br){No(!0);try{o()}finally{No(!1)}}return u.memoizedState=[f,s],f},useReducer:function(o,s,u){var f=$t();if(u!==void 0){var v=u(s);if(Br){No(!0);try{u(s)}finally{No(!1)}}}else v=s;return f.memoizedState=f.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},f.queue=o,o=o.dispatch=tk.bind(null,Me,o),[f.memoizedState,o]},useRef:function(o){var s=$t();return o={current:o},s.memoizedState=o},useState:function(o){o=Wp(o);var s=o.queue,u=qS.bind(null,Me,s);return s.dispatch=u,[o.memoizedState,u]},useDebugValue:em,useDeferredValue:function(o,s){var u=$t();return tm(u,o,s)},useTransition:function(){var o=Wp(!1);return o=$S.bind(null,Me,o.queue,!0,!1),$t().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,u){var f=Me,v=$t();if(Fe){if(u===void 0)throw Error(i(407));u=u()}else{if(u=s(),it===null)throw Error(i(349));(Le&127)!==0||mS(f,s,u)}v.memoizedState=u;var _={value:u,getSnapshot:s};return v.queue=_,IS(vS.bind(null,f,_,o),[o]),f.flags|=2048,Gs(9,{destroy:void 0},gS.bind(null,f,_,u,s),null),u},useId:function(){var o=$t(),s=it.identifierPrefix;if(Fe){var u=yi,f=vi;u=(f&~(1<<32-ln(f)-1)).toString(32)+u,s="_"+s+"R_"+u,u=Bc++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=KO++,s="_"+s+"r_"+u.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:im,useFormState:xS,useActionState:xS,useOptimistic:function(o){var s=$t();s.memoizedState=s.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=om.bind(null,Me,!0,u),u.dispatch=s,[o,s]},useMemoCache:Kp,useCacheRefresh:function(){return $t().memoizedState=ek.bind(null,Me)},useEffectEvent:function(o){var s=$t(),u={impl:o};return s.memoizedState=u,function(){if((Ye&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},rm={readContext:Nt,use:Gc,useCallback:US,useContext:Nt,useEffect:Zp,useImperativeHandle:LS,useInsertionEffect:OS,useLayoutEffect:kS,useMemo:FS,useReducer:Hc,useRef:NS,useState:function(){return Hc(Xi)},useDebugValue:em,useDeferredValue:function(o,s){var u=pt();return BS(u,Qe.memoizedState,o,s)},useTransition:function(){var o=Hc(Xi)[0],s=pt().memoizedState;return[typeof o=="boolean"?o:_l(o),s]},useSyncExternalStore:pS,useId:VS,useHostTransitionStatus:im,useFormState:AS,useActionState:AS,useOptimistic:function(o,s){var u=pt();return SS(u,Qe,o,s)},useMemoCache:Kp,useCacheRefresh:zS};rm.useEffectEvent=DS;var YS={readContext:Nt,use:Gc,useCallback:US,useContext:Nt,useEffect:Zp,useImperativeHandle:LS,useInsertionEffect:OS,useLayoutEffect:kS,useMemo:FS,useReducer:Xp,useRef:NS,useState:function(){return Xp(Xi)},useDebugValue:em,useDeferredValue:function(o,s){var u=pt();return Qe===null?tm(u,o,s):BS(u,Qe.memoizedState,o,s)},useTransition:function(){var o=Xp(Xi)[0],s=pt().memoizedState;return[typeof o=="boolean"?o:_l(o),s]},useSyncExternalStore:pS,useId:VS,useHostTransitionStatus:im,useFormState:MS,useActionState:MS,useOptimistic:function(o,s){var u=pt();return Qe!==null?SS(u,Qe,o,s):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:Kp,useCacheRefresh:zS};YS.useEffectEvent=DS;function sm(o,s,u,f){s=o.memoizedState,u=u(f,s),u=u==null?s:y({},s,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var am={enqueueSetState:function(o,s,u){o=o._reactInternals;var f=mn(),v=Fo(f);v.payload=s,u!=null&&(v.callback=u),s=Bo(o,v,f),s!==null&&(en(s,o,f),ml(s,o,f))},enqueueReplaceState:function(o,s,u){o=o._reactInternals;var f=mn(),v=Fo(f);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=Bo(o,v,f),s!==null&&(en(s,o,f),ml(s,o,f))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var u=mn(),f=Fo(u);f.tag=2,s!=null&&(f.callback=s),s=Bo(o,f,u),s!==null&&(en(s,o,u),ml(s,o,u))}};function XS(o,s,u,f,v,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,_,C):s.prototype&&s.prototype.isPureReactComponent?!al(u,f)||!al(v,_):!0}function WS(o,s,u,f){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==o&&am.enqueueReplaceState(s,s.state,null)}function $r(o,s){var u=s;if("ref"in s){u={};for(var f in s)f!=="ref"&&(u[f]=s[f])}if(o=o.defaultProps){u===s&&(u=y({},u));for(var v in o)u[v]===void 0&&(u[v]=o[v])}return u}function QS(o){Ec(o)}function ZS(o){console.error(o)}function eb(o){Ec(o)}function jc(o,s){try{var u=o.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function tb(o,s,u){try{var f=o.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function lm(o,s,u){return u=Fo(u),u.tag=3,u.payload={element:null},u.callback=function(){jc(o,s)},u}function nb(o){return o=Fo(o),o.tag=3,o}function ib(o,s,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;o.payload=function(){return v(_)},o.callback=function(){tb(s,u,f)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){tb(s,u,f),typeof v!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function nk(o,s,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=u.alternate,s!==null&&Os(s,u,v,!0),u=fn.current,u!==null){switch(u.tag){case 31:case 13:return On===null?rf():u.alternate===null&&dt===0&&(dt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===Oc?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([f]):s.add(f),Om(o,f,v)),!1;case 22:return u.flags|=65536,f===Oc?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([f]):u.add(f)),Om(o,f,v)),!1}throw Error(i(435,u.tag))}return Om(o,f,v),rf(),!1}if(Fe)return s=fn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,f!==Ap&&(o=Error(i(422),{cause:f}),cl(Mn(o,u)))):(f!==Ap&&(s=Error(i(423),{cause:f}),cl(Mn(s,u))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,f=Mn(f,u),v=lm(o.stateNode,f,v),Fp(o,v),dt!==4&&(dt=2)),!1;var _=Error(i(520),{cause:f});if(_=Mn(_,u),Ml===null?Ml=[_]:Ml.push(_),dt!==4&&(dt=2),s===null)return!0;f=Mn(f,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,o=v&-v,u.lanes|=o,o=lm(u.stateNode,f,o),Fp(u,o),!1;case 1:if(s=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qo===null||!qo.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=nb(v),ib(v,o,u,f),Fp(u,v),!1}u=u.return}while(u!==null);return!1}var um=Error(i(461)),vt=!1;function It(o,s,u,f){s.child=o===null?aS(s,null,u,f):Fr(s,o.child,u,f)}function ob(o,s,u,f,v){u=u.render;var _=s.ref;if("ref"in f){var C={};for(var R in f)R!=="ref"&&(C[R]=f[R])}else C=f;return kr(s),f=zp(o,s,u,C,_,v),R=qp(),o!==null&&!vt?(jp(o,s,v),Wi(o,s,v)):(Fe&&R&&Tp(s),s.flags|=1,It(o,s,f,v),s.child)}function rb(o,s,u,f,v){if(o===null){var _=u.type;return typeof _=="function"&&!wp(_)&&_.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=_,sb(o,s,_,f,v)):(o=Ac(u.type,null,f,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!vm(o,v)){var C=_.memoizedProps;if(u=u.compare,u=u!==null?u:al,u(C,f)&&o.ref===s.ref)return Wi(o,s,v)}return s.flags|=1,o=qi(_,f),o.ref=s.ref,o.return=s,s.child=o}function sb(o,s,u,f,v){if(o!==null){var _=o.memoizedProps;if(al(_,f)&&o.ref===s.ref)if(vt=!1,s.pendingProps=f=_,vm(o,v))(o.flags&131072)!==0&&(vt=!0);else return s.lanes=o.lanes,Wi(o,s,v)}return cm(o,s,u,f,v)}function ab(o,s,u,f){var v=f.children,_=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,o!==null){for(f=s.child=o.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,s.child=null;return lb(o,s,_,u,f)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ic(s,_!==null?_.cachePool:null),_!==null?cS(s,_):$p(),fS(s);else return f=s.lanes=536870912,lb(o,s,_!==null?_.baseLanes|u:u,u,f)}else _!==null?(Ic(s,_.cachePool),cS(s,_),Go(),s.memoizedState=null):(o!==null&&Ic(s,null),$p(),Go());return It(o,s,v,u),s.child}function wl(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function lb(o,s,u,f,v){var _=kp();return _=_===null?null:{parent:mt._currentValue,pool:_},s.memoizedState={baseLanes:u,cachePool:_},o!==null&&Ic(s,null),$p(),fS(s),o!==null&&Os(o,s,f,!0),s.childLanes=v,null}function Jc(o,s){return s=Yc({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function ub(o,s,u){return Fr(s,o.child,null,u),o=Jc(s,s.pendingProps),o.flags|=2,dn(s),s.memoizedState=null,o}function ik(o,s,u){var f=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(Fe){if(f.mode==="hidden")return o=Jc(s,f),s.lanes=536870912,wl(null,o);if(Hp(s),(o=st)?(o=bw(o,Dn),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Oo!==null?{id:vi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},u=j0(o),u.return=s,s.child=u,Mt=s,st=null)):o=null,o===null)throw Po(s);return s.lanes=536870912,null}return Jc(s,f)}var _=o.memoizedState;if(_!==null){var C=_.dehydrated;if(Hp(s),v)if(s.flags&256)s.flags&=-257,s=ub(o,s,u);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(vt||Os(o,s,u,!1),v=(u&o.childLanes)!==0,vt||v){if(f=it,f!==null&&(C=Z_(f,u),C!==0&&C!==_.retryLane))throw _.retryLane=C,Nr(o,C),en(f,o,C),um;rf(),s=ub(o,s,u)}else o=_.treeContext,st=kn(C.nextSibling),Mt=s,Fe=!0,ko=null,Dn=!1,o!==null&&Y0(s,o),s=Jc(s,f),s.flags|=4096;return s}return o=qi(o.child,{mode:f.mode,children:f.children}),o.ref=s.ref,s.child=o,o.return=s,o}function Kc(o,s){var u=s.ref;if(u===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(o===null||o.ref!==u)&&(s.flags|=4194816)}}function cm(o,s,u,f,v){return kr(s),u=zp(o,s,u,f,void 0,v),f=qp(),o!==null&&!vt?(jp(o,s,v),Wi(o,s,v)):(Fe&&f&&Tp(s),s.flags|=1,It(o,s,u,v),s.child)}function cb(o,s,u,f,v,_){return kr(s),s.updateQueue=null,u=hS(s,f,u,v),dS(o),f=qp(),o!==null&&!vt?(jp(o,s,_),Wi(o,s,_)):(Fe&&f&&Tp(s),s.flags|=1,It(o,s,u,_),s.child)}function fb(o,s,u,f,v){if(kr(s),s.stateNode===null){var _=Ms,C=u.contextType;typeof C=="object"&&C!==null&&(_=Nt(C)),_=new u(f,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=am,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=f,_.state=s.memoizedState,_.refs={},Lp(s),C=u.contextType,_.context=typeof C=="object"&&C!==null?Nt(C):Ms,_.state=s.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(sm(s,u,C,f),_.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&am.enqueueReplaceState(_,_.state,null),vl(s,f,_,v),gl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(o===null){_=s.stateNode;var R=s.memoizedProps,k=$r(u,R);_.props=k;var H=_.context,X=u.contextType;C=Ms,typeof X=="object"&&X!==null&&(C=Nt(X));var te=u.getDerivedStateFromProps;X=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||H!==C)&&WS(s,_,f,C),Uo=!1;var z=s.memoizedState;_.state=z,vl(s,f,_,v),gl(),H=s.memoizedState,R||z!==H||Uo?(typeof te=="function"&&(sm(s,u,te,f),H=s.memoizedState),(k=Uo||XS(s,u,k,f,z,H,C))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=H),_.props=f,_.state=H,_.context=C,f=k):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,Up(o,s),C=s.memoizedProps,X=$r(u,C),_.props=X,te=s.pendingProps,z=_.context,H=u.contextType,k=Ms,typeof H=="object"&&H!==null&&(k=Nt(H)),R=u.getDerivedStateFromProps,(H=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==te||z!==k)&&WS(s,_,f,k),Uo=!1,z=s.memoizedState,_.state=z,vl(s,f,_,v),gl();var J=s.memoizedState;C!==te||z!==J||Uo||o!==null&&o.dependencies!==null&&Mc(o.dependencies)?(typeof R=="function"&&(sm(s,u,R,f),J=s.memoizedState),(X=Uo||XS(s,u,X,f,z,J,k)||o!==null&&o.dependencies!==null&&Mc(o.dependencies))?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,J,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,J,k)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&z===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&z===o.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=J),_.props=f,_.state=J,_.context=k,f=X):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&z===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&z===o.memoizedState||(s.flags|=1024),f=!1)}return _=f,Kc(o,s),f=(s.flags&128)!==0,_||f?(_=s.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&f?(s.child=Fr(s,o.child,null,v),s.child=Fr(s,null,u,v)):It(o,s,u,v),s.memoizedState=_.state,o=s.child):o=Wi(o,s,v),o}function db(o,s,u,f){return Dr(),s.flags|=256,It(o,s,u,f),s.child}var fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(o){return{baseLanes:o,cachePool:tS()}}function hm(o,s,u){return o=o!==null?o.childLanes&~u:0,s&&(o|=pn),o}function hb(o,s,u){var f=s.pendingProps,v=!1,_=(s.flags&128)!==0,C;if((C=_)||(C=o!==null&&o.memoizedState===null?!1:(ht.current&2)!==0),C&&(v=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(Fe){if(v?$o(s):Go(),(o=st)?(o=bw(o,Dn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Oo!==null?{id:vi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},u=j0(o),u.return=s,s.child=u,Mt=s,st=null)):o=null,o===null)throw Po(s);return Ym(o)?s.lanes=32:s.lanes=536870912,null}var R=f.children;return f=f.fallback,v?(Go(),v=s.mode,R=Yc({mode:"hidden",children:R},v),f=Ir(f,v,u,null),R.return=s,f.return=s,R.sibling=f,s.child=R,f=s.child,f.memoizedState=dm(u),f.childLanes=hm(o,C,u),s.memoizedState=fm,wl(null,f)):($o(s),pm(s,R))}var k=o.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)s.flags&256?($o(s),s.flags&=-257,s=mm(o,s,u)):s.memoizedState!==null?(Go(),s.child=o.child,s.flags|=128,s=null):(Go(),R=f.fallback,v=s.mode,f=Yc({mode:"visible",children:f.children},v),R=Ir(R,v,u,null),R.flags|=2,f.return=s,R.return=s,f.sibling=R,s.child=f,Fr(s,o.child,null,u),f=s.child,f.memoizedState=dm(u),f.childLanes=hm(o,C,u),s.memoizedState=fm,s=wl(null,f));else if($o(s),Ym(R)){if(C=R.nextSibling&&R.nextSibling.dataset,C)var H=C.dgst;C=H,f=Error(i(419)),f.stack="",f.digest=C,cl({value:f,source:null,stack:null}),s=mm(o,s,u)}else if(vt||Os(o,s,u,!1),C=(u&o.childLanes)!==0,vt||C){if(C=it,C!==null&&(f=Z_(C,u),f!==0&&f!==k.retryLane))throw k.retryLane=f,Nr(o,f),en(C,o,f),um;Km(R)||rf(),s=mm(o,s,u)}else Km(R)?(s.flags|=192,s.child=o.child,s=null):(o=k.treeContext,st=kn(R.nextSibling),Mt=s,Fe=!0,ko=null,Dn=!1,o!==null&&Y0(s,o),s=pm(s,f.children),s.flags|=4096);return s}return v?(Go(),R=f.fallback,v=s.mode,k=o.child,H=k.sibling,f=qi(k,{mode:"hidden",children:f.children}),f.subtreeFlags=k.subtreeFlags&65011712,H!==null?R=qi(H,R):(R=Ir(R,v,u,null),R.flags|=2),R.return=s,f.return=s,f.sibling=R,s.child=f,wl(null,f),f=s.child,R=o.child.memoizedState,R===null?R=dm(u):(v=R.cachePool,v!==null?(k=mt._currentValue,v=v.parent!==k?{parent:k,pool:k}:v):v=tS(),R={baseLanes:R.baseLanes|u,cachePool:v}),f.memoizedState=R,f.childLanes=hm(o,C,u),s.memoizedState=fm,wl(o.child,f)):($o(s),u=o.child,o=u.sibling,u=qi(u,{mode:"visible",children:f.children}),u.return=s,u.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=u,s.memoizedState=null,u)}function pm(o,s){return s=Yc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Yc(o,s){return o=cn(22,o,null,s),o.lanes=0,o}function mm(o,s,u){return Fr(s,o.child,null,u),o=pm(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function pb(o,s,u){o.lanes|=s;var f=o.alternate;f!==null&&(f.lanes|=s),Np(o.return,s,u)}function gm(o,s,u,f,v,_){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:_}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=f,C.tail=u,C.tailMode=v,C.treeForkCount=_)}function mb(o,s,u){var f=s.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var C=ht.current,R=(C&2)!==0;if(R?(C=C&1|2,s.flags|=128):C&=1,se(ht,C),It(o,s,f,u),f=Fe?ul:0,!R&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&pb(o,u,s);else if(o.tag===19)pb(o,u,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(u=s.child,v=null;u!==null;)o=u.alternate,o!==null&&Uc(o)===null&&(v=u),u=u.sibling;u=v,u===null?(v=s.child,s.child=null):(v=u.sibling,u.sibling=null),gm(s,!1,v,u,_,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&Uc(o)===null){s.child=v;break}o=v.sibling,v.sibling=u,u=v,v=o}gm(s,!0,u,null,_,f);break;case"together":gm(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Wi(o,s,u){if(o!==null&&(s.dependencies=o.dependencies),zo|=s.lanes,(u&s.childLanes)===0)if(o!==null){if(Os(o,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,u=qi(o,o.pendingProps),s.child=u,u.return=s;o.sibling!==null;)o=o.sibling,u=u.sibling=qi(o,o.pendingProps),u.return=s;u.sibling=null}return s.child}function vm(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Mc(o)))}function ok(o,s,u){switch(s.tag){case 3:Je(s,s.stateNode.containerInfo),Lo(s,mt,o.memoizedState.cache),Dr();break;case 27:case 5:sn(s);break;case 4:Je(s,s.stateNode.containerInfo);break;case 10:Lo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Hp(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?($o(s),s.flags|=128,null):(u&s.child.childLanes)!==0?hb(o,s,u):($o(s),o=Wi(o,s,u),o!==null?o.sibling:null);$o(s);break;case 19:var v=(o.flags&128)!==0;if(f=(u&s.childLanes)!==0,f||(Os(o,s,u,!1),f=(u&s.childLanes)!==0),v){if(f)return mb(o,s,u);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(ht,ht.current),f)break;return null;case 22:return s.lanes=0,ab(o,s,u,s.pendingProps);case 24:Lo(s,mt,o.memoizedState.cache)}return Wi(o,s,u)}function gb(o,s,u){if(o!==null)if(o.memoizedProps!==s.pendingProps)vt=!0;else{if(!vm(o,u)&&(s.flags&128)===0)return vt=!1,ok(o,s,u);vt=(o.flags&131072)!==0}else vt=!1,Fe&&(s.flags&1048576)!==0&&K0(s,ul,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(o=Lr(s.elementType),s.type=o,typeof o=="function")wp(o)?(f=$r(o,f),s.tag=1,s=fb(null,s,o,f,u)):(s.tag=0,s=cm(null,s,o,f,u));else{if(o!=null){var v=o.$$typeof;if(v===D){s.tag=11,s=ob(null,s,o,f,u);break e}else if(v===O){s.tag=14,s=rb(null,s,o,f,u);break e}}throw s=ae(o)||o,Error(i(306,s,""))}}return s;case 0:return cm(o,s,s.type,s.pendingProps,u);case 1:return f=s.type,v=$r(f,s.pendingProps),fb(o,s,f,v,u);case 3:e:{if(Je(s,s.stateNode.containerInfo),o===null)throw Error(i(387));f=s.pendingProps;var _=s.memoizedState;v=_.element,Up(o,s),vl(s,f,null,u);var C=s.memoizedState;if(f=C.cache,Lo(s,mt,f),f!==_.cache&&Ip(s,[mt],u,!0),gl(),f=C.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=db(o,s,f,u);break e}else if(f!==v){v=Mn(Error(i(424)),s),cl(v),s=db(o,s,f,u);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(st=kn(o.firstChild),Mt=s,Fe=!0,ko=null,Dn=!0,u=aS(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Dr(),f===v){s=Wi(o,s,u);break e}It(o,s,f,u)}s=s.child}return s;case 26:return Kc(o,s),o===null?(u=Aw(s.type,null,s.pendingProps,null))?s.memoizedState=u:Fe||(u=s.type,o=s.pendingProps,f=df(be.current).createElement(u),f[Rt]=s,f[Kt]=o,Dt(f,u,o),Et(f),s.stateNode=f):s.memoizedState=Aw(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return sn(s),o===null&&Fe&&(f=s.stateNode=Cw(s.type,s.pendingProps,be.current),Mt=s,Dn=!0,v=st,Yo(s.type)?(Xm=v,st=kn(f.firstChild)):st=v),It(o,s,s.pendingProps.children,u),Kc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Fe&&((v=f=st)&&(f=kk(f,s.type,s.pendingProps,Dn),f!==null?(s.stateNode=f,Mt=s,st=kn(f.firstChild),Dn=!1,v=!0):v=!1),v||Po(s)),sn(s),v=s.type,_=s.pendingProps,C=o!==null?o.memoizedProps:null,f=_.children,qm(v,_)?f=null:C!==null&&qm(v,C)&&(s.flags|=32),s.memoizedState!==null&&(v=zp(o,s,YO,null,null,u),Ul._currentValue=v),Kc(o,s),It(o,s,f,u),s.child;case 6:return o===null&&Fe&&((o=u=st)&&(u=Pk(u,s.pendingProps,Dn),u!==null?(s.stateNode=u,Mt=s,st=null,o=!0):o=!1),o||Po(s)),null;case 13:return hb(o,s,u);case 4:return Je(s,s.stateNode.containerInfo),f=s.pendingProps,o===null?s.child=Fr(s,null,f,u):It(o,s,f,u),s.child;case 11:return ob(o,s,s.type,s.pendingProps,u);case 7:return It(o,s,s.pendingProps,u),s.child;case 8:return It(o,s,s.pendingProps.children,u),s.child;case 12:return It(o,s,s.pendingProps.children,u),s.child;case 10:return f=s.pendingProps,Lo(s,s.type,f.value),It(o,s,f.children,u),s.child;case 9:return v=s.type._context,f=s.pendingProps.children,kr(s),v=Nt(v),f=f(v),s.flags|=1,It(o,s,f,u),s.child;case 14:return rb(o,s,s.type,s.pendingProps,u);case 15:return sb(o,s,s.type,s.pendingProps,u);case 19:return mb(o,s,u);case 31:return ik(o,s,u);case 22:return ab(o,s,u,s.pendingProps);case 24:return kr(s),f=Nt(mt),o===null?(v=kp(),v===null&&(v=it,_=Dp(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),s.memoizedState={parent:f,cache:v},Lp(s),Lo(s,mt,v)):((o.lanes&u)!==0&&(Up(o,s),vl(s,null,null,u),gl()),v=o.memoizedState,_=s.memoizedState,v.parent!==f?(v={parent:f,cache:f},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Lo(s,mt,f)):(f=_.cache,Lo(s,mt,f),f!==v.cache&&Ip(s,[mt],u,!0))),It(o,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Qi(o){o.flags|=4}function ym(o,s,u,f,v){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(Vb())o.flags|=8192;else throw Ur=Oc,Pp}else o.flags&=-16777217}function vb(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Dw(s))if(Vb())o.flags|=8192;else throw Ur=Oc,Pp}function Xc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?X_():536870912,o.lanes|=s,qs|=s)}function El(o,s){if(!Fe)switch(o.tailMode){case"hidden":s=o.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function at(o){var s=o.alternate!==null&&o.alternate.child===o.child,u=0,f=0;if(s)for(var v=o.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=f,o.childLanes=u,s}function rk(o,s,u){var f=s.pendingProps;switch(xp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(s),null;case 1:return at(s),null;case 3:return u=s.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Ki(mt),Ke(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(Ds(s)?Qi(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rp())),at(s),null;case 26:var v=s.type,_=s.memoizedState;return o===null?(Qi(s),_!==null?(at(s),vb(s,_)):(at(s),ym(s,v,null,f,u))):_?_!==o.memoizedState?(Qi(s),at(s),vb(s,_)):(at(s),s.flags&=-16777217):(o=o.memoizedProps,o!==f&&Qi(s),at(s),ym(s,v,o,f,u)),null;case 27:if(Tn(s),u=be.current,v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&Qi(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return at(s),null}o=le.current,Ds(s)?X0(s):(o=Cw(v,f,u),s.stateNode=o,Qi(s))}return at(s),null;case 5:if(Tn(s),v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&Qi(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return at(s),null}if(_=le.current,Ds(s))X0(s);else{var C=df(be.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?C.createElement(v,{is:f.is}):C.createElement(v)}}_[Rt]=s,_[Kt]=f;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=_;e:switch(Dt(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Qi(s)}}return at(s),ym(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,u),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==f&&Qi(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(o=be.current,Ds(s)){if(o=s.stateNode,u=s.memoizedProps,f=null,v=Mt,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}o[Rt]=s,o=!!(o.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||hw(o.nodeValue,u)),o||Po(s,!0)}else o=df(o).createTextNode(f),o[Rt]=s,s.stateNode=o}return at(s),null;case 31:if(u=s.memoizedState,o===null||o.memoizedState!==null){if(f=Ds(s),u!==null){if(o===null){if(!f)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Rt]=s}else Dr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),o=!1}else u=Rp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=u),o=!0;if(!o)return s.flags&256?(dn(s),s):(dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return at(s),null;case 13:if(f=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Ds(s),f!==null&&f.dehydrated!==null){if(o===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Rt]=s}else Dr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),v=!1}else v=Rp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(dn(s),s):(dn(s),null)}return dn(s),(s.flags&128)!==0?(s.lanes=u,s):(u=f!==null,o=o!==null&&o.memoizedState!==null,u&&(f=s.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),u!==o&&u&&(s.child.flags|=8192),Xc(s,s.updateQueue),at(s),null);case 4:return Ke(),o===null&&$m(s.stateNode.containerInfo),at(s),null;case 10:return Ki(s.type),at(s),null;case 19:if(K(ht),f=s.memoizedState,f===null)return at(s),null;if(v=(s.flags&128)!==0,_=f.rendering,_===null)if(v)El(f,!1);else{if(dt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Uc(o),_!==null){for(s.flags|=128,El(f,!1),o=_.updateQueue,s.updateQueue=o,Xc(s,o),s.subtreeFlags=0,o=u,u=s.child;u!==null;)q0(u,o),u=u.sibling;return se(ht,ht.current&1|2),Fe&&ji(s,f.treeForkCount),s.child}o=o.sibling}f.tail!==null&&At()>tf&&(s.flags|=128,v=!0,El(f,!1),s.lanes=4194304)}else{if(!v)if(o=Uc(_),o!==null){if(s.flags|=128,v=!0,o=o.updateQueue,s.updateQueue=o,Xc(s,o),El(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Fe)return at(s),null}else 2*At()-f.renderingStartTime>tf&&u!==536870912&&(s.flags|=128,v=!0,El(f,!1),s.lanes=4194304);f.isBackwards?(_.sibling=s.child,s.child=_):(o=f.last,o!==null?o.sibling=_:s.child=_,f.last=_)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=At(),o.sibling=null,u=ht.current,se(ht,v?u&1|2:u&1),Fe&&ji(s,f.treeForkCount),o):(at(s),null);case 22:case 23:return dn(s),Gp(),f=s.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(u&536870912)!==0&&(s.flags&128)===0&&(at(s),s.subtreeFlags&6&&(s.flags|=8192)):at(s),u=s.updateQueue,u!==null&&Xc(s,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==u&&(s.flags|=2048),o!==null&&K(Pr),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ki(mt),at(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function sk(o,s){switch(xp(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Ki(mt),Ke(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Tn(s),null;case 31:if(s.memoizedState!==null){if(dn(s),s.alternate===null)throw Error(i(340));Dr()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(dn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Dr()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return K(ht),null;case 4:return Ke(),null;case 10:return Ki(s.type),null;case 22:case 23:return dn(s),Gp(),o!==null&&K(Pr),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Ki(mt),null;case 25:return null;default:return null}}function yb(o,s){switch(xp(s),s.tag){case 3:Ki(mt),Ke();break;case 26:case 27:case 5:Tn(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&dn(s);break;case 13:dn(s);break;case 19:K(ht);break;case 10:Ki(s.type);break;case 22:case 23:dn(s),Gp(),o!==null&&K(Pr);break;case 24:Ki(mt)}}function Cl(o,s){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&o)===o){f=void 0;var _=u.create,C=u.inst;f=_(),C.destroy=f}u=u.next}while(u!==v)}}catch(R){We(s,s.return,R)}}function Ho(o,s,u){try{var f=s.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&o)===o){var C=f.inst,R=C.destroy;if(R!==void 0){C.destroy=void 0,v=s;var k=u,H=R;try{H()}catch(X){We(v,k,X)}}}f=f.next}while(f!==_)}}catch(X){We(s,s.return,X)}}function _b(o){var s=o.updateQueue;if(s!==null){var u=o.stateNode;try{uS(s,u)}catch(f){We(o,o.return,f)}}}function Sb(o,s,u){u.props=$r(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(f){We(o,s,f)}}function Tl(o,s){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof u=="function"?o.refCleanup=u(f):u.current=f}}catch(v){We(o,s,v)}}function _i(o,s){var u=o.ref,f=o.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){We(o,s,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){We(o,s,v)}else u.current=null}function bb(o){var s=o.type,u=o.memoizedProps,f=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){We(o,o.return,v)}}function _m(o,s,u){try{var f=o.stateNode;Rk(f,o.type,u,s),f[Kt]=s}catch(v){We(o,o.return,v)}}function wb(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Yo(o.type)||o.tag===4}function Sm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||wb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Yo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function bm(o,s,u){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(o),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Vi));else if(f!==4&&(f===27&&Yo(o.type)&&(u=o.stateNode,s=null),o=o.child,o!==null))for(bm(o,s,u),o=o.sibling;o!==null;)bm(o,s,u),o=o.sibling}function Wc(o,s,u){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?u.insertBefore(o,s):u.appendChild(o);else if(f!==4&&(f===27&&Yo(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(Wc(o,s,u),o=o.sibling;o!==null;)Wc(o,s,u),o=o.sibling}function Eb(o){var s=o.stateNode,u=o.memoizedProps;try{for(var f=o.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);Dt(s,f,u),s[Rt]=o,s[Kt]=u}catch(_){We(o,o.return,_)}}var Zi=!1,yt=!1,wm=!1,Cb=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function ak(o,s){if(o=o.containerInfo,Vm=_f,o=L0(o),mp(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var C=0,R=-1,k=-1,H=0,X=0,te=o,z=null;t:for(;;){for(var J;te!==u||v!==0&&te.nodeType!==3||(R=C+v),te!==_||f!==0&&te.nodeType!==3||(k=C+f),te.nodeType===3&&(C+=te.nodeValue.length),(J=te.firstChild)!==null;)z=te,te=J;for(;;){if(te===o)break t;if(z===u&&++H===v&&(R=C),z===_&&++X===f&&(k=C),(J=te.nextSibling)!==null)break;te=z,z=te.parentNode}te=J}u=R===-1||k===-1?null:{start:R,end:k}}else u=null}u=u||{start:0,end:0}}else u=null;for(zm={focusedElem:o,selectionRange:u},_f=!1,Ct=s;Ct!==null;)if(s=Ct,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Ct=o;else for(;Ct!==null;){switch(s=Ct,_=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(u=0;u<o.length;u++)v=o[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,u=s,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var he=$r(u.type,v);o=f.getSnapshotBeforeUpdate(he,_),f.__reactInternalSnapshotBeforeUpdate=o}catch(Ee){We(u,u.return,Ee)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,u=o.nodeType,u===9)Jm(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Jm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,Ct=o;break}Ct=s.return}}function Tb(o,s,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:to(o,u),f&4&&Cl(5,u);break;case 1:if(to(o,u),f&4)if(o=u.stateNode,s===null)try{o.componentDidMount()}catch(C){We(u,u.return,C)}else{var v=$r(u.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(v,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){We(u,u.return,C)}}f&64&&_b(u),f&512&&Tl(u,u.return);break;case 3:if(to(o,u),f&64&&(o=u.updateQueue,o!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{uS(o,s)}catch(C){We(u,u.return,C)}}break;case 27:s===null&&f&4&&Eb(u);case 26:case 5:to(o,u),s===null&&f&4&&bb(u),f&512&&Tl(u,u.return);break;case 12:to(o,u);break;case 31:to(o,u),f&4&&Rb(o,u);break;case 13:to(o,u),f&4&&Mb(o,u),f&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=gk.bind(null,u),Lk(o,u))));break;case 22:if(f=u.memoizedState!==null||Zi,!f){s=s!==null&&s.memoizedState!==null||yt,v=Zi;var _=yt;Zi=f,(yt=s)&&!_?no(o,u,(u.subtreeFlags&8772)!==0):to(o,u),Zi=v,yt=_}break;case 30:break;default:to(o,u)}}function xb(o){var s=o.alternate;s!==null&&(o.alternate=null,xb(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Qh(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ct=null,Xt=!1;function eo(o,s,u){for(u=u.child;u!==null;)Ab(o,s,u),u=u.sibling}function Ab(o,s,u){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ya,u)}catch{}switch(u.tag){case 26:yt||_i(u,s),eo(o,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:yt||_i(u,s);var f=ct,v=Xt;Yo(u.type)&&(ct=u.stateNode,Xt=!1),eo(o,s,u),kl(u.stateNode),ct=f,Xt=v;break;case 5:yt||_i(u,s);case 6:if(f=ct,v=Xt,ct=null,eo(o,s,u),ct=f,Xt=v,ct!==null)if(Xt)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(u.stateNode)}catch(_){We(u,s,_)}else try{ct.removeChild(u.stateNode)}catch(_){We(u,s,_)}break;case 18:ct!==null&&(Xt?(o=ct,_w(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),Zs(o)):_w(ct,u.stateNode));break;case 4:f=ct,v=Xt,ct=u.stateNode.containerInfo,Xt=!0,eo(o,s,u),ct=f,Xt=v;break;case 0:case 11:case 14:case 15:Ho(2,u,s),yt||Ho(4,u,s),eo(o,s,u);break;case 1:yt||(_i(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"&&Sb(u,s,f)),eo(o,s,u);break;case 21:eo(o,s,u);break;case 22:yt=(f=yt)||u.memoizedState!==null,eo(o,s,u),yt=f;break;default:eo(o,s,u)}}function Rb(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Zs(o)}catch(u){We(s,s.return,u)}}}function Mb(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Zs(o)}catch(u){We(s,s.return,u)}}function lk(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Cb),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Cb),s;default:throw Error(i(435,o.tag))}}function Qc(o,s){var u=lk(o);s.forEach(function(f){if(!u.has(f)){u.add(f);var v=vk.bind(null,o,f);f.then(v,v)}})}function Wt(o,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=o,C=s,R=C;e:for(;R!==null;){switch(R.tag){case 27:if(Yo(R.type)){ct=R.stateNode,Xt=!1;break e}break;case 5:ct=R.stateNode,Xt=!1;break e;case 3:case 4:ct=R.stateNode.containerInfo,Xt=!0;break e}R=R.return}if(ct===null)throw Error(i(160));Ab(_,C,v),ct=null,Xt=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Nb(s,o),s=s.sibling}var Zn=null;function Nb(o,s){var u=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Wt(s,o),Qt(o),f&4&&(Ho(3,o,o.return),Cl(3,o),Ho(5,o,o.return));break;case 1:Wt(s,o),Qt(o),f&512&&(yt||u===null||_i(u,u.return)),f&64&&Zi&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=Zn;if(Wt(s,o),Qt(o),f&512&&(yt||u===null||_i(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=o.memoizedState,u===null)if(f===null)if(o.stateNode===null){e:{f=o.type,u=o.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Qa]||_[Rt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Dt(_,f,u),_[Rt]=o,Et(_),f=_;break e;case"link":var C=Nw("link","href",v).get(f+(u.href||""));if(C){for(var R=0;R<C.length;R++)if(_=C[R],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(R,1);break t}}_=v.createElement(f),Dt(_,f,u),v.head.appendChild(_);break;case"meta":if(C=Nw("meta","content",v).get(f+(u.content||""))){for(R=0;R<C.length;R++)if(_=C[R],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(R,1);break t}}_=v.createElement(f),Dt(_,f,u),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Rt]=o,Et(_),f=_}o.stateNode=f}else Iw(v,o.type,o.stateNode);else o.stateNode=Mw(v,f,o.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?Iw(v,o.type,o.stateNode):Mw(v,f,o.memoizedProps)):f===null&&o.stateNode!==null&&_m(o,o.memoizedProps,u.memoizedProps)}break;case 27:Wt(s,o),Qt(o),f&512&&(yt||u===null||_i(u,u.return)),u!==null&&f&4&&_m(o,o.memoizedProps,u.memoizedProps);break;case 5:if(Wt(s,o),Qt(o),f&512&&(yt||u===null||_i(u,u.return)),o.flags&32){v=o.stateNode;try{ws(v,"")}catch(he){We(o,o.return,he)}}f&4&&o.stateNode!=null&&(v=o.memoizedProps,_m(o,v,u!==null?u.memoizedProps:v)),f&1024&&(wm=!0);break;case 6:if(Wt(s,o),Qt(o),f&4){if(o.stateNode===null)throw Error(i(162));f=o.memoizedProps,u=o.stateNode;try{u.nodeValue=f}catch(he){We(o,o.return,he)}}break;case 3:if(mf=null,v=Zn,Zn=hf(s.containerInfo),Wt(s,o),Zn=v,Qt(o),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Zs(s.containerInfo)}catch(he){We(o,o.return,he)}wm&&(wm=!1,Ib(o));break;case 4:f=Zn,Zn=hf(o.stateNode.containerInfo),Wt(s,o),Qt(o),Zn=f;break;case 12:Wt(s,o),Qt(o);break;case 31:Wt(s,o),Qt(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Qc(o,f)));break;case 13:Wt(s,o),Qt(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ef=At()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Qc(o,f)));break;case 22:v=o.memoizedState!==null;var k=u!==null&&u.memoizedState!==null,H=Zi,X=yt;if(Zi=H||v,yt=X||k,Wt(s,o),yt=X,Zi=H,Qt(o),f&8192)e:for(s=o.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(u===null||k||Zi||yt||Gr(o)),u=null,s=o;;){if(s.tag===5||s.tag===26){if(u===null){k=u=s;try{if(_=k.stateNode,v)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{R=k.stateNode;var te=k.memoizedProps.style,z=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(he){We(k,k.return,he)}}}else if(s.tag===6){if(u===null){k=s;try{k.stateNode.nodeValue=v?"":k.memoizedProps}catch(he){We(k,k.return,he)}}}else if(s.tag===18){if(u===null){k=s;try{var J=k.stateNode;v?Sw(J,!0):Sw(k.stateNode,!1)}catch(he){We(k,k.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=o.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Qc(o,u))));break;case 19:Wt(s,o),Qt(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Qc(o,f)));break;case 30:break;case 21:break;default:Wt(s,o),Qt(o)}}function Qt(o){var s=o.flags;if(s&2){try{for(var u,f=o.return;f!==null;){if(wb(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=Sm(o);Wc(o,_,v);break;case 5:var C=u.stateNode;u.flags&32&&(ws(C,""),u.flags&=-33);var R=Sm(o);Wc(o,R,C);break;case 3:case 4:var k=u.stateNode.containerInfo,H=Sm(o);bm(o,H,k);break;default:throw Error(i(161))}}catch(X){We(o,o.return,X)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Ib(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Ib(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function to(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Tb(o,s.alternate,s),s=s.sibling}function Gr(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Ho(4,s,s.return),Gr(s);break;case 1:_i(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&Sb(s,s.return,u),Gr(s);break;case 27:kl(s.stateNode);case 26:case 5:_i(s,s.return),Gr(s);break;case 22:s.memoizedState===null&&Gr(s);break;case 30:Gr(s);break;default:Gr(s)}o=o.sibling}}function no(o,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,v=o,_=s,C=_.flags;switch(_.tag){case 0:case 11:case 15:no(v,_,u),Cl(4,_);break;case 1:if(no(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(H){We(f,f.return,H)}if(f=_,v=f.updateQueue,v!==null){var R=f.stateNode;try{var k=v.shared.hiddenCallbacks;if(k!==null)for(v.shared.hiddenCallbacks=null,v=0;v<k.length;v++)lS(k[v],R)}catch(H){We(f,f.return,H)}}u&&C&64&&_b(_),Tl(_,_.return);break;case 27:Eb(_);case 26:case 5:no(v,_,u),u&&f===null&&C&4&&bb(_),Tl(_,_.return);break;case 12:no(v,_,u);break;case 31:no(v,_,u),u&&C&4&&Rb(v,_);break;case 13:no(v,_,u),u&&C&4&&Mb(v,_);break;case 22:_.memoizedState===null&&no(v,_,u),Tl(_,_.return);break;case 30:break;default:no(v,_,u)}s=s.sibling}}function Em(o,s){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&fl(u))}function Cm(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&fl(o))}function ei(o,s,u,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Db(o,s,u,f),s=s.sibling}function Db(o,s,u,f){var v=s.flags;switch(s.tag){case 0:case 11:case 15:ei(o,s,u,f),v&2048&&Cl(9,s);break;case 1:ei(o,s,u,f);break;case 3:ei(o,s,u,f),v&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&fl(o)));break;case 12:if(v&2048){ei(o,s,u,f),o=s.stateNode;try{var _=s.memoizedProps,C=_.id,R=_.onPostCommit;typeof R=="function"&&R(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(k){We(s,s.return,k)}}else ei(o,s,u,f);break;case 31:ei(o,s,u,f);break;case 13:ei(o,s,u,f);break;case 23:break;case 22:_=s.stateNode,C=s.alternate,s.memoizedState!==null?_._visibility&2?ei(o,s,u,f):xl(o,s):_._visibility&2?ei(o,s,u,f):(_._visibility|=2,Hs(o,s,u,f,(s.subtreeFlags&10256)!==0||!1)),v&2048&&Em(C,s);break;case 24:ei(o,s,u,f),v&2048&&Cm(s.alternate,s);break;default:ei(o,s,u,f)}}function Hs(o,s,u,f,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=o,C=s,R=u,k=f,H=C.flags;switch(C.tag){case 0:case 11:case 15:Hs(_,C,R,k,v),Cl(8,C);break;case 23:break;case 22:var X=C.stateNode;C.memoizedState!==null?X._visibility&2?Hs(_,C,R,k,v):xl(_,C):(X._visibility|=2,Hs(_,C,R,k,v)),v&&H&2048&&Em(C.alternate,C);break;case 24:Hs(_,C,R,k,v),v&&H&2048&&Cm(C.alternate,C);break;default:Hs(_,C,R,k,v)}s=s.sibling}}function xl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=o,f=s,v=f.flags;switch(f.tag){case 22:xl(u,f),v&2048&&Em(f.alternate,f);break;case 24:xl(u,f),v&2048&&Cm(f.alternate,f);break;default:xl(u,f)}s=s.sibling}}var Al=8192;function Vs(o,s,u){if(o.subtreeFlags&Al)for(o=o.child;o!==null;)Ob(o,s,u),o=o.sibling}function Ob(o,s,u){switch(o.tag){case 26:Vs(o,s,u),o.flags&Al&&o.memoizedState!==null&&Kk(u,Zn,o.memoizedState,o.memoizedProps);break;case 5:Vs(o,s,u);break;case 3:case 4:var f=Zn;Zn=hf(o.stateNode.containerInfo),Vs(o,s,u),Zn=f;break;case 22:o.memoizedState===null&&(f=o.alternate,f!==null&&f.memoizedState!==null?(f=Al,Al=16777216,Vs(o,s,u),Al=f):Vs(o,s,u));break;default:Vs(o,s,u)}}function kb(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Rl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];Ct=f,Lb(f,o)}kb(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Pb(o),o=o.sibling}function Pb(o){switch(o.tag){case 0:case 11:case 15:Rl(o),o.flags&2048&&Ho(9,o,o.return);break;case 3:Rl(o);break;case 12:Rl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Zc(o)):Rl(o);break;default:Rl(o)}}function Zc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];Ct=f,Lb(f,o)}kb(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Ho(8,s,s.return),Zc(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Zc(s));break;default:Zc(s)}o=o.sibling}}function Lb(o,s){for(;Ct!==null;){var u=Ct;switch(u.tag){case 0:case 11:case 15:Ho(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:fl(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Ct=f;else e:for(u=o;Ct!==null;){f=Ct;var v=f.sibling,_=f.return;if(xb(f),f===u){Ct=null;break e}if(v!==null){v.return=_,Ct=v;break e}Ct=_}}}var uk={getCacheForType:function(o){var s=Nt(mt),u=s.data.get(o);return u===void 0&&(u=o(),s.data.set(o,u)),u},cacheSignal:function(){return Nt(mt).controller.signal}},ck=typeof WeakMap=="function"?WeakMap:Map,Ye=0,it=null,ke=null,Le=0,Xe=0,hn=null,Vo=!1,zs=!1,Tm=!1,io=0,dt=0,zo=0,Hr=0,xm=0,pn=0,qs=0,Ml=null,Zt=null,Am=!1,ef=0,Ub=0,tf=1/0,nf=null,qo=null,St=0,jo=null,js=null,oo=0,Rm=0,Mm=null,Fb=null,Nl=0,Nm=null;function mn(){return(Ye&2)!==0&&Le!==0?Le&-Le:B.T!==null?Lm():e0()}function Bb(){if(pn===0)if((Le&536870912)===0||Fe){var o=cc;cc<<=1,(cc&3932160)===0&&(cc=262144),pn=o}else pn=536870912;return o=fn.current,o!==null&&(o.flags|=32),pn}function en(o,s,u){(o===it&&(Xe===2||Xe===9)||o.cancelPendingCommit!==null)&&(Js(o,0),Jo(o,Le,pn,!1)),Wa(o,u),((Ye&2)===0||o!==it)&&(o===it&&((Ye&2)===0&&(Hr|=u),dt===4&&Jo(o,Le,pn,!1)),Si(o))}function $b(o,s,u){if((Ye&6)!==0)throw Error(i(327));var f=!u&&(s&127)===0&&(s&o.expiredLanes)===0||Xa(o,s),v=f?hk(o,s):Dm(o,s,!0),_=f;do{if(v===0){zs&&!f&&Jo(o,s,0,!1);break}else{if(u=o.current.alternate,_&&!fk(u)){v=Dm(o,s,!1),_=!1;continue}if(v===2){if(_=s,o.errorRecoveryDisabledLanes&_)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var R=o;v=Ml;var k=R.current.memoizedState.isDehydrated;if(k&&(Js(R,C).flags|=256),C=Dm(R,C,!1),C!==2){if(Tm&&!k){R.errorRecoveryDisabledLanes|=_,Hr|=_,v=4;break e}_=Zt,Zt=v,_!==null&&(Zt===null?Zt=_:Zt.push.apply(Zt,_))}v=C}if(_=!1,v!==2)continue}}if(v===1){Js(o,0),Jo(o,s,0,!0);break}e:{switch(f=o,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Jo(f,s,pn,!Vo);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=ef+300-At(),10<v)){if(Jo(f,s,pn,!Vo),dc(f,0,!0)!==0)break e;oo=s,f.timeoutHandle=vw(Gb.bind(null,f,u,Zt,nf,Am,s,pn,Hr,qs,Vo,_,"Throttled",-0,0),v);break e}Gb(f,u,Zt,nf,Am,s,pn,Hr,qs,Vo,_,null,-0,0)}}break}while(!0);Si(o)}function Gb(o,s,u,f,v,_,C,R,k,H,X,te,z,J){if(o.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},Ob(s,_,te);var he=(_&62914560)===_?ef-At():(_&4194048)===_?Ub-At():0;if(he=Yk(te,he),he!==null){oo=_,o.cancelPendingCommit=he(Yb.bind(null,o,s,_,u,f,v,C,R,k,X,te,null,z,J)),Jo(o,_,C,!H);return}}Yb(o,s,_,u,f,v,C,R,k)}function fk(o){for(var s=o;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!un(_(),v))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Jo(o,s,u,f){s&=~xm,s&=~Hr,o.suspendedLanes|=s,o.pingedLanes&=~s,f&&(o.warmLanes|=s),f=o.expirationTimes;for(var v=s;0<v;){var _=31-ln(v),C=1<<_;f[_]=-1,v&=~C}u!==0&&W_(o,u,s)}function of(){return(Ye&6)===0?(Il(0),!1):!0}function Im(){if(ke!==null){if(Xe===0)var o=ke.return;else o=ke,Ji=Or=null,Jp(o),Us=null,hl=0,o=ke;for(;o!==null;)yb(o.alternate,o),o=o.return;ke=null}}function Js(o,s){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,Ik(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),oo=0,Im(),it=o,ke=u=qi(o.current,null),Le=s,Xe=0,hn=null,Vo=!1,zs=Xa(o,s),Tm=!1,qs=pn=xm=Hr=zo=dt=0,Zt=Ml=null,Am=!1,(s&8)!==0&&(s|=s&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=s;0<f;){var v=31-ln(f),_=1<<v;s|=o[v],f&=~_}return io=s,Cc(),u}function Hb(o,s){Me=null,B.H=bl,s===Ls||s===Dc?(s=oS(),Xe=3):s===Pp?(s=oS(),Xe=4):Xe=s===um?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,hn=s,ke===null&&(dt=1,jc(o,Mn(s,o.current)))}function Vb(){var o=fn.current;return o===null?!0:(Le&4194048)===Le?On===null:(Le&62914560)===Le||(Le&536870912)!==0?o===On:!1}function zb(){var o=B.H;return B.H=bl,o===null?bl:o}function qb(){var o=B.A;return B.A=uk,o}function rf(){dt=4,Vo||(Le&4194048)!==Le&&fn.current!==null||(zs=!0),(zo&134217727)===0&&(Hr&134217727)===0||it===null||Jo(it,Le,pn,!1)}function Dm(o,s,u){var f=Ye;Ye|=2;var v=zb(),_=qb();(it!==o||Le!==s)&&(nf=null,Js(o,s)),s=!1;var C=dt;e:do try{if(Xe!==0&&ke!==null){var R=ke,k=hn;switch(Xe){case 8:Im(),C=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(s=!0);var H=Xe;if(Xe=0,hn=null,Ks(o,R,k,H),u&&zs){C=0;break e}break;default:H=Xe,Xe=0,hn=null,Ks(o,R,k,H)}}dk(),C=dt;break}catch(X){Hb(o,X)}while(!0);return s&&o.shellSuspendCounter++,Ji=Or=null,Ye=f,B.H=v,B.A=_,ke===null&&(it=null,Le=0,Cc()),C}function dk(){for(;ke!==null;)jb(ke)}function hk(o,s){var u=Ye;Ye|=2;var f=zb(),v=qb();it!==o||Le!==s?(nf=null,tf=At()+500,Js(o,s)):zs=Xa(o,s);e:do try{if(Xe!==0&&ke!==null){s=ke;var _=hn;t:switch(Xe){case 1:Xe=0,hn=null,Ks(o,s,_,1);break;case 2:case 9:if(nS(_)){Xe=0,hn=null,Jb(s);break}s=function(){Xe!==2&&Xe!==9||it!==o||(Xe=7),Si(o)},_.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:nS(_)?(Xe=0,hn=null,Jb(s)):(Xe=0,hn=null,Ks(o,s,_,7));break;case 5:var C=null;switch(ke.tag){case 26:C=ke.memoizedState;case 5:case 27:var R=ke;if(C?Dw(C):R.stateNode.complete){Xe=0,hn=null;var k=R.sibling;if(k!==null)ke=k;else{var H=R.return;H!==null?(ke=H,sf(H)):ke=null}break t}}Xe=0,hn=null,Ks(o,s,_,5);break;case 6:Xe=0,hn=null,Ks(o,s,_,6);break;case 8:Im(),dt=6;break e;default:throw Error(i(462))}}pk();break}catch(X){Hb(o,X)}while(!0);return Ji=Or=null,B.H=f,B.A=v,Ye=u,ke!==null?0:(it=null,Le=0,Cc(),dt)}function pk(){for(;ke!==null&&!sc();)jb(ke)}function jb(o){var s=gb(o.alternate,o,io);o.memoizedProps=o.pendingProps,s===null?sf(o):ke=s}function Jb(o){var s=o,u=s.alternate;switch(s.tag){case 15:case 0:s=cb(u,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=cb(u,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:Jp(s);default:yb(u,s),s=ke=q0(s,io),s=gb(u,s,io)}o.memoizedProps=o.pendingProps,s===null?sf(o):ke=s}function Ks(o,s,u,f){Ji=Or=null,Jp(s),Us=null,hl=0;var v=s.return;try{if(nk(o,v,s,u,Le)){dt=1,jc(o,Mn(u,o.current)),ke=null;return}}catch(_){if(v!==null)throw ke=v,_;dt=1,jc(o,Mn(u,o.current)),ke=null;return}s.flags&32768?(Fe||f===1?o=!0:zs||(Le&536870912)!==0?o=!1:(Vo=o=!0,(f===2||f===9||f===3||f===6)&&(f=fn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Kb(s,o)):sf(s)}function sf(o){var s=o;do{if((s.flags&32768)!==0){Kb(s,Vo);return}o=s.return;var u=rk(s.alternate,s,io);if(u!==null){ke=u;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=o}while(s!==null);dt===0&&(dt=5)}function Kb(o,s){do{var u=sk(o.alternate,o);if(u!==null){u.flags&=32767,ke=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(o=o.sibling,o!==null)){ke=o;return}ke=o=u}while(o!==null);dt=6,ke=null}function Yb(o,s,u,f,v,_,C,R,k){o.cancelPendingCommit=null;do af();while(St!==0);if((Ye&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Sp,J1(o,u,_,C,R,k),o===it&&(ke=it=null,Le=0),js=s,jo=o,oo=u,Rm=_,Mm=v,Fb=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,yk(Cr,function(){return ew(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,v=Q.p,Q.p=2,C=Ye,Ye|=4;try{ak(o,s,u)}finally{Ye=C,Q.p=v,B.T=f}}St=1,Xb(),Wb(),Qb()}}function Xb(){if(St===1){St=0;var o=jo,s=js,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=B.T,B.T=null;var f=Q.p;Q.p=2;var v=Ye;Ye|=4;try{Nb(s,o);var _=zm,C=L0(o.containerInfo),R=_.focusedElem,k=_.selectionRange;if(C!==R&&R&&R.ownerDocument&&P0(R.ownerDocument.documentElement,R)){if(k!==null&&mp(R)){var H=k.start,X=k.end;if(X===void 0&&(X=H),"selectionStart"in R)R.selectionStart=H,R.selectionEnd=Math.min(X,R.value.length);else{var te=R.ownerDocument||document,z=te&&te.defaultView||window;if(z.getSelection){var J=z.getSelection(),he=R.textContent.length,Ee=Math.min(k.start,he),et=k.end===void 0?Ee:Math.min(k.end,he);!J.extend&&Ee>et&&(C=et,et=Ee,Ee=C);var $=k0(R,Ee),F=k0(R,et);if($&&F&&(J.rangeCount!==1||J.anchorNode!==$.node||J.anchorOffset!==$.offset||J.focusNode!==F.node||J.focusOffset!==F.offset)){var G=te.createRange();G.setStart($.node,$.offset),J.removeAllRanges(),Ee>et?(J.addRange(G),J.extend(F.node,F.offset)):(G.setEnd(F.node,F.offset),J.addRange(G))}}}}for(te=[],J=R;J=J.parentNode;)J.nodeType===1&&te.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var Z=te[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}_f=!!Vm,zm=Vm=null}finally{Ye=v,Q.p=f,B.T=u}}o.current=s,St=2}}function Wb(){if(St===2){St=0;var o=jo,s=js,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=B.T,B.T=null;var f=Q.p;Q.p=2;var v=Ye;Ye|=4;try{Tb(o,s.alternate,s)}finally{Ye=v,Q.p=f,B.T=u}}St=3}}function Qb(){if(St===4||St===3){St=0,ac();var o=jo,s=js,u=oo,f=Fb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?St=5:(St=0,js=jo=null,Zb(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(qo=null),Xh(u),s=s.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ya,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=B.T,v=Q.p,Q.p=2,B.T=null;try{for(var _=o.onRecoverableError,C=0;C<f.length;C++){var R=f[C];_(R.value,{componentStack:R.stack})}}finally{B.T=s,Q.p=v}}(oo&3)!==0&&af(),Si(o),v=o.pendingLanes,(u&261930)!==0&&(v&42)!==0?o===Nm?Nl++:(Nl=0,Nm=o):Nl=0,Il(0)}}function Zb(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,fl(s)))}function af(){return Xb(),Wb(),Qb(),ew()}function ew(){if(St!==5)return!1;var o=jo,s=Rm;Rm=0;var u=Xh(oo),f=B.T,v=Q.p;try{Q.p=32>u?32:u,B.T=null,u=Mm,Mm=null;var _=jo,C=oo;if(St=0,js=jo=null,oo=0,(Ye&6)!==0)throw Error(i(331));var R=Ye;if(Ye|=4,Pb(_.current),Db(_,_.current,C,u),Ye=R,Il(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ya,_)}catch{}return!0}finally{Q.p=v,B.T=f,Zb(o,s)}}function tw(o,s,u){s=Mn(u,s),s=lm(o.stateNode,s,2),o=Bo(o,s,2),o!==null&&(Wa(o,2),Si(o))}function We(o,s,u){if(o.tag===3)tw(o,o,u);else for(;s!==null;){if(s.tag===3){tw(s,o,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qo===null||!qo.has(f))){o=Mn(u,o),u=nb(2),f=Bo(s,u,2),f!==null&&(ib(u,f,s,o),Wa(f,2),Si(f));break}}s=s.return}}function Om(o,s,u){var f=o.pingCache;if(f===null){f=o.pingCache=new ck;var v=new Set;f.set(s,v)}else v=f.get(s),v===void 0&&(v=new Set,f.set(s,v));v.has(u)||(Tm=!0,v.add(u),o=mk.bind(null,o,s,u),s.then(o,o))}function mk(o,s,u){var f=o.pingCache;f!==null&&f.delete(s),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,it===o&&(Le&u)===u&&(dt===4||dt===3&&(Le&62914560)===Le&&300>At()-ef?(Ye&2)===0&&Js(o,0):xm|=u,qs===Le&&(qs=0)),Si(o)}function nw(o,s){s===0&&(s=X_()),o=Nr(o,s),o!==null&&(Wa(o,s),Si(o))}function gk(o){var s=o.memoizedState,u=0;s!==null&&(u=s.retryLane),nw(o,u)}function vk(o,s){var u=0;switch(o.tag){case 31:case 13:var f=o.stateNode,v=o.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),nw(o,u)}function yk(o,s){return Wn(o,s)}var lf=null,Ys=null,km=!1,uf=!1,Pm=!1,Ko=0;function Si(o){o!==Ys&&o.next===null&&(Ys===null?lf=Ys=o:Ys=Ys.next=o),uf=!0,km||(km=!0,Sk())}function Il(o,s){if(!Pm&&uf){Pm=!0;do for(var u=!1,f=lf;f!==null;){if(o!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var C=f.suspendedLanes,R=f.pingedLanes;_=(1<<31-ln(42|o)+1)-1,_&=v&~(C&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,sw(f,_))}else _=Le,_=dc(f,f===it?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Xa(f,_)||(u=!0,sw(f,_));f=f.next}while(u);Pm=!1}}function _k(){iw()}function iw(){uf=km=!1;var o=0;Ko!==0&&Nk()&&(o=Ko);for(var s=At(),u=null,f=lf;f!==null;){var v=f.next,_=ow(f,s);_===0?(f.next=null,u===null?lf=v:u.next=v,v===null&&(Ys=u)):(u=f,(o!==0||(_&3)!==0)&&(uf=!0)),f=v}St!==0&&St!==5||Il(o),Ko!==0&&(Ko=0)}function ow(o,s){for(var u=o.suspendedLanes,f=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var C=31-ln(_),R=1<<C,k=v[C];k===-1?((R&u)===0||(R&f)!==0)&&(v[C]=j1(R,s)):k<=s&&(o.expiredLanes|=R),_&=~R}if(s=it,u=Le,u=dc(o,o===s?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,u===0||o===s&&(Xe===2||Xe===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&Mo(f),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||Xa(o,u)){if(s=u&-u,s===o.callbackPriority)return s;switch(f!==null&&Mo(f),Xh(u)){case 2:case 8:u=Ka;break;case 32:u=Cr;break;case 268435456:u=Y_;break;default:u=Cr}return f=rw.bind(null,o),u=Wn(u,f),o.callbackPriority=s,o.callbackNode=u,s}return f!==null&&f!==null&&Mo(f),o.callbackPriority=2,o.callbackNode=null,2}function rw(o,s){if(St!==0&&St!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(af()&&o.callbackNode!==u)return null;var f=Le;return f=dc(o,o===it?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:($b(o,f,s),ow(o,At()),o.callbackNode!=null&&o.callbackNode===u?rw.bind(null,o):null)}function sw(o,s){if(af())return null;$b(o,s,!0)}function Sk(){Dk(function(){(Ye&6)!==0?Wn(Ja,_k):iw()})}function Lm(){if(Ko===0){var o=ks;o===0&&(o=uc,uc<<=1,(uc&261888)===0&&(uc=256)),Ko=o}return Ko}function aw(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:gc(""+o)}function lw(o,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,o.id&&u.setAttribute("form",o.id),s.parentNode.insertBefore(u,s),o=new FormData(o),u.parentNode.removeChild(u),o}function bk(o,s,u,f,v){if(s==="submit"&&u&&u.stateNode===v){var _=aw((v[Kt]||null).action),C=f.submitter;C&&(s=(s=C[Kt]||null)?aw(s.formAction):C.getAttribute("formAction"),s!==null&&(_=s,C=null));var R=new Sc("action","action",null,f,v);o.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ko!==0){var k=C?lw(v,C):new FormData(v);nm(u,{pending:!0,data:k,method:v.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=C?lw(v,C):new FormData(v),nm(u,{pending:!0,data:k,method:v.method,action:_},_,k))},currentTarget:v}]})}}for(var Um=0;Um<_p.length;Um++){var Fm=_p[Um],wk=Fm.toLowerCase(),Ek=Fm[0].toUpperCase()+Fm.slice(1);Qn(wk,"on"+Ek)}Qn(B0,"onAnimationEnd"),Qn($0,"onAnimationIteration"),Qn(G0,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(BO,"onTransitionRun"),Qn($O,"onTransitionStart"),Qn(GO,"onTransitionCancel"),Qn(H0,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function uw(o,s){s=(s&4)!==0;for(var u=0;u<o.length;u++){var f=o[u],v=f.event;f=f.listeners;e:{var _=void 0;if(s)for(var C=f.length-1;0<=C;C--){var R=f[C],k=R.instance,H=R.currentTarget;if(R=R.listener,k!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=H;try{_(v)}catch(X){Ec(X)}v.currentTarget=null,_=k}else for(C=0;C<f.length;C++){if(R=f[C],k=R.instance,H=R.currentTarget,R=R.listener,k!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=H;try{_(v)}catch(X){Ec(X)}v.currentTarget=null,_=k}}}}function Pe(o,s){var u=s[Wh];u===void 0&&(u=s[Wh]=new Set);var f=o+"__bubble";u.has(f)||(cw(s,o,2,!1),u.add(f))}function Bm(o,s,u){var f=0;s&&(f|=4),cw(u,o,f,s)}var cf="_reactListening"+Math.random().toString(36).slice(2);function $m(o){if(!o[cf]){o[cf]=!0,i0.forEach(function(u){u!=="selectionchange"&&(Ck.has(u)||Bm(u,!1,o),Bm(u,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[cf]||(s[cf]=!0,Bm("selectionchange",!1,s))}}function cw(o,s,u,f){switch(Bw(s)){case 2:var v=Qk;break;case 8:v=Zk;break;default:v=tg}u=v.bind(null,s,u,o),v=void 0,!sp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),f?v!==void 0?o.addEventListener(s,u,{capture:!0,passive:v}):o.addEventListener(s,u,!0):v!==void 0?o.addEventListener(s,u,{passive:v}):o.addEventListener(s,u,!1)}function Gm(o,s,u,f,v){var _=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var R=f.stateNode.containerInfo;if(R===v)break;if(C===4)for(C=f.return;C!==null;){var k=C.tag;if((k===3||k===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;R!==null;){if(C=vs(R),C===null)return;if(k=C.tag,k===5||k===6||k===26||k===27){f=_=C;continue e}R=R.parentNode}}f=f.return}m0(function(){var H=_,X=op(u),te=[];e:{var z=V0.get(o);if(z!==void 0){var J=Sc,he=o;switch(o){case"keypress":if(yc(u)===0)break e;case"keydown":case"keyup":J=vO;break;case"focusin":he="focus",J=cp;break;case"focusout":he="blur",J=cp;break;case"beforeblur":case"afterblur":J=cp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=rO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=SO;break;case B0:case $0:case G0:J=lO;break;case H0:J=wO;break;case"scroll":case"scrollend":J=iO;break;case"wheel":J=CO;break;case"copy":case"cut":case"paste":J=cO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=S0;break;case"toggle":case"beforetoggle":J=xO}var Ee=(s&4)!==0,et=!Ee&&(o==="scroll"||o==="scrollend"),$=Ee?z!==null?z+"Capture":null:z;Ee=[];for(var F=H,G;F!==null;){var Z=F;if(G=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||G===null||$===null||(Z=el(F,$),Z!=null&&Ee.push(Ol(F,Z,G))),et)break;F=F.return}0<Ee.length&&(z=new J(z,he,null,u,X),te.push({event:z,listeners:Ee}))}}if((s&7)===0){e:{if(z=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",z&&u!==ip&&(he=u.relatedTarget||u.fromElement)&&(vs(he)||he[gs]))break e;if((J||z)&&(z=X.window===X?X:(z=X.ownerDocument)?z.defaultView||z.parentWindow:window,J?(he=u.relatedTarget||u.toElement,J=H,he=he?vs(he):null,he!==null&&(et=a(he),Ee=he.tag,he!==et||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(J=null,he=H),J!==he)){if(Ee=y0,Z="onMouseLeave",$="onMouseEnter",F="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=S0,Z="onPointerLeave",$="onPointerEnter",F="pointer"),et=J==null?z:Za(J),G=he==null?z:Za(he),z=new Ee(Z,F+"leave",J,u,X),z.target=et,z.relatedTarget=G,Z=null,vs(X)===H&&(Ee=new Ee($,F+"enter",he,u,X),Ee.target=G,Ee.relatedTarget=et,Z=Ee),et=Z,J&&he)t:{for(Ee=Tk,$=J,F=he,G=0,Z=$;Z;Z=Ee(Z))G++;Z=0;for(var _e=F;_e;_e=Ee(_e))Z++;for(;0<G-Z;)$=Ee($),G--;for(;0<Z-G;)F=Ee(F),Z--;for(;G--;){if($===F||F!==null&&$===F.alternate){Ee=$;break t}$=Ee($),F=Ee(F)}Ee=null}else Ee=null;J!==null&&fw(te,z,J,Ee,!1),he!==null&&et!==null&&fw(te,et,he,Ee,!0)}}e:{if(z=H?Za(H):window,J=z.nodeName&&z.nodeName.toLowerCase(),J==="select"||J==="input"&&z.type==="file")var Ve=R0;else if(x0(z))if(M0)Ve=LO;else{Ve=kO;var ge=OO}else J=z.nodeName,!J||J.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?H&&np(H.elementType)&&(Ve=R0):Ve=PO;if(Ve&&(Ve=Ve(o,H))){A0(te,Ve,u,X);break e}ge&&ge(o,z,H),o==="focusout"&&H&&z.type==="number"&&H.memoizedProps.value!=null&&tp(z,"number",z.value)}switch(ge=H?Za(H):window,o){case"focusin":(x0(ge)||ge.contentEditable==="true")&&(xs=ge,gp=H,ll=null);break;case"focusout":ll=gp=xs=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,U0(te,u,X);break;case"selectionchange":if(FO)break;case"keydown":case"keyup":U0(te,u,X)}var Ne;if(dp)e:{switch(o){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ts?C0(o,u)&&(Ue="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ue="onCompositionStart");Ue&&(b0&&u.locale!=="ko"&&(Ts||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ts&&(Ne=g0()):(Do=X,ap="value"in Do?Do.value:Do.textContent,Ts=!0)),ge=ff(H,Ue),0<ge.length&&(Ue=new _0(Ue,o,null,u,X),te.push({event:Ue,listeners:ge}),Ne?Ue.data=Ne:(Ne=T0(u),Ne!==null&&(Ue.data=Ne)))),(Ne=RO?MO(o,u):NO(o,u))&&(Ue=ff(H,"onBeforeInput"),0<Ue.length&&(ge=new _0("onBeforeInput","beforeinput",null,u,X),te.push({event:ge,listeners:Ue}),ge.data=Ne)),bk(te,o,H,u,X)}uw(te,s)})}function Ol(o,s,u){return{instance:o,listener:s,currentTarget:u}}function ff(o,s){for(var u=s+"Capture",f=[];o!==null;){var v=o,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=el(o,u),v!=null&&f.unshift(Ol(o,v,_)),v=el(o,s),v!=null&&f.push(Ol(o,v,_))),o.tag===3)return f;o=o.return}return[]}function Tk(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function fw(o,s,u,f,v){for(var _=s._reactName,C=[];u!==null&&u!==f;){var R=u,k=R.alternate,H=R.stateNode;if(R=R.tag,k!==null&&k===f)break;R!==5&&R!==26&&R!==27||H===null||(k=H,v?(H=el(u,_),H!=null&&C.unshift(Ol(u,H,k))):v||(H=el(u,_),H!=null&&C.push(Ol(u,H,k)))),u=u.return}C.length!==0&&o.push({event:s,listeners:C})}var xk=/\r\n?/g,Ak=/\u0000|\uFFFD/g;function dw(o){return(typeof o=="string"?o:""+o).replace(xk,`
`).replace(Ak,"")}function hw(o,s){return s=dw(s),dw(o)===s}function Ze(o,s,u,f,v,_){switch(u){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||ws(o,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&ws(o,""+f);break;case"className":pc(o,"class",f);break;case"tabIndex":pc(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":pc(o,u,f);break;case"style":h0(o,f,_);break;case"data":if(s!=="object"){pc(o,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||u!=="href")){o.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(u);break}f=gc(""+f),o.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(s!=="input"&&Ze(o,s,"name",v.name,v,null),Ze(o,s,"formEncType",v.formEncType,v,null),Ze(o,s,"formMethod",v.formMethod,v,null),Ze(o,s,"formTarget",v.formTarget,v,null)):(Ze(o,s,"encType",v.encType,v,null),Ze(o,s,"method",v.method,v,null),Ze(o,s,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(u);break}f=gc(""+f),o.setAttribute(u,f);break;case"onClick":f!=null&&(o.onclick=Vi);break;case"onScroll":f!=null&&Pe("scroll",o);break;case"onScrollEnd":f!=null&&Pe("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=u}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}u=gc(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(u,""+f):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":f===!0?o.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(u,f):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(u,f):o.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(u):o.setAttribute(u,f);break;case"popover":Pe("beforetoggle",o),Pe("toggle",o),hc(o,"popover",f);break;case"xlinkActuate":Hi(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Hi(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Hi(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Hi(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Hi(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Hi(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Hi(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Hi(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Hi(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":hc(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=tO.get(u)||u,hc(o,u,f))}}function Hm(o,s,u,f,v,_){switch(u){case"style":h0(o,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=u}}break;case"children":typeof f=="string"?ws(o,f):(typeof f=="number"||typeof f=="bigint")&&ws(o,""+f);break;case"onScroll":f!=null&&Pe("scroll",o);break;case"onScrollEnd":f!=null&&Pe("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!o0.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),s=u.slice(2,v?u.length-7:void 0),_=o[Kt]||null,_=_!=null?_[u]:null,typeof _=="function"&&o.removeEventListener(s,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(s,f,v);break e}u in o?o[u]=f:f===!0?o.setAttribute(u,""):hc(o,u,f)}}}function Dt(o,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",o),Pe("load",o);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var C=u[_];if(C!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ze(o,s,_,C,u,null)}}v&&Ze(o,s,"srcSet",u.srcSet,u,null),f&&Ze(o,s,"src",u.src,u,null);return;case"input":Pe("invalid",o);var R=_=C=v=null,k=null,H=null;for(f in u)if(u.hasOwnProperty(f)){var X=u[f];if(X!=null)switch(f){case"name":v=X;break;case"type":C=X;break;case"checked":k=X;break;case"defaultChecked":H=X;break;case"value":_=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:Ze(o,s,f,X,u,null)}}u0(o,_,R,k,H,C,v,!1);return;case"select":Pe("invalid",o),f=C=_=null;for(v in u)if(u.hasOwnProperty(v)&&(R=u[v],R!=null))switch(v){case"value":_=R;break;case"defaultValue":C=R;break;case"multiple":f=R;default:Ze(o,s,v,R,u,null)}s=_,u=C,o.multiple=!!f,s!=null?bs(o,!!f,s,!1):u!=null&&bs(o,!!f,u,!0);return;case"textarea":Pe("invalid",o),_=v=f=null;for(C in u)if(u.hasOwnProperty(C)&&(R=u[C],R!=null))switch(C){case"value":f=R;break;case"defaultValue":v=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Ze(o,s,C,R,u,null)}f0(o,f,v,_);return;case"option":for(k in u)if(u.hasOwnProperty(k)&&(f=u[k],f!=null))switch(k){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ze(o,s,k,f,u,null)}return;case"dialog":Pe("beforetoggle",o),Pe("toggle",o),Pe("cancel",o),Pe("close",o);break;case"iframe":case"object":Pe("load",o);break;case"video":case"audio":for(f=0;f<Dl.length;f++)Pe(Dl[f],o);break;case"image":Pe("error",o),Pe("load",o);break;case"details":Pe("toggle",o);break;case"embed":case"source":case"link":Pe("error",o),Pe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in u)if(u.hasOwnProperty(H)&&(f=u[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ze(o,s,H,f,u,null)}return;default:if(np(s)){for(X in u)u.hasOwnProperty(X)&&(f=u[X],f!==void 0&&Hm(o,s,X,f,u,void 0));return}}for(R in u)u.hasOwnProperty(R)&&(f=u[R],f!=null&&Ze(o,s,R,f,u,null))}function Rk(o,s,u,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,C=null,R=null,k=null,H=null,X=null;for(J in u){var te=u[J];if(u.hasOwnProperty(J)&&te!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=te;default:f.hasOwnProperty(J)||Ze(o,s,J,null,f,te)}}for(var z in f){var J=f[z];if(te=u[z],f.hasOwnProperty(z)&&(J!=null||te!=null))switch(z){case"type":_=J;break;case"name":v=J;break;case"checked":H=J;break;case"defaultChecked":X=J;break;case"value":C=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==te&&Ze(o,s,z,J,f,te)}}ep(o,C,R,k,H,X,_,v);return;case"select":J=C=R=z=null;for(_ in u)if(k=u[_],u.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":J=k;default:f.hasOwnProperty(_)||Ze(o,s,_,null,f,k)}for(v in f)if(_=f[v],k=u[v],f.hasOwnProperty(v)&&(_!=null||k!=null))switch(v){case"value":z=_;break;case"defaultValue":R=_;break;case"multiple":C=_;default:_!==k&&Ze(o,s,v,_,f,k)}s=R,u=C,f=J,z!=null?bs(o,!!u,z,!1):!!f!=!!u&&(s!=null?bs(o,!!u,s,!0):bs(o,!!u,u?[]:"",!1));return;case"textarea":J=z=null;for(R in u)if(v=u[R],u.hasOwnProperty(R)&&v!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ze(o,s,R,null,f,v)}for(C in f)if(v=f[C],_=u[C],f.hasOwnProperty(C)&&(v!=null||_!=null))switch(C){case"value":z=v;break;case"defaultValue":J=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Ze(o,s,C,v,f,_)}c0(o,z,J);return;case"option":for(var he in u)if(z=u[he],u.hasOwnProperty(he)&&z!=null&&!f.hasOwnProperty(he))switch(he){case"selected":o.selected=!1;break;default:Ze(o,s,he,null,f,z)}for(k in f)if(z=f[k],J=u[k],f.hasOwnProperty(k)&&z!==J&&(z!=null||J!=null))switch(k){case"selected":o.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ze(o,s,k,z,f,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in u)z=u[Ee],u.hasOwnProperty(Ee)&&z!=null&&!f.hasOwnProperty(Ee)&&Ze(o,s,Ee,null,f,z);for(H in f)if(z=f[H],J=u[H],f.hasOwnProperty(H)&&z!==J&&(z!=null||J!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,s));break;default:Ze(o,s,H,z,f,J)}return;default:if(np(s)){for(var et in u)z=u[et],u.hasOwnProperty(et)&&z!==void 0&&!f.hasOwnProperty(et)&&Hm(o,s,et,void 0,f,z);for(X in f)z=f[X],J=u[X],!f.hasOwnProperty(X)||z===J||z===void 0&&J===void 0||Hm(o,s,X,z,f,J);return}}for(var $ in u)z=u[$],u.hasOwnProperty($)&&z!=null&&!f.hasOwnProperty($)&&Ze(o,s,$,null,f,z);for(te in f)z=f[te],J=u[te],!f.hasOwnProperty(te)||z===J||z==null&&J==null||Ze(o,s,te,z,f,J)}function pw(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mk(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],_=v.transferSize,C=v.initiatorType,R=v.duration;if(_&&R&&pw(C)){for(C=0,R=v.responseEnd,f+=1;f<u.length;f++){var k=u[f],H=k.startTime;if(H>R)break;var X=k.transferSize,te=k.initiatorType;X&&pw(te)&&(k=k.responseEnd,C+=X*(k<R?1:(R-H)/(k-H)))}if(--f,s+=8*(_+C)/(v.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Vm=null,zm=null;function df(o){return o.nodeType===9?o:o.ownerDocument}function mw(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gw(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function qm(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jm=null;function Nk(){var o=window.event;return o&&o.type==="popstate"?o===jm?!1:(jm=o,!0):(jm=null,!1)}var vw=typeof setTimeout=="function"?setTimeout:void 0,Ik=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,Dk=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(o){return yw.resolve(null).then(o).catch(Ok)}:vw;function Ok(o){setTimeout(function(){throw o})}function Yo(o){return o==="head"}function _w(o,s){var u=s,f=0;do{var v=u.nextSibling;if(o.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){o.removeChild(v),Zs(s);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")kl(o.ownerDocument.documentElement);else if(u==="head"){u=o.ownerDocument.head,kl(u);for(var _=u.firstChild;_;){var C=_.nextSibling,R=_.nodeName;_[Qa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=C}}else u==="body"&&kl(o.ownerDocument.body);u=v}while(u);Zs(s)}function Sw(o,s){var u=o;o=0;do{var f=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(o===0)break;o--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||o++;u=f}while(u)}function Jm(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Jm(u),Qh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function kk(o,s,u,f){for(;o.nodeType===1;){var v=u;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[Qa])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=kn(o.nextSibling),o===null)break}return null}function Pk(o,s,u){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=kn(o.nextSibling),o===null))return null;return o}function bw(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=kn(o.nextSibling),o===null))return null;return o}function Km(o){return o.data==="$?"||o.data==="$~"}function Ym(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Lk(o,s){var u=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||u.readyState!=="loading")s();else{var f=function(){s(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function kn(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var Xm=null;function ww(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"||u==="/&"){if(s===0)return kn(o.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}o=o.nextSibling}return null}function Ew(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return o;s--}else u!=="/$"&&u!=="/&"||s++}o=o.previousSibling}return null}function Cw(o,s,u){switch(s=df(u),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function kl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Qh(o)}var Pn=new Map,Tw=new Set;function hf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ro=Q.d;Q.d={f:Uk,r:Fk,D:Bk,C:$k,L:Gk,m:Hk,X:zk,S:Vk,M:qk};function Uk(){var o=ro.f(),s=of();return o||s}function Fk(o){var s=ys(o);s!==null&&s.tag===5&&s.type==="form"?HS(s):ro.r(o)}var Xs=typeof document>"u"?null:document;function xw(o,s,u){var f=Xs;if(f&&typeof s=="string"&&s){var v=An(s);v='link[rel="'+o+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Tw.has(v)||(Tw.add(v),o={rel:o,crossOrigin:u,href:s},f.querySelector(v)===null&&(s=f.createElement("link"),Dt(s,"link",o),Et(s),f.head.appendChild(s)))}}function Bk(o){ro.D(o),xw("dns-prefetch",o,null)}function $k(o,s){ro.C(o,s),xw("preconnect",o,s)}function Gk(o,s,u){ro.L(o,s,u);var f=Xs;if(f&&o&&s){var v='link[rel="preload"][as="'+An(s)+'"]';s==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+An(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+An(u.imageSizes)+'"]')):v+='[href="'+An(o)+'"]';var _=v;switch(s){case"style":_=Ws(o);break;case"script":_=Qs(o)}Pn.has(_)||(o=y({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:o,as:s},u),Pn.set(_,o),f.querySelector(v)!==null||s==="style"&&f.querySelector(Pl(_))||s==="script"&&f.querySelector(Ll(_))||(s=f.createElement("link"),Dt(s,"link",o),Et(s),f.head.appendChild(s)))}}function Hk(o,s){ro.m(o,s);var u=Xs;if(u&&o){var f=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+An(f)+'"][href="'+An(o)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Qs(o)}if(!Pn.has(_)&&(o=y({rel:"modulepreload",href:o},s),Pn.set(_,o),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ll(_)))return}f=u.createElement("link"),Dt(f,"link",o),Et(f),u.head.appendChild(f)}}}function Vk(o,s,u){ro.S(o,s,u);var f=Xs;if(f&&o){var v=_s(f).hoistableStyles,_=Ws(o);s=s||"default";var C=v.get(_);if(!C){var R={loading:0,preload:null};if(C=f.querySelector(Pl(_)))R.loading=5;else{o=y({rel:"stylesheet",href:o,"data-precedence":s},u),(u=Pn.get(_))&&Wm(o,u);var k=C=f.createElement("link");Et(k),Dt(k,"link",o),k._p=new Promise(function(H,X){k.onload=H,k.onerror=X}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,pf(C,s,f)}C={type:"stylesheet",instance:C,count:1,state:R},v.set(_,C)}}}function zk(o,s){ro.X(o,s);var u=Xs;if(u&&o){var f=_s(u).hoistableScripts,v=Qs(o),_=f.get(v);_||(_=u.querySelector(Ll(v)),_||(o=y({src:o,async:!0},s),(s=Pn.get(v))&&Qm(o,s),_=u.createElement("script"),Et(_),Dt(_,"link",o),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function qk(o,s){ro.M(o,s);var u=Xs;if(u&&o){var f=_s(u).hoistableScripts,v=Qs(o),_=f.get(v);_||(_=u.querySelector(Ll(v)),_||(o=y({src:o,async:!0,type:"module"},s),(s=Pn.get(v))&&Qm(o,s),_=u.createElement("script"),Et(_),Dt(_,"link",o),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function Aw(o,s,u,f){var v=(v=be.current)?hf(v):null;if(!v)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Ws(u.href),u=_s(v).hoistableStyles,f=u.get(s),f||(f={type:"style",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=Ws(u.href);var _=_s(v).hoistableStyles,C=_.get(o);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,C),(_=v.querySelector(Pl(o)))&&!_._p&&(C.instance=_,C.state.loading=5),Pn.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Pn.set(o,u),_||jk(v,o,u,C.state))),s&&f===null)throw Error(i(528,""));return C}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qs(u),u=_s(v).hoistableScripts,f=u.get(s),f||(f={type:"script",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Ws(o){return'href="'+An(o)+'"'}function Pl(o){return'link[rel="stylesheet"]['+o+"]"}function Rw(o){return y({},o,{"data-precedence":o.precedence,precedence:null})}function jk(o,s,u,f){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=o.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),Dt(s,"link",u),Et(s),o.head.appendChild(s))}function Qs(o){return'[src="'+An(o)+'"]'}function Ll(o){return"script[async]"+o}function Mw(o,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var f=o.querySelector('style[data-href~="'+An(u.href)+'"]');if(f)return s.instance=f,Et(f),f;var v=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),Et(f),Dt(f,"style",v),pf(f,u.precedence,o),s.instance=f;case"stylesheet":v=Ws(u.href);var _=o.querySelector(Pl(v));if(_)return s.state.loading|=4,s.instance=_,Et(_),_;f=Rw(u),(v=Pn.get(v))&&Wm(f,v),_=(o.ownerDocument||o).createElement("link"),Et(_);var C=_;return C._p=new Promise(function(R,k){C.onload=R,C.onerror=k}),Dt(_,"link",f),s.state.loading|=4,pf(_,u.precedence,o),s.instance=_;case"script":return _=Qs(u.src),(v=o.querySelector(Ll(_)))?(s.instance=v,Et(v),v):(f=u,(v=Pn.get(_))&&(f=y({},u),Qm(f,v)),o=o.ownerDocument||o,v=o.createElement("script"),Et(v),Dt(v,"link",f),o.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,pf(f,u.precedence,o));return s.instance}function pf(o,s,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,C=0;C<f.length;C++){var R=f[C];if(R.dataset.precedence===s)_=R;else if(_!==v)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(o,s.firstChild))}function Wm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function Qm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var mf=null;function Nw(o,s,u){if(mf===null){var f=new Map,v=mf=new Map;v.set(u,f)}else v=mf,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(o))return f;for(f.set(o,null),u=u.getElementsByTagName(o),v=0;v<u.length;v++){var _=u[v];if(!(_[Qa]||_[Rt]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(s)||"";C=o+C;var R=f.get(C);R?R.push(_):f.set(C,[_])}}return f}function Iw(o,s,u){o=o.ownerDocument||o,o.head.insertBefore(u,s==="title"?o.querySelector("head > title"):null)}function Jk(o,s,u){if(u===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Dw(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function Kk(o,s,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Ws(f.href),_=s.querySelector(Pl(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=gf.bind(o),s.then(o,o)),u.state.loading|=4,u.instance=_,Et(_);return}_=s.ownerDocument||s,f=Rw(f),(v=Pn.get(v))&&Wm(f,v),_=_.createElement("link"),Et(_);var C=_;C._p=new Promise(function(R,k){C.onload=R,C.onerror=k}),Dt(_,"link",f),u.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(o.count++,u=gf.bind(o),s.addEventListener("load",u),s.addEventListener("error",u))}}var Zm=0;function Yk(o,s){return o.stylesheets&&o.count===0&&yf(o,o.stylesheets),0<o.count||0<o.imgCount?function(u){var f=setTimeout(function(){if(o.stylesheets&&yf(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+s);0<o.imgBytes&&Zm===0&&(Zm=62500*Mk());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&yf(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>Zm?50:800)+s);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function gf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var vf=null;function yf(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,vf=new Map,s.forEach(Xk,o),vf=null,gf.call(o))}function Xk(o,s){if(!(s.state.loading&4)){var u=vf.get(o);if(u)var f=u.get(null);else{u=new Map,vf.set(o,u);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var C=v[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),f=C)}f&&u.set(null,f)}v=s.instance,C=v.getAttribute("data-precedence"),_=u.get(C)||f,_===f&&u.set(null,v),u.set(C,v),this.count++,f=gf.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),s.state.loading|=4}}var Ul={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function Wk(o,s,u,f,v,_,C,R,k){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.hiddenUpdates=Kh(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Ow(o,s,u,f,v,_,C,R,k,H,X,te){return o=new Wk(o,s,u,C,k,H,X,te,R),s=1,_===!0&&(s|=24),_=cn(3,null,null,s),o.current=_,_.stateNode=o,s=Dp(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:s},Lp(_),o}function kw(o){return o?(o=Ms,o):Ms}function Pw(o,s,u,f,v,_){v=kw(v),f.context===null?f.context=v:f.pendingContext=v,f=Fo(s),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=Bo(o,f,s),u!==null&&(en(u,o,s),ml(u,o,s))}function Lw(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<s?u:s}}function eg(o,s){Lw(o,s),(o=o.alternate)&&Lw(o,s)}function Uw(o){if(o.tag===13||o.tag===31){var s=Nr(o,67108864);s!==null&&en(s,o,67108864),eg(o,67108864)}}function Fw(o){if(o.tag===13||o.tag===31){var s=mn();s=Yh(s);var u=Nr(o,s);u!==null&&en(u,o,s),eg(o,s)}}var _f=!0;function Qk(o,s,u,f){var v=B.T;B.T=null;var _=Q.p;try{Q.p=2,tg(o,s,u,f)}finally{Q.p=_,B.T=v}}function Zk(o,s,u,f){var v=B.T;B.T=null;var _=Q.p;try{Q.p=8,tg(o,s,u,f)}finally{Q.p=_,B.T=v}}function tg(o,s,u,f){if(_f){var v=ng(f);if(v===null)Gm(o,s,f,Sf,u),$w(o,f);else if(tP(v,o,s,u,f))f.stopPropagation();else if($w(o,f),s&4&&-1<eP.indexOf(o)){for(;v!==null;){var _=ys(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=Tr(_.pendingLanes);if(C!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;C;){var k=1<<31-ln(C);R.entanglements[1]|=k,C&=~k}Si(_),(Ye&6)===0&&(tf=At()+500,Il(0))}}break;case 31:case 13:R=Nr(_,2),R!==null&&en(R,_,2),of(),eg(_,2)}if(_=ng(f),_===null&&Gm(o,s,f,Sf,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else Gm(o,s,f,null,u)}}function ng(o){return o=op(o),ig(o)}var Sf=null;function ig(o){if(Sf=null,o=vs(o),o!==null){var s=a(o);if(s===null)o=null;else{var u=s.tag;if(u===13){if(o=l(s),o!==null)return o;o=null}else if(u===31){if(o=c(s),o!==null)return o;o=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Sf=o,null}function Bw(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lc()){case Ja:return 2;case Ka:return 8;case Cr:case $1:return 32;case Y_:return 268435456;default:return 32}default:return 32}}var og=!1,Xo=null,Wo=null,Qo=null,Fl=new Map,Bl=new Map,Zo=[],eP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $w(o,s){switch(o){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":Fl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(s.pointerId)}}function $l(o,s,u,f,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},s!==null&&(s=ys(s),s!==null&&Uw(s)),o):(o.eventSystemFlags|=f,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function tP(o,s,u,f,v){switch(s){case"focusin":return Xo=$l(Xo,o,s,u,f,v),!0;case"dragenter":return Wo=$l(Wo,o,s,u,f,v),!0;case"mouseover":return Qo=$l(Qo,o,s,u,f,v),!0;case"pointerover":var _=v.pointerId;return Fl.set(_,$l(Fl.get(_)||null,o,s,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Bl.set(_,$l(Bl.get(_)||null,o,s,u,f,v)),!0}return!1}function Gw(o){var s=vs(o.target);if(s!==null){var u=a(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){o.blockedOn=s,t0(o.priority,function(){Fw(u)});return}}else if(s===31){if(s=c(u),s!==null){o.blockedOn=s,t0(o.priority,function(){Fw(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function bf(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var u=ng(o.nativeEvent);if(u===null){u=o.nativeEvent;var f=new u.constructor(u.type,u);ip=f,u.target.dispatchEvent(f),ip=null}else return s=ys(u),s!==null&&Uw(s),o.blockedOn=u,!1;s.shift()}return!0}function Hw(o,s,u){bf(o)&&u.delete(s)}function nP(){og=!1,Xo!==null&&bf(Xo)&&(Xo=null),Wo!==null&&bf(Wo)&&(Wo=null),Qo!==null&&bf(Qo)&&(Qo=null),Fl.forEach(Hw),Bl.forEach(Hw)}function wf(o,s){o.blockedOn===s&&(o.blockedOn=null,og||(og=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nP)))}var Ef=null;function Vw(o){Ef!==o&&(Ef=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ef===o&&(Ef=null);for(var s=0;s<o.length;s+=3){var u=o[s],f=o[s+1],v=o[s+2];if(typeof f!="function"){if(ig(f||u)===null)continue;break}var _=ys(u);_!==null&&(o.splice(s,3),s-=3,nm(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function Zs(o){function s(k){return wf(k,o)}Xo!==null&&wf(Xo,o),Wo!==null&&wf(Wo,o),Qo!==null&&wf(Qo,o),Fl.forEach(s),Bl.forEach(s);for(var u=0;u<Zo.length;u++){var f=Zo[u];f.blockedOn===o&&(f.blockedOn=null)}for(;0<Zo.length&&(u=Zo[0],u.blockedOn===null);)Gw(u),u.blockedOn===null&&Zo.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],C=v[Kt]||null;if(typeof _=="function")C||Vw(u);else if(C){var R=null;if(_&&_.hasAttribute("formAction")){if(v=_,C=_[Kt]||null)R=C.formAction;else if(ig(v)!==null)continue}else R=C.action;typeof R=="function"?u[f+1]=R:(u.splice(f,3),f-=3),Vw(u)}}}function zw(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function rg(o){this._internalRoot=o}Cf.prototype.render=rg.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var u=s.current,f=mn();Pw(u,f,o,s,null,null)},Cf.prototype.unmount=rg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Pw(o.current,2,null,o,null,null),of(),s[gs]=null}};function Cf(o){this._internalRoot=o}Cf.prototype.unstable_scheduleHydration=function(o){if(o){var s=e0();o={blockedOn:null,target:o,priority:s};for(var u=0;u<Zo.length&&s!==0&&s<Zo[u].priority;u++);Zo.splice(u,0,o),u===0&&Gw(o)}};var qw=e.version;if(qw!=="19.2.1")throw Error(i(527,qw,"19.2.1"));Q.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(s),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var iP={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tf.isDisabled&&Tf.supportsFiber)try{Ya=Tf.inject(iP),an=Tf}catch{}}return Hl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var u=!1,f="",v=QS,_=ZS,C=eb;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=Ow(o,1,!1,null,null,u,f,null,v,_,C,zw),o[gs]=s.current,$m(o),new rg(s)},Hl.hydrateRoot=function(o,s,u){if(!r(o))throw Error(i(299));var f=!1,v="",_=QS,C=ZS,R=eb,k=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.formState!==void 0&&(k=u.formState)),s=Ow(o,1,!0,s,u??null,f,v,k,_,C,R,zw),s.context=kw(null),u=s.current,f=mn(),f=Yh(f),v=Fo(f),v.callback=null,Bo(u,v,f),u=f,s.current.lanes=u,Wa(s,u),Si(s),o[gs]=s.current,$m(o),new Cf(s)},Hl.version="19.2.1",Hl}var tE;function hP(){if(tE)return lg.exports;tE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lg.exports=dP(),lg.exports}var pP=hP();function $e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var mP={};function rh(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:mP}var tA=Object.assign,bd=Object.getOwnPropertyDescriptor,Ni=Object.defineProperty,Nu=Object.prototype,cv=[];Object.freeze(cv);var nA={};Object.freeze(nA);var gP=typeof Proxy<"u",vP=Object.toString();function iA(){gP||$e("Proxy not available")}function oA(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var pa=function(){};function ci(t){return typeof t=="function"}function es(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function sh(t){return t!==null&&typeof t=="object"}function yo(t){if(!sh(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n.toString()===vP}function rA(t){var e=t?.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Iu(t,e,n){Ni(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function sA(t,e,n){Ni(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function gr(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(i){return sh(i)&&i[n]===!0}}function Da(t){return t!=null&&Object.prototype.toString.call(t)==="[object Map]"}function yP(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e),i=Object.getPrototypeOf(n);return i===null}function uo(t){return t!=null&&Object.prototype.toString.call(t)==="[object Set]"}var aA=typeof Object.getOwnPropertySymbols<"u";function _P(t){var e=Object.keys(t);if(!aA)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter(function(i){return Nu.propertyIsEnumerable.call(t,i)})):e}var Ca=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:aA?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function lA(t){return t===null?null:typeof t=="object"?""+t:t}function po(t,e){return Nu.hasOwnProperty.call(t,e)}var SP=Object.getOwnPropertyDescriptors||function(e){var n={};return Ca(e).forEach(function(i){n[i]=bd(e,i)}),n};function Sn(t,e){return!!(t&e)}function bn(t,e,n){return n?t|=e:t&=~e,t}function nE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function bP(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,EP(i.key),i)}}function Oa(t,e,n){return e&&bP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ma(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=CP(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(){return ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ts.apply(null,arguments)}function uA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fv(t,e)}function fv(t,e){return fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fv(t,e)}function wP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EP(t){var e=wP(t,"string");return typeof e=="symbol"?e:e+""}function CP(t,e){if(t){if(typeof t=="string")return nE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nE(t,e):void 0}}var Ti=Symbol("mobx-stored-annotations");function Ii(t){function e(n,i){if(Ou(i))return t.decorate_20223_(n,i);Du(n,i,t)}return Object.assign(e,t)}function Du(t,e,n){po(t,Ti)||Iu(t,Ti,ts({},t[Ti])),IP(n)||(t[Ti][e]=n)}function TP(t){return po(t,Ti)||Iu(t,Ti,ts({},t[Ti])),t[Ti]}function Ou(t){return typeof t=="object"&&typeof t.kind=="string"}var Te=Symbol("mobx administration"),vr=(function(){function t(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=qe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.reportObserved=function(){return xA(this)},e.reportChanged=function(){$n(),AA(this),Gn()},e.toString=function(){return this.name_},Oa(t,[{key:"isBeingObserved",get:function(){return Sn(this.flags_,t.isBeingObservedMask_)},set:function(i){this.flags_=bn(this.flags_,t.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return Sn(this.flags_,t.isPendingUnobservationMask_)},set:function(i){this.flags_=bn(this.flags_,t.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return Sn(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=bn(this.flags_,t.diffValueMask_,i===1)}}])})();vr.isBeingObservedMask_=1;vr.isPendingUnobservationMask_=2;vr.diffValueMask_=4;var yy=gr("Atom",vr);function cA(t,e,n){e===void 0&&(e=pa),n===void 0&&(n=pa);var i=new vr(t);return e!==pa&&kL(i,e),n!==pa&&OA(i,n),i}function xP(t,e){return qA(t,e)}function AP(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var wd={structural:xP,default:AP};function ns(t,e,n){return Ey(t)?t:Array.isArray(t)?Ce.array(t,{name:n}):yo(t)?Ce.object(t,void 0,{name:n}):Da(t)?Ce.map(t,{name:n}):uo(t)?Ce.set(t,{name:n}):typeof t=="function"&&!Ta(t)&&!gu(t)?rA(t)?xa(t):mu(n,t):t}function RP(t,e,n){if(t==null||Bu(t)||Fu(t)||_r(t)||ii(t))return t;if(Array.isArray(t))return Ce.array(t,{name:n,deep:!1});if(yo(t))return Ce.object(t,void 0,{name:n,deep:!1});if(Da(t))return Ce.map(t,{name:n,deep:!1});if(uo(t))return Ce.set(t,{name:n,deep:!1})}function ah(t){return t}function MP(t,e){return qA(t,e)?e:t}var NP="override";function IP(t){return t.annotationType_===NP}function ku(t,e){return{annotationType_:t,options_:e,make_:DP,extend_:OP,decorate_20223_:kP}}function DP(t,e,n,i){var r;if((r=this.options_)!=null&&r.bound)return this.extend_(t,e,n,!1)===null?0:1;if(i===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if(Ta(n.value))return 1;var a=fA(t,this,e,n,!1);return Ni(i,e,a),2}function OP(t,e,n,i){var r=fA(t,this,e,n);return t.defineProperty_(e,r,i)}function kP(t,e){var n=e.kind,i=e.name,r=e.addInitializer,a=this,l=function(d){var m,y,S,w;return is((m=(y=a.options_)==null?void 0:y.name)!=null?m:i.toString(),d,(S=(w=a.options_)==null?void 0:w.autoAction)!=null?S:!1)};if(n=="field")return function(h){var d,m=h;return Ta(m)||(m=l(m)),(d=a.options_)!=null&&d.bound&&(m=m.bind(this),m.isMobxAction=!0),m};if(n=="method"){var c;return Ta(t)||(t=l(t)),(c=this.options_)!=null&&c.bound&&r(function(){var h=this,d=h[i].bind(h);d.isMobxAction=!0,h[i]=d}),t}$e("Cannot apply '"+a.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):"+(`
'`+a.annotationType_+"' can only be used on properties with a function value."))}function PP(t,e,n,i){e.annotationType_,i.value}function fA(t,e,n,i,r){var a,l,c,h,d,m,y;r===void 0&&(r=ue.safeDescriptors),PP(t,e,n,i);var S=i.value;if((a=e.options_)!=null&&a.bound){var w;S=S.bind((w=t.proxy_)!=null?w:t.target_)}return{value:is((l=(c=e.options_)==null?void 0:c.name)!=null?l:n.toString(),S,(h=(d=e.options_)==null?void 0:d.autoAction)!=null?h:!1,(m=e.options_)!=null&&m.bound?(y=t.proxy_)!=null?y:t.target_:void 0),configurable:r?t.isPlainObject_:!0,enumerable:!1,writable:!r}}function dA(t,e){return{annotationType_:t,options_:e,make_:LP,extend_:UP,decorate_20223_:FP}}function LP(t,e,n,i){var r;if(i===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if((r=this.options_)!=null&&r.bound&&(!po(t.target_,e)||!gu(t.target_[e]))&&this.extend_(t,e,n,!1)===null)return 0;if(gu(n.value))return 1;var a=hA(t,this,e,n,!1,!1);return Ni(i,e,a),2}function UP(t,e,n,i){var r,a=hA(t,this,e,n,(r=this.options_)==null?void 0:r.bound);return t.defineProperty_(e,a,i)}function FP(t,e){var n,i=e.name,r=e.addInitializer;return gu(t)||(t=xa(t)),(n=this.options_)!=null&&n.bound&&r(function(){var a=this,l=a[i].bind(a);l.isMobXFlow=!0,a[i]=l}),t}function BP(t,e,n,i){e.annotationType_,i.value}function hA(t,e,n,i,r,a){a===void 0&&(a=ue.safeDescriptors),BP(t,e,n,i);var l=i.value;if(gu(l)||(l=xa(l)),r){var c;l=l.bind((c=t.proxy_)!=null?c:t.target_),l.isMobXFlow=!0}return{value:l,configurable:a?t.isPlainObject_:!0,enumerable:!1,writable:!a}}function _y(t,e){return{annotationType_:t,options_:e,make_:$P,extend_:GP,decorate_20223_:HP}}function $P(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function GP(t,e,n,i){return VP(t,this,e,n),t.defineComputedProperty_(e,ts({},this.options_,{get:n.get,set:n.set}),i)}function HP(t,e){var n=this,i=e.name,r=e.addInitializer;return r(function(){var a=fs(this)[Te],l=ts({},n.options_,{get:t,context:this});l.name||(l.name="ObservableObject."+i.toString()),a.values_.set(i,new fi(l))}),function(){return this[Te].getObservablePropValue_(i)}}function VP(t,e,n,i){e.annotationType_,i.get}function lh(t,e){return{annotationType_:t,options_:e,make_:zP,extend_:qP,decorate_20223_:jP}}function zP(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function qP(t,e,n,i){var r,a;return JP(t,this),t.defineObservableProperty_(e,n.value,(r=(a=this.options_)==null?void 0:a.enhancer)!=null?r:ns,i)}function jP(t,e){var n=this,i=e.kind,r=e.name,a=new WeakSet;function l(c,h){var d,m,y=fs(c)[Te],S=new lr(h,(d=(m=n.options_)==null?void 0:m.enhancer)!=null?d:ns,"ObservableObject."+r.toString(),!1);y.values_.set(r,S),a.add(c)}if(i=="accessor")return{get:function(){return a.has(this)||l(this,t.get.call(this)),this[Te].getObservablePropValue_(r)},set:function(h){return a.has(this)||l(this,h),this[Te].setObservablePropValue_(r,h)},init:function(h){return a.has(this)||l(this,h),h}}}function JP(t,e,n,i){e.annotationType_}var KP="true",YP=pA();function pA(t){return{annotationType_:KP,options_:t,make_:XP,extend_:WP,decorate_20223_:QP}}function XP(t,e,n,i){var r,a;if(n.get)return ur.make_(t,e,n,i);if(n.set){var l=Ta(n.set)?n.set:is(e.toString(),n.set);return i===t.target_?t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:l})===null?0:2:(Ni(i,e,{configurable:!0,set:l}),2)}if(i!==t.target_&&typeof n.value=="function"){var c;if(rA(n.value)){var h,d=(h=this.options_)!=null&&h.autoBind?xa.bound:xa;return d.make_(t,e,n,i)}var m=(c=this.options_)!=null&&c.autoBind?mu.bound:mu;return m.make_(t,e,n,i)}var y=((r=this.options_)==null?void 0:r.deep)===!1?Ce.ref:Ce;if(typeof n.value=="function"&&(a=this.options_)!=null&&a.autoBind){var S;n.value=n.value.bind((S=t.proxy_)!=null?S:t.target_)}return y.make_(t,e,n,i)}function WP(t,e,n,i){var r,a;if(n.get)return ur.extend_(t,e,n,i);if(n.set)return t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:is(e.toString(),n.set)},i);if(typeof n.value=="function"&&(r=this.options_)!=null&&r.autoBind){var l;n.value=n.value.bind((l=t.proxy_)!=null?l:t.target_)}var c=((a=this.options_)==null?void 0:a.deep)===!1?Ce.ref:Ce;return c.extend_(t,e,n,i)}function QP(t,e){$e("'"+this.annotationType_+"' cannot be used as a decorator")}var ZP="observable",eL="observable.ref",tL="observable.shallow",nL="observable.struct",mA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(mA);function xf(t){return t||mA}var dv=lh(ZP),iL=lh(eL,{enhancer:ah}),oL=lh(tL,{enhancer:RP}),rL=lh(nL,{enhancer:MP}),gA=Ii(dv);function Af(t){return t.deep===!0?ns:t.deep===!1?ah:aL(t.defaultDecorator)}function sL(t){var e;return t?(e=t.defaultDecorator)!=null?e:pA(t):void 0}function aL(t){var e,n;return t&&(e=(n=t.options_)==null?void 0:n.enhancer)!=null?e:ns}function vA(t,e,n){if(Ou(e))return dv.decorate_20223_(t,e);if(es(e)){Du(t,e,dv);return}return Ey(t)?t:yo(t)?Ce.object(t,e,n):Array.isArray(t)?Ce.array(t,e):Da(t)?Ce.map(t,e):uo(t)?Ce.set(t,e):typeof t=="object"&&t!==null?t:Ce.box(t,e)}tA(vA,gA);var lL={box:function(e,n){var i=xf(n);return new lr(e,Af(i),i.name,!0,i.equals)},array:function(e,n){var i=xf(n);return(ue.useProxies===!1||i.proxy===!1?oU:KL)(e,Af(i),i.name)},map:function(e,n){var i=xf(n);return new BA(e,Af(i),i.name)},set:function(e,n){var i=xf(n);return new $A(e,Af(i),i.name)},object:function(e,n,i){return Sr(function(){return PA(ue.useProxies===!1||i?.proxy===!1?fs({},i):qL({},i),e,n)})},ref:Ii(iL),shallow:Ii(oL),deep:gA,struct:Ii(rL)},Ce=tA(vA,lL),yA="computed",uL="computed.struct",hv=_y(yA),cL=_y(uL,{equals:wd.structural}),ur=function(e,n){if(Ou(n))return hv.decorate_20223_(e,n);if(es(n))return Du(e,n,hv);if(yo(e))return Ii(_y(yA,e));var i=yo(n)?n:{};return i.get=e,i.name||(i.name=e.name||""),new fi(i)};Object.assign(ur,hv);ur.struct=Ii(cL);var iE,oE,Ed=0,fL=1,dL=(iE=(oE=bd(function(){},"name"))==null?void 0:oE.configurable)!=null?iE:!1,rE={value:"action",configurable:!0,writable:!1,enumerable:!1};function is(t,e,n,i){n===void 0&&(n=!1);function r(){return _A(t,n,e,i||this,arguments)}return r.isMobxAction=!0,r.toString=function(){return e.toString()},dL&&(rE.value=t,Ni(r,"name",rE)),r}function _A(t,e,n,i,r){var a=hL(t,e);try{return n.apply(i,r)}catch(l){throw a.error_=l,l}finally{pL(a)}}function hL(t,e,n,i){var r=!1,a=0,l=ue.trackingDerivation,c=!e||!l;$n();var h=ue.allowStateChanges;c&&(cs(),h=Sy(!0));var d=wy(!0),m={runAsAction_:c,prevDerivation_:l,prevAllowStateChanges_:h,prevAllowStateReads_:d,notifySpy_:r,startTime_:a,actionId_:fL++,parentActionId_:Ed};return Ed=m.actionId_,m}function pL(t){Ed!==t.actionId_&&$e(30),Ed=t.parentActionId_,t.error_!==void 0&&(ue.suppressReactionErrors=!0),by(t.prevAllowStateChanges_),su(t.prevAllowStateReads_),Gn(),t.runAsAction_&&mo(t.prevDerivation_),ue.suppressReactionErrors=!1}function Sy(t){var e=ue.allowStateChanges;return ue.allowStateChanges=t,e}function by(t){ue.allowStateChanges=t}var lr=(function(t){function e(i,r,a,l,c){var h;return a===void 0&&(a="ObservableValue"),c===void 0&&(c=wd.default),h=t.call(this,a)||this,h.enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=r,h.name_=a,h.equals=c,h.value_=r(i,void 0,a),h}uA(e,t);var n=e.prototype;return n.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.set=function(r){this.value_,r=this.prepareNewValue_(r),r!==ue.UNCHANGED&&this.setNewValue_(r)},n.prepareNewValue_=function(r){if(Un(this)){var a=Fn(this,{object:this,type:Di,newValue:r});if(!a)return ue.UNCHANGED;r=a.newValue}return r=this.enhancer(r,this.value_,this.name_),this.equals(this.value_,r)?ue.UNCHANGED:r},n.setNewValue_=function(r){var a=this.value_;this.value_=r,this.reportChanged(),si(this)&&ai(this,{type:Di,object:this,newValue:r,oldValue:a})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(r){return Lu(this,r)},n.observe_=function(r,a){return a&&r({observableKind:"value",debugObjectName:this.name_,object:this,type:Di,newValue:this.value_,oldValue:void 0}),Uu(this,r)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return lA(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e})(vr),mL=gr("ObservableValue",lr),fi=(function(){function t(n){this.dependenciesState_=qe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=qe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Td(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Cd.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||$e(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=is("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?wd.structural:wd.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){SL(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.get=function(){if(this.isComputing&&$e(32,this.name_,this.derivation),ue.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)pv(this)&&(this.warnAboutUntrackedRead_(),$n(),this.value_=this.computeValue_(!1),Gn());else if(xA(this),pv(this)){var i=ue.trackingContext;this.keepAlive_&&!i&&(ue.trackingContext=this),this.trackAndCompute()&&_L(this),ue.trackingContext=i}var r=this.value_;if(nd(r))throw r.cause;return r},e.set=function(i){if(this.setter_){this.isRunningSetter&&$e(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,i)}finally{this.isRunningSetter=!1}}else $e(34,this.name_)},e.trackAndCompute=function(){var i=this.value_,r=this.dependenciesState_===qe.NOT_TRACKING_,a=this.computeValue_(!0),l=r||nd(i)||nd(a)||!this.equals_(i,a);return l&&(this.value_=a),l},e.computeValue_=function(i){this.isComputing=!0;var r=Sy(!1),a;if(i)a=SA(this,this.derivation,this.scope_);else if(ue.disableErrorBoundaries===!0)a=this.derivation.call(this.scope_);else try{a=this.derivation.call(this.scope_)}catch(l){a=new Td(l)}return by(r),this.isComputing=!1,a},e.suspend_=function(){this.keepAlive_||(mv(this),this.value_=void 0)},e.observe_=function(i,r){var a=this,l=!0,c=void 0;return ML(function(){var h=a.get();if(!l||r){var d=cs();i({observableKind:"computed",debugObjectName:a.name_,type:Di,object:a,newValue:h,oldValue:c}),mo(d)}l=!1,c=h})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return lA(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},Oa(t,[{key:"isComputing",get:function(){return Sn(this.flags_,t.isComputingMask_)},set:function(i){this.flags_=bn(this.flags_,t.isComputingMask_,i)}},{key:"isRunningSetter",get:function(){return Sn(this.flags_,t.isRunningSetterMask_)},set:function(i){this.flags_=bn(this.flags_,t.isRunningSetterMask_,i)}},{key:"isBeingObserved",get:function(){return Sn(this.flags_,t.isBeingObservedMask_)},set:function(i){this.flags_=bn(this.flags_,t.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return Sn(this.flags_,t.isPendingUnobservationMask_)},set:function(i){this.flags_=bn(this.flags_,t.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return Sn(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=bn(this.flags_,t.diffValueMask_,i===1)}}])})();fi.isComputingMask_=1;fi.isRunningSetterMask_=2;fi.isBeingObservedMask_=4;fi.isPendingUnobservationMask_=8;fi.diffValueMask_=16;var Pu=gr("ComputedValue",fi),qe;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(qe||(qe={}));var Cd;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(Cd||(Cd={}));var Td=function(e){this.cause=void 0,this.cause=e};function nd(t){return t instanceof Td}function pv(t){switch(t.dependenciesState_){case qe.UP_TO_DATE_:return!1;case qe.NOT_TRACKING_:case qe.STALE_:return!0;case qe.POSSIBLY_STALE_:{for(var e=wy(!0),n=cs(),i=t.observing_,r=i.length,a=0;a<r;a++){var l=i[a];if(Pu(l)){if(ue.disableErrorBoundaries)l.get();else try{l.get()}catch{return mo(n),su(e),!0}if(t.dependenciesState_===qe.STALE_)return mo(n),su(e),!0}}return wA(t),mo(n),su(e),!1}}}function SA(t,e,n){var i=wy(!0);wA(t),t.newObserving_=new Array(t.runId_===0?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++ue.runId;var r=ue.trackingDerivation;ue.trackingDerivation=t,ue.inBatch++;var a;if(ue.disableErrorBoundaries===!0)a=e.call(n);else try{a=e.call(n)}catch(l){a=new Td(l)}return ue.inBatch--,ue.trackingDerivation=r,gL(t),su(i),a}function gL(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,i=qe.UP_TO_DATE_,r=0,a=t.unboundDepsCount_,l=0;l<a;l++){var c=n[l];c.diffValue===0&&(c.diffValue=1,r!==l&&(n[r]=c),r++),c.dependenciesState_>i&&(i=c.dependenciesState_)}for(n.length=r,t.newObserving_=null,a=e.length;a--;){var h=e[a];h.diffValue===0&&CA(h,t),h.diffValue=0}for(;r--;){var d=n[r];d.diffValue===1&&(d.diffValue=0,yL(d,t))}i!==qe.UP_TO_DATE_&&(t.dependenciesState_=i,t.onBecomeStale_())}function mv(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)CA(e[n],t);t.dependenciesState_=qe.NOT_TRACKING_}function bA(t){var e=cs();try{return t()}finally{mo(e)}}function cs(){var t=ue.trackingDerivation;return ue.trackingDerivation=null,t}function mo(t){ue.trackingDerivation=t}function wy(t){var e=ue.allowStateReads;return ue.allowStateReads=t,e}function su(t){ue.allowStateReads=t}function wA(t){if(t.dependenciesState_!==qe.UP_TO_DATE_){t.dependenciesState_=qe.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=qe.UP_TO_DATE_}}var id=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},od=!0,EA=!1,ue=(function(){var t=rh();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(od=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new id().version&&(od=!1),od?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new id):(setTimeout(function(){EA||$e(35)},1),new id)})();function vL(){if((ue.pendingReactions.length||ue.inBatch||ue.isRunningReactions)&&$e(36),EA=!0,od){var t=rh();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),ue=new id}}function yL(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function CA(t,e){t.observers_.delete(e),t.observers_.size===0&&TA(t)}function TA(t){t.isPendingUnobservation===!1&&(t.isPendingUnobservation=!0,ue.pendingUnobservations.push(t))}function $n(){ue.inBatch++}function Gn(){if(--ue.inBatch===0){RA();for(var t=ue.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof fi&&n.suspend_())}ue.pendingUnobservations=[]}}function xA(t){var e=ue.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&ue.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(t.observers_.size===0&&ue.inBatch>0&&TA(t),!1)}function AA(t){t.lowestObserverState_!==qe.STALE_&&(t.lowestObserverState_=qe.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===qe.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=qe.STALE_}))}function _L(t){t.lowestObserverState_!==qe.STALE_&&(t.lowestObserverState_=qe.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===qe.POSSIBLY_STALE_?e.dependenciesState_=qe.STALE_:e.dependenciesState_===qe.UP_TO_DATE_&&(t.lowestObserverState_=qe.UP_TO_DATE_)}))}function SL(t){t.lowestObserverState_===qe.UP_TO_DATE_&&(t.lowestObserverState_=qe.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===qe.UP_TO_DATE_&&(e.dependenciesState_=qe.POSSIBLY_STALE_,e.onBecomeStale_())}))}var _o=(function(){function t(n,i,r,a){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=qe.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Cd.NONE,this.name_=n,this.onInvalidate_=i,this.errorHandler_=r,this.requiresObservable_=a}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,ue.pendingReactions.push(this),RA())},e.runReaction_=function(){if(!this.isDisposed){$n(),this.isScheduled=!1;var i=ue.trackingContext;if(ue.trackingContext=this,pv(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(r){this.reportExceptionInDerivation_(r)}}ue.trackingContext=i,Gn()}},e.track=function(i){if(!this.isDisposed){$n(),this.isRunning=!0;var r=ue.trackingContext;ue.trackingContext=this;var a=SA(this,i,void 0);ue.trackingContext=r,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&mv(this),nd(a)&&this.reportExceptionInDerivation_(a.cause),Gn()}},e.reportExceptionInDerivation_=function(i){var r=this;if(this.errorHandler_){this.errorHandler_(i,this);return}if(ue.disableErrorBoundaries)throw i;var a="[mobx] uncaught error in '"+this+"'";ue.suppressReactionErrors||console.error(a,i),ue.globalReactionErrorHandlers.forEach(function(l){return l(i,r)})},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||($n(),mv(this),Gn()))},e.getDisposer_=function(i){var r=this,a=function l(){r.dispose(),i==null||i.removeEventListener==null||i.removeEventListener("abort",l)};return i==null||i.addEventListener==null||i.addEventListener("abort",a),a[Te]=this,"dispose"in Symbol&&typeof Symbol.dispose=="symbol"&&(a[Symbol.dispose]=a),a},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(i){},Oa(t,[{key:"isDisposed",get:function(){return Sn(this.flags_,t.isDisposedMask_)},set:function(i){this.flags_=bn(this.flags_,t.isDisposedMask_,i)}},{key:"isScheduled",get:function(){return Sn(this.flags_,t.isScheduledMask_)},set:function(i){this.flags_=bn(this.flags_,t.isScheduledMask_,i)}},{key:"isTrackPending",get:function(){return Sn(this.flags_,t.isTrackPendingMask_)},set:function(i){this.flags_=bn(this.flags_,t.isTrackPendingMask_,i)}},{key:"isRunning",get:function(){return Sn(this.flags_,t.isRunningMask_)},set:function(i){this.flags_=bn(this.flags_,t.isRunningMask_,i)}},{key:"diffValue",get:function(){return Sn(this.flags_,t.diffValueMask_)?1:0},set:function(i){this.flags_=bn(this.flags_,t.diffValueMask_,i===1)}}])})();_o.isDisposedMask_=1;_o.isScheduledMask_=2;_o.isTrackPendingMask_=4;_o.isRunningMask_=8;_o.diffValueMask_=16;var bL=100,gv=function(e){return e()};function RA(){ue.inBatch>0||ue.isRunningReactions||gv(wL)}function wL(){ue.isRunningReactions=!0;for(var t=ue.pendingReactions,e=0;t.length>0;){++e===bL&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}ue.isRunningReactions=!1}var xd=gr("Reaction",_o);function EL(t){var e=gv;gv=function(i){return t(function(){return e(i)})}}function au(){return!1}function CL(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var MA="action",TL="action.bound",NA="autoAction",xL="autoAction.bound",IA="<unnamed action>",vv=ku(MA),AL=ku(TL,{bound:!0}),yv=ku(NA,{autoAction:!0}),RL=ku(xL,{autoAction:!0,bound:!0});function DA(t){var e=function(i,r){if(ci(i))return is(i.name||IA,i,t);if(ci(r))return is(i,r,t);if(Ou(r))return(t?yv:vv).decorate_20223_(i,r);if(es(r))return Du(i,r,t?yv:vv);if(es(i))return Ii(ku(t?NA:MA,{name:i,autoAction:t}))};return e}var ut=DA(!1);Object.assign(ut,vv);var mu=DA(!0);Object.assign(mu,yv);ut.bound=Ii(AL);mu.bound=Ii(RL);function we(t){return _A(t.name||IA,!1,t,this,void 0)}function Ta(t){return ci(t)&&t.isMobxAction===!0}function ML(t,e){var n,i,r,a;e===void 0&&(e=nA);var l=(n=(i=e)==null?void 0:i.name)!=null?n:"Autorun",c=!e.scheduler&&!e.delay,h;if(c)h=new _o(l,function(){this.track(y)},e.onError,e.requiresObservable);else{var d=IL(e),m=!1;h=new _o(l,function(){m||(m=!0,d(function(){m=!1,h.isDisposed||h.track(y)}))},e.onError,e.requiresObservable)}function y(){t(h)}return(r=e)!=null&&(r=r.signal)!=null&&r.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var NL=function(e){return e()};function IL(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:NL}var DL="onBO",OL="onBUO";function kL(t,e,n){return kA(DL,t,e,n)}function OA(t,e,n){return kA(OL,t,e,n)}function kA(t,e,n,i){var r=Md(e),a=ci(i)?i:n,l=t+"L";return r[l]?r[l].add(a):r[l]=new Set([a]),function(){var c=r[l];c&&(c.delete(a),c.size===0&&delete r[l])}}var PL="never",Rf="always",LL="observed";function UL(t){t.isolateGlobalState===!0&&vL();var e=t.useProxies,n=t.enforceActions;if(e!==void 0&&(ue.useProxies=e===Rf?!0:e===PL?!1:typeof Proxy<"u"),e==="ifavailable"&&(ue.verifyProxies=!0),n!==void 0){var i=n===Rf?Rf:n===LL;ue.enforceActions=i,ue.allowStateChanges=!(i===!0||i===Rf)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(r){r in t&&(ue[r]=!!t[r])}),ue.allowStateReads=!ue.observableRequiresReaction,t.reactionScheduler&&EL(t.reactionScheduler)}function PA(t,e,n,i){var r=SP(e);return Sr(function(){var a=fs(t,i)[Te];Ca(r).forEach(function(l){a.extend_(l,r[l],n&&l in n?n[l]:!0)})}),t}function FL(t,e){return LA(Md(t,e))}function LA(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=BL(t.observing_).map(LA)),e}function BL(t){return Array.from(new Set(t))}var $L=0;function UA(){this.message="FLOW_CANCELLED"}UA.prototype=Object.create(Error.prototype);var dg=dA("flow"),GL=dA("flow.bound",{bound:!0}),xa=Object.assign(function(e,n){if(Ou(n))return dg.decorate_20223_(e,n);if(es(n))return Du(e,n,dg);var i=e,r=i.name||"<unnamed flow>",a=function(){var c=this,h=arguments,d=++$L,m=ut(r+" - runid: "+d+" - init",i).apply(c,h),y,S=void 0,w=new Promise(function(T,x){var A=0;y=x;function M(D){S=void 0;var L;try{L=ut(r+" - runid: "+d+" - yield "+A++,m.next).call(m,D)}catch(U){return x(U)}N(L)}function I(D){S=void 0;var L;try{L=ut(r+" - runid: "+d+" - yield "+A++,m.throw).call(m,D)}catch(U){return x(U)}N(L)}function N(D){if(ci(D?.then)){D.then(N,x);return}return D.done?T(D.value):(S=Promise.resolve(D.value),S.then(M,I))}M(void 0)});return w.cancel=ut(r+" - runid: "+d+" - cancel",function(){try{S&&sE(S);var T=m.return(void 0),x=Promise.resolve(T.value);x.then(pa,pa),sE(x),y(new UA)}catch(A){y(A)}}),w};return a.isMobXFlow=!0,a},dg);xa.bound=Ii(GL);function sE(t){ci(t.cancel)&&t.cancel()}function gu(t){return t?.isMobXFlow===!0}function HL(t,e){return t?Bu(t)||!!t[Te]||yy(t)||xd(t)||Pu(t):!1}function Ey(t){return HL(t)}function VL(t){if(Bu(t))return t[Te].ownKeys_();$e(38)}function Mf(t,e,n){return t.set(e,n),n}function ua(t,e){if(t==null||typeof t!="object"||t instanceof Date||!Ey(t))return t;if(mL(t)||Pu(t))return ua(t.get(),e);if(e.has(t))return e.get(t);if(Fu(t)){var n=Mf(e,t,new Array(t.length));return t.forEach(function(l,c){n[c]=ua(l,e)}),n}if(ii(t)){var i=Mf(e,t,new Set);return t.forEach(function(l){i.add(ua(l,e))}),i}if(_r(t)){var r=Mf(e,t,new Map);return t.forEach(function(l,c){r.set(c,ua(l,e))}),r}else{var a=Mf(e,t,{});return VL(t).forEach(function(l){Nu.propertyIsEnumerable.call(t,l)&&(a[l]=ua(t[l],e))}),a}}function So(t,e){return ua(t,new Map)}function co(t,e){e===void 0&&(e=void 0),$n();try{return t.apply(e)}finally{Gn()}}function ea(t){return t[Te]}var zL={has:function(e,n){return ea(e).has_(n)},get:function(e,n){return ea(e).get_(n)},set:function(e,n,i){var r;return es(n)?(r=ea(e).set_(n,i,!0))!=null?r:!0:!1},deleteProperty:function(e,n){var i;return es(n)?(i=ea(e).delete_(n,!0))!=null?i:!0:!1},defineProperty:function(e,n,i){var r;return(r=ea(e).defineProperty_(n,i))!=null?r:!0},ownKeys:function(e){return ea(e).ownKeys_()},preventExtensions:function(e){$e(13)}};function qL(t,e){var n,i;return iA(),t=fs(t,e),(i=(n=t[Te]).proxy_)!=null?i:n.proxy_=new Proxy(t,zL)}function Un(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function Lu(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),oA(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function Fn(t,e){var n=cs();try{for(var i=[].concat(t.interceptors_||[]),r=0,a=i.length;r<a&&(e=i[r](e),e&&!e.type&&$e(14),!!e);r++);return e}finally{mo(n)}}function si(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function Uu(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),oA(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function ai(t,e){var n=cs(),i=t.changeListeners_;if(i){i=i.slice();for(var r=0,a=i.length;r<a;r++)i[r](e);mo(n)}}function yr(t,e,n){return Sr(function(){var i,r=fs(t,n)[Te];(i=e)!=null||(e=TP(t)),Ca(e).forEach(function(a){return r.make_(a,e[a])})}),t}var hg=Symbol("mobx-keys");function ka(t,e,n){return yo(t)?PA(t,t,e,n):(Sr(function(){var i=fs(t,n)[Te];if(!t[hg]){var r=Object.getPrototypeOf(t),a=new Set([].concat(Ca(t),Ca(r)));a.delete("constructor"),a.delete(Te),Iu(r,hg,a)}t[hg].forEach(function(l){return i.make_(l,e&&l in e?e[l]:!0)})}),t)}var aE="splice",Di="update",jL=1e4,JL={get:function(e,n){var i=e[Te];return n===Te?i:n==="length"?i.getArrayLength_():typeof n=="string"&&!isNaN(n)?i.get_(parseInt(n)):po(Ad,n)?Ad[n]:e[n]},set:function(e,n,i){var r=e[Te];return n==="length"&&r.setArrayLength_(i),typeof n=="symbol"||isNaN(n)?e[n]=i:r.set_(parseInt(n),i),!0},preventExtensions:function(){$e(15)}},Cy=(function(){function t(n,i,r,a){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=a,this.atom_=new vr(n),this.enhancer_=function(l,c){return i(l,c,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.dehanceValues_=function(i){return this.dehancer!==void 0&&i.length>0?i.map(this.dehancer):i},e.intercept_=function(i){return Lu(this,i)},e.observe_=function(i,r){return r===void 0&&(r=!1),r&&i({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Uu(this,i)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(i){(typeof i!="number"||isNaN(i)||i<0)&&$e("Out of range: "+i);var r=this.values_.length;if(i!==r)if(i>r){for(var a=new Array(i-r),l=0;l<i-r;l++)a[l]=void 0;this.spliceWithArray_(r,0,a)}else this.spliceWithArray_(i,r-i)},e.updateArrayLength_=function(i,r){i!==this.lastKnownLength_&&$e(16),this.lastKnownLength_+=r,this.legacyMode_&&r>0&&zA(i+r+1)},e.spliceWithArray_=function(i,r,a){var l=this;this.atom_;var c=this.values_.length;if(i===void 0?i=0:i>c?i=c:i<0&&(i=Math.max(0,c+i)),arguments.length===1?r=c-i:r==null?r=0:r=Math.max(0,Math.min(r,c-i)),a===void 0&&(a=cv),Un(this)){var h=Fn(this,{object:this.proxy_,type:aE,index:i,removedCount:r,added:a});if(!h)return cv;r=h.removedCount,a=h.added}if(a=a.length===0?a:a.map(function(y){return l.enhancer_(y,void 0)}),this.legacyMode_){var d=a.length-r;this.updateArrayLength_(c,d)}var m=this.spliceItemsIntoValues_(i,r,a);return(r!==0||a.length!==0)&&this.notifyArraySplice_(i,a,m),this.dehanceValues_(m)},e.spliceItemsIntoValues_=function(i,r,a){if(a.length<jL){var l;return(l=this.values_).splice.apply(l,[i,r].concat(a))}else{var c=this.values_.slice(i,i+r),h=this.values_.slice(i+r);this.values_.length+=a.length-r;for(var d=0;d<a.length;d++)this.values_[i+d]=a[d];for(var m=0;m<h.length;m++)this.values_[i+a.length+m]=h[m];return c}},e.notifyArrayChildUpdate_=function(i,r,a){var l=!this.owned_&&au(),c=si(this),h=c||l?{observableKind:"array",object:this.proxy_,type:Di,debugObjectName:this.atom_.name_,index:i,newValue:r,oldValue:a}:null;this.atom_.reportChanged(),c&&ai(this,h)},e.notifyArraySplice_=function(i,r,a){var l=!this.owned_&&au(),c=si(this),h=c||l?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:aE,index:i,removed:a,added:r,removedCount:a.length,addedCount:r.length}:null;this.atom_.reportChanged(),c&&ai(this,h)},e.get_=function(i){if(this.legacyMode_&&i>=this.values_.length){console.warn("[mobx] Out of bounds read: "+i);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[i])},e.set_=function(i,r){var a=this.values_;if(this.legacyMode_&&i>a.length&&$e(17,i,a.length),i<a.length){this.atom_;var l=a[i];if(Un(this)){var c=Fn(this,{type:Di,object:this.proxy_,index:i,newValue:r});if(!c)return;r=c.newValue}r=this.enhancer_(r,l);var h=r!==l;h&&(a[i]=r,this.notifyArrayChildUpdate_(i,r,l))}else{for(var d=new Array(i+1-a.length),m=0;m<d.length-1;m++)d[m]=void 0;d[d.length-1]=r,this.spliceWithArray_(a.length,0,d)}},t})();function KL(t,e,n,i){return n===void 0&&(n="ObservableArray"),i===void 0&&(i=!1),iA(),Sr(function(){var r=new Cy(n,e,i,!1);sA(r.values_,Te,r);var a=new Proxy(r.values_,JL);return r.proxy_=a,t&&t.length&&r.spliceWithArray_(0,0,t),a})}var Ad={clear:function(){return this.splice(0)},replace:function(e){var n=this[Te];return n.spliceWithArray_(0,n.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];var l=this[Te];switch(arguments.length){case 0:return[];case 1:return l.spliceWithArray_(e);case 2:return l.spliceWithArray_(e,n)}return l.spliceWithArray_(e,n,r)},spliceWithArray:function(e,n,i){return this[Te].spliceWithArray_(e,n,i)},push:function(){for(var e=this[Te],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,i),e.values_.length},pop:function(){return this.splice(Math.max(this[Te].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Te],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(0,0,i),e.values_.length},reverse:function(){return ue.trackingDerivation&&$e(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ue.trackingDerivation&&$e(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var n=this[Te],i=n.dehanceValues_(n.values_).indexOf(e);return i>-1?(this.splice(i,1),!0):!1}};rt("at",Cn);rt("concat",Cn);rt("flat",Cn);rt("includes",Cn);rt("indexOf",Cn);rt("join",Cn);rt("lastIndexOf",Cn);rt("slice",Cn);rt("toString",Cn);rt("toLocaleString",Cn);rt("toSorted",Cn);rt("toSpliced",Cn);rt("with",Cn);rt("every",pi);rt("filter",pi);rt("find",pi);rt("findIndex",pi);rt("findLast",pi);rt("findLastIndex",pi);rt("flatMap",pi);rt("forEach",pi);rt("map",pi);rt("some",pi);rt("toReversed",pi);rt("reduce",FA);rt("reduceRight",FA);function rt(t,e){typeof Array.prototype[t]=="function"&&(Ad[t]=e(t))}function Cn(t){return function(){var e=this[Te];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function pi(t){return function(e,n){var i=this,r=this[Te];r.atom_.reportObserved();var a=r.dehanceValues_(r.values_);return a[t](function(l,c){return e.call(n,l,c,i)})}}function FA(t){return function(){var e=this,n=this[Te];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(a,l,c){return r(a,l,c,e)},i[t].apply(i,arguments)}}var YL=gr("ObservableArrayAdministration",Cy);function Fu(t){return sh(t)&&YL(t[Te])}var XL={},rr="add",Rd="delete",BA=(function(){function t(n,i,r){var a=this;i===void 0&&(i=ns),r===void 0&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Te]=XL,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=i,this.name_=r,ci(Map)||$e(18),Sr(function(){a.keysAtom_=cA("ObservableMap.keys()"),a.data_=new Map,a.hasMap_=new Map,n&&a.merge(n)})}var e=t.prototype;return e.has_=function(i){return this.data_.has(i)},e.has=function(i){var r=this;if(!ue.trackingDerivation)return this.has_(i);var a=this.hasMap_.get(i);if(!a){var l=a=new lr(this.has_(i),ah,"ObservableMap.key?",!1);this.hasMap_.set(i,l),OA(l,function(){return r.hasMap_.delete(i)})}return a.get()},e.set=function(i,r){var a=this.has_(i);if(Un(this)){var l=Fn(this,{type:a?Di:rr,object:this,newValue:r,name:i});if(!l)return this;r=l.newValue}return a?this.updateValue_(i,r):this.addValue_(i,r),this},e.delete=function(i){var r=this;if(this.keysAtom_,Un(this)){var a=Fn(this,{type:Rd,object:this,name:i});if(!a)return!1}if(this.has_(i)){var l=au(),c=si(this),h=c||l?{observableKind:"map",debugObjectName:this.name_,type:Rd,object:this,oldValue:this.data_.get(i).value_,name:i}:null;return co(function(){var d;r.keysAtom_.reportChanged(),(d=r.hasMap_.get(i))==null||d.setNewValue_(!1);var m=r.data_.get(i);m.setNewValue_(void 0),r.data_.delete(i)}),c&&ai(this,h),!0}return!1},e.updateValue_=function(i,r){var a=this.data_.get(i);if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var l=au(),c=si(this),h=c||l?{observableKind:"map",debugObjectName:this.name_,type:Di,object:this,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),c&&ai(this,h)}},e.addValue_=function(i,r){var a=this;this.keysAtom_,co(function(){var d,m=new lr(r,a.enhancer_,"ObservableMap.key",!1);a.data_.set(i,m),r=m.value_,(d=a.hasMap_.get(i))==null||d.setNewValue_(!0),a.keysAtom_.reportChanged()});var l=au(),c=si(this),h=c||l?{observableKind:"map",debugObjectName:this.name_,type:rr,object:this,name:i,newValue:r}:null;c&&ai(this,h)},e.get=function(i){return this.has(i)?this.dehanceValue_(this.data_.get(i).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var i=this,r=this.keys();return lE({next:function(){var l=r.next(),c=l.done,h=l.value;return{done:c,value:c?void 0:i.get(h)}}})},e.entries=function(){var i=this,r=this.keys();return lE({next:function(){var l=r.next(),c=l.done,h=l.value;return{done:c,value:c?void 0:[h,i.get(h)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(i,r){for(var a=ma(this),l;!(l=a()).done;){var c=l.value,h=c[0],d=c[1];i.call(r,d,h,this)}},e.merge=function(i){var r=this;return _r(i)&&(i=new Map(i)),co(function(){yo(i)?_P(i).forEach(function(a){return r.set(a,i[a])}):Array.isArray(i)?i.forEach(function(a){var l=a[0],c=a[1];return r.set(l,c)}):Da(i)?(yP(i)||$e(19,i),i.forEach(function(a,l){return r.set(l,a)})):i!=null&&$e(20,i)}),this},e.clear=function(){var i=this;co(function(){bA(function(){for(var r=ma(i.keys()),a;!(a=r()).done;){var l=a.value;i.delete(l)}})})},e.replace=function(i){var r=this;return co(function(){for(var a=WL(i),l=new Map,c=!1,h=ma(r.data_.keys()),d;!(d=h()).done;){var m=d.value;if(!a.has(m)){var y=r.delete(m);if(y)c=!0;else{var S=r.data_.get(m);l.set(m,S)}}}for(var w=ma(a.entries()),T;!(T=w()).done;){var x=T.value,A=x[0],M=x[1],I=r.data_.has(A);if(r.set(A,M),r.data_.has(A)){var N=r.data_.get(A);l.set(A,N),I||(c=!0)}}if(!c)if(r.data_.size!==l.size)r.keysAtom_.reportChanged();else for(var D=r.data_.keys(),L=l.keys(),U=D.next(),O=L.next();!U.done;){if(U.value!==O.value){r.keysAtom_.reportChanged();break}U=D.next(),O=L.next()}r.data_=l}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(i,r){return Uu(this,i)},e.intercept_=function(i){return Lu(this,i)},Oa(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])})(),_r=gr("ObservableMap",BA);function lE(t){return t[Symbol.toStringTag]="MapIterator",xy(t)}function WL(t){if(Da(t)||_r(t))return t;if(Array.isArray(t))return new Map(t);if(yo(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}else return $e(21,t)}var QL={},$A=(function(){function t(n,i,r){var a=this;i===void 0&&(i=ns),r===void 0&&(r="ObservableSet"),this.name_=void 0,this[Te]=QL,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,ci(Set)||$e(22),this.enhancer_=function(l,c){return i(l,c,r)},Sr(function(){a.atom_=cA(a.name_),n&&a.replace(n)})}var e=t.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.clear=function(){var i=this;co(function(){bA(function(){for(var r=ma(i.data_.values()),a;!(a=r()).done;){var l=a.value;i.delete(l)}})})},e.forEach=function(i,r){for(var a=ma(this),l;!(l=a()).done;){var c=l.value;i.call(r,c,c,this)}},e.add=function(i){var r=this;if(this.atom_,Un(this)){var a=Fn(this,{type:rr,object:this,newValue:i});if(!a)return this;i=a.newValue}if(!this.has(i)){co(function(){r.data_.add(r.enhancer_(i,void 0)),r.atom_.reportChanged()});var l=!1,c=si(this),h=c||l?{observableKind:"set",debugObjectName:this.name_,type:rr,object:this,newValue:i}:null;c&&ai(this,h)}return this},e.delete=function(i){var r=this;if(Un(this)){var a=Fn(this,{type:Rd,object:this,oldValue:i});if(!a)return!1}if(this.has(i)){var l=!1,c=si(this),h=c||l?{observableKind:"set",debugObjectName:this.name_,type:Rd,object:this,oldValue:i}:null;return co(function(){r.atom_.reportChanged(),r.data_.delete(i)}),c&&ai(this,h),!0}return!1},e.has=function(i){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(i))},e.entries=function(){var i=this.values();return uE({next:function(){var a=i.next(),l=a.value,c=a.done;return c?{value:void 0,done:c}:{value:[l,l],done:c}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var i=this,r=this.data_.values();return uE({next:function(){var l=r.next(),c=l.value,h=l.done;return h?{value:void 0,done:h}:{value:i.dehanceValue_(c),done:h}}})},e.intersection=function(i){if(uo(i)&&!ii(i))return i.intersection(this);var r=new Set(this);return r.intersection(i)},e.union=function(i){if(uo(i)&&!ii(i))return i.union(this);var r=new Set(this);return r.union(i)},e.difference=function(i){return new Set(this).difference(i)},e.symmetricDifference=function(i){if(uo(i)&&!ii(i))return i.symmetricDifference(this);var r=new Set(this);return r.symmetricDifference(i)},e.isSubsetOf=function(i){return new Set(this).isSubsetOf(i)},e.isSupersetOf=function(i){return new Set(this).isSupersetOf(i)},e.isDisjointFrom=function(i){if(uo(i)&&!ii(i))return i.isDisjointFrom(this);var r=new Set(this);return r.isDisjointFrom(i)},e.replace=function(i){var r=this;return ii(i)&&(i=new Set(i)),co(function(){Array.isArray(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):uo(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):i!=null&&$e("Cannot initialize set from "+i)}),this},e.observe_=function(i,r){return Uu(this,i)},e.intercept_=function(i){return Lu(this,i)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},Oa(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])})(),ii=gr("ObservableSet",$A);function uE(t){return t[Symbol.toStringTag]="SetIterator",xy(t)}var cE=Object.create(null),fE="remove",GA=(function(){function t(n,i,r,a){i===void 0&&(i=new Map),a===void 0&&(a=YP),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=i,this.name_=r,this.defaultAnnotation_=a,this.keysAtom_=new vr("ObservableObject.keys"),this.isPlainObject_=yo(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(i){return this.values_.get(i).get()},e.setObservablePropValue_=function(i,r){var a=this.values_.get(i);if(a instanceof fi)return a.set(r),!0;if(Un(this)){var l=Fn(this,{type:Di,object:this.proxy_||this.target_,name:i,newValue:r});if(!l)return null;r=l.newValue}if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var c=si(this),h=!1,d=c||h?{type:Di,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),c&&ai(this,d)}return!0},e.get_=function(i){return ue.trackingDerivation&&!po(this.target_,i)&&this.has_(i),this.target_[i]},e.set_=function(i,r,a){return a===void 0&&(a=!1),po(this.target_,i)?this.values_.has(i)?this.setObservablePropValue_(i,r):a?Reflect.set(this.target_,i,r):(this.target_[i]=r,!0):this.extend_(i,{value:r,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,a)},e.has_=function(i){if(!ue.trackingDerivation)return i in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var r=this.pendingKeys_.get(i);return r||(r=new lr(i in this.target_,ah,"ObservableObject.key?",!1),this.pendingKeys_.set(i,r)),r.get()},e.make_=function(i,r){if(r===!0&&(r=this.defaultAnnotation_),r!==!1){if(!(i in this.target_)){var a;if((a=this.target_[Ti])!=null&&a[i])return;$e(1,r.annotationType_,this.name_+"."+i.toString())}for(var l=this.target_;l&&l!==Nu;){var c=bd(l,i);if(c){var h=r.make_(this,i,c,l);if(h===0)return;if(h===1)break}l=Object.getPrototypeOf(l)}hE(this,r,i)}},e.extend_=function(i,r,a,l){if(l===void 0&&(l=!1),a===!0&&(a=this.defaultAnnotation_),a===!1)return this.defineProperty_(i,r,l);var c=a.extend_(this,i,r,l);return c&&hE(this,a,i),c},e.defineProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{$n();var l=this.delete_(i);if(!l)return l;if(Un(this)){var c=Fn(this,{object:this.proxy_||this.target_,name:i,type:rr,newValue:r.value});if(!c)return null;var h=c.newValue;r.value!==h&&(r=ts({},r,{value:h}))}if(a){if(!Reflect.defineProperty(this.target_,i,r))return!1}else Ni(this.target_,i,r);this.notifyPropertyAddition_(i,r.value)}finally{Gn()}return!0},e.defineObservableProperty_=function(i,r,a,l){l===void 0&&(l=!1),this.keysAtom_;try{$n();var c=this.delete_(i);if(!c)return c;if(Un(this)){var h=Fn(this,{object:this.proxy_||this.target_,name:i,type:rr,newValue:r});if(!h)return null;r=h.newValue}var d=dE(i),m={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:d.get,set:d.set};if(l){if(!Reflect.defineProperty(this.target_,i,m))return!1}else Ni(this.target_,i,m);var y=new lr(r,a,"ObservableObject.key",!1);this.values_.set(i,y),this.notifyPropertyAddition_(i,y.value_)}finally{Gn()}return!0},e.defineComputedProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{$n();var l=this.delete_(i);if(!l)return l;if(Un(this)){var c=Fn(this,{object:this.proxy_||this.target_,name:i,type:rr,newValue:void 0});if(!c)return null}r.name||(r.name="ObservableObject.key"),r.context=this.proxy_||this.target_;var h=dE(i),d={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,i,d))return!1}else Ni(this.target_,i,d);this.values_.set(i,new fi(r)),this.notifyPropertyAddition_(i,void 0)}finally{Gn()}return!0},e.delete_=function(i,r){if(r===void 0&&(r=!1),this.keysAtom_,!po(this.target_,i))return!0;if(Un(this)){var a=Fn(this,{object:this.proxy_||this.target_,name:i,type:fE});if(!a)return null}try{var l;$n();var c=si(this),h=!1,d=this.values_.get(i),m=void 0;if(!d&&(c||h)){var y;m=(y=bd(this.target_,i))==null?void 0:y.value}if(r){if(!Reflect.deleteProperty(this.target_,i))return!1}else delete this.target_[i];if(d&&(this.values_.delete(i),d instanceof lr&&(m=d.value_),AA(d)),this.keysAtom_.reportChanged(),(l=this.pendingKeys_)==null||(l=l.get(i))==null||l.set(i in this.target_),c||h){var S={type:fE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:i};c&&ai(this,S)}}finally{Gn()}return!0},e.observe_=function(i,r){return Uu(this,i)},e.intercept_=function(i){return Lu(this,i)},e.notifyPropertyAddition_=function(i,r){var a,l=si(this),c=!1;if(l||c){var h=l||c?{type:rr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:i,newValue:r}:null;l&&ai(this,h)}(a=this.pendingKeys_)==null||(a=a.get(i))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ca(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t})();function fs(t,e){var n;if(po(t,Te))return t;var i=(n=e?.name)!=null?n:"ObservableObject",r=new GA(t,new Map,String(i),sL(e));return Iu(t,Te,r),t}var ZL=gr("ObservableObjectAdministration",GA);function dE(t){return cE[t]||(cE[t]={get:function(){return this[Te].getObservablePropValue_(t)},set:function(n){return this[Te].setObservablePropValue_(t,n)}})}function Bu(t){return sh(t)?ZL(t[Te]):!1}function hE(t,e,n){var i;(i=t.target_[Ti])==null||delete i[n]}var eU=VA(0),tU=(function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1})(),pg=0,HA=function(){};function nU(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}nU(HA,Array.prototype);var Ty=(function(t){function e(i,r,a,l){var c;return a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),c=t.call(this)||this,Sr(function(){var h=new Cy(a,r,l,!0);h.proxy_=c,sA(c,Te,h),i&&i.length&&c.spliceWithArray(0,0,i),tU&&Object.defineProperty(c,"0",eU)}),c}uA(e,t);var n=e.prototype;return n.concat=function(){this[Te].atom_.reportObserved();for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(c){return Fu(c)?c.slice():c}))},n[Symbol.iterator]=function(){var i=this,r=0;return xy({next:function(){return r<i.length?{value:i[r++],done:!1}:{done:!0,value:void 0}}})},Oa(e,[{key:"length",get:function(){return this[Te].getArrayLength_()},set:function(r){this[Te].setArrayLength_(r)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])})(HA);Object.entries(Ad).forEach(function(t){var e=t[0],n=t[1];e!=="concat"&&Iu(Ty.prototype,e,n)});function VA(t){return{enumerable:!1,configurable:!0,get:function(){return this[Te].get_(t)},set:function(n){this[Te].set_(t,n)}}}function iU(t){Ni(Ty.prototype,""+t,VA(t))}function zA(t){if(t>pg){for(var e=pg;e<t+100;e++)iU(e);pg=t}}zA(1e3);function oU(t,e,n){return new Ty(t,e,n)}function Md(t,e){if(typeof t=="object"&&t!==null){if(Fu(t))return e!==void 0&&$e(23),t[Te].atom_;if(ii(t))return t.atom_;if(_r(t)){if(e===void 0)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||$e(25,e,_v(t)),n}if(Bu(t)){if(!e)return $e(26);var i=t[Te].values_.get(e);return i||$e(27,e,_v(t)),i}if(yy(t)||Pu(t)||xd(t))return t}else if(ci(t)&&xd(t[Te]))return t[Te];$e(28)}function rU(t,e){if(t||$e(29),yy(t)||Pu(t)||xd(t)||_r(t)||ii(t))return t;if(t[Te])return t[Te];$e(24,t)}function _v(t,e){var n;if(e!==void 0)n=Md(t,e);else{if(Ta(t))return t.name;Bu(t)||_r(t)||ii(t)?n=rU(t):n=Md(t)}return n.name_}function Sr(t){var e=cs(),n=Sy(!0);$n();try{return t()}finally{Gn(),by(n),mo(e)}}var pE=Nu.toString;function qA(t,e,n){return n===void 0&&(n=-1),Sv(t,e,n)}function Sv(t,e,n,i,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var a=typeof t;if(a!=="function"&&a!=="object"&&typeof e!="object")return!1;var l=pE.call(t);if(l!==pE.call(e))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=mE(t),e=mE(e);var c=l==="[object Array]";if(!c){if(typeof t!="object"||typeof e!="object")return!1;var h=t.constructor,d=e.constructor;if(h!==d&&!(ci(h)&&h instanceof h&&ci(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),i=i||[],r=r||[];for(var m=i.length;m--;)if(i[m]===t)return r[m]===e;if(i.push(t),r.push(e),c){if(m=t.length,m!==e.length)return!1;for(;m--;)if(!Sv(t[m],e[m],n-1,i,r))return!1}else{var y=Object.keys(t),S=y.length;if(Object.keys(e).length!==S)return!1;for(var w=0;w<S;w++){var T=y[w];if(!(po(e,T)&&Sv(t[T],e[T],n-1,i,r)))return!1}}return i.pop(),r.pop(),!0}function mE(t){return Fu(t)?t.slice():Da(t)||_r(t)||uo(t)||ii(t)?Array.from(t.entries()):t}var gE,sU=((gE=rh().Iterator)==null?void 0:gE.prototype)||{};function xy(t){return t[Symbol.iterator]=aU,Object.assign(Object.create(sU),t)}function aU(){return this}["Symbol","Map","Set"].forEach(function(t){var e=rh();typeof e[t]>"u"&&$e("MobX requires global '"+t+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:CL,extras:{getDebugName:_v},$mobx:Te});if(!E.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!yr)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var uh=eA();const Kr=Mu(uh);function lU(t){t()}function uU(t){t||(t=lU),UL({reactionScheduler:t})}function cU(t){return FL(t)}var fU=1e4,dU=1e4,hU=(function(){function t(e){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(i){i===void 0&&(i=fU),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var r=Date.now();n.registrations.forEach(function(a,l){r-a.registeredAt>=i&&(n.finalize(a.value),n.registrations.delete(l))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n,i){this.registrations.set(i,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,dU))}}),t})(),pU=typeof FinalizationRegistry<"u"?FinalizationRegistry:hU,bv=new pU(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),mg={exports:{}},gg={};var vE;function mU(){if(vE)return gg;vE=1;var t=oh();function e(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function c(y,S){var w=S(),T=i({inst:{value:w,getSnapshot:S}}),x=T[0].inst,A=T[1];return a(function(){x.value=w,x.getSnapshot=S,h(x)&&A({inst:x})},[y,w,S]),r(function(){return h(x)&&A({inst:x}),y(function(){h(x)&&A({inst:x})})},[y]),l(w),w}function h(y){var S=y.getSnapshot;y=y.value;try{var w=S();return!n(y,w)}catch{return!0}}function d(y,S){return S()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return gg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,gg}var yE;function gU(){return yE||(yE=1,mg.exports=mU()),mg.exports}var vU=gU();function _E(t){t.reaction=new _o("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function yU(t,e){e===void 0&&(e="observed");var n=ot.useRef(null);if(!n.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(c){return bv.unregister(i),i.onStoreChange=c,i.reaction||(_E(i),i.stateVersion=Symbol()),function(){var h;i.onStoreChange=null,(h=i.reaction)===null||h===void 0||h.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};n.current=i}var r=n.current;r.reaction||(_E(r),bv.register(n,r,r)),ot.useDebugValue(r.reaction,cU),vU.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getSnapshot);var a,l;if(r.reaction.track(function(){try{a=t()}catch(c){l=c}}),l)throw l;return a}var vg,yg,jA=typeof Symbol=="function"&&Symbol.for,_U=(yg=(vg=Object.getOwnPropertyDescriptor(function(){},"name"))===null||vg===void 0?void 0:vg.configurable)!==null&&yg!==void 0?yg:!1,SE=jA?Symbol.for("react.forward_ref"):typeof E.forwardRef=="function"&&E.forwardRef(function(t){return null}).$$typeof,bE=jA?Symbol.for("react.memo"):typeof E.memo=="function"&&E.memo(function(t){return null}).$$typeof;function He(t,e){var n;if(bE&&t.$$typeof===bE)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=(n=void 0)!==null&&n!==void 0?n:!1,r=t,a=t.displayName||t.name;if(SE&&t.$$typeof===SE&&(i=!0,r=t.render,typeof r!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var l=function(c,h){return yU(function(){return r(c,h)},a)};return l.displayName=t.displayName,_U&&Object.defineProperty(l,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(l.contextTypes=t.contextTypes),i&&(l=E.forwardRef(l)),l=E.memo(l),bU(t,l),l}var SU={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function bU(t,e){Object.keys(t).forEach(function(n){SU[n]||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}var _g;uU(uh.unstable_batchedUpdates);_g=bv.finalizeAllImmediately;var Sg={exports:{}};var wE;function wU(){return wE||(wE=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(a=r(a,i(c)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var c in a)e.call(a,c)&&a[c]&&(l=r(l,c));return l}function r(a,l){return l?a?a+" "+l:a+l:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Sg)),Sg.exports}var EU=wU();const De=Mu(EU);function wv(){return wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wv.apply(null,arguments)}function JA(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function EE(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function CU(t){var e=TU(t,"string");return typeof e=="symbol"?e:String(e)}function TU(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xU(t,e,n){var i=E.useRef(t!==void 0),r=E.useState(e),a=r[0],l=r[1],c=t!==void 0,h=i.current;return i.current=c,!c&&h&&a!==e&&l(e),[c?t:a,E.useCallback(function(d){for(var m=arguments.length,y=new Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];n&&n.apply(void 0,[d].concat(y)),l(d)},[n])]}function Ay(t,e){return Object.keys(e).reduce(function(n,i){var r,a=n,l=a[EE(i)],c=a[i],h=JA(a,[EE(i),i].map(CU)),d=e[i],m=xU(c,l,t[d]),y=m[0],S=m[1];return wv({},h,(r={},r[i]=y,r[d]=S,r))},t)}function Ev(t,e){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ev(t,e)}function AU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ev(t,e)}const RU=["xxl","xl","lg","md","sm","xs"],MU="xs",$u=E.createContext({prefixes:{},breakpoints:RU,minBreakpoint:MU}),{Consumer:iY,Provider:oY}=$u;function Be(t,e){const{prefixes:n}=E.useContext($u);return t||n[e]||e}function KA(){const{breakpoints:t}=E.useContext($u);return t}function YA(){const{minBreakpoint:t}=E.useContext($u);return t}function NU(){const{dir:t}=E.useContext($u);return t==="rtl"}function ch(t){return t&&t.ownerDocument||document}function IU(t){var e=ch(t);return e&&e.defaultView||window}function DU(t,e){return IU(t).getComputedStyle(t,e)}var OU=/([A-Z])/g;function kU(t){return t.replace(OU,"-$1").toLowerCase()}var PU=/^ms-/;function Nf(t){return kU(t).replace(PU,"-ms-")}var LU=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function UU(t){return!!(t&&LU.test(t))}function go(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Nf(e))||DU(t).getPropertyValue(Nf(e));Object.keys(e).forEach(function(r){var a=e[r];!a&&a!==0?t.style.removeProperty(Nf(r)):UU(r)?i+=r+"("+a+") ":n+=Nf(r)+": "+a+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var bg={exports:{}},wg,CE;function FU(){if(CE)return wg;CE=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wg=t,wg}var Eg,TE;function BU(){if(TE)return Eg;TE=1;var t=FU();function e(){}function n(){}return n.resetWarningCache=e,Eg=function(){function i(l,c,h,d,m,y){if(y!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},Eg}var xE;function $U(){return xE||(xE=1,bg.exports=BU()()),bg.exports}var GU=$U();const Cg=Mu(GU),AE={disabled:!1},XA=ot.createContext(null);var HU=function(e){return e.scrollTop},Jl="unmounted",or="exited",ni="entering",fo="entered",vu="exiting",To=(function(t){AU(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var l=r,c=l&&!l.isMounting?i.enter:i.appear,h;return a.appearStatus=null,i.in?c?(h=or,a.appearStatus=ni):h=fo:i.unmountOnExit||i.mountOnEnter?h=Jl:h=or,a.state={status:h},a.nextCallback=null,a}e.getDerivedStateFromProps=function(r,a){var l=r.in;return l&&a.status===Jl?{status:or}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var a=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==ni&&l!==fo&&(a=ni):(l===ni||l===fo)&&(a=vu)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,a,l,c;return a=l=c=r,r!=null&&typeof r!="number"&&(a=r.exit,l=r.enter,c=r.appear!==void 0?r.appear:l),{exit:a,enter:l,appear:c}},n.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===ni){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Kr.findDOMNode(this);l&&HU(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===or&&this.setState({status:Jl})},n.performEnter=function(r){var a=this,l=this.props.enter,c=this.context?this.context.isMounting:r,h=this.props.nodeRef?[c]:[Kr.findDOMNode(this),c],d=h[0],m=h[1],y=this.getTimeouts(),S=c?y.appear:y.enter;if(!r&&!l||AE.disabled){this.safeSetState({status:fo},function(){a.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:ni},function(){a.props.onEntering(d,m),a.onTransitionEnd(S,function(){a.safeSetState({status:fo},function(){a.props.onEntered(d,m)})})})},n.performExit=function(){var r=this,a=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:Kr.findDOMNode(this);if(!a||AE.disabled){this.safeSetState({status:or},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:vu},function(){r.props.onExiting(c),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:or},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},n.setNextCallback=function(r){var a=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,a.nextCallback=null,r(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(r,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:Kr.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=h[0],m=h[1];this.props.addEndListener(d,m)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Jl)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var c=JA(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ot.createElement(XA.Provider,{value:null},typeof l=="function"?l(r,c):ot.cloneElement(ot.Children.only(l),c))},e})(ot.Component);To.contextType=XA;To.propTypes={};function ta(){}To.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ta,onEntering:ta,onEntered:ta,onExit:ta,onExiting:ta,onExited:ta};To.UNMOUNTED=Jl;To.EXITED=or;To.ENTERING=ni;To.ENTERED=fo;To.EXITING=vu;function VU(t){return t.code==="Escape"||t.keyCode===27}function zU(){const t=E.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function Pa(t){if(!t||typeof t=="function")return null;const{major:e}=zU();return e>=19?t.props.ref:t.ref}const fh=!!(typeof window<"u"&&window.document&&window.document.createElement);var Cv=!1,Tv=!1;try{var Tg={get passive(){return Cv=!0},get once(){return Tv=Cv=!0}};fh&&(window.addEventListener("test",Tg,Tg),window.removeEventListener("test",Tg,!0))}catch{}function WA(t,e,n,i){if(i&&typeof i!="boolean"&&!Tv){var r=i.once,a=i.capture,l=n;!Tv&&r&&(l=n.__once||function c(h){this.removeEventListener(e,c,a),n.call(this,h)},n.__once=l),t.addEventListener(e,l,Cv?i:a)}t.addEventListener(e,n,i)}function qU(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function sr(t,e,n,i){return WA(t,e,n,i),function(){qU(t,e,n,i)}}function jU(t,e,n,i){if(i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function JU(t){var e=go(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function KU(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||jU(t,"transitionend",!0)},e+n),a=sr(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),a()}}function YU(t,e,n,i){n==null&&(n=JU(t)||0);var r=KU(t,n,i),a=sr(t,"transitionend",e);return function(){r(),a()}}function RE(t,e){const n=go(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function Ry(t,e){const n=RE(t,"transitionDuration"),i=RE(t,"transitionDelay"),r=YU(t,a=>{a.target===t&&(r(),e(a))},n+i)}function Vl(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function QA(t){t.offsetHeight}const ME=t=>!t||typeof t=="function"?t:e=>{t.current=e};function XU(t,e){const n=ME(t),i=ME(e);return r=>{n&&n(r),i&&i(r)}}function My(t,e){return E.useMemo(()=>XU(t,e),[t,e])}function WU(t){return t&&"setState"in t?Kr.findDOMNode(t):t??null}const dh=ot.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:a,addEndListener:l,children:c,childRef:h,...d},m)=>{const y=E.useRef(null),S=My(y,h),w=U=>{S(WU(U))},T=U=>O=>{U&&y.current&&U(y.current,O)},x=E.useCallback(T(t),[t]),A=E.useCallback(T(e),[e]),M=E.useCallback(T(n),[n]),I=E.useCallback(T(i),[i]),N=E.useCallback(T(r),[r]),D=E.useCallback(T(a),[a]),L=E.useCallback(T(l),[l]);return b.jsx(To,{ref:m,...d,onEnter:x,onEntered:M,onEntering:A,onExit:I,onExited:D,onExiting:N,addEndListener:L,nodeRef:y,children:typeof c=="function"?(U,O)=>c(U,{...O,ref:w}):ot.cloneElement(c,{ref:w})})});dh.displayName="TransitionWrapper";const QU={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ZU(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,i=e[n],r=QU[t];return i+parseInt(go(e,r[0]),10)+parseInt(go(e,r[1]),10)}const eF={[or]:"collapse",[vu]:"collapsing",[ni]:"collapsing",[fo]:"collapse show"},ZA=ot.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,className:a,children:l,dimension:c="height",in:h=!1,timeout:d=300,mountOnEnter:m=!1,unmountOnExit:y=!1,appear:S=!1,getDimensionValue:w=ZU,...T},x)=>{const A=typeof c=="function"?c():c,M=E.useMemo(()=>Vl(U=>{U.style[A]="0"},t),[A,t]),I=E.useMemo(()=>Vl(U=>{const O=`scroll${A[0].toUpperCase()}${A.slice(1)}`;U.style[A]=`${U[O]}px`},e),[A,e]),N=E.useMemo(()=>Vl(U=>{U.style[A]=null},n),[A,n]),D=E.useMemo(()=>Vl(U=>{U.style[A]=`${w(A,U)}px`,QA(U)},i),[i,w,A]),L=E.useMemo(()=>Vl(U=>{U.style[A]=null},r),[A,r]);return b.jsx(dh,{ref:x,addEndListener:Ry,...T,"aria-expanded":T.role?h:null,onEnter:M,onEntering:I,onEntered:N,onExit:D,onExiting:L,childRef:Pa(l),in:h,timeout:d,mountOnEnter:m,unmountOnExit:y,appear:S,children:(U,O)=>ot.cloneElement(l,{...O,className:De(a,l.props.className,eF[U],A==="width"&&"collapse-horizontal")})})});ZA.displayName="Collapse";function tF(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t},[t]),e}function Gu(t){const e=tF(t);return E.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Ny=(t=>E.forwardRef((e,n)=>b.jsx("div",{...e,ref:n,className:De(e.className,t)})));function nF(){return E.useState(null)}function iF(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t},[t]),e}function Ut(t){const e=iF(t);return E.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function oF(t,e,n,i=!1){const r=Ut(n);E.useEffect(()=>{const a=typeof t=="function"?t():t;return a.addEventListener(e,r,i),()=>a.removeEventListener(e,r,i)},[t])}function eR(){const t=E.useRef(!0),e=E.useRef(()=>t.current);return E.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function tR(t){const e=E.useRef(null);return E.useEffect(()=>{e.current=t}),e.current}const rF=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",sF=typeof document<"u",NE=sF||rF?E.useLayoutEffect:E.useEffect,aF=["as","disabled"];function lF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function uF(t){return!t||t.trim()==="#"}function Iy({tagName:t,disabled:e,href:n,target:i,rel:r,role:a,onClick:l,tabIndex:c=0,type:h}){t||(n!=null||i!=null||r!=null?t="a":t="button");const d={tagName:t};if(t==="button")return[{type:h||"button",disabled:e},d];const m=S=>{if((e||t==="a"&&uF(n))&&S.preventDefault(),e){S.stopPropagation();return}l?.(S)},y=S=>{S.key===" "&&(S.preventDefault(),m(S))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:m,onKeyDown:y},d]}const Dy=E.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=lF(t,aF);const[a,{tagName:l}]=Iy(Object.assign({tagName:n,disabled:i},r));return b.jsx(l,Object.assign({},r,a,{ref:e}))});Dy.displayName="Button";const cF=["onKeyDown"];function fF(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function dF(t){return!t||t.trim()==="#"}const Oy=E.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=fF(t,cF);const[r]=Iy(Object.assign({tagName:"a"},i)),a=Ut(l=>{r.onKeyDown(l),n?.(l)});return dF(i.href)||i.role==="button"?b.jsx("a",Object.assign({ref:e},i,r,{onKeyDown:a})):b.jsx("a",Object.assign({ref:e},i,{onKeyDown:n}))});Oy.displayName="Anchor";const hF={[ni]:"show",[fo]:"show"},nR=E.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},a)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=E.useCallback((h,d)=>{QA(h),i?.(h,d)},[i]);return b.jsx(dh,{ref:a,addEndListener:Ry,...l,onEnter:c,childRef:Pa(e),children:(h,d)=>E.cloneElement(e,{...d,className:De("fade",t,e.props.className,hF[h],n[h])})})});nR.displayName="Fade";const pF={"aria-label":Cg.string,onClick:Cg.func,variant:Cg.oneOf(["white"])},ky=E.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>b.jsx("button",{ref:r,type:"button",className:De("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));ky.displayName="CloseButton";ky.propTypes=pF;const iR=E.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:a=!1,className:l,...c},h)=>{const d=Be(e,"btn"),[m,{tagName:y}]=Iy({tagName:t,disabled:a,...c}),S=y;return b.jsx(S,{...m,...c,ref:h,disabled:a,className:De(l,d,r&&"active",n&&`${d}-${n}`,i&&`${d}-${i}`,c.href&&a&&"disabled")})});iR.displayName="Button";const Py=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-body"),b.jsx(n,{ref:r,className:De(t,e),...i})));Py.displayName="CardBody";const oR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-footer"),b.jsx(n,{ref:r,className:De(t,e),...i})));oR.displayName="CardFooter";const Ly=E.createContext(null);Ly.displayName="CardHeaderContext";const rR=E.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const a=Be(t,"card-header"),l=E.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return b.jsx(Ly.Provider,{value:l,children:b.jsx(n,{ref:r,...i,className:De(e,a)})})});rR.displayName="CardHeader";const sR=E.forwardRef(({bsPrefix:t,className:e,variant:n,as:i="img",...r},a)=>{const l=Be(t,"card-img");return b.jsx(i,{ref:a,className:De(n?`${l}-${n}`:l,e),...r})});sR.displayName="CardImg";const aR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"card-img-overlay"),b.jsx(n,{ref:r,className:De(t,e),...i})));aR.displayName="CardImgOverlay";const lR=E.forwardRef(({className:t,bsPrefix:e,as:n="a",...i},r)=>(e=Be(e,"card-link"),b.jsx(n,{ref:r,className:De(t,e),...i})));lR.displayName="CardLink";const mF=Ny("h6"),uR=E.forwardRef(({className:t,bsPrefix:e,as:n=mF,...i},r)=>(e=Be(e,"card-subtitle"),b.jsx(n,{ref:r,className:De(t,e),...i})));uR.displayName="CardSubtitle";const cR=E.forwardRef(({className:t,bsPrefix:e,as:n="p",...i},r)=>(e=Be(e,"card-text"),b.jsx(n,{ref:r,className:De(t,e),...i})));cR.displayName="CardText";const gF=Ny("h5"),fR=E.forwardRef(({className:t,bsPrefix:e,as:n=gF,...i},r)=>(e=Be(e,"card-title"),b.jsx(n,{ref:r,className:De(t,e),...i})));fR.displayName="CardTitle";const dR=E.forwardRef(({bsPrefix:t,className:e,bg:n,text:i,border:r,body:a=!1,children:l,as:c="div",...h},d)=>{const m=Be(t,"card");return b.jsx(c,{ref:d,...h,className:De(e,m,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:a?b.jsx(Py,{children:l}):l})});dR.displayName="Card";const If=Object.assign(dR,{Img:sR,Title:fR,Subtitle:uR,Body:Py,Link:lR,Text:cR,Header:rR,Footer:oR,ImgOverlay:aR});function vF({as:t,bsPrefix:e,className:n,...i}){e=Be(e,"col");const r=KA(),a=YA(),l=[],c=[];return r.forEach(h=>{const d=i[h];delete i[h];let m,y,S;typeof d=="object"&&d!=null?{span:m,offset:y,order:S}=d:m=d;const w=h!==a?`-${h}`:"";m&&l.push(m===!0?`${e}${w}`:`${e}${w}-${m}`),S!=null&&c.push(`order${w}-${S}`),y!=null&&c.push(`offset${w}-${y}`)}),[{...i,className:De(n,...l,...c)},{as:t,bsPrefix:e,spans:l}]}const hR=E.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:a,spans:l}]=vF(t);return b.jsx(r,{...i,ref:e,className:De(n,!l.length&&a)})});hR.displayName="Col";const pR=E.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:i,...r},a)=>{const l=Be(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return b.jsx(n,{ref:a,...r,className:De(i,e?`${l}${c}`:l)})});pR.displayName="Container";var yF=Function.prototype.bind.call(Function.prototype.call,[].slice);function lo(t,e){return yF(t.querySelectorAll(e))}function _F(t,e,n){const i=E.useRef(t!==void 0),[r,a]=E.useState(e),l=t!==void 0,c=i.current;return i.current=l,!l&&c&&r!==e&&a(e),[l?t:r,E.useCallback((...h)=>{const[d,...m]=h;let y=n?.(d,...m);return a(d),y},[n])]}function mR(){const[,t]=E.useReducer(e=>e+1,0);return t}const hh=E.createContext(null);var IE=Object.prototype.hasOwnProperty;function DE(t,e,n){for(n of t.keys())if(lu(n,e))return n}function lu(t,e){var n,i,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&lu(t[i],e[i]););return i===-1}if(n===Set){if(t.size!==e.size)return!1;for(i of t)if(r=i,r&&typeof r=="object"&&(r=DE(e,r),!r)||!e.has(r))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t)if(r=i[0],r&&typeof r=="object"&&(r=DE(e,r),!r)||!lu(i[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return i===-1}if(!n||typeof t=="object"){i=0;for(n in t)if(IE.call(t,n)&&++i&&!IE.call(e,n)||!(n in e)||!lu(t[n],e[n]))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}function SF(t){const e=eR();return[t[0],E.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var nn="top",Jn="bottom",Kn="right",on="left",Uy="auto",Hu=[nn,Jn,Kn,on],Aa="start",yu="end",bF="clippingParents",gR="viewport",zl="popper",wF="reference",OE=Hu.reduce(function(t,e){return t.concat([e+"-"+Aa,e+"-"+yu])},[]),vR=[].concat(Hu,[Uy]).reduce(function(t,e){return t.concat([e,e+"-"+Aa,e+"-"+yu])},[]),EF="beforeRead",CF="read",TF="afterRead",xF="beforeMain",AF="main",RF="afterMain",MF="beforeWrite",NF="write",IF="afterWrite",DF=[EF,CF,TF,xF,AF,RF,MF,NF,IF];function Oi(t){return t.split("-")[0]}function En(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function os(t){var e=En(t).Element;return t instanceof e||t instanceof Element}function ki(t){var e=En(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Fy(t){if(typeof ShadowRoot>"u")return!1;var e=En(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Wr=Math.max,Nd=Math.min,Ra=Math.round;function xv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function yR(){return!/^((?!chrome|android).)*safari/i.test(xv())}function Ma(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,a=1;e&&ki(t)&&(r=t.offsetWidth>0&&Ra(i.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Ra(i.height)/t.offsetHeight||1);var l=os(t)?En(t):window,c=l.visualViewport,h=!yR()&&n,d=(i.left+(h&&c?c.offsetLeft:0))/r,m=(i.top+(h&&c?c.offsetTop:0))/a,y=i.width/r,S=i.height/a;return{width:y,height:S,top:m,right:d+y,bottom:m+S,left:d,x:d,y:m}}function By(t){var e=Ma(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function _R(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Fy(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function cr(t){return t?(t.nodeName||"").toLowerCase():null}function bo(t){return En(t).getComputedStyle(t)}function OF(t){return["table","td","th"].indexOf(cr(t))>=0}function br(t){return((os(t)?t.ownerDocument:t.document)||window.document).documentElement}function ph(t){return cr(t)==="html"?t:t.assignedSlot||t.parentNode||(Fy(t)?t.host:null)||br(t)}function kE(t){return!ki(t)||bo(t).position==="fixed"?null:t.offsetParent}function kF(t){var e=/firefox/i.test(xv()),n=/Trident/i.test(xv());if(n&&ki(t)){var i=bo(t);if(i.position==="fixed")return null}var r=ph(t);for(Fy(r)&&(r=r.host);ki(r)&&["html","body"].indexOf(cr(r))<0;){var a=bo(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function Vu(t){for(var e=En(t),n=kE(t);n&&OF(n)&&bo(n).position==="static";)n=kE(n);return n&&(cr(n)==="html"||cr(n)==="body"&&bo(n).position==="static")?e:n||kF(t)||e}function $y(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function uu(t,e,n){return Wr(t,Nd(e,n))}function PF(t,e,n){var i=uu(t,e,n);return i>n?n:i}function SR(){return{top:0,right:0,bottom:0,left:0}}function bR(t){return Object.assign({},SR(),t)}function wR(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var LF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,bR(typeof e!="number"?e:wR(e,Hu))};function UF(t){var e,n=t.state,i=t.name,r=t.options,a=n.elements.arrow,l=n.modifiersData.popperOffsets,c=Oi(n.placement),h=$y(c),d=[on,Kn].indexOf(c)>=0,m=d?"height":"width";if(!(!a||!l)){var y=LF(r.padding,n),S=By(a),w=h==="y"?nn:on,T=h==="y"?Jn:Kn,x=n.rects.reference[m]+n.rects.reference[h]-l[h]-n.rects.popper[m],A=l[h]-n.rects.reference[h],M=Vu(a),I=M?h==="y"?M.clientHeight||0:M.clientWidth||0:0,N=x/2-A/2,D=y[w],L=I-S[m]-y[T],U=I/2-S[m]/2+N,O=uu(D,U,L),q=h;n.modifiersData[i]=(e={},e[q]=O,e.centerOffset=O-U,e)}}function FF(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||_R(e.elements.popper,r)&&(e.elements.arrow=r))}const BF={name:"arrow",enabled:!0,phase:"main",fn:UF,effect:FF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Na(t){return t.split("-")[1]}var $F={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GF(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Ra(n*r)/r||0,y:Ra(i*r)/r||0}}function PE(t){var e,n=t.popper,i=t.popperRect,r=t.placement,a=t.variation,l=t.offsets,c=t.position,h=t.gpuAcceleration,d=t.adaptive,m=t.roundOffsets,y=t.isFixed,S=l.x,w=S===void 0?0:S,T=l.y,x=T===void 0?0:T,A=typeof m=="function"?m({x:w,y:x}):{x:w,y:x};w=A.x,x=A.y;var M=l.hasOwnProperty("x"),I=l.hasOwnProperty("y"),N=on,D=nn,L=window;if(d){var U=Vu(n),O="clientHeight",q="clientWidth";if(U===En(n)&&(U=br(n),bo(U).position!=="static"&&c==="absolute"&&(O="scrollHeight",q="scrollWidth")),U=U,r===nn||(r===on||r===Kn)&&a===yu){D=Jn;var j=y&&U===L&&L.visualViewport?L.visualViewport.height:U[O];x-=j-i.height,x*=h?1:-1}if(r===on||(r===nn||r===Jn)&&a===yu){N=Kn;var Y=y&&U===L&&L.visualViewport?L.visualViewport.width:U[q];w-=Y-i.width,w*=h?1:-1}}var W=Object.assign({position:c},d&&$F),re=m===!0?GF({x:w,y:x},En(n)):{x:w,y:x};if(w=re.x,x=re.y,h){var ie;return Object.assign({},W,(ie={},ie[D]=I?"0":"",ie[N]=M?"0":"",ie.transform=(L.devicePixelRatio||1)<=1?"translate("+w+"px, "+x+"px)":"translate3d("+w+"px, "+x+"px, 0)",ie))}return Object.assign({},W,(e={},e[D]=I?x+"px":"",e[N]=M?w+"px":"",e.transform="",e))}function HF(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,a=n.adaptive,l=a===void 0?!0:a,c=n.roundOffsets,h=c===void 0?!0:c,d={placement:Oi(e.placement),variation:Na(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,PE(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,PE(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const VF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:HF,data:{}};var Df={passive:!0};function zF(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,a=r===void 0?!0:r,l=i.resize,c=l===void 0?!0:l,h=En(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(m){m.addEventListener("scroll",n.update,Df)}),c&&h.addEventListener("resize",n.update,Df),function(){a&&d.forEach(function(m){m.removeEventListener("scroll",n.update,Df)}),c&&h.removeEventListener("resize",n.update,Df)}}const qF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:zF,data:{}};var jF={left:"right",right:"left",bottom:"top",top:"bottom"};function rd(t){return t.replace(/left|right|bottom|top/g,function(e){return jF[e]})}var JF={start:"end",end:"start"};function LE(t){return t.replace(/start|end/g,function(e){return JF[e]})}function Gy(t){var e=En(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Hy(t){return Ma(br(t)).left+Gy(t).scrollLeft}function KF(t,e){var n=En(t),i=br(t),r=n.visualViewport,a=i.clientWidth,l=i.clientHeight,c=0,h=0;if(r){a=r.width,l=r.height;var d=yR();(d||!d&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}return{width:a,height:l,x:c+Hy(t),y:h}}function YF(t){var e,n=br(t),i=Gy(t),r=(e=t.ownerDocument)==null?void 0:e.body,a=Wr(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Wr(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-i.scrollLeft+Hy(t),h=-i.scrollTop;return bo(r||n).direction==="rtl"&&(c+=Wr(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:l,x:c,y:h}}function Vy(t){var e=bo(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function ER(t){return["html","body","#document"].indexOf(cr(t))>=0?t.ownerDocument.body:ki(t)&&Vy(t)?t:ER(ph(t))}function cu(t,e){var n;e===void 0&&(e=[]);var i=ER(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),a=En(i),l=r?[a].concat(a.visualViewport||[],Vy(i)?i:[]):i,c=e.concat(l);return r?c:c.concat(cu(ph(l)))}function Av(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function XF(t,e){var n=Ma(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function UE(t,e,n){return e===gR?Av(KF(t,n)):os(e)?XF(e,n):Av(YF(br(t)))}function WF(t){var e=cu(ph(t)),n=["absolute","fixed"].indexOf(bo(t).position)>=0,i=n&&ki(t)?Vu(t):t;return os(i)?e.filter(function(r){return os(r)&&_R(r,i)&&cr(r)!=="body"}):[]}function QF(t,e,n,i){var r=e==="clippingParents"?WF(t):[].concat(e),a=[].concat(r,[n]),l=a[0],c=a.reduce(function(h,d){var m=UE(t,d,i);return h.top=Wr(m.top,h.top),h.right=Nd(m.right,h.right),h.bottom=Nd(m.bottom,h.bottom),h.left=Wr(m.left,h.left),h},UE(t,l,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function CR(t){var e=t.reference,n=t.element,i=t.placement,r=i?Oi(i):null,a=i?Na(i):null,l=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,h;switch(r){case nn:h={x:l,y:e.y-n.height};break;case Jn:h={x:l,y:e.y+e.height};break;case Kn:h={x:e.x+e.width,y:c};break;case on:h={x:e.x-n.width,y:c};break;default:h={x:e.x,y:e.y}}var d=r?$y(r):null;if(d!=null){var m=d==="y"?"height":"width";switch(a){case Aa:h[d]=h[d]-(e[m]/2-n[m]/2);break;case yu:h[d]=h[d]+(e[m]/2-n[m]/2);break}}return h}function _u(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,a=n.strategy,l=a===void 0?t.strategy:a,c=n.boundary,h=c===void 0?bF:c,d=n.rootBoundary,m=d===void 0?gR:d,y=n.elementContext,S=y===void 0?zl:y,w=n.altBoundary,T=w===void 0?!1:w,x=n.padding,A=x===void 0?0:x,M=bR(typeof A!="number"?A:wR(A,Hu)),I=S===zl?wF:zl,N=t.rects.popper,D=t.elements[T?I:S],L=QF(os(D)?D:D.contextElement||br(t.elements.popper),h,m,l),U=Ma(t.elements.reference),O=CR({reference:U,element:N,placement:r}),q=Av(Object.assign({},N,O)),j=S===zl?q:U,Y={top:L.top-j.top+M.top,bottom:j.bottom-L.bottom+M.bottom,left:L.left-j.left+M.left,right:j.right-L.right+M.right},W=t.modifiersData.offset;if(S===zl&&W){var re=W[r];Object.keys(Y).forEach(function(ie){var ae=[Kn,Jn].indexOf(ie)>=0?1:-1,de=[nn,Jn].indexOf(ie)>=0?"y":"x";Y[ie]+=re[de]*ae})}return Y}function ZF(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,a=n.rootBoundary,l=n.padding,c=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?vR:h,m=Na(i),y=m?c?OE:OE.filter(function(T){return Na(T)===m}):Hu,S=y.filter(function(T){return d.indexOf(T)>=0});S.length===0&&(S=y);var w=S.reduce(function(T,x){return T[x]=_u(t,{placement:x,boundary:r,rootBoundary:a,padding:l})[Oi(x)],T},{});return Object.keys(w).sort(function(T,x){return w[T]-w[x]})}function eB(t){if(Oi(t)===Uy)return[];var e=rd(t);return[LE(t),e,LE(e)]}function tB(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,l=n.altAxis,c=l===void 0?!0:l,h=n.fallbackPlacements,d=n.padding,m=n.boundary,y=n.rootBoundary,S=n.altBoundary,w=n.flipVariations,T=w===void 0?!0:w,x=n.allowedAutoPlacements,A=e.options.placement,M=Oi(A),I=M===A,N=h||(I||!T?[rd(A)]:eB(A)),D=[A].concat(N).reduce(function(le,me){return le.concat(Oi(me)===Uy?ZF(e,{placement:me,boundary:m,rootBoundary:y,padding:d,flipVariations:T,allowedAutoPlacements:x}):me)},[]),L=e.rects.reference,U=e.rects.popper,O=new Map,q=!0,j=D[0],Y=0;Y<D.length;Y++){var W=D[Y],re=Oi(W),ie=Na(W)===Aa,ae=[nn,Jn].indexOf(re)>=0,de=ae?"width":"height",B=_u(e,{placement:W,boundary:m,rootBoundary:y,altBoundary:S,padding:d}),Q=ae?ie?Kn:on:ie?Jn:nn;L[de]>U[de]&&(Q=rd(Q));var ee=rd(Q),ne=[];if(a&&ne.push(B[re]<=0),c&&ne.push(B[Q]<=0,B[ee]<=0),ne.every(function(le){return le})){j=W,q=!1;break}O.set(W,ne)}if(q)for(var ce=T?3:1,P=function(me){var be=D.find(function(ve){var Je=O.get(ve);if(Je)return Je.slice(0,me).every(function(Ke){return Ke})});if(be)return j=be,"break"},K=ce;K>0;K--){var se=P(K);if(se==="break")break}e.placement!==j&&(e.modifiersData[i]._skip=!0,e.placement=j,e.reset=!0)}}const nB={name:"flip",enabled:!0,phase:"main",fn:tB,requiresIfExists:["offset"],data:{_skip:!1}};function FE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function BE(t){return[nn,Kn,Jn,on].some(function(e){return t[e]>=0})}function iB(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,l=_u(e,{elementContext:"reference"}),c=_u(e,{altBoundary:!0}),h=FE(l,i),d=FE(c,r,a),m=BE(h),y=BE(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":y})}const oB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iB};function rB(t,e,n){var i=Oi(t),r=[on,nn].indexOf(i)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=a[0],c=a[1];return l=l||0,c=(c||0)*r,[on,Kn].indexOf(i)>=0?{x:c,y:l}:{x:l,y:c}}function sB(t){var e=t.state,n=t.options,i=t.name,r=n.offset,a=r===void 0?[0,0]:r,l=vR.reduce(function(m,y){return m[y]=rB(y,e.rects,a),m},{}),c=l[e.placement],h=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=l}const aB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sB};function lB(t){var e=t.state,n=t.name;e.modifiersData[n]=CR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const uB={name:"popperOffsets",enabled:!0,phase:"read",fn:lB,data:{}};function cB(t){return t==="x"?"y":"x"}function fB(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,a=r===void 0?!0:r,l=n.altAxis,c=l===void 0?!1:l,h=n.boundary,d=n.rootBoundary,m=n.altBoundary,y=n.padding,S=n.tether,w=S===void 0?!0:S,T=n.tetherOffset,x=T===void 0?0:T,A=_u(e,{boundary:h,rootBoundary:d,padding:y,altBoundary:m}),M=Oi(e.placement),I=Na(e.placement),N=!I,D=$y(M),L=cB(D),U=e.modifiersData.popperOffsets,O=e.rects.reference,q=e.rects.popper,j=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,Y=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(U){if(a){var ie,ae=D==="y"?nn:on,de=D==="y"?Jn:Kn,B=D==="y"?"height":"width",Q=U[D],ee=Q+A[ae],ne=Q-A[de],ce=w?-q[B]/2:0,P=I===Aa?O[B]:q[B],K=I===Aa?-q[B]:-O[B],se=e.elements.arrow,le=w&&se?By(se):{width:0,height:0},me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:SR(),be=me[ae],ve=me[de],Je=uu(0,O[B],le[B]),Ke=N?O[B]/2-ce-Je-be-Y.mainAxis:P-Je-be-Y.mainAxis,sn=N?-O[B]/2+ce+Je+ve+Y.mainAxis:K+Je+ve+Y.mainAxis,Tn=e.elements.arrow&&Vu(e.elements.arrow),gi=Tn?D==="y"?Tn.clientTop||0:Tn.clientLeft||0:0,jt=(ie=W?.[D])!=null?ie:0,Jt=Q+Ke-jt-gi,nt=Q+sn-jt,Gi=uu(w?Nd(ee,Jt):ee,Q,w?Wr(ne,nt):ne);U[D]=Gi,re[D]=Gi-Q}if(c){var Ro,rc=D==="x"?nn:on,ja=D==="x"?Jn:Kn,Wn=U[L],Mo=L==="y"?"height":"width",sc=Wn+A[rc],ac=Wn-A[ja],At=[nn,on].indexOf(M)!==-1,lc=(Ro=W?.[L])!=null?Ro:0,Ja=At?sc:Wn-O[Mo]-q[Mo]-lc+Y.altAxis,Ka=At?Wn+O[Mo]+q[Mo]-lc-Y.altAxis:ac,Cr=w&&At?PF(Ja,Wn,Ka):uu(w?Ja:sc,Wn,w?Ka:ac);U[L]=Cr,re[L]=Cr-Wn}e.modifiersData[i]=re}}const dB={name:"preventOverflow",enabled:!0,phase:"main",fn:fB,requiresIfExists:["offset"]};function hB(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function pB(t){return t===En(t)||!ki(t)?Gy(t):hB(t)}function mB(t){var e=t.getBoundingClientRect(),n=Ra(e.width)/t.offsetWidth||1,i=Ra(e.height)/t.offsetHeight||1;return n!==1||i!==1}function gB(t,e,n){n===void 0&&(n=!1);var i=ki(e),r=ki(e)&&mB(e),a=br(e),l=Ma(t,r,n),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&((cr(e)!=="body"||Vy(a))&&(c=pB(e)),ki(e)?(h=Ma(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=Hy(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function vB(t){var e=new Map,n=new Set,i=[];t.forEach(function(a){e.set(a.name,a)});function r(a){n.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(c){if(!n.has(c)){var h=e.get(c);h&&r(h)}}),i.push(a)}return t.forEach(function(a){n.has(a.name)||r(a)}),i}function yB(t){var e=vB(t);return DF.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function _B(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function SB(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var $E={placement:"bottom",modifiers:[],strategy:"absolute"};function GE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function bB(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,a=r===void 0?$E:r;return function(c,h,d){d===void 0&&(d=a);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},$E,a),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},y=[],S=!1,w={state:m,setOptions:function(M){var I=typeof M=="function"?M(m.options):M;x(),m.options=Object.assign({},a,m.options,I),m.scrollParents={reference:os(c)?cu(c):c.contextElement?cu(c.contextElement):[],popper:cu(h)};var N=yB(SB([].concat(i,m.options.modifiers)));return m.orderedModifiers=N.filter(function(D){return D.enabled}),T(),w.update()},forceUpdate:function(){if(!S){var M=m.elements,I=M.reference,N=M.popper;if(GE(I,N)){m.rects={reference:gB(I,Vu(N),m.options.strategy==="fixed"),popper:By(N)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(Y){return m.modifiersData[Y.name]=Object.assign({},Y.data)});for(var D=0;D<m.orderedModifiers.length;D++){if(m.reset===!0){m.reset=!1,D=-1;continue}var L=m.orderedModifiers[D],U=L.fn,O=L.options,q=O===void 0?{}:O,j=L.name;typeof U=="function"&&(m=U({state:m,options:q,name:j,instance:w})||m)}}}},update:_B(function(){return new Promise(function(A){w.forceUpdate(),A(m)})}),destroy:function(){x(),S=!0}};if(!GE(c,h))return w;w.setOptions(d).then(function(A){!S&&d.onFirstUpdate&&d.onFirstUpdate(A)});function T(){m.orderedModifiers.forEach(function(A){var M=A.name,I=A.options,N=I===void 0?{}:I,D=A.effect;if(typeof D=="function"){var L=D({state:m,name:M,instance:w,options:N}),U=function(){};y.push(L||U)}})}function x(){y.forEach(function(A){return A()}),y=[]}return w}}const wB=bB({defaultModifiers:[oB,uB,VF,qF,aB,nB,dB,BF]}),EB=["enabled","placement","strategy","modifiers"];function CB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const TB={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},xB={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const i=(e.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);i.length?e.setAttribute("aria-describedby",i.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:i}=t.elements,r=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in i){const a=i.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(n.id)!==-1)return;i.setAttribute("aria-describedby",a?`${a},${n.id}`:n.id)}}},AB=[];function RB(t,e,n={}){let{enabled:i=!0,placement:r="bottom",strategy:a="absolute",modifiers:l=AB}=n,c=CB(n,EB);const h=E.useRef(l),d=E.useRef(),m=E.useCallback(()=>{var A;(A=d.current)==null||A.update()},[]),y=E.useCallback(()=>{var A;(A=d.current)==null||A.forceUpdate()},[]),[S,w]=SF(E.useState({placement:r,update:m,forceUpdate:y,attributes:{},styles:{popper:{},arrow:{}}})),T=E.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:A})=>{const M={},I={};Object.keys(A.elements).forEach(N=>{M[N]=A.styles[N],I[N]=A.attributes[N]}),w({state:A,styles:M,attributes:I,update:m,forceUpdate:y,placement:A.placement})}}),[m,y,w]),x=E.useMemo(()=>(lu(h.current,l)||(h.current=l),h.current),[l]);return E.useEffect(()=>{!d.current||!i||d.current.setOptions({placement:r,strategy:a,modifiers:[...x,T,TB]})},[a,r,T,i,x]),E.useEffect(()=>{if(!(!i||t==null||e==null))return d.current=wB(t,e,Object.assign({},c,{placement:r,strategy:a,modifiers:[...x,xB,T]})),()=>{d.current!=null&&(d.current.destroy(),d.current=void 0,w(A=>Object.assign({},A,{attributes:{},styles:{popper:{}}})))}},[i,t,e]),S}function Id(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var xg,HE;function MB(){if(HE)return xg;HE=1;var t=function(){};return xg=t,xg}var NB=MB();const IB=Mu(NB),VE=()=>{};function DB(t){return t.button===0}function OB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Ag=t=>t&&("current"in t?t.current:t),zE={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function kB(t,e=VE,{disabled:n,clickTrigger:i="click"}={}){const r=E.useRef(!1),a=E.useRef(!1),l=E.useCallback(d=>{const m=Ag(t);IB(!!m,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!m||OB(d)||!DB(d)||!!Id(m,d.target)||a.current,a.current=!1},[t]),c=Ut(d=>{const m=Ag(t);m&&Id(m,d.target)?a.current=!0:a.current=!1}),h=Ut(d=>{r.current||e(d)});E.useEffect(()=>{var d,m;if(n||t==null)return;const y=ch(Ag(t)),S=y.defaultView||window;let w=(d=S.event)!=null?d:(m=S.parent)==null?void 0:m.event,T=null;zE[i]&&(T=sr(y,zE[i],c,!0));const x=sr(y,i,l,!0),A=sr(y,i,I=>{if(I===w){w=void 0;return}h(I)});let M=[];return"ontouchstart"in y.documentElement&&(M=[].slice.call(y.body.children).map(I=>sr(I,"mousemove",VE))),()=>{T?.(),x(),A(),M.forEach(I=>I())}},[t,n,i,l,c,h])}function PB(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function LB(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function UB({enabled:t,enableEvents:e,placement:n,flip:i,offset:r,fixed:a,containerPadding:l,arrowElement:c,popperConfig:h={}}){var d,m,y,S,w;const T=PB(h.modifiers);return Object.assign({},h,{placement:n,enabled:t,strategy:a?"fixed":h.strategy,modifiers:LB(Object.assign({},T,{eventListeners:{enabled:e,options:(d=T.eventListeners)==null?void 0:d.options},preventOverflow:Object.assign({},T.preventOverflow,{options:l?Object.assign({padding:l},(m=T.preventOverflow)==null?void 0:m.options):(y=T.preventOverflow)==null?void 0:y.options}),offset:{options:Object.assign({offset:r},(S=T.offset)==null?void 0:S.options)},arrow:Object.assign({},T.arrow,{enabled:!!c,options:Object.assign({},(w=T.arrow)==null?void 0:w.options,{element:c})}),flip:Object.assign({enabled:!!i},T.flip)}))})}const FB=["children","usePopper"];function BB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const $B=()=>{};function TR(t={}){const e=E.useContext(hh),[n,i]=nF(),r=E.useRef(!1),{flip:a,offset:l,rootCloseEvent:c,fixed:h=!1,placement:d,popperConfig:m={},enableEventListeners:y=!0,usePopper:S=!!e}=t,w=e?.show==null?!!t.show:e.show;w&&!r.current&&(r.current=!0);const T=U=>{e?.toggle(!1,U)},{placement:x,setMenu:A,menuElement:M,toggleElement:I}=e||{},N=RB(I,M,UB({placement:d||x||"bottom-start",enabled:S,enableEvents:y??w,offset:l,flip:a,fixed:h,arrowElement:n,popperConfig:m})),D=Object.assign({ref:A||$B,"aria-labelledby":I?.id},N.attributes.popper,{style:N.styles.popper}),L={show:w,placement:x,hasShown:r.current,toggle:e?.toggle,popper:S?N:null,arrowProps:S?Object.assign({ref:i},N.attributes.arrow,{style:N.styles.arrow}):{}};return kB(M,T,{clickTrigger:c,disabled:!w}),[D,L]}function xR(t){let{children:e,usePopper:n=!0}=t,i=BB(t,FB);const[r,a]=TR(Object.assign({},i,{usePopper:n}));return b.jsx(b.Fragment,{children:e(r,a)})}xR.displayName="DropdownMenu";const AR={prefix:String(Math.round(Math.random()*1e10)),current:0},RR=ot.createContext(AR),GB=ot.createContext(!1);let Rg=new WeakMap;function HB(t=!1){let e=E.useContext(RR),n=E.useRef(null);if(n.current===null&&!t){var i,r;let a=(r=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(a){let l=Rg.get(a);l==null?Rg.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==l.state&&(e.current=l.id,Rg.delete(a))}n.current=++e.current}return n.current}function VB(t){let e=E.useContext(RR),n=HB(!!t),i=`react-aria${e.prefix}`;return t||`${i}-${n}`}function zB(t){let e=ot.useId(),[n]=E.useState(YB()),i=n?"react-aria":`react-aria${AR.prefix}`;return t||`${i}-${e}`}const qB=typeof ot.useId=="function"?zB:VB;function jB(){return!1}function JB(){return!0}function KB(t){return()=>{}}function YB(){return typeof ot.useSyncExternalStore=="function"?ot.useSyncExternalStore(KB,jB,JB):E.useContext(GB)}const MR=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},qE=()=>{};function NR(){const t=qB(),{show:e=!1,toggle:n=qE,setToggle:i,menuElement:r}=E.useContext(hh)||{},a=E.useCallback(c=>{n(!e,c)},[e,n]),l={id:t,ref:i||qE,onClick:a,"aria-expanded":!!e};return r&&MR(r)&&(l["aria-haspopup"]=!0),[l,{show:e,toggle:n}]}function IR({children:t}){const[e,n]=NR();return b.jsx(b.Fragment,{children:t(e,n)})}IR.displayName="DropdownToggle";const rs=E.createContext(null),Su=(t,e=null)=>t!=null?String(t):e||null,mh=E.createContext(null);mh.displayName="NavContext";const XB="data-rr-ui-",WB="rrUi";function La(t){return`${XB}${t}`}function QB(t){return`${WB}${t}`}const ZB=["eventKey","disabled","onClick","active","as"];function e2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function DR({key:t,href:e,active:n,disabled:i,onClick:r}){const a=E.useContext(rs),l=E.useContext(mh),{activeKey:c}=l||{},h=Su(t,e),d=n==null&&t!=null?Su(c)===h:n;return[{onClick:Ut(y=>{i||(r?.(y),a&&!y.isPropagationStopped()&&a(h,y))}),"aria-disabled":i||void 0,"aria-selected":d,[La("dropdown-item")]:""},{isActive:d}]}const OR=E.forwardRef((t,e)=>{let{eventKey:n,disabled:i,onClick:r,active:a,as:l=Dy}=t,c=e2(t,ZB);const[h]=DR({key:n,href:c.href,disabled:i,onClick:r,active:a});return b.jsx(l,Object.assign({},c,{ref:e},h))});OR.displayName="DropdownItem";const kR=E.createContext(fh?window:void 0);kR.Provider;function gh(){return E.useContext(kR)}function jE(){const t=mR(),e=E.useRef(null),n=E.useCallback(i=>{e.current=i,t()},[t]);return[e,n]}function zu({defaultShow:t,show:e,onSelect:n,onToggle:i,itemSelector:r=`* [${La("dropdown-item")}]`,focusFirstItemOnShow:a,placement:l="bottom-start",children:c}){const h=gh(),[d,m]=_F(e,t,i),[y,S]=jE(),w=y.current,[T,x]=jE(),A=T.current,M=tR(d),I=E.useRef(null),N=E.useRef(!1),D=E.useContext(rs),L=E.useCallback((W,re,ie=re?.type)=>{m(W,{originalEvent:re,source:ie})},[m]),U=Ut((W,re)=>{n?.(W,re),L(!1,re,"select"),re.isPropagationStopped()||D?.(W,re)}),O=E.useMemo(()=>({toggle:L,placement:l,show:d,menuElement:w,toggleElement:A,setMenu:S,setToggle:x}),[L,l,d,w,A,S,x]);w&&M&&!d&&(N.current=w.contains(w.ownerDocument.activeElement));const q=Ut(()=>{A&&A.focus&&A.focus()}),j=Ut(()=>{const W=I.current;let re=a;if(re==null&&(re=y.current&&MR(y.current)?"keyboard":!1),re===!1||re==="keyboard"&&!/^key.+$/.test(W))return;const ie=lo(y.current,r)[0];ie&&ie.focus&&ie.focus()});E.useEffect(()=>{d?j():N.current&&(N.current=!1,q())},[d,N,q,j]),E.useEffect(()=>{I.current=null});const Y=(W,re)=>{if(!y.current)return null;const ie=lo(y.current,r);let ae=ie.indexOf(W)+re;return ae=Math.max(0,Math.min(ae,ie.length)),ie[ae]};return oF(E.useCallback(()=>h.document,[h]),"keydown",W=>{var re,ie;const{key:ae}=W,de=W.target,B=(re=y.current)==null?void 0:re.contains(de),Q=(ie=T.current)==null?void 0:ie.contains(de);if(/input|textarea/i.test(de.tagName)&&(ae===" "||ae!=="Escape"&&B||ae==="Escape"&&de.type==="search")||!B&&!Q||ae==="Tab"&&(!y.current||!d))return;I.current=W.type;const ne={originalEvent:W,source:W.type};switch(ae){case"ArrowUp":{const ce=Y(de,-1);ce&&ce.focus&&ce.focus(),W.preventDefault();return}case"ArrowDown":if(W.preventDefault(),!d)m(!0,ne);else{const ce=Y(de,1);ce&&ce.focus&&ce.focus()}return;case"Tab":WA(de.ownerDocument,"keyup",ce=>{var P;(ce.key==="Tab"&&!ce.target||!((P=y.current)!=null&&P.contains(ce.target)))&&m(!1,ne)},{once:!0});break;case"Escape":ae==="Escape"&&(W.preventDefault(),W.stopPropagation()),m(!1,ne);break}}),b.jsx(rs.Provider,{value:U,children:b.jsx(hh.Provider,{value:O,children:c})})}zu.displayName="Dropdown";zu.Menu=xR;zu.Toggle=IR;zu.Item=OR;const zy=E.createContext({});zy.displayName="DropdownContext";const PR=E.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:i="separator",...r},a)=>(e=Be(e,"dropdown-divider"),b.jsx(n,{ref:a,className:De(t,e),role:i,...r})));PR.displayName="DropdownDivider";const LR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",role:i="heading",...r},a)=>(e=Be(e,"dropdown-header"),b.jsx(n,{ref:a,className:De(t,e),role:i,...r})));LR.displayName="DropdownHeader";const UR=E.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:i=!1,onClick:r,active:a,as:l=Oy,...c},h)=>{const d=Be(t,"dropdown-item"),[m,y]=DR({key:n,href:c.href,disabled:i,onClick:r,active:a});return b.jsx(l,{...c,...m,ref:h,className:De(e,d,y.isActive&&"active",i&&"disabled")})});UR.displayName="DropdownItem";const FR=E.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Be(e,"dropdown-item-text"),b.jsx(n,{ref:r,className:De(t,e),...i})));FR.displayName="DropdownItemText";const t2=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",n2=typeof document<"u",BR=n2||t2?E.useLayoutEffect:E.useEffect,qy=E.createContext(null);qy.displayName="InputGroupContext";const ds=E.createContext(null);ds.displayName="NavbarContext";function $R(t,e){return t}function GR(t,e,n){const i=n?"top-end":"top-start",r=n?"top-start":"top-end",a=n?"bottom-end":"bottom-start",l=n?"bottom-start":"bottom-end",c=n?"right-start":"left-start",h=n?"right-end":"left-end",d=n?"left-start":"right-start",m=n?"left-end":"right-end";let y=t?l:a;return e==="up"?y=t?r:i:e==="end"?y=t?m:d:e==="start"?y=t?h:c:e==="down-centered"?y="bottom":e==="up-centered"&&(y="top"),y}const HR=E.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:i,flip:r=!0,show:a,renderOnMount:l,as:c="div",popperConfig:h,variant:d,...m},y)=>{let S=!1;const w=E.useContext(ds),T=Be(t,"dropdown-menu"),{align:x,drop:A,isRTL:M}=E.useContext(zy);n=n||x;const I=E.useContext(qy),N=[];if(n)if(typeof n=="object"){const W=Object.keys(n);if(W.length){const re=W[0],ie=n[re];S=ie==="start",N.push(`${T}-${re}-${ie}`)}}else n==="end"&&(S=!0);const D=GR(S,A,M),[L,{hasShown:U,popper:O,show:q,toggle:j}]=TR({flip:r,rootCloseEvent:i,show:a,usePopper:!w&&N.length===0,offset:[0,2],popperConfig:h,placement:D});if(L.ref=My($R(y),L.ref),BR(()=>{q&&O?.update()},[q]),!U&&!l&&!I)return null;typeof c!="string"&&(L.show=q,L.close=()=>j?.(!1),L.align=n);let Y=m.style;return O!=null&&O.placement&&(Y={...m.style,...L.style},m["x-placement"]=O.placement),b.jsx(c,{...m,...L,style:Y,...(N.length||w)&&{"data-bs-popper":"static"},className:De(e,T,q&&"show",S&&`${T}-end`,d&&`${T}-${d}`,...N)})});HR.displayName="DropdownMenu";const VR=E.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:i,as:r=iR,...a},l)=>{const c=Be(t,"dropdown-toggle"),h=E.useContext(hh);i!==void 0&&(a.bsPrefix=i);const[d]=NR();return d.ref=My(d.ref,$R(l)),b.jsx(r,{className:De(n,c,e&&`${c}-split`,h?.show&&"show"),...d,...a})});VR.displayName="DropdownToggle";const zR=E.forwardRef((t,e)=>{const{bsPrefix:n,drop:i="down",show:r,className:a,align:l="start",onSelect:c,onToggle:h,focusFirstItemOnShow:d,as:m="div",navbar:y,autoClose:S=!0,...w}=Ay(t,{show:"onToggle"}),T=E.useContext(qy),x=Be(n,"dropdown"),A=NU(),M=O=>S===!1?O==="click":S==="inside"?O!=="rootClose":S==="outside"?O!=="select":!0,I=Gu((O,q)=>{var j;!((j=q.originalEvent)==null||(j=j.target)==null)&&j.classList.contains("dropdown-toggle")&&q.source==="mousedown"||(q.originalEvent.currentTarget===document&&(q.source!=="keydown"||q.originalEvent.key==="Escape")&&(q.source="rootClose"),M(q.source)&&h?.(O,q))}),D=GR(l==="end",i,A),L=E.useMemo(()=>({align:l,drop:i,isRTL:A}),[l,i,A]),U={down:x,"down-centered":`${x}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return b.jsx(zy.Provider,{value:L,children:b.jsx(zu,{placement:D,show:r,onSelect:c,onToggle:I,focusFirstItemOnShow:d,itemSelector:`.${x}-item:not(.disabled):not(:disabled)`,children:T?w.children:b.jsx(m,{...w,ref:e,className:De(a,r&&"show",U[i])})})})});zR.displayName="Dropdown";const Of=Object.assign(zR,{Toggle:VR,Menu:HR,Item:UR,ItemText:FR,Divider:PR,Header:LR}),JE=t=>!t||typeof t=="function"?t:e=>{t.current=e};function i2(t,e){const n=JE(t),i=JE(e);return r=>{n&&n(r),i&&i(r)}}function vh(t,e){return E.useMemo(()=>i2(t,e),[t,e])}const qR=E.createContext(null),o2=["as","active","eventKey"];function r2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function jR({key:t,onClick:e,active:n,id:i,role:r,disabled:a}){const l=E.useContext(rs),c=E.useContext(mh),h=E.useContext(qR);let d=n;const m={role:r};if(c){!r&&c.role==="tablist"&&(m.role="tab");const y=c.getControllerId(t??null),S=c.getControlledId(t??null);m[La("event-key")]=t,m.id=y||i,d=n==null&&t!=null?c.activeKey===t:n,(d||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(m["aria-controls"]=S)}return m.role==="tab"&&(m["aria-selected"]=d,d||(m.tabIndex=-1),a&&(m.tabIndex=-1,m["aria-disabled"]=!0)),m.onClick=Ut(y=>{a||(e?.(y),t!=null&&l&&!y.isPropagationStopped()&&l(t,y))}),[m,{isActive:d}]}const JR=E.forwardRef((t,e)=>{let{as:n=Dy,active:i,eventKey:r}=t,a=r2(t,o2);const[l,c]=jR(Object.assign({key:Su(r,a.href),active:i},a));return l[La("active")]=c.isActive,b.jsx(n,Object.assign({},a,l,{ref:e}))});JR.displayName="NavItem";const s2=["as","onSelect","activeKey","role","onKeyDown"];function a2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const KE=()=>{},YE=La("event-key"),KR=E.forwardRef((t,e)=>{let{as:n="div",onSelect:i,activeKey:r,role:a,onKeyDown:l}=t,c=a2(t,s2);const h=mR(),d=E.useRef(!1),m=E.useContext(rs),y=E.useContext(qR);let S,w;y&&(a=a||"tablist",r=y.activeKey,S=y.getControlledId,w=y.getControllerId);const T=E.useRef(null),x=N=>{const D=T.current;if(!D)return null;const L=lo(D,`[${YE}]:not([aria-disabled=true])`),U=D.querySelector("[aria-selected=true]");if(!U||U!==document.activeElement)return null;const O=L.indexOf(U);if(O===-1)return null;let q=O+N;return q>=L.length&&(q=0),q<0&&(q=L.length-1),L[q]},A=(N,D)=>{N!=null&&(i?.(N,D),m?.(N,D))},M=N=>{if(l?.(N),!y)return;let D;switch(N.key){case"ArrowLeft":case"ArrowUp":D=x(-1);break;case"ArrowRight":case"ArrowDown":D=x(1);break;default:return}D&&(N.preventDefault(),A(D.dataset[QB("EventKey")]||null,N),d.current=!0,h())};E.useEffect(()=>{if(T.current&&d.current){const N=T.current.querySelector(`[${YE}][aria-selected=true]`);N?.focus()}d.current=!1});const I=vh(e,T);return b.jsx(rs.Provider,{value:A,children:b.jsx(mh.Provider,{value:{role:a,activeKey:Su(r),getControlledId:S||KE,getControllerId:w||KE},children:b.jsx(n,Object.assign({},c,{onKeyDown:M,ref:I,role:a}))})})});KR.displayName="Nav";const l2=Object.assign(KR,{Item:JR});function Mg(t){t===void 0&&(t=ch());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function u2(t){const e=E.useRef(t);return e.current=t,e}function c2(t){const e=u2(t);E.useEffect(()=>()=>e.current(),[])}function f2(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const XE=La("modal-open");class jy{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return f2(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(go(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(XE,""),go(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(XE),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Ng=(t,e)=>fh?t==null?(e||ch()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function d2(t,e){const n=gh(),[i,r]=E.useState(()=>Ng(t,n?.document));if(!i){const a=Ng(t);a&&r(a)}return E.useEffect(()=>{},[e,i]),E.useEffect(()=>{const a=Ng(t);a!==i&&r(a)},[t,i]),i}function h2({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const a=E.useRef(null),l=E.useRef(e),c=Ut(n);E.useEffect(()=>{e?l.current=!0:c(a.current)},[e,c]);const h=vh(a,Pa(t)),d=E.cloneElement(t,{ref:h});return e?d:r||!l.current&&i?null:d}const p2=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function m2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function g2(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:a,onExited:l,addEndListener:c,children:h}=t,d=m2(t,p2);const m=E.useRef(null),y=vh(m,Pa(h)),S=D=>L=>{D&&m.current&&D(m.current,L)},w=E.useCallback(S(e),[e]),T=E.useCallback(S(n),[n]),x=E.useCallback(S(i),[i]),A=E.useCallback(S(r),[r]),M=E.useCallback(S(a),[a]),I=E.useCallback(S(l),[l]),N=E.useCallback(S(c),[c]);return Object.assign({},d,{nodeRef:m},e&&{onEnter:w},n&&{onEntering:T},i&&{onEntered:x},r&&{onExit:A},a&&{onExiting:M},l&&{onExited:I},c&&{addEndListener:N},{children:typeof h=="function"?(D,L)=>h(D,Object.assign({},L,{ref:y})):E.cloneElement(h,{ref:y})})}const v2=["component"];function y2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const _2=E.forwardRef((t,e)=>{let{component:n}=t,i=y2(t,v2);const r=g2(i);return b.jsx(n,Object.assign({ref:e},r))});function S2({in:t,onTransition:e}){const n=E.useRef(null),i=E.useRef(!0),r=Ut(e);return NE(()=>{if(!n.current)return;let a=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>a}),()=>{a=!0}},[t,r]),NE(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function b2({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[a,l]=E.useState(!e);e&&a&&l(!1);const c=S2({in:!!e,onTransition:d=>{const m=()=>{d.isStale()||(d.in?i?.(d.element,d.initial):(l(!0),n?.(d.element)))};Promise.resolve(r(d)).then(m,y=>{throw d.in||l(!0),y})}}),h=vh(c,Pa(t));return a&&!e?null:E.cloneElement(t,{ref:h})}function WE(t,e,n){return t?b.jsx(_2,Object.assign({},n,{component:t})):e?b.jsx(b2,Object.assign({},n,{transition:e})):b.jsx(h2,Object.assign({},n))}const w2=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function E2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let Ig;function C2(t){return Ig||(Ig=new jy({ownerDocument:t?.document})),Ig}function T2(t){const e=gh(),n=t||C2(e),i=E.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:E.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:E.useCallback(r=>{i.current.backdrop=r},[])})}const YR=E.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:a,children:l,backdrop:c=!0,keyboard:h=!0,onBackdropClick:d,onEscapeKeyDown:m,transition:y,runTransition:S,backdropTransition:w,runBackdropTransition:T,autoFocus:x=!0,enforceFocus:A=!0,restoreFocus:M=!0,restoreFocusOptions:I,renderDialog:N,renderBackdrop:D=nt=>b.jsx("div",Object.assign({},nt)),manager:L,container:U,onShow:O,onHide:q=()=>{},onExit:j,onExited:Y,onExiting:W,onEnter:re,onEntering:ie,onEntered:ae}=t,de=E2(t,w2);const B=gh(),Q=d2(U),ee=T2(L),ne=eR(),ce=tR(n),[P,K]=E.useState(!n),se=E.useRef(null);E.useImperativeHandle(e,()=>ee,[ee]),fh&&!ce&&n&&(se.current=Mg(B?.document)),n&&P&&K(!1);const le=Ut(()=>{if(ee.add(),sn.current=sr(document,"keydown",Je),Ke.current=sr(document,"focus",()=>setTimeout(be),!0),O&&O(),x){var nt,Gi;const Ro=Mg((nt=(Gi=ee.dialog)==null?void 0:Gi.ownerDocument)!=null?nt:B?.document);ee.dialog&&Ro&&!Id(ee.dialog,Ro)&&(se.current=Ro,ee.dialog.focus())}}),me=Ut(()=>{if(ee.remove(),sn.current==null||sn.current(),Ke.current==null||Ke.current(),M){var nt;(nt=se.current)==null||nt.focus==null||nt.focus(I),se.current=null}});E.useEffect(()=>{!n||!Q||le()},[n,Q,le]),E.useEffect(()=>{P&&me()},[P,me]),c2(()=>{me()});const be=Ut(()=>{if(!A||!ne()||!ee.isTopModal())return;const nt=Mg(B?.document);ee.dialog&&nt&&!Id(ee.dialog,nt)&&ee.dialog.focus()}),ve=Ut(nt=>{nt.target===nt.currentTarget&&(d?.(nt),c===!0&&q())}),Je=Ut(nt=>{h&&VU(nt)&&ee.isTopModal()&&(m?.(nt),nt.defaultPrevented||q())}),Ke=E.useRef(),sn=E.useRef(),Tn=(...nt)=>{K(!0),Y?.(...nt)};if(!Q)return null;const gi=Object.assign({role:i,ref:ee.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},de,{style:a,className:r,tabIndex:-1});let jt=N?N(gi):b.jsx("div",Object.assign({},gi,{children:E.cloneElement(l,{role:"document"})}));jt=WE(y,S,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:j,onExiting:W,onExited:Tn,onEnter:re,onEntering:ie,onEntered:ae,children:jt});let Jt=null;return c&&(Jt=D({ref:ee.setBackdropRef,onClick:ve}),Jt=WE(w,T,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Jt})),b.jsx(b.Fragment,{children:Kr.createPortal(b.jsxs(b.Fragment,{children:[Jt,jt]}),Q)})});YR.displayName="Modal";const x2=Object.assign(YR,{Manager:jy});function A2(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function R2(t,e){t.classList?t.classList.add(e):A2(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function QE(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function M2(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=QE(t.className,e):t.setAttribute("class",QE(t.className&&t.className.baseVal||"",e))}const na={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class XR extends jy{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,go(n,{[e]:`${parseFloat(go(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],go(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(R2(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";lo(n,na.FIXED_CONTENT).forEach(a=>this.adjustAndStore(i,a,e.scrollBarWidth)),lo(n,na.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-e.scrollBarWidth)),lo(n,na.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();M2(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";lo(n,na.FIXED_CONTENT).forEach(a=>this.restore(i,a)),lo(n,na.STICKY_CONTENT).forEach(a=>this.restore(r,a)),lo(n,na.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let Dg;function N2(t){return Dg||(Dg=new XR(t)),Dg}const WR=E.createContext({onHide(){}}),QR=E.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...a},l)=>{const c=E.useContext(WR),h=Gu(()=>{c?.onHide(),i?.()});return b.jsxs("div",{ref:l,...a,children:[r,n&&b.jsx(ky,{"aria-label":t,variant:e,onClick:h})]})});QR.displayName="AbstractModalHeader";const ZR=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"nav-item"),b.jsx(n,{ref:r,className:De(t,e),...i})));ZR.displayName="NavItem";const eM=E.forwardRef(({bsPrefix:t,className:e,as:n=Oy,active:i,eventKey:r,disabled:a=!1,...l},c)=>{t=Be(t,"nav-link");const[h,d]=jR({key:Su(r,l.href),active:i,disabled:a,...l});return b.jsx(n,{...l,...h,ref:c,disabled:a,className:De(e,t,a&&"disabled",d.isActive&&"active")})});eM.displayName="NavLink";const tM=E.forwardRef((t,e)=>{const{as:n="div",bsPrefix:i,variant:r,fill:a=!1,justify:l=!1,navbar:c,navbarScroll:h,className:d,activeKey:m,...y}=Ay(t,{activeKey:"onSelect"}),S=Be(i,"nav");let w,T,x=!1;const A=E.useContext(ds),M=E.useContext(Ly);return A?(w=A.bsPrefix,x=c??!0):M&&({cardHeaderBsPrefix:T}=M),b.jsx(l2,{as:n,ref:e,activeKey:m,className:De(d,{[S]:!x,[`${w}-nav`]:x,[`${w}-nav-scroll`]:x&&h,[`${T}-${r}`]:!!T,[`${S}-${r}`]:!!r,[`${S}-fill`]:a,[`${S}-justified`]:l}),...y})});tM.displayName="Nav";const I2=Object.assign(tM,{Item:ZR,Link:eM}),nM=E.forwardRef(({bsPrefix:t,className:e,as:n,...i},r)=>{t=Be(t,"navbar-brand");const a=n||(i.href?"a":"span");return b.jsx(a,{...i,ref:r,className:De(e,t)})});nM.displayName="NavbarBrand";const iM=E.forwardRef(({children:t,bsPrefix:e,...n},i)=>{e=Be(e,"navbar-collapse");const r=E.useContext(ds);return b.jsx(ZA,{in:!!(r&&r.expanded),...n,children:b.jsx("div",{ref:i,className:e,children:t})})});iM.displayName="NavbarCollapse";const oM=E.forwardRef(({bsPrefix:t,className:e,children:n,label:i="Toggle navigation",as:r="button",onClick:a,...l},c)=>{t=Be(t,"navbar-toggler");const{onToggle:h,expanded:d}=E.useContext(ds)||{},m=Gu(y=>{a&&a(y),h&&h()});return r==="button"&&(l.type="button"),b.jsx(r,{...l,ref:c,onClick:m,"aria-label":i,className:De(e,t,!d&&"collapsed"),children:n||b.jsx("span",{className:`${t}-icon`})})});oM.displayName="NavbarToggle";const Rv=new WeakMap,ZE=(t,e)=>{if(!t||!e)return;const n=Rv.get(e)||new Map;Rv.set(e,n);let i=n.get(t);return i||(i=e.matchMedia(t),i.refCount=0,n.set(i.media,i)),i};function D2(t,e=typeof window>"u"?void 0:window){const n=ZE(t,e),[i,r]=E.useState(()=>n?n.matches:!1);return BR(()=>{let a=ZE(t,e);if(!a)return r(!1);let l=Rv.get(e);const c=()=>{r(a.matches)};return a.refCount++,a.addListener(c),c(),()=>{a.removeListener(c),a.refCount--,a.refCount<=0&&l?.delete(a.media),a=void 0}},[t]),i}function O2(t){const e=Object.keys(t);function n(c,h){return c===h?h:c?`${c} and ${h}`:h}function i(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function r(c){const h=i(c);let d=t[h];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function a(c){let h=t[c];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function l(c,h,d){let m;typeof c=="object"?(m=c,d=h,h=!0):(h=h||!0,m={[c]:h});let y=E.useMemo(()=>Object.entries(m).reduce((S,[w,T])=>((T==="up"||T===!0)&&(S=n(S,a(w))),(T==="down"||T===!0)&&(S=n(S,r(w))),S),""),[JSON.stringify(m)]);return D2(y,d)}return l}const k2=O2({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),rM=E.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Be(e,"offcanvas-body"),b.jsx(n,{ref:r,className:De(t,e),...i})));rM.displayName="OffcanvasBody";const P2={[ni]:"show",[fo]:"show"},sM=E.forwardRef(({bsPrefix:t,className:e,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:a=!1,appear:l=!1,...c},h)=>(t=Be(t,"offcanvas"),b.jsx(dh,{ref:h,addEndListener:Ry,in:i,mountOnEnter:r,unmountOnExit:a,appear:l,...c,childRef:Pa(n),children:(d,m)=>E.cloneElement(n,{...m,className:De(e,n.props.className,(d===ni||d===vu)&&`${t}-toggling`,P2[d])})})));sM.displayName="OffcanvasToggling";const aM=E.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},a)=>(t=Be(t,"offcanvas-header"),b.jsx(QR,{ref:a,...r,className:De(e,t),closeLabel:n,closeButton:i})));aM.displayName="OffcanvasHeader";const L2=Ny("h5"),lM=E.forwardRef(({className:t,bsPrefix:e,as:n=L2,...i},r)=>(e=Be(e,"offcanvas-title"),b.jsx(n,{ref:r,className:De(t,e),...i})));lM.displayName="OffcanvasTitle";function U2(t){return b.jsx(sM,{...t})}function F2(t){return b.jsx(nR,{...t})}const uM=E.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":i,placement:r="start",responsive:a,show:l=!1,backdrop:c=!0,keyboard:h=!0,scroll:d=!1,onEscapeKeyDown:m,onShow:y,onHide:S,container:w,autoFocus:T=!0,enforceFocus:x=!0,restoreFocus:A=!0,restoreFocusOptions:M,onEntered:I,onExit:N,onExiting:D,onEnter:L,onEntering:U,onExited:O,backdropClassName:q,manager:j,renderStaticNode:Y=!1,...W},re)=>{const ie=E.useRef();t=Be(t,"offcanvas");const[ae,de]=E.useState(!1),B=Gu(S),Q=k2(a||"xs","up");E.useEffect(()=>{de(a?l&&!Q:l)},[l,a,Q]);const ee=E.useMemo(()=>({onHide:B}),[B]);function ne(){return j||(d?(ie.current||(ie.current=new XR({handleContainerOverflow:!1})),ie.current):N2())}const ce=(le,...me)=>{le&&(le.style.visibility="visible"),L?.(le,...me)},P=(le,...me)=>{le&&(le.style.visibility=""),O?.(...me)},K=E.useCallback(le=>b.jsx("div",{...le,className:De(`${t}-backdrop`,q)}),[q,t]),se=le=>b.jsx("div",{...le,...W,className:De(e,a?`${t}-${a}`:t,`${t}-${r}`),"aria-labelledby":i,children:n});return b.jsxs(b.Fragment,{children:[!ae&&(a||Y)&&se({}),b.jsx(WR.Provider,{value:ee,children:b.jsx(x2,{show:ae,ref:re,backdrop:c,container:w,keyboard:h,autoFocus:T,enforceFocus:x&&!d,restoreFocus:A,restoreFocusOptions:M,onEscapeKeyDown:m,onShow:y,onHide:B,onEnter:ce,onEntering:U,onEntered:I,onExit:N,onExiting:D,onExited:P,manager:ne(),transition:U2,backdropTransition:F2,renderBackdrop:K,renderDialog:se})})]})});uM.displayName="Offcanvas";const B2=Object.assign(uM,{Body:rM,Header:aM,Title:lM}),cM=E.forwardRef(({onHide:t,...e},n)=>{const i=E.useContext(ds),r=Gu(()=>{i==null||i.onToggle==null||i.onToggle(),t?.()});return b.jsx(B2,{ref:n,show:!!(i!=null&&i.expanded),...e,renderStaticNode:!0,onHide:r})});cM.displayName="NavbarOffcanvas";const fM=E.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Be(e,"navbar-text"),b.jsx(n,{ref:r,className:De(t,e),...i})));fM.displayName="NavbarText";const dM=E.forwardRef((t,e)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:a,fixed:l,sticky:c,className:h,as:d="nav",expanded:m,onToggle:y,onSelect:S,collapseOnSelect:w=!1,...T}=Ay(t,{expanded:"onToggle"}),x=Be(n,"navbar"),A=E.useCallback((...N)=>{S?.(...N),w&&m&&y?.(!1)},[S,w,m,y]);T.role===void 0&&d!=="nav"&&(T.role="navigation");let M=`${x}-expand`;typeof i=="string"&&(M=`${M}-${i}`);const I=E.useMemo(()=>({onToggle:()=>y?.(!m),bsPrefix:x,expanded:!!m,expand:i}),[x,m,i,y]);return b.jsx(ds.Provider,{value:I,children:b.jsx(rs.Provider,{value:A,children:b.jsx(d,{ref:e,...T,className:De(h,x,i&&M,r&&`${x}-${r}`,a&&`bg-${a}`,c&&`sticky-${c}`,l&&`fixed-${l}`)})})})});dM.displayName="Navbar";const eC=Object.assign(dM,{Brand:nM,Collapse:iM,Offcanvas:cM,Text:fM,Toggle:oM}),hM=E.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const a=Be(t,"row"),l=KA(),c=YA(),h=`${a}-cols`,d=[];return l.forEach(m=>{const y=i[m];delete i[m];let S;y!=null&&typeof y=="object"?{cols:S}=y:S=y;const w=m!==c?`-${m}`:"";S!=null&&d.push(`${h}${w}-${S}`)}),b.jsx(n,{ref:r,...i,className:De(e,a,...d)})});hM.displayName="Row";const pM=E.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:i,as:r="div",className:a,...l},c)=>{t=Be(t,"spinner");const h=`${t}-${n}`;return b.jsx(r,{ref:c,...l,className:De(a,h,i&&`${h}-${i}`,e&&`text-${e}`)})});pM.displayName="Spinner";const mM=({name:t,onClick:e,subItems:n})=>{const[i,r]=E.useState(!1);return b.jsxs("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[b.jsxs("div",{className:"dropdown-item d-flex justify-content-between",style:{cursor:"pointer"},onClick:e,children:[t," ",n?b.jsx("span",{children:""}):null]}),n&&i&&b.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:0,left:"100%",minWidth:"180px",zIndex:1e3},children:n.map((a,l)=>b.jsx(mM,{name:a.name,onClick:a.onClick,subItems:a.subItems},l))})]})},Vr=({title:t,items:e,onClick:n})=>{const[i,r]=E.useState(!1),a=e&&e.length>0;return b.jsxs("div",{className:"nav-item dropdown",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[b.jsx("span",{className:"nav-link dropdown-toggle",style:{cursor:a||n?"pointer":"default"},onClick:()=>{n&&n()},children:t}),i&&a&&b.jsx("div",{className:"dropdown-menu show",style:{minWidth:"180px"},children:e.map((l,c)=>b.jsx(mM,{...l},c))})]})};class fr{folderHandle;fileHandle;filename;data;constructor(e,n,i,r){this.folderHandle=e,this.filename=n,this.fileHandle=i,this.data=Ce(r),ka(this)}static async create(e,n,i={}){try{const r=await e.getFileHandle(n,{create:!1}),l=await(await r.getFile()).text(),c=l.trim()===""?{...i}:{...i,...JSON.parse(l)};return new fr(e,n,r,c)}catch{return new fr(e,n,null,{...i})}}async save(){try{if(this.isEmptyObject(this.data)){this.fileHandle&&(await this.folderHandle.removeEntry(this.filename),this.fileHandle=null);return}this.fileHandle||(this.fileHandle=await this.folderHandle.getFileHandle(this.filename,{create:!0}));let e=await this.fileHandle.queryPermission({mode:"readwrite"});if(e!=="granted"&&(e=await this.fileHandle.requestPermission({mode:"readwrite"})),e!=="granted")throw new Error("No permission to write file");const n=await this.fileHandle.createWritable();await n.write(JSON.stringify(this.data,null,2)),await n.close()}catch(e){console.error("Error saving JSON:",e)}}async updateField(e,n,i=!0){we(()=>{const r=e.split("/").filter(Boolean);let a=this.data;for(let l=0;l<r.length;l++){const c=r[l];l===r.length-1?n===void 0?delete a[c]:a[c]=n:((a[c]===void 0||a[c]===null||typeof a[c]!="object")&&(a[c]={}),a=a[c])}}),i&&await this.save()}getField(e){const n=e.split("/").filter(Boolean);let i=this.data;for(const r of n){if(i==null||typeof i!="object")return;i=i[r]}return i}isEmptyObject(e){return Object.keys(e).length===0}}class gM{path="";parentFolder;children=[];constructor(e=null){this.parentFolder=e,this.parentFolder?.children.push(this)}getByPath(e){if(this.path===e)return this;for(const n of this.children){const i=n.getByPath(e);if(i)return i}return null}getByAbsPath(e){return this.root.getByPath(e)}get root(){let e=this;for(;e.parentFolder;)e=e.parentFolder;return e}}class Dd extends gM{handle;_file=null;lastModified=0;constructor(e=null,n){super(e),this.handle=n,this.path=(e?.path||"")+"/"+(n?.name||""),yr(this,{lastModified:Ce,getFile:ut.bound})}get name(){return this.handle.name}async getFile(e=!1){if(!this._file||e){const n=await this.handle.getFile();we(()=>{this._file=n,this.lastModified=n.lastModified})}return this._file}async copyToFolder(e,n){const i=await this.getFile();let r=this.name;if(n){const c=this.name.includes(".")?this.name.substring(this.name.lastIndexOf(".")):"";r=n+c}let a;try{if(a=await e.handle.getFileHandle(r),(await a.getFile()).size===i.size)return new Dd(e,a)}catch{a=await e.handle.getFileHandle(r,{create:!0})}const l=await a.createWritable();return await l.write(i),await l.close(),new Dd(e,a)}}class Vn extends gM{handle;static async open(e,n){if(!n)throw new Error("Folder name cannot be empty");let i;if(e)i=await e.handle.getDirectoryHandle(n,{create:!0});else throw new Error("Root folder access required. Provide a parent folder handle.");return new Vn(e,i)}constructor(e=null,n){super(e),this.handle=n,this.path=(e?.path||"")+"/"+(n?.name||"")}get name(){return this.handle?.name}}async function $2(t){try{console.log("[tmpfiles] Uploading:",t.name);const e=new FormData;e.append("file",t);const n=await fetch("https://tmpfiles.org/api/v1/upload",{method:"POST",body:e});if(!n.ok)throw new Error(`HTTP ${n.status}`);const i=await n.json();console.log("[tmpfiles] Response:",i);const r=i?.data?.url;if(!r)throw new Error("No URL returned");return r.replace("tmpfiles.org/","tmpfiles.org/dl/")}catch(e){throw console.error("[tmpfiles] Upload failed:",e),e}}async function G2(t,e){try{if(e&&((r,a)=>{const l=r.name.toLowerCase(),c=decodeURIComponent(a.split("/").pop()||"").toLowerCase();return l===c})(t,e))return console.log("[ensureUploaded] Existing URL is valid:",e),e;console.log("[ensureUploaded] Uploading file because URL is missing or invalid:",t.name);const i=await $2(t);return console.log("[ensureUploaded] Uploaded URL:",i),i}catch(n){throw console.error("[ensureUploaded] Error ensuring file upload:",n),n}}class qu extends Dd{shot;urlObject=null;web_url="";mediaFolder=null;mediaJson=null;onTagChanged;file=null;_urlPromise=null;constructor(e,n){super(n,e),this.handle=e,this.shot=n.parentFolder,yr(this,{urlObject:Ce,web_url:Ce,revokeUrl:ut,delete:ut,getUrlObject:ut,tags:ur,addTag:ut,removeTag:ut,setTags:ut}),this._urlPromise=null}async load(){this.mediaJson=await fr.create(this.parentFolder.handle,this.name+".json")}get name(){return this.handle.name}async delete(){try{this.revokeUrl(),await this.parentFolder?.handle.removeEntry(this.handle.name)}catch(e){throw console.error("Failed to delete video file:",e),e}}revokeUrl(){this.urlObject&&(URL.revokeObjectURL(this.urlObject),this.urlObject=null)}async getWebUrl(){const e=await G2(await this.getFile(),this.web_url);return we(()=>{this.web_url=e}),this.web_url}async getUrlObject(){return this.urlObject?this.urlObject:this._urlPromise?this._urlPromise:(this._urlPromise=(async()=>{try{const e=await this.getFile();this.urlObject&&URL.revokeObjectURL(this.urlObject);const n=URL.createObjectURL(e);we(()=>{this.urlObject=n})}catch(e){console.error("Failed to create object URL:",e),we(()=>{this.urlObject=""})}finally{this._urlPromise=null}return this.urlObject})(),this._urlPromise)}static async fromUrl(e,n){try{const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch video: ${i.statusText}`);const r=await i.blob(),a=e.split("/"),l=a[a.length-1].split("?")[0],c=await n.handle.getFileHandle(l,{create:!0}),h=await c.createWritable();return await h.write(r),await h.close(),new qu(c,n)}catch(i){throw console.error("Failed to create LocalVideo from URL:",i),i}}log(){console.log(So(this))}get tags(){if(!this.mediaJson)return[];const e=this.mediaJson.getField("tags");return Array.isArray(e)?e:[]}async setTags(e){if(!this.mediaJson)return;const n=Array.from(new Set(e.filter(Boolean)));await this.mediaJson.updateField("tags",n.length?n:void 0)}async addTag(e){if(!e)return;const n=this.tags;n.includes(e)||(await this.setTags([...n,e]),this.onTagChanged?.(this,e,!0))}async removeTag(e){const n=this.tags;n.includes(e)&&(await this.setTags(n.filter(i=>i!==e)),this.onTagChanged?.(this,e,!1))}hasTag(e){return this.tags.includes(e)}toggleTag(e){e&&(this.hasTag(e)?this.removeTag(e):this.addTag(e))}async openInNewTab(){try{const e=await this.getUrlObject(),n=this.path.replace(/[\/\\]/g,"_");window.open(e,n,"noopener,noreferrer")}catch(e){console.error("Failed to open media in new tab:",e)}}get genInfo(){return this.mediaJson?this.mediaJson.getField("geninfo"):null}get sourceImage(){if(!this.mediaJson)return null;const e=this.genInfo?.source;return e?this.getByAbsPath(e):null}get generatedMedia(){const e=[];for(const n of this.mediaFolder.media)n.genInfo&&n.genInfo.source&&n.genInfo.source==this.path&&e.push(n);return e}}class vo extends qu{base64Data=null;async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.getFile(),n=await e.arrayBuffer(),i=e.type||"image/png",r=H2(n);return this.base64Data={rawBase64:r,mime:i},this.base64Data}catch(e){return console.error("Failed to create Base64 from file:",e),{rawBase64:"",mime:"image/png"}}}static async fromBase64(e,n,i){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const l=atob(r),c=l.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=l.charCodeAt(S);const d=await n.handle.getFileHandle(i,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new vo(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalImage from Base64:",r),r}}}function H2(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}var V2={};let z2,q2;function j2(){return{geminiUrl:z2,vertexUrl:q2}}function J2(t,e,n,i){var r,a;if(!t?.baseUrl){const l=j2();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}class xo{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(n))for(let d=0;d<h.length;d++){const m=h[d];g(m,e.slice(a+1),n[d])}else for(const d of h)g(d,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];g(h[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function K2(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const d=a[h];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}Mv(t,r,a,0,l)}}function Mv(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const h of c[l])Mv(h,e,n,i+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(d=>!d.startsWith("_")&&!r.has(d)),h={};for(const d of c)h[d]=l[d];for(const[d,m]of Object.entries(h)){const y=[];for(const S of n.slice(i))S==="*"?y.push(d):y.push(S);g(l,y,m)}for(const d of c)delete l[d]}}else{const l=t;a in l&&Mv(l[a],e,n,i+1,r)}}function Jy(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Y2(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function X2(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],Q2(l)),e}function W2(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],Z2(l)),e}function Q2(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>e$(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function Z2(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>t$(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function e$(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],a$(n)),e}function t$(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],l$(n)),e}function n$(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function i$(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function o$(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],r$(l)),e}function r$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function vM(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],s$(l)),e}function s$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function a$(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Jy(i));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function l$(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Jy(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}var tC;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tC||(tC={}));var nC;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(nC||(nC={}));var iC;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(iC||(iC={}));var ar;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ar||(ar={}));var oC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(oC||(oC={}));var rC;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(rC||(rC={}));var sC;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(sC||(sC={}));var aC;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(aC||(aC={}));var lC;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lC||(lC={}));var uC;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(uC||(uC={}));var cC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(cC||(cC={}));var fC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(fC||(fC={}));var dC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(dC||(dC={}));var hC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(hC||(hC={}));var pC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(pC||(pC={}));var mC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mC||(mC={}));var gC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gC||(gC={}));var vC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(vC||(vC={}));var yC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(yC||(yC={}));var Od;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Od||(Od={}));var _C;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(_C||(_C={}));var SC;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(SC||(SC={}));var bC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bC||(bC={}));var Nv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Nv||(Nv={}));var wC;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(wC||(wC={}));var EC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(EC||(EC={}));var CC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(CC||(CC={}));var TC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(TC||(TC={}));var xC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(xC||(xC={}));var AC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(AC||(AC={}));var RC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(RC||(RC={}));var MC;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(MC||(MC={}));var NC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(NC||(NC={}));var IC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(IC||(IC={}));var DC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(DC||(DC={}));var OC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(OC||(OC={}));var kC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kC||(kC={}));var PC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(PC||(PC={}));var LC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(LC||(LC={}));var UC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(UC||(UC={}));var FC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(FC||(FC={}));var BC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(BC||(BC={}));var $C;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})($C||($C={}));var GC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(GC||(GC={}));var HC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(HC||(HC={}));var VC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(VC||(VC={}));var zC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zC||(zC={}));var qC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(qC||(qC={}));var jC;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(jC||(jC={}));var JC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(JC||(JC={}));var KC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(KC||(KC={}));var YC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(YC||(YC={}));var XC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(XC||(XC={}));var WC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WC||(WC={}));var QC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(QC||(QC={}));var ga;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ga||(ga={}));class Iv{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ql{get text(){var e,n,i,r,a,l,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const y=[];for(const S of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[w,T]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(T!==null||T!==void 0)&&y.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;m=!0,d+=S.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,i,r,a,l,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const y of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[S,w]of Object.entries(y))S!=="inlineData"&&(w!==null||w!==void 0)&&m.push(S);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,a,l,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,a,l,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,a,l,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.output}}class ZC{}class eT{}class u${}class c${}class f${}class d${}class tT{}class nT{}class iT{}class h${}class kd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new kd;let r;const a=e;return n?r=W2(a):r=X2(a),Object.assign(i,r),i}}class oT{}class rT{}class sT{}class aT{}class p${}class m${}class g${}class Ky{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Ky,a=o$(e);return Object.assign(i,a),i}}class v${}class y${}class _${}class lT{}class S${get text(){var e,n,i;let r="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,d]of Object.entries(c))h!=="text"&&h!=="thought"&&d!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class b${get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Yy,a=vM(e);return Object.assign(i,a),i}}function je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yM(t,e){const n=je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _M(t){return Array.isArray(t)?t.map(e=>Pd(e)):[Pd(t)]}function Pd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function SM(t){const e=Pd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bM(t){const e=Pd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>uT(e)):[uT(t)]}function Dv(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function cT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function fT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ft(t){if(t==null)throw new Error("ContentUnion is required");return Dv(t)?t:{role:"user",parts:wM(t)}}function Xy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ft(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Ft(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ft(n)):[Ft(e)]}function zn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(cT(t)||fT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ft(t)]}const e=[],n=[],i=Dv(t[0]);for(const r of t){const a=Dv(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(cT(r)||fT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:wM(n)}),e}function w$(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ar).includes(n[0].toUpperCase())?n[0].toUpperCase():ar.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ar).includes(i.toUpperCase())?i.toUpperCase():ar.TYPE_UNSPECIFIED})}}function Sa(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&w$(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(ar).includes(c.toUpperCase())?c.toUpperCase():ar.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Sa(c);else if(i.includes(l)){const h=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}h.push(Sa(d))}e[l]=h}else if(r.includes(l)){const h={};for(const[d,m]of Object.entries(c))h[d]=Sa(m);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=c}return e}function Wy(t){return Sa(t)}function Qy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Zy(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ua(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sa(e.response));return t}function Fa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function E$(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ao(t,e){if(typeof e!="string")throw new Error("name must be a string");return E$(t,e,"cachedContents")}function EM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function wr(t){return Jy(t)}function C$(t){return t!=null&&typeof t=="object"&&"name"in t}function T$(t){return t!=null&&typeof t=="object"&&"video"in t}function x$(t){return t!=null&&typeof t=="object"&&"uri"in t}function CM(t){var e;let n;if(C$(t)&&(n=t.name),!(x$(t)&&(n=t.uri,n===void 0))&&!(T$(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function TM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function xM(t){for(const e of["models","tunedModels","publisherModels"])if(A$(t,e))return t[e];return[]}function A$(t,e){return t!==null&&typeof t=="object"&&e in t}function R$(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function M$(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=R$(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function AM(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function N$(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function RM(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ba(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function MM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function I$(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>fG(l))),g(e,["inlinedResponses"],a)}const r=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["inlinedEmbedContentResponses"],a)}return e}function D$(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const r=p(t,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function O$(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function sd(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["metadata","state"]);r!=null&&g(e,["state"],MM(r));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const l=p(t,["metadata","endTime"]);l!=null&&g(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const h=p(t,["metadata","model"]);h!=null&&g(e,["model"],h);const d=p(t,["metadata","output"]);return d!=null&&g(e,["dest"],I$(RM(d))),e}function Ov(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["state"]);r!=null&&g(e,["state"],MM(r));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["createTime"]);l!=null&&g(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(e,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(e,["updateTime"],d);const m=p(t,["model"]);m!=null&&g(e,["model"],m);const y=p(t,["inputConfig"]);y!=null&&g(e,["src"],k$(y));const S=p(t,["outputConfig"]);S!=null&&g(e,["dest"],D$(RM(S)));const w=p(t,["completionStats"]);return w!=null&&g(e,["completionStats"],w),e}function k$(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const r=p(t,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function P$(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>cG(t,l))),g(n,["requests","requests"],a)}return n}function L$(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function U$(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function F$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function B$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function $$(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],G$(i));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function G$(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function NM(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>yG(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function H$(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function V$(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],O$(N$(r))),n}function dT(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],P$(t,AM(t,r)));const a=p(e,["config"]);return a!=null&&H$(a,n),n}function z$(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],je(t,i));const r=p(e,["src"]);r!=null&&g(n,["inputConfig"],L$(AM(t,r)));const a=p(e,["config"]);return a!=null&&V$(a,n),n}function q$(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function j$(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],Z$(t,r));const a=p(e,["config"]);return a!=null&&q$(a,n),n}function J$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function K$(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function Y$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function X$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function W$(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=Xy(t,i);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(g(n,["_self"],Q$(r,n)),K2(n,{"requests[].*":"requests[].request.*"})),n}function Q$(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Z$(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&g(n,["requests"],W$(t,r)),n}function eG(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function tG(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nG(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iG(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],NM(Ft(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const T=p(e,["frequencyPenalty"]);T!=null&&g(i,["frequencyPenalty"],T);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Wy(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let ie=N;Array.isArray(ie)&&(ie=ie.map(ae=>_G(ae))),g(n,["safetySettings"],ie)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let ie=Fa(D);Array.isArray(ie)&&(ie=ie.map(ae=>bG(Ua(ae)))),g(n,["tools"],ie)}const L=p(e,["toolConfig"]);if(n!==void 0&&L!=null&&g(n,["toolConfig"],SG(L)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],Ao(t,U));const O=p(e,["responseModalities"]);O!=null&&g(i,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const j=p(e,["speechConfig"]);if(j!=null&&g(i,["speechConfig"],Qy(j)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=p(e,["thinkingConfig"]);Y!=null&&g(i,["thinkingConfig"],Y);const W=p(e,["imageConfig"]);W!=null&&g(i,["imageConfig"],uG(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(i,["enableEnhancedCivicAnswers"],re),i}function oG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>$$(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function rG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function sG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function aG(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function lG(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function uG(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let c=zn(r);Array.isArray(c)&&(c=c.map(h=>NM(h))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(e,["config"]);return l!=null&&g(n,["request","generationConfig"],iG(t,l,p(n,["request"],{}))),n}function fG(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],oG(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function dG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function hG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function pG(t){const e={},n=p(t,["config"]);return n!=null&&dG(n,e),e}function mG(t){const e={},n=p(t,["config"]);return n!=null&&hG(n,e),e}function gG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>sd(l))),g(e,["batchJobs"],a)}return e}function vG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Ov(l))),g(e,["batchJobs"],a)}return e}function yG(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],eG(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],tG(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],U$(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function _G(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function SG(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],nG(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function bG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],aG(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],lG(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}var wo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(wo||(wo={}));class hs{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}let wG=class extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hs(wo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=dT(this.apiClient,e),i=n._url,r=fe("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,h=c.requests,d=[];for(const m of h){const y=Object.assign({},m);if(y.systemInstruction){const S=y.systemInstruction;delete y.systemInstruction;const w=y.request;w.systemInstruction=S,y.request=w}d.push(y)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=z$(this.apiClient,e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Ov(m))}else{const d=dT(this.apiClient,e);return c=fe("{model}:batchGenerateContent",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>sd(m))}}async createEmbeddingsInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=j$(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>sd(h))}}async get(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=sG(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Ov(m))}else{const d=rG(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>sd(m))}}async cancel(e){var n,i,r,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=B$(this.apiClient,e);l=fe("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=F$(this.apiClient,e);l=fe("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=mG(e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=vG(m),S=new lT;return Object.assign(S,y),S})}else{const d=pG(e);return c=fe("batches",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=gG(m),S=new lT;return Object.assign(S,y),S})}}async delete(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=K$(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>X$(m))}else{const d=J$(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>Y$(m))}}};function EG(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function hT(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>jG(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function CG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let m=zn(l);Array.isArray(m)&&(m=m.map(y=>hT(y))),g(e,["contents"],m)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],hT(Ft(c)));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>KG(y))),g(e,["tools"],m)}const d=p(t,["toolConfig"]);if(e!==void 0&&d!=null&&g(e,["toolConfig"],JG(d)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function TG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let y=zn(l);Array.isArray(y)&&(y=y.map(S=>S)),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Ft(c));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(S=>YG(S))),g(e,["tools"],y)}const d=p(t,["toolConfig"]);e!==void 0&&d!=null&&g(e,["toolConfig"],d);const m=p(t,["kmsKeyName"]);return e!==void 0&&m!=null&&g(e,["encryption_spec","kmsKeyName"],m),n}function xG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],yM(t,i));const r=p(e,["config"]);return r!=null&&CG(r,n),n}function AG(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],yM(t,i));const r=p(e,["config"]);return r!=null&&TG(r,n),n}function RG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ao(t,i)),n}function MG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ao(t,i)),n}function NG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function IG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function DG(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function OG(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kG(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function PG(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function LG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ao(t,i)),n}function UG(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Ao(t,i)),n}function FG(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function BG(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function $G(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function GG(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function HG(t){const e={},n=p(t,["config"]);return n!=null&&$G(n,e),e}function VG(t){const e={},n=p(t,["config"]);return n!=null&&GG(n,e),e}function zG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function qG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function jG(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],DG(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],OG(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],EG(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function JG(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],kG(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function KG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],FG(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],BG(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function YG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>PG(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function XG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function WG(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function QG(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Ao(t,i));const r=p(e,["config"]);return r!=null&&XG(r,n),n}function ZG(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Ao(t,i));const r=p(e,["config"]);return r!=null&&WG(r,n),n}class eH extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hs(wo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=AG(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const d=xG(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async get(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=UG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const d=LG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async delete(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=MG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=IG(m),S=new sT;return Object.assign(S,y),S})}else{const d=RG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=NG(m),S=new sT;return Object.assign(S,y),S})}}async update(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=ZG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const d=QG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=VG(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=qG(m),S=new aT;return Object.assign(S,y),S})}else{const d=HG(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=zG(m),S=new aT;return Object.assign(S,y),S})}}}function Ld(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function pT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(t){return this instanceof Ae?(this.v=t,this):new Ae(t)}function li(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(w){return function(T){return Promise.resolve(T).then(w,y)}}function c(w,T){i[w]&&(r[w]=function(x){return new Promise(function(A,M){a.push([w,x,A,M])>1||h(w,x)})},T&&(r[w]=T(r[w])))}function h(w,T){try{d(i[w](T))}catch(x){S(a[0][3],x)}}function d(w){w.value instanceof Ae?Promise.resolve(w.value.v).then(m,y):S(a[0][2],w)}function m(w){h("next",w)}function y(w){h("throw",w)}function S(w,T){w(T),a.shift(),a.length&&h(a[0][0],a[0][1])}}function ui(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof pT=="function"?pT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,h){l=t[a](l),r(c,h,l.done,l.value)})}}function r(a,l,c,h){Promise.resolve(h).then(function(d){a({value:d,done:c})},l)}}function tH(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:IM(n)}function IM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function nH(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function mT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!IM(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class iH{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new oH(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let oH=class{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),nH(a)}async sendMessage(e){var n;await this.sendPromise;const i=Ft(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const h=await r,d=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,m=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let S=[];m!=null&&(S=(c=m.slice(y))!==null&&c!==void 0?c:[]);const w=d?[d]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Ft(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?mT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return li(this,arguments,function*(){var r,a,l,c,h,d;const m=[];try{for(var y=!0,S=ui(e),w;w=yield Ae(S.next()),r=w.done,!r;y=!0){c=w.value,y=!1;const T=c;if(tH(T)){const x=(d=(h=T.candidates)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.content;x!==void 0&&m.push(x)}yield yield Ae(T)}}catch(T){a={error:T}}finally{try{!y&&!r&&(l=S.return)&&(yield Ae(l.call(S)))}finally{if(a)throw a.error}}this.recordHistory(n,m)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...mT(i)):this.history.push(e),this.history.push(...r)}};class yh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yh.prototype)}}function rH(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function sH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function aH(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],CM(n)),e}function lH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function uH(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],CM(n)),e}function cH(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function fH(t){const e={},n=p(t,["config"]);return n!=null&&cH(n,e),e}function dH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["files"],a)}return e}let hH=class extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hs(wo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fH(e);return a=fe("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=dH(h),m=new v$;return Object.assign(m,d),m})}}async createInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rH(e);return a=fe("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=sH(h),m=new y$;return Object.assign(m,d),m})}}async get(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uH(e);return a=fe("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=aH(e);return a=fe("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=lH(h),m=new _$;return Object.assign(m,d),m})}}};function ad(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pH(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>NH(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function mH(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function gH(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vH(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function yH(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const T=p(t,["responseModalities"]);T!=null&&g(e,["responseModalities"],T);const x=p(t,["responseSchema"]);x!=null&&g(e,["responseSchema"],x);const A=p(t,["routingConfig"]);A!=null&&g(e,["routingConfig"],A);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],DM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const L=p(t,["thinkingConfig"]);L!=null&&g(e,["thinkingConfig"],L);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _H(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function SH(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function bH(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],Zy(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&g(e,["setup","systemInstruction"],pH(Ft(T)));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let U=Fa(x);Array.isArray(U)&&(U=U.map(O=>DH(Ua(O)))),g(e,["setup","tools"],U)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],IH(A));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);if(e!==void 0&&L!=null&&g(e,["setup","proactivity"],L),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wH(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],yH(i));const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],DM(Zy(y)));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&g(e,["setup","systemInstruction"],Ft(T));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let O=Fa(x);Array.isArray(O)&&(O=O.map(q=>OH(Ua(q)))),g(e,["setup","tools"],O)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],A);const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);e!==void 0&&L!=null&&g(e,["setup","proactivity"],L);const U=p(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&g(e,["setup","explicitVadSignal"],U),n}function EH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],je(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],bH(r,n)),n}function CH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],je(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],wH(r,n)),n}function TH(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function xH(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["weightedPrompts"],i)}return e}function AH(t){const e={},n=p(t,["media"]);if(n!=null){let d=_M(n);Array.isArray(d)&&(d=d.map(m=>ad(m))),g(e,["mediaChunks"],d)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],ad(bM(i)));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],ad(SM(a)));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function RH(t){const e={},n=p(t,["media"]);if(n!=null){let d=_M(n);Array.isArray(d)&&(d=d.map(m=>m)),g(e,["mediaChunks"],d)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],bM(i));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],SM(a));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function MH(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const r=p(t,["toolCall"]);r!=null&&g(e,["toolCall"],r);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const l=p(t,["usageMetadata"]);l!=null&&g(e,["usageMetadata"],kH(l));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const h=p(t,["sessionResumptionUpdate"]);h!=null&&g(e,["sessionResumptionUpdate"],h);const d=p(t,["voiceActivityDetectionSignal"]);return d!=null&&g(e,["voiceActivityDetectionSignal"],d),e}function NH(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],mH(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],gH(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],ad(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function IH(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const i=p(t,["languageCode"]);if(i!=null&&g(e,["languageCode"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function DH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],_H(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],SH(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function OH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>vH(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function kH(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const r=p(t,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const l=p(t,["thoughtsTokenCount"]);l!=null&&g(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const h=p(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(T=>T)),g(e,["promptTokensDetails"],w)}const d=p(t,["cacheTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(T=>T)),g(e,["cacheTokensDetails"],w)}const m=p(t,["candidatesTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(T=>T)),g(e,["responseTokensDetails"],w)}const y=p(t,["toolUsePromptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>T)),g(e,["toolUsePromptTokensDetails"],w)}const S=p(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}function PH(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function LH(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],UH(i));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function UH(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function FH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let a=zn(r);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["contents"],a)}return n}function BH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["tokensInfo"],r)}return e}function $H(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],GH(i)),e}function GH(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function _h(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>XV(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function HH(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function VH(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function zH(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],Ft(i));const r=p(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>UM(c))),g(e,["tools"],l)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],PV(a)),n}function qH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let l=zn(r);Array.isArray(l)&&(l=l.map(c=>_h(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&VH(a),n}function jH(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let l=zn(r);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&zH(a,n),n}function JH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const r=p(t,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function KH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function YH(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function XH(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function WH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function QH(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function ZH(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const x=p(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&g(e,["parameters","outputOptions","compressionQuality"],x);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["editMode"]);e!==void 0&&I!=null&&g(e,["parameters","editMode"],I);const N=p(t,["baseSteps"]);return e!==void 0&&N!=null&&g(e,["parameters","editConfig","baseSteps"],N),n}function eV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>nz(h))),g(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&ZH(l,n),n}function tV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Sh(a))),g(e,["generatedImages"],r)}return e}function nV(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iV(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&g(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function oV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let c=Xy(t,r);Array.isArray(c)&&(c=c.map(h=>h)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&nV(a,n);const l=p(e,["model"]);return l!==void 0&&g(n,["requests[]","model"],je(t,l)),n}function rV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let l=Xy(t,r);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&iV(a,n),n}function sV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function aV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>$H(l))),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function lV(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function uV(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function cV(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fV(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dV(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function hV(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],_h(Ft(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const T=p(e,["frequencyPenalty"]);T!=null&&g(i,["frequencyPenalty"],T);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Wy(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let ie=N;Array.isArray(ie)&&(ie=ie.map(ae=>iz(ae))),g(n,["safetySettings"],ie)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let ie=Fa(D);Array.isArray(ie)&&(ie=ie.map(ae=>cz(Ua(ae)))),g(n,["tools"],ie)}const L=p(e,["toolConfig"]);if(n!==void 0&&L!=null&&g(n,["toolConfig"],uz(L)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],Ao(t,U));const O=p(e,["responseModalities"]);O!=null&&g(i,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const j=p(e,["speechConfig"]);if(j!=null&&g(i,["speechConfig"],Qy(j)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=p(e,["thinkingConfig"]);Y!=null&&g(i,["thinkingConfig"],Y);const W=p(e,["imageConfig"]);W!=null&&g(i,["imageConfig"],$V(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(i,["enableEnhancedCivicAnswers"],re),i}function pV(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],Ft(r));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(i,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const T=p(e,["frequencyPenalty"]);T!=null&&g(i,["frequencyPenalty"],T);const x=p(e,["seed"]);x!=null&&g(i,["seed"],x);const A=p(e,["responseMimeType"]);A!=null&&g(i,["responseMimeType"],A);const M=p(e,["responseSchema"]);M!=null&&g(i,["responseSchema"],Wy(M));const I=p(e,["responseJsonSchema"]);I!=null&&g(i,["responseJsonSchema"],I);const N=p(e,["routingConfig"]);N!=null&&g(i,["routingConfig"],N);const D=p(e,["modelSelectionConfig"]);D!=null&&g(i,["modelConfig"],D);const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let B=L;Array.isArray(B)&&(B=B.map(Q=>Q)),g(n,["safetySettings"],B)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let B=Fa(U);Array.isArray(B)&&(B=B.map(Q=>UM(Ua(Q)))),g(n,["tools"],B)}const O=p(e,["toolConfig"]);n!==void 0&&O!=null&&g(n,["toolConfig"],O);const q=p(e,["labels"]);n!==void 0&&q!=null&&g(n,["labels"],q);const j=p(e,["cachedContent"]);n!==void 0&&j!=null&&g(n,["cachedContent"],Ao(t,j));const Y=p(e,["responseModalities"]);Y!=null&&g(i,["responseModalities"],Y);const W=p(e,["mediaResolution"]);W!=null&&g(i,["mediaResolution"],W);const re=p(e,["speechConfig"]);re!=null&&g(i,["speechConfig"],LM(Qy(re)));const ie=p(e,["audioTimestamp"]);ie!=null&&g(i,["audioTimestamp"],ie);const ae=p(e,["thinkingConfig"]);ae!=null&&g(i,["thinkingConfig"],ae);const de=p(e,["imageConfig"]);if(de!=null&&g(i,["imageConfig"],GV(de)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function gT(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let l=zn(r);Array.isArray(l)&&(l=l.map(c=>_h(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],hV(t,a,n)),n}function vT(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["contents"]);if(r!=null){let l=zn(r);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],pV(t,a,n)),n}function yT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>LH(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function _T(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>m)),g(e,["candidates"],d)}const r=p(t,["createTime"]);r!=null&&g(e,["createTime"],r);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const h=p(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function mV(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const h=p(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&g(e,["parameters","includeSafetyAttributes"],h);const d=p(t,["includeRaiReason"]);e!==void 0&&d!=null&&g(e,["parameters","includeRaiReason"],d);const m=p(t,["language"]);e!==void 0&&m!=null&&g(e,["parameters","language"],m);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const S=p(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=p(t,["imageSize"]);if(e!==void 0&&w!=null&&g(e,["parameters","sampleImageSize"],w),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gV(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const x=p(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&g(e,["parameters","outputOptions","compressionQuality"],x);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I);const N=p(t,["enhancePrompt"]);return e!==void 0&&N!=null&&g(e,["parameters","enhancePrompt"],N),n}function vV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&mV(a,n),n}function yV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&gV(a,n),n}function _V(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>IV(l))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],kM(r)),e}function SV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Sh(l))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],PM(r)),e}function bV(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(t,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(t,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=p(t,["negativePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","negativePrompt"],h);const d=p(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&g(e,["parameters","enhancePrompt"],d),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=p(t,["lastFrame"]);e!==void 0&&m!=null&&g(e,["instances[0]","lastFrame"],bh(m));const y=p(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(w=>Ez(w))),g(e,["instances[0]","referenceImages"],S)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function wV(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&g(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const h=p(t,["aspectRatio"]);e!==void 0&&h!=null&&g(e,["parameters","aspectRatio"],h);const d=p(t,["resolution"]);e!==void 0&&d!=null&&g(e,["parameters","resolution"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["pubsubTopic"]);e!==void 0&&y!=null&&g(e,["parameters","pubsubTopic"],y);const S=p(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const T=p(t,["generateAudio"]);e!==void 0&&T!=null&&g(e,["parameters","generateAudio"],T);const x=p(t,["lastFrame"]);e!==void 0&&x!=null&&g(e,["instances[0]","lastFrame"],mi(x));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let N=A;Array.isArray(N)&&(N=N.map(D=>Cz(D))),g(e,["instances[0]","referenceImages"],N)}const M=p(t,["mask"]);e!==void 0&&M!=null&&g(e,["instances[0]","mask"],wz(M));const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&g(e,["parameters","compressionQuality"],I),n}function EV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],AV(l)),e}function CV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],RV(l)),e}function TV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],bh(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],FM(l));const c=p(e,["source"]);c!=null&&MV(c,n);const h=p(e,["config"]);return h!=null&&bV(h,n),n}function xV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],mi(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],BM(l));const c=p(e,["source"]);c!=null&&NV(c,n);const h=p(e,["config"]);return h!=null&&wV(h,n),n}function AV(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>OV(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function RV(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>kV(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function MV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],bh(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],FM(a)),n}function NV(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],mi(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],BM(a)),n}function IV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],HV(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(t,["_self"]);return r!=null&&g(e,["safetyAttributes"],kM(r)),e}function Sh(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],OM(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(t,["_self"]);r!=null&&g(e,["safetyAttributes"],PM(r));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function DV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],OM(n));const i=p(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["labels"],r)}return e}function OV(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],Sz(n)),e}function kV(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],bz(n)),e}function PV(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const T=p(t,["responseModalities"]);T!=null&&g(e,["responseModalities"],T);const x=p(t,["responseSchema"]);x!=null&&g(e,["responseSchema"],x);const A=p(t,["routingConfig"]);A!=null&&g(e,["routingConfig"],A);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],LM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const L=p(t,["thinkingConfig"]);L!=null&&g(e,["thinkingConfig"],L);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function LV(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function UV(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],je(t,i)),n}function FV(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function BV(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function $V(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GV(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&g(e,["imageSize"],i);const r=p(t,["outputMimeType"]);r!=null&&g(e,["imageOutputOptions","mimeType"],r);const a=p(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function HV(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],wr(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function OM(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],wr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function bh(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],wr(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mi(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],wr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function VV(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],TM(t,c)),i}function zV(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],TM(t,c)),i}function qV(t,e){const n={},i=p(e,["config"]);return i!=null&&VV(t,i,n),n}function jV(t,e){const n={},i=p(e,["config"]);return i!=null&&zV(t,i,n),n}function JV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let a=xM(r);Array.isArray(a)&&(a=a.map(l=>kv(l))),g(e,["models"],a)}return e}function KV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let a=xM(r);Array.isArray(a)&&(a=a.map(l=>Pv(l))),g(e,["models"],a)}return e}function YV(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const r=p(t,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function kv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const l=p(t,["_self"]);l!=null&&g(e,["tunedModelInfo"],fz(l));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const h=p(t,["outputTokenLimit"]);h!=null&&g(e,["outputTokenLimit"],h);const d=p(t,["supportedGenerationMethods"]);d!=null&&g(e,["supportedActions"],d);const m=p(t,["temperature"]);m!=null&&g(e,["temperature"],m);const y=p(t,["maxTemperature"]);y!=null&&g(e,["maxTemperature"],y);const S=p(t,["topP"]);S!=null&&g(e,["topP"],S);const w=p(t,["topK"]);w!=null&&g(e,["topK"],w);const T=p(t,["thinking"]);return T!=null&&g(e,["thinking"],T),e}function Pv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const l=p(t,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(S=>lV(S))),g(e,["endpoints"],y)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const h=p(t,["_self"]);h!=null&&g(e,["tunedModelInfo"],dz(h));const d=p(t,["defaultCheckpointId"]);d!=null&&g(e,["defaultCheckpointId"],d);const m=p(t,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(S=>S)),g(e,["checkpoints"],y)}return e}function XV(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],uV(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],cV(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],PH(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function WV(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],mi(n)),e}function QV(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(t,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const d=p(t,["addWatermark"]);e!==void 0&&d!=null&&g(e,["parameters","addWatermark"],d);const m=p(t,["outputMimeType"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","mimeType"],m);const y=p(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","compressionQuality"],y);const S=p(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const w=p(t,["labels"]);return e!==void 0&&w!=null&&g(e,["labels"],w),n}function ZV(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["source"]);r!=null&&tz(r,n);const a=p(e,["config"]);return a!=null&&QV(a,n),n}function ez(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Sh(r))),g(e,["generatedImages"],i)}return e}function tz(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],mi(r));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>WV(c))),g(e,["instances[0]","productImages"],l)}return n}function nz(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],mi(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const r=p(t,["referenceType"]);r!=null&&g(e,["referenceType"],r);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],YV(a));const l=p(t,["controlImageConfig"]);l!=null&&g(e,["controlImageConfig"],HH(l));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const h=p(t,["subjectImageConfig"]);return h!=null&&g(e,["subjectImageConfig"],h),e}function kM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function PM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function iz(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function oz(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],mi(n)),e}function rz(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const r=p(t,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&g(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const h=p(t,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),n}function sz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["source"]);r!=null&&lz(r,n);const a=p(e,["config"]);return a!=null&&rz(a,n),n}function az(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>DV(r))),g(e,["generatedMasks"],i)}return e}function lz(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],mi(r));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],oz(a)),n}function LM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const i=p(t,["languageCode"]);if(i!=null&&g(e,["languageCode"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function uz(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],fV(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function cz(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],FV(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],BV(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function UM(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>dV(S))),g(e,["functionDeclarations"],y)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function fz(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function dz(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function hz(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function pz(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function mz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],je(t,i));const r=p(e,["config"]);return r!=null&&hz(r,n),n}function gz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["config"]);return r!=null&&pz(r,n),n}function vz(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const h=p(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","compressionQuality"],h);const d=p(t,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=p(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const w=p(t,["mode"]);return e!==void 0&&w!=null&&g(e,["parameters","mode"],w),n}function yz(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],je(t,i));const r=p(e,["image"]);r!=null&&g(n,["instances[0]","image"],mi(r));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&vz(l,n),n}function _z(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Sh(a))),g(e,["generatedImages"],r)}return e}function Sz(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],wr(i));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function bz(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],wr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function wz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],mi(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function Ez(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],bh(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function Cz(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],mi(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function FM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],wr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function BM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],wr(i));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Tz(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function xz(t){const e={},n=p(t,["config"]);return n!=null&&Tz(n,e),e}function Az(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function Rz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&Az(i,e),e}function Mz(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function Nz(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["customMetadata"],a)}const r=p(t,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),n}function Iz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],Oz(l)),e}function Dz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const r=p(t,["config"]);return r!=null&&Nz(r,e),e}function Oz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function kz(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function Pz(t){const e={},n=p(t,["config"]);return n!=null&&kz(n,e),e}function Lz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["fileSearchStores"],a)}return e}function $M(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),g(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&g(e,["chunkingConfig"],l),n}function Uz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&$M(i,e),e}function Fz(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}const Bz="Content-Type",$z="X-Server-Timeout",Gz="User-Agent",Lv="x-goog-api-client",Hz="1.33.0",Vz=`google-genai-sdk/${Hz}`,zz="v1beta1",qz="v1beta";class jz{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:zz,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:qz,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const a=new AbortController,l=a.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&Jz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await ST(r),new Iv(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await ST(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return li(this,arguments,function*(){var i;const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield Ae(r.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=a.decode(m,{stream:!0});try{const T=JSON.parse(y);if("error"in T){const x=JSON.parse(JSON.stringify(T.error)),A=x.status,M=x.code,I=`got status: ${A}. ${JSON.stringify(T)}`;if(M>=400&&M<600)throw new yh({message:I,status:M})}}catch(T){if(T.name==="ApiError")throw T}l+=y;let S=-1,w=0;for(;;){S=-1,w=0;for(const A of h){const M=l.indexOf(A);M!==-1&&(S===-1||M<S)&&(S=M,w=A.length)}if(S===-1)break;const T=l.substring(0,S);l=l.substring(S+w);const x=T.trim();if(x.startsWith(c)){const A=x.substring(c.length).trim();try{const M=new Response(A,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ae(new Iv(M))}catch(M){throw new Error(`exception parsing stream chunk ${A}. ${M}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Vz+" "+this.clientOptions.userAgentExtra;return e[Gz]=n,e[Lv]=n,e[Bz]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append($z,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);r.sizeBytes=String(l.size);const c=(i=n?.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const h={file:r},d=this.getFileName(e),m=fe("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,d,h,n?.httpOptions);return a.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const a=this.clientOptions.uploader,l=await a.stat(n),c=String(l.size),h=(r=i?.mimeType)!==null&&r!==void 0?r:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),y={};i!=null&&$M(i,y);const S=await this.fetchUploadUrl(d,c,h,m,y,i?.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,a,l){var c;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function ST(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new yh({message:r,status:n}):new Error(r)}}function Jz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const d=l[h],m=c[h];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[h]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[h]=d)}return c}const r=i(n,e);t.body=JSON.stringify(r)}const Kz="mcp_used/unknown";let Yz=!1;function GM(t){for(const e of t)if(Xz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Yz}function HM(t){var e;const n=(e=t[Lv])!==null&&e!==void 0?e:"";t[Lv]=(n+` ${Kz}`).trimStart()}function Xz(t){return t!==null&&typeof t=="object"&&t instanceof e_}function Wz(t){return li(this,arguments,function*(n,i=100){let r,a=0;for(;a<i;){const l=yield Ae(n.listTools({cursor:r}));for(const c of l.tools)yield yield Ae(c),a++;if(!l.nextCursor)break;r=l.nextCursor}})}class e_{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new e_(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},l=[];for(const m of this.mcpClients)try{for(var c=!0,h=(n=void 0,ui(Wz(m))),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const y=r;l.push(y);const S=y.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=m}}catch(y){n={error:y}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),M$(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}async function Qz(t,e,n){const i=new b$;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class Zz{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=nq(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(N=>{d=N}),y=e.callbacks,S=function(){d({})},w=this.apiClient,T={onopen:S,onmessage:N=>{Qz(w,y.onmessage,N)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=y?.onclose)!==null&&i!==void 0?i:function(N){}},x=this.webSocketFactory.create(h,tq(l),T);x.connect(),await m;const I={setup:{model:je(this.apiClient,e.model)}};return x.send(JSON.stringify(I)),new eq(x,this.apiClient)}}class eq{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xH(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=TH(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ga.PLAY)}pause(){this.sendPlaybackControl(ga.PAUSE)}stop(){this.sendPlaybackControl(ga.STOP)}resetContext(){this.sendPlaybackControl(ga.RESET_CONTEXT)}close(){this.conn.close()}}function tq(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function nq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const iq="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oq(t,e,n){const i=new S$;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const l=MH(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class rq{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Zz(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&GM(e.config.tools)&&HM(y);const S=uq(y);if(this.apiClient.isVertexAI())m=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,m);else{const j=this.apiClient.getApiKey();let Y="BidiGenerateContent",W="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Y="BidiGenerateContentConstrained",W="access_token"),m=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${Y}?${W}=${j}`}let w=()=>{};const T=new Promise(j=>{w=j}),x=e.callbacks,A=function(){var j;(j=x?.onopen)===null||j===void 0||j.call(x),w({})},M=this.apiClient,I={onopen:A,onmessage:j=>{oq(M,x.onmessage,j)},onerror:(n=x?.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=x?.onclose)!==null&&i!==void 0?i:function(j){}},N=this.webSocketFactory.create(m,lq(S),I);N.connect(),await T;let D=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const j=this.apiClient.getProject(),Y=this.apiClient.getLocation();D=`projects/${j}/locations/${Y}/`+D}let L={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Od.AUDIO]}:e.config.responseModalities=[Od.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],O=[];for(const j of U)if(this.isCallableTool(j)){const Y=j;O.push(await Y.tool())}else O.push(j);O.length>0&&(e.config.tools=O);const q={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=CH(this.apiClient,q):L=EH(this.apiClient,q),delete L.config,N.send(JSON.stringify(L)),new aq(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sq={turnComplete:!0};class aq{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=zn(n.turns),e.isVertexAI()||(i=i.map(r=>_h(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(iq)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sq),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:RH(e)}:n={realtimeInput:AH(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function lq(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function uq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const bT=10;function wT(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t?.tools)!==null&&n!==void 0?n:[])if(ba(l)){r=!0;break}if(!r)return!0;const a=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ba(t){return"callTool"in t&&typeof t.callTool=="function"}function cq(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ba(r)))!==null&&i!==void 0?i:!1}function ET(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ba(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function CT(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}let fq=class extends xo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,l,c;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!cq(n)||wT(n.config))return await this.generateContentInternal(h);const d=ET(n);if(d.length>0){const x=d.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let m,y;const S=zn(h.contents),w=(a=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:bT;let T=0;for(;T<w&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const x=m.candidates[0].content,A=[];for(const M of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(ba(M)){const N=await M.callTool(m.functionCalls);A.push(...N)}T++,y={role:"user",parts:A},h.contents=zn(h.contents),h.contents.push(x),h.contents.push(y),CT(h.config)&&(S.push(x),S.push(y))}return CT(h.config)&&(m.automaticFunctionCallingHistory=S),m},this.generateContentStream=async n=>{var i,r,a,l,c;if(this.maybeMoveToResponseJsonSchem(n),wT(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const h=ET(n);if(h.length>0){const y=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(r=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,m=(c=(l=n?.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const l=[];if(i?.generatedImages)for(const h of i.generatedImages)h&&h?.safetyAttributes&&((r=h?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h?.safetyAttributes:l.push(h);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new hs(wo.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,a,l,c,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(c=n.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async h=>ba(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&GM(e.config.tools)){const h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),HM(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ba(l)){const c=l,h=await c.tool();for(const d of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:bT;let l=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(d,m,y){return li(this,arguments,function*(){for(var S,w,T,x,A,M;c<a;){l&&(c++,l=!1);const L=yield Ae(d.processParamsMaybeAddMcpUsage(y)),U=yield Ae(d.generateContentStreamInternal(L)),O=[],q=[];try{for(var I=!0,N=(w=void 0,ui(U)),D;D=yield Ae(N.next()),S=D.done,!S;I=!0){x=D.value,I=!1;const j=x;if(yield yield Ae(j),j.candidates&&(!((A=j.candidates[0])===null||A===void 0)&&A.content)){q.push(j.candidates[0].content);for(const Y of(M=j.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(c<a&&Y.functionCall){if(!Y.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(Y.functionCall.name)){const W=yield Ae(m.get(Y.functionCall.name).callTool([Y.functionCall]));O.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${Y.functionCall.name}`)}}}}catch(j){w={error:j}}finally{try{!I&&!S&&(T=N.return)&&(yield Ae(T.call(N)))}finally{if(w)throw w.error}}if(O.length>0){l=!0;const j=new ql;j.candidates=[{content:{role:"user",parts:O}}],yield yield Ae(j);const Y=[];Y.push(...q),Y.push({role:"user",parts:O});const W=zn(y.contents).concat(Y);y.contents=W}else break}})})(this,h,e)}async generateContentInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=vT(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=_T(m),S=new ql;return Object.assign(S,y),S})}else{const d=gT(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=yT(m),S=new ql;return Object.assign(S,y),S})}}async generateContentStreamInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=vT(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(y){return li(this,arguments,function*(){var S,w,T,x;try{for(var A=!0,M=ui(y),I;I=yield Ae(M.next()),S=I.done,!S;A=!0){x=I.value,A=!1;const N=x,D=_T(yield Ae(N.json()));D.sdkHttpResponse={headers:N.headers};const L=new ql;Object.assign(L,D),yield yield Ae(L)}}catch(N){w={error:N}}finally{try{!A&&!S&&(T=M.return)&&(yield Ae(T.call(M)))}finally{if(w)throw w.error}}})})}else{const d=gT(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(y){return li(this,arguments,function*(){var S,w,T,x;try{for(var A=!0,M=ui(y),I;I=yield Ae(M.next()),S=I.done,!S;A=!0){x=I.value,A=!1;const N=x,D=yT(yield Ae(N.json()));D.sdkHttpResponse={headers:N.headers};const L=new ql;Object.assign(L,D),yield yield Ae(L)}}catch(N){w={error:N}}finally{try{!A&&!S&&(T=M.return)&&(yield Ae(T.call(M)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=rV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=aV(m),S=new ZC;return Object.assign(S,y),S})}else{const d=oV(this.apiClient,e);return c=fe("{model}:batchEmbedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=sV(m),S=new ZC;return Object.assign(S,y),S})}}async generateImagesInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=yV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=SV(m),S=new eT;return Object.assign(S,y),S})}else{const d=vV(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=_V(m),S=new eT;return Object.assign(S,y),S})}}async editImageInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=eV(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=tV(h),m=new u$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=yz(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=_z(h),m=new c$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=ZV(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=ez(h),m=new f$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=sz(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=az(h),m=new d$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=UV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Pv(m))}else{const d=LV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>kv(m))}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=jV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=KV(m),S=new tT;return Object.assign(S,y),S})}else{const d=qV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=JV(m),S=new tT;return Object.assign(S,y),S})}}async update(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=gz(this.apiClient,e);return c=fe("{model}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Pv(m))}else{const d=mz(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>kv(m))}}async delete(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=XH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=QH(m),S=new nT;return Object.assign(S,y),S})}else{const d=YH(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=WH(m),S=new nT;return Object.assign(S,y),S})}}async countTokens(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=jH(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=KH(m),S=new iT;return Object.assign(S,y),S})}else{const d=qH(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=JH(m),S=new iT;return Object.assign(S,y),S})}}async computeTokens(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=FH(this.apiClient,e);return a=fe("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=BH(h),m=new h$;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=xV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>{const y=CV(m),S=new kd;return Object.assign(S,y),S})}else{const d=TV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>{const y=EV(m),S=new kd;return Object.assign(S,y),S})}}};class dq extends xo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=i$(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l}else{const d=n$(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=Y2(e);return a=fe("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function hq(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pq(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Eq(a))),g(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function mq(t,e,n){const i={},r=p(e,["expireTime"]);n!==void 0&&r!=null&&g(n,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const l=p(e,["uses"]);n!==void 0&&l!=null&&g(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],wq(t,c));const h=p(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&g(n,["fieldMask"],h),i}function gq(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],mq(t,i,n)),n}function vq(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function yq(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _q(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function Sq(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function bq(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],Zy(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&g(e,["setup","systemInstruction"],pq(Ft(T)));const x=p(t,["tools"]);if(e!==void 0&&x!=null){let U=Fa(x);Array.isArray(U)&&(U=U.map(O=>Tq(Ua(O)))),g(e,["setup","tools"],U)}const A=p(t,["sessionResumption"]);e!==void 0&&A!=null&&g(e,["setup","sessionResumption"],Cq(A));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);if(e!==void 0&&L!=null&&g(e,["setup","proactivity"],L),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wq(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],je(t,i));const r=p(e,["config"]);return r!=null&&g(n,["config"],bq(r,n)),n}function Eq(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],vq(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],yq(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],hq(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function Cq(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tq(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],_q(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],Sq(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function xq(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function Aq(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=xq(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(d=>l.includes(d)?`generationConfig.${d}`:d));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Rq extends xo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=gq(this.apiClient,e);a=fe("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=Aq(c,e.config);return r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function Mq(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function Nq(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&Mq(i,e),e}function Iq(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function Dq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function Oq(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&Dq(i,e),e}function kq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["documents"],a)}return e}class Pq extends xo{constructor(e){super(),this.apiClient=e,this.list=async n=>new hs(wo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Iq(e);return a=fe("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Nq(e);r=fe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Oq(e);return a=fe("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=kq(h),m=new p$;return Object.assign(m,d),m})}}}class Lq extends xo{constructor(e,n=new Pq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new hs(wo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xz(e);return a=fe("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mz(e);return a=fe("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Rz(e);r=fe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Pz(e);return a=fe("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Lz(h),m=new m$;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Uz(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Fz(h),m=new g$;return Object.assign(m,d),m})}}async importFile(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Dz(e);return a=fe("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const d=Iz(h),m=new Ky;return Object.assign(m,d),m})}}}let VM=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return VM=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Uq=()=>VM();function Uv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Fv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Yn extends Error{}let Xn=class Bv extends Yn{constructor(e,n,i,r){super(`${Bv.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new wh({message:i,cause:Fv(n)});const a=n;return e===400?new qM(e,a,i,r):e===401?new jM(e,a,i,r):e===403?new JM(e,a,i,r):e===404?new KM(e,a,i,r):e===409?new YM(e,a,i,r):e===422?new XM(e,a,i,r):e===429?new WM(e,a,i,r):e>=500?new QM(e,a,i,r):new Bv(e,a,i,r)}},$v=class extends Xn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},wh=class extends Xn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},zM=class extends wh{constructor({message:e}={}){super({message:e??"Request timed out."})}},qM=class extends Xn{},jM=class extends Xn{},JM=class extends Xn{},KM=class extends Xn{},YM=class extends Xn{},XM=class extends Xn{},WM=class extends Xn{},QM=class extends Xn{};const Fq=/^[a-z][a-z0-9+.-]*:/i,Bq=t=>Fq.test(t);let Gv=t=>(Gv=Array.isArray,Gv(t));const $q=Gv;let Gq=$q;const TT=Gq;function Hq(t){if(!t)return!0;for(const e in t)return!1;return!0}function Vq(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const zq=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yn(`${t} must be an integer`);if(e<0)throw new Yn(`${t} must be a positive integer`);return e},qq=t=>{try{return JSON.parse(t)}catch{return}};const jq=t=>new Promise(e=>setTimeout(e,t));const ca="0.0.1";function Jq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Kq=()=>{var t,e,n,i,r;const a=Jq();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ca,"X-Stainless-OS":AT(Deno.build.os),"X-Stainless-Arch":xT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ca,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ca,"X-Stainless-OS":AT((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":xT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const l=Yq();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ca,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ca,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Yq(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,l=i[3]||0;return{browser:e,version:`${r}.${a}.${l}`}}}return null}const xT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",AT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let kf;const Xq=()=>kf??(kf=Kq());function Wq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ZM(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Qq(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return ZM({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function eN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Zq(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}const e3=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const tN=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Og(t,e,n){return tN(),new File(t,e??"unknown_file",n)}function t3(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const n3=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const nN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",i3=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&nN(t),o3=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function r3(t,e,n){if(tN(),t=await t,i3(t))return t instanceof File?t:Og([await t.arrayBuffer()],t.name);if(o3(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Og(await Hv(r),e,n)}const i=await Hv(t);if(e||(e=t3(t)),!n?.type){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Og(i,e,n)}async function Hv(t){var e,n,i,r,a;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(nN(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(n3(t))try{for(var c=!0,h=ui(t),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const m=r;l.push(...await Hv(m))}}catch(m){n={error:m}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}else{const m=(a=t?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${s3(t)}`)}return l}function s3(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let iN=class{constructor(e){this._client=e}};iN._key=[];function oN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const RT=Object.freeze(Object.create(null)),a3=(t=oN)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],l=n.reduce((m,y,S)=>{var w,T,x;/[?#]/.test(y)&&(r=!0);const A=i[S];let M=(r?encodeURIComponent:t)(""+A);return S!==i.length&&(A==null||typeof A=="object"&&A.toString===((x=Object.getPrototypeOf((T=Object.getPrototypeOf((w=A.hasOwnProperty)!==null&&w!==void 0?w:RT))!==null&&T!==void 0?T:RT))===null||x===void 0?void 0:x.toString))&&(M=A+"",a.push({start:m.length+y.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),m+y+(S===i.length?"":M)},""),c=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,w)=>{const T=" ".repeat(w.start-m),x="^".repeat(w.length);return m=w.start+w.length,S+T+x},"");throw new Yn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${l}
${y}`)}return l}),Pf=a3(oN);class rN extends iN{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,a=Ld(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Yn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Yn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Pf`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Pf`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Pf`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const a=n??{},{api_version:l=this._client.apiVersion}=a,c=Ld(a,["api_version"]);return this._client.get(Pf`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}}rN._key=Object.freeze(["interactions"]);class sN extends rN{}function l3(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Lf;function t_(t){let e;return(Lf??(e=new globalThis.TextEncoder,Lf=e.encode.bind(e)))(t)}let Uf;function MT(t){let e;return(Uf??(e=new globalThis.TextDecoder,Uf=e.decode.bind(e)))(t)}let Eh=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?t_(e):e;this.buffer=l3([this.buffer,n]);const i=[];let r;for(;(r=u3(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(MT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,l=MT(this.buffer.subarray(0,a));i.push(l),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};Eh.NEWLINE_CHARS=new Set([`
`,"\r"]);Eh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function u3(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function c3(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Ud={off:0,error:200,warn:300,info:400,debug:500},NT=(t,e,n)=>{if(t){if(Vq(Ud,t))return t;Ht(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ud))}`)}};function Kl(){}function Ff(t,e,n){return!e||Ud[t]>Ud[n]?Kl:e[t].bind(e)}const f3={error:Kl,warn:Kl,info:Kl,debug:Kl};let IT=new WeakMap;function Ht(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return f3;const r=IT.get(n);if(r&&r[0]===i)return r[1];const a={error:Ff("error",n,i),warn:Ff("warn",n,i),info:Ff("info",n,i),debug:Ff("debug",n,i)};return IT.set(n,[i,a]),a}const qr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);let d3=class Yl{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const a=i?Ht(i):console;function l(){return li(this,arguments,function*(){var h,d,m,y;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,T=ui(h3(e,n)),x;x=yield Ae(T.next()),h=x.done,!h;w=!0){y=x.value,w=!1;const A=y;if(!S)if(A.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ae(JSON.parse(A.data))}catch(M){throw a.error("Could not parse message into JSON:",A.data),a.error("From chunk:",A.raw),M}}}catch(A){d={error:A}}finally{try{!w&&!h&&(m=T.return)&&(yield Ae(m.call(T)))}finally{if(d)throw d.error}}S=!0}catch(A){if(Uv(A))return yield Ae(void 0);throw A}finally{S||n.abort()}})}return new Yl(l,n,i)}static fromReadableStream(e,n,i){let r=!1;function a(){return li(this,arguments,function*(){var h,d,m,y;const S=new Eh,w=eN(e);try{for(var T=!0,x=ui(w),A;A=yield Ae(x.next()),h=A.done,!h;T=!0){y=A.value,T=!1;const M=y;for(const I of S.decode(M))yield yield Ae(I)}}catch(M){d={error:M}}finally{try{!T&&!h&&(m=x.return)&&(yield Ae(m.call(x)))}finally{if(d)throw d.error}}for(const M of S.flush())yield yield Ae(M)})}function l(){return li(this,arguments,function*(){var h,d,m,y;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,T=ui(a()),x;x=yield Ae(T.next()),h=x.done,!h;w=!0){y=x.value,w=!1;const A=y;S||A&&(yield yield Ae(JSON.parse(A)))}}catch(A){d={error:A}}finally{try{!w&&!h&&(m=T.return)&&(yield Ae(m.call(T)))}finally{if(d)throw d.error}}S=!0}catch(A){if(Uv(A))return yield Ae(void 0);throw A}finally{S||n.abort()}})}return new Yl(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const l=i.next();e.push(l),n.push(l)}return a.shift()}});return[new Yl(()=>r(e),this.controller,this.client),new Yl(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return ZM({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const l=t_(JSON.stringify(r)+`
`);i.enqueue(l)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function h3(t,e){return li(this,arguments,function*(){var i,r,a,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Yn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Yn("Attempted to iterate over a response with no body");const c=new m3,h=new Eh,d=eN(t.body);try{for(var m=!0,y=ui(p3(d)),S;S=yield Ae(y.next()),i=S.done,!i;m=!0){l=S.value,m=!1;const w=l;for(const T of h.decode(w)){const x=c.decode(T);x&&(yield yield Ae(x))}}}catch(w){r={error:w}}finally{try{!m&&!i&&(a=y.return)&&(yield Ae(a.call(y)))}finally{if(r)throw r.error}}for(const w of h.flush()){const T=c.decode(w);T&&(yield yield Ae(T))}})}function p3(t){return li(this,arguments,function*(){var n,i,r,a;let l=new Uint8Array;try{for(var c=!0,h=ui(t),d;d=yield Ae(h.next()),n=d.done,!n;c=!0){a=d.value,c=!1;const m=a;if(m==null)continue;const y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?t_(m):m;let S=new Uint8Array(l.length+y.length);S.set(l),S.set(y,l.length),l=S;let w;for(;(w=c3(l))!==-1;)yield yield Ae(l.slice(0,w)),l=l.slice(w)}}catch(m){i={error:m}}finally{try{!c&&!n&&(r=h.return)&&(yield Ae(r.call(h)))}finally{if(i)throw i.error}}l.length>0&&(yield yield Ae(l))})}let m3=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=g3(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function g3(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function v3(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,l=await(async()=>{var c;if(e.options.stream)return Ht(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):d3.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),d=(c=h?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Ht(t).debug(`[${i}] response parsed`,qr({retryOfRequestLogID:r,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}let y3=class aN extends Promise{constructor(e,n,i=v3){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new aN(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};const lN=Symbol("brand.privateNullableHeaders");function*_3(t){if(!t)return;if(lN in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():TT(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=TT(i[1])?i[1]:[i[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,c])}}const kg=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,l]of _3(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[lN]:!0,values:e,nulls:n}};const Pg=t=>{var e,n,i,r,a,l;if(typeof globalThis.process<"u")return(i=(n=(e=V2)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||l===void 0?void 0:l.trim()};var uN;class Ch{constructor(e){var n,i,r,a,l,c,h,d=e===void 0?{}:e,{baseURL:m=Pg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Pg("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:S="v1beta"}=d,w=Ld(d,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:y,apiVersion:S},w),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(i=T.timeout)!==null&&i!==void 0?i:Ch.DEFAULT_TIMEOUT,this.logger=(r=T.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(l=(a=NT(T.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:NT(Pg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:x,this.fetchOptions=T.fetchOptions,this.maxRetries=(c=T.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=T.fetch)!==null&&h!==void 0?h:Wq(),this.encoder=e3,this._options=T,this.apiKey=y,this.apiVersion=S}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return kg([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Yn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ca}`}defaultIdempotencyKey(){return`stainless-node-retry-${Uq()}`}makeStatusError(e,n,i,r){return Xn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=Bq(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Hq(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new y3(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,a,l;const c=await e,h=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=h),await this.prepareOptions(c);const{req:d,url:m,timeout:y}=await this.buildRequest(c,{retryCount:h-n});await this.prepareRequest(d,{url:m,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,T=Date.now();if(Ht(this).debug(`[${S}] sending request`,qr({retryOfRequestLogID:i,method:c.method,url:m,options:c,headers:d.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new $v;const x=new AbortController,A=await this.fetchWithTimeout(m,d,y,x).catch(Fv),M=Date.now();if(A instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new $v;const D=Uv(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(n)return Ht(this).info(`[${S}] connection ${D?"timed out":"failed"} - ${N}`),Ht(this).debug(`[${S}] connection ${D?"timed out":"failed"} (${N})`,qr({retryOfRequestLogID:i,url:m,durationMs:M-T,message:A.message})),this.retryRequest(c,n,i??S);throw Ht(this).info(`[${S}] connection ${D?"timed out":"failed"} - error; no more retries left`),Ht(this).debug(`[${S}] connection ${D?"timed out":"failed"} (error; no more retries left)`,qr({retryOfRequestLogID:i,url:m,durationMs:M-T,message:A.message})),D?new zM:new wh({cause:A})}const I=`[${S}${w}] ${d.method} ${m} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${M-T}ms`;if(!A.ok){const N=await this.shouldRetry(A);if(n&&N){const j=`retrying, ${n} attempts remaining`;return await Zq(A.body),Ht(this).info(`${I} - ${j}`),Ht(this).debug(`[${S}] response error (${j})`,qr({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,durationMs:M-T})),this.retryRequest(c,n,i??S,A.headers)}const D=N?"error; no more retries left":"error; not retryable";Ht(this).info(`${I} - ${D}`);const L=await A.text().catch(j=>Fv(j).message),U=qq(L),O=U?void 0:L;throw Ht(this).debug(`[${S}] response error (${D})`,qr({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,message:O,durationMs:Date.now()-T})),this.makeStatusError(A.status,U,O,A.headers)}return Ht(this).info(I),Ht(this).debug(`[${S}] response start`,qr({retryOfRequestLogID:i,url:A.url,status:A.status,headers:A.headers,durationMs:M-T})),{response:A,options:c,controller:x,requestLogID:S,retryOfRequestLogID:i,startTime:T}}async fetchWithTimeout(e,n,i,r){const a=n||{},{signal:l,method:c}=a,h=Ld(a,["signal","method"]);l&&l.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),i),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},m?{duplex:"half"}:{}),{method:"GET"}),h);c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var a;let l;const c=r?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(l=d)}const h=r?.get("retry-after");if(h&&!l){const d=parseFloat(h);Number.isNaN(d)?l=Date.parse(h)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await jq(l),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,a;const l=Object.assign({},e),{method:c,path:h,query:d,defaultBaseURL:m}=l,y=this.buildURL(h,d,m);"timeout"in l&&zq("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:l}),T=await this.buildHeaders({options:e,method:c,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:T},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:y,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=kg([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Xq()),await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=kg([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Qq(e)}:this.encoder({body:e,headers:i})}}Ch.DEFAULT_TIMEOUT=6e4;class xt extends Ch{constructor(){super(...arguments),this.interactions=new sN(this)}}uN=xt;xt.GeminiNextGenAPIClient=uN;xt.GeminiNextGenAPIClientError=Yn;xt.APIError=Xn;xt.APIConnectionError=wh;xt.APIConnectionTimeoutError=zM;xt.APIUserAbortError=$v;xt.NotFoundError=KM;xt.ConflictError=YM;xt.RateLimitError=WM;xt.BadRequestError=qM;xt.AuthenticationError=jM;xt.InternalServerError=QM;xt.PermissionDeniedError=JM;xt.UnprocessableEntityError=XM;xt.toFile=r3;xt.Interactions=sN;function S3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function b3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function w3(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function E3(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function C3(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(t,["learningRateMultiplier"]);if(l!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const h=p(t,["learningRate"]);if(e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","learningRate"],h),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function T3(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec"],DT(w))}else if(r==="PREFERENCE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec"],DT(w))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const l=p(t,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(d==="PREFERENCE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let m=p(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(m==="PREFERENCE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function x3(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&U3(a);const l=p(t,["config"]);return l!=null&&C3(l,n),n}function A3(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&F3(a,n,e);const l=p(t,["config"]);return l!=null&&T3(l,n,e),n}function R3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function M3(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function N3(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function I3(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function D3(t,e){const n={},i=p(t,["config"]);return i!=null&&N3(i,n),n}function O3(t,e){const n={},i=p(t,["config"]);return i!=null&&I3(i,n),n}function k3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>cN(c))),g(n,["tuningJobs"],l)}return n}function P3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Vv(c))),g(n,["tuningJobs"],l)}return n}function L3(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const r=p(t,["name"]);return r!=null&&g(n,["endpoint"],r),n}function U3(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(n,["examples","examples"],r)}return n}function F3(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function cN(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],EM(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["tuningTask","completeTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["description"]);m!=null&&g(n,["description"],m);const y=p(t,["baseModel"]);y!=null&&g(n,["baseModel"],y);const S=p(t,["_self"]);return S!=null&&g(n,["tunedModel"],L3(S)),n}function Vv(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],EM(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["error"]);m!=null&&g(n,["error"],m);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const S=p(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const w=p(t,["tunedModel"]);w!=null&&g(n,["tunedModel"],w);const T=p(t,["preTunedModel"]);T!=null&&g(n,["preTunedModel"],T);const x=p(t,["supervisedTuningSpec"]);x!=null&&g(n,["supervisedTuningSpec"],x);const A=p(t,["preferenceOptimizationSpec"]);A!=null&&g(n,["preferenceOptimizationSpec"],A);const M=p(t,["tuningDataStats"]);M!=null&&g(n,["tuningDataStats"],M);const I=p(t,["encryptionSpec"]);I!=null&&g(n,["encryptionSpec"],I);const N=p(t,["partnerModelTuningSpec"]);N!=null&&g(n,["partnerModelTuningSpec"],N);const D=p(t,["customBaseModel"]);D!=null&&g(n,["customBaseModel"],D);const L=p(t,["experiment"]);L!=null&&g(n,["experiment"],L);const U=p(t,["labels"]);U!=null&&g(n,["labels"],U);const O=p(t,["outputUri"]);O!=null&&g(n,["outputUri"],O);const q=p(t,["pipelineJob"]);q!=null&&g(n,["pipelineJob"],q);const j=p(t,["serviceAccount"]);j!=null&&g(n,["serviceAccount"],j);const Y=p(t,["tunedModelDisplayName"]);Y!=null&&g(n,["tunedModelDisplayName"],Y);const W=p(t,["veoTuningSpec"]);return W!=null&&g(n,["veoTuningSpec"],W),n}function B3(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(t,["done"]);l!=null&&g(n,["done"],l);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function DT(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const r=p(t,["vertexDatasetResource"]);return r!=null&&g(n,["validationDatasetUri"],r),n}class $3 extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hs(wo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Nv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=M3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>Vv(m))}else{const d=R3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>cN(m))}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=O3(e);return c=fe("tuningJobs",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=P3(m),S=new oT;return Object.assign(S,y),S})}else{const d=D3(e);return c=fe("tunedModels",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=k3(m),S=new oT;return Object.assign(S,y),S})}}async cancel(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const d=b3(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=E3(m),S=new rT;return Object.assign(S,y),S})}else{const d=S3(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),l.then(m=>{const y=w3(m),S=new rT;return Object.assign(S,y),S})}}async tuneInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=A3(e,e);return a=fe("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>Vv(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=x3(e);return a=fe("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>B3(h))}}}class G3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const H3=1024*1024*8,V3=3,z3=1e3,q3=2,Fd="x-goog-upload-status";async function j3(t,e,n){var i;const r=await fN(t,e,n),a=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Fd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function J3(t,e,n){var i;const r=await fN(t,e,n),a=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Fd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=vM(a),c=new Yy;return Object.assign(c,l),c}async function fN(t,e,n){var i,r;let a=0,l=0,c=new Iv(new Response),h="upload";for(a=t.size;l<a;){const d=Math.min(H3,a-l),m=t.slice(l,l+d);l+d>=a&&(h+=", finalize");let y=0,S=z3;for(;y<V3&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[Fd]));)y++,await Y3(S),S=S*q3;if(l+=d,((r=c?.headers)===null||r===void 0?void 0:r[Fd])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function K3(t){return{size:t.size,type:t.type}}function Y3(t){return new Promise(e=>setTimeout(e,t))}class X3{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await j3(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J3(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K3(e)}}class W3{create(e,n,i){return new Q3(e,n,i)}}class Q3{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const OT="x-goog-api-key";class Z3{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(OT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(OT,this.apiKey)}}}const e4="gl-node/";class t4{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new xt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=J2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new Z3(this.apiKey);this.apiClient=new jz({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:e4+"web",uploader:new X3,downloader:new G3}),this.models=new fq(this.apiClient),this.live=new rq(this.apiClient,r,new W3),this.batches=new wG(this.apiClient),this.chats=new iH(this.models,this.apiClient),this.caches=new eH(this.apiClient),this.files=new hH(this.apiClient),this.operations=new dq(this.apiClient),this.authTokens=new Rq(this.apiClient),this.tunings=new $3(this.apiClient),this.fileSearchStores=new Lq(this.apiClient)}}let Lg=class extends Error{};const n_=["gemini-2.5-flash-image","gemini-3-pro-image-preview"];class xi{static options={img_models:{flash_image:"gemini-2.5-flash-image",pro_image:"gemini-3-pro-image-preview"}};static getApiKey=null;static setApiKey=null;static getGenAI(){const e=this.getApiKey?.()||"";if(console.log(e),!e)throw new Lg("No Google API key set");return new t4({apiKey:e})}static async txt2txt(e){try{const n=this.getGenAI(),i={},r=await n.models.generateContent({model:"gemini-2.5-flash",contents:e,config:i});return console.log("RES TEXT",r.text),r.text}catch(n){console.error("Goo Err Response",n);const i=n?.message||"";if(i.includes("API key not valid")||i.includes("API_KEY_INVALID")||n instanceof Lg)return this.showKeyPromptWindow(),null;throw n}}static async img2img(e,n=n_[0],i){try{const r=this.getGenAI(),a=[{text:e}];if(i?.length)for(const m of i)!m?.rawBase64||!m?.mime||(m.description&&a.push({text:m.description}),a.push({inlineData:{data:m.rawBase64,mimeType:m.mime}}));const l={model:n,contents:a,config:{imageConfig:{aspectRatio:"9:16",response_modalities:["Image"]}}};console.log("Gemini Payload",l);const c=await r.models.generateContent(l);console.log("GEMINI RES",c);const d=(c?.candidates??[])[0]?.content?.parts??[];for(const m of d)if(m.inlineData){const y=m.inlineData.data,S=m.inlineData.mimeType||"image/png";return{base64Obj:{rawBase64:y,mime:S},id:c.responseId}}return null}catch(r){const a=r?.message||"";if(a.includes("API key not valid")||a.includes("API_KEY_INVALID")||r instanceof Lg)return this.showKeyPromptWindow(),null;throw console.error("img2img error",r),r}}static showKeyPromptWindow(){const e=window.prompt("Your Google API key is missing or invalid. Please enter a valid key:");e?this.setApiKey?.(e):console.warn("User did not provide a valid API key.")}static async saveResultImage(e,n){return e&&e.base64Obj?.rawBase64?(console.log(e.base64Obj.mime.split("/")[1]),await vo.fromBase64({rawBase64:e.base64Obj.rawBase64,mime:e.base64Obj.mime},n,`${e.id}.${e.base64Obj.mime.split("/")[1]}`)):(console.warn("No valid image returned from GoogleAI.img2img"),null)}}async function n4(t,e){const n=Math.floor(Date.now()/1e3),i={alg:"HS256",typ:"JWT"},r={iss:t,exp:n+1800,nbf:n-5},a=Ug(JSON.stringify(i)),l=Ug(JSON.stringify(r)),c=`${a}.${l}`,h=await crypto.subtle.importKey("raw",new TextEncoder().encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),d=await crypto.subtle.sign("HMAC",h,new TextEncoder().encode(c));return`${c}.${Ug(d)}`}function Ug(t){let e;typeof t=="string"?e=new TextEncoder().encode(t):e=new Uint8Array(t);let n="";for(let i=0;i<e.length;i++)n+=String.fromCharCode(e[i]);return btoa(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Ie{static getKeysDict=null;static videoModels=["kling-v1","kling-v1-5","kling-v1-6","kling-v2-master","kling-v2-1","kling-v2-1-master","kling-v2-5-turbo","kling-v2-6"];static options={img2video:{duration:{five:"5",ten:"10"},mode:{std:"std",pro:"pro"},model:{v1:"kling-v1",v1_5:"kling-v1-5",v1_6:"kling-v1-6",v2_0m:"kling-v2-master",v2_1:"kling-v2-1",v2_1m:"kling-v2-1-master",v2_5:"kling-v2-5-turbo",v2_6:"kling-v2-6",vo1:"kling-video-o1"},sound:{on:"on",off:"off"}},motion_control:{mode:{std:"std",pro:"pro"},character_orientation:{image:"image",video:"video"},keep_original_sound:{yes:"yes",no:"no"}},omni_video:{model:{o1:"kling-video-o1"},mode:{std:"std",pro:"pro"},aspect_ratio:{landscape:"16:9",portrait:"9:16",square:"1:1"},duration:{three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"},video:{refer_type:{base:"base",feature:"feature"},keep_original_sound:{yes:"yes",no:"no"}},image:{type:{first_frame:"first_frame",end_frame:"end_frame"}}}};static async getToken(){const e=this.getKeysDict?.();if(!e)throw new Error("No Kling API keys provided or getKeysDict not set");return await n4(e.accessKey,e.secretKey)}static async postToKling(e,n){const r=`http://localhost:4000/proxy/${encodeURIComponent(e)}`,a=await this.getToken();console.log(`Kling API request to ${e}:`,n);const l=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){const h=await l.text();throw new Error(`Kling API request failed: ${h}`)}const c=await l.json();return console.log(`Kling API response from ${e}:`,c),c}static async txt2video(e,n="kling-v1"){const i={model_name:n,mode:"std",duration:"5",prompt:e,cfg_scale:.5};return{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/text2video",i)).data.task_id,workflow:"text2video"}}static async img2video(e){const{image:n,prompt:i,model:r=Ie.options.img2video.model.v2_6,duration:a=Ie.options.img2video.duration,mode:l=Ie.options.img2video.mode.std,cfg_scale:c=.5,static_mask:h,dynamic_masks:d,image_tail:m,camera_control:y,voice_list:S,sound:w="off",negative_prompt:T,callback_url:x,external_task_id:A}=e,M={model_name:r,image:n,prompt:i,duration:a,mode:l,cfg_scale:c,sound:w};return h&&(M.static_mask=h),d&&(M.dynamic_masks=d),m&&(M.image_tail=m),y&&(M.camera_control=y),S&&(M.voice_list=S),T&&(M.negative_prompt=T),x&&(M.callback_url=x),A&&(M.external_task_id=A),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/image2video",M)).data.task_id,workflow:"image2video"}}static async motionControl(e){const{image:n,video_url:i,prompt:r,mode:a=Ie.options.motion_control.mode.std,character_orientation:l,keep_original_sound:c=Ie.options.motion_control.keep_original_sound.yes,callback_url:h,external_task_id:d}=e,m={image_url:n,video_url:i,character_orientation:l,mode:a,keep_original_sound:c};return r&&(m.prompt=r),h&&(m.callback_url=h),d&&(m.external_task_id=d),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/motion-control",m)).data.task_id,workflow:"motion-control"}}static async getStatus(e,n="text2video"){const i=`https://api-singapore.klingai.com/v1/videos/${n}/${e}`,a=`http://localhost:4000/proxy/${encodeURIComponent(i)}`,l=await this.getToken();console.log("KLING_AI Get Status sent");const c=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!c.ok){const d=await c.text();throw new Error(`Task status request failed: ${d}`)}if((c.headers.get("content-type")||"").includes("application/json")){const d=await c.json();return console.log("KLING check status:",d),{status:d?.data?.task_status||"unknown",status_msg:d?.data?.task_status_msg||"",url:d?.data?.task_result?.videos?.[0]?.url||null}}}static async omniVideo(e){const{prompt:n,model:i="kling-video-o1",mode:r="pro",aspect_ratio:a,duration:l="5",image_list:c,element_list:h,video_list:d,callback_url:m,external_task_id:y}=e;if(!n)throw new Error("OmniVideo requires a prompt");const S={model_name:i,prompt:n,mode:r,duration:l};return a&&(S.aspect_ratio=a),c&&(S.image_list=c),h&&(S.element_list=h),d&&(S.video_list=d),m&&(S.callback_url=m),y&&(S.external_task_id=y),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/omni-video",S)).data.task_id,workflow:"omni-video"}}static async identifyFace(e){const{video_id:n,video_url:i}=e;if(!n&&!i||n&&i)throw new Error("You must provide either video_id or video_url, but not both.");const r={};return n&&(r.video_id=n),i&&(r.video_url=i),await this.postToKling("https://api-singapore.klingai.com/v1/videos/identify-face",r)}static async lipSync(e){const{session_id:n,face_choose:i,callback_url:r,external_task_id:a}=e;if(!n)throw new Error("session_id is required for LipSync");if(!i||i.length===0)throw new Error("face_choose must include at least one face");const l={session_id:n,face_choose:i};return r&&(l.callback_url=r),a&&(l.external_task_id=a),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/advanced-lip-sync",l)).data.task_id,workflow:"advanced-lip-sync"}}}const fu={KLING:"kling",GPT:"gpt",GOOGLE:"google"},i4={info:"info",success:"success",warning:"warning",error:"error"};class o4{notifications=[];types=i4;constructor(){ka(this,{},{autoBind:!0})}add(e,n=this.types.info,i){this.notifications.push({id:crypto.randomUUID(),message:e,type:n,...i})}remove(e){const n=this.notifications.find(i=>i.id===e);n?.onClose&&n.onClose(),this.notifications=this.notifications.filter(i=>i.id!==e)}clear(){this.notifications.forEach(e=>e.onClose?.()),this.notifications=[]}}const Ai=new o4;class kT{shot;id;is_checking_status=!1;_status_log="";constructor(e,n){this.shot=e,this.id=n,ka(this)}update(e){const i={...this.data||{},...e};this.shot.shotJson?.updateField(`tasks/${this.id}`,i)}log(){console.log({task:So(this),data:So(this.data)})}delete(){this.shot.removeTask(this)}get data(){return this.shot.shotJson?.getField(`tasks/${this.id}`)}get status(){return this.data.status??"submitted"}finish_checking(){we(()=>{this.is_checking_status=!1}),this._status_log=""}async check_status(e=30,n=15e3){if(this.data.provider===fu.KLING){we(()=>{this.is_checking_status=!0,this._status_log="start checking"}),console.log("started checking status");for(let i=0;i<=e;i++){try{console.log("new attempt");const r=await Ie.getStatus(this.id,this.data.workflow);if(console.log("status",r),this.update(r),r?.status==="succeed"&&r.url){await this.downloadResults(),this.finish_checking();return}if(r?.status==="failed"){console.warn(`Task ${this.id} failed.`),this.finish_checking();return}}catch(r){console.error("Status check failed:",r)}i<e&&(we(()=>{this._status_log=`(attempt ${i+1}/${e})`}),await new Promise(r=>setTimeout(r,n)))}console.warn(`Task ${this.id} did not finish after ${e} retries.`),this.finish_checking()}}async downloadResults(){const e=this.data?.url,n=await this.shot.MediaFolder_genVideo?.downloadFromUrl(e);n&&(this.data.geninfo&&n?.mediaJson?.updateField("geninfo",this.data.geninfo),this.update({result:n?.name}),Ai.add(`Downloaded ${this.shot.path}`,Ai.types.success,{onClick:()=>{this.navigate()},media:n}))}navigate(){this.shot.scene.selectShot(this.shot),this.shot.scene.project.setScene(this.shot.scene)}get result(){return this.shot.MediaFolder_genVideo.getMediaByFilename(this.data.result)}}class ju extends qu{static async fromBase64(e,n,i){try{const r=atob(e),a=r.length,l=new Uint8Array(a);for(let d=0;d<a;d++)l[d]=r.charCodeAt(d);const c=await n.handle.getFileHandle(i,{create:!0}),h=await c.createWritable();return await h.write(l),await h.close(),new ju(c,n)}catch(r){throw console.error("Failed to create LocalVideo from Base64:",r),r}}}class Th extends qu{base64Data=null;async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.getFile(),n=await e.arrayBuffer(),i=e.type||"audio/mpeg",r=r4(n);return this.base64Data={rawBase64:r,mime:i},this.base64Data}catch(e){return console.error("Failed to create Base64 from audio file:",e),{rawBase64:"",mime:"audio/mpeg"}}}static async fromBase64(e,n,i){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const l=atob(r),c=l.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=l.charCodeAt(S);const d=await n.handle.getFileHandle(i,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new Th(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalAudio from Base64:",r),r}}async getDuration(){const e=await this.getFile(),n=URL.createObjectURL(e);return await new Promise((i,r)=>{const a=new Audio;a.src=n,a.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(n),i(a.duration)}),a.addEventListener("error",()=>{URL.revokeObjectURL(n),r(new Error("Failed to load audio"))})})}}function r4(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}class va extends Vn{media=[];pickedMedia=null;selectedMedia=null;tags=["picked","start_frame","end_frame","motion_ref"];multi_tags=["ref_frame"];shot=null;onPicked;onSelected;static async create(e,n){const i=await e.handle.getDirectoryHandle(n,{create:!0}),r=new va(e,i);return await r.load(),r}constructor(e,n){super(e,n),this.shot=e,yr(this,{media:Ce,pickedMedia:Ce,selectedMedia:Ce,tags:Ce,multi_tags:Ce,shot:Ce,load:ut,deleteMedia:ut,setSelectedMedia:ut,downloadFromUrl:ut,loadFile:ut,saveFiles:ut,copyFromClipboard:ut,mediaOrdered:ur})}async load(){try{for await(const[,e]of this.handle.entries())e.kind==="file"&&await this.loadFile(e)}catch(e){console.error(`Failed to load MediaFolder '${this.name}':`,e),we(()=>{this.media=[]})}}get mediaOrdered(){return[...this.media].sort((e,n)=>e.lastModified-n.lastModified)}async deleteMedia(e,n=!0){if(!this.handle)throw new Error("Folder not loaded");if(!(n&&!window.confirm(`Delete this ${e instanceof vo?"image":"video"}?`)))try{await e.delete(),we(()=>{this.media=this.media.filter(i=>i!==e)})}catch(i){console.error("Failed to delete media:",i),alert(`Failed to delete ${e instanceof vo?"image":"video"}.`)}}setSelectedMedia(e){we(()=>{this.selectedMedia===e?this.selectedMedia=null:this.selectedMedia=e}),this.onSelected?.(e)}log(){console.log(So(this))}async downloadFromUrl(e){if(!this.handle)throw new Error("MediaFolder not loaded");try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch: ${n.statusText}`);const i=await n.blob();let a=new URL(e).pathname.split("/").pop()||"download";if(!a.includes(".")){const d=i.type.split("/")[1];d&&(a+=`.${d}`)}const l=await this.handle.getFileHandle(a,{create:!0}),c=await l.createWritable();return await c.write(i),await c.close(),this.loadFile(l)}catch(n){throw console.error("Failed to download media from URL:",n),n}}async loadFile(e){const n=e.name;let i=null;return n.match(/\.(png|jpe?g|gif|webp)$/i)?i=new vo(e,this):n.match(/\.(mp4|mov|webm|avi)$/i)?i=new ju(e,this):n.match(/\.(mp3|wav|m4a)$/i)&&(i=new Th(e,this)),await this.addMediaItem(i)}async addMediaItem(e){return e?(await e.load(),e.mediaFolder=this,e.onTagChanged=(n,i,r)=>{if(r&&!this.multi_tags.includes(i))for(const a of this.media)a!==n&&a.hasTag(i)&&a.removeTag(i)},we(()=>{this.media.push(e)}),e):null}async saveFiles(e){if(!this.handle)throw new Error("MediaFolder not loaded");for(const n of e)try{const i=await this.handle.getFileHandle(n.name,{create:!0}),r=await i.createWritable();await r.write(n),await r.close(),this.loadFile(i)}catch(i){console.error(`Failed to save file '${n.name}':`,i)}}async copyFromClipboard(){if(!this.handle)throw new Error("MediaFolder not loaded");if(!navigator.clipboard||!navigator.clipboard.read){console.warn("Clipboard API not supported");return}const e=[];try{const n=await navigator.clipboard.read();console.log(n);for(const i of n)for(const r of i.types){if(!r.startsWith("image/")&&!r.startsWith("video/"))continue;const a=await i.getType(r),l=a.name||`clipboard-${Date.now()}.${r.split("/")[1]}`;e.push(a instanceof File?a:new File([a],l,{type:r}))}if(e.length===0){console.info("Clipboard does not contain files");return}await this.saveFiles(e)}catch(n){console.error("Failed to read from clipboard:",n);return}}getMediaWithTag(e){return e?this.media.filter(n=>n.hasTag(e)):[]}getFirstMediaWithTag(e){return this.media.find(n=>n.hasTag(e))??null}hasAnyMediaWithTag(e){return this.media.some(n=>n.hasTag(e))}getMediaByFilename(e){return e?this.media.find(n=>n.name===e)??null:null}}class Bn extends Vn{shotJson=null;tasks=[];is_submitting_video=!1;is_generating=!1;static shot_states={Started:"#575757ff",Image_ready:"#8aa200ff",LipSync:"#893877ff",Finished:"#007118"};MediaFolder_results=null;MediaFolder_genVideo=null;MediaFolder_refVideo=null;MediaFolder_Audio=null;constructor(e,n){super(n,e),yr(this,{shotJson:Ce,tasks:Ce,is_submitting_video:Ce,is_generating:Ce,MediaFolder_results:Ce,MediaFolder_genVideo:Ce,MediaFolder_refVideo:Ce,MediaFolder_Audio:Ce})}get scene(){return this.parentFolder}get mediafolders(){return[this.MediaFolder_results,this.MediaFolder_Audio,this.MediaFolder_genVideo,this.MediaFolder_refVideo]}get srcImage(){return this.MediaFolder_results.getFirstMediaWithTag("start_frame")}get end_frame(){return this.MediaFolder_results.getFirstMediaWithTag("end_frame")}get kling_motion_video(){return this.MediaFolder_refVideo.getFirstMediaWithTag("motion_ref")}get outVideo(){return this.MediaFolder_genVideo.getFirstMediaWithTag("picked")}get outVideoLipsync(){return this.MediaFolder_genVideo.getFirstMediaWithTag("lipsync")}get unreal_frame(){return this.MediaFolder_results.getFirstMediaWithTag("unreal_frame")}get kling_face_id_data(){return this.outVideo?this.shotJson?.getField("KlingFaceID/"+this.outVideo.name):null}async load(){try{this.shotJson=await fr.create(this.handle,"shotinfo.json"),this.MediaFolder_results=await va.create(this,"results"),this.MediaFolder_results.tags=["start_frame","end_frame","ref_frame","unreal_frame"],this.MediaFolder_genVideo=await va.create(this,"genVideo"),this.MediaFolder_genVideo.tags=["picked","lipsync"],this.MediaFolder_refVideo=await va.create(this,"refVideo"),this.MediaFolder_refVideo.tags=["motion_ref"],this.MediaFolder_Audio=await va.create(this,"audio"),this.MediaFolder_Audio.tags=["ID-0","ID-1","ID-2"],this.loadTasks()}catch(e){console.error("Error loading shot:",this.name,e),this.shotJson=null}}loadTasks(){const e=this.shotJson?.getField("tasks");we(()=>{if(this.tasks=[],!(!e||typeof e!="object"))for(const n of Object.keys(e))this.tasks.push(new kT(this,n))})}addTask(e,n){const i=new kT(this,e);return we(()=>{this.tasks.push(i)}),i.update(n),i}removeTask(e){we(()=>{this.tasks=this.tasks.filter(i=>i!==e)});const n=this.shotJson?.getField("tasks")??{};delete n[e.id],this.shotJson?.updateField("tasks",n)}async delete(){if(!this.scene?.handle){console.error("Cannot delete shot: scene folder not set");return}try{await this.scene.handle.removeEntry(this.name,{recursive:!0}),we(()=>{this.scene.shots=this.scene.shots.filter(e=>e!==this)})}catch(e){console.error("Failed to delete shot:",e)}}async GenerateVideo(){we(()=>{this.is_submitting_video=!0});const e=this.shotJson?.data.video_prompt||"";try{const n=this.scene.project.workflows.generate_video_kling,i=n.model;let r=null;if(i===Ie.options.omni_video.model.o1){const l=[];this.srcImage&&l.push({image_url:(await this.srcImage.getBase64()).rawBase64,type:Ie.options.omni_video.image.type.first_frame}),this.end_frame&&l.push({image_url:(await this.end_frame.getBase64()).rawBase64,type:Ie.options.omni_video.image.type.end_frame}),r=await Ie.omniVideo({prompt:e,model:"kling-video-o1",mode:n.mode??"pro",duration:n.duration??"5",aspect_ratio:"16:9",image_list:l.length?l:void 0})}else if(this.srcImage){const l=(await this.srcImage.getBase64()).rawBase64,c=(await this.end_frame?.getBase64())?.rawBase64;r=await Ie.img2video({image:l,image_tail:c,prompt:e,model:i,mode:n.mode,duration:n.duration,sound:n?.sound??Ie.options.img2video.sound.off})}if(!r)return;const a=this.addTask(r.id,{provider:fu.KLING,workflow:r.workflow,geninfo:{workflow:"kling_generate_video",prompt:e,model:i,source:this.srcImage?.path,end_frame:this.end_frame?.path,kling:{mode:n.mode,duration:n.duration,sound:n?.sound??Ie.options.img2video.sound.off}}});await new Promise(l=>setTimeout(l,100)),a.check_status()}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{we(()=>{this.is_submitting_video=!1})}}async Kling_IdentyfiFace(){we(()=>{this.is_submitting_video=!0});try{if(console.log("Identyfying Video Face"),this.outVideo){const e=await this.outVideo.getWebUrl(),n=await Ie.identifyFace({video_url:e});console.log("FACE ID res:",n),n.message=="SUCCEED"&&this.shotJson?.updateField("KlingFaceID/"+this.outVideo.name,n.data)}}catch(e){console.error("Face Identification Failed:",e)}finally{we(()=>{this.is_submitting_video=!1})}}async Kling_LypSync(){we(()=>{this.is_submitting_video=!0});try{const e=[];for(const r of["ID-0","ID-1","ID-2"]){const a=this.MediaFolder_Audio.getFirstMediaWithTag(r);if(!a)continue;const l=await a.getBase64();if(!l)continue;const c=await a.getDuration();e.push({face_id:r.replace("ID-",""),sound_file_path:a.path,sound_file:l.rawBase64,sound_start_time:0,sound_end_time:Math.min(c*1e3,5e3),sound_insert_time:0,sound_volume:1,original_audio_volume:1})}if(e.length===0){console.warn("No audios found for lip-sync.");return}const n=await Ie.lipSync({session_id:this.kling_face_id_data.session_id,face_choose:e}),i=this.addTask(n.id,{provider:fu.KLING,workflow:n.workflow,geninfo:{workflow:"kling_LipSync",source:this.outVideo?.path,face_choose:e.map(r=>({...r,sound_file:""}))}});await new Promise(r=>setTimeout(r,100)),i.check_status(),await new Promise(r=>setTimeout(r,2e3))}catch(e){console.error("Submitting Lip Sync Failed:",e)}finally{we(()=>{this.is_submitting_video=!1})}}async GenerateVideo_KlingMotionControl(){we(()=>{this.is_submitting_video=!0});let e=this.shotJson?.data.video_prompt||"";try{const n=this.scene.project.workflows.kling_motion_control;if(this.srcImage&&this.kling_motion_video){const i=(await this.srcImage.getBase64()).rawBase64,r=await this.kling_motion_video.getWebUrl(),a=await Ie.motionControl({image:i,video_url:r,prompt:e,mode:n.mode,character_orientation:n.character_orientation,keep_original_sound:n.keep_original_sound}),l=this.addTask(a.id,{provider:fu.KLING,workflow:a.workflow,geninfo:{workflow:"kling_MotionControl",prompt:e,source:this.srcImage?.path,motionVideo:this.kling_motion_video.path,kling:{mode:n.mode,duration:n.duration,character_orientation:n.character_orientation,keep_original_sound:n.keep_original_sound}}});await new Promise(c=>setTimeout(c,100)),l.check_status(),await new Promise(c=>setTimeout(c,2e3))}}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{we(()=>{this.is_submitting_video=!1})}}getFilteredTags(){return this.scene.getTags().filter(e=>!this.getSkippedTags().includes(e.path))}async getImageTags(){const e=this.getSkippedTags(),n=[];for(const i of this.scene.getTags())if(!e.includes(i.path))try{const r=await i.image.getBase64();n.push({rawBase64:r.rawBase64,mime:r.mime,description:i.path})}catch(r){console.warn("Failed to load tag image:",i.path,r)}return n}async GenerateImage(){we(()=>{this.is_generating=!0});try{const e=await this.getImageTags(),n=this.shotJson?.data.prompt||"",i=await xi.img2img(n,this.scene.project.workflows.generate_shot_image.model,e),r=await xi.saveResultImage(i,this.MediaFolder_results);r&&(await this.MediaFolder_results?.addMediaItem(r))?.mediaJson?.updateField("geninfo",{workflow:"shot_generate_image",prompt:n,model:this.scene.project.workflows.generate_shot_image.model,art_refs:this.getFilteredTags().map(l=>l.path)})}catch(e){console.error("GenerateImage failed:",e)}finally{we(()=>{this.is_generating=!1})}}async StylizeImage(){if(!this.unreal_frame){console.error("No Reference Frame");return}we(()=>{this.is_generating=!0});try{const e=[],n=await this.unreal_frame.getBase64();e.push({rawBase64:n.rawBase64,mime:n.mime,description:"Base Image"}),e.push(...await this.getImageTags());const i=(this.scene.project.workflows.stylize_image_google.prompt||"")+(this.shotJson?.data.stylize_prompt||""),r=await xi.img2img(i,this.scene.project.workflows.stylize_image_google.model,e),a=await xi.saveResultImage(r,this.MediaFolder_results);a&&(await this.MediaFolder_results?.addMediaItem(a))?.mediaJson?.updateField("geninfo",{workflow:"stylize_image_google",global_prompt:this.scene.project.workflows.stylize_image_google.prompt||"",prompt:this.shotJson?.data.stylize_prompt||"",model:this.scene.project.workflows.stylize_image_google.model,art_refs:this.getFilteredTags().map(c=>c.path),source:this.unreal_frame.path})}catch(e){console.error("StylizeImage failed:",e)}finally{we(()=>{this.is_generating=!1})}}getSkippedTags(){return this.shotJson?.data?.skippedTags||[]}setTagSkipped(e,n){this.shotJson?.data&&(Array.isArray(this.shotJson.data.skippedTags)||(this.shotJson.data.skippedTags=[]),we(()=>{const i=this.shotJson.data.skippedTags;n?i.includes(e)||i.push(e):this.shotJson.data.skippedTags=i.filter(r=>r!==e)}),this.shotJson.save())}log(){console.log(So(this))}}function xe(t,e,n,i,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function V(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}let dN=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return dN=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};function zv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const qv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Se extends Error{}class Pt extends Se{constructor(e,n,i,r){super(`${Pt.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new xh({message:i,cause:qv(n)});const a=n?.error;return e===400?new hN(e,a,i,r):e===401?new pN(e,a,i,r):e===403?new mN(e,a,i,r):e===404?new gN(e,a,i,r):e===409?new vN(e,a,i,r):e===422?new yN(e,a,i,r):e===429?new _N(e,a,i,r):e>=500?new SN(e,a,i,r):new Pt(e,a,i,r)}}class Hn extends Pt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xh extends Pt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class i_ extends xh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class hN extends Pt{}class pN extends Pt{}class mN extends Pt{}class gN extends Pt{}class vN extends Pt{}class yN extends Pt{}class _N extends Pt{}class SN extends Pt{}class bN extends Se{constructor(){super("Could not parse response content as the length limit was reached")}}class wN extends Se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Xl extends Error{constructor(e){super(e)}}const s4=/^[a-z][a-z0-9+.-]*:/i,a4=t=>s4.test(t);let tn=t=>(tn=Array.isArray,tn(t)),PT=tn;function EN(t){return typeof t!="object"?{}:t??{}}function l4(t){if(!t)return!0;for(const e in t)return!1;return!0}function u4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const c4=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Se(`${t} must be an integer`);if(e<0)throw new Se(`${t} must be a positive integer`);return e},f4=t=>{try{return JSON.parse(t)}catch{return}},Ju=t=>new Promise(e=>setTimeout(e,t)),fa="6.10.0",d4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function h4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const p4=()=>{const t=h4();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":UT(Deno.build.os),"X-Stainless-Arch":LT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":UT(globalThis.process.platform??"unknown"),"X-Stainless-Arch":LT(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=m4();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function m4(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,l=i[3]||0;return{browser:e,version:`${r}.${a}.${l}`}}}return null}const LT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",UT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let FT;const g4=()=>FT??(FT=p4());function v4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function CN(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function TN(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return CN({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function xN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function y4(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const _4=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),AN="RFC3986",RN=t=>String(t),BT={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:RN},S4="RFC1738";let jv=(t,e)=>(jv=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),jv(t,e));const bi=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Bg=1024,b4=(t,e,n,i,r)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=Bg){const h=a.length>=Bg?a.slice(c,c+Bg):a,d=[];for(let m=0;m<h.length;++m){let y=h.charCodeAt(m);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||r===S4&&(y===40||y===41)){d[d.length]=h.charAt(m);continue}if(y<128){d[d.length]=bi[y];continue}if(y<2048){d[d.length]=bi[192|y>>6]+bi[128|y&63];continue}if(y<55296||y>=57344){d[d.length]=bi[224|y>>12]+bi[128|y>>6&63]+bi[128|y&63];continue}m+=1,y=65536+((y&1023)<<10|h.charCodeAt(m)&1023),d[d.length]=bi[240|y>>18]+bi[128|y>>12&63]+bi[128|y>>6&63]+bi[128|y&63]}l+=d.join("")}return l};function w4(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function $T(t,e){if(tn(t)){const n=[];for(let i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)}const MN={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},NN=function(t,e){Array.prototype.push.apply(t,tn(e)?e:[e])};let GT;const wt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:b4,encodeValuesOnly:!1,format:AN,formatter:RN,indices:!1,serializeDate(t){return(GT??(GT=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function E4(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const $g={};function IN(t,e,n,i,r,a,l,c,h,d,m,y,S,w,T,x,A,M){let I=t,N=M,D=0,L=!1;for(;(N=N.get($g))!==void 0&&!L;){const Y=N.get(t);if(D+=1,typeof Y<"u"){if(Y===D)throw new RangeError("Cyclic object value");L=!0}typeof N.get($g)>"u"&&(D=0)}if(typeof d=="function"?I=d(e,I):I instanceof Date?I=S?.(I):n==="comma"&&tn(I)&&(I=$T(I,function(Y){return Y instanceof Date?S?.(Y):Y})),I===null){if(a)return h&&!x?h(e,wt.encoder,A,"key",w):e;I=""}if(E4(I)||w4(I)){if(h){const Y=x?e:h(e,wt.encoder,A,"key",w);return[T?.(Y)+"="+T?.(h(I,wt.encoder,A,"value",w))]}return[T?.(e)+"="+T?.(String(I))]}const U=[];if(typeof I>"u")return U;let O;if(n==="comma"&&tn(I))x&&h&&(I=$T(I,h)),O=[{value:I.length>0?I.join(",")||null:void 0}];else if(tn(d))O=d;else{const Y=Object.keys(I);O=m?Y.sort(m):Y}const q=c?String(e).replace(/\./g,"%2E"):String(e),j=i&&tn(I)&&I.length===1?q+"[]":q;if(r&&tn(I)&&I.length===0)return j+"[]";for(let Y=0;Y<O.length;++Y){const W=O[Y],re=typeof W=="object"&&typeof W.value<"u"?W.value:I[W];if(l&&re===null)continue;const ie=y&&c?W.replace(/\./g,"%2E"):W,ae=tn(I)?typeof n=="function"?n(j,ie):j:j+(y?"."+ie:"["+ie+"]");M.set(t,D);const de=new WeakMap;de.set($g,M),NN(U,IN(re,ae,n,i,r,a,l,c,n==="comma"&&x&&tn(I)?null:h,d,m,y,S,w,T,x,A,de))}return U}function C4(t=wt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||wt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=AN;if(typeof t.format<"u"){if(!jv(BT,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const i=BT[n];let r=wt.filter;(typeof t.filter=="function"||tn(t.filter))&&(r=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in MN?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=wt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:wt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:wt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:wt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:wt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?wt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:wt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:wt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:wt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:wt.encodeValuesOnly,filter:r,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:wt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:wt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:wt.strictNullHandling}}function T4(t,e={}){let n=t;const i=C4(e);let r,a;typeof i.filter=="function"?(a=i.filter,n=a("",n)):tn(i.filter)&&(a=i.filter,r=a);const l=[];if(typeof n!="object"||n===null)return"";const c=MN[i.arrayFormat],h=c==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);const d=new WeakMap;for(let S=0;S<r.length;++S){const w=r[S];i.skipNulls&&n[w]===null||NN(l,IN(n[w],w,c,h,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}const m=l.join(i.delimiter);let y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""}function x4(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let HT;function o_(t){let e;return(HT??(e=new globalThis.TextEncoder,HT=e.encode.bind(e)))(t)}let VT;function zT(t){let e;return(VT??(e=new globalThis.TextDecoder,VT=e.decode.bind(e)))(t)}var gn,vn;class Ah{constructor(){gn.set(this,void 0),vn.set(this,void 0),xe(this,gn,new Uint8Array),xe(this,vn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?o_(e):e;xe(this,gn,x4([V(this,gn,"f"),n]));const i=[];let r;for(;(r=A4(V(this,gn,"f"),V(this,vn,"f")))!=null;){if(r.carriage&&V(this,vn,"f")==null){xe(this,vn,r.index);continue}if(V(this,vn,"f")!=null&&(r.index!==V(this,vn,"f")+1||r.carriage)){i.push(zT(V(this,gn,"f").subarray(0,V(this,vn,"f")-1))),xe(this,gn,V(this,gn,"f").subarray(V(this,vn,"f"))),xe(this,vn,null);continue}const a=V(this,vn,"f")!==null?r.preceding-1:r.preceding,l=zT(V(this,gn,"f").subarray(0,a));i.push(l),xe(this,gn,V(this,gn,"f").subarray(r.index)),xe(this,vn,null)}return i}flush(){return V(this,gn,"f").length?this.decode(`
`):[]}}gn=new WeakMap,vn=new WeakMap;Ah.NEWLINE_CHARS=new Set([`
`,"\r"]);Ah.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function A4(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function R4(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Bd={off:0,error:200,warn:300,info:400,debug:500},qT=(t,e,n)=>{if(t){if(u4(Bd,t))return t;Ot(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Bd))}`)}};function Wl(){}function Bf(t,e,n){return!e||Bd[t]>Bd[n]?Wl:e[t].bind(e)}const M4={error:Wl,warn:Wl,info:Wl,debug:Wl};let jT=new WeakMap;function Ot(t){const e=t.logger,n=t.logLevel??"off";if(!e)return M4;const i=jT.get(e);if(i&&i[0]===n)return i[1];const r={error:Bf("error",e,n),warn:Bf("warn",e,n),info:Bf("info",e,n),debug:Bf("debug",e,n)};return jT.set(e,[n,r]),r}const jr=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var jl;class Ri{constructor(e,n,i){this.iterator=e,jl.set(this,void 0),this.controller=n,xe(this,jl,i)}static fromSSEResponse(e,n,i){let r=!1;const a=i?Ot(i):console;async function*l(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of N4(e,n))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(m){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),m}if(d&&d.error)throw new Pt(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(m){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),m}if(h.event=="error")throw new Pt(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(zv(h))return;throw h}finally{c||n.abort()}}return new Ri(l,n,i)}static fromReadableStream(e,n,i){let r=!1;async function*a(){const c=new Ah,h=xN(e);for await(const d of h)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*l(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(zv(h))return;throw h}finally{c||n.abort()}}return new Ri(l,n,i)}[(jl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const l=i.next();e.push(l),n.push(l)}return a.shift()}});return[new Ri(()=>r(e),this.controller,V(this,jl,"f")),new Ri(()=>r(n),this.controller,V(this,jl,"f"))]}toReadableStream(){const e=this;let n;return CN({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const l=o_(JSON.stringify(r)+`
`);i.enqueue(l)}catch(r){i.error(r)}},async cancel(){await n.return?.()}})}}async function*N4(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");const n=new D4,i=new Ah,r=xN(t.body);for await(const a of I4(r))for(const l of i.decode(a)){const c=n.decode(l);c&&(yield c)}for(const a of i.flush()){const l=n.decode(a);l&&(yield l)}}async function*I4(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const i=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?o_(n):n;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let a;for(;(a=R4(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class D4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=O4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function O4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function DN(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,l=await(async()=>{if(e.options.stream)return Ot(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ri.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const y=await n.json();return ON(y,n)}return await n.text()})();return Ot(t).debug(`[${i}] response parsed`,jr({retryOfRequestLogID:r,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function ON(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ql;class Rh extends Promise{constructor(e,n,i=DN){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,Ql.set(this,void 0),xe(this,Ql,e)}_thenUnwrap(e){return new Rh(V(this,Ql,"f"),this.responsePromise,async(n,i)=>ON(e(await this.parseResponse(n,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(V(this,Ql,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ql=new WeakMap;var $f;class r_{constructor(e,n,i,r){$f.set(this,void 0),xe(this,$f,e),this.options=r,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await V(this,$f,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[($f=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class k4 extends Rh{constructor(e,n,i){super(e,n,async(r,a)=>new i(r,a.response,await DN(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Mh extends r_{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class _t extends r_{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...EN(this.options.query),after:n}}:null}}class $d extends r_{constructor(e,n,i,r){super(e,n,i,r),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...EN(this.options.query),after:e}}:null}}const kN=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function du(t,e,n){return kN(),new File(t,e??"unknown_file",n)}function ld(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const s_=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",JT=async(t,e)=>Jv(t.body)?{...t,body:await PN(t.body,e)}:t,ss=async(t,e)=>({...t,body:await PN(t.body,e)}),KT=new WeakMap;function P4(t){const e=typeof t=="function"?t:t.fetch,n=KT.get(e);if(n)return n;const i=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return KT.set(e,i),i}const PN=async(t,e)=>{if(!await P4(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([i,r])=>Kv(n,i,r))),n},LN=t=>t instanceof Blob&&"name"in t,L4=t=>typeof t=="object"&&t!==null&&(t instanceof Response||s_(t)||LN(t)),Jv=t=>{if(L4(t))return!0;if(Array.isArray(t))return t.some(Jv);if(t&&typeof t=="object"){for(const e in t)if(Jv(t[e]))return!0}return!1},Kv=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,du([await n.blob()],ld(n)));else if(s_(n))t.append(e,du([await new Response(TN(n)).blob()],ld(n)));else if(LN(n))t.append(e,n,ld(n));else if(Array.isArray(n))await Promise.all(n.map(i=>Kv(t,e+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,r])=>Kv(t,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},UN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",U4=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&UN(t),F4=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function B4(t,e,n){if(kN(),t=await t,U4(t))return t instanceof File?t:du([await t.arrayBuffer()],t.name);if(F4(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),du(await Yv(r),e,n)}const i=await Yv(t);if(e||(e=ld(t)),!n?.type){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n={...n,type:r})}return du(i,e,n)}async function Yv(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(UN(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(s_(t))for await(const n of t)e.push(...await Yv(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${$4(t)}`)}return e}function $4(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ye{constructor(e){this._client=e}}function FN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const YT=Object.freeze(Object.create(null)),G4=(t=FN)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],l=n.reduce((m,y,S)=>{/[?#]/.test(y)&&(r=!0);const w=i[S];let T=(r?encodeURIComponent:t)(""+w);return S!==i.length&&(w==null||typeof w=="object"&&w.toString===Object.getPrototypeOf(Object.getPrototypeOf(w.hasOwnProperty??YT)??YT)?.toString)&&(T=w+"",a.push({start:m.length+y.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),m+y+(S===i.length?"":T)},""),c=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,w)=>{const T=" ".repeat(w.start-m),x="^".repeat(w.length);return m=w.start+w.length,S+T+x},"");throw new Se(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${l}
${y}`)}return l},oe=G4(FN);let BN=class extends ye{list(e,n={},i){return this._client.getAPIList(oe`/chat/completions/${e}/messages`,_t,{query:n,...i})}};function Gd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function a_(t){return t?.$brand==="auto-parseable-response-format"}function Ku(t){return t?.$brand==="auto-parseable-tool"}function H4(t,e){return!e||!$N(e)?{...t,choices:t.choices.map(n=>(GN(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:l_(t,e)}function l_(t,e){const n=t.choices.map(i=>{if(i.finish_reason==="length")throw new bN;if(i.finish_reason==="content_filter")throw new wN;return GN(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(r=>z4(e,r))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?V4(e,i.message.content):null}}});return{...t,choices:n}}function V4(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function z4(t,e){const n=t.tools?.find(i=>Gd(i)&&i.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Ku(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function q4(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(i=>Gd(i)&&i.function?.name===e.function.name);return Gd(n)&&(Ku(n)||n?.function.strict||!1)}function $N(t){return a_(t.response_format)?!0:t.tools?.some(e=>Ku(e)||e.type==="function"&&e.function.strict===!0)??!1}function GN(t){for(const e of t||[])if(e.type!=="function")throw new Se(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function j4(t){for(const e of t??[]){if(e.type!=="function")throw new Se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Hd=t=>t?.role==="assistant",HN=t=>t?.role==="tool";var Xv,ud,cd,Zl,eu,fd,tu,ao,nu,Vd,zd,da,VN;class u_{constructor(){Xv.add(this),this.controller=new AbortController,ud.set(this,void 0),cd.set(this,()=>{}),Zl.set(this,()=>{}),eu.set(this,void 0),fd.set(this,()=>{}),tu.set(this,()=>{}),ao.set(this,{}),nu.set(this,!1),Vd.set(this,!1),zd.set(this,!1),da.set(this,!1),xe(this,ud,new Promise((e,n)=>{xe(this,cd,e,"f"),xe(this,Zl,n,"f")})),xe(this,eu,new Promise((e,n)=>{xe(this,fd,e,"f"),xe(this,tu,n,"f")})),V(this,ud,"f").catch(()=>{}),V(this,eu,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},V(this,Xv,"m",VN).bind(this))},0)}_connected(){this.ended||(V(this,cd,"f").call(this),this._emit("connect"))}get ended(){return V(this,nu,"f")}get errored(){return V(this,Vd,"f")}get aborted(){return V(this,zd,"f")}abort(){this.controller.abort()}on(e,n){return(V(this,ao,"f")[e]||(V(this,ao,"f")[e]=[])).push({listener:n}),this}off(e,n){const i=V(this,ao,"f")[e];if(!i)return this;const r=i.findIndex(a=>a.listener===n);return r>=0&&i.splice(r,1),this}once(e,n){return(V(this,ao,"f")[e]||(V(this,ao,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,i)=>{xe(this,da,!0),e!=="error"&&this.once("error",i),this.once(e,n)})}async done(){xe(this,da,!0),await V(this,eu,"f")}_emit(e,...n){if(V(this,nu,"f"))return;e==="end"&&(xe(this,nu,!0),V(this,fd,"f").call(this));const i=V(this,ao,"f")[e];if(i&&(V(this,ao,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!V(this,da,"f")&&!i?.length&&Promise.reject(r),V(this,Zl,"f").call(this,r),V(this,tu,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!V(this,da,"f")&&!i?.length&&Promise.reject(r),V(this,Zl,"f").call(this,r),V(this,tu,"f").call(this,r),this._emit("end")}}_emitFinal(){}}ud=new WeakMap,cd=new WeakMap,Zl=new WeakMap,eu=new WeakMap,fd=new WeakMap,tu=new WeakMap,ao=new WeakMap,nu=new WeakMap,Vd=new WeakMap,zd=new WeakMap,da=new WeakMap,Xv=new WeakSet,VN=function(e){if(xe(this,Vd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Hn),e instanceof Hn)return xe(this,zd,!0),this._emit("abort",e);if(e instanceof Se)return this._emit("error",e);if(e instanceof Error){const n=new Se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Se(String(e)))};function J4(t){return typeof t.parse=="function"}var Gt,Wv,qd,Qv,Zv,ey,zN,qN;const K4=10;class jN extends u_{constructor(){super(...arguments),Gt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),HN(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Hd(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),V(this,Gt,"m",Wv).call(this)}async finalMessage(){return await this.done(),V(this,Gt,"m",qd).call(this)}async finalFunctionToolCall(){return await this.done(),V(this,Gt,"m",Qv).call(this)}async finalFunctionToolCallResult(){return await this.done(),V(this,Gt,"m",Zv).call(this)}async totalUsage(){return await this.done(),V(this,Gt,"m",ey).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=V(this,Gt,"m",qd).call(this);n&&this._emit("finalMessage",n);const i=V(this,Gt,"m",Wv).call(this);i&&this._emit("finalContent",i);const r=V(this,Gt,"m",Qv).call(this);r&&this._emit("finalFunctionToolCall",r);const a=V(this,Gt,"m",Zv).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",V(this,Gt,"m",ey).call(this))}async _createChatCompletion(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,Gt,"m",zN).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(l_(a,n))}async _runChatCompletion(e,n,i){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,i)}async _runTools(e,n,i){const r="tool",{tool_choice:a="auto",stream:l,...c}=n,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=K4}=i||{},m=n.tools.map(w=>{if(Ku(w)){if(!w.$callback)throw new Se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),y={};for(const w of m)w.type==="function"&&(y[w.function.name||w.function.function.name]=w.function);const S="tools"in n?m.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of n.messages)this._addMessage(w,!1);for(let w=0;w<d;++w){const x=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:S,messages:[...this.messages]},i)).choices[0]?.message;if(!x)throw new Se("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const A of x.tool_calls){if(A.type!=="function")continue;const M=A.id,{name:I,arguments:N}=A.function,D=y[I];if(D){if(h&&h!==I){const q=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(y).map(j=>JSON.stringify(j)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}let L;try{L=J4(D)?await D.parse(N):N}catch(q){const j=q instanceof Error?q.message:String(q);this._addMessage({role:r,tool_call_id:M,content:j});continue}const U=await D.function(L,this),O=V(this,Gt,"m",qN).call(this,U);if(this._addMessage({role:r,tool_call_id:M,content:O}),h)return}}}}Gt=new WeakSet,Wv=function(){return V(this,Gt,"m",qd).call(this).content??null},qd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Hd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},Qv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Hd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},Zv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(HN(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},ey=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},zN=function(e){if(e.n!=null&&e.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},qN=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class c_ extends jN{static runTools(e,n,i){const r=new c_,a={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}_addMessage(e,n=!0){super._addMessage(e,n),Hd(e)&&e.content&&this._emit("content",e.content)}}const JN=1,KN=2,YN=4,XN=8,WN=16,QN=32,ZN=64,eI=128,tI=256,nI=eI|tI,iI=WN|QN|nI|ZN,oI=JN|KN|iI,rI=YN|XN,Y4=oI|rI,Tt={STR:JN,NUM:KN,ARR:YN,OBJ:XN,NULL:WN,BOOL:QN,NAN:ZN,INFINITY:eI,MINUS_INFINITY:tI,INF:nI,SPECIAL:iI,ATOM:oI,COLLECTION:rI,ALL:Y4};class X4 extends Error{}class W4 extends Error{}function Q4(t,e=Tt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Z4(t.trim(),e)}const Z4=(t,e)=>{const n=t.length;let i=0;const r=S=>{throw new X4(`${S} at position ${i}`)},a=S=>{throw new W4(`${S} at position ${i}`)},l=()=>(y(),i>=n&&r("Unexpected end of input"),t[i]==='"'?c():t[i]==="{"?h():t[i]==="["?d():t.substring(i,i+4)==="null"||Tt.NULL&e&&n-i<4&&"null".startsWith(t.substring(i))?(i+=4,null):t.substring(i,i+4)==="true"||Tt.BOOL&e&&n-i<4&&"true".startsWith(t.substring(i))?(i+=4,!0):t.substring(i,i+5)==="false"||Tt.BOOL&e&&n-i<5&&"false".startsWith(t.substring(i))?(i+=5,!1):t.substring(i,i+8)==="Infinity"||Tt.INFINITY&e&&n-i<8&&"Infinity".startsWith(t.substring(i))?(i+=8,1/0):t.substring(i,i+9)==="-Infinity"||Tt.MINUS_INFINITY&e&&1<n-i&&n-i<9&&"-Infinity".startsWith(t.substring(i))?(i+=9,-1/0):t.substring(i,i+3)==="NaN"||Tt.NAN&e&&n-i<3&&"NaN".startsWith(t.substring(i))?(i+=3,NaN):m()),c=()=>{const S=i;let w=!1;for(i++;i<n&&(t[i]!=='"'||w&&t[i-1]==="\\");)w=t[i]==="\\"?!w:!1,i++;if(t.charAt(i)=='"')try{return JSON.parse(t.substring(S,++i-Number(w)))}catch(T){a(String(T))}else if(Tt.STR&e)try{return JSON.parse(t.substring(S,i-Number(w))+'"')}catch{return JSON.parse(t.substring(S,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},h=()=>{i++,y();const S={};try{for(;t[i]!=="}";){if(y(),i>=n&&Tt.OBJ&e)return S;const w=c();y(),i++;try{const T=l();Object.defineProperty(S,w,{value:T,writable:!0,enumerable:!0,configurable:!0})}catch(T){if(Tt.OBJ&e)return S;throw T}y(),t[i]===","&&i++}}catch{if(Tt.OBJ&e)return S;r("Expected '}' at end of object")}return i++,S},d=()=>{i++;const S=[];try{for(;t[i]!=="]";)S.push(l()),y(),t[i]===","&&i++}catch{if(Tt.ARR&e)return S;r("Expected ']' at end of array")}return i++,S},m=()=>{if(i===0){t==="-"&&Tt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(w){if(Tt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(w))}}const S=i;for(t[i]==="-"&&i++;t[i]&&!",]}".includes(t[i]);)i++;i==n&&!(Tt.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(S,i))}catch{t.substring(S,i)==="-"&&Tt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(S,t.lastIndexOf("e")))}catch(T){a(String(T))}}},y=()=>{for(;i<n&&` 
\r	`.includes(t[i]);)i++};return l()},XT=t=>Q4(t,Tt.ALL^Tt.NUM);var bt,so,ia,tr,Gg,Gf,Hg,Vg,zg,Hf,qg,WT;class bu extends jN{constructor(e){super(),bt.add(this),so.set(this,void 0),ia.set(this,void 0),tr.set(this,void 0),xe(this,so,e),xe(this,ia,[])}get currentChatCompletionSnapshot(){return V(this,tr,"f")}static fromReadableStream(e){const n=new bu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,i){const r=new bu(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,i){super._createChatCompletion;const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,bt,"m",Gg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const l of a)V(this,bt,"m",Hg).call(this,l);if(a.controller.signal?.aborted)throw new Hn;return this._addChatCompletion(V(this,bt,"m",Hf).call(this))}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),V(this,bt,"m",Gg).call(this),this._connected();const r=Ri.fromReadableStream(e,this.controller);let a;for await(const l of r)a&&a!==l.id&&this._addChatCompletion(V(this,bt,"m",Hf).call(this)),V(this,bt,"m",Hg).call(this,l),a=l.id;if(r.controller.signal?.aborted)throw new Hn;return this._addChatCompletion(V(this,bt,"m",Hf).call(this))}[(so=new WeakMap,ia=new WeakMap,tr=new WeakMap,bt=new WeakSet,Gg=function(){this.ended||xe(this,tr,void 0)},Gf=function(n){let i=V(this,ia,"f")[n.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},V(this,ia,"f")[n.index]=i,i)},Hg=function(n){if(this.ended)return;const i=V(this,bt,"m",WT).call(this,n);this._emit("chunk",n,i);for(const r of n.choices){const a=i.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=V(this,bt,"m",Gf).call(this,a);a.finish_reason&&(V(this,bt,"m",zg).call(this,a),l.current_tool_call_index!=null&&V(this,bt,"m",Vg).call(this,a,l.current_tool_call_index));for(const c of r.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(V(this,bt,"m",zg).call(this,a),l.current_tool_call_index!=null&&V(this,bt,"m",Vg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},Vg=function(n,i){if(V(this,bt,"m",Gf).call(this,n).done_tool_calls.has(i))return;const a=n.message.tool_calls?.[i];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=V(this,so,"f")?.tools?.find(c=>Gd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:i,arguments:a.function.arguments,parsed_arguments:Ku(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},zg=function(n){const i=V(this,bt,"m",Gf).call(this,n);if(n.message.content&&!i.content_done){i.content_done=!0;const r=V(this,bt,"m",qg).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Hf=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,tr,"f");if(!n)throw new Se("request ended without sending any chunks");return xe(this,tr,void 0),xe(this,ia,[]),e6(n,V(this,so,"f"))},qg=function(){const n=V(this,so,"f")?.response_format;return a_(n)?n:null},WT=function(n){var i,r,a,l;let c=V(this,tr,"f");const{choices:h,...d}=n;c?Object.assign(c,d):c=xe(this,tr,{...d,choices:[]});for(const{delta:m,finish_reason:y,index:S,logprobs:w=null,...T}of n.choices){let x=c.choices[S];if(x||(x=c.choices[S]={finish_reason:y,index:S,message:{},logprobs:w,...T}),w)if(!x.logprobs)x.logprobs=Object.assign({},w);else{const{content:U,refusal:O,...q}=w;Object.assign(x.logprobs,q),U&&((i=x.logprobs).content??(i.content=[]),x.logprobs.content.push(...U)),O&&((r=x.logprobs).refusal??(r.refusal=[]),x.logprobs.refusal.push(...O))}if(y&&(x.finish_reason=y,V(this,so,"f")&&$N(V(this,so,"f")))){if(y==="length")throw new bN;if(y==="content_filter")throw new wN}if(Object.assign(x,T),!m)continue;const{content:A,refusal:M,function_call:I,role:N,tool_calls:D,...L}=m;if(Object.assign(x.message,L),M&&(x.message.refusal=(x.message.refusal||"")+M),N&&(x.message.role=N),I&&(x.message.function_call?(I.name&&(x.message.function_call.name=I.name),I.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=I.arguments)):x.message.function_call=I),A&&(x.message.content=(x.message.content||"")+A,!x.message.refusal&&V(this,bt,"m",qg).call(this)&&(x.message.parsed=XT(x.message.content))),D){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:U,id:O,type:q,function:j,...Y}of D){const W=(l=x.message.tool_calls)[U]??(l[U]={});Object.assign(W,Y),O&&(W.id=O),q&&(W.type=q),j&&(W.function??(W.function={name:j.name??"",arguments:""})),j?.name&&(W.function.name=j.name),j?.arguments&&(W.function.arguments+=j.arguments,q4(V(this,so,"f"),W)&&(W.function.parsed_arguments=XT(W.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("chunk",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ri(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function e6(t,e){const{id:n,choices:i,created:r,model:a,system_fingerprint:l,...c}=t,h={...c,id:n,choices:i.map(({message:d,finish_reason:m,index:y,logprobs:S,...w})=>{if(!m)throw new Se(`missing finish_reason for choice ${y}`);const{content:T=null,function_call:x,tool_calls:A,...M}=d,I=d.role;if(!I)throw new Se(`missing role for choice ${y}`);if(x){const{arguments:N,name:D}=x;if(N==null)throw new Se(`missing function_call.arguments for choice ${y}`);if(!D)throw new Se(`missing function_call.name for choice ${y}`);return{...w,message:{content:T,function_call:{arguments:N,name:D},role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}return A?{...w,index:y,finish_reason:m,logprobs:S,message:{...M,role:I,content:T,refusal:d.refusal??null,tool_calls:A.map((N,D)=>{const{function:L,type:U,id:O,...q}=N,{arguments:j,name:Y,...W}=L||{};if(O==null)throw new Se(`missing choices[${y}].tool_calls[${D}].id
${Vf(t)}`);if(U==null)throw new Se(`missing choices[${y}].tool_calls[${D}].type
${Vf(t)}`);if(Y==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.name
${Vf(t)}`);if(j==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.arguments
${Vf(t)}`);return{...q,id:O,type:U,function:{...W,name:Y,arguments:j}}})}}:{...w,message:{...M,content:T,role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}),created:r,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return H4(h,e)}function Vf(t){return JSON.stringify(t)}class jd extends bu{static fromReadableStream(e){const n=new jd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,i){const r=new jd(n),a={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}}let f_=class extends ye{constructor(){super(...arguments),this.messages=new BN(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(oe`/chat/completions/${e}`,n)}update(e,n,i){return this._client.post(oe`/chat/completions/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/chat/completions",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/chat/completions/${e}`,n)}parse(e,n){return j4(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>l_(i,e))}runTools(e,n){return e.stream?jd.runTools(this._client,e,n):c_.runTools(this._client,e,n)}stream(e,n){return bu.createChatCompletion(this._client,e,n)}};f_.Messages=BN;class d_ extends ye{constructor(){super(...arguments),this.completions=new f_(this._client)}}d_.Completions=f_;const sI=Symbol("brand.privateNullableHeaders");function*t6(t){if(!t)return;if(sI in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():PT(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=PT(i[1])?i[1]:[i[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,c])}}const pe=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,l]of t6(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[sI]:!0,values:e,nulls:n}};class aI extends ye{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:pe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class lI extends ye{create(e,n){return this._client.post("/audio/transcriptions",ss({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class uI extends ye{create(e,n){return this._client.post("/audio/translations",ss({body:e,...n,__metadata:{model:e.model}},this._client))}}let Yu=class extends ye{constructor(){super(...arguments),this.transcriptions=new lI(this._client),this.translations=new uI(this._client),this.speech=new aI(this._client)}};Yu.Transcriptions=lI;Yu.Translations=uI;Yu.Speech=aI;class cI extends ye{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",_t,{query:e,...n})}cancel(e,n){return this._client.post(oe`/batches/${e}/cancel`,n)}}class fI extends ye{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/assistants/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",_t,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(oe`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let dI=class extends ye{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class hI extends ye{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Nh=class extends ye{constructor(){super(...arguments),this.sessions=new dI(this._client),this.transcriptionSessions=new hI(this._client)}};Nh.Sessions=dI;Nh.TranscriptionSessions=hI;class pI extends ye{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(oe`/chatkit/sessions/${e}/cancel`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let mI=class extends ye{retrieve(e,n){return this._client.get(oe`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",$d,{query:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(oe`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},i){return this._client.getAPIList(oe`/chatkit/threads/${e}/items`,$d,{query:n,...i,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},i?.headers])})}};class Ih extends ye{constructor(){super(...arguments),this.sessions=new pI(this._client),this.threads=new mI(this._client)}}Ih.Sessions=pI;Ih.Threads=mI;class gI extends ye{create(e,n,i){return this._client.post(oe`/threads/${e}/messages`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{thread_id:r}=n;return this._client.get(oe`/threads/${r}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/messages/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/threads/${e}/messages`,_t,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{thread_id:r}=n;return this._client.delete(oe`/threads/${r}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class vI extends ye{retrieve(e,n,i){const{thread_id:r,run_id:a,...l}=n;return this._client.get(oe`/threads/${r}/runs/${a}/steps/${e}`,{query:l,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n,i){const{thread_id:r,...a}=n;return this._client.getAPIList(oe`/threads/${r}/runs/${e}/steps`,_t,{query:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}const n6=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var i6={};const oa=t=>{if(typeof globalThis.process<"u")return i6?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var kt,Yr,ty,Ei,dd,ti,Xr,ya,Jr,Jd,yn,hd,pd,hu,iu,ou,QT,ZT,ex,tx,nx,ix,ox;class pu extends u_{constructor(){super(...arguments),kt.add(this),ty.set(this,[]),Ei.set(this,{}),dd.set(this,{}),ti.set(this,void 0),Xr.set(this,void 0),ya.set(this,void 0),Jr.set(this,void 0),Jd.set(this,void 0),yn.set(this,void 0),hd.set(this,void 0),pd.set(this,void 0),hu.set(this,void 0)}[(ty=new WeakMap,Ei=new WeakMap,dd=new WeakMap,ti=new WeakMap,Xr=new WeakMap,ya=new WeakMap,Jr=new WeakMap,Jd=new WeakMap,yn=new WeakMap,hd=new WeakMap,pd=new WeakMap,hu=new WeakMap,kt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Yr;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Ri.fromReadableStream(e,this.controller);for await(const a of r)V(this,kt,"m",iu).call(this,a);if(r.controller.signal?.aborted)throw new Hn;return this._addRun(V(this,kt,"m",ou).call(this))}toReadableStream(){return new Ri(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,i,r){const a=new Yr;return a._run(()=>a._runToolAssistantStream(e,n,i,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,i,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...i,stream:!0},c=await e.submitToolOutputs(n,l,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,kt,"m",iu).call(this,h);if(c.controller.signal?.aborted)throw new Hn;return this._addRun(V(this,kt,"m",ou).call(this))}static createThreadAssistantStream(e,n,i){const r=new Yr;return r._run(()=>r._threadAssistantStream(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,i,r){const a=new Yr;return a._run(()=>a._runAssistantStream(e,n,i,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return V(this,hd,"f")}currentRun(){return V(this,pd,"f")}currentMessageSnapshot(){return V(this,ti,"f")}currentRunStepSnapshot(){return V(this,hu,"f")}async finalRunSteps(){return await this.done(),Object.values(V(this,Ei,"f"))}async finalMessages(){return await this.done(),Object.values(V(this,dd,"f"))}async finalRun(){if(await this.done(),!V(this,Xr,"f"))throw Error("Final run was not received.");return V(this,Xr,"f")}async _createThreadAssistantStream(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)V(this,kt,"m",iu).call(this,c);if(l.controller.signal?.aborted)throw new Hn;return this._addRun(V(this,kt,"m",ou).call(this))}async _createAssistantStream(e,n,i,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...i,stream:!0},c=await e.create(n,l,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,kt,"m",iu).call(this,h);if(c.controller.signal?.aborted)throw new Hn;return this._addRun(V(this,kt,"m",ou).call(this))}static accumulateDelta(e,n){for(const[i,r]of Object.entries(n)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let a=e[i];if(a==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Fg(a)&&Fg(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...r);continue}for(const l of r){if(!Fg(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(l):a[c]=this.accumulateDelta(h,l)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${a}`);e[i]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,i){return await this._createThreadAssistantStream(n,e,i)}async _runAssistantStream(e,n,i,r){return await this._createAssistantStream(n,e,i,r)}async _runToolAssistantStream(e,n,i,r){return await this._createToolAssistantStream(n,e,i,r)}}Yr=pu,iu=function(e){if(!this.ended)switch(xe(this,hd,e),V(this,kt,"m",ex).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":V(this,kt,"m",ox).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":V(this,kt,"m",ZT).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":V(this,kt,"m",QT).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ou=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");if(!V(this,Xr,"f"))throw Error("Final run has not been received");return V(this,Xr,"f")},QT=function(e){const[n,i]=V(this,kt,"m",nx).call(this,e,V(this,ti,"f"));xe(this,ti,n),V(this,dd,"f")[n.id]=n;for(const r of i){const a=n.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,l=n.content[r.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=V(this,ya,"f")){if(V(this,Jr,"f"))switch(V(this,Jr,"f").type){case"text":this._emit("textDone",V(this,Jr,"f").text,V(this,ti,"f"));break;case"image_file":this._emit("imageFileDone",V(this,Jr,"f").image_file,V(this,ti,"f"));break}xe(this,ya,r.index)}xe(this,Jr,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(V(this,ya,"f")!==void 0){const r=e.data.content[V(this,ya,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,V(this,ti,"f"));break;case"text":this._emit("textDone",r.text,V(this,ti,"f"));break}}V(this,ti,"f")&&this._emit("messageDone",e.data),xe(this,ti,void 0)}},ZT=function(e){const n=V(this,kt,"m",tx).call(this,e);switch(xe(this,hu,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of i.step_details.tool_calls)a.index==V(this,Jd,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(V(this,yn,"f")&&this._emit("toolCallDone",V(this,yn,"f")),xe(this,Jd,a.index),xe(this,yn,n.step_details.tool_calls[a.index]),V(this,yn,"f")&&this._emit("toolCallCreated",V(this,yn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":xe(this,hu,void 0),e.data.step_details.type=="tool_calls"&&V(this,yn,"f")&&(this._emit("toolCallDone",V(this,yn,"f")),xe(this,yn,void 0)),this._emit("runStepDone",e.data,n);break}},ex=function(e){V(this,ty,"f").push(e),this._emit("event",e)},tx=function(e){switch(e.event){case"thread.run.step.created":return V(this,Ei,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=V(this,Ei,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=Yr.accumulateDelta(n,i.delta);V(this,Ei,"f")[e.data.id]=r}return V(this,Ei,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":V(this,Ei,"f")[e.data.id]=e.data;break}if(V(this,Ei,"f")[e.data.id])return V(this,Ei,"f")[e.data.id];throw new Error("No snapshot available")},nx=function(e,n){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=V(this,kt,"m",ix).call(this,a,l)}else n.content[a.index]=a,i.push(a);return[n,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ix=function(e,n){return Yr.accumulateDelta(n,e)},ox=function(e){switch(xe(this,pd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":xe(this,Xr,e.data),V(this,yn,"f")&&(this._emit("toolCallDone",V(this,yn,"f")),xe(this,yn,void 0));break}};let h_=class extends ye{constructor(){super(...arguments),this.steps=new vI(this._client)}create(e,n,i){const{include:r,...a}=n;return this._client.post(oe`/threads/${e}/runs`,{query:{include:r},body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}retrieve(e,n,i){const{thread_id:r}=n;return this._client.get(oe`/threads/${r}/runs/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/runs/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/threads/${e}/runs`,_t,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{thread_id:r}=n;return this._client.post(oe`/threads/${r}/runs/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n,i);return await this.poll(r.id,{thread_id:e},i)}createAndStream(e,n,i){return pu.createAssistantStream(e,this._client.beta.threads.runs,n,i)}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...i,headers:{...i?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=l.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await Ju(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,i){return pu.createAssistantStream(e,this._client.beta.threads.runs,n,i)}submitToolOutputs(e,n,i){const{thread_id:r,...a}=n;return this._client.post(oe`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,i){const r=await this.submitToolOutputs(e,n,i);return await this.poll(r.id,n,i)}submitToolOutputsStream(e,n,i){return pu.createToolAssistantStream(e,this._client.beta.threads.runs,n,i)}};h_.Steps=vI;class Dh extends ye{constructor(){super(...arguments),this.runs=new h_(this._client),this.messages=new gI(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/threads/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n){return this._client.delete(oe`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const i=await this.createAndRun(e,n);return await this.runs.poll(i.id,{thread_id:i.thread_id},n)}createAndRunStream(e,n){return pu.createThreadAssistantStream(e,this._client.beta.threads,n)}}Dh.Runs=h_;Dh.Messages=gI;class $a extends ye{constructor(){super(...arguments),this.realtime=new Nh(this._client),this.chatkit=new Ih(this._client),this.assistants=new fI(this._client),this.threads=new Dh(this._client)}}$a.Realtime=Nh;$a.ChatKit=Ih;$a.Assistants=fI;$a.Threads=Dh;class yI extends ye{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}let _I=class extends ye{retrieve(e,n,i){const{container_id:r}=n;return this._client.get(oe`/containers/${r}/files/${e}/content`,{...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}},p_=class extends ye{constructor(){super(...arguments),this.content=new _I(this._client)}create(e,n,i){return this._client.post(oe`/containers/${e}/files`,ss({body:n,...i},this._client))}retrieve(e,n,i){const{container_id:r}=n;return this._client.get(oe`/containers/${r}/files/${e}`,i)}list(e,n={},i){return this._client.getAPIList(oe`/containers/${e}/files`,_t,{query:n,...i})}delete(e,n,i){const{container_id:r}=n;return this._client.delete(oe`/containers/${r}/files/${e}`,{...i,headers:pe([{Accept:"*/*"},i?.headers])})}};p_.Content=_I;class m_ extends ye{constructor(){super(...arguments),this.files=new p_(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/containers/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}}m_.Files=p_;class SI extends ye{create(e,n,i){const{include:r,...a}=n;return this._client.post(oe`/conversations/${e}/items`,{query:{include:r},body:a,...i})}retrieve(e,n,i){const{conversation_id:r,...a}=n;return this._client.get(oe`/conversations/${r}/items/${e}`,{query:a,...i})}list(e,n={},i){return this._client.getAPIList(oe`/conversations/${e}/items`,$d,{query:n,...i})}delete(e,n,i){const{conversation_id:r}=n;return this._client.delete(oe`/conversations/${r}/items/${e}`,i)}}class g_ extends ye{constructor(){super(...arguments),this.items=new SI(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/conversations/${e}`,n)}update(e,n,i){return this._client.post(oe`/conversations/${e}`,{body:n,...i})}delete(e,n){return this._client.delete(oe`/conversations/${e}`,n)}}g_.Items=SI;class bI extends ye{create(e,n){const i=!!e.encoding_format;let r=i?e.encoding_format:"base64";i&&Ot(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return i?a:(Ot(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const h=c.embedding;c.embedding=n6(h)}),l)))}}class wI extends ye{retrieve(e,n,i){const{eval_id:r,run_id:a}=n;return this._client.get(oe`/evals/${r}/runs/${a}/output_items/${e}`,i)}list(e,n,i){const{eval_id:r,...a}=n;return this._client.getAPIList(oe`/evals/${r}/runs/${e}/output_items`,_t,{query:a,...i})}}class v_ extends ye{constructor(){super(...arguments),this.outputItems=new wI(this._client)}create(e,n,i){return this._client.post(oe`/evals/${e}/runs`,{body:n,...i})}retrieve(e,n,i){const{eval_id:r}=n;return this._client.get(oe`/evals/${r}/runs/${e}`,i)}list(e,n={},i){return this._client.getAPIList(oe`/evals/${e}/runs`,_t,{query:n,...i})}delete(e,n,i){const{eval_id:r}=n;return this._client.delete(oe`/evals/${r}/runs/${e}`,i)}cancel(e,n,i){const{eval_id:r}=n;return this._client.post(oe`/evals/${r}/runs/${e}`,i)}}v_.OutputItems=wI;class y_ extends ye{constructor(){super(...arguments),this.runs=new v_(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/evals/${e}`,n)}update(e,n,i){return this._client.post(oe`/evals/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/evals",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/evals/${e}`,n)}}y_.Runs=v_;let EI=class extends ye{create(e,n){return this._client.post("/files",ss({body:e,...n},this._client))}retrieve(e,n){return this._client.get(oe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",_t,{query:e,...n})}delete(e,n){return this._client.delete(oe`/files/${e}`,n)}content(e,n){return this._client.get(oe`/files/${e}/content`,{...n,headers:pe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:i=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!r.has(l.status);)if(await Ju(n),l=await this.retrieve(e),Date.now()-a>i)throw new i_({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return l}};class CI extends ye{}let TI=class extends ye{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class __ extends ye{constructor(){super(...arguments),this.graders=new TI(this._client)}}__.Graders=TI;class xI extends ye{create(e,n,i){return this._client.getAPIList(oe`/fine_tuning/checkpoints/${e}/permissions`,Mh,{body:n,method:"post",...i})}retrieve(e,n={},i){return this._client.get(oe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...i})}delete(e,n,i){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(oe`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}}let S_=class extends ye{constructor(){super(...arguments),this.permissions=new xI(this._client)}};S_.Permissions=xI;class AI extends ye{list(e,n={},i){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/checkpoints`,_t,{query:n,...i})}}class b_ extends ye{constructor(){super(...arguments),this.checkpoints=new AI(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(oe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",_t,{query:e,...n})}cancel(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},i){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/events`,_t,{query:n,...i})}pause(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(oe`/fine_tuning/jobs/${e}/resume`,n)}}b_.Checkpoints=AI;class Ga extends ye{constructor(){super(...arguments),this.methods=new CI(this._client),this.jobs=new b_(this._client),this.checkpoints=new S_(this._client),this.alpha=new __(this._client)}}Ga.Methods=CI;Ga.Jobs=b_;Ga.Checkpoints=S_;Ga.Alpha=__;class RI extends ye{}class w_ extends ye{constructor(){super(...arguments),this.graderModels=new RI(this._client)}}w_.GraderModels=RI;class MI extends ye{createVariation(e,n){return this._client.post("/images/variations",ss({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ss({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class NI extends ye{retrieve(e,n){return this._client.get(oe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Mh,e)}delete(e,n){return this._client.delete(oe`/models/${e}`,n)}}class II extends ye{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class DI extends ye{accept(e,n,i){return this._client.post(oe`/realtime/calls/${e}/accept`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}hangup(e,n){return this._client.post(oe`/realtime/calls/${e}/hangup`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}refer(e,n,i){return this._client.post(oe`/realtime/calls/${e}/refer`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}reject(e,n={},i){return this._client.post(oe`/realtime/calls/${e}/reject`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}}class OI extends ye{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Oh extends ye{constructor(){super(...arguments),this.clientSecrets=new OI(this._client),this.calls=new DI(this._client)}}Oh.ClientSecrets=OI;Oh.Calls=DI;function o6(t,e){return!e||!s6(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(i=>({...i,parsed:null}))}:n)}:kI(t,e)}function kI(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:u6(e,r)};if(r.type==="message"){const a=r.content.map(l=>l.type==="output_text"?{...l,parsed:r6(e,l.text)}:l);return{...r,content:a}}return r}),i=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||ny(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const r of i.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),i}function r6(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function s6(t){return!!a_(t.text?.format)}function a6(t){return t?.$brand==="auto-parseable-tool"}function l6(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function u6(t,e){const n=l6(t.tools??[],e.name);return{...e,...e,parsed_arguments:a6(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function ny(t){const e=[];for(const n of t.output)if(n.type==="message")for(const i of n.content)i.type==="output_text"&&e.push(i.text);t.output_text=e.join("")}var ra,zf,nr,qf,rx,sx,ax,lx;class E_ extends u_{constructor(e){super(),ra.add(this),zf.set(this,void 0),nr.set(this,void 0),qf.set(this,void 0),xe(this,zf,e)}static createResponse(e,n,i){const r=new E_(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,i){const r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,ra,"m",rx).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const c of a)V(this,ra,"m",sx).call(this,c,l);if(a.controller.signal?.aborted)throw new Hn;return V(this,ra,"m",ax).call(this)}[(zf=new WeakMap,nr=new WeakMap,qf=new WeakMap,ra=new WeakSet,rx=function(){this.ended||xe(this,nr,void 0)},sx=function(n,i){if(this.ended)return;const r=(l,c)=>{(i==null||c.sequence_number>i)&&this._emit(l,c)},a=V(this,ra,"m",lx).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Se(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Se(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Se(`missing output at index ${n.output_index}`);l.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:r(n.type,n);break}},ax=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,nr,"f");if(!n)throw new Se("request ended without sending any events");xe(this,nr,void 0);const i=c6(n,V(this,zf,"f"));return xe(this,qf,i),i},lx=function(n){let i=V(this,nr,"f");if(!i){if(n.type!=="response.created")throw new Se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return i=xe(this,nr,n.response),i}switch(n.type){case"response.output_item.added":{i.output.push(n.item);break}case"response.content_part.added":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);const a=r.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?r.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(l));break}case"response.output_text.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=i.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=r.content?.[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Se(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{xe(this,nr,n.response);break}}return i},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{i=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=V(this,qf,"f");if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}}function c6(t,e){return o6(t,e)}class PI extends ye{list(e,n={},i){return this._client.getAPIList(oe`/responses/${e}/input_items`,_t,{query:n,...i})}}class LI extends ye{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class kh extends ye{constructor(){super(...arguments),this.inputItems=new PI(this._client),this.inputTokens=new LI(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&ny(i),i))}retrieve(e,n={},i){return this._client.get(oe`/responses/${e}`,{query:n,...i,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ny(r),r))}delete(e,n){return this._client.delete(oe`/responses/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(i=>kI(i,e))}stream(e,n){return E_.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(oe`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}kh.InputItems=PI;kh.InputTokens=LI;class UI extends ye{create(e,n,i){return this._client.post(oe`/uploads/${e}/parts`,ss({body:n,...i},this._client))}}class C_ extends ye{constructor(){super(...arguments),this.parts=new UI(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(oe`/uploads/${e}/cancel`,n)}complete(e,n,i){return this._client.post(oe`/uploads/${e}/complete`,{body:n,...i})}}C_.Parts=UI;const f6=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};class FI extends ye{create(e,n,i){return this._client.post(oe`/vector_stores/${e}/file_batches`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:r}=n;return this._client.get(oe`/vector_stores/${r}/file_batches/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{vector_store_id:r}=n;return this._client.post(oe`/vector_stores/${r}/file_batches/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n);return await this.poll(e,r.id,i)}listFiles(e,n,i){const{vector_store_id:r,...a}=n;return this._client.getAPIList(oe`/vector_stores/${r}/file_batches/${e}/files`,_t,{query:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...i,headers:r}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=l.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await Ju(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:i=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,l=Math.min(a,n.length),c=this._client,h=n.values(),d=[...i];async function m(S){for(let w of S){const T=await c.files.create({file:w,purpose:"assistants"},r);d.push(T.id)}}const y=Array(l).fill(h).map(m);return await f6(y),await this.createAndPoll(e,{file_ids:d})}}class BI extends ye{create(e,n,i){return this._client.post(oe`/vector_stores/${e}/files`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:r}=n;return this._client.get(oe`/vector_stores/${r}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{vector_store_id:r,...a}=n;return this._client.post(oe`/vector_stores/${r}/files/${e}`,{body:a,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(oe`/vector_stores/${e}/files`,_t,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{vector_store_id:r}=n;return this._client.delete(oe`/vector_stores/${r}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const r=await this.create(e,n,i);return await this.poll(e,r.id,i)}async poll(e,n,i){const r=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...i,headers:r}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await Ju(c);break;case"failed":case"completed":return l}}}async upload(e,n,i){const r=await this._client.files.create({file:n,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,n,i){const r=await this.upload(e,n,i);return await this.poll(e,r.id,i)}content(e,n,i){const{vector_store_id:r}=n;return this._client.getAPIList(oe`/vector_stores/${r}/files/${e}/content`,Mh,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class Ph extends ye{constructor(){super(...arguments),this.files=new BI(this._client),this.fileBatches=new FI(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(oe`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(oe`/vector_stores/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",_t,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(oe`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,i){return this._client.getAPIList(oe`/vector_stores/${e}/search`,Mh,{body:n,method:"post",...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}Ph.Files=BI;Ph.FileBatches=FI;class $I extends ye{create(e,n){return this._client.post("/videos",JT({body:e,...n},this._client))}retrieve(e,n){return this._client.get(oe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",$d,{query:e,...n})}delete(e,n){return this._client.delete(oe`/videos/${e}`,n)}downloadContent(e,n={},i){return this._client.get(oe`/videos/${e}/content`,{query:n,...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}remix(e,n,i){return this._client.post(oe`/videos/${e}/remix`,JT({body:n,...i},this._client))}}var ha,GI,md;class HI extends ye{constructor(){super(...arguments),ha.add(this)}async unwrap(e,n,i=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,i,r),JSON.parse(e)}async verifySignature(e,n,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");V(this,ha,"m",GI).call(this,i);const a=pe([n]).values,l=V(this,ha,"m",md).call(this,a,"webhook-signature"),c=V(this,ha,"m",md).call(this,a,"webhook-timestamp"),h=V(this,ha,"m",md).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new Xl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>r)throw new Xl("Webhook timestamp is too old");if(d>m+r)throw new Xl("Webhook timestamp is too new");const y=l.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),S=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),w=h?`${h}.${c}.${e}`:`${c}.${e}`,T=await crypto.subtle.importKey("raw",S,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of y)try{const A=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",T,A,new TextEncoder().encode(w)))return}catch{continue}throw new Xl("The given webhook signature does not match the expected signature")}}ha=new WeakSet,GI=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},md=function(e,n){if(!e)throw new Error("Headers are required");const i=e.get(n);if(i==null)throw new Error(`Missing required header: ${n}`);return i};var iy,T_,gd,VI;class Oe{constructor({baseURL:e=oa("OPENAI_BASE_URL"),apiKey:n=oa("OPENAI_API_KEY"),organization:i=oa("OPENAI_ORG_ID")??null,project:r=oa("OPENAI_PROJECT_ID")??null,webhookSecret:a=oa("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(iy.add(this),gd.set(this,void 0),this.completions=new yI(this),this.chat=new d_(this),this.embeddings=new bI(this),this.files=new EI(this),this.images=new MI(this),this.audio=new Yu(this),this.moderations=new II(this),this.models=new NI(this),this.fineTuning=new Ga(this),this.graders=new w_(this),this.vectorStores=new Ph(this),this.webhooks=new HI(this),this.beta=new $a(this),this.batches=new cI(this),this.uploads=new C_(this),this.responses=new kh(this),this.realtime=new Oh(this),this.conversations=new g_(this),this.evals=new y_(this),this.containers=new m_(this),this.videos=new $I(this),n===void 0)throw new Se("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:i,project:r,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&d4())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??T_.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=qT(c.logLevel,"ClientOptions.logLevel",this)??qT(oa("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??v4(),xe(this,gd,_4),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=i,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return pe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return T4(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${fa}`}defaultIdempotencyKey(){return`stainless-node-retry-${dN()}`}makeStatusError(e,n,i,r){return Pt.generate(e,n,i,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(i){throw i instanceof Se?i:new Se(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof n!="string"||!n)throw new Se(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,i){const r=!V(this,iy,"m",VI).call(this)&&i||this.baseURL,a=a4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return l4(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new Rh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:l,url:c,timeout:h}=await this.buildRequest(r,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:r});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Ot(this).debug(`[${d}] sending request`,jr({retryOfRequestLogID:i,method:r.method,url:c,options:r,headers:l.headers})),r.signal?.aborted)throw new Hn;const S=new AbortController,w=await this.fetchWithTimeout(c,l,h,S).catch(qv),T=Date.now();if(w instanceof globalThis.Error){const M=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Hn;const I=zv(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return Ot(this).info(`[${d}] connection ${I?"timed out":"failed"} - ${M}`),Ot(this).debug(`[${d}] connection ${I?"timed out":"failed"} (${M})`,jr({retryOfRequestLogID:i,url:c,durationMs:T-y,message:w.message})),this.retryRequest(r,n,i??d);throw Ot(this).info(`[${d}] connection ${I?"timed out":"failed"} - error; no more retries left`),Ot(this).debug(`[${d}] connection ${I?"timed out":"failed"} (error; no more retries left)`,jr({retryOfRequestLogID:i,url:c,durationMs:T-y,message:w.message})),I?new i_:new xh({cause:w})}const x=[...w.headers.entries()].filter(([M])=>M==="x-request-id").map(([M,I])=>", "+M+": "+JSON.stringify(I)).join(""),A=`[${d}${m}${x}] ${l.method} ${c} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${T-y}ms`;if(!w.ok){const M=await this.shouldRetry(w);if(n&&M){const O=`retrying, ${n} attempts remaining`;return await y4(w.body),Ot(this).info(`${A} - ${O}`),Ot(this).debug(`[${d}] response error (${O})`,jr({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:T-y})),this.retryRequest(r,n,i??d,w.headers)}const I=M?"error; no more retries left":"error; not retryable";Ot(this).info(`${A} - ${I}`);const N=await w.text().catch(O=>qv(O).message),D=f4(N),L=D?void 0:N;throw Ot(this).debug(`[${d}] response error (${I})`,jr({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,message:L,durationMs:Date.now()-y})),this.makeStatusError(w.status,D,L,w.headers)}return Ot(this).info(A),Ot(this).debug(`[${d}] response start`,jr({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:T-y})),{response:w,options:r,controller:S,requestLogID:d,retryOfRequestLogID:i,startTime:y}}getAPIList(e,n,i){return this.requestAPIList(n,{method:"get",path:e,...i})}requestAPIList(e,n){const i=this.makeRequest(n,null,void 0);return new k4(this,i,e)}async fetchWithTimeout(e,n,i,r){const{signal:a,method:l,...c}=n||{};a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:r.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){let a;const l=r?.get("retry-after-ms");if(l){const h=parseFloat(l);Number.isNaN(h)||(a=h)}const c=r?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await Ju(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const i={...e},{method:r,path:a,query:l,defaultBaseURL:c}=i,h=this.buildURL(a,l,c);"timeout"in i&&c4("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:i}),y=await this.buildHeaders({options:e,method:r,bodyHeaders:d,retryCount:n});return{req:{method:r,headers:y,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...i.fetchOptions??{}},url:h,timeout:i.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=pe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...g4(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=pe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:TN(e)}:V(this,gd,"f").call(this,{body:e,headers:i})}}T_=Oe,gd=new WeakMap,iy=new WeakSet,VI=function(){return this.baseURL!=="https://api.openai.com/v1"};Oe.OpenAI=T_;Oe.DEFAULT_TIMEOUT=6e5;Oe.OpenAIError=Se;Oe.APIError=Pt;Oe.APIConnectionError=xh;Oe.APIConnectionTimeoutError=i_;Oe.APIUserAbortError=Hn;Oe.NotFoundError=gN;Oe.ConflictError=vN;Oe.RateLimitError=_N;Oe.BadRequestError=hN;Oe.AuthenticationError=pN;Oe.InternalServerError=SN;Oe.PermissionDeniedError=mN;Oe.UnprocessableEntityError=yN;Oe.InvalidWebhookSignatureError=Xl;Oe.toFile=B4;Oe.Completions=yI;Oe.Chat=d_;Oe.Embeddings=bI;Oe.Files=EI;Oe.Images=MI;Oe.Audio=Yu;Oe.Moderations=II;Oe.Models=NI;Oe.FineTuning=Ga;Oe.Graders=w_;Oe.VectorStores=Ph;Oe.Webhooks=HI;Oe.Beta=$a;Oe.Batches=cI;Oe.Uploads=C_;Oe.Responses=kh;Oe.Realtime=Oh;Oe.Conversations=g_;Oe.Evals=y_;Oe.Containers=m_;Oe.Videos=$I;class ux extends Error{}const zI=["gpt-4o-mini","gpt-5.1","gpt-5-mini","gpt-5-nano","gpt-5"];class Kd{static getApiKey=null;static setApiKey=null;static getClient(){const e=this.getApiKey?.()||"";if(!e)throw new ux("No OpenAI API key set");return new Oe({apiKey:e,dangerouslyAllowBrowser:!0})}static async txt2txt(e,n,i="gpt-4o-mini",r){try{const a=this.getClient(),l=[];n&&l.push({role:"system",content:n}),e&&l.push({role:"user",content:[{type:"input_text",text:e}]}),r&&console.log(r);const c={model:i,input:l};console.log("GPT Payload:",c);const d=(await a.responses.create(c)).output_text;return console.log("GPT Response TEXT:",{text:d}),d}catch(a){if(console.error("ChatGPT Error:",a),(a?.message||"").includes("Incorrect API key provided")||a instanceof ux){const c=window.prompt("Your OpenAI API key is missing or invalid. Please enter a valid key:");return c?this.setApiKey?.(c):console.warn("User did not provide a valid API key."),null}throw a}}}class d6 extends Vn{project=null;data={};constructor(e,n){super(n,e),this.project=n,yr(this,{project:Ce.ref,data:Ce,load:ut})}async load(){try{const e={};for await(const n of this.handle.values()){if(n.kind!=="directory")continue;const i=n.name,r=n,a=new Vn(this,r),l={};for await(const c of r.values()){if(c.kind!=="directory")continue;const h=c.name,d=c,m=new Vn(a,d),y=[];for await(const S of d.values()){if(S.kind!=="file"||!S.name.match(/\.(png|jpg|jpeg|webp|gif)$/i))continue;const w=S,T=`${i}/${h}/${w.name}`;y.push(new h6(w,m,T,this))}l[h]=y}e[i]=l}we(()=>{this.data=e})}catch(e){console.error("Error loading artbook:",e),we(()=>{this.data={}})}}getTag(e){if(!e)return null;const n=e.split("/");if(n.length<3)return null;const[i,r,a]=n,l=this.data[i];if(!l)return null;const c=l[r];return c&&c.find(d=>d.handle.name===a)||null}log(){console.log(So(this))}getJson(){const e={};for(const[n,i]of Object.entries(this.data)){e[n]={};for(const[r,a]of Object.entries(i))e[n][r]=a.map(l=>l.handle.name)}return e}}class h6{handle;folder;image;artInfo=null;path;artbook;constructor(e,n,i,r=null){this.handle=e,this.folder=n.handle,this.image=new vo(e,n),this.path=i,this.artbook=r,ka(this)}async getArtInfo(){if(this.artInfo)return this.artInfo;try{const e=await fr.create(this.folder,this.handle.name+".json");we(()=>{this.artInfo=e})}catch(e){console.warn("Unable to load art info for:",this.handle.name,e)}return this.artInfo}}const jg=30;class p6{doc;fcpxml;resources;project;spine;timelineName;constructor(e="Test RESOLVE",n=1e4){this.timelineName=e,this.doc=document.implementation.createDocument("","",null),this.fcpxml=this.doc.createElement("fcpxml"),this.fcpxml.setAttribute("version","1.10"),this.doc.appendChild(this.fcpxml),this.resources=this.doc.createElement("resources"),this.fcpxml.appendChild(this.resources);const i=this.doc.createElement("format");i.setAttribute("id","r0"),i.setAttribute("name",`FFVideoFormat1080p${jg}`),i.setAttribute("frameDuration",`1/${jg}s`),i.setAttribute("width","1080"),i.setAttribute("height","1920"),this.resources.appendChild(i);const r=this.doc.createElement("library");this.fcpxml.appendChild(r);const a=this.doc.createElement("event");a.setAttribute("name","Auto Import"),r.appendChild(a),this.project=this.doc.createElement("project"),this.project.setAttribute("name",this.timelineName),a.appendChild(this.project);const l=this.doc.createElement("sequence");l.setAttribute("format","r0"),l.setAttribute("duration",`${n}/${jg}s`),l.setAttribute("tcStart","0/1s"),l.setAttribute("tcFormat","NDF"),this.project.appendChild(l),this.spine=this.doc.createElement("spine"),l.appendChild(this.spine);const c=this.doc.createElement("effect");c.setAttribute("uid",".../Generators.localized/Solids.localized/Vivid.localized/Vivid.motn"),c.setAttribute("name","Vivid"),c.setAttribute("id","r1"),this.resources.appendChild(c);const h=this.doc.createElement("effect");h.setAttribute("uid",".../Titles.localized/Lower Thirds.localized/Basic Lower Third.localized/Basic Lower Third.moti"),h.setAttribute("name","Basic Title"),h.setAttribute("id","r2"),this.resources.appendChild(h)}addAsset(e,n,i=!1,r=5){const a=this.doc.createElement("asset");a.setAttribute("format","r0"),a.setAttribute("src",`file://localhost/${e.replace(/\\/g,"/")}`),a.setAttribute("start","0/1s"),a.setAttribute("name",n),i&&(a.setAttribute("duration",`${r}/1s`),a.setAttribute("hasVideo","1"));const c=this.resources.children.length;return a.setAttribute("id",`r${c}`),this.resources.appendChild(a),a.getAttribute("id")}appendClip(e,n,i,r,a=0){const l=this.doc.createElement("video");l.setAttribute("start","0/24s"),l.setAttribute("ref",e),l.setAttribute("name",n),l.setAttribute("enabled","1"),l.setAttribute("lane",a.toString()),l.setAttribute("duration",`${i}/1s`),l.setAttribute("offset",`${r}/1s`),this.spine.appendChild(l)}appendText(e,n,i,r=3,a="Rich"){const l=this.doc.createElement("title");l.setAttribute("start","1/24s"),l.setAttribute("ref","r2"),l.setAttribute("name",a),l.setAttribute("lane",r.toString()),l.setAttribute("offset",`${i}/1s`),l.setAttribute("duration",`${n}/1s`),l.setAttribute("enabled","1");const c=this.doc.createElement("text");c.setAttribute("roll-up-height","0");const h=this.doc.createElement("text-style");h.setAttribute("ref","ts0"),h.textContent=e,c.appendChild(h),l.appendChild(c);const d=this.doc.createElement("text-style-def");d.setAttribute("id","ts0");const m=this.doc.createElement("text-style");m.setAttribute("fontSize","32"),m.setAttribute("italic","0"),m.setAttribute("fontColor","1 1 1 1"),m.setAttribute("bold","1"),m.setAttribute("lineSpacing","0"),m.setAttribute("font","Open Sans"),m.setAttribute("alignment","center"),m.setAttribute("strokeWidth","0"),m.setAttribute("strokeColor","0 0 0 1"),d.appendChild(m),l.appendChild(d);const y=this.doc.createElement("adjust-transform");y.setAttribute("scale","1 1"),y.setAttribute("anchor","0 0"),y.setAttribute("position","0 1"),l.appendChild(y),this.spine.appendChild(l)}getXmlString(){let n=new XMLSerializer().serializeToString(this.doc);return n=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fcpxml>
`+n,n}log(){const n=/(>)(<)(\/*)/g;let i=this.getXmlString().replace(n,`$1\r
$2$3`),r=0;const a=i.split(`\r
`).map(l=>{let c="";l.match(/<\/\w/)&&(r-=1);for(let h=0;h<r;h++)c+="  ";return l.match(/<[^!?].*>[^<]*$/)&&(r+=1),c+l}).join(`\r
`);console.log(a)}async save(e){try{const i=await(await e.getFileHandle(this.timelineName+".xml",{create:!0})).createWritable();await i.write(this.getXmlString()),await i.close()}catch(n){console.error("Failed to save file",n)}}}const m6={tags:[],shotsjson:"",script:"",split_shots_prompt:{preset:"split_shots"}};class cx extends Vn{sceneJson=null;shots=[];project;is_generating_shotsjson=!1;is_generating_tags=!1;is_generating_all_shot_images=!1;split_shots_prompt=null;selectedShot=null;constructor(e,n,i){super(i,e),this.project=n,yr(this,{sceneJson:Ce,shots:Ce,is_generating_shotsjson:Ce,is_generating_tags:Ce,is_generating_all_shot_images:Ce,split_shots_prompt:Ce,selectedShot:Ce,finishedShotsNum:ur,tags:ur,selectShot:ut})}selectShot(e){this.shots.includes(e)&&(this.selectedShot=e)}async load(){try{this.sceneJson=await fr.create(this.handle,"sceneinfo.json",m6),this.shots=[];for await(const e of this.handle.values())if(e.kind==="directory"){const n=new Bn(e,this);await n.load(),this.shots.push(n)}}catch(e){console.error("Error loading scene:",e),this.sceneJson=null,this.shots=[]}}removeTag(e){this.sceneJson?.data?.tags&&(this.sceneJson.data.tags=this.sceneJson.data.tags.filter(n=>n!==e),this.sceneJson.save())}async delete(){if(!this.project?.handle){console.error("Cannot delete scene: project root not set");return}try{await(await this.project.handle.getDirectoryHandle("SCENES")).removeEntry(this.name,{recursive:!0}),we(()=>{this.project&&(this.project.scenes=this.project.scenes.filter(n=>n!==this))})}catch(e){console.error("Failed to delete scene:",e)}}async createShot(e){if(!this.handle)return console.error("No scene folder available"),null;const n=this.shots.find(i=>i.name===e);if(n)return n;try{const i=await this.handle.getDirectoryHandle(e,{create:!0}),r=new Bn(i,this);return await r.load(),we(()=>{const a=this.shots.findIndex(l=>l.name.localeCompare(e)>0);a===-1?this.shots.push(r):this.shots.splice(a,0,r)}),r}catch(i){return console.error("Failed to create shot:",i),null}}get finishedShotsNum(){return this.shots.filter(e=>e.shotJson?.data?.finished).length}getShotsWithStatus(e,n=!1){const i=Object.keys(Bn.shot_states),r=i.indexOf(e);return r===-1?0:this.shots.filter(a=>{const l=a.shotJson?.data?.shot_state??i[0],c=i.indexOf(l);return n?c===r:c>=r}).length}async generateShotsJson(){if(!this.sceneJson?.data?.script)return null;we(()=>{this.is_generating_shotsjson=!0});const e=this.sceneJson.data.script,n=`
${this.project.workflows.split_scene_into_shots.prompt}

${this.sceneJson.data.split_prompt}

SCRIPT:
${e}
`,i=this.project.projinfo?.getField("workflows/split_scene_into_shots/system_message");try{return await Kd.txt2txt(n,i,this.project?.projinfo?.getField("workflows/split_scene_into_shots/model"))}catch(r){return console.error("Error generating shots JSON:",r),null}finally{we(()=>{this.is_generating_shotsjson=!1})}}async createShotsFromShotsJson(){if(!this.sceneJson?.data?.shotsjson){console.warn("No shots JSON found in scene.");return}let e;try{e=JSON.parse(this.sceneJson.data.shotsjson)}catch(n){console.error("Invalid shots JSON:",n),alert("Error: The shots JSON is invalid. Please check the format.");return}for(const n of Object.keys(e)){const i=e[n];if(!i||typeof i!="object"){console.warn(`Skipping invalid shot data for key: ${n}`);continue}try{const r=await this.createShot(n);if(!r){console.error(`Failed to create shot ${n}`);continue}r.shotJson&&(Object.assign(r.shotJson.data,i),await r.shotJson.save())}catch(r){console.error(`Error creating shot ${n}:`,r)}}}log(){console.log(So(this))}getTags(){if(!this.sceneJson?.data?.tags||!this.project?.artbook)return[];const e=[];for(const n of this.sceneJson.data.tags){const i=this.project.artbook.getTag(n);i&&e.push(i)}return e}get tags(){return this.getTags()}async generateTags(){we(()=>{this.is_generating_tags=!0});const e=`
${this.project?.projinfo?.data?.generate_tags_prompt}

SCRIPT:
${this.sceneJson?.data.script}

SHOTS JSON:
${this.sceneJson?.data.shotsjson}

REFS DICTIONARY:
${JSON.stringify(this.project?.artbook?.getJson(),null,2)}

`,n="You are a helpful assistant. Do not write explanations. ";try{const i=await Kd.txt2txt(e,n,this.project?.projinfo?.data.gpt_model);for(const r of i?.split(`
`)||[]){const a=r.trim();a&&(console.log("Adding Tag: ",a),this.addTag(a))}return i}catch(i){return console.error("Error generating tags:",i),null}finally{we(()=>{this.is_generating_tags=!1})}}addTag(e){we(()=>{this.sceneJson?.data.tags.includes(e)||(this.project?.artbook?.getTag(e)?(this.sceneJson?.data.tags.push(e),this.sceneJson?.save()):console.log("Tag not found: ",e))})}async generateAllShotImages(){we(()=>{this.is_generating_all_shot_images=!0});const e=this.shots.filter(n=>!n.srcImage).map(n=>n.GenerateImage());await Promise.all(e),we(()=>{this.is_generating_all_shot_images=!1})}async createResolveXML(){const e=new p6(this.name);let n=1e3;const i=await Vn.open(this.project.timelinesDirHandle,this.name);for(const r of this.shots){let a="r1";const c=this.name+"_"+r.name;if(r.srcImage){const h=await r.srcImage.copyToFolder(i,"img_"+c),d=this.project.projinfo?.getField("project_path")+h.path;a=e.addAsset(d,"img_"+c)}if(r.outVideo){const h=await r.outVideo.copyToFolder(i,"vod_"+c),d=this.project.projinfo?.getField("project_path")+h.path,m=e.addAsset(d,"vod_"+c,!0,5);e.appendClip(m,"vod_"+c,5,n,1)}if(r.outVideoLipsync){const h=await r.outVideoLipsync.copyToFolder(i,"vodLS_"+c),d=this.project.projinfo?.getField("project_path")+h.path,m=e.addAsset(d,"vodLS_"+c,!0,5);e.appendClip(m,"vodLS_"+c,5,n,2)}e.appendClip(a,c,5,n),e.appendText(c,5,n,3),n+=5}e.log(),e.save(this.project.timelinesDirHandle?.handle)}}const oy=(t,e)=>e.some(n=>t instanceof n);let fx,dx;function g6(){return fx||(fx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v6(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ry=new WeakMap,Jg=new WeakMap,Lh=new WeakMap;function y6(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Qr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",l)});return Lh.set(e,t),e}function _6(t){if(ry.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});ry.set(t,e)}let sy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ry.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qI(t){sy=t(sy)}function S6(t){return v6().includes(t)?function(...e){return t.apply(ay(this),e),Qr(this.request)}:function(...e){return Qr(t.apply(ay(this),e))}}function b6(t){return typeof t=="function"?S6(t):(t instanceof IDBTransaction&&_6(t),oy(t,g6())?new Proxy(t,sy):t)}function Qr(t){if(t instanceof IDBRequest)return y6(t);if(Jg.has(t))return Jg.get(t);const e=b6(t);return e!==t&&(Jg.set(t,e),Lh.set(e,t)),e}const ay=t=>Lh.get(t);function w6(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(t,e),c=Qr(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Qr(l.result),h.oldVersion,h.newVersion,Qr(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const E6=["get","getKey","getAll","getAllKeys","count"],C6=["put","add","delete","clear"],Kg=new Map;function hx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kg.get(e))return Kg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=C6.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||E6.includes(n)))return;const a=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&h.done]))[0]};return Kg.set(e,a),a}qI(t=>({...t,get:(e,n,i)=>hx(e,n)||t.get(e,n,i),has:(e,n)=>!!hx(e,n)||t.has(e,n)}));const T6=["continue","continuePrimaryKey","advance"],px={},ly=new WeakMap,jI=new WeakMap,x6={get(t,e){if(!T6.includes(e))return t[e];let n=px[e];return n||(n=px[e]=function(...i){ly.set(this,jI.get(this)[e](...i))}),n}};async function*A6(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,x6);for(jI.set(n,e),Lh.set(n,ay(e));e;)yield n,e=await(ly.get(n)||e.continue()),ly.delete(n)}function mx(t,e){return e===Symbol.asyncIterator&&oy(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&oy(t,[IDBIndex,IDBObjectStore])}qI(t=>({...t,get(e,n,i){return mx(e,n)?A6:t.get(e,n,i)},has(e,n){return mx(e,n)||t.has(e,n)}}));const R6="ShotMasterRE",jf="settings";class M6{db=null;data={id:"settings",lastOpenedFolder:null,recentFolders:[],api_keys:{}};constructor(){ka(this.data)}async getDB(){return this.db?this.db:(this.db=await w6(R6,1,{upgrade(e){e.objectStoreNames.contains(jf)||e.createObjectStore(jf,{keyPath:"id"})}}),this.db)}async load(){const n=await(await this.getDB()).get(jf,"settings");return n&&we(()=>{Object.assign(this.data,n)}),this.data}async save(){const e=await this.getDB(),n=So(this.data);await e.put(jf,n)}async update(e){we(()=>e(this.data)),await this.save()}}class N6{fileHandle;text="";scenes=new Map;project=null;constructor(e,n=null){this.fileHandle=e,this.project=n,ka(this,{},{autoBind:!0})}async load(){const e=await this.fileHandle.getFile();this.text=(await e.text()).replace(/\r\n/g,`
`),this.splitIntoScenes()}async save(){const e=await this.fileHandle.createWritable();await e.write(this.text),await e.close()}setText(e){this.text=e,this.splitIntoScenes()}splitIntoScenes(){this.scenes.clear();const e=/^SC_[^\n]{1,32}$/gm,n=[...this.text.matchAll(e)];if(n.length===0){this.scenes.set("",this.text);return}for(let i=0;i<n.length;i++){const r=n[i][0],a=n[i].index;if(i===0&&a>0){const h=this.text.slice(0,a);this.scenes.set("",h)}const l=i+1<n.length?n[i+1].index:this.text.length,c=this.text.slice(a,l);this.scenes.set(r,c)}}get sortedSceneKeys(){return Array.from(this.scenes.keys()).sort((e,n)=>e.localeCompare(n))}joinScenes(){let e="";for(const n of this.sortedSceneKeys)e+=this.scenes.get(n);return e}setSceneText(e,n){this.scenes.set(e,n),this.text=this.joinScenes(),this.splitIntoScenes()}async createScenes(){if(!this.project){console.error("Script has no project reference");return}for(const e of this.sortedSceneKeys){if(e==="")continue;const n=this.scenes.get(e)??"";try{const i=await this.project.createScene(e);if(!i){console.error(`Failed to create scene ${e}`);continue}i.sceneJson&&(i.sceneJson.data.script=n,await i.sceneJson.save())}catch(i){console.error(`Error creating scene ${e}:`,i)}}}}const I6={gpt_model:"gpt-4o-mini",describe_prompt:"        . ",generate_tags_prompt:`
     (SCRIPT)     (SHOTS JSON)        REFS DICTIONARY     .

     ,        ,      :
  ENV/ROOM1/Night.png
  CHAR/VICTOR/Portrait.png


  `,split_shot_prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,prompt_presets:{split_shots:{model:"gpt-4o",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_tags:{model:"gpt-4o",prompt:"Generate Tags ",system_message:"You are a tagger "}},workflows:{generate_shot_image:{model:"gemini-2.5-flash-image"},split_scene_into_shots:{model:"gpt-4o-mini",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_video_kling:{model:Ie.options.img2video.model.v2_6,mode:Ie.options.img2video.mode.std,duration:Ie.options.img2video.duration.five,sound:Ie.options.img2video.sound.off},kling_motion_control:{mode:Ie.options.motion_control.mode.std,character_orientation:Ie.options.motion_control.character_orientation.image,keep_original_sound:Ie.options.motion_control.keep_original_sound.no}}};class Yg extends Vn{scenes=[];artbook=null;script=null;userSettingsDB;projinfo=null;currentView={type:"none"};selectedScene=null;timelinesDirHandle=null;scenesLocalFolder=null;constructor(e,n){super(null,e),this.userSettingsDB=n,yr(this,{parentFolder:Ce,scenes:Ce,artbook:Ce,script:Ce,currentView:Ce,selectedScene:Ce,loadFromFolder:ut,setView:ut,setScene:ut})}async loadFromFolder(e){e&&(this.handle=e,this.path="",this.timelinesDirHandle=await Vn.open(this,"Timelines"),we(async()=>{this.userSettingsDB.data.lastOpenedFolder=e,(await Promise.all(this.userSettingsDB.data.recentFolders.map(async i=>{try{return await i.isSameEntry(e)}catch{return!1}}))).includes(!0)||(this.userSettingsDB.data.recentFolders.push(e),this.userSettingsDB.data.recentFolders=this.userSettingsDB.data.recentFolders.slice(-5)),await this.userSettingsDB.save(),this.projinfo=await fr.create(this.handle,"projinfo.json",I6)}),await Promise.all([this.loadScenes(),this.loadArtbook(),this.loadScript(),this.loadDB()]))}async loadScenes(){if(this.handle)try{const e=await this.handle.getDirectoryHandle("SCENES",{create:!0});this.scenesLocalFolder=new Vn(this,e);const n=[];for await(const i of e.values())if(i.kind==="directory"){const r=new cx(i,this,this.scenesLocalFolder);await r.load(),n.push(r)}we(()=>{this.scenes=n})}catch(e){console.error("Error loading scenes:",e),we(()=>{this.scenes=[]})}}async loadArtbook(){if(this.handle)try{const e=await this.handle.getDirectoryHandle("REFS",{create:!0}),n=new d6(e,this);await n.load(),we(()=>{this.artbook=n})}catch(e){console.error("Error loading artbook:",e),we(()=>{this.artbook=null})}}async loadScript(){if(this.handle)try{const e=await this.handle.getFileHandle("script.txt",{create:!0}),n=new N6(e,this);await n.load(),we(()=>{this.script=n})}catch(e){console.error("Error loading script:",e),we(()=>{this.script=null})}}async loadDB(){await this.userSettingsDB.load(),xi.getApiKey=()=>this.userSettingsDB.data.api_keys.Google_API_KEY||null,xi.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.Google_API_KEY=e})},Kd.getApiKey=()=>this.userSettingsDB.data.api_keys.GPT_API_KEY||null,Kd.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.GPT_API_KEY=e})},Ie.getKeysDict=()=>({accessKey:this.userSettingsDB.data.api_keys.Kling_Acess_Key,secretKey:this.userSettingsDB.data.api_keys.Kling_Secret_Key})}async createScene(e){if(!this.handle)return console.error("No project folder open"),null;const n=this.scenes.find(i=>i.handle.name===e);if(n)return n;try{const r=await(await this.handle.getDirectoryHandle("SCENES",{create:!0})).getDirectoryHandle(e,{create:!0}),a=new cx(r,this,this.scenesLocalFolder);return await a.load(),we(()=>{const l=this.scenes.findIndex(c=>c.name.localeCompare(a.name)>0);l===-1?this.scenes.push(a):this.scenes.splice(l,0,a)}),a}catch(i){return console.error("Failed to create scene:",i),null}}log(){console.log(So(this))}setView(e,n=null){this.currentView=e,this.selectedScene=n}setScene(e){this.setView({type:"scene"},e)}get promptPresets(){return this.projinfo?this.projinfo.data.prompt_presets:{}}savePromptPreset(e){we(()=>{this.projinfo&&(this.projinfo.data.prompt_presets[e.preset]=e,this.projinfo?.save())})}get workflows(){return this.projinfo?.data.workflows}updateWorkflow(e,n,i){we(()=>{this.workflows[e]||(this.workflows[e]={}),this.workflows[e][n]=i,this.projinfo?.save()})}download_asset(e,n){const i=document.createElement("a");i.href=e,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}const D6=({onOpenFolder:t,recentFolders:e,onOpenRecent:n,project:i})=>{const r=[{name:"Open",onClick:t},{name:"Recent",subItems:e.length?e.map(c=>({name:c.name,onClick:()=>n(c)})):[{name:"No Recent"}]}],a=[{name:"Undo"},{name:"Redo"}],l=[{name:"About"}];return b.jsx(eC,{expand:!0,children:b.jsxs(pR,{fluid:!0,children:[b.jsx(eC.Brand,{children:"ShotMasterRT"}),b.jsxs(I2,{className:"me-auto",style:{userSelect:"none"},children:[b.jsx(Vr,{title:"File",items:r}),b.jsx(Vr,{title:"Edit",items:a}),b.jsx(Vr,{title:"Help",items:l}),i&&b.jsxs(b.Fragment,{children:[b.jsx(Vr,{title:"Settings",onClick:()=>i.setView({type:"settings"})}),b.jsx(Vr,{title:"Script",onClick:()=>i.setView({type:"script"})}),b.jsx(Vr,{title:"Artbook",onClick:()=>i.setView({type:"artbook"})}),b.jsx(Vr,{title:"TaskView",onClick:()=>i.setView({type:"taskview"})})]})]})]})})},O6=He(({scene:t,statuses:e})=>t.shots.length===0?null:b.jsx("div",{style:{display:"flex",gap:"2px"},children:e.map(i=>{const r=t.getShotsWithStatus(i,!0),a=Bn.shot_states[i]??"#aaa";return Array.from({length:r}).map((l,c)=>b.jsx("div",{style:{width:"4px",height:"12px",backgroundColor:a},title:`${i}`},`${i}-${c}`))})})),k6=He(({scene:t})=>{const e=()=>{!t||!t.sceneJson||t.project?.setView({type:"scene"},t)},n=t.project?.selectedScene===t;return b.jsxs("li",{className:"d-flex justify-content-between align-items-center py-1 px-2",style:{cursor:"pointer"},onClick:e,children:[b.jsx("span",{className:n?"text-success":void 0,children:t.name}),b.jsx("span",{className:"text-muted",children:b.jsx(O6,{scene:t,statuses:Object.keys(Bn.shot_states)})})]})}),tt=({onClick:t,label:e="Click",className:n=""})=>b.jsx("button",{className:`btn btn-sm btn-outline-secondary ${n}`,onClick:t,children:e}),P6=He(({project:t})=>{if(!t)return b.jsx("div",{children:"No Project Opened"});const e=async()=>{const i=prompt("Enter new scene name");i&&await t.createScene(i)},n=t.name||"No Project Opened";return b.jsxs("div",{style:{width:"200px",minWidth:"200px",borderRight:"1px solid #ced4da",padding:"10px",display:"flex",flexDirection:"column"},children:[b.jsx("h5",{style:{flexShrink:0,marginBottom:8},children:n}),b.jsx(tt,{label:"+ Add Scene",onClick:e,className:"mb-2"}),b.jsx("ul",{className:"list-unstyled",style:{margin:0,padding:0,overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:t.scenes.map((i,r)=>b.jsx(k6,{scene:i},r))})]})});class Jf extends E.Component{constructor(e){super(e),this.state={value:e.value}}handleChange=e=>{const n=e.target.value;this.setState({value:n}),this.props.onChange(n)};render(){const{label:e}=this.props,{value:n}=this.state;return b.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:12},children:[b.jsx("label",{style:{marginRight:8,minWidth:120},children:e}),b.jsx("input",{type:"text",value:n,onChange:this.handleChange,style:{flexGrow:1,padding:6}})]})}}const Ha=({label:t="Section",children:e,defaultCollapsed:n=!1,className:i="",headerExtra:r})=>{const[a,l]=E.useState(n);return b.jsxs("div",{className:`border rounded p-2 mb-2 ${i}`,children:[b.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsx("button",{className:"btn btn-sm ",onClick:()=>l(!a),children:a?"":""}),b.jsx("strong",{children:t})]}),r&&!a&&b.jsx("div",{children:r})]}),!a&&b.jsx("div",{className:"mt-2",children:e})]})},uy=({label:t,initialText:e,onSave:n,onEdit:i,fitHeight:r=!1,headerExtra:a})=>{const[l,c]=E.useState(e),[h,d]=E.useState(e),[m,y]=E.useState(!1),[S,w]=E.useState(!1),T=E.useRef(null);E.useEffect(()=>{c(e),d(e),r&&T.current&&(T.current.style.height="auto",T.current.style.height=`${T.current.scrollHeight}px`)},[e,r]);const x=l!==h,A=N=>{c(N),i&&i(N)},M=async()=>{n&&(w(!0),await n(l),d(l),w(!1))};E.useEffect(()=>{if(!m||!x)return;const N=setTimeout(()=>M(),1e3);return()=>clearTimeout(N)},[l,m,x]),E.useEffect(()=>{r&&T.current&&(T.current.style.height="auto",T.current.style.height=`${T.current.scrollHeight}px`)},[l,r]);const I=b.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a&&b.jsx(b.Fragment,{children:a}),b.jsx("button",{className:"btn btn-primary btn-sm",disabled:S||!x||!n,onClick:M,children:S?"Saving...":x?"Save*":"Save"}),b.jsxs("label",{className:"d-flex align-items-center gap-1 mb-0",children:[b.jsx("input",{type:"checkbox",checked:m,onChange:N=>y(N.target.checked)}),"Auto-save"]})]});return b.jsx(Ha,{label:t,headerExtra:I,children:b.jsx("textarea",{ref:T,className:"form-control",style:{fontFamily:"monospace",overflowY:"auto",maxHeight:"800px"},value:l,onChange:N=>A(N.target.value)})})},zt=He(({localJson:t,field:e,fitHeight:n=!1,headerExtra:i})=>{if(!t)return;const r=async a=>{await t.updateField(e,a)};return b.jsx(uy,{label:e,initialText:t.getField(e)??"",onSave:r,fitHeight:n,headerExtra:i})}),dr=({tabs:t})=>{const e=Object.keys(t),[n,i]=E.useState(e[0]);return b.jsxs("div",{children:[b.jsx("ul",{className:"nav nav-tabs",children:e.map(r=>b.jsx("li",{className:"nav-item",children:b.jsx("button",{className:`nav-link ${n===r?"active":""}`,onClick:()=>i(r),children:r})},r))}),b.jsx("div",{className:"tab-content p-3 border border-top-0",children:b.jsx("div",{className:"tab-pane fade show active",children:t[n]})})]})};function JI({items:t,currentItem:e,onPicked:n,labelRenderer:i,className:r=""}){return b.jsxs(Of,{className:r,children:[b.jsx(Of.Toggle,{variant:"outline-secondary",size:"sm",children:i?i(e):String(e)}),b.jsx(Of.Menu,{children:t.map((a,l)=>b.jsx(Of.Item,{onClick:()=>n(a),children:i?i(a):String(a)},l))})]})}const L6=He(({project:t})=>{const{userSettingsDB:e}=t;if(!e)return null;const n=t.projinfo?{"  ":b.jsx(zt,{localJson:t.projinfo,field:"split_shot_prompt",fitHeight:!0})," ":b.jsx(zt,{localJson:t.projinfo,field:"generate_tags_prompt",fitHeight:!0})}:{};return b.jsxs("div",{style:{padding:20},children:[b.jsx("h3",{children:"API Keys"}),b.jsx(tt,{onClick:()=>{t.log()},label:"LOG Project"}),b.jsx(tt,{onClick:()=>{t.download_asset("assets/server.exe","server.exe")},label:"Download Server"}),b.jsx(zt,{localJson:t.projinfo,field:"project_path",fitHeight:!0}),b.jsx(Jf,{label:"GPT API Key",value:e.data.api_keys.GPT_API_KEY||"",onChange:async i=>{await e.update(r=>{r.api_keys.GPT_API_KEY=i})}}),b.jsx(Jf,{label:"Google API Key",value:e.data.api_keys.Google_API_KEY||"",onChange:async i=>{await e.update(r=>{r.api_keys.Google_API_KEY=i})}}),b.jsx(Jf,{label:"Kling Acess Key",value:e.data.api_keys.Kling_Acess_Key||"",onChange:async i=>{await e.update(r=>{r.api_keys.Kling_Acess_Key=i})}}),b.jsx(Jf,{label:"Kling Secret Key",value:e.data.api_keys.Kling_Secret_Key||"",onChange:async i=>{await e.update(r=>{r.api_keys.Kling_Secret_Key=i})}}),b.jsx("div",{children:b.jsx(JI,{items:zI,currentItem:t.projinfo?.data.gpt_model,onPicked:i=>{t.projinfo?.updateField("gpt_model",i)}})}),b.jsx("h2",{children:"Prompts"}),Object.keys(n).length>0&&b.jsx(dr,{tabs:n})]})}),U6=He(({project:t})=>{if(!t.script)return b.jsx("div",{children:"No script loaded in project."});const e=async r=>{t.script.setText(r),await t.script.save()},n={};for(const r of t.script.sortedSceneKeys)n[r||"Intro"]=b.jsx(uy,{label:r||"Intro",initialText:t.script.scenes.get(r),onSave:async a=>{t.script.setSceneText(r,a),await t.script.save()},fitHeight:!0});const i=async()=>{try{await t.script.createScenes(),alert("Scenes created successfully!")}catch(r){console.error("Error creating scenes:",r),alert("Failed to create scenes. See console for details.")}};return b.jsxs("div",{style:{padding:"1rem"},children:[b.jsx("h4",{children:"Script"}),b.jsx(tt,{label:"Create Scenes from Script",onClick:i,className:"mb-2"}),b.jsx(dr,{tabs:{"Full Script":b.jsx(uy,{label:"Full Script",initialText:t.script.text,onSave:e,fitHeight:!0}),Scenes:b.jsx(dr,{tabs:n})}})]})}),F6=He(({art:t,onClose:e})=>{const[n,i]=E.useState(null),[r,a]=E.useState(!0);E.useEffect(()=>{let c=!0,h=t;a(!0),i(null);async function d(){const m=await h.image.getUrlObject();if(!c||t!==h)return;i(m);const y=await h.getArtInfo();!c||t!==h||(h.artInfo=y,a(!1))}return d(),()=>{c=!1}},[t]);const l=t.handle.name;return r?b.jsx("div",{children:"Loading art info..."}):b.jsxs("div",{className:"art-info-card",style:{border:"1px solid #ccc",padding:"1rem",borderRadius:"8px"},children:[b.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("strong",{children:l}),b.jsx("button",{onClick:e,style:{cursor:"pointer",border:"none",background:"transparent",fontSize:"1.2rem"},children:""})]}),n?b.jsx("img",{src:n,className:"preview-img",style:{maxWidth:"1000px",width:"auto",maxHeight:"1000px",objectFit:"contain",borderRadius:"4px",display:"block",marginBottom:"1rem"}}):b.jsx("div",{style:{padding:"4rem",textAlign:"center"},children:b.jsx("span",{children:"Loading image..."})}),t.artInfo&&b.jsx(zt,{localJson:t.artInfo,field:"prompt",fitHeight:!0})]})}),B6=He(({artbook:t})=>{const[e,n]=E.useState(null);if(!Object.keys(t.data).length)return b.jsx("div",{children:"No Artbook content found."});const i=({art:c})=>{const[h,d]=E.useState(null);return E.useEffect(()=>{let m=!0;return c.image.getUrlObject().then(y=>{m&&d(y)}),()=>{m=!1}},[c]),b.jsx(hR,{xs:6,md:3,lg:2,style:{marginBottom:"1rem"},children:b.jsxs(If,{onClick:()=>n(c),style:{cursor:"pointer"},children:[h?b.jsx(If.Img,{variant:"top",src:h}):b.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:b.jsx(pM,{animation:"border"})}),b.jsx(If.Body,{children:b.jsx(If.Text,{style:{fontSize:"0.8rem"},children:c.handle.name})})]})})},r=(c,h)=>b.jsxs("div",{style:{marginBottom:"2rem"},children:[b.jsx("h5",{children:c}),b.jsx(hM,{children:h.map(d=>b.jsx(i,{art:d},d.handle.name))}),e&&h.includes(e)&&b.jsx("div",{style:{marginTop:"1rem"},children:b.jsx(F6,{art:e,onClose:()=>n(null)})})]},c),a=c=>b.jsxs("div",{style:{padding:"1rem"},children:[Object.entries(c).map(([h,d])=>r(h,d)),b.jsx("div",{style:{height:"500px"}})]}),l={};for(const c in t.data)l[c]=a(t.data[c]);return b.jsxs("div",{style:{padding:"1rem"},children:[b.jsx("h2",{className:"mb-3",children:"Artbook"}),b.jsx(dr,{tabs:l})]})}),$6=He(({art:t,scene:e})=>{const[n,i]=E.useState(null);if(E.useEffect(()=>{t.getArtInfo();let a=!0;return(async()=>{const c=await t.image.getUrlObject();a&&i(c||null)})(),()=>{a=!1,t.image.revokeUrl()}},[t]),!n)return null;const r=()=>{e.removeTag(t.path)};return b.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsx("img",{src:n,alt:t.handle.name,style:{width:40,height:40,objectFit:"cover",marginRight:8}}),b.jsxs("div",{children:[b.jsx("div",{children:t.handle.name}),b.jsx("small",{className:"text-muted",children:t.path}),t.artInfo&&b.jsx("div",{children:b.jsx("small",{children:t.artInfo.data?.description||""})})]})]}),b.jsx(tt,{onClick:r,label:"X"})]})}),G6=({art:t,onClick:e})=>{const[n,i]=E.useState("");return E.useEffect(()=>{let r=!0;return t.image.getUrlObject().then(a=>{r&&i(a)}),()=>{r=!1,t.image.revokeUrl()}},[t]),b.jsxs("div",{className:"px-2 py-1 hover-bg-light d-flex align-items-center",style:{cursor:"pointer",gap:6},onClick:e,children:[n&&b.jsx("img",{src:n,alt:t.handle.name,style:{width:36,height:36,objectFit:"cover",borderRadius:2}}),b.jsx("span",{children:t.handle.name})]})},Uh=({onClick:t,label:e="Click",className:n="",is_loading:i=!1})=>b.jsx(tt,{onClick:t,className:`${n} ${i?"disabled":""}`,label:b.jsxs("span",{className:"d-flex align-items-center justify-content-center",children:[b.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true",style:{animation:i?void 0:"none",borderColor:i?void 0:"#6c757d"}}),b.jsx("span",{children:e})]})});function Ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function gx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fh(...t){return e=>{let n=!1;const i=t.map(r=>{const a=gx(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():gx(t[r],null)}}}}function rn(...t){return E.useCallback(Fh(...t),t)}function Xu(t,e=[]){let n=[];function i(a,l){const c=E.createContext(l),h=n.length;n=[...n,l];const d=y=>{const{scope:S,children:w,...T}=y,x=S?.[t]?.[h]||c,A=E.useMemo(()=>T,Object.values(T));return b.jsx(x.Provider,{value:A,children:w})};d.displayName=a+"Provider";function m(y,S){const w=S?.[t]?.[h]||c,T=E.useContext(w);if(T)return T;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[d,m]}const r=()=>{const a=n.map(l=>E.createContext(l));return function(c){const h=c?.[t]||a;return E.useMemo(()=>({[`__scope${t}`]:{...c,[t]:h}}),[c,h])}};return r.scopeName=t,[i,H6(r,...e)]}function H6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const l=i.reduce((c,{useScope:h,scopeName:d})=>{const y=h(a)[`__scope${d}`];return{...c,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}var hr=globalThis?.document?E.useLayoutEffect:()=>{},V6=Zx[" useInsertionEffect ".trim().toString()]||hr;function x_({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,l]=z6({defaultProp:e,onChange:n}),c=t!==void 0,h=c?t:r;{const m=E.useRef(t!==void 0);E.useEffect(()=>{const y=m.current;y!==c&&console.warn(`${i} is changing from ${y?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,i])}const d=E.useCallback(m=>{if(c){const y=q6(m)?m(t):m;y!==t&&l.current?.(y)}else a(m)},[c,t,a,l]);return[h,d]}function z6({defaultProp:t,onChange:e}){const[n,i]=E.useState(t),r=E.useRef(n),a=E.useRef(e);return V6(()=>{a.current=e},[e]),E.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,i,a]}function q6(t){return typeof t=="function"}function Yd(t){const e=j6(t),n=E.forwardRef((i,r)=>{const{children:a,...l}=i,c=E.Children.toArray(a),h=c.find(K6);if(h){const d=h.props.children,m=c.map(y=>y===h?E.Children.count(d)>1?E.Children.only(null):E.isValidElement(d)?d.props.children:null:y);return b.jsx(e,{...l,ref:r,children:E.isValidElement(d)?E.cloneElement(d,void 0,m):null})}return b.jsx(e,{...l,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function j6(t){const e=E.forwardRef((n,i)=>{const{children:r,...a}=n;if(E.isValidElement(r)){const l=X6(r),c=Y6(a,r.props);return r.type!==E.Fragment&&(c.ref=i?Fh(i,l):l),E.cloneElement(r,c)}return E.Children.count(r)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var J6=Symbol("radix.slottable");function K6(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===J6}function Y6(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...c)=>{const h=a(...c);return r(...c),h}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function X6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var W6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qt=W6.reduce((t,e)=>{const n=Yd(`Primitive.${e}`),i=E.forwardRef((r,a)=>{const{asChild:l,...c}=r,h=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(h,{...c,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function KI(t,e){t&&uh.flushSync(()=>t.dispatchEvent(e))}function YI(t){const e=t+"CollectionProvider",[n,i]=Xu(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:A,children:M}=x,I=ot.useRef(null),N=ot.useRef(new Map).current;return b.jsx(r,{scope:A,itemMap:N,collectionRef:I,children:M})};l.displayName=e;const c=t+"CollectionSlot",h=Yd(c),d=ot.forwardRef((x,A)=>{const{scope:M,children:I}=x,N=a(c,M),D=rn(A,N.collectionRef);return b.jsx(h,{ref:D,children:I})});d.displayName=c;const m=t+"CollectionItemSlot",y="data-radix-collection-item",S=Yd(m),w=ot.forwardRef((x,A)=>{const{scope:M,children:I,...N}=x,D=ot.useRef(null),L=rn(A,D),U=a(m,M);return ot.useEffect(()=>(U.itemMap.set(D,{ref:D,...N}),()=>void U.itemMap.delete(D))),b.jsx(S,{[y]:"",ref:L,children:I})});w.displayName=m;function T(x){const A=a(t+"CollectionConsumer",x);return ot.useCallback(()=>{const I=A.collectionRef.current;if(!I)return[];const N=Array.from(I.querySelectorAll(`[${y}]`));return Array.from(A.itemMap.values()).sort((U,O)=>N.indexOf(U.ref.current)-N.indexOf(O.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:l,Slot:d,ItemSlot:w},T,i]}var Q6=E.createContext(void 0);function XI(t){const e=E.useContext(Q6);return t||e||"ltr"}function Li(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}function Z6(t,e=globalThis?.document){const n=Li(t);E.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var e5="DismissableLayer",cy="dismissableLayer.update",t5="dismissableLayer.pointerDownOutside",n5="dismissableLayer.focusOutside",vx,WI=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),QI=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...h}=t,d=E.useContext(WI),[m,y]=E.useState(null),S=m?.ownerDocument??globalThis?.document,[,w]=E.useState({}),T=rn(e,O=>y(O)),x=Array.from(d.layers),[A]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),M=x.indexOf(A),I=m?x.indexOf(m):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,D=I>=M,L=r5(O=>{const q=O.target,j=[...d.branches].some(Y=>Y.contains(q));!D||j||(r?.(O),l?.(O),O.defaultPrevented||c?.())},S),U=s5(O=>{const q=O.target;[...d.branches].some(Y=>Y.contains(q))||(a?.(O),l?.(O),O.defaultPrevented||c?.())},S);return Z6(O=>{I===d.layers.size-1&&(i?.(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},S),E.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(vx=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),yx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(S.body.style.pointerEvents=vx)}},[m,S,n,d]),E.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),yx())},[m,d]),E.useEffect(()=>{const O=()=>w({});return document.addEventListener(cy,O),()=>document.removeEventListener(cy,O)},[]),b.jsx(qt.div,{...h,ref:T,style:{pointerEvents:N?D?"auto":"none":void 0,...t.style},onFocusCapture:Ge(t.onFocusCapture,U.onFocusCapture),onBlurCapture:Ge(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Ge(t.onPointerDownCapture,L.onPointerDownCapture)})});QI.displayName=e5;var i5="DismissableLayerBranch",o5=E.forwardRef((t,e)=>{const n=E.useContext(WI),i=E.useRef(null),r=rn(e,i);return E.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),b.jsx(qt.div,{...t,ref:r})});o5.displayName=i5;function r5(t,e=globalThis?.document){const n=Li(t),i=E.useRef(!1),r=E.useRef(()=>{});return E.useEffect(()=>{const a=c=>{if(c.target&&!i.current){let h=function(){ZI(t5,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);i.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function s5(t,e=globalThis?.document){const n=Li(t),i=E.useRef(!1);return E.useEffect(()=>{const r=a=>{a.target&&!i.current&&ZI(n5,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function yx(){const t=new CustomEvent(cy);document.dispatchEvent(t)}function ZI(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?KI(r,a):r.dispatchEvent(a)}var Xg=0;function a5(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??_x()),document.body.insertAdjacentElement("beforeend",t[1]??_x()),Xg++,()=>{Xg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xg--}},[])}function _x(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Wg="focusScope.autoFocusOnMount",Qg="focusScope.autoFocusOnUnmount",Sx={bubbles:!1,cancelable:!0},l5="FocusScope",eD=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...l}=t,[c,h]=E.useState(null),d=Li(r),m=Li(a),y=E.useRef(null),S=rn(e,x=>h(x)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(i){let x=function(N){if(w.paused||!c)return;const D=N.target;c.contains(D)?y.current=D:ir(y.current,{select:!0})},A=function(N){if(w.paused||!c)return;const D=N.relatedTarget;D!==null&&(c.contains(D)||ir(y.current,{select:!0}))},M=function(N){if(document.activeElement===document.body)for(const L of N)L.removedNodes.length>0&&ir(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",A);const I=new MutationObserver(M);return c&&I.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",A),I.disconnect()}}},[i,c,w.paused]),E.useEffect(()=>{if(c){wx.add(w);const x=document.activeElement;if(!c.contains(x)){const M=new CustomEvent(Wg,Sx);c.addEventListener(Wg,d),c.dispatchEvent(M),M.defaultPrevented||(u5(p5(tD(c)),{select:!0}),document.activeElement===x&&ir(c))}return()=>{c.removeEventListener(Wg,d),setTimeout(()=>{const M=new CustomEvent(Qg,Sx);c.addEventListener(Qg,m),c.dispatchEvent(M),M.defaultPrevented||ir(x??document.body,{select:!0}),c.removeEventListener(Qg,m),wx.remove(w)},0)}}},[c,d,m,w]);const T=E.useCallback(x=>{if(!n&&!i||w.paused)return;const A=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,M=document.activeElement;if(A&&M){const I=x.currentTarget,[N,D]=c5(I);N&&D?!x.shiftKey&&M===D?(x.preventDefault(),n&&ir(N,{select:!0})):x.shiftKey&&M===N&&(x.preventDefault(),n&&ir(D,{select:!0})):M===I&&x.preventDefault()}},[n,i,w.paused]);return b.jsx(qt.div,{tabIndex:-1,...l,ref:S,onKeyDown:T})});eD.displayName=l5;function u5(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ir(i,{select:e}),document.activeElement!==n)return}function c5(t){const e=tD(t),n=bx(e,t),i=bx(e.reverse(),t);return[n,i]}function tD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bx(t,e){for(const n of t)if(!f5(n,{upTo:e}))return n}function f5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function d5(t){return t instanceof HTMLInputElement&&"select"in t}function ir(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&d5(t)&&e&&t.select()}}var wx=h5();function h5(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Ex(t,e),t.unshift(e)},remove(e){t=Ex(t,e),t[0]?.resume()}}}function Ex(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function p5(t){return t.filter(e=>e.tagName!=="A")}var m5=Zx[" useId ".trim().toString()]||(()=>{}),g5=0;function wu(t){const[e,n]=E.useState(m5());return hr(()=>{n(i=>i??String(g5++))},[t]),t||(e?`radix-${e}`:"")}const v5=["top","right","bottom","left"],pr=Math.min,_n=Math.max,Xd=Math.round,Kf=Math.floor,Pi=t=>({x:t,y:t}),y5={left:"right",right:"left",bottom:"top",top:"bottom"},_5={start:"end",end:"start"};function fy(t,e,n){return _n(t,pr(e,n))}function Eo(t,e){return typeof t=="function"?t(e):t}function Co(t){return t.split("-")[0]}function Va(t){return t.split("-")[1]}function A_(t){return t==="x"?"y":"x"}function R_(t){return t==="y"?"height":"width"}const S5=new Set(["top","bottom"]);function Mi(t){return S5.has(Co(t))?"y":"x"}function M_(t){return A_(Mi(t))}function b5(t,e,n){n===void 0&&(n=!1);const i=Va(t),r=M_(t),a=R_(r);let l=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Wd(l)),[l,Wd(l)]}function w5(t){const e=Wd(t);return[dy(t),e,dy(e)]}function dy(t){return t.replace(/start|end/g,e=>_5[e])}const Cx=["left","right"],Tx=["right","left"],E5=["top","bottom"],C5=["bottom","top"];function T5(t,e,n){switch(t){case"top":case"bottom":return n?e?Tx:Cx:e?Cx:Tx;case"left":case"right":return e?E5:C5;default:return[]}}function x5(t,e,n,i){const r=Va(t);let a=T5(Co(t),n==="start",i);return r&&(a=a.map(l=>l+"-"+r),e&&(a=a.concat(a.map(dy)))),a}function Wd(t){return t.replace(/left|right|bottom|top/g,e=>y5[e])}function A5(t){return{top:0,right:0,bottom:0,left:0,...t}}function nD(t){return typeof t!="number"?A5(t):{top:t,right:t,bottom:t,left:t}}function Qd(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function xx(t,e,n){let{reference:i,floating:r}=t;const a=Mi(e),l=M_(e),c=R_(l),h=Co(e),d=a==="y",m=i.x+i.width/2-r.width/2,y=i.y+i.height/2-r.height/2,S=i[c]/2-r[c]/2;let w;switch(h){case"top":w={x:m,y:i.y-r.height};break;case"bottom":w={x:m,y:i.y+i.height};break;case"right":w={x:i.x+i.width,y};break;case"left":w={x:i.x-r.width,y};break;default:w={x:i.x,y:i.y}}switch(Va(e)){case"start":w[l]-=S*(n&&d?-1:1);break;case"end":w[l]+=S*(n&&d?-1:1);break}return w}const R5=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:l}=n,c=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let d=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y}=xx(d,i,h),S=i,w={},T=0;for(let x=0;x<c.length;x++){const{name:A,fn:M}=c[x],{x:I,y:N,data:D,reset:L}=await M({x:m,y,initialPlacement:i,placement:S,strategy:r,middlewareData:w,rects:d,platform:l,elements:{reference:t,floating:e}});m=I??m,y=N??y,w={...w,[A]:{...w[A],...D}},L&&T<=50&&(T++,typeof L=="object"&&(L.placement&&(S=L.placement),L.rects&&(d=L.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):L.rects),{x:m,y}=xx(d,S,h)),x=-1)}return{x:m,y,placement:S,strategy:r,middlewareData:w}};async function Eu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:l,elements:c,strategy:h}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:S=!1,padding:w=0}=Eo(e,t),T=nD(w),A=c[S?y==="floating"?"reference":"floating":y],M=Qd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(A)))==null||n?A:A.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:m,strategy:h})),I=y==="floating"?{x:i,y:r,width:l.floating.width,height:l.floating.height}:l.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),D=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},L=Qd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:I,offsetParent:N,strategy:h}):I);return{top:(M.top-L.top+T.top)/D.y,bottom:(L.bottom-M.bottom+T.bottom)/D.y,left:(M.left-L.left+T.left)/D.x,right:(L.right-M.right+T.right)/D.x}}const M5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:l,elements:c,middlewareData:h}=e,{element:d,padding:m=0}=Eo(t,e)||{};if(d==null)return{};const y=nD(m),S={x:n,y:i},w=M_(r),T=R_(w),x=await l.getDimensions(d),A=w==="y",M=A?"top":"left",I=A?"bottom":"right",N=A?"clientHeight":"clientWidth",D=a.reference[T]+a.reference[w]-S[w]-a.floating[T],L=S[w]-a.reference[w],U=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let O=U?U[N]:0;(!O||!await(l.isElement==null?void 0:l.isElement(U)))&&(O=c.floating[N]||a.floating[T]);const q=D/2-L/2,j=O/2-x[T]/2-1,Y=pr(y[M],j),W=pr(y[I],j),re=Y,ie=O-x[T]-W,ae=O/2-x[T]/2+q,de=fy(re,ae,ie),B=!h.arrow&&Va(r)!=null&&ae!==de&&a.reference[T]/2-(ae<re?Y:W)-x[T]/2<0,Q=B?ae<re?ae-re:ae-ie:0;return{[w]:S[w]+Q,data:{[w]:de,centerOffset:ae-de-Q,...B&&{alignmentOffset:Q}},reset:B}}}),N5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:l,initialPlacement:c,platform:h,elements:d}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:S,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:x=!0,...A}=Eo(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const M=Co(r),I=Mi(c),N=Co(c)===c,D=await(h.isRTL==null?void 0:h.isRTL(d.floating)),L=S||(N||!x?[Wd(c)]:w5(c)),U=T!=="none";!S&&U&&L.push(...x5(c,x,T,D));const O=[c,...L],q=await Eu(e,A),j=[];let Y=((i=a.flip)==null?void 0:i.overflows)||[];if(m&&j.push(q[M]),y){const ae=b5(r,l,D);j.push(q[ae[0]],q[ae[1]])}if(Y=[...Y,{placement:r,overflows:j}],!j.every(ae=>ae<=0)){var W,re;const ae=(((W=a.flip)==null?void 0:W.index)||0)+1,de=O[ae];if(de&&(!(y==="alignment"?I!==Mi(de):!1)||Y.every(ee=>Mi(ee.placement)===I?ee.overflows[0]>0:!0)))return{data:{index:ae,overflows:Y},reset:{placement:de}};let B=(re=Y.filter(Q=>Q.overflows[0]<=0).sort((Q,ee)=>Q.overflows[1]-ee.overflows[1])[0])==null?void 0:re.placement;if(!B)switch(w){case"bestFit":{var ie;const Q=(ie=Y.filter(ee=>{if(U){const ne=Mi(ee.placement);return ne===I||ne==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(ne=>ne>0).reduce((ne,ce)=>ne+ce,0)]).sort((ee,ne)=>ee[1]-ne[1])[0])==null?void 0:ie[0];Q&&(B=Q);break}case"initialPlacement":B=c;break}if(r!==B)return{reset:{placement:B}}}return{}}}};function Ax(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Rx(t){return v5.some(e=>t[e]>=0)}const I5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Eo(t,e);switch(i){case"referenceHidden":{const a=await Eu(e,{...r,elementContext:"reference"}),l=Ax(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Rx(l)}}}case"escaped":{const a=await Eu(e,{...r,altBoundary:!0}),l=Ax(a,n.floating);return{data:{escapedOffsets:l,escaped:Rx(l)}}}default:return{}}}}},iD=new Set(["left","top"]);async function D5(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),l=Co(n),c=Va(n),h=Mi(n)==="y",d=iD.has(l)?-1:1,m=a&&h?-1:1,y=Eo(e,t);let{mainAxis:S,crossAxis:w,alignmentAxis:T}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof T=="number"&&(w=c==="end"?T*-1:T),h?{x:w*m,y:S*d}:{x:S*d,y:w*m}}const O5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:l,middlewareData:c}=e,h=await D5(e,t);return l===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:r+h.x,y:a+h.y,data:{...h,placement:l}}}}},k5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:A=>{let{x:M,y:I}=A;return{x:M,y:I}}},...h}=Eo(t,e),d={x:n,y:i},m=await Eu(e,h),y=Mi(Co(r)),S=A_(y);let w=d[S],T=d[y];if(a){const A=S==="y"?"top":"left",M=S==="y"?"bottom":"right",I=w+m[A],N=w-m[M];w=fy(I,w,N)}if(l){const A=y==="y"?"top":"left",M=y==="y"?"bottom":"right",I=T+m[A],N=T-m[M];T=fy(I,T,N)}const x=c.fn({...e,[S]:w,[y]:T});return{...x,data:{x:x.x-n,y:x.y-i,enabled:{[S]:a,[y]:l}}}}}},P5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:l}=e,{offset:c=0,mainAxis:h=!0,crossAxis:d=!0}=Eo(t,e),m={x:n,y:i},y=Mi(r),S=A_(y);let w=m[S],T=m[y];const x=Eo(c,e),A=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const N=S==="y"?"height":"width",D=a.reference[S]-a.floating[N]+A.mainAxis,L=a.reference[S]+a.reference[N]-A.mainAxis;w<D?w=D:w>L&&(w=L)}if(d){var M,I;const N=S==="y"?"width":"height",D=iD.has(Co(r)),L=a.reference[y]-a.floating[N]+(D&&((M=l.offset)==null?void 0:M[y])||0)+(D?0:A.crossAxis),U=a.reference[y]+a.reference[N]+(D?0:((I=l.offset)==null?void 0:I[y])||0)-(D?A.crossAxis:0);T<L?T=L:T>U&&(T=U)}return{[S]:w,[y]:T}}}},L5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:l,elements:c}=e,{apply:h=()=>{},...d}=Eo(t,e),m=await Eu(e,d),y=Co(r),S=Va(r),w=Mi(r)==="y",{width:T,height:x}=a.floating;let A,M;y==="top"||y==="bottom"?(A=y,M=S===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(M=y,A=S==="end"?"top":"bottom");const I=x-m.top-m.bottom,N=T-m.left-m.right,D=pr(x-m[A],I),L=pr(T-m[M],N),U=!e.middlewareData.shift;let O=D,q=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(q=N),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(O=I),U&&!S){const Y=_n(m.left,0),W=_n(m.right,0),re=_n(m.top,0),ie=_n(m.bottom,0);w?q=T-2*(Y!==0||W!==0?Y+W:_n(m.left,m.right)):O=x-2*(re!==0||ie!==0?re+ie:_n(m.top,m.bottom))}await h({...e,availableWidth:q,availableHeight:O});const j=await l.getDimensions(c.floating);return T!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};function Bh(){return typeof window<"u"}function za(t){return oD(t)?(t.nodeName||"").toLowerCase():"#document"}function wn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bi(t){var e;return(e=(oD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oD(t){return Bh()?t instanceof Node||t instanceof wn(t).Node:!1}function di(t){return Bh()?t instanceof Element||t instanceof wn(t).Element:!1}function Ui(t){return Bh()?t instanceof HTMLElement||t instanceof wn(t).HTMLElement:!1}function Mx(t){return!Bh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wn(t).ShadowRoot}const U5=new Set(["inline","contents"]);function Wu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=hi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!U5.has(r)}const F5=new Set(["table","td","th"]);function B5(t){return F5.has(za(t))}const $5=[":popover-open",":modal"];function $h(t){return $5.some(e=>{try{return t.matches(e)}catch{return!1}})}const G5=["transform","translate","scale","rotate","perspective"],H5=["transform","translate","scale","rotate","perspective","filter"],V5=["paint","layout","strict","content"];function N_(t){const e=I_(),n=di(t)?hi(t):t;return G5.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||H5.some(i=>(n.willChange||"").includes(i))||V5.some(i=>(n.contain||"").includes(i))}function z5(t){let e=mr(t);for(;Ui(e)&&!Ia(e);){if(N_(e))return e;if($h(e))return null;e=mr(e)}return null}function I_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const q5=new Set(["html","body","#document"]);function Ia(t){return q5.has(za(t))}function hi(t){return wn(t).getComputedStyle(t)}function Gh(t){return di(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mr(t){if(za(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Mx(t)&&t.host||Bi(t);return Mx(e)?e.host:e}function rD(t){const e=mr(t);return Ia(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ui(e)&&Wu(e)?e:rD(e)}function Cu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=rD(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),l=wn(r);if(a){const c=hy(l);return e.concat(l,l.visualViewport||[],Wu(r)?r:[],c&&n?Cu(c):[])}return e.concat(r,Cu(r,[],n))}function hy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sD(t){const e=hi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ui(t),a=r?t.offsetWidth:n,l=r?t.offsetHeight:i,c=Xd(n)!==a||Xd(i)!==l;return c&&(n=a,i=l),{width:n,height:i,$:c}}function D_(t){return di(t)?t:t.contextElement}function wa(t){const e=D_(t);if(!Ui(e))return Pi(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=sD(e);let l=(a?Xd(n.width):n.width)/i,c=(a?Xd(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const j5=Pi(0);function aD(t){const e=wn(t);return!I_()||!e.visualViewport?j5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function J5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==wn(t)?!1:e}function as(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=D_(t);let l=Pi(1);e&&(i?di(i)&&(l=wa(i)):l=wa(t));const c=J5(a,n,i)?aD(a):Pi(0);let h=(r.left+c.x)/l.x,d=(r.top+c.y)/l.y,m=r.width/l.x,y=r.height/l.y;if(a){const S=wn(a),w=i&&di(i)?wn(i):i;let T=S,x=hy(T);for(;x&&i&&w!==T;){const A=wa(x),M=x.getBoundingClientRect(),I=hi(x),N=M.left+(x.clientLeft+parseFloat(I.paddingLeft))*A.x,D=M.top+(x.clientTop+parseFloat(I.paddingTop))*A.y;h*=A.x,d*=A.y,m*=A.x,y*=A.y,h+=N,d+=D,T=wn(x),x=hy(T)}}return Qd({width:m,height:y,x:h,y:d})}function Hh(t,e){const n=Gh(t).scrollLeft;return e?e.left+n:as(Bi(t)).left+n}function lD(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Hh(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function K5(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",l=Bi(i),c=e?$h(e.floating):!1;if(i===l||c&&a)return n;let h={scrollLeft:0,scrollTop:0},d=Pi(1);const m=Pi(0),y=Ui(i);if((y||!y&&!a)&&((za(i)!=="body"||Wu(l))&&(h=Gh(i)),Ui(i))){const w=as(i);d=wa(i),m.x=w.x+i.clientLeft,m.y=w.y+i.clientTop}const S=l&&!y&&!a?lD(l,h):Pi(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-h.scrollLeft*d.x+m.x+S.x,y:n.y*d.y-h.scrollTop*d.y+m.y+S.y}}function Y5(t){return Array.from(t.getClientRects())}function X5(t){const e=Bi(t),n=Gh(t),i=t.ownerDocument.body,r=_n(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=_n(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let l=-n.scrollLeft+Hh(t);const c=-n.scrollTop;return hi(i).direction==="rtl"&&(l+=_n(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:l,y:c}}const Nx=25;function W5(t,e){const n=wn(t),i=Bi(t),r=n.visualViewport;let a=i.clientWidth,l=i.clientHeight,c=0,h=0;if(r){a=r.width,l=r.height;const m=I_();(!m||m&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}const d=Hh(i);if(d<=0){const m=i.ownerDocument,y=m.body,S=getComputedStyle(y),w=m.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,T=Math.abs(i.clientWidth-y.clientWidth-w);T<=Nx&&(a-=T)}else d<=Nx&&(a+=d);return{width:a,height:l,x:c,y:h}}const Q5=new Set(["absolute","fixed"]);function Z5(t,e){const n=as(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=Ui(t)?wa(t):Pi(1),l=t.clientWidth*a.x,c=t.clientHeight*a.y,h=r*a.x,d=i*a.y;return{width:l,height:c,x:h,y:d}}function Ix(t,e,n){let i;if(e==="viewport")i=W5(t,n);else if(e==="document")i=X5(Bi(t));else if(di(e))i=Z5(e,n);else{const r=aD(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Qd(i)}function uD(t,e){const n=mr(t);return n===e||!di(n)||Ia(n)?!1:hi(n).position==="fixed"||uD(n,e)}function ej(t,e){const n=e.get(t);if(n)return n;let i=Cu(t,[],!1).filter(c=>di(c)&&za(c)!=="body"),r=null;const a=hi(t).position==="fixed";let l=a?mr(t):t;for(;di(l)&&!Ia(l);){const c=hi(l),h=N_(l);!h&&c.position==="fixed"&&(r=null),(a?!h&&!r:!h&&c.position==="static"&&!!r&&Q5.has(r.position)||Wu(l)&&!h&&uD(t,l))?i=i.filter(m=>m!==l):r=c,l=mr(l)}return e.set(t,i),i}function tj(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const l=[...n==="clippingAncestors"?$h(e)?[]:ej(e,this._c):[].concat(n),i],c=l[0],h=l.reduce((d,m)=>{const y=Ix(e,m,r);return d.top=_n(y.top,d.top),d.right=pr(y.right,d.right),d.bottom=pr(y.bottom,d.bottom),d.left=_n(y.left,d.left),d},Ix(e,c,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function nj(t){const{width:e,height:n}=sD(t);return{width:e,height:n}}function ij(t,e,n){const i=Ui(e),r=Bi(e),a=n==="fixed",l=as(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const h=Pi(0);function d(){h.x=Hh(r)}if(i||!i&&!a)if((za(e)!=="body"||Wu(r))&&(c=Gh(e)),i){const w=as(e,!0,a,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else r&&d();a&&!i&&r&&d();const m=r&&!i&&!a?lD(r,c):Pi(0),y=l.left+c.scrollLeft-h.x-m.x,S=l.top+c.scrollTop-h.y-m.y;return{x:y,y:S,width:l.width,height:l.height}}function Zg(t){return hi(t).position==="static"}function Dx(t,e){if(!Ui(t)||hi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bi(t)===n&&(n=n.ownerDocument.body),n}function cD(t,e){const n=wn(t);if($h(t))return n;if(!Ui(t)){let r=mr(t);for(;r&&!Ia(r);){if(di(r)&&!Zg(r))return r;r=mr(r)}return n}let i=Dx(t,e);for(;i&&B5(i)&&Zg(i);)i=Dx(i,e);return i&&Ia(i)&&Zg(i)&&!N_(i)?n:i||z5(t)||n}const oj=async function(t){const e=this.getOffsetParent||cD,n=this.getDimensions,i=await n(t.floating);return{reference:ij(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function rj(t){return hi(t).direction==="rtl"}const sj={convertOffsetParentRelativeRectToViewportRelativeRect:K5,getDocumentElement:Bi,getClippingRect:tj,getOffsetParent:cD,getElementRects:oj,getClientRects:Y5,getDimensions:nj,getScale:wa,isElement:di,isRTL:rj};function fD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function aj(t,e){let n=null,i;const r=Bi(t);function a(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function l(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const d=t.getBoundingClientRect(),{left:m,top:y,width:S,height:w}=d;if(c||e(),!S||!w)return;const T=Kf(y),x=Kf(r.clientWidth-(m+S)),A=Kf(r.clientHeight-(y+w)),M=Kf(m),N={rootMargin:-T+"px "+-x+"px "+-A+"px "+-M+"px",threshold:_n(0,pr(1,h))||1};let D=!0;function L(U){const O=U[0].intersectionRatio;if(O!==h){if(!D)return l();O?l(!1,O):i=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!fD(d,t.getBoundingClientRect())&&l(),D=!1}try{n=new IntersectionObserver(L,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(L,N)}n.observe(t)}return l(!0),a}function lj(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,d=D_(t),m=r||a?[...d?Cu(d):[],...Cu(e)]:[];m.forEach(M=>{r&&M.addEventListener("scroll",n,{passive:!0}),a&&M.addEventListener("resize",n)});const y=d&&c?aj(d,n):null;let S=-1,w=null;l&&(w=new ResizeObserver(M=>{let[I]=M;I&&I.target===d&&w&&(w.unobserve(e),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var N;(N=w)==null||N.observe(e)})),n()}),d&&!h&&w.observe(d),w.observe(e));let T,x=h?as(t):null;h&&A();function A(){const M=as(t);x&&!fD(x,M)&&n(),x=M,T=requestAnimationFrame(A)}return n(),()=>{var M;m.forEach(I=>{r&&I.removeEventListener("scroll",n),a&&I.removeEventListener("resize",n)}),y?.(),(M=w)==null||M.disconnect(),w=null,h&&cancelAnimationFrame(T)}}const uj=O5,cj=k5,fj=N5,dj=L5,hj=I5,Ox=M5,pj=P5,mj=(t,e,n)=>{const i=new Map,r={platform:sj,...n},a={...r.platform,_c:i};return R5(t,e,{...r,platform:a})};var gj=typeof document<"u",vj=function(){},vd=gj?E.useLayoutEffect:vj;function Zd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Zd(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!Zd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function dD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kx(t,e){const n=dD(t);return Math.round(e*n)/n}function ev(t){const e=E.useRef(t);return vd(()=>{e.current=t}),e}function yj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:h,open:d}=t,[m,y]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[S,w]=E.useState(i);Zd(S,i)||w(i);const[T,x]=E.useState(null),[A,M]=E.useState(null),I=E.useCallback(ee=>{ee!==U.current&&(U.current=ee,x(ee))},[]),N=E.useCallback(ee=>{ee!==O.current&&(O.current=ee,M(ee))},[]),D=a||T,L=l||A,U=E.useRef(null),O=E.useRef(null),q=E.useRef(m),j=h!=null,Y=ev(h),W=ev(r),re=ev(d),ie=E.useCallback(()=>{if(!U.current||!O.current)return;const ee={placement:e,strategy:n,middleware:S};W.current&&(ee.platform=W.current),mj(U.current,O.current,ee).then(ne=>{const ce={...ne,isPositioned:re.current!==!1};ae.current&&!Zd(q.current,ce)&&(q.current=ce,uh.flushSync(()=>{y(ce)}))})},[S,e,n,W,re]);vd(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,y(ee=>({...ee,isPositioned:!1})))},[d]);const ae=E.useRef(!1);vd(()=>(ae.current=!0,()=>{ae.current=!1}),[]),vd(()=>{if(D&&(U.current=D),L&&(O.current=L),D&&L){if(Y.current)return Y.current(D,L,ie);ie()}},[D,L,ie,Y,j]);const de=E.useMemo(()=>({reference:U,floating:O,setReference:I,setFloating:N}),[I,N]),B=E.useMemo(()=>({reference:D,floating:L}),[D,L]),Q=E.useMemo(()=>{const ee={position:n,left:0,top:0};if(!B.floating)return ee;const ne=kx(B.floating,m.x),ce=kx(B.floating,m.y);return c?{...ee,transform:"translate("+ne+"px, "+ce+"px)",...dD(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:ce}},[n,c,B.floating,m.x,m.y]);return E.useMemo(()=>({...m,update:ie,refs:de,elements:B,floatingStyles:Q}),[m,ie,de,B,Q])}const _j=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Ox({element:i.current,padding:r}).fn(n):{}:i?Ox({element:i,padding:r}).fn(n):{}}}},Sj=(t,e)=>({...uj(t),options:[t,e]}),bj=(t,e)=>({...cj(t),options:[t,e]}),wj=(t,e)=>({...pj(t),options:[t,e]}),Ej=(t,e)=>({...fj(t),options:[t,e]}),Cj=(t,e)=>({...dj(t),options:[t,e]}),Tj=(t,e)=>({...hj(t),options:[t,e]}),xj=(t,e)=>({..._j(t),options:[t,e]});var Aj="Arrow",hD=E.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return b.jsx(qt.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});hD.displayName=Aj;var Rj=hD;function Mj(t){const[e,n]=E.useState(void 0);return hr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let l,c;if("borderBoxSize"in a){const h=a.borderBoxSize,d=Array.isArray(h)?h[0]:h;l=d.inlineSize,c=d.blockSize}else l=t.offsetWidth,c=t.offsetHeight;n({width:l,height:c})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var O_="Popper",[pD,mD]=Xu(O_),[Nj,gD]=pD(O_),vD=t=>{const{__scopePopper:e,children:n}=t,[i,r]=E.useState(null);return b.jsx(Nj,{scope:e,anchor:i,onAnchorChange:r,children:n})};vD.displayName=O_;var yD="PopperAnchor",_D=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=gD(yD,n),l=E.useRef(null),c=rn(e,l),h=E.useRef(null);return E.useEffect(()=>{const d=h.current;h.current=i?.current||l.current,d!==h.current&&a.onAnchorChange(h.current)}),i?null:b.jsx(qt.div,{...r,ref:c})});_D.displayName=yD;var k_="PopperContent",[Ij,Dj]=pD(k_),SD=E.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:S=!1,updatePositionStrategy:w="optimized",onPlaced:T,...x}=t,A=gD(k_,n),[M,I]=E.useState(null),N=rn(e,ve=>I(ve)),[D,L]=E.useState(null),U=Mj(D),O=U?.width??0,q=U?.height??0,j=i+(a!=="center"?"-"+a:""),Y=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},W=Array.isArray(d)?d:[d],re=W.length>0,ie={padding:Y,boundary:W.filter(kj),altBoundary:re},{refs:ae,floatingStyles:de,placement:B,isPositioned:Q,middlewareData:ee}=yj({strategy:"fixed",placement:j,whileElementsMounted:(...ve)=>lj(...ve,{animationFrame:w==="always"}),elements:{reference:A.anchor},middleware:[Sj({mainAxis:r+q,alignmentAxis:l}),h&&bj({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?wj():void 0,...ie}),h&&Ej({...ie}),Cj({...ie,apply:({elements:ve,rects:Je,availableWidth:Ke,availableHeight:sn})=>{const{width:Tn,height:gi}=Je.reference,jt=ve.floating.style;jt.setProperty("--radix-popper-available-width",`${Ke}px`),jt.setProperty("--radix-popper-available-height",`${sn}px`),jt.setProperty("--radix-popper-anchor-width",`${Tn}px`),jt.setProperty("--radix-popper-anchor-height",`${gi}px`)}}),D&&xj({element:D,padding:c}),Pj({arrowWidth:O,arrowHeight:q}),S&&Tj({strategy:"referenceHidden",...ie})]}),[ne,ce]=ED(B),P=Li(T);hr(()=>{Q&&P?.()},[Q,P]);const K=ee.arrow?.x,se=ee.arrow?.y,le=ee.arrow?.centerOffset!==0,[me,be]=E.useState();return hr(()=>{M&&be(window.getComputedStyle(M).zIndex)},[M]),b.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:Q?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[ee.transformOrigin?.x,ee.transformOrigin?.y].join(" "),...ee.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:b.jsx(Ij,{scope:n,placedSide:ne,onArrowChange:L,arrowX:K,arrowY:se,shouldHideArrow:le,children:b.jsx(qt.div,{"data-side":ne,"data-align":ce,...x,ref:N,style:{...x.style,animation:Q?void 0:"none"}})})})});SD.displayName=k_;var bD="PopperArrow",Oj={top:"bottom",right:"left",bottom:"top",left:"right"},wD=E.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=Dj(bD,i),l=Oj[a.placedSide];return b.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:b.jsx(Rj,{...r,ref:n,style:{...r.style,display:"block"}})})});wD.displayName=bD;function kj(t){return t!==null}var Pj=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,l=r.arrow?.centerOffset!==0,c=l?0:t.arrowWidth,h=l?0:t.arrowHeight,[d,m]=ED(n),y={start:"0%",center:"50%",end:"100%"}[m],S=(r.arrow?.x??0)+c/2,w=(r.arrow?.y??0)+h/2;let T="",x="";return d==="bottom"?(T=l?y:`${S}px`,x=`${-h}px`):d==="top"?(T=l?y:`${S}px`,x=`${i.floating.height+h}px`):d==="right"?(T=`${-h}px`,x=l?y:`${w}px`):d==="left"&&(T=`${i.floating.width+h}px`,x=l?y:`${w}px`),{data:{x:T,y:x}}}});function ED(t){const[e,n="center"]=t.split("-");return[e,n]}var CD=vD,Lj=_D,Uj=SD,Fj=wD,Bj="Portal",TD=E.forwardRef((t,e)=>{const{container:n,...i}=t,[r,a]=E.useState(!1);hr(()=>a(!0),[]);const l=n||r&&globalThis?.document?.body;return l?Kr.createPortal(b.jsx(qt.div,{...i,ref:e}),l):null});TD.displayName=Bj;function $j(t,e){return E.useReducer((n,i)=>e[n][i]??n,t)}var Qu=t=>{const{present:e,children:n}=t,i=Gj(e),r=typeof n=="function"?n({present:i.isPresent}):E.Children.only(n),a=rn(i.ref,Hj(r));return typeof n=="function"||i.isPresent?E.cloneElement(r,{ref:a}):null};Qu.displayName="Presence";function Gj(t){const[e,n]=E.useState(),i=E.useRef(null),r=E.useRef(t),a=E.useRef("none"),l=t?"mounted":"unmounted",[c,h]=$j(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const d=Yf(i.current);a.current=c==="mounted"?d:"none"},[c]),hr(()=>{const d=i.current,m=r.current;if(m!==t){const S=a.current,w=Yf(d);t?h("MOUNT"):w==="none"||d?.display==="none"?h("UNMOUNT"):h(m&&S!==w?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,h]),hr(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,y=w=>{const x=Yf(i.current).includes(CSS.escape(w.animationName));if(w.target===e&&x&&(h("ANIMATION_END"),!r.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},S=w=>{w.target===e&&(a.current=Yf(i.current))};return e.addEventListener("animationstart",S),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",S),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:E.useCallback(d=>{i.current=d?getComputedStyle(d):null,n(d)},[])}}function Yf(t){return t?.animationName||"none"}function Hj(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tv="rovingFocusGroup.onEntryFocus",Vj={bubbles:!1,cancelable:!0},Zu="RovingFocusGroup",[py,xD,zj]=YI(Zu),[qj,AD]=Xu(Zu,[zj]),[jj,Jj]=qj(Zu),RD=E.forwardRef((t,e)=>b.jsx(py.Provider,{scope:t.__scopeRovingFocusGroup,children:b.jsx(py.Slot,{scope:t.__scopeRovingFocusGroup,children:b.jsx(Kj,{...t,ref:e})})}));RD.displayName=Zu;var Kj=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:h,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...y}=t,S=E.useRef(null),w=rn(e,S),T=XI(a),[x,A]=x_({prop:l,defaultProp:c??null,onChange:h,caller:Zu}),[M,I]=E.useState(!1),N=Li(d),D=xD(n),L=E.useRef(!1),[U,O]=E.useState(0);return E.useEffect(()=>{const q=S.current;if(q)return q.addEventListener(tv,N),()=>q.removeEventListener(tv,N)},[N]),b.jsx(jj,{scope:n,orientation:i,dir:T,loop:r,currentTabStopId:x,onItemFocus:E.useCallback(q=>A(q),[A]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>O(q=>q+1),[]),onFocusableItemRemove:E.useCallback(()=>O(q=>q-1),[]),children:b.jsx(qt.div,{tabIndex:M||U===0?-1:0,"data-orientation":i,...y,ref:w,style:{outline:"none",...t.style},onMouseDown:Ge(t.onMouseDown,()=>{L.current=!0}),onFocus:Ge(t.onFocus,q=>{const j=!L.current;if(q.target===q.currentTarget&&j&&!M){const Y=new CustomEvent(tv,Vj);if(q.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const W=D().filter(B=>B.focusable),re=W.find(B=>B.active),ie=W.find(B=>B.id===x),de=[re,ie,...W].filter(Boolean).map(B=>B.ref.current);ID(de,m)}}L.current=!1}),onBlur:Ge(t.onBlur,()=>I(!1))})})}),MD="RovingFocusGroupItem",ND=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:a,children:l,...c}=t,h=wu(),d=a||h,m=Jj(MD,n),y=m.currentTabStopId===d,S=xD(n),{onFocusableItemAdd:w,onFocusableItemRemove:T,currentTabStopId:x}=m;return E.useEffect(()=>{if(i)return w(),()=>T()},[i,w,T]),b.jsx(py.ItemSlot,{scope:n,id:d,focusable:i,active:r,children:b.jsx(qt.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:Ge(t.onMouseDown,A=>{i?m.onItemFocus(d):A.preventDefault()}),onFocus:Ge(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:Ge(t.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){m.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const M=Wj(A,m.orientation,m.dir);if(M!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let N=S().filter(D=>D.focusable).map(D=>D.ref.current);if(M==="last")N.reverse();else if(M==="prev"||M==="next"){M==="prev"&&N.reverse();const D=N.indexOf(A.currentTarget);N=m.loop?Qj(N,D+1):N.slice(D+1)}setTimeout(()=>ID(N))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:x!=null}):l})})});ND.displayName=MD;var Yj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Xj(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Wj(t,e,n){const i=Xj(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return Yj[i]}function ID(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function Qj(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Zj=RD,e8=ND,t8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},sa=new WeakMap,Xf=new WeakMap,Wf={},nv=0,DD=function(t){return t&&(t.host||DD(t.parentNode))},n8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=DD(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},i8=function(t,e,n,i){var r=n8(e,Array.isArray(t)?t:[t]);Wf[n]||(Wf[n]=new WeakMap);var a=Wf[n],l=[],c=new Set,h=new Set(r),d=function(y){!y||c.has(y)||(c.add(y),d(y.parentNode))};r.forEach(d);var m=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(S){if(c.has(S))m(S);else try{var w=S.getAttribute(i),T=w!==null&&w!=="false",x=(sa.get(S)||0)+1,A=(a.get(S)||0)+1;sa.set(S,x),a.set(S,A),l.push(S),x===1&&T&&Xf.set(S,!0),A===1&&S.setAttribute(n,"true"),T||S.setAttribute(i,"true")}catch(M){console.error("aria-hidden: cannot operate on ",S,M)}})};return m(e),c.clear(),nv++,function(){l.forEach(function(y){var S=sa.get(y)-1,w=a.get(y)-1;sa.set(y,S),a.set(y,w),S||(Xf.has(y)||y.removeAttribute(i),Xf.delete(y)),w||y.removeAttribute(n)}),nv--,nv||(sa=new WeakMap,sa=new WeakMap,Xf=new WeakMap,Wf={})}},o8=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=t8(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),i8(i,r,n,"aria-hidden")):function(){return null}},Ci=function(){return Ci=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ci.apply(this,arguments)};function OD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function r8(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var yd="right-scroll-bar-position",_d="width-before-scroll-bar",s8="with-scroll-bars-hidden",a8="--removed-body-scroll-bar-size";function iv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function l8(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var u8=typeof window<"u"?E.useLayoutEffect:E.useEffect,Px=new WeakMap;function c8(t,e){var n=l8(null,function(i){return t.forEach(function(r){return iv(r,i)})});return u8(function(){var i=Px.get(n);if(i){var r=new Set(i),a=new Set(t),l=n.current;r.forEach(function(c){a.has(c)||iv(c,null)}),a.forEach(function(c){r.has(c)||iv(c,l)})}Px.set(n,t)},[t]),n}function f8(t){return t}function d8(t,e){e===void 0&&(e=f8);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var l=e(a,i);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(a){for(i=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){i=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(a),l=n}var h=function(){var m=l;l=[],m.forEach(a)},d=function(){return Promise.resolve().then(h)};d(),n={push:function(m){l.push(m),d()},filter:function(m){return l=l.filter(m),n}}}};return r}function h8(t){t===void 0&&(t={});var e=d8(null);return e.options=Ci({async:!0,ssr:!1},t),e}var kD=function(t){var e=t.sideCar,n=OD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return E.createElement(i,Ci({},n))};kD.isSideCarExport=!0;function p8(t,e){return t.useMedium(e),kD}var PD=h8(),ov=function(){},Vh=E.forwardRef(function(t,e){var n=E.useRef(null),i=E.useState({onScrollCapture:ov,onWheelCapture:ov,onTouchMoveCapture:ov}),r=i[0],a=i[1],l=t.forwardProps,c=t.children,h=t.className,d=t.removeScrollBar,m=t.enabled,y=t.shards,S=t.sideCar,w=t.noRelative,T=t.noIsolation,x=t.inert,A=t.allowPinchZoom,M=t.as,I=M===void 0?"div":M,N=t.gapMode,D=OD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=S,U=c8([n,e]),O=Ci(Ci({},D),r);return E.createElement(E.Fragment,null,m&&E.createElement(L,{sideCar:PD,removeScrollBar:d,shards:y,noRelative:w,noIsolation:T,inert:x,setCallbacks:a,allowPinchZoom:!!A,lockRef:n,gapMode:N}),l?E.cloneElement(E.Children.only(c),Ci(Ci({},O),{ref:U})):E.createElement(I,Ci({},O,{className:h,ref:U}),c))});Vh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vh.classNames={fullWidth:_d,zeroRight:yd};var m8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function g8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=m8();return e&&t.setAttribute("nonce",e),t}function v8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function y8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var _8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=g8())&&(v8(e,n),y8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},S8=function(){var t=_8();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},LD=function(){var t=S8(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},b8={left:0,top:0,right:0,gap:0},rv=function(t){return parseInt(t||"",10)||0},w8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[rv(n),rv(i),rv(r)]},E8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return b8;var e=w8(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},C8=LD(),Ea="data-scroll-locked",T8=function(t,e,n,i){var r=t.left,a=t.top,l=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(s8,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(c,"px ").concat(i,`;
  }
  body[`).concat(Ea,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yd,` {
    right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(_d,` {
    margin-right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(_d," .").concat(_d,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Ea,`] {
    `).concat(a8,": ").concat(c,`px;
  }
`)},Lx=function(){var t=parseInt(document.body.getAttribute(Ea)||"0",10);return isFinite(t)?t:0},x8=function(){E.useEffect(function(){return document.body.setAttribute(Ea,(Lx()+1).toString()),function(){var t=Lx()-1;t<=0?document.body.removeAttribute(Ea):document.body.setAttribute(Ea,t.toString())}},[])},A8=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;x8();var a=E.useMemo(function(){return E8(r)},[r]);return E.createElement(C8,{styles:T8(a,!e,r,n?"":"!important")})},my=!1;if(typeof window<"u")try{var Qf=Object.defineProperty({},"passive",{get:function(){return my=!0,!0}});window.addEventListener("test",Qf,Qf),window.removeEventListener("test",Qf,Qf)}catch{my=!1}var aa=my?{passive:!1}:!1,R8=function(t){return t.tagName==="TEXTAREA"},UD=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!R8(t)&&n[e]==="visible")},M8=function(t){return UD(t,"overflowY")},N8=function(t){return UD(t,"overflowX")},Ux=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=FD(t,i);if(r){var a=BD(t,i),l=a[1],c=a[2];if(l>c)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},I8=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},D8=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},FD=function(t,e){return t==="v"?M8(e):N8(e)},BD=function(t,e){return t==="v"?I8(e):D8(e)},O8=function(t,e){return t==="h"&&e==="rtl"?-1:1},k8=function(t,e,n,i,r){var a=O8(t,window.getComputedStyle(e).direction),l=a*i,c=n.target,h=e.contains(c),d=!1,m=l>0,y=0,S=0;do{if(!c)break;var w=BD(t,c),T=w[0],x=w[1],A=w[2],M=x-A-a*T;(T||M)&&FD(t,c)&&(y+=M,S+=T);var I=c.parentNode;c=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!h&&c!==document.body||h&&(e.contains(c)||e===c));return(m&&Math.abs(y)<1||!m&&Math.abs(S)<1)&&(d=!0),d},Zf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Fx=function(t){return[t.deltaX,t.deltaY]},Bx=function(t){return t&&"current"in t?t.current:t},P8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},L8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},U8=0,la=[];function F8(t){var e=E.useRef([]),n=E.useRef([0,0]),i=E.useRef(),r=E.useState(U8++)[0],a=E.useState(LD)[0],l=E.useRef(t);E.useEffect(function(){l.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=r8([t.lockRef.current],(t.shards||[]).map(Bx),!0).filter(Boolean);return x.forEach(function(A){return A.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=E.useCallback(function(x,A){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var M=Zf(x),I=n.current,N="deltaX"in x?x.deltaX:I[0]-M[0],D="deltaY"in x?x.deltaY:I[1]-M[1],L,U=x.target,O=Math.abs(N)>Math.abs(D)?"h":"v";if("touches"in x&&O==="h"&&U.type==="range")return!1;var q=window.getSelection(),j=q&&q.anchorNode,Y=j?j===U||j.contains(U):!1;if(Y)return!1;var W=Ux(O,U);if(!W)return!0;if(W?L=O:(L=O==="v"?"h":"v",W=Ux(O,U)),!W)return!1;if(!i.current&&"changedTouches"in x&&(N||D)&&(i.current=L),!L)return!0;var re=i.current||L;return k8(re,A,x,re==="h"?N:D)},[]),h=E.useCallback(function(x){var A=x;if(!(!la.length||la[la.length-1]!==a)){var M="deltaY"in A?Fx(A):Zf(A),I=e.current.filter(function(L){return L.name===A.type&&(L.target===A.target||A.target===L.shadowParent)&&P8(L.delta,M)})[0];if(I&&I.should){A.cancelable&&A.preventDefault();return}if(!I){var N=(l.current.shards||[]).map(Bx).filter(Boolean).filter(function(L){return L.contains(A.target)}),D=N.length>0?c(A,N[0]):!l.current.noIsolation;D&&A.cancelable&&A.preventDefault()}}},[]),d=E.useCallback(function(x,A,M,I){var N={name:x,delta:A,target:M,should:I,shadowParent:B8(M)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(D){return D!==N})},1)},[]),m=E.useCallback(function(x){n.current=Zf(x),i.current=void 0},[]),y=E.useCallback(function(x){d(x.type,Fx(x),x.target,c(x,t.lockRef.current))},[]),S=E.useCallback(function(x){d(x.type,Zf(x),x.target,c(x,t.lockRef.current))},[]);E.useEffect(function(){return la.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:S}),document.addEventListener("wheel",h,aa),document.addEventListener("touchmove",h,aa),document.addEventListener("touchstart",m,aa),function(){la=la.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,aa),document.removeEventListener("touchmove",h,aa),document.removeEventListener("touchstart",m,aa)}},[]);var w=t.removeScrollBar,T=t.inert;return E.createElement(E.Fragment,null,T?E.createElement(a,{styles:L8(r)}):null,w?E.createElement(A8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function B8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const $8=p8(PD,F8);var $D=E.forwardRef(function(t,e){return E.createElement(Vh,Ci({},t,{ref:e,sideCar:$8}))});$D.classNames=Vh.classNames;var gy=["Enter"," "],G8=["ArrowDown","PageUp","Home"],GD=["ArrowUp","PageDown","End"],H8=[...G8,...GD],V8={ltr:[...gy,"ArrowRight"],rtl:[...gy,"ArrowLeft"]},z8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ec="Menu",[Tu,q8,j8]=YI(ec),[ps,HD]=Xu(ec,[j8,mD,AD]),tc=mD(),VD=AD(),[zD,Er]=ps(ec),[J8,nc]=ps(ec),qD=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:a,modal:l=!0}=t,c=tc(e),[h,d]=E.useState(null),m=E.useRef(!1),y=Li(a),S=XI(r);return E.useEffect(()=>{const w=()=>{m.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>m.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),b.jsx(CD,{...c,children:b.jsx(zD,{scope:e,open:n,onOpenChange:y,content:h,onContentChange:d,children:b.jsx(J8,{scope:e,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:S,modal:l,children:i})})})};qD.displayName=ec;var K8="MenuAnchor",P_=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=tc(n);return b.jsx(Lj,{...r,...i,ref:e})});P_.displayName=K8;var L_="MenuPortal",[Y8,jD]=ps(L_,{forceMount:void 0}),JD=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,a=Er(L_,e);return b.jsx(Y8,{scope:e,forceMount:n,children:b.jsx(Qu,{present:n||a.open,children:b.jsx(TD,{asChild:!0,container:r,children:i})})})};JD.displayName=L_;var qn="MenuContent",[X8,U_]=ps(qn),KD=E.forwardRef((t,e)=>{const n=jD(qn,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,a=Er(qn,t.__scopeMenu),l=nc(qn,t.__scopeMenu);return b.jsx(Tu.Provider,{scope:t.__scopeMenu,children:b.jsx(Qu,{present:i||a.open,children:b.jsx(Tu.Slot,{scope:t.__scopeMenu,children:l.modal?b.jsx(W8,{...r,ref:e}):b.jsx(Q8,{...r,ref:e})})})})}),W8=E.forwardRef((t,e)=>{const n=Er(qn,t.__scopeMenu),i=E.useRef(null),r=rn(e,i);return E.useEffect(()=>{const a=i.current;if(a)return o8(a)},[]),b.jsx(F_,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ge(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Q8=E.forwardRef((t,e)=>{const n=Er(qn,t.__scopeMenu);return b.jsx(F_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Z8=Yd("MenuContent.ScrollLock"),F_=E.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:h,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:w,disableOutsideScroll:T,...x}=t,A=Er(qn,n),M=nc(qn,n),I=tc(n),N=VD(n),D=q8(n),[L,U]=E.useState(null),O=E.useRef(null),q=rn(e,O,A.onContentChange),j=E.useRef(0),Y=E.useRef(""),W=E.useRef(0),re=E.useRef(null),ie=E.useRef("right"),ae=E.useRef(0),de=T?$D:E.Fragment,B=T?{as:Z8,allowPinchZoom:!0}:void 0,Q=ne=>{const ce=Y.current+ne,P=D().filter(ve=>!ve.disabled),K=document.activeElement,se=P.find(ve=>ve.ref.current===K)?.textValue,le=P.map(ve=>ve.textValue),me=fJ(le,ce,se),be=P.find(ve=>ve.textValue===me)?.ref.current;(function ve(Je){Y.current=Je,window.clearTimeout(j.current),Je!==""&&(j.current=window.setTimeout(()=>ve(""),1e3))})(ce),be&&setTimeout(()=>be.focus())};E.useEffect(()=>()=>window.clearTimeout(j.current),[]),a5();const ee=E.useCallback(ne=>ie.current===re.current?.side&&hJ(ne,re.current?.area),[]);return b.jsx(X8,{scope:n,searchRef:Y,onItemEnter:E.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),onItemLeave:E.useCallback(ne=>{ee(ne)||(O.current?.focus(),U(null))},[ee]),onTriggerLeave:E.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),pointerGraceTimerRef:W,onPointerGraceIntentChange:E.useCallback(ne=>{re.current=ne},[]),children:b.jsx(de,{...B,children:b.jsx(eD,{asChild:!0,trapped:r,onMountAutoFocus:Ge(a,ne=>{ne.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:b.jsx(QI,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:w,children:b.jsx(Zj,{asChild:!0,...N,dir:M.dir,orientation:"vertical",loop:i,currentTabStopId:L,onCurrentTabStopIdChange:U,onEntryFocus:Ge(h,ne=>{M.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:b.jsx(Uj,{role:"menu","aria-orientation":"vertical","data-state":f1(A.open),"data-radix-menu-content":"",dir:M.dir,...I,...x,ref:q,style:{outline:"none",...x.style},onKeyDown:Ge(x.onKeyDown,ne=>{const P=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,K=ne.ctrlKey||ne.altKey||ne.metaKey,se=ne.key.length===1;P&&(ne.key==="Tab"&&ne.preventDefault(),!K&&se&&Q(ne.key));const le=O.current;if(ne.target!==le||!H8.includes(ne.key))return;ne.preventDefault();const be=D().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);GD.includes(ne.key)&&be.reverse(),uJ(be)}),onBlur:Ge(t.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(j.current),Y.current="")}),onPointerMove:Ge(t.onPointerMove,xu(ne=>{const ce=ne.target,P=ae.current!==ne.clientX;if(ne.currentTarget.contains(ce)&&P){const K=ne.clientX>ae.current?"right":"left";ie.current=K,ae.current=ne.clientX}}))})})})})})})});KD.displayName=qn;var eJ="MenuGroup",B_=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return b.jsx(qt.div,{role:"group",...i,ref:e})});B_.displayName=eJ;var tJ="MenuLabel",YD=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return b.jsx(qt.div,{...i,ref:e})});YD.displayName=tJ;var eh="MenuItem",$x="menu.itemSelect",zh=E.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,a=E.useRef(null),l=nc(eh,t.__scopeMenu),c=U_(eh,t.__scopeMenu),h=rn(e,a),d=E.useRef(!1),m=()=>{const y=a.current;if(!n&&y){const S=new CustomEvent($x,{bubbles:!0,cancelable:!0});y.addEventListener($x,w=>i?.(w),{once:!0}),KI(y,S),S.defaultPrevented?d.current=!1:l.onClose()}};return b.jsx(XD,{...r,ref:h,disabled:n,onClick:Ge(t.onClick,m),onPointerDown:y=>{t.onPointerDown?.(y),d.current=!0},onPointerUp:Ge(t.onPointerUp,y=>{d.current||y.currentTarget?.click()}),onKeyDown:Ge(t.onKeyDown,y=>{const S=c.searchRef.current!=="";n||S&&y.key===" "||gy.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});zh.displayName=eh;var XD=E.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...a}=t,l=U_(eh,n),c=VD(n),h=E.useRef(null),d=rn(e,h),[m,y]=E.useState(!1),[S,w]=E.useState("");return E.useEffect(()=>{const T=h.current;T&&w((T.textContent??"").trim())},[a.children]),b.jsx(Tu.ItemSlot,{scope:n,disabled:i,textValue:r??S,children:b.jsx(e8,{asChild:!0,...c,focusable:!i,children:b.jsx(qt.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...a,ref:d,onPointerMove:Ge(t.onPointerMove,xu(T=>{i?l.onItemLeave(T):(l.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ge(t.onPointerLeave,xu(T=>l.onItemLeave(T))),onFocus:Ge(t.onFocus,()=>y(!0)),onBlur:Ge(t.onBlur,()=>y(!1))})})})}),nJ="MenuCheckboxItem",WD=E.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return b.jsx(n1,{scope:t.__scopeMenu,checked:n,children:b.jsx(zh,{role:"menuitemcheckbox","aria-checked":th(n)?"mixed":n,...r,ref:e,"data-state":H_(n),onSelect:Ge(r.onSelect,()=>i?.(th(n)?!0:!n),{checkForDefaultPrevented:!1})})})});WD.displayName=nJ;var QD="MenuRadioGroup",[iJ,oJ]=ps(QD,{value:void 0,onValueChange:()=>{}}),ZD=E.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,a=Li(i);return b.jsx(iJ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:b.jsx(B_,{...r,ref:e})})});ZD.displayName=QD;var e1="MenuRadioItem",t1=E.forwardRef((t,e)=>{const{value:n,...i}=t,r=oJ(e1,t.__scopeMenu),a=n===r.value;return b.jsx(n1,{scope:t.__scopeMenu,checked:a,children:b.jsx(zh,{role:"menuitemradio","aria-checked":a,...i,ref:e,"data-state":H_(a),onSelect:Ge(i.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});t1.displayName=e1;var $_="MenuItemIndicator",[n1,rJ]=ps($_,{checked:!1}),i1=E.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,a=rJ($_,n);return b.jsx(Qu,{present:i||th(a.checked)||a.checked===!0,children:b.jsx(qt.span,{...r,ref:e,"data-state":H_(a.checked)})})});i1.displayName=$_;var sJ="MenuSeparator",o1=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return b.jsx(qt.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});o1.displayName=sJ;var aJ="MenuArrow",r1=E.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=tc(n);return b.jsx(Fj,{...r,...i,ref:e})});r1.displayName=aJ;var G_="MenuSub",[lJ,s1]=ps(G_),a1=t=>{const{__scopeMenu:e,children:n,open:i=!1,onOpenChange:r}=t,a=Er(G_,e),l=tc(e),[c,h]=E.useState(null),[d,m]=E.useState(null),y=Li(r);return E.useEffect(()=>(a.open===!1&&y(!1),()=>y(!1)),[a.open,y]),b.jsx(CD,{...l,children:b.jsx(zD,{scope:e,open:i,onOpenChange:y,content:d,onContentChange:m,children:b.jsx(lJ,{scope:e,contentId:wu(),triggerId:wu(),trigger:c,onTriggerChange:h,children:n})})})};a1.displayName=G_;var ru="MenuSubTrigger",l1=E.forwardRef((t,e)=>{const n=Er(ru,t.__scopeMenu),i=nc(ru,t.__scopeMenu),r=s1(ru,t.__scopeMenu),a=U_(ru,t.__scopeMenu),l=E.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:h}=a,d={__scopeMenu:t.__scopeMenu},m=E.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return E.useEffect(()=>m,[m]),E.useEffect(()=>{const y=c.current;return()=>{window.clearTimeout(y),h(null)}},[c,h]),b.jsx(P_,{asChild:!0,...d,children:b.jsx(XD,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":f1(n.open),...t,ref:Fh(e,r.onTriggerChange),onClick:y=>{t.onClick?.(y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ge(t.onPointerMove,xu(y=>{a.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Ge(t.onPointerLeave,xu(y=>{m();const S=n.content?.getBoundingClientRect();if(S){const w=n.content?.dataset.side,T=w==="right",x=T?-5:5,A=S[T?"left":"right"],M=S[T?"right":"left"];a.onPointerGraceIntentChange({area:[{x:y.clientX+x,y:y.clientY},{x:A,y:S.top},{x:M,y:S.top},{x:M,y:S.bottom},{x:A,y:S.bottom}],side:w}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(y),y.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ge(t.onKeyDown,y=>{const S=a.searchRef.current!=="";t.disabled||S&&y.key===" "||V8[i.dir].includes(y.key)&&(n.onOpenChange(!0),n.content?.focus(),y.preventDefault())})})})});l1.displayName=ru;var u1="MenuSubContent",c1=E.forwardRef((t,e)=>{const n=jD(qn,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,a=Er(qn,t.__scopeMenu),l=nc(qn,t.__scopeMenu),c=s1(u1,t.__scopeMenu),h=E.useRef(null),d=rn(e,h);return b.jsx(Tu.Provider,{scope:t.__scopeMenu,children:b.jsx(Qu,{present:i||a.open,children:b.jsx(Tu.Slot,{scope:t.__scopeMenu,children:b.jsx(F_,{id:c.contentId,"aria-labelledby":c.triggerId,...r,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&h.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ge(t.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ge(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:Ge(t.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),S=z8[l.dir].includes(m.key);y&&S&&(a.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});c1.displayName=u1;function f1(t){return t?"open":"closed"}function th(t){return t==="indeterminate"}function H_(t){return th(t)?"indeterminate":t?"checked":"unchecked"}function uJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function cJ(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function fJ(t,e,n){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let l=cJ(t,Math.max(a,0));r.length===1&&(l=l.filter(d=>d!==n));const h=l.find(d=>d.toLowerCase().startsWith(r.toLowerCase()));return h!==n?h:void 0}function dJ(t,e){const{x:n,y:i}=t;let r=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const c=e[a],h=e[l],d=c.x,m=c.y,y=h.x,S=h.y;m>i!=S>i&&n<(y-d)*(i-m)/(S-m)+d&&(r=!r)}return r}function hJ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return dJ(n,e)}function xu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var pJ=qD,mJ=P_,gJ=JD,vJ=KD,yJ=B_,_J=YD,SJ=zh,bJ=WD,wJ=ZD,EJ=t1,CJ=i1,TJ=o1,xJ=r1,AJ=a1,RJ=l1,MJ=c1,qh="DropdownMenu",[NJ]=Xu(qh,[HD]),Bt=HD(),[IJ,d1]=NJ(qh),h1=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:a,onOpenChange:l,modal:c=!0}=t,h=Bt(e),d=E.useRef(null),[m,y]=x_({prop:r,defaultProp:a??!1,onChange:l,caller:qh});return b.jsx(IJ,{scope:e,triggerId:wu(),triggerRef:d,contentId:wu(),open:m,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(S=>!S),[y]),modal:c,children:b.jsx(pJ,{...h,open:m,onOpenChange:y,dir:i,modal:c,children:n})})};h1.displayName=qh;var p1="DropdownMenuTrigger",m1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,a=d1(p1,n),l=Bt(n);return b.jsx(mJ,{asChild:!0,...l,children:b.jsx(qt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Fh(e,a.triggerRef),onPointerDown:Ge(t.onPointerDown,c=>{!i&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Ge(t.onKeyDown,c=>{i||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});m1.displayName=p1;var DJ="DropdownMenuPortal",g1=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Bt(e);return b.jsx(gJ,{...i,...n})};g1.displayName=DJ;var v1="DropdownMenuContent",y1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=d1(v1,n),a=Bt(n),l=E.useRef(!1);return b.jsx(vJ,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...i,ref:e,onCloseAutoFocus:Ge(t.onCloseAutoFocus,c=>{l.current||r.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:Ge(t.onInteractOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,m=h.button===2||d;(!r.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});y1.displayName=v1;var OJ="DropdownMenuGroup",kJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(yJ,{...r,...i,ref:e})});kJ.displayName=OJ;var PJ="DropdownMenuLabel",LJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(_J,{...r,...i,ref:e})});LJ.displayName=PJ;var UJ="DropdownMenuItem",FJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(SJ,{...r,...i,ref:e})});FJ.displayName=UJ;var BJ="DropdownMenuCheckboxItem",$J=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(bJ,{...r,...i,ref:e})});$J.displayName=BJ;var GJ="DropdownMenuRadioGroup",HJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(wJ,{...r,...i,ref:e})});HJ.displayName=GJ;var VJ="DropdownMenuRadioItem",zJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(EJ,{...r,...i,ref:e})});zJ.displayName=VJ;var qJ="DropdownMenuItemIndicator",jJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(CJ,{...r,...i,ref:e})});jJ.displayName=qJ;var JJ="DropdownMenuSeparator",KJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(TJ,{...r,...i,ref:e})});KJ.displayName=JJ;var YJ="DropdownMenuArrow",XJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(xJ,{...r,...i,ref:e})});XJ.displayName=YJ;var WJ=t=>{const{__scopeDropdownMenu:e,children:n,open:i,onOpenChange:r,defaultOpen:a}=t,l=Bt(e),[c,h]=x_({prop:i,defaultProp:a??!1,onChange:r,caller:"DropdownMenuSub"});return b.jsx(AJ,{...l,open:c,onOpenChange:h,children:n})},QJ="DropdownMenuSubTrigger",_1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(RJ,{...r,...i,ref:e})});_1.displayName=QJ;var ZJ="DropdownMenuSubContent",S1=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Bt(n);return b.jsx(MJ,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S1.displayName=ZJ;var eK=h1,tK=m1,nK=g1,iK=y1,Gx=WJ,Hx=_1,Vx=S1;const oK=He(({scene:t})=>{if(!t.sceneJson||!t.sceneJson.data)return null;const e=t.sceneJson.data.tags,n=t.project?.artbook,i=a=>{t.addTag(a)};if(!n)return null;const r=a=>b.jsxs(eK,{children:[b.jsx(tK,{className:"dropdown-trigger",children:"Add Tag"}),b.jsx(nK,{children:b.jsx(iK,{className:"dropdown-content",align:"start",children:Object.entries(a).map(([l,c])=>b.jsxs(Gx,{children:[b.jsx(Hx,{className:"submenu-trigger",children:l}),b.jsx(Vx,{className:"dropdown-content",children:Object.entries(c).map(([h,d])=>b.jsxs(Gx,{children:[b.jsx(Hx,{className:"submenu-trigger",children:h}),b.jsx(Vx,{className:"dropdown-content",children:d.map(m=>b.jsx(G6,{art:m,onClick:()=>i(m.path)},m.path))})]},h))})]},l))})})]});return b.jsx(Ha,{label:"Tags",headerExtra:b.jsxs("div",{className:"d-flex align-items-center gap-2",children:[r(n.data),b.jsx(Uh,{onClick:()=>{t.generateTags()},className:"btn-outline-success",label:"Generate Tags",is_loading:t.is_generating_tags}),b.jsx(tt,{onClick:()=>t.project?.artbook?.log(),label:"Log"})]}),children:e.length?b.jsx("ul",{className:"list-group list-group-flush",children:e.map((a,l)=>{const c=n.getTag(a);return c?b.jsx("li",{className:"list-group-item",children:b.jsx($6,{art:c,scene:t})},l):null})}):b.jsx("div",{children:"No tags yet."})})}),ls=({value:t,options:e,onChange:n,label:i,className:r="",colorMap:a})=>{const l=a?.[t];return b.jsxs("div",{className:"btn-group",role:"group",children:[i&&b.jsx("span",{className:"btn btn-sm btn-outline-secondary disabled",children:i}),b.jsx("div",{className:`btn btn-sm btn-outline-secondary p-0 ${r}`,style:l?{backgroundColor:l,borderColor:l}:void 0,children:b.jsx("select",{className:"form-select form-select-sm border-0 rounded-0",value:t,onChange:c=>n?.(c.target.value),style:l?{backgroundColor:l}:void 0,children:e.map(c=>b.jsx("option",{value:c,style:a?.[c]?{backgroundColor:a[c]}:void 0,children:c},c))})})]})},ms=({isLoading:t,className:e="",asButton:n=!1})=>{const i=b.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{animation:t?void 0:"none",borderColor:t?void 0:"#6c757d"}});return n?b.jsx("button",{type:"button",className:`btn btn-sm btn-outline-secondary disabled d-flex align-items-center justify-content-center ${e}`,tabIndex:-1,style:{pointerEvents:"none"},children:i}):b.jsx("span",{className:e,children:i})},ic=({buttons:t,content:e,className:n=""})=>{const[i,r]=E.useState(!1);return b.jsxs("div",{className:`w-100 ${n}`,style:{display:"inline-block"},children:[b.jsxs("div",{className:"btn-group",role:"group",children:[t,b.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>r(a=>!a),"aria-label":"Toggle settings",type:"button",style:{borderBottomRightRadius:i?0:void 0},children:""})]}),i&&b.jsx("div",{className:"w-100 border p-2",style:{borderTopLeftRadius:0,borderTopRightRadius:5,borderBottomLeftRadius:5,borderBottomRightRadius:5,backgroundColor:"#383838ff",marginTop:0},children:e})]})},rK=He(({scene:t})=>{if(!t.sceneJson)return b.jsx("div",{children:"No scene data available."});const e=async()=>{window.confirm(`Are you sure you want to delete scene "${t.name}"?`)&&await t.delete()},n=async()=>{t.createShotsFromShotsJson()};return b.jsxs("div",{children:[b.jsxs("div",{style:{marginBottom:"10px"},children:[b.jsx(tt,{onClick:e,label:"Delete Scene",className:"btn-outline-danger"}),b.jsx(tt,{onClick:()=>t.log(),label:"LOG"})]}),b.jsx(ic,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{const i=await t.generateShotsJson();t.sceneJson?.updateField("shotsjson",i)},children:" Split Into Shots "}),b.jsx(ls,{value:t.project.workflows.split_scene_into_shots.model,options:zI,onChange:i=>{t.project.updateWorkflow("split_scene_into_shots","model",i)}}),b.jsx(ms,{isLoading:t.is_generating_shotsjson,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.sceneJson,field:"split_prompt",fitHeight:!0}),b.jsx(zt,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/system_message",fitHeight:!0}),b.jsx(zt,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/prompt",fitHeight:!0})]})}),b.jsx(zt,{localJson:t.sceneJson,field:"script",fitHeight:!0}),b.jsx(zt,{localJson:t.sceneJson,field:"shotsjson",fitHeight:!0,headerExtra:b.jsx(tt,{onClick:n,label:"Create Shots"})}),b.jsx(oK,{scene:t}),b.jsx("div",{style:{height:"500px"}})]})}),b1=({states:t,value:e,onChange:n,label:i,useIndicator:r=!1})=>{const a=Object.keys(t);if(a.length===0)return null;const l=a.indexOf(e),c=t[e],h=()=>{const d=(l+1)%a.length;n(a[d])};return r?b.jsx("div",{onClick:h,style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:c??"transparent",border:`2px solid ${c??"#6c757d"}`,cursor:"pointer"},title:e}):b.jsx("button",{className:"btn btn-sm",onClick:h,style:{backgroundColor:c??"transparent",color:c?"white":"#6c757d",border:`1px solid ${c??"#6c757d"}`},children:i??e})},sv="https://cdn.pixabay.com/photo/2021/05/09/06/07/dog-6240043_1280.jpg",sK=He(({shot:t,isSelected:e,onClick:n})=>{const[i,r]=E.useState(sv);return E.useEffect(()=>{let a=!1;return(async()=>{if(t.srcImage)try{const c=await t.srcImage.getUrlObject();!a&&c&&r(c)}catch(c){console.error("Failed to load srcImage URL:",c),a||r(sv)}else r(sv)})(),()=>{a=!0}},[t.srcImage]),b.jsxs("div",{className:"flex-shrink-0 position-relative d-flex align-items-center justify-content-center",style:{height:"100%",cursor:"pointer",borderWidth:e?2:0,borderColor:e?"#04914a":"#dee2e6",borderStyle:"solid"},onClick:()=>n(t),children:[b.jsx("img",{src:i,alt:t.name,className:"img-fluid",style:{height:"100%",width:"auto",objectFit:"contain",display:"block"}}),b.jsx("div",{className:"position-absolute text-white px-1",style:{bottom:0,left:0,backgroundColor:"rgba(0,0,0,0.5)",fontSize:"0.75rem",borderTopRightRadius:"4px"},children:t.name}),b.jsx("div",{className:"position-absolute",style:{top:2,right:2},onClick:a=>a.stopPropagation(),children:b.jsx(b1,{states:Bn.shot_states,value:t.shotJson.data?.shot_state||Object.keys(Bn.shot_states)[0],onChange:a=>{t.shotJson&&t.shotJson.updateField("shot_state",a)},useIndicator:!0})})]})}),aK=({initialHeight:t=80,minHeight:e=30,children:n})=>{const[i,r]=E.useState(t),a=E.useRef(null),l=E.useRef(!1),c=y=>{l.current=!0,y.preventDefault()},h=y=>{if(!l.current||!a.current)return;const S=a.current.getBoundingClientRect(),w=y.clientY-S.top;w>e&&r(w)},d=()=>{l.current=!1};E.useEffect(()=>(window.addEventListener("mousemove",h),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",d)}),[]);const m=6;return b.jsxs("div",{ref:a,className:"position-relative",style:{height:`${i}px`},children:[b.jsx("div",{style:{height:"100%",paddingBottom:`${m}px`,boxSizing:"border-box"},children:n}),b.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:`${m}px`,cursor:"ns-resize",zIndex:10,backgroundColor:"#0d6efd",opacity:.5},onMouseDown:c})]})},zx=He(({localImage:t,...e})=>{const[n,i]=E.useState(!!t.urlObject);return E.useEffect(()=>{let r=!0;return(async()=>{t.urlObject?i(!0):(await t.getUrlObject(),r&&i(!0))})(),()=>{r=!1}},[t]),n?b.jsx("img",{src:t.urlObject,...e}):b.jsx("div",{children:"Loading..."})}),w1=({localImage:t,height:e=150,onClick:n,zoomOnHover:i=!1})=>{const[r,a]=E.useState(!1);return b.jsxs("div",{className:"position-relative d-inline-block",style:{height:e,cursor:"pointer"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[b.jsx(zx,{localImage:t,className:"img-fluid",style:{height:e,width:"auto",objectFit:"contain",display:"block"},onClick:n,alt:"Media"}),r&&i&&b.jsx(zx,{localImage:t,style:{position:"absolute",top:"100%",left:"100%",width:400,zIndex:5e4,borderRadius:6,boxShadow:"0 10px 30px rgba(0,0,0,0.4)"}})]})},lK=He(({localVideo:t,...e})=>{const[n,i]=E.useState(!!t.urlObject);return E.useEffect(()=>{let r=!0;return(async()=>{t.urlObject?i(!0):(await t.getUrlObject(),r&&i(!0))})(),()=>{r=!1}},[t]),n?b.jsx("video",{src:t.urlObject,...e}):b.jsx("div",{children:"Loading..."})}),jh=He(({localVideo:t,height:e=250,fillParent:n=!1,onClick:i,autoPlay:r=!0,loop:a=!0,muted:l=!0})=>{const c=n?"100%":`${e}px`,h=n?"100%":"auto";return b.jsx("div",{className:"position-relative d-inline-block",style:{height:c,width:h,cursor:"pointer"},children:b.jsx(lK,{localVideo:t,onClick:i,autoPlay:r,loop:a,muted:l,style:{height:c,width:h,objectFit:"contain",display:"block"}})})}),E1=({localAudio:t,height:e=250,width:n=250,onClick:i,autoPlay:r=!1,loop:a=!1,muted:l=!1})=>{const[c,h]=E.useState(null);return E.useEffect(()=>{let d=!0;return(async()=>{try{const y=await t.getUrlObject();d&&y&&h(y)}catch(y){console.error("Error loading LocalAudio",y)}})(),()=>{d=!1,t.revokeUrl()}},[t]),b.jsxs("div",{className:"position-relative d-inline-flex flex-column align-items-center justify-content-center",style:{height:e,width:n,cursor:"pointer",paddingTop:"20px",paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px"},onClick:i,children:[b.jsx("div",{className:"text-center text-truncate w-100",style:{fontSize:"0.8rem",marginBottom:"5px"},title:t.name,children:t.name}),c?b.jsx("audio",{src:c,controls:!0,autoPlay:r,loop:a,muted:l,style:{width:"100%",height:"50px"}}):b.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded w-100",style:{height:e},children:"Loading..."})]})},Fi=He(({mediaItem:t,height:e=300,onSelectMedia:n,autoPlay:i=!0,children:r=[]})=>t instanceof vo?b.jsxs("div",{className:"position-relative d-inline-block",children:[b.jsx(w1,{localImage:t,height:e,onClick:()=>n?.(t)},t.path),r]}):t instanceof ju?b.jsxs("div",{className:"position-relative d-inline-block",children:[b.jsx(jh,{localVideo:t,height:e,onClick:()=>n?.(t),autoPlay:i},t.path),r]}):t instanceof Th?b.jsxs("div",{className:"position-relative d-inline-block",children:[b.jsx(E1,{localAudio:t,height:e,onClick:()=>n?.(t)},t.path),r]}):null),C1=({media:t,previewHeight:e=300,inlinePreviewHeight:n=25,filenameVisibleChars:i=8,hoverPosition:r="bottom"})=>{if(!t)return null;const a=uK(t.name,i),l=r==="top"?{bottom:"100%",top:"auto"}:{top:"100%",bottom:"auto"};return b.jsxs("div",{className:"d-inline-block position-relative",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsx(Fi,{mediaItem:t,height:n,autoPlay:!1}),b.jsx("span",{className:"text-muted",style:{cursor:"pointer"},onClick:()=>t.openInNewTab(),title:t.name,children:a})]}),b.jsx("div",{className:"position-absolute d-none shadow border rounded bg-white",style:{zIndex:1050,left:"100%",width:"max-content",...l},children:b.jsx(Fi,{mediaItem:t,height:e})}),b.jsx("style",{children:`
          .d-inline-block.position-relative:hover > div.position-absolute {
            display: block !important;
          }
        `})]})};function uK(t,e=8){if(!t)return"";if(t.length<=e+3)return t;const n=t.lastIndexOf("."),i=n>=0?t.slice(n):"";return`...${(n>=0?t.slice(0,n):t).slice(-e)}${i}`}const cK={submitted:"gray",processing:"orange",succeed:"green",failed:"red"},T1=He(({task:t,show_path:e=!1})=>{const n=t.status,i=cK[n]??"gray";return b.jsx("div",{className:"card mb-0",children:b.jsxs("div",{className:"card-body d-flex align-items-center justify-content-between py-0",children:[b.jsxs("div",{className:"d-flex align-items-center gap-2",children:[b.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:i}}),e&&b.jsxs("span",{className:"text-muted",style:{cursor:"pointer"},onClick:()=>{t.navigate()},children:[t.shot.scene.name,"/",t.shot.name,"/"]}),b.jsx("span",{className:"fw-bold",children:t.id}),b.jsx("span",{className:"text-muted",children:n}),t.result&&b.jsx(C1,{media:t.result})]}),b.jsxs("div",{className:"d-flex gap-0",children:[b.jsx("span",{className:"text-muted me-2",children:t._status_log}),b.jsx(tt,{label:"Check Status",className:"btn-outline-primary btn-sm rounded-0",onClick:()=>{t.check_status()}}),b.jsx(tt,{label:"Delete",className:"btn-outline-danger btn-sm rounded-0",onClick:()=>{window.confirm(`Delete task ${t.id}?`)&&t.delete()}}),b.jsx(tt,{label:"Log",className:"btn-outline-secondary btn-sm rounded-0",onClick:()=>{t.log()}}),b.jsx(ms,{isLoading:t.is_checking_status,asButton:!0})]})]})})}),qx=He(({shot:t})=>!t.tasks||t.tasks.length===0?b.jsx("div",{className:"mt-2 text-muted",children:"No tasks"}):b.jsx(Ha,{label:`Tasks (${t.tasks.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:b.jsx("div",{className:"d-flex flex-column gap-0",children:t.tasks.map(e=>b.jsx(T1,{task:e},e.id))})})),fK=({label:t="Media Gallery",children:e,defaultCollapsed:n=!1,className:i="",headerExtra:r,editWindow:a})=>b.jsxs(Ha,{label:t,defaultCollapsed:n,className:i,headerExtra:r,children:[b.jsx("div",{className:"d-flex flex-wrap gap-2",children:e}),a&&b.jsx("div",{className:"mb-3",children:a})]}),dK=({width:t=400,height:e=200,onDrop:n,children:i})=>{const[r,a]=E.useState(!1),l=d=>{d.preventDefault(),a(!0)},c=()=>{a(!1)},h=d=>{d.preventDefault(),a(!1);const m=Array.from(d.dataTransfer.files);m.length>0&&n(m)};return b.jsx("div",{className:`drop-area ${r?"dragging":""}`,style:{width:t,height:e,border:r?"2px solid #42a5f5":"2px dashed #606060",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:r?"#294457":"#2a2a31",boxShadow:r?"0 0 10px rgba(66,165,245,0.5)":"none",transition:"all 0.2s ease-in-out"},onDragOver:l,onDragLeave:c,onDrop:h,children:i||b.jsx("span",{style:{display:"block",textAlign:"center",width:"100%",color:"#5e727e"},children:"Drag and Drop Here"})})};function lt(t,e="Assertion error"){if(!t)throw Error(e)}function vy(t,e){return e.sort(t==="horizontal"?hK:pK)}function hK(t,e){const n=t.element.offsetLeft-e.element.offsetLeft;return n!==0?n:t.element.offsetWidth-e.element.offsetWidth}function pK(t,e){const n=t.element.offsetTop-e.element.offsetTop;return n!==0?n:t.element.offsetHeight-e.element.offsetHeight}function Jh({group:t}){const{orientation:e,panels:n}=t;return n.reduce((i,r)=>(i+=e==="horizontal"?r.element.offsetWidth:r.element.offsetHeight,i),0)}function x1(t){const{element:e,orientation:n,panels:i,separators:r}=t,a=vy(n,Array.from(e.children).filter(d=>d instanceof HTMLElement).map(d=>({element:d}))).map(({element:d})=>d),l=[];let c,h;for(const d of a){const m=i.find(y=>y.element===d);if(m){if(c){const y=c.element.getBoundingClientRect(),S=d.getBoundingClientRect();l.push({group:t,groupSize:Jh({group:t}),panels:[c,m],separator:h,rect:n==="horizontal"?new DOMRect(y.right,S.top,S.left-y.right,S.height):new DOMRect(S.left,y.bottom,S.width,S.top-y.bottom)})}c=m,h=void 0}else{const y=r.find(S=>S.element===d);y?h=y:(c=void 0,h=void 0)}}return l}function mK(t,e){const n=getComputedStyle(t),i=parseFloat(n.fontSize);return e*i}function gK(t,e){const n=getComputedStyle(t.ownerDocument.body),i=parseFloat(n.fontSize);return e*i}function vK(t){return t/100*window.innerHeight}function yK(t){return t/100*window.innerWidth}function _K(t){switch(typeof t){case"number":return[t,"px"];case"string":{const e=parseFloat(t);return t.endsWith("%")?[e,"%"]:t.endsWith("px")?[e,"px"]:t.endsWith("rem")?[e,"rem"]:t.endsWith("em")?[e,"em"]:t.endsWith("vh")?[e,"vh"]:t.endsWith("vw")?[e,"vw"]:[e,"%"]}}}function ed({groupSize:t,panelElement:e,styleProp:n}){let i;const[r,a]=_K(n);switch(a){case"%":{i=r/100*t;break}case"px":{i=r;break}case"rem":{i=gK(e,r);break}case"em":{i=mK(e,r);break}case"vh":{i=vK(r);break}case"vw":{i=yK(r);break}}return i}function ri(t){return parseFloat(t.toFixed(3))}function jx(t){const{panels:e}=t,n=Jh({group:t});return e.map(i=>{const{element:r,panelConstraints:a}=i;let l=0;if(a.collapsedSize){const m=ed({groupSize:n,panelElement:r,styleProp:a.collapsedSize});l=ri(m/n*100)}let c;if(a.defaultSize){const m=ed({groupSize:n,panelElement:r,styleProp:a.defaultSize});c=ri(m/n*100)}let h=0;if(a.minSize){const m=ed({groupSize:n,panelElement:r,styleProp:a.minSize});h=ri(m/n*100)}let d=100;if(a.maxSize){const m=ed({groupSize:n,panelElement:r,styleProp:a.maxSize});d=ri(m/n*100)}return{collapsedSize:l,collapsible:a.collapsible===!0,defaultSize:c,minSize:h,maxSize:d,panelId:i.id}})}class SK{#e={};addListener(e,n){const i=this.#e[e];return i===void 0?this.#e[e]=[n]:i.includes(n)||i.push(n),()=>{this.removeListener(e,n)}}emit(e,n){const i=this.#e[e];if(i!==void 0)if(i.length===1)i[0].call(null,n);else{let r=!1,a=null;const l=Array.from(i);for(let c=0;c<l.length;c++){const h=l[c];try{h.call(null,n)}catch(d){a===null&&(r=!0,a=d)}}if(r)throw a}}removeAllListeners(){this.#e={}}removeListener(e,n){const i=this.#e[e];if(i!==void 0){const r=i.indexOf(n);r>=0&&i.splice(r,1)}}}function Vt(t,e,n=0){return Math.abs(ri(t)-ri(e))<=n}let Ln={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const Zr=new SK;function $i(){return Ln}function jn(t){const e=typeof t=="function"?t(Ln):t;if(Ln===e)return Ln;const n=Ln;return Ln={...Ln,...e},e.cursorFlags!==void 0&&Zr.emit("cursorFlagsChange",Ln.cursorFlags),e.interactionState!==void 0&&Zr.emit("interactionStateChange",Ln.interactionState),e.mountedGroups!==void 0&&(Ln.mountedGroups.forEach((i,r)=>{i.derivedPanelConstraints.forEach(a=>{if(a.collapsible){const{layout:l}=n.mountedGroups.get(r)??{};if(l){const c=Vt(a.collapsedSize,i.layout[a.panelId]),h=Vt(a.collapsedSize,l[a.panelId]);c&&!h&&(r.inMemoryLastExpandedPanelSizes[a.panelId]=l[a.panelId])}}})}),Zr.emit("mountedGroupsChange",Ln.mountedGroups)),Ln}const bK=t=>t,av=()=>{},A1=1,R1=2,M1=4,N1=8,Jx={coarse:10,precise:5};function wK({cursorFlags:t,groups:e,state:n}){let i=0,r=0;switch(n){case"active":case"hover":e.forEach(a=>{if(!a.disableCursor)switch(a.orientation){case"horizontal":{i++;break}case"vertical":{r++;break}}})}if(i===0&&r===0)return null;switch(n){case"active":{const a=(t&A1)!==0,l=(t&R1)!==0,c=(t&M1)!==0,h=(t&N1)!==0;if(t){if(a)return c?"se-resize":h?"ne-resize":"e-resize";if(l)return c?"sw-resize":h?"nw-resize":"w-resize";if(c)return"s-resize";if(h)return"n-resize"}break}}return i>0&&r>0?"move":i>0?"ew-resize":"ns-resize"}let lv,wi;function V_(){wi===void 0&&(wi=new CSSStyleSheet,document.adoptedStyleSheets=[wi]);const{cursorFlags:t,interactionState:e}=$i();switch(e.state){case"active":case"hover":{const n=wK({cursorFlags:t,groups:e.hitRegions.map(r=>r.group),state:e.state}),i=`*{cursor: ${n} !important; ${e.state==="active"?"touch-action: none;":""} }`;if(lv===i)return;lv=i,n?wi.cssRules.length===0?wi.insertRule(i):wi.replaceSync(i):wi.cssRules.length===1&&wi.deleteRule(0);break}case"inactive":{lv=void 0,wi.cssRules.length===1&&wi.deleteRule(0);break}}}function EK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function Au(t,e){return Vt(t,e)?0:t>e?1:-1}function _a({panelConstraints:t,size:e}){const{collapsedSize:n=0,collapsible:i,maxSize:r=100,minSize:a=0}=t;if(Au(e,a)<0)if(i){const l=(n+a)/2;Au(e,l)<0?e=n:e=a}else e=a;return e=Math.min(r,e),e=ri(e),e}function Ru({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:r,trigger:a}){if(Vt(t,0))return e;const l=Object.values(e),c=Object.values(r),h=[...l],[d,m]=i;lt(d!=null,"Invalid first pivot index"),lt(m!=null,"Invalid second pivot index");let y=0;if(a==="keyboard"){{const T=t<0?m:d,x=n[T];lt(x,`Panel constraints not found for index ${T}`);const{collapsedSize:A=0,collapsible:M,minSize:I=0}=x;if(M){const N=l[T];if(lt(N!=null,`Previous layout not found for panel index ${T}`),Vt(N,A)){const D=I-N;Au(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}{const T=t<0?d:m,x=n[T];lt(x,`No panel constraints found for index ${T}`);const{collapsedSize:A=0,collapsible:M,minSize:I=0}=x;if(M){const N=l[T];if(lt(N!=null,`Previous layout not found for panel index ${T}`),Vt(N,I)){const D=N-A;Au(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}}{const T=t<0?1:-1;let x=t<0?m:d,A=0;for(;;){const I=l[x];lt(I!=null,`Previous layout not found for panel index ${x}`);const N=_a({panelConstraints:n[x],size:100})-I;if(A+=N,x+=T,x<0||x>=n.length)break}const M=Math.min(Math.abs(t),Math.abs(A));t=t<0?0-M:M}{let T=t<0?d:m;for(;T>=0&&T<n.length;){const x=Math.abs(t)-Math.abs(y),A=l[T];lt(A!=null,`Previous layout not found for panel index ${T}`);const M=A-x,I=_a({panelConstraints:n[T],size:M});if(!Vt(A,I)&&(y+=A-I,h[T]=I,y.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?T--:T++}}if(EK(c,h))return r;{const T=t<0?m:d,x=l[T];lt(x!=null,`Previous layout not found for panel index ${T}`);const A=x+y,M=_a({panelConstraints:n[T],size:A});if(h[T]=M,!Vt(M,A)){let I=A-M,N=t<0?m:d;for(;N>=0&&N<n.length;){const D=h[N];lt(D!=null,`Previous layout not found for panel index ${N}`);const L=D+I,U=_a({panelConstraints:n[N],size:L});if(Vt(D,U)||(I-=U-D,h[N]=U),Vt(I,0))break;t>0?N--:N++}}}const S=Object.values(h).reduce((T,x)=>x+T,0);if(!Vt(S,100,.1))return r;const w=Object.keys(r);return h.reduce((T,x,A)=>(T[w[A]]=x,T),{})}function oc(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(Au(t[n],e[n])!==0)return!1;return!0}function I1({event:t,hitRegions:e,initialLayoutMap:n,mountedGroups:i,pointerDownAtPoint:r}){let a=0;const l=new Map(i);e.forEach(c=>{const{group:h,groupSize:d}=c,{disableCursor:m,orientation:y,panels:S}=h;let w=0;r?y==="horizontal"?w=(t.clientX-r.x)/d*100:w=(t.clientY-r.y)/d*100:y==="horizontal"?w=t.clientX<0?-100:100:w=t.clientY<0?-100:100;const T=n.get(h),{derivedPanelConstraints:x,layout:A,separatorToPanels:M}=i.get(h)??{};if(x&&T&&A&&M){const I=Ru({delta:w,initialLayout:T,panelConstraints:x,pivotIndices:c.panels.map(N=>S.indexOf(N)),prevLayout:A,trigger:"mouse-or-touch"});if(oc(I,A)){if(w!==0&&!m)switch(y){case"horizontal":{a|=w<0?A1:R1;break}case"vertical":{a|=w<0?M1:N1;break}}}else{l.set(c.group,{derivedPanelConstraints:x,layout:I,separatorToPanels:M});const N=c.group.panels.map(({id:D})=>D).join(",");c.group.inMemoryLayouts[N]=I}}}),jn({cursorFlags:a,mountedGroups:l}),V_()}function Kx(t){if(t.defaultPrevented||t.relatedTarget!==null||t.clientX===0&&t.clientY===0)return;const{interactionState:e,mountedGroups:n}=$i();switch(e.state){case"active":e.hitRegions.forEach(i=>{t.currentTarget===i.group.element&&I1({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n})})}}function Sd(t){const e=t.parentElement;lt(e,"Parent group element not found");const{mountedGroups:n}=$i();for(const[i]of n)if(i.element===e)return i;throw Error("Could not find parent Group for separator element")}function us({layout:t,panelConstraints:e}){const n=[...Object.values(t)],i=n.reduce((l,c)=>l+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!Vt(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const c=n[l];lt(c!=null,`No layout data found for index ${l}`);const h=100/i*c;n[l]=h}let r=0;for(let l=0;l<e.length;l++){const c=n[l];lt(c!=null,`No layout data found for index ${l}`);const h=_a({panelConstraints:e[l],size:c});c!=h&&(r+=c-h,n[l]=h)}if(!Vt(r,0))for(let l=0;l<e.length;l++){const c=n[l];lt(c!=null,`No layout data found for index ${l}`);const h=c+r,d=_a({panelConstraints:e[l],size:h});if(c!==d&&(r-=d-c,n[l]=d,Vt(r,0)))break}const a=Object.keys(t);return n.reduce((l,c,h)=>(l[a[h]]=c,l),{})}function D1({groupId:t}){const e=()=>{const{mountedGroups:n}=$i();for(const[i,r]of n)if(i.id===t)return{group:i,...r};throw Error(`Group ${t} not found`)};return{getLayout(){const{layout:n}=e();return n},setLayout(n){const{derivedPanelConstraints:i,group:r,layout:a,separatorToPanels:l}=e(),c=us({layout:n,panelConstraints:i});return oc(a,c)||jn(h=>({mountedGroups:new Map(h.mountedGroups).set(r,{derivedPanelConstraints:i,layout:c,separatorToPanels:l})})),c}}}function O1(t){const{mountedGroups:e}=$i(),n=e.get(t);return lt(n,`Mounted Group ${t.id} not found`),n}function zr(t,e){const n=Sd(t),i=O1(n),r=n.separators.find(m=>m.element===t);lt(r,"Matching separator not found");const a=i.separatorToPanels.get(r);lt(a,"Matching panels not found");const l=a.map(m=>n.panels.indexOf(m)),c=D1({groupId:n.id}).getLayout(),h=Ru({delta:e,initialLayout:c,panelConstraints:i.derivedPanelConstraints,pivotIndices:l,prevLayout:c,trigger:"keyboard"}),d=us({layout:h,panelConstraints:i.derivedPanelConstraints});oc(c,d)||jn(m=>({mountedGroups:new Map(m.mountedGroups).set(n,{derivedPanelConstraints:i.derivedPanelConstraints,layout:d,separatorToPanels:i.separatorToPanels})}))}function Yx(t){if(t.defaultPrevented)return;const e=t.currentTarget,n=Sd(e);if(!n.disabled)switch(t.key){case"ArrowDown":{t.preventDefault(),n.orientation==="vertical"&&zr(e,5);break}case"ArrowLeft":{t.preventDefault(),n.orientation==="horizontal"&&zr(e,-5);break}case"ArrowRight":{t.preventDefault(),n.orientation==="horizontal"&&zr(e,5);break}case"ArrowUp":{t.preventDefault(),n.orientation==="vertical"&&zr(e,-5);break}case"End":{t.preventDefault(),zr(e,100);break}case"Enter":{t.preventDefault();const i=Sd(e),{derivedPanelConstraints:r,layout:a,separatorToPanels:l}=O1(i),c=i.separators.find(y=>y.element===e);lt(c,"Matching separator not found");const h=l.get(c);lt(h,"Matching panels not found");const d=h[0],m=r.find(y=>y.panelId===d.id);if(lt(m,"Panel metadata not found"),m.collapsible){const y=a[d.id],S=m.collapsedSize===y?i.inMemoryLastExpandedPanelSizes[d.id]??m.minSize:m.collapsedSize;zr(e,S-y)}break}case"F6":{t.preventDefault();const i=Sd(e).separators.map(l=>l.element),r=Array.from(i).findIndex(l=>l===t.currentTarget);lt(r!==null,"Index not found");const a=t.shiftKey?r>0?r-1:i.length-1:r+1<i.length?r+1:0;i[a].focus();break}case"Home":{t.preventDefault(),zr(e,-100);break}}}function CK(t,e){return{x:t.x>=e.left&&t.x<=e.right?0:Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),y:t.y>=e.top&&t.y<=e.bottom?0:Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom))}}function TK(t,e,n){let i,r={x:1/0,y:1/0};for(const a of e){const l=CK(n,a.rect);switch(t){case"horizontal":{l.x<=r.x&&(i=a,r=l);break}case"vertical":{l.y<=r.y&&(i=a,r=l);break}}}return i?{distance:r,hitRegion:i}:void 0}let td;function xK(){return td===void 0&&(typeof matchMedia=="function"?td=!!matchMedia("(pointer:coarse)").matches:td=!1),td}function k1(t,e){const n=[];return e.forEach((i,r)=>{if(r.disabled)return;const a=xK()?Jx.coarse:Jx.precise,l=x1(r),c=TK(r.orientation,l,{x:t.clientX,y:t.clientY});c&&c.distance.x<=a&&c.distance.y<=a&&n.push(c.hitRegion)}),n}function Xx(t){if(t.defaultPrevented)return;const{mountedGroups:e}=$i(),n=k1(t,e),i=new Set,r=new Set,a=new Set,l=new Map;let c=!1;n.forEach(h=>{i.add(h.group),h.panels.forEach(m=>{r.add(m)}),h.separator&&(a.add(h.separator),c||(c=!0,h.separator.element.focus()));const d=e.get(h.group);d&&l.set(h.group,d.layout)}),jn({interactionState:{hitRegions:n,initialLayoutMap:l,pointerDownAtPoint:{x:t.clientX,y:t.clientY},state:"active"}}),n.length&&t.preventDefault()}function Wx(t){if(t.defaultPrevented)return;const{interactionState:e,mountedGroups:n}=$i();switch(e.state){case"active":{if(t.type!=="pointerleave"&&t.buttons===0){jn(i=>i.interactionState.state==="inactive"?i:{cursorFlags:0,interactionState:{state:"inactive"}});return}I1({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:e.pointerDownAtPoint});break}default:{const i=k1(t,n);i.length===0?e.state!=="inactive"&&jn({interactionState:{state:"inactive"}}):jn({interactionState:{hitRegions:i,state:"hover"}}),V_();break}}}function Qx(t){if(t.defaultPrevented)return;t.preventDefault();const{interactionState:e}=$i();switch(e.state){case"active":jn({cursorFlags:0,interactionState:{state:"inactive"}}),V_()}}function AK(t){let e=0,n=0;const i={};for(const a of t)if(a.defaultSize!==void 0){e++;const l=ri(a.defaultSize);n+=l,i[a.panelId]=l}else i[a.panelId]=void 0;const r=t.length-e;if(r!==0){const a=ri((100-n)/r);for(const l of t)l.defaultSize===void 0&&(i[l.panelId]=a)}return i}function RK(t,e,n){const i=n[0];if(!i)return;const r=t.panels.find(l=>l.element===e);if(!r||!r.onResize)return;const a=Jh({group:t});r.onResize({asPercentage:ri(i.inlineSize/a*100),inPixels:i.inlineSize},r.id)}function MK(t){let e=!0;lt(t.separators.length===0||t.separators.length<t.panels.length,"Invalid Group configuration; too many Separator components");const n=new Set,i=new Set,r=new ResizeObserver(y=>{for(const S of y){const{borderBoxSize:w,target:T}=S;T===t.element?e&&jn(x=>{const A=x.mountedGroups.get(t);if(A){const M=jx(t),I=A.layout,N=us({layout:I,panelConstraints:M});return{mountedGroups:new Map(x.mountedGroups).set(t,{derivedPanelConstraints:M,layout:N,separatorToPanels:A.separatorToPanels})}}return x}):RK(t,T,w)}});r.observe(t.element),t.panels.forEach(y=>{lt(!n.has(y.id),`Panel ids must be unique; id "${y.id}" was used more than once`),n.add(y.id),y.onResize&&r.observe(y.element)});const a=jx(t),l=t.panels.map(({id:y})=>y).join(","),c=t.inMemoryLayouts[l]??t.defaultLayout??AK(a),h=us({layout:c,panelConstraints:a}),d=x1(t),m=jn(y=>({mountedGroups:new Map(y.mountedGroups).set(t,{derivedPanelConstraints:a,layout:h,separatorToPanels:new Map(d.filter(S=>S.separator).map(S=>[S.separator,S.panels]))})}));return t.element.addEventListener("pointerleave",Kx),t.separators.forEach(y=>{lt(!i.has(y.id),`Separator ids must be unique; id "${y.id}" was used more than once`),i.add(y.id),y.element.addEventListener("keydown",Yx)}),m.mountedGroups.size===1&&(window.addEventListener("pointerdown",Xx),window.addEventListener("pointermove",Wx),window.addEventListener("pointerup",Qx)),function(){e=!1;const y=jn(S=>{const w=new Map(S.mountedGroups);return w.delete(t),{mountedGroups:w}});t.element.removeEventListener("pointerleave",Kx),t.separators.forEach(S=>{S.element.removeEventListener("keydown",Yx)}),y.mountedGroups.size===0&&(window.removeEventListener("pointerdown",Xx),window.removeEventListener("pointermove",Wx),window.removeEventListener("pointerup",Qx)),r.disconnect()}}function z_(t){const e=E.useId();return`${t??e}`}const qa=typeof window<"u"?E.useLayoutEffect:E.useEffect;function q_(t){const e=E.useRef(t);return qa(()=>{e.current=t},[t]),E.useCallback(n=>e.current?.(n),[e])}function j_(...t){return q_(e=>{t.forEach(n=>{if(n)switch(typeof n){case"function":{n(e);break}case"object":{n.current=e;break}}})})}const P1="--react-resizable-panels--panel--pointer-events";function L1(t,e){const n=t.replace(/[^a-zA-Z0-9\-_]/g,""),i=e.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${i}`}const U1=E.createContext(null);function NK(t,e){const n=E.useRef({getLayout:()=>({}),setLayout:bK});E.useImperativeHandle(e,()=>n.current,[]),qa(()=>{Object.assign(n.current,D1({groupId:t}))})}function F1({children:t,className:e,defaultLayout:n,disableCursor:i,disabled:r,elementRef:a,groupRef:l,id:c,onLayoutChange:h,orientation:d="horizontal",style:m,...y}){const S=E.useRef({}),w=q_(ae=>{oc(S.current,ae)||(S.current=ae,h?.(ae))}),T=z_(c),[x,A]=E.useState(!1),[M,I]=E.useState(null),[N,D]=E.useState(n??{}),[L,U]=E.useState([]),[O,q]=E.useState([]),j=E.useRef({}),Y=E.useRef({}),W=j_(I,a);NK(T,l);const re=E.useMemo(()=>({id:T,orientation:d,registerPanel:ae=>(U(de=>vy(d,[...de,ae])),()=>{U(de=>de.filter(B=>B!==ae))}),registerSeparator:ae=>(q(de=>vy(d,[...de,ae])),()=>{q(de=>de.filter(B=>B!==ae))})}),[T,d]);qa(()=>{if(M!==null&&L.length>0){const ae={defaultLayout:n,disableCursor:!!i,disabled:!!r,element:M,id:T,inMemoryLastExpandedPanelSizes:j.current,inMemoryLayouts:Y.current,orientation:d,panels:L,separators:O},de=MK(ae),B=$i().mountedGroups.get(ae);B&&(D(B.layout),w?.(B.layout));const Q=Zr.addListener("interactionStateChange",ne=>{switch(ne.state){case"active":case"hover":{A(ne.hitRegions.some(ce=>ce.group===ae));break}}}),ee=Zr.addListener("mountedGroupsChange",ne=>{const ce=ne.get(ae);ce&&ce.derivedPanelConstraints.length>0&&(D(ce.layout),w?.(ce.layout))});return()=>{de(),Q(),ee()}}},[n,i,r,M,T,w,d,L,O]);const ie={[P1]:x?"none":void 0};for(const ae in N){const de=L1(T,ae),B=N[ae];ie[de]=B}return b.jsx(U1.Provider,{value:re,children:b.jsx("div",{...y,"aria-orientation":d,className:e,"data-group":!0,"data-testid":T,id:T,ref:W,style:{...m,...ie,display:"flex",flexDirection:d==="horizontal"?"row":"column",flexWrap:"nowrap"},children:t})})}function J_(){const t=E.useContext(U1);return lt(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function IK({groupId:t,panelId:e}){const n=()=>{const{mountedGroups:c}=$i();for(const[h,{derivedPanelConstraints:d,layout:m,separatorToPanels:y}]of c)if(h.id===t)return{derivedPanelConstraints:d,group:h,layout:m,separatorToPanels:y};throw Error(`Group ${t} not found`)},i=()=>{const c=n().derivedPanelConstraints.find(h=>h.panelId===e);if(c!==void 0)return c;throw Error(`Panel constraints not found for Panel ${e}`)},r=()=>{const c=n().group.panels.find(h=>h.id===e);if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},a=()=>{const c=n().layout[e];if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},l=c=>{const h=a();if(c===h)return;const{derivedPanelConstraints:d,group:m,layout:y,separatorToPanels:S}=n(),w=m.panels.findIndex(M=>M.id===e),T=w===m.panels.length-1,x=Ru({delta:T?h-c:c-h,initialLayout:y,panelConstraints:d,pivotIndices:T?[w-1,w]:[w,w+1],prevLayout:y,trigger:"imperative-api"}),A=us({layout:x,panelConstraints:d});oc(y,A)||jn(M=>({mountedGroups:new Map(M.mountedGroups).set(m,{derivedPanelConstraints:d,layout:A,separatorToPanels:S})}))};return{collapse:()=>{const{collapsible:c,collapsedSize:h}=i(),d=a();c&&d!==h&&l(h)},expand:()=>{const{collapsible:c,collapsedSize:h,minSize:d}=i(),m=a();c&&m===h&&l(d)},getSize:()=>{const{group:c}=n(),h=a(),{element:d}=r(),m=c.orientation==="horizontal"?d.offsetWidth:d.offsetHeight;return{asPercentage:h,inPixels:m}},isCollapsed:()=>{const{collapsible:c,collapsedSize:h}=i(),d=a();return c&&Vt(h,d)},resize:c=>{if(a()!==c){let h;switch(typeof c){case"number":{const{group:d}=n(),m=Jh({group:d});h=ri(c/m*100);break}case"string":{h=parseFloat(c);break}}l(h)}}}}function DK(t,e){const{id:n}=J_(),i=E.useRef({collapse:av,expand:av,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:av});E.useImperativeHandle(e,()=>i.current,[]),qa(()=>{Object.assign(i.current,IK({groupId:n,panelId:t}))})}function nh({children:t,className:e,collapsedSize:n="0%",collapsible:i=!1,defaultSize:r,elementRef:a,id:l,maxSize:c="100%",minSize:h="0%",onResize:d,panelRef:m,style:y,...S}){const w=!!l,T=z_(l),[x,A]=E.useState(null),M=j_(A,a),{id:I,registerPanel:N}=J_(),D=d!==null,L=q_(O=>{d?.(O,l)});qa(()=>{if(x!==null)return N({element:x,id:T,idIsStable:w,onResize:D?L:void 0,panelConstraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:c,minSize:h}})},[n,i,r,x,D,T,w,c,h,L,N]),DK(T,m);const U=L1(I,T);return b.jsx("div",{...S,"data-panel":!0,"data-testid":T,id:T,ref:M,style:{...OK,flexBasis:0,flexGrow:`var(${U}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${P1})`},children:b.jsx("div",{className:e,style:{width:"100%",height:"100%",...y},children:t})})}const OK={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function kK({layout:t,panelConstraints:e,panelId:n,panelIndex:i}){let r,a;const l=t[n],c=e.find(h=>h.panelId===n);if(c){const h=c.maxSize,d=a=c.collapsible?c.collapsedSize:c.minSize,m=[i,i+1];a=us({layout:Ru({delta:d-l,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n],r=us({layout:Ru({delta:h-l,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n]}return{valueControls:n,valueMax:r,valueMin:a,valueNow:l}}function B1({children:t,className:e,elementRef:n,id:i,style:r,...a}){const l=z_(i),[c,h]=E.useState({}),[d,m]=E.useState("inactive"),[y,S]=E.useState(null),w=j_(S,n),{id:T,orientation:x,registerSeparator:A}=J_(),M=x==="horizontal"?"vertical":"horizontal";return qa(()=>{if(y!==null){const I={element:y,id:l},N=A(I),D=Zr.addListener("interactionStateChange",U=>{m(U.state!=="inactive"&&U.hitRegions.some(O=>O.separator===I)?U.state:"inactive")}),L=Zr.addListener("mountedGroupsChange",U=>{U.forEach(({derivedPanelConstraints:O,layout:q,separatorToPanels:j},Y)=>{if(Y.id===T){const W=j.get(I);if(W){const re=W[0],ie=Y.panels.indexOf(re);h(kK({layout:q,panelConstraints:O,panelId:re.id,panelIndex:ie}))}}})});return()=>{D(),L(),N()}}},[y,T,l,A]),b.jsx("div",{...a,"aria-controls":c.valueControls,"aria-orientation":M,"aria-valuemax":c.valueMax,"aria-valuemin":c.valueMin,"aria-valuenow":c.valueNow,children:t,className:e,"data-separator":d,"data-testid":l,id:l,ref:w,role:"separator",style:{flexBasis:"auto",...r,flexGrow:0,flexShrink:0},tabIndex:0})}const K_=He(({shot:t})=>{const e=t.scene;if(!e.sceneJson||!e.sceneJson.data)return null;const n=e.sceneJson.data.tags,i=e.project?.artbook;return i?b.jsx(Ha,{label:"Tags",children:n.length?b.jsx("ul",{className:"list-group list-group-flush",children:n.map((r,a)=>{const l=i.getTag(r);if(!l)return null;const c=!t.getSkippedTags().includes(l.path);return b.jsxs("li",{className:"list-group-item p-0 border-0 d-flex align-items-center gap-2",children:[b.jsx(w1,{localImage:l.image,height:25,zoomOnHover:!0}),b.jsx("input",{type:"checkbox",className:"form-check-input m-0",checked:c,onChange:h=>{t.setTagSkipped(l.path,!h.target.checked)}}),b.jsx("span",{className:c?"":"text-muted",children:l.path})]},a)})}):b.jsx("div",{children:"No tags."})}):null}),ih=({label:t,className:e,style:n})=>t?b.jsx("div",{className:`position-absolute bottom-0 start-50 translate-middle-x bg-dark text-white px-2 py-1 rounded small text-nowrap opacity-75 pe-none mb-1 ${e||""}`,style:n,children:t}):null,PK=He(({localImage:t,onClose:e,reference_images:n=[]})=>{const[i,r]=E.useState(null),[a,l]=E.useState(!1),[c,h]=E.useState(xi.options.img_models.flash_image),[d,m]=E.useState(!!t.shot);E.useEffect(()=>{let S=!0;return t.getUrlObject().then(w=>{S&&r(w)}),()=>{S=!1}},[t]);const y=async()=>{l(!0);try{const S=await t.getBase64(),w=await Promise.all(n.map(I=>I.getBase64())),T=t.mediaJson?.getField("image_edit_prompt"),x=d&&t.shot?await t.shot.getImageTags():[],A=await xi.img2img(T||"",c,[{rawBase64:S.rawBase64,mime:S.mime,description:"source_image"},...w.map((I,N)=>({rawBase64:I.rawBase64,mime:I.mime,description:`ref${N+1}`})),...x]);console.log("Image generated:",A);const M=await xi.saveResultImage(A,t.parentFolder);M&&(await t.mediaFolder?.loadFile(M?.handle))?.mediaJson?.updateField("geninfo",{workflow:"image_edit",prompt:T,model:c,refs:n.map(N=>N.path),art_refs:d&&t.shot?t.shot.getFilteredTags().map(N=>N.path):[],source:t.path})}catch(S){console.error("GenerateImage failed:",S)}finally{l(!1)}};return b.jsx(b.Fragment,{children:b.jsxs("div",{className:"border d-flex flex-column position-relative",style:{height:"700px"},children:[e&&b.jsx("button",{type:"button",onClick:e,style:{position:"absolute",top:"8px",right:"8px",cursor:"pointer",background:"transparent",border:"none",fontSize:"1.2rem"},children:""}),b.jsxs(F1,{orientation:"horizontal",style:{height:"100%"},children:[b.jsx(nh,{defaultSize:500,minSize:10,children:b.jsx("div",{className:"d-flex align-items-center justify-content-center overflow-hidden position-relative",style:{height:"100%"},children:i?b.jsxs(b.Fragment,{children:[b.jsx("img",{src:i,alt:"Preview",className:"img-fluid",style:{objectFit:"contain",maxHeight:"100%",maxWidth:"100%"}}),b.jsx("div",{className:`\r
                    position-absolute \r
                    bottom-0\r
                    start-50\r
                    translate-middle-x\r
                    mb-2\r
                    px-2\r
                    py-1\r
                    text-white\r
                    bg-dark\r
                    bg-opacity-50\r
                    rounded\r
                    small\r
                    text-nowrap\r
                  `,style:{pointerEvents:"none"},children:"(Source Image)"})]}):b.jsx("div",{children:"Loading image"})})}),b.jsx(B1,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),b.jsx(nh,{minSize:10,children:b.jsx("div",{className:"d-flex flex-column h-100 p-3",style:{height:"100%"},children:b.jsx(dr,{tabs:{ImageEdit:b.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[n.length>0&&b.jsx("div",{className:"d-flex gap-2 mb-2 flex-wrap",children:n.map((S,w)=>S.urlObject?b.jsxs("div",{style:{position:"relative",width:100,height:100},children:[b.jsx("img",{src:S.urlObject,alt:`ref-${w}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:4,border:"1px solid #444",display:"block"}}),b.jsxs("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.6)",color:"#fff",fontSize:12,padding:"2px 6px",borderRadius:3,pointerEvents:"none",whiteSpace:"nowrap"},children:["ref",w+1]})]},w):(S.getUrlObject(),null))}),t.shot&&b.jsxs("label",{className:"d-flex align-items-center gap-2 mb-2",children:[b.jsx("input",{type:"checkbox",checked:d,onChange:S=>m(S.target.checked)}),"Use shot tags"]}),t.shot&&d&&b.jsx(K_,{shot:t.shot}),b.jsxs(b.Fragment,{children:[b.jsx(b.Fragment,{children:"Prompt : "}),b.jsx(zt,{localJson:t.mediaJson,field:"image_edit_prompt",fitHeight:!0})]}),b.jsx(ls,{value:c,options:Object.values(xi.options.img_models),label:"Model:",onChange:S=>{h(S)}}),b.jsx(Uh,{onClick:y,label:"Generate",is_loading:a})]}),GenerateInfo:b.jsxs(b.Fragment,{children:[t.sourceImage&&b.jsx(b.Fragment,{children:b.jsx(Fi,{mediaItem:t.sourceImage,height:150,onSelectMedia:()=>{(t.sourceImage?.parentFolder).setSelectedMedia(t.sourceImage)},children:b.jsx(ih,{label:"SOURCE"})})}),t.generatedMedia?.length>0&&b.jsx(b.Fragment,{children:t.generatedMedia.map(S=>b.jsx(Fi,{height:150,mediaItem:S,onSelectMedia:()=>{S.parentFolder.setSelectedMedia(S)},children:b.jsx(ih,{label:"Child"})},S.path))}),b.jsx("div",{children:b.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(t.mediaJson?.data.geninfo,null,2)})})]})}})})})]})]})})}),LK=({localVideo:t,initialText:e="",onVideoTaskCreated:n,onClose:i})=>{const[r,a]=E.useState(e),[l,c]=E.useState(!1),[h,d]=E.useState(Ie.options.omni_video.mode.pro),[m,y]=E.useState(Ie.options.omni_video.video.keep_original_sound.yes),S=async()=>{c(!0);try{const w=await t.getWebUrl(),T=await Ie.omniVideo({prompt:r,model:Ie.options.omni_video.model.o1,mode:h,video_list:[{video_url:w,refer_type:Ie.options.omni_video.video.refer_type.base,keep_original_sound:m}]});T.geninfo={workflow:"kling_VideoEditO1",prompt:r,model:Ie.options.omni_video.model.o1,source:t.path,kling:{mode:h,keep_original_sound:m}},n?.(T)}catch(w){console.error("GenerateVideoEdit failed:",w)}finally{c(!1)}};return b.jsxs("div",{className:"border d-flex flex-column position-relative",style:{height:"700px"},children:[i&&b.jsx("button",{type:"button",onClick:i,style:{position:"absolute",top:"8px",right:"8px",cursor:"pointer",background:"transparent",border:"none",fontSize:"1.2rem"},children:""}),b.jsxs(F1,{orientation:"horizontal",style:{height:"100%"},children:[b.jsx(nh,{defaultSize:500,minSize:10,children:b.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:b.jsx(jh,{localVideo:t,fillParent:!0})})}),b.jsx(B1,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),b.jsx(nh,{minSize:10,children:b.jsx("div",{className:"d-flex flex-column h-100 p-3",style:{height:"100%"},children:b.jsx(dr,{tabs:{VideoEdit:b.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[b.jsx("textarea",{value:r,onChange:w=>a(w.target.value),placeholder:"[@Video] make the character smile",style:{flexGrow:1,resize:"none",padding:"8px",fontSize:"14px",height:"300px"}}),b.jsx(ls,{label:"Mode:",value:h,options:Object.values(Ie.options.omni_video.mode),onChange:w=>d(w)}),b.jsx(ls,{label:"Keep Original Sound:",value:m,options:Object.values(Ie.options.omni_video.video.keep_original_sound),onChange:w=>y(w)}),b.jsx(Uh,{onClick:S,label:"Generate",is_loading:l})]}),GenerateInfo:b.jsxs(b.Fragment,{children:[t.sourceImage&&b.jsx(b.Fragment,{children:b.jsx(Fi,{mediaItem:t.sourceImage,height:150,onSelectMedia:()=>{(t.sourceImage?.parentFolder).setSelectedMedia(t.sourceImage)},children:b.jsx(ih,{label:"SOURCE"})})}),b.jsx("div",{children:b.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(t.mediaJson?.data.geninfo,null,2)})})]})}})})})]})]})},UK=()=>b.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",backdropFilter:"grayscale(100%)",zIndex:10,transition:"filter 2.3s ease"}}),uv=({children:t,showOutline:e=!1,color:n="#085db7",width:i=3,style:r,className:a,name:l="Outline"})=>b.jsx("div",{className:a,"data-name":l,style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",border:e?`${i}px solid ${n}`:"none",borderRadius:r?.borderRadius||0,boxSizing:"border-box",...r},children:t}),FK=He(({mediaItem:t,className:e,style:n})=>t.tags?.length?b.jsx("div",{className:`position-absolute bottom-0 start-50 translate-middle-x d-flex flex-wrap gap-1 justify-center mb-1 ${e||""}`,style:{maxWidth:"90%",...n},children:t.tags.map((i,r)=>b.jsx("div",{className:"bg-dark text-white px-2 py-1 rounded small text-nowrap opacity-75",style:{cursor:"pointer"},onClick:()=>t.removeTag(i),children:i},`${i}-${r}`))}):null),BK=({children:t,hoverElements:e})=>{const[n,i]=E.useState(!1);return b.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[t,n&&e&&b.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,pointerEvents:"none"},children:b.jsx("div",{style:{pointerEvents:"auto"},children:e})})]})},$K=({children:t,className:e="",style:n={}})=>b.jsx("div",{className:`position-absolute ${e}`,style:{top:5,right:5,zIndex:10,display:"flex",gap:5,...n},children:t}),GK=({label:t,value:e,onToggle:n,useIndicator:i=!1,activeColor:r="green"})=>i?b.jsx("div",{onClick:()=>n(!e),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:e?r:"transparent",border:"2px solid green",cursor:"pointer"}}):b.jsx("button",{className:"btn btn-sm",onClick:()=>n(!e),style:{backgroundColor:e?r:"transparent",color:e?"white":"#6c757d",border:`1px solid ${r}`},children:t}),oi=He(({mediaFolder:t,label:e=null,itemHeight:n=300,showEditWindow:i=!0})=>{const[r,a]=E.useState(!0);return!t||!t.handle?null:(e=e||t.name,b.jsx(b.Fragment,{children:b.jsxs(fK,{label:e,headerExtra:b.jsxs(b.Fragment,{children:[b.jsx(GK,{label:"Highlight Gen Relations",value:r,onToggle:l=>{a(l)}}),b.jsx(tt,{label:"Log",className:"btn-outline-secondary btn-sm",onClick:()=>{t.log()}}),b.jsx(tt,{label:"Import URL",className:"btn-outline-secondary btn-sm",onClick:async()=>{try{const l=await navigator.clipboard.readText();l&&(l.startsWith("http://")||l.startsWith("https://"))?(console.log("Importing URL from clipboard:",l),t.downloadFromUrl(l)):alert("Clipboard does not contain a valid URL.")}catch(l){console.error("Failed to read clipboard:",l),alert("Failed to access clipboard.")}}}),b.jsx(tt,{label:"Paste",className:"btn-outline-secondary btn-sm",onClick:()=>{t.copyFromClipboard()}})]}),editWindow:i?b.jsxs(b.Fragment,{children:[t.selectedMedia instanceof vo?b.jsx(PK,{localImage:t.selectedMedia,reference_images:t.getMediaWithTag("ref_frame"),onClose:()=>t.setSelectedMedia(null)}):null,t.selectedMedia instanceof ju?b.jsx(b.Fragment,{children:b.jsx(LK,{localVideo:t.selectedMedia,initialText:"Notes for this video",onVideoTaskCreated:async l=>{console.log("Video task created:",l);const h=t.shot.addTask(l.id,{provider:fu.KLING,workflow:l.workflow,geninfo:l.geninfo});await new Promise(d=>setTimeout(d,100)),console.log("created_task"),h.check_status()},onClose:()=>t.setSelectedMedia(null)})}):null]}):null,children:[t.mediaOrdered.map(l=>b.jsx(BK,{hoverElements:b.jsx(b.Fragment,{children:b.jsxs($K,{children:[b.jsx(tt,{label:"Delete",className:"btn-outline-danger btn-sm",onClick:async()=>{await t.deleteMedia(l)}}),b.jsx(tt,{label:"LOG",className:"btn-outline-secondary btn-sm",onClick:async()=>{l.log()}}),b.jsx(JI,{items:t.tags,currentItem:"TAG",onPicked:c=>{l.toggleTag(c)}})]})}),children:b.jsxs(Fi,{mediaItem:l,height:n,onSelectMedia:c=>{t.setSelectedMedia(c)},children:[t.selectedMedia!=null&&t.selectedMedia!==l&&t.selectedMedia?.sourceImage!==l&&!t.selectedMedia?.generatedMedia.includes(l)&&r&&b.jsx(UK,{}),b.jsx(uv,{showOutline:t.selectedMedia==l,color:"#0a74ff",width:5}),b.jsx(uv,{showOutline:t.selectedMedia?.sourceImage==l,color:"#ff0ab565",width:5}),b.jsx(uv,{showOutline:t.selectedMedia?.generatedMedia.includes(l),color:"#fffb0a65",width:5}),b.jsx(FK,{mediaItem:l})]})},l.path)),b.jsx(dK,{width:100,height:n,onDrop:async l=>{await t.saveFiles(l)}})]})}))}),ho=He(function({workflowName:e,project:n,optionName:i,label:r,values:a}){const l=n?.workflows?.[e]?.[i];return b.jsx(ls,{value:l,options:a,label:r,onChange:c=>{n.updateWorkflow(e,i,c)}})}),HK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(ic,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo()},children:"Generate Video"}),b.jsx(ho,{project:e,workflowName:"generate_video_kling",optionName:"model",values:Object.values(Ie.options.img2video.model)}),b.jsx(ho,{project:e,workflowName:"generate_video_kling",optionName:"mode",label:"mode:",values:Object.values(Ie.options.img2video.mode)}),b.jsx(ho,{project:e,workflowName:"generate_video_kling",optionName:"duration",label:"Duration:",values:Object.values(Ie.options.img2video.duration)}),b.jsx(ho,{project:e,workflowName:"generate_video_kling",optionName:"sound",label:"Sound:",values:Object.values(Ie.options.img2video.sound)}),b.jsx(ms,{isLoading:t.is_submitting_video,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.shotJson,field:"video_prompt",fitHeight:!0}),b.jsx(Fi,{mediaItem:t.srcImage,height:400}),b.jsx(Fi,{mediaItem:t.end_frame,height:400}),b.jsx(oi,{mediaFolder:t.MediaFolder_results,label:"Source Image",itemHeight:300})]})})}),VK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(ic,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo_KlingMotionControl()},children:"Gen Motion Control Video"}),b.jsx(ho,{project:e,workflowName:"kling_motion_control",optionName:"character_orientation",label:"Orient:",values:Object.values(Ie.options.motion_control.character_orientation)}),b.jsx(ho,{project:e,workflowName:"kling_motion_control",optionName:"mode",label:"mode:",values:Object.values(Ie.options.motion_control.mode)}),b.jsx(ho,{project:e,workflowName:"kling_motion_control",optionName:"keep_original_sound",label:"Sound:",values:Object.values(Ie.options.motion_control.keep_original_sound)}),b.jsx(ms,{isLoading:t.is_submitting_video,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.shotJson,field:"video_prompt",fitHeight:!0}),b.jsx(Fi,{mediaItem:t.srcImage,height:400}),t.kling_motion_video&&b.jsx(jh,{localVideo:t.kling_motion_video,height:400}),b.jsx(oi,{mediaFolder:t.MediaFolder_results,label:"Source Image",itemHeight:300}),b.jsx(oi,{mediaFolder:t.MediaFolder_refVideo,label:"Motion Video",itemHeight:300})]})})}),zK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(ic,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.StylizeImage()},children:"Stylize Image"}),b.jsx(ho,{project:e,workflowName:"stylize_image_google",optionName:"model",values:n_}),b.jsx(ms,{isLoading:t.is_generating,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(Fi,{mediaItem:t.unreal_frame,height:300,children:b.jsx(ih,{label:"REFERENCE"})}),b.jsx(zt,{localJson:e.projinfo,field:"workflows/stylize_image_google/prompt",fitHeight:!0}),b.jsx(zt,{localJson:t.shotJson,field:"stylize_prompt",fitHeight:!0}),b.jsx(oi,{mediaFolder:t.MediaFolder_results,label:"pick reference Frame",itemHeight:300}),b.jsx(K_,{shot:t})]})})}),qK=He(({shot:t})=>{const e=t.scene.project;return b.jsx(ic,{className:"mb-2",buttons:b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{console.log("Generate Image"),t.GenerateImage()},children:"Generate Image"}),b.jsx(ho,{project:e,workflowName:"generate_shot_image",optionName:"model",values:n_}),b.jsx(ms,{isLoading:t.is_generating,asButton:!0})]}),content:b.jsxs(b.Fragment,{children:[b.jsx(zt,{localJson:t.shotJson,field:"prompt",fitHeight:!0}),b.jsx(K_,{shot:t})]})})}),jK=He(({shot:t})=>b.jsxs("div",{className:"mb-3",children:[b.jsxs("div",{className:"mb-3 d-flex gap-2",children:[b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.Kling_IdentyfiFace()},children:"Identify Face"}),b.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.Kling_LypSync()},children:"Lip Sync"}),b.jsx(ms,{isLoading:t.is_submitting_video,asButton:!0})]}),t.outVideo?b.jsx(jh,{localVideo:t.outVideo,height:400}):b.jsx("div",{className:"text-left text-muted my-3",children:"No OutVideo Selected"}),t.kling_face_id_data?.face_data?.length>0&&b.jsx("div",{className:"d-flex overflow-auto py-2",children:t.kling_face_id_data.face_data.map((e,n)=>b.jsxs("div",{className:"position-relative flex-shrink-0 me-3",children:[b.jsx("img",{src:e.face_image,alt:`Face ${n+1}`,className:"rounded",style:{width:"96px",height:"96px",objectFit:"cover"}}),b.jsxs("div",{className:"position-absolute top-0 start-50 translate-middle-x text-white text-center w-100",style:{textShadow:"1px 1px 2px black",fontSize:"0.75rem",lineHeight:"1rem"},children:["ID: ",e.face_id]}),b.jsxs("div",{className:"position-absolute bottom-0 start-50 translate-middle-x text-white text-center w-100",style:{textShadow:"1px 1px 2px black",fontSize:"0.75rem",lineHeight:"1rem"},children:[Math.floor(e.start_time/1e3),"s - ",Math.floor(e.end_time/1e3),"s"]})]},e.face_id||n))}),["ID-0","ID-1","ID-2"].map(e=>{const n=t.MediaFolder_Audio?.getFirstMediaWithTag(e);return n?b.jsxs("div",{className:"mb-3 text-left",children:[b.jsx("div",{className:"mb-1 fw-bold",children:e}),b.jsx(E1,{localAudio:n,width:500,height:100,autoPlay:!1})]},e):null}),b.jsx(oi,{mediaFolder:t.MediaFolder_genVideo,label:"Generated Videos"}),b.jsx(oi,{mediaFolder:t.MediaFolder_Audio,label:"Generated Audios"})]})),JK=He(({shot:t})=>{if(!t.shotJson)return b.jsx("div",{children:"Loading shot info..."});const e=async()=>{window.confirm(`Are you sure you want to delete shot "${t.name}"?`)&&await t.delete()};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[b.jsx("strong",{children:t.name}),b.jsxs("div",{className:"d-flex gap-2",children:[b.jsx(ls,{value:t.shotJson.getField("shot_type")||"shot_type",options:["simple shot","actor shot"],onChange:n=>{t.shotJson?.updateField("shot_type",n)}}),b.jsx(ls,{value:t.shotJson.getField("shot_state")||Object.keys(Bn.shot_states)[0],options:Object.keys(Bn.shot_states),onChange:n=>{t.shotJson?.updateField("shot_state",n)},colorMap:Bn.shot_states}),b.jsx(b1,{states:Bn.shot_states,value:t.shotJson.data?.shot_state||Object.keys(Bn.shot_states)[0],onChange:n=>{t.shotJson&&t.shotJson.updateField("shot_state",n)}}),b.jsx(tt,{onClick:()=>{t.log()},label:"Log Shot"}),b.jsx(tt,{onClick:e,label:"Delete Shot",className:"btn-outline-danger"})]})]}),b.jsx(dr,{tabs:{Generate_Image:b.jsx("div",{className:"card mb-2",children:b.jsxs("div",{className:"card-body",children:[b.jsx(zK,{shot:t}),b.jsx(qK,{shot:t}),b.jsx(oi,{mediaFolder:t.MediaFolder_results})]})}),Generate_VIDEO:b.jsxs(b.Fragment,{children:[b.jsx(HK,{shot:t}),b.jsx(VK,{shot:t}),b.jsx(qx,{shot:t}),b.jsx(oi,{mediaFolder:t.MediaFolder_genVideo})]}),LipSync:b.jsxs(b.Fragment,{children:[b.jsx(jK,{shot:t}),b.jsx(qx,{shot:t})]}),Output:b.jsxs(b.Fragment,{children:[b.jsx(oi,{mediaFolder:t.MediaFolder_genVideo}),b.jsx(oi,{mediaFolder:t.MediaFolder_results}),b.jsx(oi,{mediaFolder:t.MediaFolder_refVideo})]})}})]})}),KK=He(({scene:t})=>{const e=async()=>{const n=prompt("Enter new shot name:");if(!n)return;const i=await t.createShot(n);i&&t.selectShot(i)};return b.jsxs("div",{className:"d-flex flex-column gap-3",children:[b.jsx(aK,{initialHeight:200,children:b.jsxs("div",{className:"d-flex overflow-auto gap-2 h-100",children:[t.shots.map(n=>b.jsx(sK,{shot:n,isSelected:t.selectedShot===n,onClick:()=>{t.selectShot(n)}},n.name)),b.jsx("div",{className:"mt-2",children:b.jsx(tt,{label:"+ Add Shot",onClick:e})})]})}),b.jsxs("div",{children:[b.jsx(Uh,{onClick:()=>{t.generateAllShotImages()},label:"Generate ALL",is_loading:t.is_generating_all_shot_images}),b.jsx(tt,{label:"+ Add Shot",onClick:e}),b.jsx(tt,{label:"Export Resolve XML",onClick:()=>{t.createResolveXML()}})]}),t.selectedShot&&b.jsx(JK,{shot:t.selectedShot})]})}),YK=He(({project:t})=>{const e=t.scenes.flatMap(n=>n.shots.flatMap(i=>i.tasks.map(r=>r)));return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"TASK VIEW"}),b.jsx(tt,{label:"Delete Failed",onClick:()=>{for(const n of e)n.status=="failed"&&n.delete()}}),b.jsx(tt,{label:"Delete Succeed",onClick:()=>{for(const n of e)n.status=="succeed"&&n.delete()}}),b.jsx(tt,{label:"Check ALL Submitted",onClick:()=>{for(const n of e)(n.status=="submitted"||n.status=="processing")&&n.check_status()}}),b.jsx(tt,{label:"Notify ",onClick:()=>{Ai.add("Project loaded",Ai.types.success,{onClick:()=>{console.log("test"),t.setScene(t.scenes[3])}})}}),b.jsx(tt,{label:"Notify 2 ",onClick:()=>{Ai.add("Project loaded V2",Ai.types.error)}}),b.jsx(Ha,{label:`Tasks (${e.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:b.jsx("div",{className:"d-flex flex-column gap-0",children:e.map(n=>b.jsx(T1,{task:n,show_path:!0},n.id))})})]})}),XK=He(({project:t})=>{if(!t)return null;switch(t.currentView.type){case"settings":return b.jsx(L6,{project:t});case"script":return b.jsx(U6,{project:t});case"artbook":return t.artbook?b.jsx(B6,{artbook:t.artbook}):b.jsx("div",{children:"No Artbook found."});case"scene":if(!t.selectedScene)return null;const e=t.selectedScene;return b.jsxs("div",{children:[b.jsx("h2",{children:e.name}),b.jsx(dr,{tabs:{Scene:b.jsx(rK,{scene:e}),Shots:b.jsx(KK,{scene:e})}})]});case"taskview":return b.jsx(YK,{project:t});default:return null}}),WK={info:"alert-primary",success:"alert-success",warning:"alert-warning",error:"alert-danger"},QK=({notification:t})=>{const e=!!t.onClick,n=()=>{t.onClick?.()},i=r=>{r.stopPropagation(),Ai.remove(t.id)};return b.jsxs("div",{className:`alert ${WK[t.type]} shadow-sm d-flex align-items-center mb-1 p-1`,role:"alert",onClick:e?n:void 0,style:{cursor:e?"pointer":"default",paddingRight:"2.5rem",userSelect:"none"},children:[b.jsxs("div",{className:"d-flex align-items-center flex-grow-1",children:[b.jsx("span",{className:"me-1",children:t.message}),t.media&&b.jsx(C1,{media:t.media,hoverPosition:"top",inlinePreviewHeight:25})]}),b.jsx("button",{type:"button",className:"btn-close ms-3","aria-label":"Close",onClick:i})]})},ZK=He(()=>{const[t,e]=E.useState(!1),n=Ai.notifications.length;return b.jsxs("div",{style:{position:"fixed",bottom:16,left:16,zIndex:9999,maxWidth:700,pointerEvents:"none"},children:[!t&&n>0&&b.jsx("div",{className:"d-flex flex-column gap-0",style:{pointerEvents:"auto"},children:Ai.notifications.map(i=>b.jsx(QK,{notification:i},i.id))}),b.jsxs("div",{className:"d-flex gap-1 mt-2 justify-content-start",style:{pointerEvents:"auto"},children:[b.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>e(i=>!i),children:["Notifications (",n,")"]}),!t&&n>0&&b.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Ai.clear(),children:["Clear (",n,")"]})]})]})}),eY=He(()=>{const[t,e]=E.useState(null),n=E.useRef(new M6),i=async()=>{try{const a=await window.showDirectoryPicker(),l=new Yg(a,n.current);await l.loadFromFolder(a),e(l)}catch(a){console.error(a)}},r=async a=>{let l=await a.queryPermission({mode:"readwrite"});if(l!=="granted"&&(l=await a.requestPermission({mode:"readwrite"})),l==="granted"){const c=new Yg(a,n.current);await c.loadFromFolder(a),e(c)}};return E.useEffect(()=>{(async()=>{if(await n.current.load(),n.current.data.lastOpenedFolder){const l=n.current.data.lastOpenedFolder;let c=await l.queryPermission({mode:"readwrite"});if(c!=="granted"&&(c=await l.requestPermission({mode:"readwrite"})),c==="granted"){const h=new Yg(l,n.current);await h.loadFromFolder(l),e(h)}}})()},[]),b.jsxs("div",{style:{minHeight:"100vh"},children:[b.jsx(D6,{onOpenFolder:i,recentFolders:n.current.data.recentFolders,onOpenRecent:r,project:t}),b.jsxs("div",{className:"d-flex",style:{height:"calc(100vh - 56px)",overflow:"hidden"},children:[b.jsx(P6,{project:t}),b.jsx("div",{className:"flex-grow-1 d-flex flex-column overflow-hidden",children:b.jsx("div",{className:"flex-grow-1 overflow-auto p-3",children:b.jsx(XK,{project:t})})})]}),b.jsx(ZK,{})]})}),tY=E.createContext(void 0),nY=({children:t})=>{const[e,n]=E.useState(null);return b.jsx(tY.Provider,{value:{contentArea:e,setContentArea:n},children:t})};pP.createRoot(document.getElementById("root")).render(b.jsx(E.StrictMode,{children:b.jsx(nY,{children:b.jsx(eY,{})})}));
