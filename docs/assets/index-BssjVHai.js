function LP(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(o,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function _u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zm={exports:{}},Nl={};var Nb;function UP(){if(Nb)return Nl;Nb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:o,key:u,ref:r!==void 0?r:null,props:a}}return Nl.Fragment=e,Nl.jsx=n,Nl.jsxs=n,Nl}var Ib;function BP(){return Ib||(Ib=1,zm.exports=UP()),zm.exports}var w=BP(),qm={exports:{}},Ae={};var Db;function FP(){if(Db)return Ae;Db=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function E(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function M(k,Y,se){this.props=k,this.context=Y,this.refs=x,this.updater=se||C}M.prototype.isReactComponent={},M.prototype.setState=function(k,Y){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Y,"setState")},M.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function I(){}I.prototype=M.prototype;function N(k,Y,se){this.props=k,this.context=Y,this.refs=x,this.updater=se||C}var D=N.prototype=new I;D.constructor=N,A(D,M.prototype),D.isPureReactComponent=!0;var L=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function J(k,Y,se){var le=se.ref;return{$$typeof:t,type:k,key:Y,ref:le!==void 0?le:null,props:se}}function j(k,Y){return J(k.type,Y,k.props)}function W(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function re(k){var Y={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(se){return Y[se]})}var oe=/\/+/g;function ae(k,Y){return typeof k=="object"&&k!==null&&k.key!=null?re(""+k.key):Y.toString(36)}function de(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(U,U):(k.status="pending",k.then(function(Y){k.status==="pending"&&(k.status="fulfilled",k.value=Y)},function(Y){k.status==="pending"&&(k.status="rejected",k.reason=Y)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function F(k,Y,se,le,me){var Ee=typeof k;(Ee==="undefined"||Ee==="boolean")&&(k=null);var ve=!1;if(k===null)ve=!0;else switch(Ee){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(k.$$typeof){case t:case e:ve=!0;break;case m:return ve=k._init,F(ve(k._payload),Y,se,le,me)}}if(ve)return me=me(k),ve=le===""?"."+ae(k,0):le,L(me)?(se="",ve!=null&&(se=ve.replace(oe,"$&/")+"/"),F(me,Y,se,"",function(on){return on})):me!=null&&(W(me)&&(me=j(me,se+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(oe,"$&/")+"/")+ve)),Y.push(me)),1;ve=0;var ze=le===""?".":le+":";if(L(k))for(var qe=0;qe<k.length;qe++)le=k[qe],Ee=ze+ae(le,qe),ve+=F(le,Y,se,Ee,me);else if(qe=E(k),typeof qe=="function")for(k=qe.call(k),qe=0;!(le=k.next()).done;)le=le.value,Ee=ze+ae(le,qe++),ve+=F(le,Y,se,Ee,me);else if(Ee==="object"){if(typeof k.then=="function")return F(de(k),Y,se,le,me);throw Y=String(k),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ve}function Q(k,Y,se){if(k==null)return k;var le=[],me=0;return F(k,le,"","",function(Ee){return Y.call(se,Ee,me++)}),le}function ee(k){if(k._status===-1){var Y=k._result;Y=Y(),Y.then(function(se){(k._status===0||k._status===-1)&&(k._status=1,k._result=se)},function(se){(k._status===0||k._status===-1)&&(k._status=2,k._result=se)}),k._status===-1&&(k._status=0,k._result=Y)}if(k._status===1)return k._result.default;throw k._result}var ne=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},ce={map:Q,forEach:function(k,Y,se){Q(k,function(){Y.apply(this,arguments)},se)},count:function(k){var Y=0;return Q(k,function(){Y++}),Y},toArray:function(k){return Q(k,function(Y){return Y})||[]},only:function(k){if(!W(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ae.Activity=y,Ae.Children=ce,Ae.Component=M,Ae.Fragment=n,Ae.Profiler=r,Ae.PureComponent=N,Ae.StrictMode=o,Ae.Suspense=h,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(k){return O.H.useMemoCache(k)}},Ae.cache=function(k){return function(){return k.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(k,Y,se){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=A({},k.props),me=k.key;if(Y!=null)for(Ee in Y.key!==void 0&&(me=""+Y.key),Y)!q.call(Y,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Y.ref===void 0||(le[Ee]=Y[Ee]);var Ee=arguments.length-2;if(Ee===1)le.children=se;else if(1<Ee){for(var ve=Array(Ee),ze=0;ze<Ee;ze++)ve[ze]=arguments[ze+2];le.children=ve}return J(k.type,me,le)},Ae.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:a,_context:k},k},Ae.createElement=function(k,Y,se){var le,me={},Ee=null;if(Y!=null)for(le in Y.key!==void 0&&(Ee=""+Y.key),Y)q.call(Y,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=Y[le]);var ve=arguments.length-2;if(ve===1)me.children=se;else if(1<ve){for(var ze=Array(ve),qe=0;qe<ve;qe++)ze[qe]=arguments[qe+2];me.children=ze}if(k&&k.defaultProps)for(le in ve=k.defaultProps,ve)me[le]===void 0&&(me[le]=ve[le]);return J(k,Ee,me)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(k){return{$$typeof:c,render:k}},Ae.isValidElement=W,Ae.lazy=function(k){return{$$typeof:m,_payload:{_status:-1,_result:k},_init:ee}},Ae.memo=function(k,Y){return{$$typeof:d,type:k,compare:Y===void 0?null:Y}},Ae.startTransition=function(k){var Y=O.T,se={};O.T=se;try{var le=k(),me=O.S;me!==null&&me(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(U,ne)}catch(Ee){ne(Ee)}finally{Y!==null&&se.types!==null&&(Y.types=se.types),O.T=Y}},Ae.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ae.use=function(k){return O.H.use(k)},Ae.useActionState=function(k,Y,se){return O.H.useActionState(k,Y,se)},Ae.useCallback=function(k,Y){return O.H.useCallback(k,Y)},Ae.useContext=function(k){return O.H.useContext(k)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(k,Y){return O.H.useDeferredValue(k,Y)},Ae.useEffect=function(k,Y){return O.H.useEffect(k,Y)},Ae.useEffectEvent=function(k){return O.H.useEffectEvent(k)},Ae.useId=function(){return O.H.useId()},Ae.useImperativeHandle=function(k,Y,se){return O.H.useImperativeHandle(k,Y,se)},Ae.useInsertionEffect=function(k,Y){return O.H.useInsertionEffect(k,Y)},Ae.useLayoutEffect=function(k,Y){return O.H.useLayoutEffect(k,Y)},Ae.useMemo=function(k,Y){return O.H.useMemo(k,Y)},Ae.useOptimistic=function(k,Y){return O.H.useOptimistic(k,Y)},Ae.useReducer=function(k,Y,se){return O.H.useReducer(k,Y,se)},Ae.useRef=function(k){return O.H.useRef(k)},Ae.useState=function(k){return O.H.useState(k)},Ae.useSyncExternalStore=function(k,Y,se){return O.H.useSyncExternalStore(k,Y,se)},Ae.useTransition=function(){return O.H.useTransition()},Ae.version="19.2.1",Ae}var Ob;function zd(){return Ob||(Ob=1,qm.exports=FP()),qm.exports}var T=zd();const et=_u(T),UA=LP({__proto__:null,default:et},[T]);var Jm={exports:{}},Il={},Km={exports:{}},Ym={};var Pb;function HP(){return Pb||(Pb=1,(function(t){function e(F,Q){var ee=F.length;F.push(Q);e:for(;0<ee;){var ne=ee-1>>>1,ce=F[ne];if(0<r(ce,Q))F[ne]=Q,F[ee]=ce,ee=ne;else break e}}function n(F){return F.length===0?null:F[0]}function o(F){if(F.length===0)return null;var Q=F[0],ee=F.pop();if(ee!==Q){F[0]=ee;e:for(var ne=0,ce=F.length,k=ce>>>1;ne<k;){var Y=2*(ne+1)-1,se=F[Y],le=Y+1,me=F[le];if(0>r(se,ee))le<ce&&0>r(me,se)?(F[ne]=me,F[le]=ee,ne=le):(F[ne]=se,F[Y]=ee,ne=Y);else if(le<ce&&0>r(me,ee))F[ne]=me,F[le]=ee,ne=le;else break e}}return Q}function r(F,Q){var ee=F.sortIndex-Q.sortIndex;return ee!==0?ee:F.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var h=[],d=[],m=1,y=null,S=3,E=!1,C=!1,A=!1,x=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var Q=n(d);Q!==null;){if(Q.callback===null)o(d);else if(Q.startTime<=F)o(d),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=n(d)}}function L(F){if(A=!1,D(F),!C)if(n(h)!==null)C=!0,U||(U=!0,re());else{var Q=n(d);Q!==null&&de(L,Q.startTime-F)}}var U=!1,O=-1,q=5,J=-1;function j(){return x?!0:!(t.unstable_now()-J<q)}function W(){if(x=!1,U){var F=t.unstable_now();J=F;var Q=!0;try{e:{C=!1,A&&(A=!1,I(O),O=-1),E=!0;var ee=S;try{t:{for(D(F),y=n(h);y!==null&&!(y.expirationTime>F&&j());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,S=y.priorityLevel;var ce=ne(y.expirationTime<=F);if(F=t.unstable_now(),typeof ce=="function"){y.callback=ce,D(F),Q=!0;break t}y===n(h)&&o(h),D(F)}else o(h);y=n(h)}if(y!==null)Q=!0;else{var k=n(d);k!==null&&de(L,k.startTime-F),Q=!1}}break e}finally{y=null,S=ee,E=!1}Q=void 0}}finally{Q?re():U=!1}}}var re;if(typeof N=="function")re=function(){N(W)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ae=oe.port2;oe.port1.onmessage=W,re=function(){ae.postMessage(null)}}else re=function(){M(W,0)};function de(F,Q){O=M(function(){F(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(F){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ee=S;S=Q;try{return F()}finally{S=ee}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=S;S=F;try{return Q()}finally{S=ee}},t.unstable_scheduleCallback=function(F,Q,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,F){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,F={id:m++,callback:Q,priorityLevel:F,startTime:ee,expirationTime:ce,sortIndex:-1},ee>ne?(F.sortIndex=ee,e(d,F),n(h)===null&&F===n(d)&&(A?(I(O),O=-1):A=!0,de(L,ee-ne))):(F.sortIndex=ce,e(h,F),C||E||(C=!0,U||(U=!0,re()))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var Q=S;return function(){var ee=S;S=Q;try{return F.apply(this,arguments)}finally{S=ee}}}})(Ym)),Ym}var kb;function $P(){return kb||(kb=1,Km.exports=HP()),Km.exports}var jm={exports:{}},kt={};var Lb;function GP(){if(Lb)return kt;Lb=1;var t=zd();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:d,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,kt.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,m)},kt.flushSync=function(h){var d=u.T,m=o.p;try{if(u.T=null,o.p=2,h)return h()}finally{u.T=d,o.p=m,o.d.f()}},kt.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,o.d.C(h,d))},kt.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},kt.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),S=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?o.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:E}):m==="script"&&o.d.X(h,{crossOrigin:y,integrity:S,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kt.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);o.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&o.d.M(h)},kt.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);o.d.L(h,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kt.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);o.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else o.d.m(h)},kt.requestFormReset=function(h){o.d.r(h)},kt.unstable_batchedUpdates=function(h,d){return h(d)},kt.useFormState=function(h,d,m){return u.H.useFormState(h,d,m)},kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},kt.version="19.2.1",kt}var Ub;function BA(){if(Ub)return jm.exports;Ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jm.exports=GP(),jm.exports}var Bb;function VP(){if(Bb)return Il;Bb=1;var t=$P(),e=zd(),n=BA();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(o(188))}function d(i){var s=i.alternate;if(!s){if(s=a(i),s===null)throw Error(o(188));return s!==i?null:i}for(var l=i,f=s;;){var v=l.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===l)return h(v),i;if(_===f)return h(v),s;_=_.sibling}throw Error(o(188))}if(l.return!==f.return)l=v,f=_;else{for(var b=!1,R=v.child;R;){if(R===l){b=!0,l=v,f=_;break}if(R===f){b=!0,f=v,l=_;break}R=R.sibling}if(!b){for(R=_.child;R;){if(R===l){b=!0,l=_,f=v;break}if(R===f){b=!0,f=_,l=v;break}R=R.sibling}if(!b)throw Error(o(189))}}if(l.alternate!==f)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Symbol.for("react.client.reference");function ae(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===oe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case M:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case U:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case N:return i.displayName||"Context";case I:return(i._context.displayName||"Context")+".Consumer";case D:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return s=i.displayName||null,s!==null?s:ae(i.type)||"Memo";case q:s=i._payload,i=i._init;try{return ae(i(s))}catch{}}return null}var de=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ne=[],ce=-1;function k(i){return{current:i}}function Y(i){0>ce||(i.current=ne[ce],ne[ce]=null,ce--)}function se(i,s){ce++,ne[ce]=i.current,i.current=s}var le=k(null),me=k(null),Ee=k(null),ve=k(null);function ze(i,s){switch(se(Ee,s),se(me,i),se(le,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?ZE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=ZE(s),i=eb(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(le),se(le,i)}function qe(){Y(le),Y(me),Y(Ee)}function on(i){i.memoizedState!==null&&se(ve,i);var s=le.current,l=eb(s,i.type);s!==l&&(se(me,i),se(le,l))}function wn(i){me.current===i&&(Y(le),Y(me)),ve.current===i&&(Y(ve),Al._currentValue=ee)}var ho,zt;function qt(i){if(ho===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);ho=s&&s[1]||"",zt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ho+i+zt}var Qe=!1;function ko(i,s){if(!i||Qe)return"";Qe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var z=K}Reflect.construct(i,[],te)}else{try{te.call()}catch(K){z=K}i.call(te.prototype)}}else{try{throw Error()}catch(K){z=K}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&z&&typeof K.stack=="string")return[K.stack,z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),b=_[0],R=_[1];if(b&&R){var P=b.split(`
`),G=R.split(`
`);for(v=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;v<G.length&&!G[v].includes("DetermineComponentFrameRoot");)v++;if(f===P.length||v===G.length)for(f=P.length-1,v=G.length-1;1<=f&&0<=v&&P[f]!==G[v];)v--;for(;1<=f&&0<=v;f--,v--)if(P[f]!==G[v]){if(f!==1||v!==1)do if(f--,v--,0>v||P[f]!==G[v]){var X=`
`+P[f].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=f&&0<=v);break}}}finally{Qe=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?qt(l):""}function _i(i,s){switch(i.tag){case 26:case 27:case 5:return qt(i.type);case 16:return qt("Lazy");case 13:return i.child!==s&&s!==null?qt("Suspense Fallback"):qt("Suspense");case 19:return qt("SuspenseList");case 0:case 15:return ko(i.type,!1);case 11:return ko(i.type.render,!1);case 1:return ko(i.type,!0);case 31:return qt("Activity");default:return""}}function Ku(i){try{var s="",l=null;do s+=_i(i,l),l=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var ka=Object.prototype.hasOwnProperty,Kn=t.unstable_scheduleCallback,Si=t.unstable_cancelCallback,Yu=t.unstable_shouldYield,ju=t.unstable_requestPaint,At=t.unstable_now,Xu=t.unstable_getCurrentPriorityLevel,La=t.unstable_ImmediatePriority,Ua=t.unstable_UserBlockingPriority,fr=t.unstable_NormalPriority,vO=t.unstable_LowPriority,O_=t.unstable_IdlePriority,yO=t.log,_O=t.unstable_setDisableYieldValue,Ba=null,rn=null;function Ei(i){if(typeof yO=="function"&&_O(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Ba,i)}catch{}}var sn=Math.clz32?Math.clz32:bO,SO=Math.log,EO=Math.LN2;function bO(i){return i>>>=0,i===0?32:31-(SO(i)/EO|0)|0}var Wu=256,Qu=262144,Zu=4194304;function dr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ec(i,s,l){var f=i.pendingLanes;if(f===0)return 0;var v=0,_=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var R=f&134217727;return R!==0?(f=R&~_,f!==0?v=dr(f):(b&=R,b!==0?v=dr(b):l||(l=R&~i,l!==0&&(v=dr(l))))):(R=f&~_,R!==0?v=dr(R):b!==0?v=dr(b):l||(l=f&~i,l!==0&&(v=dr(l)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:v}function Fa(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function wO(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P_(){var i=Zu;return Zu<<=1,(Zu&62914560)===0&&(Zu=4194304),i}function Dh(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Ha(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function TO(i,s,l,f,v,_){var b=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,P=i.expirationTimes,G=i.hiddenUpdates;for(l=b&~l;0<l;){var X=31-sn(l),te=1<<X;R[X]=0,P[X]=-1;var z=G[X];if(z!==null)for(G[X]=null,X=0;X<z.length;X++){var K=z[X];K!==null&&(K.lane&=-536870913)}l&=~te}f!==0&&k_(i,f,0),_!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=_&~(b&~s))}function k_(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-sn(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|l&261930}function L_(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var f=31-sn(l),v=1<<f;v&s|i[f]&s&&(i[f]|=s),l&=~v}}function U_(i,s){var l=s&-s;return l=(l&42)!==0?1:Oh(l),(l&(i.suspendedLanes|s))!==0?0:l}function Oh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ph(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function B_(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:wb(i.type))}function F_(i,s){var l=Q.p;try{return Q.p=i,s()}finally{Q.p=l}}var bi=Math.random().toString(36).slice(2),xt="__reactFiber$"+bi,Jt="__reactProps$"+bi,is="__reactContainer$"+bi,kh="__reactEvents$"+bi,CO="__reactListeners$"+bi,AO="__reactHandles$"+bi,H_="__reactResources$"+bi,$a="__reactMarker$"+bi;function Lh(i){delete i[xt],delete i[Jt],delete i[kh],delete i[CO],delete i[AO]}function rs(i){var s=i[xt];if(s)return s;for(var l=i.parentNode;l;){if(s=l[is]||l[xt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=ab(i);i!==null;){if(l=i[xt])return l;i=ab(i)}return s}i=l,l=i.parentNode}return null}function ss(i){if(i=i[xt]||i[is]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Ga(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function as(i){var s=i[H_];return s||(s=i[H_]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(i){i[$a]=!0}var $_=new Set,G_={};function hr(i,s){ls(i,s),ls(i+"Capture",s)}function ls(i,s){for(G_[i]=s,i=0;i<s.length;i++)$_.add(s[i])}var xO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),V_={},z_={};function RO(i){return ka.call(z_,i)?!0:ka.call(V_,i)?!1:xO.test(i)?z_[i]=!0:(V_[i]=!0,!1)}function tc(i,s,l){if(RO(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function nc(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function Lo(i,s,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+f)}}function Tn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function q_(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function MO(i,s,l){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return v.call(this)},set:function(b){l=""+b,_.call(this,b)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Uh(i){if(!i._valueTracker){var s=q_(i)?"checked":"value";i._valueTracker=MO(i,s,""+i[s])}}function J_(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),f="";return i&&(f=q_(i)?i.checked?"true":"false":i.value),i=f,i!==l?(s.setValue(i),!0):!1}function oc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var NO=/[\n"\\]/g;function Cn(i){return i.replace(NO,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Bh(i,s,l,f,v,_,b,R){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),s!=null?b==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Tn(s)):i.value!==""+Tn(s)&&(i.value=""+Tn(s)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),s!=null?Fh(i,b,Tn(s)):l!=null?Fh(i,b,Tn(l)):f!=null&&i.removeAttribute("value"),v==null&&_!=null&&(i.defaultChecked=!!_),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Tn(R):i.removeAttribute("name")}function K_(i,s,l,f,v,_,b,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Uh(i);return}l=l!=null?""+Tn(l):"",s=s!=null?""+Tn(s):l,R||s===i.value||(i.value=s),i.defaultValue=s}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=R?i.checked:!!f,i.defaultChecked=!!f,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),Uh(i)}function Fh(i,s,l){s==="number"&&oc(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function us(i,s,l,f){if(i=i.options,s){s={};for(var v=0;v<l.length;v++)s["$"+l[v]]=!0;for(l=0;l<i.length;l++)v=s.hasOwnProperty("$"+i[l].value),i[l].selected!==v&&(i[l].selected=v),v&&f&&(i[l].defaultSelected=!0)}else{for(l=""+Tn(l),s=null,v=0;v<i.length;v++){if(i[v].value===l){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}s!==null||i[v].disabled||(s=i[v])}s!==null&&(s.selected=!0)}}function Y_(i,s,l){if(s!=null&&(s=""+Tn(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+Tn(l):""}function j_(i,s,l,f){if(s==null){if(f!=null){if(l!=null)throw Error(o(92));if(de(f)){if(1<f.length)throw Error(o(93));f=f[0]}l=f}l==null&&(l=""),s=l}l=Tn(s),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f),Uh(i)}function cs(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var IO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function X_(i,s,l){var f=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,l):typeof l!="number"||l===0||IO.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function W_(i,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var v in s)f=s[v],s.hasOwnProperty(v)&&l[v]!==f&&X_(i,v,f)}else for(var _ in s)s.hasOwnProperty(_)&&X_(i,_,s[_])}function Hh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ic(i){return OO.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Uo(){}var $h=null;function Gh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fs=null,ds=null;function Q_(i){var s=ss(i);if(s&&(i=s.stateNode)){var l=i[Jt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Bh(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Cn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var f=l[s];if(f!==i&&f.form===i.form){var v=f[Jt]||null;if(!v)throw Error(o(90));Bh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<l.length;s++)f=l[s],f.form===i.form&&J_(f)}break e;case"textarea":Y_(i,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&us(i,!!l.multiple,s,!1)}}}var Vh=!1;function Z_(i,s,l){if(Vh)return i(s,l);Vh=!0;try{var f=i(s);return f}finally{if(Vh=!1,(fs!==null||ds!==null)&&(qc(),fs&&(s=fs,i=ds,ds=fs=null,Q_(s),i)))for(s=0;s<i.length;s++)Q_(i[s])}}function Va(i,s){var l=i.stateNode;if(l===null)return null;var f=l[Jt]||null;if(f===null)return null;l=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=!1;if(Bo)try{var za={};Object.defineProperty(za,"passive",{get:function(){zh=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{zh=!1}var wi=null,qh=null,rc=null;function e0(){if(rc)return rc;var i,s=qh,l=s.length,f,v="value"in wi?wi.value:wi.textContent,_=v.length;for(i=0;i<l&&s[i]===v[i];i++);var b=l-i;for(f=1;f<=b&&s[l-f]===v[_-f];f++);return rc=v.slice(i,1<f?1-f:void 0)}function sc(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ac(){return!0}function t0(){return!1}function Kt(i){function s(l,f,v,_,b){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ac:t0,this.isPropagationStopped=t0,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),s}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Kt(pr),qa=y({},pr,{view:0,detail:0}),PO=Kt(qa),Jh,Kh,Ja,uc=y({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ja&&(Ja&&i.type==="mousemove"?(Jh=i.screenX-Ja.screenX,Kh=i.screenY-Ja.screenY):Kh=Jh=0,Ja=i),Jh)},movementY:function(i){return"movementY"in i?i.movementY:Kh}}),n0=Kt(uc),kO=y({},uc,{dataTransfer:0}),LO=Kt(kO),UO=y({},qa,{relatedTarget:0}),Yh=Kt(UO),BO=y({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),FO=Kt(BO),HO=y({},pr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$O=Kt(HO),GO=y({},pr,{data:0}),o0=Kt(GO),VO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JO(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=qO[i])?!!s[i]:!1}function jh(){return JO}var KO=y({},qa,{key:function(i){if(i.key){var s=VO[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=sc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?zO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(i){return i.type==="keypress"?sc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?sc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),YO=Kt(KO),jO=y({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i0=Kt(jO),XO=y({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),WO=Kt(XO),QO=y({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZO=Kt(QO),e1=y({},uc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),t1=Kt(e1),n1=y({},pr,{newState:0,oldState:0}),o1=Kt(n1),i1=[9,13,27,32],Xh=Bo&&"CompositionEvent"in window,Ka=null;Bo&&"documentMode"in document&&(Ka=document.documentMode);var r1=Bo&&"TextEvent"in window&&!Ka,r0=Bo&&(!Xh||Ka&&8<Ka&&11>=Ka),s0=" ",a0=!1;function l0(i,s){switch(i){case"keyup":return i1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var hs=!1;function s1(i,s){switch(i){case"compositionend":return u0(s);case"keypress":return s.which!==32?null:(a0=!0,s0);case"textInput":return i=s.data,i===s0&&a0?null:i;default:return null}}function a1(i,s){if(hs)return i==="compositionend"||!Xh&&l0(i,s)?(i=e0(),rc=qh=wi=null,hs=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return r0&&s.locale!=="ko"?null:s.data;default:return null}}var l1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!l1[i.type]:s==="textarea"}function f0(i,s,l,f){fs?ds?ds.push(f):ds=[f]:fs=f,s=Qc(s,"onChange"),0<s.length&&(l=new lc("onChange","change",null,l,f),i.push({event:l,listeners:s}))}var Ya=null,ja=null;function u1(i){KE(i,0)}function cc(i){var s=Ga(i);if(J_(s))return i}function d0(i,s){if(i==="change")return s}var h0=!1;if(Bo){var Wh;if(Bo){var Qh="oninput"in document;if(!Qh){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),Qh=typeof p0.oninput=="function"}Wh=Qh}else Wh=!1;h0=Wh&&(!document.documentMode||9<document.documentMode)}function m0(){Ya&&(Ya.detachEvent("onpropertychange",g0),ja=Ya=null)}function g0(i){if(i.propertyName==="value"&&cc(ja)){var s=[];f0(s,ja,i,Gh(i)),Z_(u1,s)}}function c1(i,s,l){i==="focusin"?(m0(),Ya=s,ja=l,Ya.attachEvent("onpropertychange",g0)):i==="focusout"&&m0()}function f1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return cc(ja)}function d1(i,s){if(i==="click")return cc(s)}function h1(i,s){if(i==="input"||i==="change")return cc(s)}function p1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var an=typeof Object.is=="function"?Object.is:p1;function Xa(i,s){if(an(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),f=Object.keys(s);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!ka.call(s,v)||!an(i[v],s[v]))return!1}return!0}function v0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function y0(i,s){var l=v0(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=s&&f>=s)return{node:l,offset:s-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=v0(l)}}function _0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?_0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function S0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=oc(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=oc(i.document)}return s}function Zh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var m1=Bo&&"documentMode"in document&&11>=document.documentMode,ps=null,ep=null,Wa=null,tp=!1;function E0(i,s,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;tp||ps==null||ps!==oc(f)||(f=ps,"selectionStart"in f&&Zh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Wa&&Xa(Wa,f)||(Wa=f,f=Qc(ep,"onSelect"),0<f.length&&(s=new lc("onSelect","select",null,s,l),i.push({event:s,listeners:f}),s.target=ps)))}function mr(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var ms={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},np={},b0={};Bo&&(b0=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function gr(i){if(np[i])return np[i];if(!ms[i])return i;var s=ms[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in b0)return np[i]=s[l];return i}var w0=gr("animationend"),T0=gr("animationiteration"),C0=gr("animationstart"),g1=gr("transitionrun"),v1=gr("transitionstart"),y1=gr("transitioncancel"),A0=gr("transitionend"),x0=new Map,op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");op.push("scrollEnd");function Yn(i,s){x0.set(i,s),hr(s,[i])}var fc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},An=[],gs=0,ip=0;function dc(){for(var i=gs,s=ip=gs=0;s<i;){var l=An[s];An[s++]=null;var f=An[s];An[s++]=null;var v=An[s];An[s++]=null;var _=An[s];if(An[s++]=null,f!==null&&v!==null){var b=f.pending;b===null?v.next=v:(v.next=b.next,b.next=v),f.pending=v}_!==0&&R0(l,v,_)}}function hc(i,s,l,f){An[gs++]=i,An[gs++]=s,An[gs++]=l,An[gs++]=f,ip|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function rp(i,s,l,f){return hc(i,s,l,f),pc(i)}function vr(i,s){return hc(i,null,null,s),pc(i)}function R0(i,s,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var v=!1,_=i.return;_!==null;)_.childLanes|=l,f=_.alternate,f!==null&&(f.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(v=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,v&&s!==null&&(v=31-sn(l),i=_.hiddenUpdates,f=i[v],f===null?i[v]=[s]:f.push(s),s.lane=l|536870912),_):null}function pc(i){if(50<_l)throw _l=0,pm=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var vs={};function _1(i,s,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(i,s,l,f){return new _1(i,s,l,f)}function sp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Fo(i,s){var l=i.alternate;return l===null?(l=ln(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function M0(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function mc(i,s,l,f,v,_){var b=0;if(f=i,typeof i=="function")sp(i)&&(b=1);else if(typeof i=="string")b=TP(i,l,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case J:return i=ln(31,l,s,v),i.elementType=J,i.lanes=_,i;case A:return yr(l.children,v,_,s);case x:b=8,v|=24;break;case M:return i=ln(12,l,s,v|2),i.elementType=M,i.lanes=_,i;case L:return i=ln(13,l,s,v),i.elementType=L,i.lanes=_,i;case U:return i=ln(19,l,s,v),i.elementType=U,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:b=10;break e;case I:b=9;break e;case D:b=11;break e;case O:b=14;break e;case q:b=16,f=null;break e}b=29,l=Error(o(130,i===null?"null":typeof i,"")),f=null}return s=ln(b,l,s,v),s.elementType=i,s.type=f,s.lanes=_,s}function yr(i,s,l,f){return i=ln(7,i,f,s),i.lanes=l,i}function ap(i,s,l){return i=ln(6,i,null,s),i.lanes=l,i}function N0(i){var s=ln(18,null,null,0);return s.stateNode=i,s}function lp(i,s,l){return s=ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var I0=new WeakMap;function xn(i,s){if(typeof i=="object"&&i!==null){var l=I0.get(i);return l!==void 0?l:(s={value:i,source:s,stack:Ku(s)},I0.set(i,s),s)}return{value:i,source:s,stack:Ku(s)}}var ys=[],_s=0,gc=null,Qa=0,Rn=[],Mn=0,Ti=null,po=1,mo="";function Ho(i,s){ys[_s++]=Qa,ys[_s++]=gc,gc=i,Qa=s}function D0(i,s,l){Rn[Mn++]=po,Rn[Mn++]=mo,Rn[Mn++]=Ti,Ti=i;var f=po;i=mo;var v=32-sn(f)-1;f&=~(1<<v),l+=1;var _=32-sn(s)+v;if(30<_){var b=v-v%5;_=(f&(1<<b)-1).toString(32),f>>=b,v-=b,po=1<<32-sn(s)+v|l<<v|f,mo=_+i}else po=1<<_|l<<v|f,mo=i}function up(i){i.return!==null&&(Ho(i,1),D0(i,1,0))}function cp(i){for(;i===gc;)gc=ys[--_s],ys[_s]=null,Qa=ys[--_s],ys[_s]=null;for(;i===Ti;)Ti=Rn[--Mn],Rn[Mn]=null,mo=Rn[--Mn],Rn[Mn]=null,po=Rn[--Mn],Rn[Mn]=null}function O0(i,s){Rn[Mn++]=po,Rn[Mn++]=mo,Rn[Mn++]=Ti,po=s.id,mo=s.overflow,Ti=i}var Rt=null,nt=null,Le=!1,Ci=null,Nn=!1,fp=Error(o(519));function Ai(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Za(xn(s,i)),fp}function P0(i){var s=i.stateNode,l=i.type,f=i.memoizedProps;switch(s[xt]=i,s[Jt]=f,l){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(l=0;l<El.length;l++)Oe(El[l],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),K_(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),j_(s,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||f.suppressHydrationWarning===!0||WE(s.textContent,l)?(f.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),f.onScroll!=null&&Oe("scroll",s),f.onScrollEnd!=null&&Oe("scrollend",s),f.onClick!=null&&(s.onclick=Uo),s=!0):s=!1,s||Ai(i,!0)}function k0(i){for(Rt=i.return;Rt;)switch(Rt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Rt=Rt.return}}function Ss(i){if(i!==Rt)return!1;if(!Le)return k0(i),Le=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Mm(i.type,i.memoizedProps)),l=!l),l&&nt&&Ai(i),k0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));nt=sb(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));nt=sb(i)}else s===27?(s=nt,Hi(i.type)?(i=Pm,Pm=null,nt=i):nt=s):nt=Rt?Dn(i.stateNode.nextSibling):null;return!0}function _r(){nt=Rt=null,Le=!1}function dp(){var i=Ci;return i!==null&&(Wt===null?Wt=i:Wt.push.apply(Wt,i),Ci=null),i}function Za(i){Ci===null?Ci=[i]:Ci.push(i)}var hp=k(null),Sr=null,$o=null;function xi(i,s,l){se(hp,s._currentValue),s._currentValue=l}function Go(i){i._currentValue=hp.current,Y(hp)}function pp(i,s,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===l)break;i=i.return}}function mp(i,s,l,f){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var _=v.dependencies;if(_!==null){var b=v.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=v;for(var P=0;P<s.length;P++)if(R.context===s[P]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),pp(_.return,l,i),f||(b=null);break e}_=R.next}}else if(v.tag===18){if(b=v.return,b===null)throw Error(o(341));b.lanes|=l,_=b.alternate,_!==null&&(_.lanes|=l),pp(b,l,i),b=null}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===i){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}}function Es(i,s,l,f){i=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var b=v.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var R=v.type;an(v.pendingProps.value,b.value)||(i!==null?i.push(R):i=[R])}}else if(v===ve.current){if(b=v.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Al):i=[Al])}v=v.return}i!==null&&mp(s,i,l,f),s.flags|=262144}function vc(i){for(i=i.firstContext;i!==null;){if(!an(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Er(i){Sr=i,$o=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Mt(i){return L0(Sr,i)}function yc(i,s){return Sr===null&&Er(i),L0(i,s)}function L0(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},$o===null){if(i===null)throw Error(o(308));$o=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else $o=$o.next=s;return l}var S1=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},E1=t.unstable_scheduleCallback,b1=t.unstable_NormalPriority,dt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gp(){return{controller:new S1,data:new Map,refCount:0}}function el(i){i.refCount--,i.refCount===0&&E1(b1,function(){i.controller.abort()})}var tl=null,vp=0,bs=0,ws=null;function w1(i,s){if(tl===null){var l=tl=[];vp=0,bs=Sm(),ws={status:"pending",value:void 0,then:function(f){l.push(f)}}}return vp++,s.then(U0,U0),s}function U0(){if(--vp===0&&tl!==null){ws!==null&&(ws.status="fulfilled");var i=tl;tl=null,bs=0,ws=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function T1(i,s){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var v=0;v<l.length;v++)(0,l[v])(s)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var B0=F.S;F.S=function(i,s){EE=At(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&w1(i,s),B0!==null&&B0(i,s)};var br=k(null);function yp(){var i=br.current;return i!==null?i:Ze.pooledCache}function _c(i,s){s===null?se(br,br.current):se(br,s.pool)}function F0(){var i=yp();return i===null?null:{parent:dt._currentValue,pool:i}}var Ts=Error(o(460)),_p=Error(o(474)),Sc=Error(o(542)),Ec={then:function(){}};function H0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $0(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(Uo,Uo),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,V0(i),i;default:if(typeof s.status=="string")s.then(Uo,Uo);else{if(i=Ze,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=f}},function(f){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,V0(i),i}throw Tr=s,Ts}}function wr(i){try{var s=i._init;return s(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Tr=l,Ts):l}}var Tr=null;function G0(){if(Tr===null)throw Error(o(459));var i=Tr;return Tr=null,i}function V0(i){if(i===Ts||i===Sc)throw Error(o(483))}var Cs=null,nl=0;function bc(i){var s=nl;return nl+=1,Cs===null&&(Cs=[]),$0(Cs,i,s)}function ol(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function wc(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function z0(i){function s(H,B){if(i){var $=H.deletions;$===null?(H.deletions=[B],H.flags|=16):$.push(B)}}function l(H,B){if(!i)return null;for(;B!==null;)s(H,B),B=B.sibling;return null}function f(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function v(H,B){return H=Fo(H,B),H.index=0,H.sibling=null,H}function _(H,B,$){return H.index=$,i?($=H.alternate,$!==null?($=$.index,$<B?(H.flags|=67108866,B):$):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function b(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function R(H,B,$,Z){return B===null||B.tag!==6?(B=ap($,H.mode,Z),B.return=H,B):(B=v(B,$),B.return=H,B)}function P(H,B,$,Z){var _e=$.type;return _e===A?X(H,B,$.props.children,Z,$.key):B!==null&&(B.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&wr(_e)===B.type)?(B=v(B,$.props),ol(B,$),B.return=H,B):(B=mc($.type,$.key,$.props,null,H.mode,Z),ol(B,$),B.return=H,B)}function G(H,B,$,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=lp($,H.mode,Z),B.return=H,B):(B=v(B,$.children||[]),B.return=H,B)}function X(H,B,$,Z,_e){return B===null||B.tag!==7?(B=yr($,H.mode,Z,_e),B.return=H,B):(B=v(B,$),B.return=H,B)}function te(H,B,$){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=ap(""+B,H.mode,$),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case E:return $=mc(B.type,B.key,B.props,null,H.mode,$),ol($,B),$.return=H,$;case C:return B=lp(B,H.mode,$),B.return=H,B;case q:return B=wr(B),te(H,B,$)}if(de(B)||re(B))return B=yr(B,H.mode,$,null),B.return=H,B;if(typeof B.then=="function")return te(H,bc(B),$);if(B.$$typeof===N)return te(H,yc(H,B),$);wc(H,B)}return null}function z(H,B,$,Z){var _e=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return _e!==null?null:R(H,B,""+$,Z);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return $.key===_e?P(H,B,$,Z):null;case C:return $.key===_e?G(H,B,$,Z):null;case q:return $=wr($),z(H,B,$,Z)}if(de($)||re($))return _e!==null?null:X(H,B,$,Z,null);if(typeof $.then=="function")return z(H,B,bc($),Z);if($.$$typeof===N)return z(H,B,yc(H,$),Z);wc(H,$)}return null}function K(H,B,$,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return H=H.get($)||null,R(B,H,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return H=H.get(Z.key===null?$:Z.key)||null,P(B,H,Z,_e);case C:return H=H.get(Z.key===null?$:Z.key)||null,G(B,H,Z,_e);case q:return Z=wr(Z),K(H,B,$,Z,_e)}if(de(Z)||re(Z))return H=H.get($)||null,X(B,H,Z,_e,null);if(typeof Z.then=="function")return K(H,B,$,bc(Z),_e);if(Z.$$typeof===N)return K(H,B,$,yc(B,Z),_e);wc(B,Z)}return null}function he(H,B,$,Z){for(var _e=null,He=null,ge=B,Me=B=0,ke=null;ge!==null&&Me<$.length;Me++){ge.index>Me?(ke=ge,ge=null):ke=ge.sibling;var $e=z(H,ge,$[Me],Z);if($e===null){ge===null&&(ge=ke);break}i&&ge&&$e.alternate===null&&s(H,ge),B=_($e,B,Me),He===null?_e=$e:He.sibling=$e,He=$e,ge=ke}if(Me===$.length)return l(H,ge),Le&&Ho(H,Me),_e;if(ge===null){for(;Me<$.length;Me++)ge=te(H,$[Me],Z),ge!==null&&(B=_(ge,B,Me),He===null?_e=ge:He.sibling=ge,He=ge);return Le&&Ho(H,Me),_e}for(ge=f(ge);Me<$.length;Me++)ke=K(ge,H,Me,$[Me],Z),ke!==null&&(i&&ke.alternate!==null&&ge.delete(ke.key===null?Me:ke.key),B=_(ke,B,Me),He===null?_e=ke:He.sibling=ke,He=ke);return i&&ge.forEach(function(qi){return s(H,qi)}),Le&&Ho(H,Me),_e}function be(H,B,$,Z){if($==null)throw Error(o(151));for(var _e=null,He=null,ge=B,Me=B=0,ke=null,$e=$.next();ge!==null&&!$e.done;Me++,$e=$.next()){ge.index>Me?(ke=ge,ge=null):ke=ge.sibling;var qi=z(H,ge,$e.value,Z);if(qi===null){ge===null&&(ge=ke);break}i&&ge&&qi.alternate===null&&s(H,ge),B=_(qi,B,Me),He===null?_e=qi:He.sibling=qi,He=qi,ge=ke}if($e.done)return l(H,ge),Le&&Ho(H,Me),_e;if(ge===null){for(;!$e.done;Me++,$e=$.next())$e=te(H,$e.value,Z),$e!==null&&(B=_($e,B,Me),He===null?_e=$e:He.sibling=$e,He=$e);return Le&&Ho(H,Me),_e}for(ge=f(ge);!$e.done;Me++,$e=$.next())$e=K(ge,H,Me,$e.value,Z),$e!==null&&(i&&$e.alternate!==null&&ge.delete($e.key===null?Me:$e.key),B=_($e,B,Me),He===null?_e=$e:He.sibling=$e,He=$e);return i&&ge.forEach(function(kP){return s(H,kP)}),Le&&Ho(H,Me),_e}function We(H,B,$,Z){if(typeof $=="object"&&$!==null&&$.type===A&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case E:e:{for(var _e=$.key;B!==null;){if(B.key===_e){if(_e=$.type,_e===A){if(B.tag===7){l(H,B.sibling),Z=v(B,$.props.children),Z.return=H,H=Z;break e}}else if(B.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===q&&wr(_e)===B.type){l(H,B.sibling),Z=v(B,$.props),ol(Z,$),Z.return=H,H=Z;break e}l(H,B);break}else s(H,B);B=B.sibling}$.type===A?(Z=yr($.props.children,H.mode,Z,$.key),Z.return=H,H=Z):(Z=mc($.type,$.key,$.props,null,H.mode,Z),ol(Z,$),Z.return=H,H=Z)}return b(H);case C:e:{for(_e=$.key;B!==null;){if(B.key===_e)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){l(H,B.sibling),Z=v(B,$.children||[]),Z.return=H,H=Z;break e}else{l(H,B);break}else s(H,B);B=B.sibling}Z=lp($,H.mode,Z),Z.return=H,H=Z}return b(H);case q:return $=wr($),We(H,B,$,Z)}if(de($))return he(H,B,$,Z);if(re($)){if(_e=re($),typeof _e!="function")throw Error(o(150));return $=_e.call($),be(H,B,$,Z)}if(typeof $.then=="function")return We(H,B,bc($),Z);if($.$$typeof===N)return We(H,B,yc(H,$),Z);wc(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,B!==null&&B.tag===6?(l(H,B.sibling),Z=v(B,$),Z.return=H,H=Z):(l(H,B),Z=ap($,H.mode,Z),Z.return=H,H=Z),b(H)):l(H,B)}return function(H,B,$,Z){try{nl=0;var _e=We(H,B,$,Z);return Cs=null,_e}catch(ge){if(ge===Ts||ge===Sc)throw ge;var He=ln(29,ge,null,H.mode);return He.lanes=Z,He.return=H,He}finally{}}}var Cr=z0(!0),q0=z0(!1),Ri=!1;function Sp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ep(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Mi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ni(i,s,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Je&2)!==0){var v=f.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),f.pending=s,s=pc(i),R0(i,null,l),s}return hc(i,f,s,l),pc(i)}function il(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,l|=f,s.lanes=l,L_(i,l)}}function bp(i,s){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?v=_=b:_=_.next=b,l=l.next}while(l!==null);_===null?v=_=s:_=_.next=s}else v=_=s;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var wp=!1;function rl(){if(wp){var i=ws;if(i!==null)throw i}}function sl(i,s,l,f){wp=!1;var v=i.updateQueue;Ri=!1;var _=v.firstBaseUpdate,b=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var P=R,G=P.next;P.next=null,b===null?_=G:b.next=G,b=P;var X=i.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==b&&(R===null?X.firstBaseUpdate=G:R.next=G,X.lastBaseUpdate=P))}if(_!==null){var te=v.baseState;b=0,X=G=P=null,R=_;do{var z=R.lane&-536870913,K=z!==R.lane;if(K?(Pe&z)===z:(f&z)===z){z!==0&&z===bs&&(wp=!0),X!==null&&(X=X.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var he=i,be=R;z=s;var We=l;switch(be.tag){case 1:if(he=be.payload,typeof he=="function"){te=he.call(We,te,z);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=be.payload,z=typeof he=="function"?he.call(We,te,z):he,z==null)break e;te=y({},te,z);break e;case 2:Ri=!0}}z=R.callback,z!==null&&(i.flags|=64,K&&(i.flags|=8192),K=v.callbacks,K===null?v.callbacks=[z]:K.push(z))}else K={lane:z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(G=X=K,P=te):X=X.next=K,b|=z;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;K=R,R=K.next,K.next=null,v.lastBaseUpdate=K,v.shared.pending=null}}while(!0);X===null&&(P=te),v.baseState=P,v.firstBaseUpdate=G,v.lastBaseUpdate=X,_===null&&(v.shared.lanes=0),ki|=b,i.lanes=b,i.memoizedState=te}}function J0(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function K0(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)J0(l[i],s)}var As=k(null),Tc=k(0);function Y0(i,s){i=Wo,se(Tc,i),se(As,s),Wo=i|s.baseLanes}function Tp(){se(Tc,Wo),se(As,As.current)}function Cp(){Wo=Tc.current,Y(As),Y(Tc)}var un=k(null),In=null;function Ii(i){var s=i.alternate;se(ct,ct.current&1),se(un,i),In===null&&(s===null||As.current!==null||s.memoizedState!==null)&&(In=i)}function Ap(i){se(ct,ct.current),se(un,i),In===null&&(In=i)}function j0(i){i.tag===22?(se(ct,ct.current),se(un,i),In===null&&(In=i)):Di()}function Di(){se(ct,ct.current),se(un,un.current)}function cn(i){Y(un),In===i&&(In=null),Y(ct)}var ct=k(0);function Cc(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Dm(l)||Om(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vo=0,xe=null,je=null,ht=null,Ac=!1,xs=!1,Ar=!1,xc=0,al=0,Rs=null,C1=0;function st(){throw Error(o(321))}function xp(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!an(i[l],s[l]))return!1;return!0}function Rp(i,s,l,f,v,_){return Vo=_,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=i===null||i.memoizedState===null?DS:Vp,Ar=!1,_=l(f,v),Ar=!1,xs&&(_=W0(s,l,f,v)),X0(i),_}function X0(i){F.H=cl;var s=je!==null&&je.next!==null;if(Vo=0,ht=je=xe=null,Ac=!1,al=0,Rs=null,s)throw Error(o(300));i===null||pt||(i=i.dependencies,i!==null&&vc(i)&&(pt=!0))}function W0(i,s,l,f){xe=i;var v=0;do{if(xs&&(Rs=null),al=0,xs=!1,25<=v)throw Error(o(301));if(v+=1,ht=je=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=OS,_=s(l,f)}while(xs);return _}function A1(){var i=F.H,s=i.useState()[0];return s=typeof s.then=="function"?ll(s):s,i=i.useState()[0],(je!==null?je.memoizedState:null)!==i&&(xe.flags|=1024),s}function Mp(){var i=xc!==0;return xc=0,i}function Np(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Ip(i){if(Ac){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ac=!1}Vo=0,ht=je=xe=null,xs=!1,al=xc=0,Rs=null}function Ft(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?xe.memoizedState=ht=i:ht=ht.next=i,ht}function ft(){if(je===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=je.next;var s=ht===null?xe.memoizedState:ht.next;if(s!==null)ht=s,je=i;else{if(i===null)throw xe.alternate===null?Error(o(467)):Error(o(310));je=i,i={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},ht===null?xe.memoizedState=ht=i:ht=ht.next=i}return ht}function Rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(i){var s=al;return al+=1,Rs===null&&(Rs=[]),i=$0(Rs,i,s),s=xe,(ht===null?s.memoizedState:ht.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?DS:Vp),i}function Mc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ll(i);if(i.$$typeof===N)return Mt(i)}throw Error(o(438,String(i)))}function Dp(i){var s=null,l=xe.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var f=xe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Rc(),xe.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),f=0;f<i;f++)l[f]=j;return s.index++,l}function zo(i,s){return typeof s=="function"?s(i):s}function Nc(i){var s=ft();return Op(s,je,i)}function Op(i,s,l){var f=i.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=l;var v=i.baseQueue,_=f.pending;if(_!==null){if(v!==null){var b=v.next;v.next=_.next,_.next=b}s.baseQueue=v=_,f.pending=null}if(_=i.baseState,v===null)i.memoizedState=_;else{s=v.next;var R=b=null,P=null,G=s,X=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(Pe&te)===te:(Vo&te)===te){var z=G.revertLane;if(z===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===bs&&(X=!0);else if((Vo&z)===z){G=G.next,z===bs&&(X=!0);continue}else te={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(R=P=te,b=_):P=P.next=te,xe.lanes|=z,ki|=z;te=G.action,Ar&&l(_,te),_=G.hasEagerState?G.eagerState:l(_,te)}else z={lane:te,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(R=P=z,b=_):P=P.next=z,xe.lanes|=te,ki|=te;G=G.next}while(G!==null&&G!==s);if(P===null?b=_:P.next=R,!an(_,i.memoizedState)&&(pt=!0,X&&(l=ws,l!==null)))throw l;i.memoizedState=_,i.baseState=b,i.baseQueue=P,f.lastRenderedState=_}return v===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Pp(i){var s=ft(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var f=l.dispatch,v=l.pending,_=s.memoizedState;if(v!==null){l.pending=null;var b=v=v.next;do _=i(_,b.action),b=b.next;while(b!==v);an(_,s.memoizedState)||(pt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,f]}function Q0(i,s,l){var f=xe,v=ft(),_=Le;if(_){if(l===void 0)throw Error(o(407));l=l()}else l=s();var b=!an((je||v).memoizedState,l);if(b&&(v.memoizedState=l,pt=!0),v=v.queue,Up(tS.bind(null,f,v,i),[i]),v.getSnapshot!==s||b||ht!==null&&ht.memoizedState.tag&1){if(f.flags|=2048,Ms(9,{destroy:void 0},eS.bind(null,f,v,l,s),null),Ze===null)throw Error(o(349));_||(Vo&127)!==0||Z0(f,s,l)}return l}function Z0(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=xe.updateQueue,s===null?(s=Rc(),xe.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function eS(i,s,l,f){s.value=l,s.getSnapshot=f,nS(s)&&oS(i)}function tS(i,s,l){return l(function(){nS(s)&&oS(i)})}function nS(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!an(i,l)}catch{return!0}}function oS(i){var s=vr(i,2);s!==null&&Qt(s,i,2)}function kp(i){var s=Ft();if(typeof i=="function"){var l=i;if(i=l(),Ar){Ei(!0);try{l()}finally{Ei(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:i},s}function iS(i,s,l,f){return i.baseState=l,Op(i,je,typeof f=="function"?f:zo)}function x1(i,s,l,f,v){if(Oc(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){_.listeners.push(b)}};F.T!==null?l(!0):_.isTransition=!1,f(_),l=s.pending,l===null?(_.next=s.pending=_,rS(s,_)):(_.next=l.next,s.pending=l.next=_)}}function rS(i,s){var l=s.action,f=s.payload,v=i.state;if(s.isTransition){var _=F.T,b={};F.T=b;try{var R=l(v,f),P=F.S;P!==null&&P(b,R),sS(i,s,R)}catch(G){Lp(i,s,G)}finally{_!==null&&b.types!==null&&(_.types=b.types),F.T=_}}else try{_=l(v,f),sS(i,s,_)}catch(G){Lp(i,s,G)}}function sS(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){aS(i,s,f)},function(f){return Lp(i,s,f)}):aS(i,s,l)}function aS(i,s,l){s.status="fulfilled",s.value=l,lS(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,rS(i,l)))}function Lp(i,s,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=l,lS(s),s=s.next;while(s!==f)}i.action=null}function lS(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function uS(i,s){return s}function cS(i,s){if(Le){var l=Ze.formState;if(l!==null){e:{var f=xe;if(Le){if(nt){t:{for(var v=nt,_=Nn;v.nodeType!==8;){if(!_){v=null;break t}if(v=Dn(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){nt=Dn(v.nextSibling),f=v.data==="F!";break e}}Ai(f)}f=!1}f&&(s=l[0])}}return l=Ft(),l.memoizedState=l.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uS,lastRenderedState:s},l.queue=f,l=MS.bind(null,xe,f),f.dispatch=l,f=kp(!1),_=Gp.bind(null,xe,!1,f.queue),f=Ft(),v={state:s,dispatch:null,action:i,pending:null},f.queue=v,l=x1.bind(null,xe,v,_,l),v.dispatch=l,f.memoizedState=i,[s,l,!1]}function fS(i){var s=ft();return dS(s,je,i)}function dS(i,s,l){if(s=Op(i,s,uS)[0],i=Nc(zo)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=ll(s)}catch(b){throw b===Ts?Sc:b}else f=s;s=ft();var v=s.queue,_=v.dispatch;return l!==s.memoizedState&&(xe.flags|=2048,Ms(9,{destroy:void 0},R1.bind(null,v,l),null)),[f,_,i]}function R1(i,s){i.action=s}function hS(i){var s=ft(),l=je;if(l!==null)return dS(s,l,i);ft(),s=s.memoizedState,l=ft();var f=l.queue.dispatch;return l.memoizedState=i,[s,f,!1]}function Ms(i,s,l,f){return i={tag:i,create:l,deps:f,inst:s,next:null},s=xe.updateQueue,s===null&&(s=Rc(),xe.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,s.lastEffect=i),i}function pS(){return ft().memoizedState}function Ic(i,s,l,f){var v=Ft();xe.flags|=i,v.memoizedState=Ms(1|s,{destroy:void 0},l,f===void 0?null:f)}function Dc(i,s,l,f){var v=ft();f=f===void 0?null:f;var _=v.memoizedState.inst;je!==null&&f!==null&&xp(f,je.memoizedState.deps)?v.memoizedState=Ms(s,_,l,f):(xe.flags|=i,v.memoizedState=Ms(1|s,_,l,f))}function mS(i,s){Ic(8390656,8,i,s)}function Up(i,s){Dc(2048,8,i,s)}function M1(i){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=Rc(),xe.updateQueue=s,s.events=[i];else{var l=s.events;l===null?s.events=[i]:l.push(i)}}function gS(i){var s=ft().memoizedState;return M1({ref:s,nextImpl:i}),function(){if((Je&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function vS(i,s){return Dc(4,2,i,s)}function yS(i,s){return Dc(4,4,i,s)}function _S(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function SS(i,s,l){l=l!=null?l.concat([i]):null,Dc(4,4,_S.bind(null,s,i),l)}function Bp(){}function ES(i,s){var l=ft();s=s===void 0?null:s;var f=l.memoizedState;return s!==null&&xp(s,f[1])?f[0]:(l.memoizedState=[i,s],i)}function bS(i,s){var l=ft();s=s===void 0?null:s;var f=l.memoizedState;if(s!==null&&xp(s,f[1]))return f[0];if(f=i(),Ar){Ei(!0);try{i()}finally{Ei(!1)}}return l.memoizedState=[f,s],f}function Fp(i,s,l){return l===void 0||(Vo&1073741824)!==0&&(Pe&261930)===0?i.memoizedState=s:(i.memoizedState=l,i=wE(),xe.lanes|=i,ki|=i,l)}function wS(i,s,l,f){return an(l,s)?l:As.current!==null?(i=Fp(i,l,f),an(i,s)||(pt=!0),i):(Vo&42)===0||(Vo&1073741824)!==0&&(Pe&261930)===0?(pt=!0,i.memoizedState=l):(i=wE(),xe.lanes|=i,ki|=i,s)}function TS(i,s,l,f,v){var _=Q.p;Q.p=_!==0&&8>_?_:8;var b=F.T,R={};F.T=R,Gp(i,!1,s,l);try{var P=v(),G=F.S;if(G!==null&&G(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var X=T1(P,f);ul(i,s,X,hn(i))}else ul(i,s,f,hn(i))}catch(te){ul(i,s,{then:function(){},status:"rejected",reason:te},hn())}finally{Q.p=_,b!==null&&R.types!==null&&(b.types=R.types),F.T=b}}function N1(){}function Hp(i,s,l,f){if(i.tag!==5)throw Error(o(476));var v=CS(i).queue;TS(i,v,s,ee,l===null?N1:function(){return AS(i),l(f)})}function CS(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:ee},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function AS(i){var s=CS(i);s.next===null&&(s=i.alternate.memoizedState),ul(i,s.next.queue,{},hn())}function $p(){return Mt(Al)}function xS(){return ft().memoizedState}function RS(){return ft().memoizedState}function I1(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=hn();i=Mi(l);var f=Ni(s,i,l);f!==null&&(Qt(f,s,l),il(f,s,l)),s={cache:gp()},i.payload=s;return}s=s.return}}function D1(i,s,l){var f=hn();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Oc(i)?NS(s,l):(l=rp(i,s,l,f),l!==null&&(Qt(l,i,f),IS(l,s,f)))}function MS(i,s,l){var f=hn();ul(i,s,l,f)}function ul(i,s,l,f){var v={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Oc(i))NS(s,v);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var b=s.lastRenderedState,R=_(b,l);if(v.hasEagerState=!0,v.eagerState=R,an(R,b))return hc(i,s,v,0),Ze===null&&dc(),!1}catch{}finally{}if(l=rp(i,s,v,f),l!==null)return Qt(l,i,f),IS(l,s,f),!0}return!1}function Gp(i,s,l,f){if(f={lane:2,revertLane:Sm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Oc(i)){if(s)throw Error(o(479))}else s=rp(i,l,f,2),s!==null&&Qt(s,i,2)}function Oc(i){var s=i.alternate;return i===xe||s!==null&&s===xe}function NS(i,s){xs=Ac=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function IS(i,s,l){if((l&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,l|=f,s.lanes=l,L_(i,l)}}var cl={readContext:Mt,use:Mc,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};cl.useEffectEvent=st;var DS={readContext:Mt,use:Mc,useCallback:function(i,s){return Ft().memoizedState=[i,s===void 0?null:s],i},useContext:Mt,useEffect:mS,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Ic(4194308,4,_S.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Ic(4194308,4,i,s)},useInsertionEffect:function(i,s){Ic(4,2,i,s)},useMemo:function(i,s){var l=Ft();s=s===void 0?null:s;var f=i();if(Ar){Ei(!0);try{i()}finally{Ei(!1)}}return l.memoizedState=[f,s],f},useReducer:function(i,s,l){var f=Ft();if(l!==void 0){var v=l(s);if(Ar){Ei(!0);try{l(s)}finally{Ei(!1)}}}else v=s;return f.memoizedState=f.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},f.queue=i,i=i.dispatch=D1.bind(null,xe,i),[f.memoizedState,i]},useRef:function(i){var s=Ft();return i={current:i},s.memoizedState=i},useState:function(i){i=kp(i);var s=i.queue,l=MS.bind(null,xe,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:Bp,useDeferredValue:function(i,s){var l=Ft();return Fp(l,i,s)},useTransition:function(){var i=kp(!1);return i=TS.bind(null,xe,i.queue,!0,!1),Ft().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var f=xe,v=Ft();if(Le){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),Ze===null)throw Error(o(349));(Pe&127)!==0||Z0(f,s,l)}v.memoizedState=l;var _={value:l,getSnapshot:s};return v.queue=_,mS(tS.bind(null,f,_,i),[i]),f.flags|=2048,Ms(9,{destroy:void 0},eS.bind(null,f,_,l,s),null),l},useId:function(){var i=Ft(),s=Ze.identifierPrefix;if(Le){var l=mo,f=po;l=(f&~(1<<32-sn(f)-1)).toString(32)+l,s="_"+s+"R_"+l,l=xc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=C1++,s="_"+s+"r_"+l.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:$p,useFormState:cS,useActionState:cS,useOptimistic:function(i){var s=Ft();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Gp.bind(null,xe,!0,l),l.dispatch=s,[i,s]},useMemoCache:Dp,useCacheRefresh:function(){return Ft().memoizedState=I1.bind(null,xe)},useEffectEvent:function(i){var s=Ft(),l={impl:i};return s.memoizedState=l,function(){if((Je&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},Vp={readContext:Mt,use:Mc,useCallback:ES,useContext:Mt,useEffect:Up,useImperativeHandle:SS,useInsertionEffect:vS,useLayoutEffect:yS,useMemo:bS,useReducer:Nc,useRef:pS,useState:function(){return Nc(zo)},useDebugValue:Bp,useDeferredValue:function(i,s){var l=ft();return wS(l,je.memoizedState,i,s)},useTransition:function(){var i=Nc(zo)[0],s=ft().memoizedState;return[typeof i=="boolean"?i:ll(i),s]},useSyncExternalStore:Q0,useId:xS,useHostTransitionStatus:$p,useFormState:fS,useActionState:fS,useOptimistic:function(i,s){var l=ft();return iS(l,je,i,s)},useMemoCache:Dp,useCacheRefresh:RS};Vp.useEffectEvent=gS;var OS={readContext:Mt,use:Mc,useCallback:ES,useContext:Mt,useEffect:Up,useImperativeHandle:SS,useInsertionEffect:vS,useLayoutEffect:yS,useMemo:bS,useReducer:Pp,useRef:pS,useState:function(){return Pp(zo)},useDebugValue:Bp,useDeferredValue:function(i,s){var l=ft();return je===null?Fp(l,i,s):wS(l,je.memoizedState,i,s)},useTransition:function(){var i=Pp(zo)[0],s=ft().memoizedState;return[typeof i=="boolean"?i:ll(i),s]},useSyncExternalStore:Q0,useId:xS,useHostTransitionStatus:$p,useFormState:hS,useActionState:hS,useOptimistic:function(i,s){var l=ft();return je!==null?iS(l,je,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Dp,useCacheRefresh:RS};OS.useEffectEvent=gS;function zp(i,s,l,f){s=i.memoizedState,l=l(f,s),l=l==null?s:y({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var qp={enqueueSetState:function(i,s,l){i=i._reactInternals;var f=hn(),v=Mi(f);v.payload=s,l!=null&&(v.callback=l),s=Ni(i,v,f),s!==null&&(Qt(s,i,f),il(s,i,f))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var f=hn(),v=Mi(f);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Ni(i,v,f),s!==null&&(Qt(s,i,f),il(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=hn(),f=Mi(l);f.tag=2,s!=null&&(f.callback=s),s=Ni(i,f,l),s!==null&&(Qt(s,i,l),il(s,i,l))}};function PS(i,s,l,f,v,_,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,b):s.prototype&&s.prototype.isPureReactComponent?!Xa(l,f)||!Xa(v,_):!0}function kS(i,s,l,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,f),s.state!==i&&qp.enqueueReplaceState(s,s.state,null)}function xr(i,s){var l=s;if("ref"in s){l={};for(var f in s)f!=="ref"&&(l[f]=s[f])}if(i=i.defaultProps){l===s&&(l=y({},l));for(var v in i)l[v]===void 0&&(l[v]=i[v])}return l}function LS(i){fc(i)}function US(i){console.error(i)}function BS(i){fc(i)}function Pc(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function FS(i,s,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Jp(i,s,l){return l=Mi(l),l.tag=3,l.payload={element:null},l.callback=function(){Pc(i,s)},l}function HS(i){return i=Mi(i),i.tag=3,i}function $S(i,s,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;i.payload=function(){return v(_)},i.callback=function(){FS(s,l,f)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){FS(s,l,f),typeof v!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function O1(i,s,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=l.alternate,s!==null&&Es(s,l,v,!0),l=un.current,l!==null){switch(l.tag){case 31:case 13:return In===null?Jc():l.alternate===null&&at===0&&(at=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===Ec?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([f]):s.add(f),vm(i,f,v)),!1;case 22:return l.flags|=65536,f===Ec?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([f]):l.add(f)),vm(i,f,v)),!1}throw Error(o(435,l.tag))}return vm(i,f,v),Jc(),!1}if(Le)return s=un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,f!==fp&&(i=Error(o(422),{cause:f}),Za(xn(i,l)))):(f!==fp&&(s=Error(o(423),{cause:f}),Za(xn(s,l))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,f=xn(f,l),v=Jp(i.stateNode,f,v),bp(i,v),at!==4&&(at=2)),!1;var _=Error(o(520),{cause:f});if(_=xn(_,l),yl===null?yl=[_]:yl.push(_),at!==4&&(at=2),s===null)return!0;f=xn(f,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=v&-v,l.lanes|=i,i=Jp(l.stateNode,f,i),bp(l,i),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Li===null||!Li.has(_))))return l.flags|=65536,v&=-v,l.lanes|=v,v=HS(v),$S(v,i,l,f),bp(l,v),!1}l=l.return}while(l!==null);return!1}var Kp=Error(o(461)),pt=!1;function Nt(i,s,l,f){s.child=i===null?q0(s,null,l,f):Cr(s,i.child,l,f)}function GS(i,s,l,f,v){l=l.render;var _=s.ref;if("ref"in f){var b={};for(var R in f)R!=="ref"&&(b[R]=f[R])}else b=f;return Er(s),f=Rp(i,s,l,b,_,v),R=Mp(),i!==null&&!pt?(Np(i,s,v),qo(i,s,v)):(Le&&R&&up(s),s.flags|=1,Nt(i,s,f,v),s.child)}function VS(i,s,l,f,v){if(i===null){var _=l.type;return typeof _=="function"&&!sp(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,zS(i,s,_,f,v)):(i=mc(l.type,null,f,s,s.mode,v),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!tm(i,v)){var b=_.memoizedProps;if(l=l.compare,l=l!==null?l:Xa,l(b,f)&&i.ref===s.ref)return qo(i,s,v)}return s.flags|=1,i=Fo(_,f),i.ref=s.ref,i.return=s,s.child=i}function zS(i,s,l,f,v){if(i!==null){var _=i.memoizedProps;if(Xa(_,f)&&i.ref===s.ref)if(pt=!1,s.pendingProps=f=_,tm(i,v))(i.flags&131072)!==0&&(pt=!0);else return s.lanes=i.lanes,qo(i,s,v)}return Yp(i,s,l,f,v)}function qS(i,s,l,f){var v=f.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(f=s.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,s.child=null;return JS(i,s,_,l,f)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&_c(s,_!==null?_.cachePool:null),_!==null?Y0(s,_):Tp(),j0(s);else return f=s.lanes=536870912,JS(i,s,_!==null?_.baseLanes|l:l,l,f)}else _!==null?(_c(s,_.cachePool),Y0(s,_),Di(),s.memoizedState=null):(i!==null&&_c(s,null),Tp(),Di());return Nt(i,s,v,l),s.child}function fl(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function JS(i,s,l,f,v){var _=yp();return _=_===null?null:{parent:dt._currentValue,pool:_},s.memoizedState={baseLanes:l,cachePool:_},i!==null&&_c(s,null),Tp(),j0(s),i!==null&&Es(i,s,f,!0),s.childLanes=v,null}function kc(i,s){return s=Uc({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function KS(i,s,l){return Cr(s,i.child,null,l),i=kc(s,s.pendingProps),i.flags|=2,cn(s),s.memoizedState=null,i}function P1(i,s,l){var f=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Le){if(f.mode==="hidden")return i=kc(s,f),s.lanes=536870912,fl(null,i);if(Ap(s),(i=nt)?(i=rb(i,Nn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ti!==null?{id:po,overflow:mo}:null,retryLane:536870912,hydrationErrors:null},l=N0(i),l.return=s,s.child=l,Rt=s,nt=null)):i=null,i===null)throw Ai(s);return s.lanes=536870912,null}return kc(s,f)}var _=i.memoizedState;if(_!==null){var b=_.dehydrated;if(Ap(s),v)if(s.flags&256)s.flags&=-257,s=KS(i,s,l);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(pt||Es(i,s,l,!1),v=(l&i.childLanes)!==0,pt||v){if(f=Ze,f!==null&&(b=U_(f,l),b!==0&&b!==_.retryLane))throw _.retryLane=b,vr(i,b),Qt(f,i,b),Kp;Jc(),s=KS(i,s,l)}else i=_.treeContext,nt=Dn(b.nextSibling),Rt=s,Le=!0,Ci=null,Nn=!1,i!==null&&O0(s,i),s=kc(s,f),s.flags|=4096;return s}return i=Fo(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Lc(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function Yp(i,s,l,f,v){return Er(s),l=Rp(i,s,l,f,void 0,v),f=Mp(),i!==null&&!pt?(Np(i,s,v),qo(i,s,v)):(Le&&f&&up(s),s.flags|=1,Nt(i,s,l,v),s.child)}function YS(i,s,l,f,v,_){return Er(s),s.updateQueue=null,l=W0(s,f,l,v),X0(i),f=Mp(),i!==null&&!pt?(Np(i,s,_),qo(i,s,_)):(Le&&f&&up(s),s.flags|=1,Nt(i,s,l,_),s.child)}function jS(i,s,l,f,v){if(Er(s),s.stateNode===null){var _=vs,b=l.contextType;typeof b=="object"&&b!==null&&(_=Mt(b)),_=new l(f,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=qp,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=f,_.state=s.memoizedState,_.refs={},Sp(s),b=l.contextType,_.context=typeof b=="object"&&b!==null?Mt(b):vs,_.state=s.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(zp(s,l,b,f),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(b=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),b!==_.state&&qp.enqueueReplaceState(_,_.state,null),sl(s,f,_,v),rl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){_=s.stateNode;var R=s.memoizedProps,P=xr(l,R);_.props=P;var G=_.context,X=l.contextType;b=vs,typeof X=="object"&&X!==null&&(b=Mt(X));var te=l.getDerivedStateFromProps;X=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||G!==b)&&kS(s,_,f,b),Ri=!1;var z=s.memoizedState;_.state=z,sl(s,f,_,v),rl(),G=s.memoizedState,R||z!==G||Ri?(typeof te=="function"&&(zp(s,l,te,f),G=s.memoizedState),(P=Ri||PS(s,l,P,f,z,G,b))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=G),_.props=f,_.state=G,_.context=b,f=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,Ep(i,s),b=s.memoizedProps,X=xr(l,b),_.props=X,te=s.pendingProps,z=_.context,G=l.contextType,P=vs,typeof G=="object"&&G!==null&&(P=Mt(G)),R=l.getDerivedStateFromProps,(G=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==te||z!==P)&&kS(s,_,f,P),Ri=!1,z=s.memoizedState,_.state=z,sl(s,f,_,v),rl();var K=s.memoizedState;b!==te||z!==K||Ri||i!==null&&i.dependencies!==null&&vc(i.dependencies)?(typeof R=="function"&&(zp(s,l,R,f),K=s.memoizedState),(X=Ri||PS(s,l,X,f,z,K,P)||i!==null&&i.dependencies!==null&&vc(i.dependencies))?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,K,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,K,P)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||b===i.memoizedProps&&z===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&z===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=K),_.props=f,_.state=K,_.context=P,f=X):(typeof _.componentDidUpdate!="function"||b===i.memoizedProps&&z===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&z===i.memoizedState||(s.flags|=1024),f=!1)}return _=f,Lc(i,s),f=(s.flags&128)!==0,_||f?(_=s.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&f?(s.child=Cr(s,i.child,null,v),s.child=Cr(s,null,l,v)):Nt(i,s,l,v),s.memoizedState=_.state,i=s.child):i=qo(i,s,v),i}function XS(i,s,l,f){return _r(),s.flags|=256,Nt(i,s,l,f),s.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xp(i){return{baseLanes:i,cachePool:F0()}}function Wp(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=dn),i}function WS(i,s,l){var f=s.pendingProps,v=!1,_=(s.flags&128)!==0,b;if((b=_)||(b=i!==null&&i.memoizedState===null?!1:(ct.current&2)!==0),b&&(v=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,i===null){if(Le){if(v?Ii(s):Di(),(i=nt)?(i=rb(i,Nn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ti!==null?{id:po,overflow:mo}:null,retryLane:536870912,hydrationErrors:null},l=N0(i),l.return=s,s.child=l,Rt=s,nt=null)):i=null,i===null)throw Ai(s);return Om(i)?s.lanes=32:s.lanes=536870912,null}var R=f.children;return f=f.fallback,v?(Di(),v=s.mode,R=Uc({mode:"hidden",children:R},v),f=yr(f,v,l,null),R.return=s,f.return=s,R.sibling=f,s.child=R,f=s.child,f.memoizedState=Xp(l),f.childLanes=Wp(i,b,l),s.memoizedState=jp,fl(null,f)):(Ii(s),Qp(s,R))}var P=i.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(_)s.flags&256?(Ii(s),s.flags&=-257,s=Zp(i,s,l)):s.memoizedState!==null?(Di(),s.child=i.child,s.flags|=128,s=null):(Di(),R=f.fallback,v=s.mode,f=Uc({mode:"visible",children:f.children},v),R=yr(R,v,l,null),R.flags|=2,f.return=s,R.return=s,f.sibling=R,s.child=f,Cr(s,i.child,null,l),f=s.child,f.memoizedState=Xp(l),f.childLanes=Wp(i,b,l),s.memoizedState=jp,s=fl(null,f));else if(Ii(s),Om(R)){if(b=R.nextSibling&&R.nextSibling.dataset,b)var G=b.dgst;b=G,f=Error(o(419)),f.stack="",f.digest=b,Za({value:f,source:null,stack:null}),s=Zp(i,s,l)}else if(pt||Es(i,s,l,!1),b=(l&i.childLanes)!==0,pt||b){if(b=Ze,b!==null&&(f=U_(b,l),f!==0&&f!==P.retryLane))throw P.retryLane=f,vr(i,f),Qt(b,i,f),Kp;Dm(R)||Jc(),s=Zp(i,s,l)}else Dm(R)?(s.flags|=192,s.child=i.child,s=null):(i=P.treeContext,nt=Dn(R.nextSibling),Rt=s,Le=!0,Ci=null,Nn=!1,i!==null&&O0(s,i),s=Qp(s,f.children),s.flags|=4096);return s}return v?(Di(),R=f.fallback,v=s.mode,P=i.child,G=P.sibling,f=Fo(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,G!==null?R=Fo(G,R):(R=yr(R,v,l,null),R.flags|=2),R.return=s,f.return=s,f.sibling=R,s.child=f,fl(null,f),f=s.child,R=i.child.memoizedState,R===null?R=Xp(l):(v=R.cachePool,v!==null?(P=dt._currentValue,v=v.parent!==P?{parent:P,pool:P}:v):v=F0(),R={baseLanes:R.baseLanes|l,cachePool:v}),f.memoizedState=R,f.childLanes=Wp(i,b,l),s.memoizedState=jp,fl(i.child,f)):(Ii(s),l=i.child,i=l.sibling,l=Fo(l,{mode:"visible",children:f.children}),l.return=s,l.sibling=null,i!==null&&(b=s.deletions,b===null?(s.deletions=[i],s.flags|=16):b.push(i)),s.child=l,s.memoizedState=null,l)}function Qp(i,s){return s=Uc({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Uc(i,s){return i=ln(22,i,null,s),i.lanes=0,i}function Zp(i,s,l){return Cr(s,i.child,null,l),i=Qp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function QS(i,s,l){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),pp(i.return,s,l)}function em(i,s,l,f,v,_){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v,treeForkCount:_}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=l,b.tailMode=v,b.treeForkCount=_)}function ZS(i,s,l){var f=s.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var b=ct.current,R=(b&2)!==0;if(R?(b=b&1|2,s.flags|=128):b&=1,se(ct,b),Nt(i,s,f,l),f=Le?Qa:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&QS(i,l,s);else if(i.tag===19)QS(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(l=s.child,v=null;l!==null;)i=l.alternate,i!==null&&Cc(i)===null&&(v=l),l=l.sibling;l=v,l===null?(v=s.child,s.child=null):(v=l.sibling,l.sibling=null),em(s,!1,v,l,_,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=s.child,s.child=null;v!==null;){if(i=v.alternate,i!==null&&Cc(i)===null){s.child=v;break}i=v.sibling,v.sibling=l,l=v,v=i}em(s,!0,l,null,_,f);break;case"together":em(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function qo(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),ki|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(Es(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,l=Fo(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Fo(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function tm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&vc(i)))}function k1(i,s,l){switch(s.tag){case 3:ze(s,s.stateNode.containerInfo),xi(s,dt,i.memoizedState.cache),_r();break;case 27:case 5:on(s);break;case 4:ze(s,s.stateNode.containerInfo);break;case 10:xi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ap(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Ii(s),s.flags|=128,null):(l&s.child.childLanes)!==0?WS(i,s,l):(Ii(s),i=qo(i,s,l),i!==null?i.sibling:null);Ii(s);break;case 19:var v=(i.flags&128)!==0;if(f=(l&s.childLanes)!==0,f||(Es(i,s,l,!1),f=(l&s.childLanes)!==0),v){if(f)return ZS(i,s,l);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(ct,ct.current),f)break;return null;case 22:return s.lanes=0,qS(i,s,l,s.pendingProps);case 24:xi(s,dt,i.memoizedState.cache)}return qo(i,s,l)}function eE(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)pt=!0;else{if(!tm(i,l)&&(s.flags&128)===0)return pt=!1,k1(i,s,l);pt=(i.flags&131072)!==0}else pt=!1,Le&&(s.flags&1048576)!==0&&D0(s,Qa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=wr(s.elementType),s.type=i,typeof i=="function")sp(i)?(f=xr(i,f),s.tag=1,s=jS(null,s,i,f,l)):(s.tag=0,s=Yp(null,s,i,f,l));else{if(i!=null){var v=i.$$typeof;if(v===D){s.tag=11,s=GS(null,s,i,f,l);break e}else if(v===O){s.tag=14,s=VS(null,s,i,f,l);break e}}throw s=ae(i)||i,Error(o(306,s,""))}}return s;case 0:return Yp(i,s,s.type,s.pendingProps,l);case 1:return f=s.type,v=xr(f,s.pendingProps),jS(i,s,f,v,l);case 3:e:{if(ze(s,s.stateNode.containerInfo),i===null)throw Error(o(387));f=s.pendingProps;var _=s.memoizedState;v=_.element,Ep(i,s),sl(s,f,null,l);var b=s.memoizedState;if(f=b.cache,xi(s,dt,f),f!==_.cache&&mp(s,[dt],l,!0),rl(),f=b.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=XS(i,s,f,l);break e}else if(f!==v){v=xn(Error(o(424)),s),Za(v),s=XS(i,s,f,l);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(nt=Dn(i.firstChild),Rt=s,Le=!0,Ci=null,Nn=!0,l=q0(s,null,f,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(_r(),f===v){s=qo(i,s,l);break e}Nt(i,s,f,l)}s=s.child}return s;case 26:return Lc(i,s),i===null?(l=fb(s.type,null,s.pendingProps,null))?s.memoizedState=l:Le||(l=s.type,i=s.pendingProps,f=Zc(Ee.current).createElement(l),f[xt]=s,f[Jt]=i,It(f,l,i),St(f),s.stateNode=f):s.memoizedState=fb(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return on(s),i===null&&Le&&(f=s.stateNode=lb(s.type,s.pendingProps,Ee.current),Rt=s,Nn=!0,v=nt,Hi(s.type)?(Pm=v,nt=Dn(f.firstChild)):nt=v),Nt(i,s,s.pendingProps.children,l),Lc(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Le&&((v=f=nt)&&(f=fP(f,s.type,s.pendingProps,Nn),f!==null?(s.stateNode=f,Rt=s,nt=Dn(f.firstChild),Nn=!1,v=!0):v=!1),v||Ai(s)),on(s),v=s.type,_=s.pendingProps,b=i!==null?i.memoizedProps:null,f=_.children,Mm(v,_)?f=null:b!==null&&Mm(v,b)&&(s.flags|=32),s.memoizedState!==null&&(v=Rp(i,s,A1,null,null,l),Al._currentValue=v),Lc(i,s),Nt(i,s,f,l),s.child;case 6:return i===null&&Le&&((i=l=nt)&&(l=dP(l,s.pendingProps,Nn),l!==null?(s.stateNode=l,Rt=s,nt=null,i=!0):i=!1),i||Ai(s)),null;case 13:return WS(i,s,l);case 4:return ze(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=Cr(s,null,f,l):Nt(i,s,f,l),s.child;case 11:return GS(i,s,s.type,s.pendingProps,l);case 7:return Nt(i,s,s.pendingProps,l),s.child;case 8:return Nt(i,s,s.pendingProps.children,l),s.child;case 12:return Nt(i,s,s.pendingProps.children,l),s.child;case 10:return f=s.pendingProps,xi(s,s.type,f.value),Nt(i,s,f.children,l),s.child;case 9:return v=s.type._context,f=s.pendingProps.children,Er(s),v=Mt(v),f=f(v),s.flags|=1,Nt(i,s,f,l),s.child;case 14:return VS(i,s,s.type,s.pendingProps,l);case 15:return zS(i,s,s.type,s.pendingProps,l);case 19:return ZS(i,s,l);case 31:return P1(i,s,l);case 22:return qS(i,s,l,s.pendingProps);case 24:return Er(s),f=Mt(dt),i===null?(v=yp(),v===null&&(v=Ze,_=gp(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=l),v=_),s.memoizedState={parent:f,cache:v},Sp(s),xi(s,dt,v)):((i.lanes&l)!==0&&(Ep(i,s),sl(s,null,null,l),rl()),v=i.memoizedState,_=s.memoizedState,v.parent!==f?(v={parent:f,cache:f},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),xi(s,dt,f)):(f=_.cache,xi(s,dt,f),f!==v.cache&&mp(s,[dt],l,!0))),Nt(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Jo(i){i.flags|=4}function nm(i,s,l,f,v){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(xE())i.flags|=8192;else throw Tr=Ec,_p}else i.flags&=-16777217}function tE(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!gb(s))if(xE())i.flags|=8192;else throw Tr=Ec,_p}function Bc(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?P_():536870912,i.lanes|=s,Os|=s)}function dl(i,s){if(!Le)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function ot(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(s)for(var v=i.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=l,s}function L1(i,s,l){var f=s.pendingProps;switch(cp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(s),null;case 1:return ot(s),null;case 3:return l=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Go(dt),qe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ss(s)?Jo(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,dp())),ot(s),null;case 26:var v=s.type,_=s.memoizedState;return i===null?(Jo(s),_!==null?(ot(s),tE(s,_)):(ot(s),nm(s,v,null,f,l))):_?_!==i.memoizedState?(Jo(s),ot(s),tE(s,_)):(ot(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&Jo(s),ot(s),nm(s,v,i,f,l)),null;case 27:if(wn(s),l=Ee.current,v=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&Jo(s);else{if(!f){if(s.stateNode===null)throw Error(o(166));return ot(s),null}i=le.current,Ss(s)?P0(s):(i=lb(v,f,l),s.stateNode=i,Jo(s))}return ot(s),null;case 5:if(wn(s),v=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&Jo(s);else{if(!f){if(s.stateNode===null)throw Error(o(166));return ot(s),null}if(_=le.current,Ss(s))P0(s);else{var b=Zc(Ee.current);switch(_){case 1:_=b.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=b.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=b.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?b.createElement("select",{is:f.is}):b.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?b.createElement(v,{is:f.is}):b.createElement(v)}}_[xt]=s,_[Jt]=f;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)_.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=_;e:switch(It(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Jo(s)}}return ot(s),nm(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,l),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&Jo(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(o(166));if(i=Ee.current,Ss(s)){if(i=s.stateNode,l=s.memoizedProps,f=null,v=Rt,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}i[xt]=s,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||WE(i.nodeValue,l)),i||Ai(s,!0)}else i=Zc(i).createTextNode(f),i[xt]=s,s.stateNode=i}return ot(s),null;case 31:if(l=s.memoizedState,i===null||i.memoizedState!==null){if(f=Ss(s),l!==null){if(i===null){if(!f)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[xt]=s}else _r(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),i=!1}else l=dp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return s.flags&256?(cn(s),s):(cn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ot(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Ss(s),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(o(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[xt]=s}else _r(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),v=!1}else v=dp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(cn(s),s):(cn(s),null)}return cn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=f!==null,i=i!==null&&i.memoizedState!==null,l&&(f=s.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),l!==i&&l&&(s.child.flags|=8192),Bc(s,s.updateQueue),ot(s),null);case 4:return qe(),i===null&&Tm(s.stateNode.containerInfo),ot(s),null;case 10:return Go(s.type),ot(s),null;case 19:if(Y(ct),f=s.memoizedState,f===null)return ot(s),null;if(v=(s.flags&128)!==0,_=f.rendering,_===null)if(v)dl(f,!1);else{if(at!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=Cc(i),_!==null){for(s.flags|=128,dl(f,!1),i=_.updateQueue,s.updateQueue=i,Bc(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)M0(l,i),l=l.sibling;return se(ct,ct.current&1|2),Le&&Ho(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&At()>Vc&&(s.flags|=128,v=!0,dl(f,!1),s.lanes=4194304)}else{if(!v)if(i=Cc(_),i!==null){if(s.flags|=128,v=!0,i=i.updateQueue,s.updateQueue=i,Bc(s,i),dl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Le)return ot(s),null}else 2*At()-f.renderingStartTime>Vc&&l!==536870912&&(s.flags|=128,v=!0,dl(f,!1),s.lanes=4194304);f.isBackwards?(_.sibling=s.child,s.child=_):(i=f.last,i!==null?i.sibling=_:s.child=_,f.last=_)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=At(),i.sibling=null,l=ct.current,se(ct,v?l&1|2:l&1),Le&&Ho(s,f.treeForkCount),i):(ot(s),null);case 22:case 23:return cn(s),Cp(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(l&536870912)!==0&&(s.flags&128)===0&&(ot(s),s.subtreeFlags&6&&(s.flags|=8192)):ot(s),l=s.updateQueue,l!==null&&Bc(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==l&&(s.flags|=2048),i!==null&&Y(br),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Go(dt),ot(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function U1(i,s){switch(cp(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Go(dt),qe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return wn(s),null;case 31:if(s.memoizedState!==null){if(cn(s),s.alternate===null)throw Error(o(340));_r()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(cn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));_r()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Y(ct),null;case 4:return qe(),null;case 10:return Go(s.type),null;case 22:case 23:return cn(s),Cp(),i!==null&&Y(br),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Go(dt),null;case 25:return null;default:return null}}function nE(i,s){switch(cp(s),s.tag){case 3:Go(dt),qe();break;case 26:case 27:case 5:wn(s);break;case 4:qe();break;case 31:s.memoizedState!==null&&cn(s);break;case 13:cn(s);break;case 19:Y(ct);break;case 10:Go(s.type);break;case 22:case 23:cn(s),Cp(),i!==null&&Y(br);break;case 24:Go(dt)}}function hl(i,s){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&i)===i){f=void 0;var _=l.create,b=l.inst;f=_(),b.destroy=f}l=l.next}while(l!==v)}}catch(R){Ye(s,s.return,R)}}function Oi(i,s,l){try{var f=s.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&i)===i){var b=f.inst,R=b.destroy;if(R!==void 0){b.destroy=void 0,v=s;var P=l,G=R;try{G()}catch(X){Ye(v,P,X)}}}f=f.next}while(f!==_)}}catch(X){Ye(s,s.return,X)}}function oE(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{K0(s,l)}catch(f){Ye(i,i.return,f)}}}function iE(i,s,l){l.props=xr(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){Ye(i,s,f)}}function pl(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(v){Ye(i,s,v)}}function go(i,s){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){Ye(i,s,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Ye(i,s,v)}else l.current=null}function rE(i){var s=i.type,l=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){Ye(i,i.return,v)}}function om(i,s,l){try{var f=i.stateNode;rP(f,i.type,l,s),f[Jt]=s}catch(v){Ye(i,i.return,v)}}function sE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Hi(i.type)||i.tag===4}function im(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||sE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Hi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rm(i,s,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Uo));else if(f!==4&&(f===27&&Hi(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(rm(i,s,l),i=i.sibling;i!==null;)rm(i,s,l),i=i.sibling}function Fc(i,s,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(f!==4&&(f===27&&Hi(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Fc(i,s,l),i=i.sibling;i!==null;)Fc(i,s,l),i=i.sibling}function aE(i){var s=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);It(s,f,l),s[xt]=i,s[Jt]=l}catch(_){Ye(i,i.return,_)}}var Ko=!1,mt=!1,sm=!1,lE=typeof WeakSet=="function"?WeakSet:Set,Et=null;function B1(i,s){if(i=i.containerInfo,xm=af,i=S0(i),Zh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var b=0,R=-1,P=-1,G=0,X=0,te=i,z=null;t:for(;;){for(var K;te!==l||v!==0&&te.nodeType!==3||(R=b+v),te!==_||f!==0&&te.nodeType!==3||(P=b+f),te.nodeType===3&&(b+=te.nodeValue.length),(K=te.firstChild)!==null;)z=te,te=K;for(;;){if(te===i)break t;if(z===l&&++G===v&&(R=b),z===_&&++X===f&&(P=b),(K=te.nextSibling)!==null)break;te=z,z=te.parentNode}te=K}l=R===-1||P===-1?null:{start:R,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Rm={focusedElem:i,selectionRange:l},af=!1,Et=s;Et!==null;)if(s=Et,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Et=i;else for(;Et!==null;){switch(s=Et,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)v=i[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=s,v=_.memoizedProps,_=_.memoizedState,f=l.stateNode;try{var he=xr(l.type,v);i=f.getSnapshotBeforeUpdate(he,_),f.__reactInternalSnapshotBeforeUpdate=i}catch(be){Ye(l,l.return,be)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)Im(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Im(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Et=i;break}Et=s.return}}function uE(i,s,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:jo(i,l),f&4&&hl(5,l);break;case 1:if(jo(i,l),f&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(b){Ye(l,l.return,b)}else{var v=xr(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(v,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){Ye(l,l.return,b)}}f&64&&oE(l),f&512&&pl(l,l.return);break;case 3:if(jo(i,l),f&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{K0(i,s)}catch(b){Ye(l,l.return,b)}}break;case 27:s===null&&f&4&&aE(l);case 26:case 5:jo(i,l),s===null&&f&4&&rE(l),f&512&&pl(l,l.return);break;case 12:jo(i,l);break;case 31:jo(i,l),f&4&&dE(i,l);break;case 13:jo(i,l),f&4&&hE(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=K1.bind(null,l),hP(i,l))));break;case 22:if(f=l.memoizedState!==null||Ko,!f){s=s!==null&&s.memoizedState!==null||mt,v=Ko;var _=mt;Ko=f,(mt=s)&&!_?Xo(i,l,(l.subtreeFlags&8772)!==0):jo(i,l),Ko=v,mt=_}break;case 30:break;default:jo(i,l)}}function cE(i){var s=i.alternate;s!==null&&(i.alternate=null,cE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Lh(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var rt=null,Yt=!1;function Yo(i,s,l){for(l=l.child;l!==null;)fE(i,s,l),l=l.sibling}function fE(i,s,l){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ba,l)}catch{}switch(l.tag){case 26:mt||go(l,s),Yo(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:mt||go(l,s);var f=rt,v=Yt;Hi(l.type)&&(rt=l.stateNode,Yt=!1),Yo(i,s,l),wl(l.stateNode),rt=f,Yt=v;break;case 5:mt||go(l,s);case 6:if(f=rt,v=Yt,rt=null,Yo(i,s,l),rt=f,Yt=v,rt!==null)if(Yt)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(l.stateNode)}catch(_){Ye(l,s,_)}else try{rt.removeChild(l.stateNode)}catch(_){Ye(l,s,_)}break;case 18:rt!==null&&(Yt?(i=rt,ob(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),$s(i)):ob(rt,l.stateNode));break;case 4:f=rt,v=Yt,rt=l.stateNode.containerInfo,Yt=!0,Yo(i,s,l),rt=f,Yt=v;break;case 0:case 11:case 14:case 15:Oi(2,l,s),mt||Oi(4,l,s),Yo(i,s,l);break;case 1:mt||(go(l,s),f=l.stateNode,typeof f.componentWillUnmount=="function"&&iE(l,s,f)),Yo(i,s,l);break;case 21:Yo(i,s,l);break;case 22:mt=(f=mt)||l.memoizedState!==null,Yo(i,s,l),mt=f;break;default:Yo(i,s,l)}}function dE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$s(i)}catch(l){Ye(s,s.return,l)}}}function hE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$s(i)}catch(l){Ye(s,s.return,l)}}function F1(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new lE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new lE),s;default:throw Error(o(435,i.tag))}}function Hc(i,s){var l=F1(i);s.forEach(function(f){if(!l.has(f)){l.add(f);var v=Y1.bind(null,i,f);f.then(v,v)}})}function jt(i,s){var l=s.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],_=i,b=s,R=b;e:for(;R!==null;){switch(R.tag){case 27:if(Hi(R.type)){rt=R.stateNode,Yt=!1;break e}break;case 5:rt=R.stateNode,Yt=!1;break e;case 3:case 4:rt=R.stateNode.containerInfo,Yt=!0;break e}R=R.return}if(rt===null)throw Error(o(160));fE(_,b,v),rt=null,Yt=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)pE(s,i),s=s.sibling}var jn=null;function pE(i,s){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:jt(s,i),Xt(i),f&4&&(Oi(3,i,i.return),hl(3,i),Oi(5,i,i.return));break;case 1:jt(s,i),Xt(i),f&512&&(mt||l===null||go(l,l.return)),f&64&&Ko&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=jn;if(jt(s,i),Xt(i),f&512&&(mt||l===null||go(l,l.return)),f&4){var _=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){e:{f=i.type,l=i.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[$a]||_[xt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),It(_,f,l),_[xt]=i,St(_),f=_;break e;case"link":var b=pb("link","href",v).get(f+(l.href||""));if(b){for(var R=0;R<b.length;R++)if(_=b[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(R,1);break t}}_=v.createElement(f),It(_,f,l),v.head.appendChild(_);break;case"meta":if(b=pb("meta","content",v).get(f+(l.content||""))){for(R=0;R<b.length;R++)if(_=b[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(R,1);break t}}_=v.createElement(f),It(_,f,l),v.head.appendChild(_);break;default:throw Error(o(468,f))}_[xt]=i,St(_),f=_}i.stateNode=f}else mb(v,i.type,i.stateNode);else i.stateNode=hb(v,f,i.memoizedProps);else _!==f?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,f===null?mb(v,i.type,i.stateNode):hb(v,f,i.memoizedProps)):f===null&&i.stateNode!==null&&om(i,i.memoizedProps,l.memoizedProps)}break;case 27:jt(s,i),Xt(i),f&512&&(mt||l===null||go(l,l.return)),l!==null&&f&4&&om(i,i.memoizedProps,l.memoizedProps);break;case 5:if(jt(s,i),Xt(i),f&512&&(mt||l===null||go(l,l.return)),i.flags&32){v=i.stateNode;try{cs(v,"")}catch(he){Ye(i,i.return,he)}}f&4&&i.stateNode!=null&&(v=i.memoizedProps,om(i,v,l!==null?l.memoizedProps:v)),f&1024&&(sm=!0);break;case 6:if(jt(s,i),Xt(i),f&4){if(i.stateNode===null)throw Error(o(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(he){Ye(i,i.return,he)}}break;case 3:if(nf=null,v=jn,jn=ef(s.containerInfo),jt(s,i),jn=v,Xt(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{$s(s.containerInfo)}catch(he){Ye(i,i.return,he)}sm&&(sm=!1,mE(i));break;case 4:f=jn,jn=ef(i.stateNode.containerInfo),jt(s,i),Xt(i),jn=f;break;case 12:jt(s,i),Xt(i);break;case 31:jt(s,i),Xt(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Hc(i,f)));break;case 13:jt(s,i),Xt(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gc=At()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Hc(i,f)));break;case 22:v=i.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,G=Ko,X=mt;if(Ko=G||v,mt=X||P,jt(s,i),mt=X,Ko=G,Xt(i),f&8192)e:for(s=i.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(l===null||P||Ko||mt||Rr(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){P=l=s;try{if(_=P.stateNode,v)b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{R=P.stateNode;var te=P.memoizedProps.style,z=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(he){Ye(P,P.return,he)}}}else if(s.tag===6){if(l===null){P=s;try{P.stateNode.nodeValue=v?"":P.memoizedProps}catch(he){Ye(P,P.return,he)}}}else if(s.tag===18){if(l===null){P=s;try{var K=P.stateNode;v?ib(K,!0):ib(P.stateNode,!1)}catch(he){Ye(P,P.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Hc(i,l))));break;case 19:jt(s,i),Xt(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Hc(i,f)));break;case 30:break;case 21:break;default:jt(s,i),Xt(i)}}function Xt(i){var s=i.flags;if(s&2){try{for(var l,f=i.return;f!==null;){if(sE(f)){l=f;break}f=f.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var v=l.stateNode,_=im(i);Fc(i,_,v);break;case 5:var b=l.stateNode;l.flags&32&&(cs(b,""),l.flags&=-33);var R=im(i);Fc(i,R,b);break;case 3:case 4:var P=l.stateNode.containerInfo,G=im(i);rm(i,G,P);break;default:throw Error(o(161))}}catch(X){Ye(i,i.return,X)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function mE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;mE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function jo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)uE(i,s.alternate,s),s=s.sibling}function Rr(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Oi(4,s,s.return),Rr(s);break;case 1:go(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&iE(s,s.return,l),Rr(s);break;case 27:wl(s.stateNode);case 26:case 5:go(s,s.return),Rr(s);break;case 22:s.memoizedState===null&&Rr(s);break;case 30:Rr(s);break;default:Rr(s)}i=i.sibling}}function Xo(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,v=i,_=s,b=_.flags;switch(_.tag){case 0:case 11:case 15:Xo(v,_,l),hl(4,_);break;case 1:if(Xo(v,_,l),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(G){Ye(f,f.return,G)}if(f=_,v=f.updateQueue,v!==null){var R=f.stateNode;try{var P=v.shared.hiddenCallbacks;if(P!==null)for(v.shared.hiddenCallbacks=null,v=0;v<P.length;v++)J0(P[v],R)}catch(G){Ye(f,f.return,G)}}l&&b&64&&oE(_),pl(_,_.return);break;case 27:aE(_);case 26:case 5:Xo(v,_,l),l&&f===null&&b&4&&rE(_),pl(_,_.return);break;case 12:Xo(v,_,l);break;case 31:Xo(v,_,l),l&&b&4&&dE(v,_);break;case 13:Xo(v,_,l),l&&b&4&&hE(v,_);break;case 22:_.memoizedState===null&&Xo(v,_,l),pl(_,_.return);break;case 30:break;default:Xo(v,_,l)}s=s.sibling}}function am(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&el(l))}function lm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&el(i))}function Xn(i,s,l,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gE(i,s,l,f),s=s.sibling}function gE(i,s,l,f){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Xn(i,s,l,f),v&2048&&hl(9,s);break;case 1:Xn(i,s,l,f);break;case 3:Xn(i,s,l,f),v&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&el(i)));break;case 12:if(v&2048){Xn(i,s,l,f),i=s.stateNode;try{var _=s.memoizedProps,b=_.id,R=_.onPostCommit;typeof R=="function"&&R(b,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){Ye(s,s.return,P)}}else Xn(i,s,l,f);break;case 31:Xn(i,s,l,f);break;case 13:Xn(i,s,l,f);break;case 23:break;case 22:_=s.stateNode,b=s.alternate,s.memoizedState!==null?_._visibility&2?Xn(i,s,l,f):ml(i,s):_._visibility&2?Xn(i,s,l,f):(_._visibility|=2,Ns(i,s,l,f,(s.subtreeFlags&10256)!==0||!1)),v&2048&&am(b,s);break;case 24:Xn(i,s,l,f),v&2048&&lm(s.alternate,s);break;default:Xn(i,s,l,f)}}function Ns(i,s,l,f,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,b=s,R=l,P=f,G=b.flags;switch(b.tag){case 0:case 11:case 15:Ns(_,b,R,P,v),hl(8,b);break;case 23:break;case 22:var X=b.stateNode;b.memoizedState!==null?X._visibility&2?Ns(_,b,R,P,v):ml(_,b):(X._visibility|=2,Ns(_,b,R,P,v)),v&&G&2048&&am(b.alternate,b);break;case 24:Ns(_,b,R,P,v),v&&G&2048&&lm(b.alternate,b);break;default:Ns(_,b,R,P,v)}s=s.sibling}}function ml(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,f=s,v=f.flags;switch(f.tag){case 22:ml(l,f),v&2048&&am(f.alternate,f);break;case 24:ml(l,f),v&2048&&lm(f.alternate,f);break;default:ml(l,f)}s=s.sibling}}var gl=8192;function Is(i,s,l){if(i.subtreeFlags&gl)for(i=i.child;i!==null;)vE(i,s,l),i=i.sibling}function vE(i,s,l){switch(i.tag){case 26:Is(i,s,l),i.flags&gl&&i.memoizedState!==null&&CP(l,jn,i.memoizedState,i.memoizedProps);break;case 5:Is(i,s,l);break;case 3:case 4:var f=jn;jn=ef(i.stateNode.containerInfo),Is(i,s,l),jn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=gl,gl=16777216,Is(i,s,l),gl=f):Is(i,s,l));break;default:Is(i,s,l)}}function yE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function vl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];Et=f,SE(f,i)}yE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_E(i),i=i.sibling}function _E(i){switch(i.tag){case 0:case 11:case 15:vl(i),i.flags&2048&&Oi(9,i,i.return);break;case 3:vl(i);break;case 12:vl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,$c(i)):vl(i);break;default:vl(i)}}function $c(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];Et=f,SE(f,i)}yE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Oi(8,s,s.return),$c(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,$c(s));break;default:$c(s)}i=i.sibling}}function SE(i,s){for(;Et!==null;){var l=Et;switch(l.tag){case 0:case 11:case 15:Oi(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:el(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Et=f;else e:for(l=i;Et!==null;){f=Et;var v=f.sibling,_=f.return;if(cE(f),f===l){Et=null;break e}if(v!==null){v.return=_,Et=v;break e}Et=_}}}var H1={getCacheForType:function(i){var s=Mt(dt),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l},cacheSignal:function(){return Mt(dt).controller.signal}},$1=typeof WeakMap=="function"?WeakMap:Map,Je=0,Ze=null,De=null,Pe=0,Ke=0,fn=null,Pi=!1,Ds=!1,um=!1,Wo=0,at=0,ki=0,Mr=0,cm=0,dn=0,Os=0,yl=null,Wt=null,fm=!1,Gc=0,EE=0,Vc=1/0,zc=null,Li=null,vt=0,Ui=null,Ps=null,Qo=0,dm=0,hm=null,bE=null,_l=0,pm=null;function hn(){return(Je&2)!==0&&Pe!==0?Pe&-Pe:F.T!==null?Sm():B_()}function wE(){if(dn===0)if((Pe&536870912)===0||Le){var i=Qu;Qu<<=1,(Qu&3932160)===0&&(Qu=262144),dn=i}else dn=536870912;return i=un.current,i!==null&&(i.flags|=32),dn}function Qt(i,s,l){(i===Ze&&(Ke===2||Ke===9)||i.cancelPendingCommit!==null)&&(ks(i,0),Bi(i,Pe,dn,!1)),Ha(i,l),((Je&2)===0||i!==Ze)&&(i===Ze&&((Je&2)===0&&(Mr|=l),at===4&&Bi(i,Pe,dn,!1)),vo(i))}function TE(i,s,l){if((Je&6)!==0)throw Error(o(327));var f=!l&&(s&127)===0&&(s&i.expiredLanes)===0||Fa(i,s),v=f?z1(i,s):gm(i,s,!0),_=f;do{if(v===0){Ds&&!f&&Bi(i,s,0,!1);break}else{if(l=i.current.alternate,_&&!G1(l)){v=gm(i,s,!1),_=!1;continue}if(v===2){if(_=s,i.errorRecoveryDisabledLanes&_)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var R=i;v=yl;var P=R.current.memoizedState.isDehydrated;if(P&&(ks(R,b).flags|=256),b=gm(R,b,!1),b!==2){if(um&&!P){R.errorRecoveryDisabledLanes|=_,Mr|=_,v=4;break e}_=Wt,Wt=v,_!==null&&(Wt===null?Wt=_:Wt.push.apply(Wt,_))}v=b}if(_=!1,v!==2)continue}}if(v===1){ks(i,0),Bi(i,s,0,!0);break}e:{switch(f=i,_=v,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Bi(f,s,dn,!Pi);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(v=Gc+300-At(),10<v)){if(Bi(f,s,dn,!Pi),ec(f,0,!0)!==0)break e;Qo=s,f.timeoutHandle=tb(CE.bind(null,f,l,Wt,zc,fm,s,dn,Mr,Os,Pi,_,"Throttled",-0,0),v);break e}CE(f,l,Wt,zc,fm,s,dn,Mr,Os,Pi,_,null,-0,0)}}break}while(!0);vo(i)}function CE(i,s,l,f,v,_,b,R,P,G,X,te,z,K){if(i.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Uo},vE(s,_,te);var he=(_&62914560)===_?Gc-At():(_&4194048)===_?EE-At():0;if(he=AP(te,he),he!==null){Qo=_,i.cancelPendingCommit=he(OE.bind(null,i,s,_,l,f,v,b,R,P,X,te,null,z,K)),Bi(i,_,b,!G);return}}OE(i,s,_,l,f,v,b,R,P)}function G1(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],_=v.getSnapshot;v=v.value;try{if(!an(_(),v))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Bi(i,s,l,f){s&=~cm,s&=~Mr,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var v=s;0<v;){var _=31-sn(v),b=1<<_;f[_]=-1,v&=~b}l!==0&&k_(i,l,s)}function qc(){return(Je&6)===0?(Sl(0),!1):!0}function mm(){if(De!==null){if(Ke===0)var i=De.return;else i=De,$o=Sr=null,Ip(i),Cs=null,nl=0,i=De;for(;i!==null;)nE(i.alternate,i),i=i.return;De=null}}function ks(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,lP(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Qo=0,mm(),Ze=i,De=l=Fo(i.current,null),Pe=s,Ke=0,fn=null,Pi=!1,Ds=Fa(i,s),um=!1,Os=dn=cm=Mr=ki=at=0,Wt=yl=null,fm=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var v=31-sn(f),_=1<<v;s|=i[v],f&=~_}return Wo=s,dc(),l}function AE(i,s){xe=null,F.H=cl,s===Ts||s===Sc?(s=G0(),Ke=3):s===_p?(s=G0(),Ke=4):Ke=s===Kp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,De===null&&(at=1,Pc(i,xn(s,i.current)))}function xE(){var i=un.current;return i===null?!0:(Pe&4194048)===Pe?In===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?i===In:!1}function RE(){var i=F.H;return F.H=cl,i===null?cl:i}function ME(){var i=F.A;return F.A=H1,i}function Jc(){at=4,Pi||(Pe&4194048)!==Pe&&un.current!==null||(Ds=!0),(ki&134217727)===0&&(Mr&134217727)===0||Ze===null||Bi(Ze,Pe,dn,!1)}function gm(i,s,l){var f=Je;Je|=2;var v=RE(),_=ME();(Ze!==i||Pe!==s)&&(zc=null,ks(i,s)),s=!1;var b=at;e:do try{if(Ke!==0&&De!==null){var R=De,P=fn;switch(Ke){case 8:mm(),b=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(s=!0);var G=Ke;if(Ke=0,fn=null,Ls(i,R,P,G),l&&Ds){b=0;break e}break;default:G=Ke,Ke=0,fn=null,Ls(i,R,P,G)}}V1(),b=at;break}catch(X){AE(i,X)}while(!0);return s&&i.shellSuspendCounter++,$o=Sr=null,Je=f,F.H=v,F.A=_,De===null&&(Ze=null,Pe=0,dc()),b}function V1(){for(;De!==null;)NE(De)}function z1(i,s){var l=Je;Je|=2;var f=RE(),v=ME();Ze!==i||Pe!==s?(zc=null,Vc=At()+500,ks(i,s)):Ds=Fa(i,s);e:do try{if(Ke!==0&&De!==null){s=De;var _=fn;t:switch(Ke){case 1:Ke=0,fn=null,Ls(i,s,_,1);break;case 2:case 9:if(H0(_)){Ke=0,fn=null,IE(s);break}s=function(){Ke!==2&&Ke!==9||Ze!==i||(Ke=7),vo(i)},_.then(s,s);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:H0(_)?(Ke=0,fn=null,IE(s)):(Ke=0,fn=null,Ls(i,s,_,7));break;case 5:var b=null;switch(De.tag){case 26:b=De.memoizedState;case 5:case 27:var R=De;if(b?gb(b):R.stateNode.complete){Ke=0,fn=null;var P=R.sibling;if(P!==null)De=P;else{var G=R.return;G!==null?(De=G,Kc(G)):De=null}break t}}Ke=0,fn=null,Ls(i,s,_,5);break;case 6:Ke=0,fn=null,Ls(i,s,_,6);break;case 8:mm(),at=6;break e;default:throw Error(o(462))}}q1();break}catch(X){AE(i,X)}while(!0);return $o=Sr=null,F.H=f,F.A=v,Je=l,De!==null?0:(Ze=null,Pe=0,dc(),at)}function q1(){for(;De!==null&&!Yu();)NE(De)}function NE(i){var s=eE(i.alternate,i,Wo);i.memoizedProps=i.pendingProps,s===null?Kc(i):De=s}function IE(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=YS(l,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=YS(l,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Ip(s);default:nE(l,s),s=De=M0(s,Wo),s=eE(l,s,Wo)}i.memoizedProps=i.pendingProps,s===null?Kc(i):De=s}function Ls(i,s,l,f){$o=Sr=null,Ip(s),Cs=null,nl=0;var v=s.return;try{if(O1(i,v,s,l,Pe)){at=1,Pc(i,xn(l,i.current)),De=null;return}}catch(_){if(v!==null)throw De=v,_;at=1,Pc(i,xn(l,i.current)),De=null;return}s.flags&32768?(Le||f===1?i=!0:Ds||(Pe&536870912)!==0?i=!1:(Pi=i=!0,(f===2||f===9||f===3||f===6)&&(f=un.current,f!==null&&f.tag===13&&(f.flags|=16384))),DE(s,i)):Kc(s)}function Kc(i){var s=i;do{if((s.flags&32768)!==0){DE(s,Pi);return}i=s.return;var l=L1(s.alternate,s,Wo);if(l!==null){De=l;return}if(s=s.sibling,s!==null){De=s;return}De=s=i}while(s!==null);at===0&&(at=5)}function DE(i,s){do{var l=U1(i.alternate,i);if(l!==null){l.flags&=32767,De=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){De=i;return}De=i=l}while(i!==null);at=6,De=null}function OE(i,s,l,f,v,_,b,R,P){i.cancelPendingCommit=null;do Yc();while(vt!==0);if((Je&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=ip,TO(i,l,_,b,R,P),i===Ze&&(De=Ze=null,Pe=0),Ps=s,Ui=i,Qo=l,dm=_,hm=v,bE=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,j1(fr,function(){return BE(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=F.T,F.T=null,v=Q.p,Q.p=2,b=Je,Je|=4;try{B1(i,s,l)}finally{Je=b,Q.p=v,F.T=f}}vt=1,PE(),kE(),LE()}}function PE(){if(vt===1){vt=0;var i=Ui,s=Ps,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var f=Q.p;Q.p=2;var v=Je;Je|=4;try{pE(s,i);var _=Rm,b=S0(i.containerInfo),R=_.focusedElem,P=_.selectionRange;if(b!==R&&R&&R.ownerDocument&&_0(R.ownerDocument.documentElement,R)){if(P!==null&&Zh(R)){var G=P.start,X=P.end;if(X===void 0&&(X=G),"selectionStart"in R)R.selectionStart=G,R.selectionEnd=Math.min(X,R.value.length);else{var te=R.ownerDocument||document,z=te&&te.defaultView||window;if(z.getSelection){var K=z.getSelection(),he=R.textContent.length,be=Math.min(P.start,he),We=P.end===void 0?be:Math.min(P.end,he);!K.extend&&be>We&&(b=We,We=be,be=b);var H=y0(R,be),B=y0(R,We);if(H&&B&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var $=te.createRange();$.setStart(H.node,H.offset),K.removeAllRanges(),be>We?(K.addRange($),K.extend(B.node,B.offset)):($.setEnd(B.node,B.offset),K.addRange($))}}}}for(te=[],K=R;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var Z=te[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}af=!!xm,Rm=xm=null}finally{Je=v,Q.p=f,F.T=l}}i.current=s,vt=2}}function kE(){if(vt===2){vt=0;var i=Ui,s=Ps,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var f=Q.p;Q.p=2;var v=Je;Je|=4;try{uE(i,s.alternate,s)}finally{Je=v,Q.p=f,F.T=l}}vt=3}}function LE(){if(vt===4||vt===3){vt=0,ju();var i=Ui,s=Ps,l=Qo,f=bE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?vt=5:(vt=0,Ps=Ui=null,UE(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Li=null),Ph(l),s=s.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ba,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=F.T,v=Q.p,Q.p=2,F.T=null;try{for(var _=i.onRecoverableError,b=0;b<f.length;b++){var R=f[b];_(R.value,{componentStack:R.stack})}}finally{F.T=s,Q.p=v}}(Qo&3)!==0&&Yc(),vo(i),v=i.pendingLanes,(l&261930)!==0&&(v&42)!==0?i===pm?_l++:(_l=0,pm=i):_l=0,Sl(0)}}function UE(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,el(s)))}function Yc(){return PE(),kE(),LE(),BE()}function BE(){if(vt!==5)return!1;var i=Ui,s=dm;dm=0;var l=Ph(Qo),f=F.T,v=Q.p;try{Q.p=32>l?32:l,F.T=null,l=hm,hm=null;var _=Ui,b=Qo;if(vt=0,Ps=Ui=null,Qo=0,(Je&6)!==0)throw Error(o(331));var R=Je;if(Je|=4,_E(_.current),gE(_,_.current,b,l),Je=R,Sl(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ba,_)}catch{}return!0}finally{Q.p=v,F.T=f,UE(i,s)}}function FE(i,s,l){s=xn(l,s),s=Jp(i.stateNode,s,2),i=Ni(i,s,2),i!==null&&(Ha(i,2),vo(i))}function Ye(i,s,l){if(i.tag===3)FE(i,i,l);else for(;s!==null;){if(s.tag===3){FE(s,i,l);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Li===null||!Li.has(f))){i=xn(l,i),l=HS(2),f=Ni(s,l,2),f!==null&&($S(l,f,s,i),Ha(f,2),vo(f));break}}s=s.return}}function vm(i,s,l){var f=i.pingCache;if(f===null){f=i.pingCache=new $1;var v=new Set;f.set(s,v)}else v=f.get(s),v===void 0&&(v=new Set,f.set(s,v));v.has(l)||(um=!0,v.add(l),i=J1.bind(null,i,s,l),s.then(i,i))}function J1(i,s,l){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ze===i&&(Pe&l)===l&&(at===4||at===3&&(Pe&62914560)===Pe&&300>At()-Gc?(Je&2)===0&&ks(i,0):cm|=l,Os===Pe&&(Os=0)),vo(i)}function HE(i,s){s===0&&(s=P_()),i=vr(i,s),i!==null&&(Ha(i,s),vo(i))}function K1(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),HE(i,l)}function Y1(i,s){var l=0;switch(i.tag){case 31:case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(o(314))}f!==null&&f.delete(s),HE(i,l)}function j1(i,s){return Kn(i,s)}var jc=null,Us=null,ym=!1,Xc=!1,_m=!1,Fi=0;function vo(i){i!==Us&&i.next===null&&(Us===null?jc=Us=i:Us=Us.next=i),Xc=!0,ym||(ym=!0,W1())}function Sl(i,s){if(!_m&&Xc){_m=!0;do for(var l=!1,f=jc;f!==null;){if(i!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var b=f.suspendedLanes,R=f.pingedLanes;_=(1<<31-sn(42|i)+1)-1,_&=v&~(b&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,zE(f,_))}else _=Pe,_=ec(f,f===Ze?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Fa(f,_)||(l=!0,zE(f,_));f=f.next}while(l);_m=!1}}function X1(){$E()}function $E(){Xc=ym=!1;var i=0;Fi!==0&&aP()&&(i=Fi);for(var s=At(),l=null,f=jc;f!==null;){var v=f.next,_=GE(f,s);_===0?(f.next=null,l===null?jc=v:l.next=v,v===null&&(Us=l)):(l=f,(i!==0||(_&3)!==0)&&(Xc=!0)),f=v}vt!==0&&vt!==5||Sl(i),Fi!==0&&(Fi=0)}function GE(i,s){for(var l=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var b=31-sn(_),R=1<<b,P=v[b];P===-1?((R&l)===0||(R&f)!==0)&&(v[b]=wO(R,s)):P<=s&&(i.expiredLanes|=R),_&=~R}if(s=Ze,l=Pe,l=ec(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===s&&(Ke===2||Ke===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Si(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Fa(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(f!==null&&Si(f),Ph(l)){case 2:case 8:l=Ua;break;case 32:l=fr;break;case 268435456:l=O_;break;default:l=fr}return f=VE.bind(null,i),l=Kn(l,f),i.callbackPriority=s,i.callbackNode=l,s}return f!==null&&f!==null&&Si(f),i.callbackPriority=2,i.callbackNode=null,2}function VE(i,s){if(vt!==0&&vt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Yc()&&i.callbackNode!==l)return null;var f=Pe;return f=ec(i,i===Ze?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(TE(i,f,s),GE(i,At()),i.callbackNode!=null&&i.callbackNode===l?VE.bind(null,i):null)}function zE(i,s){if(Yc())return null;TE(i,s,!0)}function W1(){uP(function(){(Je&6)!==0?Kn(La,X1):$E()})}function Sm(){if(Fi===0){var i=bs;i===0&&(i=Wu,Wu<<=1,(Wu&261888)===0&&(Wu=256)),Fi=i}return Fi}function qE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ic(""+i)}function JE(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function Q1(i,s,l,f,v){if(s==="submit"&&l&&l.stateNode===v){var _=qE((v[Jt]||null).action),b=f.submitter;b&&(s=(s=b[Jt]||null)?qE(s.formAction):b.getAttribute("formAction"),s!==null&&(_=s,b=null));var R=new lc("action","action",null,f,v);i.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Fi!==0){var P=b?JE(v,b):new FormData(v);Hp(l,{pending:!0,data:P,method:v.method,action:_},null,P)}}else typeof _=="function"&&(R.preventDefault(),P=b?JE(v,b):new FormData(v),Hp(l,{pending:!0,data:P,method:v.method,action:_},_,P))},currentTarget:v}]})}}for(var Em=0;Em<op.length;Em++){var bm=op[Em],Z1=bm.toLowerCase(),eP=bm[0].toUpperCase()+bm.slice(1);Yn(Z1,"on"+eP)}Yn(w0,"onAnimationEnd"),Yn(T0,"onAnimationIteration"),Yn(C0,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(g1,"onTransitionRun"),Yn(v1,"onTransitionStart"),Yn(y1,"onTransitionCancel"),Yn(A0,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function KE(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],v=f.event;f=f.listeners;e:{var _=void 0;if(s)for(var b=f.length-1;0<=b;b--){var R=f[b],P=R.instance,G=R.currentTarget;if(R=R.listener,P!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=G;try{_(v)}catch(X){fc(X)}v.currentTarget=null,_=P}else for(b=0;b<f.length;b++){if(R=f[b],P=R.instance,G=R.currentTarget,R=R.listener,P!==_&&v.isPropagationStopped())break e;_=R,v.currentTarget=G;try{_(v)}catch(X){fc(X)}v.currentTarget=null,_=P}}}}function Oe(i,s){var l=s[kh];l===void 0&&(l=s[kh]=new Set);var f=i+"__bubble";l.has(f)||(YE(s,i,2,!1),l.add(f))}function wm(i,s,l){var f=0;s&&(f|=4),YE(l,i,f,s)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function Tm(i){if(!i[Wc]){i[Wc]=!0,$_.forEach(function(l){l!=="selectionchange"&&(tP.has(l)||wm(l,!1,i),wm(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Wc]||(s[Wc]=!0,wm("selectionchange",!1,s))}}function YE(i,s,l,f){switch(wb(s)){case 2:var v=MP;break;case 8:v=NP;break;default:v=Fm}l=v.bind(null,s,l,i),v=void 0,!zh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(s,l,{capture:!0,passive:v}):i.addEventListener(s,l,!0):v!==void 0?i.addEventListener(s,l,{passive:v}):i.addEventListener(s,l,!1)}function Cm(i,s,l,f,v){var _=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var R=f.stateNode.containerInfo;if(R===v)break;if(b===4)for(b=f.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===v)return;b=b.return}for(;R!==null;){if(b=rs(R),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){f=_=b;continue e}R=R.parentNode}}f=f.return}Z_(function(){var G=_,X=Gh(l),te=[];e:{var z=x0.get(i);if(z!==void 0){var K=lc,he=i;switch(i){case"keypress":if(sc(l)===0)break e;case"keydown":case"keyup":K=YO;break;case"focusin":he="focus",K=Yh;break;case"focusout":he="blur",K=Yh;break;case"beforeblur":case"afterblur":K=Yh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=LO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=WO;break;case w0:case T0:case C0:K=FO;break;case A0:K=ZO;break;case"scroll":case"scrollend":K=PO;break;case"wheel":K=t1;break;case"copy":case"cut":case"paste":K=$O;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=i0;break;case"toggle":case"beforetoggle":K=o1}var be=(s&4)!==0,We=!be&&(i==="scroll"||i==="scrollend"),H=be?z!==null?z+"Capture":null:z;be=[];for(var B=G,$;B!==null;){var Z=B;if($=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||$===null||H===null||(Z=Va(B,H),Z!=null&&be.push(bl(B,Z,$))),We)break;B=B.return}0<be.length&&(z=new K(z,he,null,l,X),te.push({event:z,listeners:be}))}}if((s&7)===0){e:{if(z=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",z&&l!==$h&&(he=l.relatedTarget||l.fromElement)&&(rs(he)||he[is]))break e;if((K||z)&&(z=X.window===X?X:(z=X.ownerDocument)?z.defaultView||z.parentWindow:window,K?(he=l.relatedTarget||l.toElement,K=G,he=he?rs(he):null,he!==null&&(We=a(he),be=he.tag,he!==We||be!==5&&be!==27&&be!==6)&&(he=null)):(K=null,he=G),K!==he)){if(be=n0,Z="onMouseLeave",H="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(be=i0,Z="onPointerLeave",H="onPointerEnter",B="pointer"),We=K==null?z:Ga(K),$=he==null?z:Ga(he),z=new be(Z,B+"leave",K,l,X),z.target=We,z.relatedTarget=$,Z=null,rs(X)===G&&(be=new be(H,B+"enter",he,l,X),be.target=$,be.relatedTarget=We,Z=be),We=Z,K&&he)t:{for(be=nP,H=K,B=he,$=0,Z=H;Z;Z=be(Z))$++;Z=0;for(var _e=B;_e;_e=be(_e))Z++;for(;0<$-Z;)H=be(H),$--;for(;0<Z-$;)B=be(B),Z--;for(;$--;){if(H===B||B!==null&&H===B.alternate){be=H;break t}H=be(H),B=be(B)}be=null}else be=null;K!==null&&jE(te,z,K,be,!1),he!==null&&We!==null&&jE(te,We,he,be,!0)}}e:{if(z=G?Ga(G):window,K=z.nodeName&&z.nodeName.toLowerCase(),K==="select"||K==="input"&&z.type==="file")var He=d0;else if(c0(z))if(h0)He=h1;else{He=f1;var ge=c1}else K=z.nodeName,!K||K.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?G&&Hh(G.elementType)&&(He=d0):He=d1;if(He&&(He=He(i,G))){f0(te,He,l,X);break e}ge&&ge(i,z,G),i==="focusout"&&G&&z.type==="number"&&G.memoizedProps.value!=null&&Fh(z,"number",z.value)}switch(ge=G?Ga(G):window,i){case"focusin":(c0(ge)||ge.contentEditable==="true")&&(ps=ge,ep=G,Wa=null);break;case"focusout":Wa=ep=ps=null;break;case"mousedown":tp=!0;break;case"contextmenu":case"mouseup":case"dragend":tp=!1,E0(te,l,X);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":E0(te,l,X)}var Me;if(Xh)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else hs?l0(i,l)&&(ke="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(r0&&l.locale!=="ko"&&(hs||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&hs&&(Me=e0()):(wi=X,qh="value"in wi?wi.value:wi.textContent,hs=!0)),ge=Qc(G,ke),0<ge.length&&(ke=new o0(ke,i,null,l,X),te.push({event:ke,listeners:ge}),Me?ke.data=Me:(Me=u0(l),Me!==null&&(ke.data=Me)))),(Me=r1?s1(i,l):a1(i,l))&&(ke=Qc(G,"onBeforeInput"),0<ke.length&&(ge=new o0("onBeforeInput","beforeinput",null,l,X),te.push({event:ge,listeners:ke}),ge.data=Me)),Q1(te,i,G,l,X)}KE(te,s)})}function bl(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Qc(i,s){for(var l=s+"Capture",f=[];i!==null;){var v=i,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=Va(i,l),v!=null&&f.unshift(bl(i,v,_)),v=Va(i,s),v!=null&&f.push(bl(i,v,_))),i.tag===3)return f;i=i.return}return[]}function nP(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function jE(i,s,l,f,v){for(var _=s._reactName,b=[];l!==null&&l!==f;){var R=l,P=R.alternate,G=R.stateNode;if(R=R.tag,P!==null&&P===f)break;R!==5&&R!==26&&R!==27||G===null||(P=G,v?(G=Va(l,_),G!=null&&b.unshift(bl(l,G,P))):v||(G=Va(l,_),G!=null&&b.push(bl(l,G,P)))),l=l.return}b.length!==0&&i.push({event:s,listeners:b})}var oP=/\r\n?/g,iP=/\u0000|\uFFFD/g;function XE(i){return(typeof i=="string"?i:""+i).replace(oP,`
`).replace(iP,"")}function WE(i,s){return s=XE(s),XE(i)===s}function Xe(i,s,l,f,v,_){switch(l){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||cs(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&cs(i,""+f);break;case"className":nc(i,"class",f);break;case"tabIndex":nc(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":nc(i,l,f);break;case"style":W_(i,f,_);break;case"data":if(s!=="object"){nc(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=ic(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&Xe(i,s,"name",v.name,v,null),Xe(i,s,"formEncType",v.formEncType,v,null),Xe(i,s,"formMethod",v.formMethod,v,null),Xe(i,s,"formTarget",v.formTarget,v,null)):(Xe(i,s,"encType",v.encType,v,null),Xe(i,s,"method",v.method,v,null),Xe(i,s,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=ic(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=Uo);break;case"onScroll":f!=null&&Oe("scroll",i);break;case"onScrollEnd":f!=null&&Oe("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(o(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=ic(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":Oe("beforetoggle",i),Oe("toggle",i),tc(i,"popover",f);break;case"xlinkActuate":Lo(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Lo(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Lo(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Lo(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Lo(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Lo(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Lo(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Lo(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Lo(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":tc(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=DO.get(l)||l,tc(i,l,f))}}function Am(i,s,l,f,v,_){switch(l){case"style":W_(i,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(o(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"children":typeof f=="string"?cs(i,f):(typeof f=="number"||typeof f=="bigint")&&cs(i,""+f);break;case"onScroll":f!=null&&Oe("scroll",i);break;case"onScrollEnd":f!=null&&Oe("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Uo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!G_.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),s=l.slice(2,v?l.length-7:void 0),_=i[Jt]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(s,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,f,v);break e}l in i?i[l]=f:f===!0?i.setAttribute(l,""):tc(i,l,f)}}}function It(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",i),Oe("load",i);var f=!1,v=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var b=l[_];if(b!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Xe(i,s,_,b,l,null)}}v&&Xe(i,s,"srcSet",l.srcSet,l,null),f&&Xe(i,s,"src",l.src,l,null);return;case"input":Oe("invalid",i);var R=_=b=v=null,P=null,G=null;for(f in l)if(l.hasOwnProperty(f)){var X=l[f];if(X!=null)switch(f){case"name":v=X;break;case"type":b=X;break;case"checked":P=X;break;case"defaultChecked":G=X;break;case"value":_=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,s));break;default:Xe(i,s,f,X,l,null)}}K_(i,_,R,P,G,b,v,!1);return;case"select":Oe("invalid",i),f=b=_=null;for(v in l)if(l.hasOwnProperty(v)&&(R=l[v],R!=null))switch(v){case"value":_=R;break;case"defaultValue":b=R;break;case"multiple":f=R;default:Xe(i,s,v,R,l,null)}s=_,l=b,i.multiple=!!f,s!=null?us(i,!!f,s,!1):l!=null&&us(i,!!f,l,!0);return;case"textarea":Oe("invalid",i),_=v=f=null;for(b in l)if(l.hasOwnProperty(b)&&(R=l[b],R!=null))switch(b){case"value":f=R;break;case"defaultValue":v=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:Xe(i,s,b,R,l,null)}j_(i,f,v,_);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(f=l[P],f!=null))switch(P){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Xe(i,s,P,f,l,null)}return;case"dialog":Oe("beforetoggle",i),Oe("toggle",i),Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":Oe("load",i);break;case"video":case"audio":for(f=0;f<El.length;f++)Oe(El[f],i);break;case"image":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"embed":case"source":case"link":Oe("error",i),Oe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(f=l[G],f!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Xe(i,s,G,f,l,null)}return;default:if(Hh(s)){for(X in l)l.hasOwnProperty(X)&&(f=l[X],f!==void 0&&Am(i,s,X,f,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(f=l[R],f!=null&&Xe(i,s,R,f,l,null))}function rP(i,s,l,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,b=null,R=null,P=null,G=null,X=null;for(K in l){var te=l[K];if(l.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=te;default:f.hasOwnProperty(K)||Xe(i,s,K,null,f,te)}}for(var z in f){var K=f[z];if(te=l[z],f.hasOwnProperty(z)&&(K!=null||te!=null))switch(z){case"type":_=K;break;case"name":v=K;break;case"checked":G=K;break;case"defaultChecked":X=K;break;case"value":b=K;break;case"defaultValue":R=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,s));break;default:K!==te&&Xe(i,s,z,K,f,te)}}Bh(i,b,R,P,G,X,_,v);return;case"select":K=b=R=z=null;for(_ in l)if(P=l[_],l.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":K=P;default:f.hasOwnProperty(_)||Xe(i,s,_,null,f,P)}for(v in f)if(_=f[v],P=l[v],f.hasOwnProperty(v)&&(_!=null||P!=null))switch(v){case"value":z=_;break;case"defaultValue":R=_;break;case"multiple":b=_;default:_!==P&&Xe(i,s,v,_,f,P)}s=R,l=b,f=K,z!=null?us(i,!!l,z,!1):!!f!=!!l&&(s!=null?us(i,!!l,s,!0):us(i,!!l,l?[]:"",!1));return;case"textarea":K=z=null;for(R in l)if(v=l[R],l.hasOwnProperty(R)&&v!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Xe(i,s,R,null,f,v)}for(b in f)if(v=f[b],_=l[b],f.hasOwnProperty(b)&&(v!=null||_!=null))switch(b){case"value":z=v;break;case"defaultValue":K=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:v!==_&&Xe(i,s,b,v,f,_)}Y_(i,z,K);return;case"option":for(var he in l)if(z=l[he],l.hasOwnProperty(he)&&z!=null&&!f.hasOwnProperty(he))switch(he){case"selected":i.selected=!1;break;default:Xe(i,s,he,null,f,z)}for(P in f)if(z=f[P],K=l[P],f.hasOwnProperty(P)&&z!==K&&(z!=null||K!=null))switch(P){case"selected":i.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xe(i,s,P,z,f,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in l)z=l[be],l.hasOwnProperty(be)&&z!=null&&!f.hasOwnProperty(be)&&Xe(i,s,be,null,f,z);for(G in f)if(z=f[G],K=l[G],f.hasOwnProperty(G)&&z!==K&&(z!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:Xe(i,s,G,z,f,K)}return;default:if(Hh(s)){for(var We in l)z=l[We],l.hasOwnProperty(We)&&z!==void 0&&!f.hasOwnProperty(We)&&Am(i,s,We,void 0,f,z);for(X in f)z=f[X],K=l[X],!f.hasOwnProperty(X)||z===K||z===void 0&&K===void 0||Am(i,s,X,z,f,K);return}}for(var H in l)z=l[H],l.hasOwnProperty(H)&&z!=null&&!f.hasOwnProperty(H)&&Xe(i,s,H,null,f,z);for(te in f)z=f[te],K=l[te],!f.hasOwnProperty(te)||z===K||z==null&&K==null||Xe(i,s,te,z,f,K)}function QE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sP(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var v=l[f],_=v.transferSize,b=v.initiatorType,R=v.duration;if(_&&R&&QE(b)){for(b=0,R=v.responseEnd,f+=1;f<l.length;f++){var P=l[f],G=P.startTime;if(G>R)break;var X=P.transferSize,te=P.initiatorType;X&&QE(te)&&(P=P.responseEnd,b+=X*(P<R?1:(R-G)/(P-G)))}if(--f,s+=8*(_+b)/(v.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var xm=null,Rm=null;function Zc(i){return i.nodeType===9?i:i.ownerDocument}function ZE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eb(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Mm(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Nm=null;function aP(){var i=window.event;return i&&i.type==="popstate"?i===Nm?!1:(Nm=i,!0):(Nm=null,!1)}var tb=typeof setTimeout=="function"?setTimeout:void 0,lP=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,uP=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(i){return nb.resolve(null).then(i).catch(cP)}:tb;function cP(i){setTimeout(function(){throw i})}function Hi(i){return i==="head"}function ob(i,s){var l=s,f=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(f===0){i.removeChild(v),$s(s);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")wl(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,wl(l);for(var _=l.firstChild;_;){var b=_.nextSibling,R=_.nodeName;_[$a]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=b}}else l==="body"&&wl(i.ownerDocument.body);l=v}while(l);$s(s)}function ib(i,s){var l=i;i=0;do{var f=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=f}while(l)}function Im(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Im(l),Lh(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function fP(i,s,l,f){for(;i.nodeType===1;){var v=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[$a])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Dn(i.nextSibling),i===null)break}return null}function dP(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Dn(i.nextSibling),i===null))return null;return i}function rb(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Dn(i.nextSibling),i===null))return null;return i}function Dm(i){return i.data==="$?"||i.data==="$~"}function Om(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function hP(i,s){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||l.readyState!=="loading")s();else{var f=function(){s(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Dn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Pm=null;function sb(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(s===0)return Dn(i.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}i=i.nextSibling}return null}function ab(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return i;s--}else l!=="/$"&&l!=="/&"||s++}i=i.previousSibling}return null}function lb(i,s,l){switch(s=Zc(l),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function wl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Lh(i)}var On=new Map,ub=new Set;function ef(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Zo=Q.d;Q.d={f:pP,r:mP,D:gP,C:vP,L:yP,m:_P,X:EP,S:SP,M:bP};function pP(){var i=Zo.f(),s=qc();return i||s}function mP(i){var s=ss(i);s!==null&&s.tag===5&&s.type==="form"?AS(s):Zo.r(i)}var Bs=typeof document>"u"?null:document;function cb(i,s,l){var f=Bs;if(f&&typeof s=="string"&&s){var v=Cn(s);v='link[rel="'+i+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),ub.has(v)||(ub.add(v),i={rel:i,crossOrigin:l,href:s},f.querySelector(v)===null&&(s=f.createElement("link"),It(s,"link",i),St(s),f.head.appendChild(s)))}}function gP(i){Zo.D(i),cb("dns-prefetch",i,null)}function vP(i,s){Zo.C(i,s),cb("preconnect",i,s)}function yP(i,s,l){Zo.L(i,s,l);var f=Bs;if(f&&i&&s){var v='link[rel="preload"][as="'+Cn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Cn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Cn(l.imageSizes)+'"]')):v+='[href="'+Cn(i)+'"]';var _=v;switch(s){case"style":_=Fs(i);break;case"script":_=Hs(i)}On.has(_)||(i=y({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),On.set(_,i),f.querySelector(v)!==null||s==="style"&&f.querySelector(Tl(_))||s==="script"&&f.querySelector(Cl(_))||(s=f.createElement("link"),It(s,"link",i),St(s),f.head.appendChild(s)))}}function _P(i,s){Zo.m(i,s);var l=Bs;if(l&&i){var f=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+Cn(f)+'"][href="'+Cn(i)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Hs(i)}if(!On.has(_)&&(i=y({rel:"modulepreload",href:i},s),On.set(_,i),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Cl(_)))return}f=l.createElement("link"),It(f,"link",i),St(f),l.head.appendChild(f)}}}function SP(i,s,l){Zo.S(i,s,l);var f=Bs;if(f&&i){var v=as(f).hoistableStyles,_=Fs(i);s=s||"default";var b=v.get(_);if(!b){var R={loading:0,preload:null};if(b=f.querySelector(Tl(_)))R.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},l),(l=On.get(_))&&km(i,l);var P=b=f.createElement("link");St(P),It(P,"link",i),P._p=new Promise(function(G,X){P.onload=G,P.onerror=X}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,tf(b,s,f)}b={type:"stylesheet",instance:b,count:1,state:R},v.set(_,b)}}}function EP(i,s){Zo.X(i,s);var l=Bs;if(l&&i){var f=as(l).hoistableScripts,v=Hs(i),_=f.get(v);_||(_=l.querySelector(Cl(v)),_||(i=y({src:i,async:!0},s),(s=On.get(v))&&Lm(i,s),_=l.createElement("script"),St(_),It(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function bP(i,s){Zo.M(i,s);var l=Bs;if(l&&i){var f=as(l).hoistableScripts,v=Hs(i),_=f.get(v);_||(_=l.querySelector(Cl(v)),_||(i=y({src:i,async:!0,type:"module"},s),(s=On.get(v))&&Lm(i,s),_=l.createElement("script"),St(_),It(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function fb(i,s,l,f){var v=(v=Ee.current)?ef(v):null;if(!v)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Fs(l.href),l=as(v).hoistableStyles,f=l.get(s),f||(f={type:"style",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Fs(l.href);var _=as(v).hoistableStyles,b=_.get(i);if(b||(v=v.ownerDocument||v,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,b),(_=v.querySelector(Tl(i)))&&!_._p&&(b.instance=_,b.state.loading=5),On.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},On.set(i,l),_||wP(v,i,l,b.state))),s&&f===null)throw Error(o(528,""));return b}if(s&&f!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Hs(l),l=as(v).hoistableScripts,f=l.get(s),f||(f={type:"script",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Fs(i){return'href="'+Cn(i)+'"'}function Tl(i){return'link[rel="stylesheet"]['+i+"]"}function db(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function wP(i,s,l,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),It(s,"link",l),St(s),i.head.appendChild(s))}function Hs(i){return'[src="'+Cn(i)+'"]'}function Cl(i){return"script[async]"+i}function hb(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+Cn(l.href)+'"]');if(f)return s.instance=f,St(f),f;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),St(f),It(f,"style",v),tf(f,l.precedence,i),s.instance=f;case"stylesheet":v=Fs(l.href);var _=i.querySelector(Tl(v));if(_)return s.state.loading|=4,s.instance=_,St(_),_;f=db(l),(v=On.get(v))&&km(f,v),_=(i.ownerDocument||i).createElement("link"),St(_);var b=_;return b._p=new Promise(function(R,P){b.onload=R,b.onerror=P}),It(_,"link",f),s.state.loading|=4,tf(_,l.precedence,i),s.instance=_;case"script":return _=Hs(l.src),(v=i.querySelector(Cl(_)))?(s.instance=v,St(v),v):(f=l,(v=On.get(_))&&(f=y({},l),Lm(f,v)),i=i.ownerDocument||i,v=i.createElement("script"),St(v),It(v,"link",f),i.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,tf(f,l.precedence,i));return s.instance}function tf(i,s,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,b=0;b<f.length;b++){var R=f[b];if(R.dataset.precedence===s)_=R;else if(_!==v)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function km(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Lm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var nf=null;function pb(i,s,l){if(nf===null){var f=new Map,v=nf=new Map;v.set(l,f)}else v=nf,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),v=0;v<l.length;v++){var _=l[v];if(!(_[$a]||_[xt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var b=_.getAttribute(s)||"";b=i+b;var R=f.get(b);R?R.push(_):f.set(b,[_])}}return f}function mb(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function TP(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function CP(i,s,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Fs(f.href),_=s.querySelector(Tl(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=of.bind(i),s.then(i,i)),l.state.loading|=4,l.instance=_,St(_);return}_=s.ownerDocument||s,f=db(f),(v=On.get(v))&&km(f,v),_=_.createElement("link"),St(_);var b=_;b._p=new Promise(function(R,P){b.onload=R,b.onerror=P}),It(_,"link",f),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=of.bind(i),s.addEventListener("load",l),s.addEventListener("error",l))}}var Um=0;function AP(i,s){return i.stylesheets&&i.count===0&&sf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var f=setTimeout(function(){if(i.stylesheets&&sf(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&Um===0&&(Um=62500*sP());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&sf(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Um?50:800)+s);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rf=null;function sf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rf=new Map,s.forEach(xP,i),rf=null,of.call(i))}function xP(i,s){if(!(s.state.loading&4)){var l=rf.get(i);if(l)var f=l.get(null);else{l=new Map,rf.set(i,l);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var b=v[_];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),f=b)}f&&l.set(null,f)}v=s.instance,b=v.getAttribute("data-precedence"),_=l.get(b)||f,_===f&&l.set(null,v),l.set(b,v),this.count++,f=of.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),s.state.loading|=4}}var Al={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function RP(i,s,l,f,v,_,b,R,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.hiddenUpdates=Dh(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function vb(i,s,l,f,v,_,b,R,P,G,X,te){return i=new RP(i,s,l,b,P,G,X,te,R),s=1,_===!0&&(s|=24),_=ln(3,null,null,s),i.current=_,_.stateNode=i,s=gp(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:f,isDehydrated:l,cache:s},Sp(_),i}function yb(i){return i?(i=vs,i):vs}function _b(i,s,l,f,v,_){v=yb(v),f.context===null?f.context=v:f.pendingContext=v,f=Mi(s),f.payload={element:l},_=_===void 0?null:_,_!==null&&(f.callback=_),l=Ni(i,f,s),l!==null&&(Qt(l,i,s),il(l,i,s))}function Sb(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function Bm(i,s){Sb(i,s),(i=i.alternate)&&Sb(i,s)}function Eb(i){if(i.tag===13||i.tag===31){var s=vr(i,67108864);s!==null&&Qt(s,i,67108864),Bm(i,67108864)}}function bb(i){if(i.tag===13||i.tag===31){var s=hn();s=Oh(s);var l=vr(i,s);l!==null&&Qt(l,i,s),Bm(i,s)}}var af=!0;function MP(i,s,l,f){var v=F.T;F.T=null;var _=Q.p;try{Q.p=2,Fm(i,s,l,f)}finally{Q.p=_,F.T=v}}function NP(i,s,l,f){var v=F.T;F.T=null;var _=Q.p;try{Q.p=8,Fm(i,s,l,f)}finally{Q.p=_,F.T=v}}function Fm(i,s,l,f){if(af){var v=Hm(f);if(v===null)Cm(i,s,f,lf,l),Tb(i,f);else if(DP(v,i,s,l,f))f.stopPropagation();else if(Tb(i,f),s&4&&-1<IP.indexOf(i)){for(;v!==null;){var _=ss(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var b=dr(_.pendingLanes);if(b!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;b;){var P=1<<31-sn(b);R.entanglements[1]|=P,b&=~P}vo(_),(Je&6)===0&&(Vc=At()+500,Sl(0))}}break;case 31:case 13:R=vr(_,2),R!==null&&Qt(R,_,2),qc(),Bm(_,2)}if(_=Hm(f),_===null&&Cm(i,s,f,lf,l),_===v)break;v=_}v!==null&&f.stopPropagation()}else Cm(i,s,f,null,l)}}function Hm(i){return i=Gh(i),$m(i)}var lf=null;function $m(i){if(lf=null,i=rs(i),i!==null){var s=a(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=u(s),i!==null)return i;i=null}else if(l===31){if(i=c(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return lf=i,null}function wb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xu()){case La:return 2;case Ua:return 8;case fr:case vO:return 32;case O_:return 268435456;default:return 32}default:return 32}}var Gm=!1,$i=null,Gi=null,Vi=null,xl=new Map,Rl=new Map,zi=[],IP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tb(i,s){switch(i){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":xl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(s.pointerId)}}function Ml(i,s,l,f,v,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:l,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},s!==null&&(s=ss(s),s!==null&&Eb(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),i)}function DP(i,s,l,f,v){switch(s){case"focusin":return $i=Ml($i,i,s,l,f,v),!0;case"dragenter":return Gi=Ml(Gi,i,s,l,f,v),!0;case"mouseover":return Vi=Ml(Vi,i,s,l,f,v),!0;case"pointerover":var _=v.pointerId;return xl.set(_,Ml(xl.get(_)||null,i,s,l,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Rl.set(_,Ml(Rl.get(_)||null,i,s,l,f,v)),!0}return!1}function Cb(i){var s=rs(i.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){i.blockedOn=s,F_(i.priority,function(){bb(l)});return}}else if(s===31){if(s=c(l),s!==null){i.blockedOn=s,F_(i.priority,function(){bb(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function uf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=Hm(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);$h=f,l.target.dispatchEvent(f),$h=null}else return s=ss(l),s!==null&&Eb(s),i.blockedOn=l,!1;s.shift()}return!0}function Ab(i,s,l){uf(i)&&l.delete(s)}function OP(){Gm=!1,$i!==null&&uf($i)&&($i=null),Gi!==null&&uf(Gi)&&(Gi=null),Vi!==null&&uf(Vi)&&(Vi=null),xl.forEach(Ab),Rl.forEach(Ab)}function cf(i,s){i.blockedOn===s&&(i.blockedOn=null,Gm||(Gm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,OP)))}var ff=null;function xb(i){ff!==i&&(ff=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ff===i&&(ff=null);for(var s=0;s<i.length;s+=3){var l=i[s],f=i[s+1],v=i[s+2];if(typeof f!="function"){if($m(f||l)===null)continue;break}var _=ss(l);_!==null&&(i.splice(s,3),s-=3,Hp(_,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function $s(i){function s(P){return cf(P,i)}$i!==null&&cf($i,i),Gi!==null&&cf(Gi,i),Vi!==null&&cf(Vi,i),xl.forEach(s),Rl.forEach(s);for(var l=0;l<zi.length;l++){var f=zi[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<zi.length&&(l=zi[0],l.blockedOn===null);)Cb(l),l.blockedOn===null&&zi.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],_=l[f+1],b=v[Jt]||null;if(typeof _=="function")b||xb(l);else if(b){var R=null;if(_&&_.hasAttribute("formAction")){if(v=_,b=_[Jt]||null)R=b.formAction;else if($m(v)!==null)continue}else R=b.action;typeof R=="function"?l[f+1]=R:(l.splice(f,3),f-=3),xb(l)}}}function Rb(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(b){return v=b})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Vm(i){this._internalRoot=i}df.prototype.render=Vm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,f=hn();_b(l,f,i,s,null,null)},df.prototype.unmount=Vm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;_b(i.current,2,null,i,null,null),qc(),s[is]=null}};function df(i){this._internalRoot=i}df.prototype.unstable_scheduleHydration=function(i){if(i){var s=B_();i={blockedOn:null,target:i,priority:s};for(var l=0;l<zi.length&&s!==0&&s<zi[l].priority;l++);zi.splice(l,0,i),l===0&&Cb(i)}};var Mb=e.version;if(Mb!=="19.2.1")throw Error(o(527,Mb,"19.2.1"));Q.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=d(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var PP={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{Ba=hf.inject(PP),rn=hf}catch{}}return Il.createRoot=function(i,s){if(!r(i))throw Error(o(299));var l=!1,f="",v=LS,_=US,b=BS;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=vb(i,1,!1,null,null,l,f,null,v,_,b,Rb),i[is]=s.current,Tm(i),new Vm(s)},Il.hydrateRoot=function(i,s,l){if(!r(i))throw Error(o(299));var f=!1,v="",_=LS,b=US,R=BS,P=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),s=vb(i,1,!0,s,l??null,f,v,P,_,b,R,Rb),s.context=yb(null),l=s.current,f=hn(),f=Oh(f),v=Mi(f),v.callback=null,Ni(l,v,f),l=f,s.current.lanes=l,Ha(s,l),vo(s),i[is]=s.current,Tm(i),new df(s)},Il.version="19.2.1",Il}var Fb;function zP(){if(Fb)return Jm.exports;Fb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jm.exports=VP(),Jm.exports}var qP=zP();function Be(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var JP={};function qd(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:JP}var FA=Object.assign,ud=Object.getOwnPropertyDescriptor,Co=Object.defineProperty,Su=Object.prototype,Kg=[];Object.freeze(Kg);var HA={};Object.freeze(HA);var KP=typeof Proxy<"u",YP=Object.toString();function $A(){KP||Be("Proxy not available")}function GA(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var ia=function(){};function so(t){return typeof t=="function"}function Hr(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Jd(t){return t!==null&&typeof t=="object"}function ui(t){if(!Jd(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n.toString()===YP}function VA(t){var e=t?.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Eu(t,e,n){Co(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function zA(t,e,n){Co(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function ir(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(o){return Jd(o)&&o[n]===!0}}function wa(t){return t!=null&&Object.prototype.toString.call(t)==="[object Map]"}function jP(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e),o=Object.getPrototypeOf(n);return o===null}function oi(t){return t!=null&&Object.prototype.toString.call(t)==="[object Set]"}var qA=typeof Object.getOwnPropertySymbols<"u";function XP(t){var e=Object.keys(t);if(!qA)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter(function(o){return Su.propertyIsEnumerable.call(t,o)})):e}var ma=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:qA?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function JA(t){return t===null?null:typeof t=="object"?""+t:t}function si(t,e){return Su.hasOwnProperty.call(t,e)}var WP=Object.getOwnPropertyDescriptors||function(e){var n={};return ma(e).forEach(function(o){n[o]=ud(e,o)}),n};function yn(t,e){return!!(t&e)}function _n(t,e,n){return n?t|=e:t&=~e,t}function Hb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function QP(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,ek(o.key),o)}}function Ta(t,e,n){return e&&QP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ra(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=tk(t))||e){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $r(){return $r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},$r.apply(null,arguments)}function KA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Yg(t,e)}function Yg(t,e){return Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Yg(t,e)}function ZP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ek(t){var e=ZP(t,"string");return typeof e=="symbol"?e:e+""}function tk(t,e){if(t){if(typeof t=="string")return Hb(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hb(t,e):void 0}}var bo=Symbol("mobx-stored-annotations");function Ao(t){function e(n,o){if(wu(o))return t.decorate_20223_(n,o);bu(n,o,t)}return Object.assign(e,t)}function bu(t,e,n){si(t,bo)||Eu(t,bo,$r({},t[bo])),lk(n)||(t[bo][e]=n)}function nk(t){return si(t,bo)||Eu(t,bo,$r({},t[bo])),t[bo]}function wu(t){return typeof t=="object"&&typeof t.kind=="string"}var we=Symbol("mobx administration"),rr=(function(){function t(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=Ge.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(o){return o()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(o){return o()})},e.reportObserved=function(){return cx(this)},e.reportChanged=function(){Un(),fx(this),Bn()},e.toString=function(){return this.name_},Ta(t,[{key:"isBeingObserved",get:function(){return yn(this.flags_,t.isBeingObservedMask_)},set:function(o){this.flags_=_n(this.flags_,t.isBeingObservedMask_,o)}},{key:"isPendingUnobservation",get:function(){return yn(this.flags_,t.isPendingUnobservationMask_)},set:function(o){this.flags_=_n(this.flags_,t.isPendingUnobservationMask_,o)}},{key:"diffValue",get:function(){return yn(this.flags_,t.diffValueMask_)?1:0},set:function(o){this.flags_=_n(this.flags_,t.diffValueMask_,o===1)}}])})();rr.isBeingObservedMask_=1;rr.isPendingUnobservationMask_=2;rr.diffValueMask_=4;var oy=ir("Atom",rr);function YA(t,e,n){e===void 0&&(e=ia),n===void 0&&(n=ia);var o=new rr(t);return e!==ia&&fL(o,e),n!==ia&&vx(o,n),o}function ok(t,e){return Mx(t,e)}function ik(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var cd={structural:ok,default:ik};function Gr(t,e,n){return ly(t)?t:Array.isArray(t)?wt.array(t,{name:n}):ui(t)?wt.object(t,void 0,{name:n}):wa(t)?wt.map(t,{name:n}):oi(t)?wt.set(t,{name:n}):typeof t=="function"&&!ga(t)&&!ru(t)?VA(t)?va(t):iu(n,t):t}function rk(t,e,n){if(t==null||Mu(t)||Ru(t)||sr(t)||Zn(t))return t;if(Array.isArray(t))return wt.array(t,{name:n,deep:!1});if(ui(t))return wt.object(t,void 0,{name:n,deep:!1});if(wa(t))return wt.map(t,{name:n,deep:!1});if(oi(t))return wt.set(t,{name:n,deep:!1})}function Kd(t){return t}function sk(t,e){return Mx(t,e)?e:t}var ak="override";function lk(t){return t.annotationType_===ak}function Tu(t,e){return{annotationType_:t,options_:e,make_:uk,extend_:ck,decorate_20223_:fk}}function uk(t,e,n,o){var r;if((r=this.options_)!=null&&r.bound)return this.extend_(t,e,n,!1)===null?0:1;if(o===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if(ga(n.value))return 1;var a=jA(t,this,e,n,!1);return Co(o,e,a),2}function ck(t,e,n,o){var r=jA(t,this,e,n);return t.defineProperty_(e,r,o)}function fk(t,e){var n=e.kind,o=e.name,r=e.addInitializer,a=this,u=function(d){var m,y,S,E;return Vr((m=(y=a.options_)==null?void 0:y.name)!=null?m:o.toString(),d,(S=(E=a.options_)==null?void 0:E.autoAction)!=null?S:!1)};if(n=="field")return function(h){var d,m=h;return ga(m)||(m=u(m)),(d=a.options_)!=null&&d.bound&&(m=m.bind(this),m.isMobxAction=!0),m};if(n=="method"){var c;return ga(t)||(t=u(t)),(c=this.options_)!=null&&c.bound&&r(function(){var h=this,d=h[o].bind(h);d.isMobxAction=!0,h[o]=d}),t}Be("Cannot apply '"+a.annotationType_+"' to '"+String(o)+"' (kind: "+n+"):"+(`
'`+a.annotationType_+"' can only be used on properties with a function value."))}function dk(t,e,n,o){e.annotationType_,o.value}function jA(t,e,n,o,r){var a,u,c,h,d,m,y;r===void 0&&(r=ue.safeDescriptors),dk(t,e,n,o);var S=o.value;if((a=e.options_)!=null&&a.bound){var E;S=S.bind((E=t.proxy_)!=null?E:t.target_)}return{value:Vr((u=(c=e.options_)==null?void 0:c.name)!=null?u:n.toString(),S,(h=(d=e.options_)==null?void 0:d.autoAction)!=null?h:!1,(m=e.options_)!=null&&m.bound?(y=t.proxy_)!=null?y:t.target_:void 0),configurable:r?t.isPlainObject_:!0,enumerable:!1,writable:!r}}function XA(t,e){return{annotationType_:t,options_:e,make_:hk,extend_:pk,decorate_20223_:mk}}function hk(t,e,n,o){var r;if(o===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if((r=this.options_)!=null&&r.bound&&(!si(t.target_,e)||!ru(t.target_[e]))&&this.extend_(t,e,n,!1)===null)return 0;if(ru(n.value))return 1;var a=WA(t,this,e,n,!1,!1);return Co(o,e,a),2}function pk(t,e,n,o){var r,a=WA(t,this,e,n,(r=this.options_)==null?void 0:r.bound);return t.defineProperty_(e,a,o)}function mk(t,e){var n,o=e.name,r=e.addInitializer;return ru(t)||(t=va(t)),(n=this.options_)!=null&&n.bound&&r(function(){var a=this,u=a[o].bind(a);u.isMobXFlow=!0,a[o]=u}),t}function gk(t,e,n,o){e.annotationType_,o.value}function WA(t,e,n,o,r,a){a===void 0&&(a=ue.safeDescriptors),gk(t,e,n,o);var u=o.value;if(ru(u)||(u=va(u)),r){var c;u=u.bind((c=t.proxy_)!=null?c:t.target_),u.isMobXFlow=!0}return{value:u,configurable:a?t.isPlainObject_:!0,enumerable:!1,writable:!a}}function iy(t,e){return{annotationType_:t,options_:e,make_:vk,extend_:yk,decorate_20223_:_k}}function vk(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function yk(t,e,n,o){return Sk(t,this,e,n),t.defineComputedProperty_(e,$r({},this.options_,{get:n.get,set:n.set}),o)}function _k(t,e){var n=this,o=e.name,r=e.addInitializer;return r(function(){var a=es(this)[we],u=$r({},n.options_,{get:t,context:this});u.name||(u.name="ObservableObject."+o.toString()),a.values_.set(o,new ao(u))}),function(){return this[we].getObservablePropValue_(o)}}function Sk(t,e,n,o){e.annotationType_,o.get}function Yd(t,e){return{annotationType_:t,options_:e,make_:Ek,extend_:bk,decorate_20223_:wk}}function Ek(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function bk(t,e,n,o){var r,a;return Tk(t,this),t.defineObservableProperty_(e,n.value,(r=(a=this.options_)==null?void 0:a.enhancer)!=null?r:Gr,o)}function wk(t,e){var n=this,o=e.kind,r=e.name,a=new WeakSet;function u(c,h){var d,m,y=es(c)[we],S=new Zi(h,(d=(m=n.options_)==null?void 0:m.enhancer)!=null?d:Gr,"ObservableObject."+r.toString(),!1);y.values_.set(r,S),a.add(c)}if(o=="accessor")return{get:function(){return a.has(this)||u(this,t.get.call(this)),this[we].getObservablePropValue_(r)},set:function(h){return a.has(this)||u(this,h),this[we].setObservablePropValue_(r,h)},init:function(h){return a.has(this)||u(this,h),h}}}function Tk(t,e,n,o){e.annotationType_}var Ck="true",Ak=QA();function QA(t){return{annotationType_:Ck,options_:t,make_:xk,extend_:Rk,decorate_20223_:Mk}}function xk(t,e,n,o){var r,a;if(n.get)return jd.make_(t,e,n,o);if(n.set){var u=ga(n.set)?n.set:Vr(e.toString(),n.set);return o===t.target_?t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:u})===null?0:2:(Co(o,e,{configurable:!0,set:u}),2)}if(o!==t.target_&&typeof n.value=="function"){var c;if(VA(n.value)){var h,d=(h=this.options_)!=null&&h.autoBind?va.bound:va;return d.make_(t,e,n,o)}var m=(c=this.options_)!=null&&c.autoBind?iu.bound:iu;return m.make_(t,e,n,o)}var y=((r=this.options_)==null?void 0:r.deep)===!1?wt.ref:wt;if(typeof n.value=="function"&&(a=this.options_)!=null&&a.autoBind){var S;n.value=n.value.bind((S=t.proxy_)!=null?S:t.target_)}return y.make_(t,e,n,o)}function Rk(t,e,n,o){var r,a;if(n.get)return jd.extend_(t,e,n,o);if(n.set)return t.defineProperty_(e,{configurable:ue.safeDescriptors?t.isPlainObject_:!0,set:Vr(e.toString(),n.set)},o);if(typeof n.value=="function"&&(r=this.options_)!=null&&r.autoBind){var u;n.value=n.value.bind((u=t.proxy_)!=null?u:t.target_)}var c=((a=this.options_)==null?void 0:a.deep)===!1?wt.ref:wt;return c.extend_(t,e,n,o)}function Mk(t,e){Be("'"+this.annotationType_+"' cannot be used as a decorator")}var Nk="observable",Ik="observable.ref",Dk="observable.shallow",Ok="observable.struct",ZA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ZA);function pf(t){return t||ZA}var jg=Yd(Nk),Pk=Yd(Ik,{enhancer:Kd}),kk=Yd(Dk,{enhancer:rk}),Lk=Yd(Ok,{enhancer:sk}),ex=Ao(jg);function mf(t){return t.deep===!0?Gr:t.deep===!1?Kd:Bk(t.defaultDecorator)}function Uk(t){var e;return t?(e=t.defaultDecorator)!=null?e:QA(t):void 0}function Bk(t){var e,n;return t&&(e=(n=t.options_)==null?void 0:n.enhancer)!=null?e:Gr}function tx(t,e,n){if(wu(e))return jg.decorate_20223_(t,e);if(Hr(e)){bu(t,e,jg);return}return ly(t)?t:ui(t)?wt.object(t,e,n):Array.isArray(t)?wt.array(t,e):wa(t)?wt.map(t,e):oi(t)?wt.set(t,e):typeof t=="object"&&t!==null?t:wt.box(t,e)}FA(tx,ex);var Fk={box:function(e,n){var o=pf(n);return new Zi(e,mf(o),o.name,!0,o.equals)},array:function(e,n){var o=pf(n);return(ue.useProxies===!1||o.proxy===!1?LL:AL)(e,mf(o),o.name)},map:function(e,n){var o=pf(n);return new wx(e,mf(o),o.name)},set:function(e,n){var o=pf(n);return new Tx(e,mf(o),o.name)},object:function(e,n,o){return ar(function(){return _x(ue.useProxies===!1||o?.proxy===!1?es({},o):bL({},o),e,n)})},ref:Ao(Pk),shallow:Ao(kk),deep:ex,struct:Ao(Lk)},wt=FA(tx,Fk),nx="computed",Hk="computed.struct",Xg=iy(nx),$k=iy(Hk,{equals:cd.structural}),jd=function(e,n){if(wu(n))return Xg.decorate_20223_(e,n);if(Hr(n))return bu(e,n,Xg);if(ui(e))return Ao(iy(nx,e));var o=ui(n)?n:{};return o.get=e,o.name||(o.name=e.name||""),new ao(o)};Object.assign(jd,Xg);jd.struct=Ao($k);var $b,Gb,fd=0,Gk=1,Vk=($b=(Gb=ud(function(){},"name"))==null?void 0:Gb.configurable)!=null?$b:!1,Vb={value:"action",configurable:!0,writable:!1,enumerable:!1};function Vr(t,e,n,o){n===void 0&&(n=!1);function r(){return ox(t,n,e,o||this,arguments)}return r.isMobxAction=!0,r.toString=function(){return e.toString()},Vk&&(Vb.value=t,Co(r,"name",Vb)),r}function ox(t,e,n,o,r){var a=zk(t,e);try{return n.apply(o,r)}catch(u){throw a.error_=u,u}finally{qk(a)}}function zk(t,e,n,o){var r=!1,a=0,u=ue.trackingDerivation,c=!e||!u;Un();var h=ue.allowStateChanges;c&&(Zr(),h=ry(!0));var d=ay(!0),m={runAsAction_:c,prevDerivation_:u,prevAllowStateChanges_:h,prevAllowStateReads_:d,notifySpy_:r,startTime_:a,actionId_:Gk++,parentActionId_:fd};return fd=m.actionId_,m}function qk(t){fd!==t.actionId_&&Be(30),fd=t.parentActionId_,t.error_!==void 0&&(ue.suppressReactionErrors=!0),sy(t.prevAllowStateChanges_),jl(t.prevAllowStateReads_),Bn(),t.runAsAction_&&ai(t.prevDerivation_),ue.suppressReactionErrors=!1}function ry(t){var e=ue.allowStateChanges;return ue.allowStateChanges=t,e}function sy(t){ue.allowStateChanges=t}var Zi=(function(t){function e(o,r,a,u,c){var h;return a===void 0&&(a="ObservableValue"),c===void 0&&(c=cd.default),h=t.call(this,a)||this,h.enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=r,h.name_=a,h.equals=c,h.value_=r(o,void 0,a),h}KA(e,t);var n=e.prototype;return n.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.set=function(r){this.value_,r=this.prepareNewValue_(r),r!==ue.UNCHANGED&&this.setNewValue_(r)},n.prepareNewValue_=function(r){if(kn(this)){var a=Ln(this,{object:this,type:xo,newValue:r});if(!a)return ue.UNCHANGED;r=a.newValue}return r=this.enhancer(r,this.value_,this.name_),this.equals(this.value_,r)?ue.UNCHANGED:r},n.setNewValue_=function(r){var a=this.value_;this.value_=r,this.reportChanged(),no(this)&&oo(this,{type:xo,object:this,newValue:r,oldValue:a})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(r){return Au(this,r)},n.observe_=function(r,a){return a&&r({observableKind:"value",debugObjectName:this.name_,object:this,type:xo,newValue:this.value_,oldValue:void 0}),xu(this,r)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return JA(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e})(rr),Jk=ir("ObservableValue",Zi),ao=(function(){function t(n){this.dependenciesState_=Ge.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ge.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new hd(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=dd.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||Be(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=Vr("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?cd.structural:cd.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){Wk(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(o){return o()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(o){return o()})},e.get=function(){if(this.isComputing&&Be(32,this.name_,this.derivation),ue.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Wg(this)&&(this.warnAboutUntrackedRead_(),Un(),this.value_=this.computeValue_(!1),Bn());else if(cx(this),Wg(this)){var o=ue.trackingContext;this.keepAlive_&&!o&&(ue.trackingContext=this),this.trackAndCompute()&&Xk(this),ue.trackingContext=o}var r=this.value_;if(zf(r))throw r.cause;return r},e.set=function(o){if(this.setter_){this.isRunningSetter&&Be(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,o)}finally{this.isRunningSetter=!1}}else Be(34,this.name_)},e.trackAndCompute=function(){var o=this.value_,r=this.dependenciesState_===Ge.NOT_TRACKING_,a=this.computeValue_(!0),u=r||zf(o)||zf(a)||!this.equals_(o,a);return u&&(this.value_=a),u},e.computeValue_=function(o){this.isComputing=!0;var r=ry(!1),a;if(o)a=ix(this,this.derivation,this.scope_);else if(ue.disableErrorBoundaries===!0)a=this.derivation.call(this.scope_);else try{a=this.derivation.call(this.scope_)}catch(u){a=new hd(u)}return sy(r),this.isComputing=!1,a},e.suspend_=function(){this.keepAlive_||(Qg(this),this.value_=void 0)},e.observe_=function(o,r){var a=this,u=!0,c=void 0;return sL(function(){var h=a.get();if(!u||r){var d=Zr();o({observableKind:"computed",debugObjectName:a.name_,type:xo,object:a,newValue:h,oldValue:c}),ai(d)}u=!1,c=h})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return JA(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},Ta(t,[{key:"isComputing",get:function(){return yn(this.flags_,t.isComputingMask_)},set:function(o){this.flags_=_n(this.flags_,t.isComputingMask_,o)}},{key:"isRunningSetter",get:function(){return yn(this.flags_,t.isRunningSetterMask_)},set:function(o){this.flags_=_n(this.flags_,t.isRunningSetterMask_,o)}},{key:"isBeingObserved",get:function(){return yn(this.flags_,t.isBeingObservedMask_)},set:function(o){this.flags_=_n(this.flags_,t.isBeingObservedMask_,o)}},{key:"isPendingUnobservation",get:function(){return yn(this.flags_,t.isPendingUnobservationMask_)},set:function(o){this.flags_=_n(this.flags_,t.isPendingUnobservationMask_,o)}},{key:"diffValue",get:function(){return yn(this.flags_,t.diffValueMask_)?1:0},set:function(o){this.flags_=_n(this.flags_,t.diffValueMask_,o===1)}}])})();ao.isComputingMask_=1;ao.isRunningSetterMask_=2;ao.isBeingObservedMask_=4;ao.isPendingUnobservationMask_=8;ao.diffValueMask_=16;var Cu=ir("ComputedValue",ao),Ge;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(Ge||(Ge={}));var dd;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(dd||(dd={}));var hd=function(e){this.cause=void 0,this.cause=e};function zf(t){return t instanceof hd}function Wg(t){switch(t.dependenciesState_){case Ge.UP_TO_DATE_:return!1;case Ge.NOT_TRACKING_:case Ge.STALE_:return!0;case Ge.POSSIBLY_STALE_:{for(var e=ay(!0),n=Zr(),o=t.observing_,r=o.length,a=0;a<r;a++){var u=o[a];if(Cu(u)){if(ue.disableErrorBoundaries)u.get();else try{u.get()}catch{return ai(n),jl(e),!0}if(t.dependenciesState_===Ge.STALE_)return ai(n),jl(e),!0}}return sx(t),ai(n),jl(e),!1}}}function ix(t,e,n){var o=ay(!0);sx(t),t.newObserving_=new Array(t.runId_===0?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++ue.runId;var r=ue.trackingDerivation;ue.trackingDerivation=t,ue.inBatch++;var a;if(ue.disableErrorBoundaries===!0)a=e.call(n);else try{a=e.call(n)}catch(u){a=new hd(u)}return ue.inBatch--,ue.trackingDerivation=r,Kk(t),jl(o),a}function Kk(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,o=Ge.UP_TO_DATE_,r=0,a=t.unboundDepsCount_,u=0;u<a;u++){var c=n[u];c.diffValue===0&&(c.diffValue=1,r!==u&&(n[r]=c),r++),c.dependenciesState_>o&&(o=c.dependenciesState_)}for(n.length=r,t.newObserving_=null,a=e.length;a--;){var h=e[a];h.diffValue===0&&lx(h,t),h.diffValue=0}for(;r--;){var d=n[r];d.diffValue===1&&(d.diffValue=0,jk(d,t))}o!==Ge.UP_TO_DATE_&&(t.dependenciesState_=o,t.onBecomeStale_())}function Qg(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)lx(e[n],t);t.dependenciesState_=Ge.NOT_TRACKING_}function rx(t){var e=Zr();try{return t()}finally{ai(e)}}function Zr(){var t=ue.trackingDerivation;return ue.trackingDerivation=null,t}function ai(t){ue.trackingDerivation=t}function ay(t){var e=ue.allowStateReads;return ue.allowStateReads=t,e}function jl(t){ue.allowStateReads=t}function sx(t){if(t.dependenciesState_!==Ge.UP_TO_DATE_){t.dependenciesState_=Ge.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=Ge.UP_TO_DATE_}}var qf=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Jf=!0,ax=!1,ue=(function(){var t=qd();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Jf=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new qf().version&&(Jf=!1),Jf?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new qf):(setTimeout(function(){ax||Be(35)},1),new qf)})();function Yk(){if((ue.pendingReactions.length||ue.inBatch||ue.isRunningReactions)&&Be(36),ax=!0,Jf){var t=qd();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),ue=new qf}}function jk(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function lx(t,e){t.observers_.delete(e),t.observers_.size===0&&ux(t)}function ux(t){t.isPendingUnobservation===!1&&(t.isPendingUnobservation=!0,ue.pendingUnobservations.push(t))}function Un(){ue.inBatch++}function Bn(){if(--ue.inBatch===0){dx();for(var t=ue.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof ao&&n.suspend_())}ue.pendingUnobservations=[]}}function cx(t){var e=ue.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&ue.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(t.observers_.size===0&&ue.inBatch>0&&ux(t),!1)}function fx(t){t.lowestObserverState_!==Ge.STALE_&&(t.lowestObserverState_=Ge.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Ge.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ge.STALE_}))}function Xk(t){t.lowestObserverState_!==Ge.STALE_&&(t.lowestObserverState_=Ge.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Ge.POSSIBLY_STALE_?e.dependenciesState_=Ge.STALE_:e.dependenciesState_===Ge.UP_TO_DATE_&&(t.lowestObserverState_=Ge.UP_TO_DATE_)}))}function Wk(t){t.lowestObserverState_===Ge.UP_TO_DATE_&&(t.lowestObserverState_=Ge.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Ge.UP_TO_DATE_&&(e.dependenciesState_=Ge.POSSIBLY_STALE_,e.onBecomeStale_())}))}var ci=(function(){function t(n,o,r,a){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ge.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=dd.NONE,this.name_=n,this.onInvalidate_=o,this.errorHandler_=r,this.requiresObservable_=a}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,ue.pendingReactions.push(this),dx())},e.runReaction_=function(){if(!this.isDisposed){Un(),this.isScheduled=!1;var o=ue.trackingContext;if(ue.trackingContext=this,Wg(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(r){this.reportExceptionInDerivation_(r)}}ue.trackingContext=o,Bn()}},e.track=function(o){if(!this.isDisposed){Un(),this.isRunning=!0;var r=ue.trackingContext;ue.trackingContext=this;var a=ix(this,o,void 0);ue.trackingContext=r,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&Qg(this),zf(a)&&this.reportExceptionInDerivation_(a.cause),Bn()}},e.reportExceptionInDerivation_=function(o){var r=this;if(this.errorHandler_){this.errorHandler_(o,this);return}if(ue.disableErrorBoundaries)throw o;var a="[mobx] uncaught error in '"+this+"'";ue.suppressReactionErrors||console.error(a,o),ue.globalReactionErrorHandlers.forEach(function(u){return u(o,r)})},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Un(),Qg(this),Bn()))},e.getDisposer_=function(o){var r=this,a=function u(){r.dispose(),o==null||o.removeEventListener==null||o.removeEventListener("abort",u)};return o==null||o.addEventListener==null||o.addEventListener("abort",a),a[we]=this,"dispose"in Symbol&&typeof Symbol.dispose=="symbol"&&(a[Symbol.dispose]=a),a},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(o){},Ta(t,[{key:"isDisposed",get:function(){return yn(this.flags_,t.isDisposedMask_)},set:function(o){this.flags_=_n(this.flags_,t.isDisposedMask_,o)}},{key:"isScheduled",get:function(){return yn(this.flags_,t.isScheduledMask_)},set:function(o){this.flags_=_n(this.flags_,t.isScheduledMask_,o)}},{key:"isTrackPending",get:function(){return yn(this.flags_,t.isTrackPendingMask_)},set:function(o){this.flags_=_n(this.flags_,t.isTrackPendingMask_,o)}},{key:"isRunning",get:function(){return yn(this.flags_,t.isRunningMask_)},set:function(o){this.flags_=_n(this.flags_,t.isRunningMask_,o)}},{key:"diffValue",get:function(){return yn(this.flags_,t.diffValueMask_)?1:0},set:function(o){this.flags_=_n(this.flags_,t.diffValueMask_,o===1)}}])})();ci.isDisposedMask_=1;ci.isScheduledMask_=2;ci.isTrackPendingMask_=4;ci.isRunningMask_=8;ci.diffValueMask_=16;var Qk=100,Zg=function(e){return e()};function dx(){ue.inBatch>0||ue.isRunningReactions||Zg(Zk)}function Zk(){ue.isRunningReactions=!0;for(var t=ue.pendingReactions,e=0;t.length>0;){++e===Qk&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),o=0,r=n.length;o<r;o++)n[o].runReaction_()}ue.isRunningReactions=!1}var pd=ir("Reaction",ci);function eL(t){var e=Zg;Zg=function(o){return t(function(){return e(o)})}}function Xl(){return!1}function tL(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var hx="action",nL="action.bound",px="autoAction",oL="autoAction.bound",mx="<unnamed action>",ev=Tu(hx),iL=Tu(nL,{bound:!0}),tv=Tu(px,{autoAction:!0}),rL=Tu(oL,{autoAction:!0,bound:!0});function gx(t){var e=function(o,r){if(so(o))return Vr(o.name||mx,o,t);if(so(r))return Vr(o,r,t);if(wu(r))return(t?tv:ev).decorate_20223_(o,r);if(Hr(r))return bu(o,r,t?tv:ev);if(Hr(o))return Ao(Tu(t?px:hx,{name:o,autoAction:t}))};return e}var sa=gx(!1);Object.assign(sa,ev);var iu=gx(!0);Object.assign(iu,tv);sa.bound=Ao(iL);iu.bound=Ao(rL);function Re(t){return ox(t.name||mx,!1,t,this,void 0)}function ga(t){return so(t)&&t.isMobxAction===!0}function sL(t,e){var n,o,r,a;e===void 0&&(e=HA);var u=(n=(o=e)==null?void 0:o.name)!=null?n:"Autorun",c=!e.scheduler&&!e.delay,h;if(c)h=new ci(u,function(){this.track(y)},e.onError,e.requiresObservable);else{var d=lL(e),m=!1;h=new ci(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed||h.track(y)}))},e.onError,e.requiresObservable)}function y(){t(h)}return(r=e)!=null&&(r=r.signal)!=null&&r.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var aL=function(e){return e()};function lL(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:aL}var uL="onBO",cL="onBUO";function fL(t,e,n){return yx(uL,t,e,n)}function vx(t,e,n){return yx(cL,t,e,n)}function yx(t,e,n,o){var r=vd(e),a=so(o)?o:n,u=t+"L";return r[u]?r[u].add(a):r[u]=new Set([a]),function(){var c=r[u];c&&(c.delete(a),c.size===0&&delete r[u])}}var dL="never",gf="always",hL="observed";function pL(t){t.isolateGlobalState===!0&&Yk();var e=t.useProxies,n=t.enforceActions;if(e!==void 0&&(ue.useProxies=e===gf?!0:e===dL?!1:typeof Proxy<"u"),e==="ifavailable"&&(ue.verifyProxies=!0),n!==void 0){var o=n===gf?gf:n===hL;ue.enforceActions=o,ue.allowStateChanges=!(o===!0||o===gf)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(r){r in t&&(ue[r]=!!t[r])}),ue.allowStateReads=!ue.observableRequiresReaction,t.reactionScheduler&&eL(t.reactionScheduler)}function _x(t,e,n,o){var r=WP(e);return ar(function(){var a=es(t,o)[we];ma(r).forEach(function(u){a.extend_(u,r[u],n&&u in n?n[u]:!0)})}),t}function mL(t,e){return Sx(vd(t,e))}function Sx(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=gL(t.observing_).map(Sx)),e}function gL(t){return Array.from(new Set(t))}var vL=0;function Ex(){this.message="FLOW_CANCELLED"}Ex.prototype=Object.create(Error.prototype);var Xm=XA("flow"),yL=XA("flow.bound",{bound:!0}),va=Object.assign(function(e,n){if(wu(n))return Xm.decorate_20223_(e,n);if(Hr(n))return bu(e,n,Xm);var o=e,r=o.name||"<unnamed flow>",a=function(){var c=this,h=arguments,d=++vL,m=sa(r+" - runid: "+d+" - init",o).apply(c,h),y,S=void 0,E=new Promise(function(C,A){var x=0;y=A;function M(D){S=void 0;var L;try{L=sa(r+" - runid: "+d+" - yield "+x++,m.next).call(m,D)}catch(U){return A(U)}N(L)}function I(D){S=void 0;var L;try{L=sa(r+" - runid: "+d+" - yield "+x++,m.throw).call(m,D)}catch(U){return A(U)}N(L)}function N(D){if(so(D?.then)){D.then(N,A);return}return D.done?C(D.value):(S=Promise.resolve(D.value),S.then(M,I))}M(void 0)});return E.cancel=sa(r+" - runid: "+d+" - cancel",function(){try{S&&zb(S);var C=m.return(void 0),A=Promise.resolve(C.value);A.then(ia,ia),zb(A),y(new Ex)}catch(x){y(x)}}),E};return a.isMobXFlow=!0,a},Xm);va.bound=Ao(yL);function zb(t){so(t.cancel)&&t.cancel()}function ru(t){return t?.isMobXFlow===!0}function _L(t,e){return t?Mu(t)||!!t[we]||oy(t)||pd(t)||Cu(t):!1}function ly(t){return _L(t)}function SL(t){if(Mu(t))return t[we].ownKeys_();Be(38)}function vf(t,e,n){return t.set(e,n),n}function Zs(t,e){if(t==null||typeof t!="object"||t instanceof Date||!ly(t))return t;if(Jk(t)||Cu(t))return Zs(t.get(),e);if(e.has(t))return e.get(t);if(Ru(t)){var n=vf(e,t,new Array(t.length));return t.forEach(function(u,c){n[c]=Zs(u,e)}),n}if(Zn(t)){var o=vf(e,t,new Set);return t.forEach(function(u){o.add(Zs(u,e))}),o}if(sr(t)){var r=vf(e,t,new Map);return t.forEach(function(u,c){r.set(c,Zs(u,e))}),r}else{var a=vf(e,t,{});return SL(t).forEach(function(u){Su.propertyIsEnumerable.call(t,u)&&(a[u]=Zs(t[u],e))}),a}}function zr(t,e){return Zs(t,new Map)}function ii(t,e){e===void 0&&(e=void 0),Un();try{return t.apply(e)}finally{Bn()}}function Gs(t){return t[we]}var EL={has:function(e,n){return Gs(e).has_(n)},get:function(e,n){return Gs(e).get_(n)},set:function(e,n,o){var r;return Hr(n)?(r=Gs(e).set_(n,o,!0))!=null?r:!0:!1},deleteProperty:function(e,n){var o;return Hr(n)?(o=Gs(e).delete_(n,!0))!=null?o:!0:!1},defineProperty:function(e,n,o){var r;return(r=Gs(e).defineProperty_(n,o))!=null?r:!0},ownKeys:function(e){return Gs(e).ownKeys_()},preventExtensions:function(e){Be(13)}};function bL(t,e){var n,o;return $A(),t=es(t,e),(o=(n=t[we]).proxy_)!=null?o:n.proxy_=new Proxy(t,EL)}function kn(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function Au(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),GA(function(){var o=n.indexOf(e);o!==-1&&n.splice(o,1)})}function Ln(t,e){var n=Zr();try{for(var o=[].concat(t.interceptors_||[]),r=0,a=o.length;r<a&&(e=o[r](e),e&&!e.type&&Be(14),!!e);r++);return e}finally{ai(n)}}function no(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function xu(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),GA(function(){var o=n.indexOf(e);o!==-1&&n.splice(o,1)})}function oo(t,e){var n=Zr(),o=t.changeListeners_;if(o){o=o.slice();for(var r=0,a=o.length;r<a;r++)o[r](e);ai(n)}}function wL(t,e,n){return ar(function(){var o,r=es(t,n)[we];(o=e)!=null||(e=nk(t)),ma(e).forEach(function(a){return r.make_(a,e[a])})}),t}var Wm=Symbol("mobx-keys");function mi(t,e,n){return ui(t)?_x(t,t,e,n):(ar(function(){var o=es(t,n)[we];if(!t[Wm]){var r=Object.getPrototypeOf(t),a=new Set([].concat(ma(t),ma(r)));a.delete("constructor"),a.delete(we),Eu(r,Wm,a)}t[Wm].forEach(function(u){return o.make_(u,e&&u in e?e[u]:!0)})}),t)}var qb="splice",xo="update",TL=1e4,CL={get:function(e,n){var o=e[we];return n===we?o:n==="length"?o.getArrayLength_():typeof n=="string"&&!isNaN(n)?o.get_(parseInt(n)):si(md,n)?md[n]:e[n]},set:function(e,n,o){var r=e[we];return n==="length"&&r.setArrayLength_(o),typeof n=="symbol"||isNaN(n)?e[n]=o:r.set_(parseInt(n),o),!0},preventExtensions:function(){Be(15)}},uy=(function(){function t(n,o,r,a){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=a,this.atom_=new rr(n),this.enhancer_=function(u,c){return o(u,c,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},e.dehanceValues_=function(o){return this.dehancer!==void 0&&o.length>0?o.map(this.dehancer):o},e.intercept_=function(o){return Au(this,o)},e.observe_=function(o,r){return r===void 0&&(r=!1),r&&o({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),xu(this,o)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(o){(typeof o!="number"||isNaN(o)||o<0)&&Be("Out of range: "+o);var r=this.values_.length;if(o!==r)if(o>r){for(var a=new Array(o-r),u=0;u<o-r;u++)a[u]=void 0;this.spliceWithArray_(r,0,a)}else this.spliceWithArray_(o,r-o)},e.updateArrayLength_=function(o,r){o!==this.lastKnownLength_&&Be(16),this.lastKnownLength_+=r,this.legacyMode_&&r>0&&Rx(o+r+1)},e.spliceWithArray_=function(o,r,a){var u=this;this.atom_;var c=this.values_.length;if(o===void 0?o=0:o>c?o=c:o<0&&(o=Math.max(0,c+o)),arguments.length===1?r=c-o:r==null?r=0:r=Math.max(0,Math.min(r,c-o)),a===void 0&&(a=Kg),kn(this)){var h=Ln(this,{object:this.proxy_,type:qb,index:o,removedCount:r,added:a});if(!h)return Kg;r=h.removedCount,a=h.added}if(a=a.length===0?a:a.map(function(y){return u.enhancer_(y,void 0)}),this.legacyMode_){var d=a.length-r;this.updateArrayLength_(c,d)}var m=this.spliceItemsIntoValues_(o,r,a);return(r!==0||a.length!==0)&&this.notifyArraySplice_(o,a,m),this.dehanceValues_(m)},e.spliceItemsIntoValues_=function(o,r,a){if(a.length<TL){var u;return(u=this.values_).splice.apply(u,[o,r].concat(a))}else{var c=this.values_.slice(o,o+r),h=this.values_.slice(o+r);this.values_.length+=a.length-r;for(var d=0;d<a.length;d++)this.values_[o+d]=a[d];for(var m=0;m<h.length;m++)this.values_[o+a.length+m]=h[m];return c}},e.notifyArrayChildUpdate_=function(o,r,a){var u=!this.owned_&&Xl(),c=no(this),h=c||u?{observableKind:"array",object:this.proxy_,type:xo,debugObjectName:this.atom_.name_,index:o,newValue:r,oldValue:a}:null;this.atom_.reportChanged(),c&&oo(this,h)},e.notifyArraySplice_=function(o,r,a){var u=!this.owned_&&Xl(),c=no(this),h=c||u?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:qb,index:o,removed:a,added:r,removedCount:a.length,addedCount:r.length}:null;this.atom_.reportChanged(),c&&oo(this,h)},e.get_=function(o){if(this.legacyMode_&&o>=this.values_.length){console.warn("[mobx] Out of bounds read: "+o);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[o])},e.set_=function(o,r){var a=this.values_;if(this.legacyMode_&&o>a.length&&Be(17,o,a.length),o<a.length){this.atom_;var u=a[o];if(kn(this)){var c=Ln(this,{type:xo,object:this.proxy_,index:o,newValue:r});if(!c)return;r=c.newValue}r=this.enhancer_(r,u);var h=r!==u;h&&(a[o]=r,this.notifyArrayChildUpdate_(o,r,u))}else{for(var d=new Array(o+1-a.length),m=0;m<d.length-1;m++)d[m]=void 0;d[d.length-1]=r,this.spliceWithArray_(a.length,0,d)}},t})();function AL(t,e,n,o){return n===void 0&&(n="ObservableArray"),o===void 0&&(o=!1),$A(),ar(function(){var r=new uy(n,e,o,!1);zA(r.values_,we,r);var a=new Proxy(r.values_,CL);return r.proxy_=a,t&&t.length&&r.spliceWithArray_(0,0,t),a})}var md={clear:function(){return this.splice(0)},replace:function(e){var n=this[we];return n.spliceWithArray_(0,n.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,n){for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];var u=this[we];switch(arguments.length){case 0:return[];case 1:return u.spliceWithArray_(e);case 2:return u.spliceWithArray_(e,n)}return u.spliceWithArray_(e,n,r)},spliceWithArray:function(e,n,o){return this[we].spliceWithArray_(e,n,o)},push:function(){for(var e=this[we],n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,o),e.values_.length},pop:function(){return this.splice(Math.max(this[we].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[we],n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.spliceWithArray_(0,0,o),e.values_.length},reverse:function(){return ue.trackingDerivation&&Be(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ue.trackingDerivation&&Be(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var n=this[we],o=n.dehanceValues_(n.values_).indexOf(e);return o>-1?(this.splice(o,1),!0):!1}};tt("at",bn);tt("concat",bn);tt("flat",bn);tt("includes",bn);tt("indexOf",bn);tt("join",bn);tt("lastIndexOf",bn);tt("slice",bn);tt("toString",bn);tt("toLocaleString",bn);tt("toSorted",bn);tt("toSpliced",bn);tt("with",bn);tt("every",co);tt("filter",co);tt("find",co);tt("findIndex",co);tt("findLast",co);tt("findLastIndex",co);tt("flatMap",co);tt("forEach",co);tt("map",co);tt("some",co);tt("toReversed",co);tt("reduce",bx);tt("reduceRight",bx);function tt(t,e){typeof Array.prototype[t]=="function"&&(md[t]=e(t))}function bn(t){return function(){var e=this[we];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function co(t){return function(e,n){var o=this,r=this[we];r.atom_.reportObserved();var a=r.dehanceValues_(r.values_);return a[t](function(u,c){return e.call(n,u,c,o)})}}function bx(t){return function(){var e=this,n=this[we];n.atom_.reportObserved();var o=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(a,u,c){return r(a,u,c,e)},o[t].apply(o,arguments)}}var xL=ir("ObservableArrayAdministration",uy);function Ru(t){return Jd(t)&&xL(t[we])}var RL={},Xi="add",gd="delete",wx=(function(){function t(n,o,r){var a=this;o===void 0&&(o=Gr),r===void 0&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[we]=RL,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=o,this.name_=r,so(Map)||Be(18),ar(function(){a.keysAtom_=YA("ObservableMap.keys()"),a.data_=new Map,a.hasMap_=new Map,n&&a.merge(n)})}var e=t.prototype;return e.has_=function(o){return this.data_.has(o)},e.has=function(o){var r=this;if(!ue.trackingDerivation)return this.has_(o);var a=this.hasMap_.get(o);if(!a){var u=a=new Zi(this.has_(o),Kd,"ObservableMap.key?",!1);this.hasMap_.set(o,u),vx(u,function(){return r.hasMap_.delete(o)})}return a.get()},e.set=function(o,r){var a=this.has_(o);if(kn(this)){var u=Ln(this,{type:a?xo:Xi,object:this,newValue:r,name:o});if(!u)return this;r=u.newValue}return a?this.updateValue_(o,r):this.addValue_(o,r),this},e.delete=function(o){var r=this;if(this.keysAtom_,kn(this)){var a=Ln(this,{type:gd,object:this,name:o});if(!a)return!1}if(this.has_(o)){var u=Xl(),c=no(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:gd,object:this,oldValue:this.data_.get(o).value_,name:o}:null;return ii(function(){var d;r.keysAtom_.reportChanged(),(d=r.hasMap_.get(o))==null||d.setNewValue_(!1);var m=r.data_.get(o);m.setNewValue_(void 0),r.data_.delete(o)}),c&&oo(this,h),!0}return!1},e.updateValue_=function(o,r){var a=this.data_.get(o);if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var u=Xl(),c=no(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:xo,object:this,oldValue:a.value_,name:o,newValue:r}:null;a.setNewValue_(r),c&&oo(this,h)}},e.addValue_=function(o,r){var a=this;this.keysAtom_,ii(function(){var d,m=new Zi(r,a.enhancer_,"ObservableMap.key",!1);a.data_.set(o,m),r=m.value_,(d=a.hasMap_.get(o))==null||d.setNewValue_(!0),a.keysAtom_.reportChanged()});var u=Xl(),c=no(this),h=c||u?{observableKind:"map",debugObjectName:this.name_,type:Xi,object:this,name:o,newValue:r}:null;c&&oo(this,h)},e.get=function(o){return this.has(o)?this.dehanceValue_(this.data_.get(o).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var o=this,r=this.keys();return Jb({next:function(){var u=r.next(),c=u.done,h=u.value;return{done:c,value:c?void 0:o.get(h)}}})},e.entries=function(){var o=this,r=this.keys();return Jb({next:function(){var u=r.next(),c=u.done,h=u.value;return{done:c,value:c?void 0:[h,o.get(h)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(o,r){for(var a=ra(this),u;!(u=a()).done;){var c=u.value,h=c[0],d=c[1];o.call(r,d,h,this)}},e.merge=function(o){var r=this;return sr(o)&&(o=new Map(o)),ii(function(){ui(o)?XP(o).forEach(function(a){return r.set(a,o[a])}):Array.isArray(o)?o.forEach(function(a){var u=a[0],c=a[1];return r.set(u,c)}):wa(o)?(jP(o)||Be(19,o),o.forEach(function(a,u){return r.set(u,a)})):o!=null&&Be(20,o)}),this},e.clear=function(){var o=this;ii(function(){rx(function(){for(var r=ra(o.keys()),a;!(a=r()).done;){var u=a.value;o.delete(u)}})})},e.replace=function(o){var r=this;return ii(function(){for(var a=ML(o),u=new Map,c=!1,h=ra(r.data_.keys()),d;!(d=h()).done;){var m=d.value;if(!a.has(m)){var y=r.delete(m);if(y)c=!0;else{var S=r.data_.get(m);u.set(m,S)}}}for(var E=ra(a.entries()),C;!(C=E()).done;){var A=C.value,x=A[0],M=A[1],I=r.data_.has(x);if(r.set(x,M),r.data_.has(x)){var N=r.data_.get(x);u.set(x,N),I||(c=!0)}}if(!c)if(r.data_.size!==u.size)r.keysAtom_.reportChanged();else for(var D=r.data_.keys(),L=u.keys(),U=D.next(),O=L.next();!U.done;){if(U.value!==O.value){r.keysAtom_.reportChanged();break}U=D.next(),O=L.next()}r.data_=u}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(o,r){return xu(this,o)},e.intercept_=function(o){return Au(this,o)},Ta(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])})(),sr=ir("ObservableMap",wx);function Jb(t){return t[Symbol.toStringTag]="MapIterator",fy(t)}function ML(t){if(wa(t)||sr(t))return t;if(Array.isArray(t))return new Map(t);if(ui(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}else return Be(21,t)}var NL={},Tx=(function(){function t(n,o,r){var a=this;o===void 0&&(o=Gr),r===void 0&&(r="ObservableSet"),this.name_=void 0,this[we]=NL,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,so(Set)||Be(22),this.enhancer_=function(u,c){return o(u,c,r)},ar(function(){a.atom_=YA(a.name_),n&&a.replace(n)})}var e=t.prototype;return e.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},e.clear=function(){var o=this;ii(function(){rx(function(){for(var r=ra(o.data_.values()),a;!(a=r()).done;){var u=a.value;o.delete(u)}})})},e.forEach=function(o,r){for(var a=ra(this),u;!(u=a()).done;){var c=u.value;o.call(r,c,c,this)}},e.add=function(o){var r=this;if(this.atom_,kn(this)){var a=Ln(this,{type:Xi,object:this,newValue:o});if(!a)return this;o=a.newValue}if(!this.has(o)){ii(function(){r.data_.add(r.enhancer_(o,void 0)),r.atom_.reportChanged()});var u=!1,c=no(this),h=c||u?{observableKind:"set",debugObjectName:this.name_,type:Xi,object:this,newValue:o}:null;c&&oo(this,h)}return this},e.delete=function(o){var r=this;if(kn(this)){var a=Ln(this,{type:gd,object:this,oldValue:o});if(!a)return!1}if(this.has(o)){var u=!1,c=no(this),h=c||u?{observableKind:"set",debugObjectName:this.name_,type:gd,object:this,oldValue:o}:null;return ii(function(){r.atom_.reportChanged(),r.data_.delete(o)}),c&&oo(this,h),!0}return!1},e.has=function(o){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(o))},e.entries=function(){var o=this.values();return Kb({next:function(){var a=o.next(),u=a.value,c=a.done;return c?{value:void 0,done:c}:{value:[u,u],done:c}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var o=this,r=this.data_.values();return Kb({next:function(){var u=r.next(),c=u.value,h=u.done;return h?{value:void 0,done:h}:{value:o.dehanceValue_(c),done:h}}})},e.intersection=function(o){if(oi(o)&&!Zn(o))return o.intersection(this);var r=new Set(this);return r.intersection(o)},e.union=function(o){if(oi(o)&&!Zn(o))return o.union(this);var r=new Set(this);return r.union(o)},e.difference=function(o){return new Set(this).difference(o)},e.symmetricDifference=function(o){if(oi(o)&&!Zn(o))return o.symmetricDifference(this);var r=new Set(this);return r.symmetricDifference(o)},e.isSubsetOf=function(o){return new Set(this).isSubsetOf(o)},e.isSupersetOf=function(o){return new Set(this).isSupersetOf(o)},e.isDisjointFrom=function(o){if(oi(o)&&!Zn(o))return o.isDisjointFrom(this);var r=new Set(this);return r.isDisjointFrom(o)},e.replace=function(o){var r=this;return Zn(o)&&(o=new Set(o)),ii(function(){Array.isArray(o)?(r.clear(),o.forEach(function(a){return r.add(a)})):oi(o)?(r.clear(),o.forEach(function(a){return r.add(a)})):o!=null&&Be("Cannot initialize set from "+o)}),this},e.observe_=function(o,r){return xu(this,o)},e.intercept_=function(o){return Au(this,o)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},Ta(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])})(),Zn=ir("ObservableSet",Tx);function Kb(t){return t[Symbol.toStringTag]="SetIterator",fy(t)}var Yb=Object.create(null),jb="remove",Cx=(function(){function t(n,o,r,a){o===void 0&&(o=new Map),a===void 0&&(a=Ak),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=o,this.name_=r,this.defaultAnnotation_=a,this.keysAtom_=new rr("ObservableObject.keys"),this.isPlainObject_=ui(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(o){return this.values_.get(o).get()},e.setObservablePropValue_=function(o,r){var a=this.values_.get(o);if(a instanceof ao)return a.set(r),!0;if(kn(this)){var u=Ln(this,{type:xo,object:this.proxy_||this.target_,name:o,newValue:r});if(!u)return null;r=u.newValue}if(r=a.prepareNewValue_(r),r!==ue.UNCHANGED){var c=no(this),h=!1,d=c||h?{type:xo,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:a.value_,name:o,newValue:r}:null;a.setNewValue_(r),c&&oo(this,d)}return!0},e.get_=function(o){return ue.trackingDerivation&&!si(this.target_,o)&&this.has_(o),this.target_[o]},e.set_=function(o,r,a){return a===void 0&&(a=!1),si(this.target_,o)?this.values_.has(o)?this.setObservablePropValue_(o,r):a?Reflect.set(this.target_,o,r):(this.target_[o]=r,!0):this.extend_(o,{value:r,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,a)},e.has_=function(o){if(!ue.trackingDerivation)return o in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var r=this.pendingKeys_.get(o);return r||(r=new Zi(o in this.target_,Kd,"ObservableObject.key?",!1),this.pendingKeys_.set(o,r)),r.get()},e.make_=function(o,r){if(r===!0&&(r=this.defaultAnnotation_),r!==!1){if(!(o in this.target_)){var a;if((a=this.target_[bo])!=null&&a[o])return;Be(1,r.annotationType_,this.name_+"."+o.toString())}for(var u=this.target_;u&&u!==Su;){var c=ud(u,o);if(c){var h=r.make_(this,o,c,u);if(h===0)return;if(h===1)break}u=Object.getPrototypeOf(u)}Wb(this,r,o)}},e.extend_=function(o,r,a,u){if(u===void 0&&(u=!1),a===!0&&(a=this.defaultAnnotation_),a===!1)return this.defineProperty_(o,r,u);var c=a.extend_(this,o,r,u);return c&&Wb(this,a,o),c},e.defineProperty_=function(o,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Un();var u=this.delete_(o);if(!u)return u;if(kn(this)){var c=Ln(this,{object:this.proxy_||this.target_,name:o,type:Xi,newValue:r.value});if(!c)return null;var h=c.newValue;r.value!==h&&(r=$r({},r,{value:h}))}if(a){if(!Reflect.defineProperty(this.target_,o,r))return!1}else Co(this.target_,o,r);this.notifyPropertyAddition_(o,r.value)}finally{Bn()}return!0},e.defineObservableProperty_=function(o,r,a,u){u===void 0&&(u=!1),this.keysAtom_;try{Un();var c=this.delete_(o);if(!c)return c;if(kn(this)){var h=Ln(this,{object:this.proxy_||this.target_,name:o,type:Xi,newValue:r});if(!h)return null;r=h.newValue}var d=Xb(o),m={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:d.get,set:d.set};if(u){if(!Reflect.defineProperty(this.target_,o,m))return!1}else Co(this.target_,o,m);var y=new Zi(r,a,"ObservableObject.key",!1);this.values_.set(o,y),this.notifyPropertyAddition_(o,y.value_)}finally{Bn()}return!0},e.defineComputedProperty_=function(o,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Un();var u=this.delete_(o);if(!u)return u;if(kn(this)){var c=Ln(this,{object:this.proxy_||this.target_,name:o,type:Xi,newValue:void 0});if(!c)return null}r.name||(r.name="ObservableObject.key"),r.context=this.proxy_||this.target_;var h=Xb(o),d={configurable:ue.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,o,d))return!1}else Co(this.target_,o,d);this.values_.set(o,new ao(r)),this.notifyPropertyAddition_(o,void 0)}finally{Bn()}return!0},e.delete_=function(o,r){if(r===void 0&&(r=!1),this.keysAtom_,!si(this.target_,o))return!0;if(kn(this)){var a=Ln(this,{object:this.proxy_||this.target_,name:o,type:jb});if(!a)return null}try{var u;Un();var c=no(this),h=!1,d=this.values_.get(o),m=void 0;if(!d&&(c||h)){var y;m=(y=ud(this.target_,o))==null?void 0:y.value}if(r){if(!Reflect.deleteProperty(this.target_,o))return!1}else delete this.target_[o];if(d&&(this.values_.delete(o),d instanceof Zi&&(m=d.value_),fx(d)),this.keysAtom_.reportChanged(),(u=this.pendingKeys_)==null||(u=u.get(o))==null||u.set(o in this.target_),c||h){var S={type:jb,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:o};c&&oo(this,S)}}finally{Bn()}return!0},e.observe_=function(o,r){return xu(this,o)},e.intercept_=function(o){return Au(this,o)},e.notifyPropertyAddition_=function(o,r){var a,u=no(this),c=!1;if(u||c){var h=u||c?{type:Xi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:o,newValue:r}:null;u&&oo(this,h)}(a=this.pendingKeys_)==null||(a=a.get(o))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),ma(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t})();function es(t,e){var n;if(si(t,we))return t;var o=(n=e?.name)!=null?n:"ObservableObject",r=new Cx(t,new Map,String(o),Uk(e));return Eu(t,we,r),t}var IL=ir("ObservableObjectAdministration",Cx);function Xb(t){return Yb[t]||(Yb[t]={get:function(){return this[we].getObservablePropValue_(t)},set:function(n){return this[we].setObservablePropValue_(t,n)}})}function Mu(t){return Jd(t)?IL(t[we]):!1}function Wb(t,e,n){var o;(o=t.target_[bo])==null||delete o[n]}var DL=xx(0),OL=(function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1})(),Qm=0,Ax=function(){};function PL(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}PL(Ax,Array.prototype);var cy=(function(t){function e(o,r,a,u){var c;return a===void 0&&(a="ObservableArray"),u===void 0&&(u=!1),c=t.call(this)||this,ar(function(){var h=new uy(a,r,u,!0);h.proxy_=c,zA(c,we,h),o&&o.length&&c.spliceWithArray(0,0,o),OL&&Object.defineProperty(c,"0",DL)}),c}KA(e,t);var n=e.prototype;return n.concat=function(){this[we].atom_.reportObserved();for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return Array.prototype.concat.apply(this.slice(),a.map(function(c){return Ru(c)?c.slice():c}))},n[Symbol.iterator]=function(){var o=this,r=0;return fy({next:function(){return r<o.length?{value:o[r++],done:!1}:{done:!0,value:void 0}}})},Ta(e,[{key:"length",get:function(){return this[we].getArrayLength_()},set:function(r){this[we].setArrayLength_(r)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])})(Ax);Object.entries(md).forEach(function(t){var e=t[0],n=t[1];e!=="concat"&&Eu(cy.prototype,e,n)});function xx(t){return{enumerable:!1,configurable:!0,get:function(){return this[we].get_(t)},set:function(n){this[we].set_(t,n)}}}function kL(t){Co(cy.prototype,""+t,xx(t))}function Rx(t){if(t>Qm){for(var e=Qm;e<t+100;e++)kL(e);Qm=t}}Rx(1e3);function LL(t,e,n){return new cy(t,e,n)}function vd(t,e){if(typeof t=="object"&&t!==null){if(Ru(t))return e!==void 0&&Be(23),t[we].atom_;if(Zn(t))return t.atom_;if(sr(t)){if(e===void 0)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||Be(25,e,nv(t)),n}if(Mu(t)){if(!e)return Be(26);var o=t[we].values_.get(e);return o||Be(27,e,nv(t)),o}if(oy(t)||Cu(t)||pd(t))return t}else if(so(t)&&pd(t[we]))return t[we];Be(28)}function UL(t,e){if(t||Be(29),oy(t)||Cu(t)||pd(t)||sr(t)||Zn(t))return t;if(t[we])return t[we];Be(24,t)}function nv(t,e){var n;if(e!==void 0)n=vd(t,e);else{if(ga(t))return t.name;Mu(t)||sr(t)||Zn(t)?n=UL(t):n=vd(t)}return n.name_}function ar(t){var e=Zr(),n=ry(!0);Un();try{return t()}finally{Bn(),sy(n),ai(e)}}var Qb=Su.toString;function Mx(t,e,n){return n===void 0&&(n=-1),ov(t,e,n)}function ov(t,e,n,o,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var a=typeof t;if(a!=="function"&&a!=="object"&&typeof e!="object")return!1;var u=Qb.call(t);if(u!==Qb.call(e))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=Zb(t),e=Zb(e);var c=u==="[object Array]";if(!c){if(typeof t!="object"||typeof e!="object")return!1;var h=t.constructor,d=e.constructor;if(h!==d&&!(so(h)&&h instanceof h&&so(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),o=o||[],r=r||[];for(var m=o.length;m--;)if(o[m]===t)return r[m]===e;if(o.push(t),r.push(e),c){if(m=t.length,m!==e.length)return!1;for(;m--;)if(!ov(t[m],e[m],n-1,o,r))return!1}else{var y=Object.keys(t),S=y.length;if(Object.keys(e).length!==S)return!1;for(var E=0;E<S;E++){var C=y[E];if(!(si(e,C)&&ov(t[C],e[C],n-1,o,r)))return!1}}return o.pop(),r.pop(),!0}function Zb(t){return Ru(t)?t.slice():wa(t)||sr(t)||oi(t)||Zn(t)?Array.from(t.entries()):t}var ew,BL=((ew=qd().Iterator)==null?void 0:ew.prototype)||{};function fy(t){return t[Symbol.iterator]=FL,Object.assign(Object.create(BL),t)}function FL(){return this}["Symbol","Map","Set"].forEach(function(t){var e=qd();typeof e[t]>"u"&&Be("MobX requires global '"+t+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:tL,extras:{getDebugName:nv},$mobx:we});if(!T.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!wL)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Xd=BA();const Pr=_u(Xd);function HL(t){t()}function $L(t){t||(t=HL),pL({reactionScheduler:t})}function GL(t){return mL(t)}var VL=1e4,zL=1e4,qL=(function(){function t(e){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(o){o===void 0&&(o=VL),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var r=Date.now();n.registrations.forEach(function(a,u){r-a.registeredAt>=o&&(n.finalize(a.value),n.registrations.delete(u))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n,o){this.registrations.set(o,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,zL))}}),t})(),JL=typeof FinalizationRegistry<"u"?FinalizationRegistry:qL,iv=new JL(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),Zm={exports:{}},eg={};var tw;function KL(){if(tw)return eg;tw=1;var t=zd();function e(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var n=typeof Object.is=="function"?Object.is:e,o=t.useState,r=t.useEffect,a=t.useLayoutEffect,u=t.useDebugValue;function c(y,S){var E=S(),C=o({inst:{value:E,getSnapshot:S}}),A=C[0].inst,x=C[1];return a(function(){A.value=E,A.getSnapshot=S,h(A)&&x({inst:A})},[y,E,S]),r(function(){return h(A)&&x({inst:A}),y(function(){h(A)&&x({inst:A})})},[y]),u(E),E}function h(y){var S=y.getSnapshot;y=y.value;try{var E=S();return!n(y,E)}catch{return!0}}function d(y,S){return S()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return eg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,eg}var nw;function YL(){return nw||(nw=1,Zm.exports=KL()),Zm.exports}var jL=YL();function ow(t){t.reaction=new ci("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function XL(t,e){e===void 0&&(e="observed");var n=et.useRef(null);if(!n.current){var o={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(c){return iv.unregister(o),o.onStoreChange=c,o.reaction||(ow(o),o.stateVersion=Symbol()),function(){var h;o.onStoreChange=null,(h=o.reaction)===null||h===void 0||h.dispose(),o.reaction=null}},getSnapshot:function(){return o.stateVersion}};n.current=o}var r=n.current;r.reaction||(ow(r),iv.register(n,r,r)),et.useDebugValue(r.reaction,GL),jL.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getSnapshot);var a,u;if(r.reaction.track(function(){try{a=t()}catch(c){u=c}}),u)throw u;return a}var tg,ng,Nx=typeof Symbol=="function"&&Symbol.for,WL=(ng=(tg=Object.getOwnPropertyDescriptor(function(){},"name"))===null||tg===void 0?void 0:tg.configurable)!==null&&ng!==void 0?ng:!1,iw=Nx?Symbol.for("react.forward_ref"):typeof T.forwardRef=="function"&&T.forwardRef(function(t){return null}).$$typeof,rw=Nx?Symbol.for("react.memo"):typeof T.memo=="function"&&T.memo(function(t){return null}).$$typeof;function Tt(t,e){var n;if(rw&&t.$$typeof===rw)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var o=(n=void 0)!==null&&n!==void 0?n:!1,r=t,a=t.displayName||t.name;if(iw&&t.$$typeof===iw&&(o=!0,r=t.render,typeof r!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var u=function(c,h){return XL(function(){return r(c,h)},a)};return u.displayName=t.displayName,WL&&Object.defineProperty(u,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(u.contextTypes=t.contextTypes),o&&(u=T.forwardRef(u)),u=T.memo(u),ZL(t,u),u}var QL={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function ZL(t,e){Object.keys(t).forEach(function(n){QL[n]||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}var og;$L(Xd.unstable_batchedUpdates);og=iv.finalizeAllImmediately;var ig={exports:{}};var sw;function eU(){return sw||(sw=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(a=r(a,o(c)))}return a}function o(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var u="";for(var c in a)e.call(a,c)&&a[c]&&(u=r(u,c));return u}function r(a,u){return u?a?a+" "+u:a+u:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ig)),ig.exports}var tU=eU();const Ne=_u(tU);function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},rv.apply(null,arguments)}function Ix(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function aw(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function nU(t){var e=oU(t,"string");return typeof e=="symbol"?e:String(e)}function oU(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function iU(t,e,n){var o=T.useRef(t!==void 0),r=T.useState(e),a=r[0],u=r[1],c=t!==void 0,h=o.current;return o.current=c,!c&&h&&a!==e&&u(e),[c?t:a,T.useCallback(function(d){for(var m=arguments.length,y=new Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];n&&n.apply(void 0,[d].concat(y)),u(d)},[n])]}function dy(t,e){return Object.keys(e).reduce(function(n,o){var r,a=n,u=a[aw(o)],c=a[o],h=Ix(a,[aw(o),o].map(nU)),d=e[o],m=iU(c,u,t[d]),y=m[0],S=m[1];return rv({},h,(r={},r[o]=y,r[d]=S,r))},t)}function sv(t,e){return sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},sv(t,e)}function rU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,sv(t,e)}const sU=["xxl","xl","lg","md","sm","xs"],aU="xs",Nu=T.createContext({prefixes:{},breakpoints:sU,minBreakpoint:aU}),{Consumer:SY,Provider:EY}=Nu;function Ue(t,e){const{prefixes:n}=T.useContext(Nu);return t||n[e]||e}function Dx(){const{breakpoints:t}=T.useContext(Nu);return t}function Ox(){const{minBreakpoint:t}=T.useContext(Nu);return t}function lU(){const{dir:t}=T.useContext(Nu);return t==="rtl"}function Wd(t){return t&&t.ownerDocument||document}function uU(t){var e=Wd(t);return e&&e.defaultView||window}function cU(t,e){return uU(t).getComputedStyle(t,e)}var fU=/([A-Z])/g;function dU(t){return t.replace(fU,"-$1").toLowerCase()}var hU=/^ms-/;function yf(t){return dU(t).replace(hU,"-ms-")}var pU=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function mU(t){return!!(t&&pU.test(t))}function li(t,e){var n="",o="";if(typeof e=="string")return t.style.getPropertyValue(yf(e))||cU(t).getPropertyValue(yf(e));Object.keys(e).forEach(function(r){var a=e[r];!a&&a!==0?t.style.removeProperty(yf(r)):mU(r)?o+=r+"("+a+") ":n+=yf(r)+": "+a+";"}),o&&(n+="transform: "+o+";"),t.style.cssText+=";"+n}var rg={exports:{}},sg,lw;function gU(){if(lw)return sg;lw=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sg=t,sg}var ag,uw;function vU(){if(uw)return ag;uw=1;var t=gU();function e(){}function n(){}return n.resetWarningCache=e,ag=function(){function o(u,c,h,d,m,y){if(y!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}o.isRequired=o;function r(){return o}var a={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:r,element:o,elementType:o,instanceOf:r,node:o,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},ag}var cw;function yU(){return cw||(cw=1,rg.exports=vU()()),rg.exports}var _U=yU();const lg=_u(_U),fw={disabled:!1},Px=et.createContext(null);var SU=function(e){return e.scrollTop},Ll="unmounted",ji="exited",Qn="entering",ri="entered",su="exiting",gi=(function(t){rU(e,t);function e(o,r){var a;a=t.call(this,o,r)||this;var u=r,c=u&&!u.isMounting?o.enter:o.appear,h;return a.appearStatus=null,o.in?c?(h=ji,a.appearStatus=Qn):h=ri:o.unmountOnExit||o.mountOnEnter?h=Ll:h=ji,a.state={status:h},a.nextCallback=null,a}e.getDerivedStateFromProps=function(r,a){var u=r.in;return u&&a.status===Ll?{status:ji}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var a=null;if(r!==this.props){var u=this.state.status;this.props.in?u!==Qn&&u!==ri&&(a=Qn):(u===Qn||u===ri)&&(a=su)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,a,u,c;return a=u=c=r,r!=null&&typeof r!="number"&&(a=r.exit,u=r.enter,c=r.appear!==void 0?r.appear:u),{exit:a,enter:u,appear:c}},n.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===Qn){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Pr.findDOMNode(this);u&&SU(u)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ji&&this.setState({status:Ll})},n.performEnter=function(r){var a=this,u=this.props.enter,c=this.context?this.context.isMounting:r,h=this.props.nodeRef?[c]:[Pr.findDOMNode(this),c],d=h[0],m=h[1],y=this.getTimeouts(),S=c?y.appear:y.enter;if(!r&&!u||fw.disabled){this.safeSetState({status:ri},function(){a.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:Qn},function(){a.props.onEntering(d,m),a.onTransitionEnd(S,function(){a.safeSetState({status:ri},function(){a.props.onEntered(d,m)})})})},n.performExit=function(){var r=this,a=this.props.exit,u=this.getTimeouts(),c=this.props.nodeRef?void 0:Pr.findDOMNode(this);if(!a||fw.disabled){this.safeSetState({status:ji},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:su},function(){r.props.onExiting(c),r.onTransitionEnd(u.exit,function(){r.safeSetState({status:ji},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},n.setNextCallback=function(r){var a=this,u=!0;return this.nextCallback=function(c){u&&(u=!1,a.nextCallback=null,r(c))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},n.onTransitionEnd=function(r,a){this.setNextCallback(a);var u=this.props.nodeRef?this.props.nodeRef.current:Pr.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!u||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=h[0],m=h[1];this.props.addEndListener(d,m)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Ll)return null;var a=this.props,u=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var c=Ix(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return et.createElement(Px.Provider,{value:null},typeof u=="function"?u(r,c):et.cloneElement(et.Children.only(u),c))},e})(et.Component);gi.contextType=Px;gi.propTypes={};function Vs(){}gi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vs,onEntering:Vs,onEntered:Vs,onExit:Vs,onExiting:Vs,onExited:Vs};gi.UNMOUNTED=Ll;gi.EXITED=ji;gi.ENTERING=Qn;gi.ENTERED=ri;gi.EXITING=su;function EU(t){return t.code==="Escape"||t.keyCode===27}function bU(){const t=T.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function Ca(t){if(!t||typeof t=="function")return null;const{major:e}=bU();return e>=19?t.props.ref:t.ref}const Qd=!!(typeof window<"u"&&window.document&&window.document.createElement);var av=!1,lv=!1;try{var ug={get passive(){return av=!0},get once(){return lv=av=!0}};Qd&&(window.addEventListener("test",ug,ug),window.removeEventListener("test",ug,!0))}catch{}function kx(t,e,n,o){if(o&&typeof o!="boolean"&&!lv){var r=o.once,a=o.capture,u=n;!lv&&r&&(u=n.__once||function c(h){this.removeEventListener(e,c,a),n.call(this,h)},n.__once=u),t.addEventListener(e,u,av?o:a)}t.addEventListener(e,n,o)}function wU(t,e,n,o){var r=o&&typeof o!="boolean"?o.capture:o;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function Wi(t,e,n,o){return kx(t,e,n,o),function(){wU(t,e,n,o)}}function TU(t,e,n,o){if(o===void 0&&(o=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,o),t.dispatchEvent(r)}}function CU(t){var e=li(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function AU(t,e,n){n===void 0&&(n=5);var o=!1,r=setTimeout(function(){o||TU(t,"transitionend",!0)},e+n),a=Wi(t,"transitionend",function(){o=!0},{once:!0});return function(){clearTimeout(r),a()}}function xU(t,e,n,o){n==null&&(n=CU(t)||0);var r=AU(t,n,o),a=Wi(t,"transitionend",e);return function(){r(),a()}}function dw(t,e){const n=li(t,e)||"",o=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*o}function hy(t,e){const n=dw(t,"transitionDuration"),o=dw(t,"transitionDelay"),r=xU(t,a=>{a.target===t&&(r(),e(a))},n+o)}function Dl(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function Lx(t){t.offsetHeight}const hw=t=>!t||typeof t=="function"?t:e=>{t.current=e};function RU(t,e){const n=hw(t),o=hw(e);return r=>{n&&n(r),o&&o(r)}}function py(t,e){return T.useMemo(()=>RU(t,e),[t,e])}function MU(t){return t&&"setState"in t?Pr.findDOMNode(t):t??null}const Zd=et.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:o,onExiting:r,onExited:a,addEndListener:u,children:c,childRef:h,...d},m)=>{const y=T.useRef(null),S=py(y,h),E=U=>{S(MU(U))},C=U=>O=>{U&&y.current&&U(y.current,O)},A=T.useCallback(C(t),[t]),x=T.useCallback(C(e),[e]),M=T.useCallback(C(n),[n]),I=T.useCallback(C(o),[o]),N=T.useCallback(C(r),[r]),D=T.useCallback(C(a),[a]),L=T.useCallback(C(u),[u]);return w.jsx(gi,{ref:m,...d,onEnter:A,onEntered:M,onEntering:x,onExit:I,onExited:D,onExiting:N,addEndListener:L,nodeRef:y,children:typeof c=="function"?(U,O)=>c(U,{...O,ref:E}):et.cloneElement(c,{ref:E})})});Zd.displayName="TransitionWrapper";const NU={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function IU(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,o=e[n],r=NU[t];return o+parseInt(li(e,r[0]),10)+parseInt(li(e,r[1]),10)}const DU={[ji]:"collapse",[su]:"collapsing",[Qn]:"collapsing",[ri]:"collapse show"},Ux=et.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:o,onExiting:r,className:a,children:u,dimension:c="height",in:h=!1,timeout:d=300,mountOnEnter:m=!1,unmountOnExit:y=!1,appear:S=!1,getDimensionValue:E=IU,...C},A)=>{const x=typeof c=="function"?c():c,M=T.useMemo(()=>Dl(U=>{U.style[x]="0"},t),[x,t]),I=T.useMemo(()=>Dl(U=>{const O=`scroll${x[0].toUpperCase()}${x.slice(1)}`;U.style[x]=`${U[O]}px`},e),[x,e]),N=T.useMemo(()=>Dl(U=>{U.style[x]=null},n),[x,n]),D=T.useMemo(()=>Dl(U=>{U.style[x]=`${E(x,U)}px`,Lx(U)},o),[o,E,x]),L=T.useMemo(()=>Dl(U=>{U.style[x]=null},r),[x,r]);return w.jsx(Zd,{ref:A,addEndListener:hy,...C,"aria-expanded":C.role?h:null,onEnter:M,onEntering:I,onEntered:N,onExit:D,onExiting:L,childRef:Ca(u),in:h,timeout:d,mountOnEnter:m,unmountOnExit:y,appear:S,children:(U,O)=>et.cloneElement(u,{...O,className:Ne(a,u.props.className,DU[U],x==="width"&&"collapse-horizontal")})})});Ux.displayName="Collapse";function OU(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t},[t]),e}function Iu(t){const e=OU(t);return T.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const my=(t=>T.forwardRef((e,n)=>w.jsx("div",{...e,ref:n,className:Ne(e.className,t)})));function PU(){return T.useState(null)}function kU(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t},[t]),e}function Lt(t){const e=kU(t);return T.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function LU(t,e,n,o=!1){const r=Lt(n);T.useEffect(()=>{const a=typeof t=="function"?t():t;return a.addEventListener(e,r,o),()=>a.removeEventListener(e,r,o)},[t])}function Bx(){const t=T.useRef(!0),e=T.useRef(()=>t.current);return T.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function Fx(t){const e=T.useRef(null);return T.useEffect(()=>{e.current=t}),e.current}const UU=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",BU=typeof document<"u",pw=BU||UU?T.useLayoutEffect:T.useEffect,FU=["as","disabled"];function HU(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}function $U(t){return!t||t.trim()==="#"}function gy({tagName:t,disabled:e,href:n,target:o,rel:r,role:a,onClick:u,tabIndex:c=0,type:h}){t||(n!=null||o!=null||r!=null?t="a":t="button");const d={tagName:t};if(t==="button")return[{type:h||"button",disabled:e},d];const m=S=>{if((e||t==="a"&&$U(n))&&S.preventDefault(),e){S.stopPropagation();return}u?.(S)},y=S=>{S.key===" "&&(S.preventDefault(),m(S))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?o:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:m,onKeyDown:y},d]}const vy=T.forwardRef((t,e)=>{let{as:n,disabled:o}=t,r=HU(t,FU);const[a,{tagName:u}]=gy(Object.assign({tagName:n,disabled:o},r));return w.jsx(u,Object.assign({},r,a,{ref:e}))});vy.displayName="Button";const GU=["onKeyDown"];function VU(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}function zU(t){return!t||t.trim()==="#"}const yy=T.forwardRef((t,e)=>{let{onKeyDown:n}=t,o=VU(t,GU);const[r]=gy(Object.assign({tagName:"a"},o)),a=Lt(u=>{r.onKeyDown(u),n?.(u)});return zU(o.href)||o.role==="button"?w.jsx("a",Object.assign({ref:e},o,r,{onKeyDown:a})):w.jsx("a",Object.assign({ref:e},o,{onKeyDown:n}))});yy.displayName="Anchor";const qU={[Qn]:"show",[ri]:"show"},Hx=T.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:o,...r},a)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=T.useCallback((h,d)=>{Lx(h),o?.(h,d)},[o]);return w.jsx(Zd,{ref:a,addEndListener:hy,...u,onEnter:c,childRef:Ca(e),children:(h,d)=>T.cloneElement(e,{...d,className:Ne("fade",t,e.props.className,qU[h],n[h])})})});Hx.displayName="Fade";const JU={"aria-label":lg.string,onClick:lg.func,variant:lg.oneOf(["white"])},_y=T.forwardRef(({className:t,variant:e,"aria-label":n="Close",...o},r)=>w.jsx("button",{ref:r,type:"button",className:Ne("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...o}));_y.displayName="CloseButton";_y.propTypes=JU;const $x=T.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:o,active:r=!1,disabled:a=!1,className:u,...c},h)=>{const d=Ue(e,"btn"),[m,{tagName:y}]=gy({tagName:t,disabled:a,...c}),S=y;return w.jsx(S,{...m,...c,ref:h,disabled:a,className:Ne(u,d,r&&"active",n&&`${d}-${n}`,o&&`${d}-${o}`,c.href&&a&&"disabled")})});$x.displayName="Button";const Sy=T.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=Ue(e,"card-body"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));Sy.displayName="CardBody";const Gx=T.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=Ue(e,"card-footer"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));Gx.displayName="CardFooter";const Ey=T.createContext(null);Ey.displayName="CardHeaderContext";const Vx=T.forwardRef(({bsPrefix:t,className:e,as:n="div",...o},r)=>{const a=Ue(t,"card-header"),u=T.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return w.jsx(Ey.Provider,{value:u,children:w.jsx(n,{ref:r,...o,className:Ne(e,a)})})});Vx.displayName="CardHeader";const zx=T.forwardRef(({bsPrefix:t,className:e,variant:n,as:o="img",...r},a)=>{const u=Ue(t,"card-img");return w.jsx(o,{ref:a,className:Ne(n?`${u}-${n}`:u,e),...r})});zx.displayName="CardImg";const qx=T.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=Ue(e,"card-img-overlay"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));qx.displayName="CardImgOverlay";const Jx=T.forwardRef(({className:t,bsPrefix:e,as:n="a",...o},r)=>(e=Ue(e,"card-link"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));Jx.displayName="CardLink";const KU=my("h6"),Kx=T.forwardRef(({className:t,bsPrefix:e,as:n=KU,...o},r)=>(e=Ue(e,"card-subtitle"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));Kx.displayName="CardSubtitle";const Yx=T.forwardRef(({className:t,bsPrefix:e,as:n="p",...o},r)=>(e=Ue(e,"card-text"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));Yx.displayName="CardText";const YU=my("h5"),jx=T.forwardRef(({className:t,bsPrefix:e,as:n=YU,...o},r)=>(e=Ue(e,"card-title"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));jx.displayName="CardTitle";const Xx=T.forwardRef(({bsPrefix:t,className:e,bg:n,text:o,border:r,body:a=!1,children:u,as:c="div",...h},d)=>{const m=Ue(t,"card");return w.jsx(c,{ref:d,...h,className:Ne(e,m,n&&`bg-${n}`,o&&`text-${o}`,r&&`border-${r}`),children:a?w.jsx(Sy,{children:u}):u})});Xx.displayName="Card";const _f=Object.assign(Xx,{Img:zx,Title:jx,Subtitle:Kx,Body:Sy,Link:Jx,Text:Yx,Header:Vx,Footer:Gx,ImgOverlay:qx});function jU({as:t,bsPrefix:e,className:n,...o}){e=Ue(e,"col");const r=Dx(),a=Ox(),u=[],c=[];return r.forEach(h=>{const d=o[h];delete o[h];let m,y,S;typeof d=="object"&&d!=null?{span:m,offset:y,order:S}=d:m=d;const E=h!==a?`-${h}`:"";m&&u.push(m===!0?`${e}${E}`:`${e}${E}-${m}`),S!=null&&c.push(`order${E}-${S}`),y!=null&&c.push(`offset${E}-${y}`)}),[{...o,className:Ne(n,...u,...c)},{as:t,bsPrefix:e,spans:u}]}const Wx=T.forwardRef((t,e)=>{const[{className:n,...o},{as:r="div",bsPrefix:a,spans:u}]=jU(t);return w.jsx(r,{...o,ref:e,className:Ne(n,!u.length&&a)})});Wx.displayName="Col";const Qx=T.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:o,...r},a)=>{const u=Ue(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return w.jsx(n,{ref:a,...r,className:Ne(o,e?`${u}${c}`:u)})});Qx.displayName="Container";var XU=Function.prototype.bind.call(Function.prototype.call,[].slice);function ni(t,e){return XU(t.querySelectorAll(e))}function WU(t,e,n){const o=T.useRef(t!==void 0),[r,a]=T.useState(e),u=t!==void 0,c=o.current;return o.current=u,!u&&c&&r!==e&&a(e),[u?t:r,T.useCallback((...h)=>{const[d,...m]=h;let y=n?.(d,...m);return a(d),y},[n])]}function Zx(){const[,t]=T.useReducer(e=>e+1,0);return t}const eh=T.createContext(null);var mw=Object.prototype.hasOwnProperty;function gw(t,e,n){for(n of t.keys())if(Wl(n,e))return n}function Wl(t,e){var n,o,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((o=t.length)===e.length)for(;o--&&Wl(t[o],e[o]););return o===-1}if(n===Set){if(t.size!==e.size)return!1;for(o of t)if(r=o,r&&typeof r=="object"&&(r=gw(e,r),!r)||!e.has(r))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(o of t)if(r=o[0],r&&typeof r=="object"&&(r=gw(e,r),!r)||!Wl(o[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((o=t.byteLength)===e.byteLength)for(;o--&&t.getInt8(o)===e.getInt8(o););return o===-1}if(ArrayBuffer.isView(t)){if((o=t.byteLength)===e.byteLength)for(;o--&&t[o]===e[o];);return o===-1}if(!n||typeof t=="object"){o=0;for(n in t)if(mw.call(t,n)&&++o&&!mw.call(e,n)||!(n in e)||!Wl(t[n],e[n]))return!1;return Object.keys(e).length===o}}return t!==t&&e!==e}function QU(t){const e=Bx();return[t[0],T.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var en="top",Vn="bottom",zn="right",tn="left",by="auto",Du=[en,Vn,zn,tn],ya="start",au="end",ZU="clippingParents",eR="viewport",Ol="popper",eB="reference",vw=Du.reduce(function(t,e){return t.concat([e+"-"+ya,e+"-"+au])},[]),tR=[].concat(Du,[by]).reduce(function(t,e){return t.concat([e,e+"-"+ya,e+"-"+au])},[]),tB="beforeRead",nB="read",oB="afterRead",iB="beforeMain",rB="main",sB="afterMain",aB="beforeWrite",lB="write",uB="afterWrite",cB=[tB,nB,oB,iB,rB,sB,aB,lB,uB];function Ro(t){return t.split("-")[0]}function En(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function qr(t){var e=En(t).Element;return t instanceof e||t instanceof Element}function Mo(t){var e=En(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function wy(t){if(typeof ShadowRoot>"u")return!1;var e=En(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Ur=Math.max,yd=Math.min,_a=Math.round;function uv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function nR(){return!/^((?!chrome|android).)*safari/i.test(uv())}function Sa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var o=t.getBoundingClientRect(),r=1,a=1;e&&Mo(t)&&(r=t.offsetWidth>0&&_a(o.width)/t.offsetWidth||1,a=t.offsetHeight>0&&_a(o.height)/t.offsetHeight||1);var u=qr(t)?En(t):window,c=u.visualViewport,h=!nR()&&n,d=(o.left+(h&&c?c.offsetLeft:0))/r,m=(o.top+(h&&c?c.offsetTop:0))/a,y=o.width/r,S=o.height/a;return{width:y,height:S,top:m,right:d+y,bottom:m+S,left:d,x:d,y:m}}function Ty(t){var e=Sa(t),n=t.offsetWidth,o=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:o}}function oR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&wy(n)){var o=e;do{if(o&&t.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function er(t){return t?(t.nodeName||"").toLowerCase():null}function fi(t){return En(t).getComputedStyle(t)}function fB(t){return["table","td","th"].indexOf(er(t))>=0}function lr(t){return((qr(t)?t.ownerDocument:t.document)||window.document).documentElement}function th(t){return er(t)==="html"?t:t.assignedSlot||t.parentNode||(wy(t)?t.host:null)||lr(t)}function yw(t){return!Mo(t)||fi(t).position==="fixed"?null:t.offsetParent}function dB(t){var e=/firefox/i.test(uv()),n=/Trident/i.test(uv());if(n&&Mo(t)){var o=fi(t);if(o.position==="fixed")return null}var r=th(t);for(wy(r)&&(r=r.host);Mo(r)&&["html","body"].indexOf(er(r))<0;){var a=fi(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function Ou(t){for(var e=En(t),n=yw(t);n&&fB(n)&&fi(n).position==="static";)n=yw(n);return n&&(er(n)==="html"||er(n)==="body"&&fi(n).position==="static")?e:n||dB(t)||e}function Cy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ql(t,e,n){return Ur(t,yd(e,n))}function hB(t,e,n){var o=Ql(t,e,n);return o>n?n:o}function iR(){return{top:0,right:0,bottom:0,left:0}}function rR(t){return Object.assign({},iR(),t)}function sR(t,e){return e.reduce(function(n,o){return n[o]=t,n},{})}var pB=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,rR(typeof e!="number"?e:sR(e,Du))};function mB(t){var e,n=t.state,o=t.name,r=t.options,a=n.elements.arrow,u=n.modifiersData.popperOffsets,c=Ro(n.placement),h=Cy(c),d=[tn,zn].indexOf(c)>=0,m=d?"height":"width";if(!(!a||!u)){var y=pB(r.padding,n),S=Ty(a),E=h==="y"?en:tn,C=h==="y"?Vn:zn,A=n.rects.reference[m]+n.rects.reference[h]-u[h]-n.rects.popper[m],x=u[h]-n.rects.reference[h],M=Ou(a),I=M?h==="y"?M.clientHeight||0:M.clientWidth||0:0,N=A/2-x/2,D=y[E],L=I-S[m]-y[C],U=I/2-S[m]/2+N,O=Ql(D,U,L),q=h;n.modifiersData[o]=(e={},e[q]=O,e.centerOffset=O-U,e)}}function gB(t){var e=t.state,n=t.options,o=n.element,r=o===void 0?"[data-popper-arrow]":o;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||oR(e.elements.popper,r)&&(e.elements.arrow=r))}const vB={name:"arrow",enabled:!0,phase:"main",fn:mB,effect:gB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ea(t){return t.split("-")[1]}var yB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _B(t,e){var n=t.x,o=t.y,r=e.devicePixelRatio||1;return{x:_a(n*r)/r||0,y:_a(o*r)/r||0}}function _w(t){var e,n=t.popper,o=t.popperRect,r=t.placement,a=t.variation,u=t.offsets,c=t.position,h=t.gpuAcceleration,d=t.adaptive,m=t.roundOffsets,y=t.isFixed,S=u.x,E=S===void 0?0:S,C=u.y,A=C===void 0?0:C,x=typeof m=="function"?m({x:E,y:A}):{x:E,y:A};E=x.x,A=x.y;var M=u.hasOwnProperty("x"),I=u.hasOwnProperty("y"),N=tn,D=en,L=window;if(d){var U=Ou(n),O="clientHeight",q="clientWidth";if(U===En(n)&&(U=lr(n),fi(U).position!=="static"&&c==="absolute"&&(O="scrollHeight",q="scrollWidth")),U=U,r===en||(r===tn||r===zn)&&a===au){D=Vn;var J=y&&U===L&&L.visualViewport?L.visualViewport.height:U[O];A-=J-o.height,A*=h?1:-1}if(r===tn||(r===en||r===Vn)&&a===au){N=zn;var j=y&&U===L&&L.visualViewport?L.visualViewport.width:U[q];E-=j-o.width,E*=h?1:-1}}var W=Object.assign({position:c},d&&yB),re=m===!0?_B({x:E,y:A},En(n)):{x:E,y:A};if(E=re.x,A=re.y,h){var oe;return Object.assign({},W,(oe={},oe[D]=I?"0":"",oe[N]=M?"0":"",oe.transform=(L.devicePixelRatio||1)<=1?"translate("+E+"px, "+A+"px)":"translate3d("+E+"px, "+A+"px, 0)",oe))}return Object.assign({},W,(e={},e[D]=I?A+"px":"",e[N]=M?E+"px":"",e.transform="",e))}function SB(t){var e=t.state,n=t.options,o=n.gpuAcceleration,r=o===void 0?!0:o,a=n.adaptive,u=a===void 0?!0:a,c=n.roundOffsets,h=c===void 0?!0:c,d={placement:Ro(e.placement),variation:Ea(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,_w(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,_w(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const EB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:SB,data:{}};var Sf={passive:!0};function bB(t){var e=t.state,n=t.instance,o=t.options,r=o.scroll,a=r===void 0?!0:r,u=o.resize,c=u===void 0?!0:u,h=En(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(m){m.addEventListener("scroll",n.update,Sf)}),c&&h.addEventListener("resize",n.update,Sf),function(){a&&d.forEach(function(m){m.removeEventListener("scroll",n.update,Sf)}),c&&h.removeEventListener("resize",n.update,Sf)}}const wB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:bB,data:{}};var TB={left:"right",right:"left",bottom:"top",top:"bottom"};function Kf(t){return t.replace(/left|right|bottom|top/g,function(e){return TB[e]})}var CB={start:"end",end:"start"};function Sw(t){return t.replace(/start|end/g,function(e){return CB[e]})}function Ay(t){var e=En(t),n=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:n,scrollTop:o}}function xy(t){return Sa(lr(t)).left+Ay(t).scrollLeft}function AB(t,e){var n=En(t),o=lr(t),r=n.visualViewport,a=o.clientWidth,u=o.clientHeight,c=0,h=0;if(r){a=r.width,u=r.height;var d=nR();(d||!d&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}return{width:a,height:u,x:c+xy(t),y:h}}function xB(t){var e,n=lr(t),o=Ay(t),r=(e=t.ownerDocument)==null?void 0:e.body,a=Ur(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),u=Ur(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-o.scrollLeft+xy(t),h=-o.scrollTop;return fi(r||n).direction==="rtl"&&(c+=Ur(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:u,x:c,y:h}}function Ry(t){var e=fi(t),n=e.overflow,o=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function aR(t){return["html","body","#document"].indexOf(er(t))>=0?t.ownerDocument.body:Mo(t)&&Ry(t)?t:aR(th(t))}function Zl(t,e){var n;e===void 0&&(e=[]);var o=aR(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),a=En(o),u=r?[a].concat(a.visualViewport||[],Ry(o)?o:[]):o,c=e.concat(u);return r?c:c.concat(Zl(th(u)))}function cv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function RB(t,e){var n=Sa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ew(t,e,n){return e===eR?cv(AB(t,n)):qr(e)?RB(e,n):cv(xB(lr(t)))}function MB(t){var e=Zl(th(t)),n=["absolute","fixed"].indexOf(fi(t).position)>=0,o=n&&Mo(t)?Ou(t):t;return qr(o)?e.filter(function(r){return qr(r)&&oR(r,o)&&er(r)!=="body"}):[]}function NB(t,e,n,o){var r=e==="clippingParents"?MB(t):[].concat(e),a=[].concat(r,[n]),u=a[0],c=a.reduce(function(h,d){var m=Ew(t,d,o);return h.top=Ur(m.top,h.top),h.right=yd(m.right,h.right),h.bottom=yd(m.bottom,h.bottom),h.left=Ur(m.left,h.left),h},Ew(t,u,o));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function lR(t){var e=t.reference,n=t.element,o=t.placement,r=o?Ro(o):null,a=o?Ea(o):null,u=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,h;switch(r){case en:h={x:u,y:e.y-n.height};break;case Vn:h={x:u,y:e.y+e.height};break;case zn:h={x:e.x+e.width,y:c};break;case tn:h={x:e.x-n.width,y:c};break;default:h={x:e.x,y:e.y}}var d=r?Cy(r):null;if(d!=null){var m=d==="y"?"height":"width";switch(a){case ya:h[d]=h[d]-(e[m]/2-n[m]/2);break;case au:h[d]=h[d]+(e[m]/2-n[m]/2);break}}return h}function lu(t,e){e===void 0&&(e={});var n=e,o=n.placement,r=o===void 0?t.placement:o,a=n.strategy,u=a===void 0?t.strategy:a,c=n.boundary,h=c===void 0?ZU:c,d=n.rootBoundary,m=d===void 0?eR:d,y=n.elementContext,S=y===void 0?Ol:y,E=n.altBoundary,C=E===void 0?!1:E,A=n.padding,x=A===void 0?0:A,M=rR(typeof x!="number"?x:sR(x,Du)),I=S===Ol?eB:Ol,N=t.rects.popper,D=t.elements[C?I:S],L=NB(qr(D)?D:D.contextElement||lr(t.elements.popper),h,m,u),U=Sa(t.elements.reference),O=lR({reference:U,element:N,placement:r}),q=cv(Object.assign({},N,O)),J=S===Ol?q:U,j={top:L.top-J.top+M.top,bottom:J.bottom-L.bottom+M.bottom,left:L.left-J.left+M.left,right:J.right-L.right+M.right},W=t.modifiersData.offset;if(S===Ol&&W){var re=W[r];Object.keys(j).forEach(function(oe){var ae=[zn,Vn].indexOf(oe)>=0?1:-1,de=[en,Vn].indexOf(oe)>=0?"y":"x";j[oe]+=re[de]*ae})}return j}function IB(t,e){e===void 0&&(e={});var n=e,o=n.placement,r=n.boundary,a=n.rootBoundary,u=n.padding,c=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?tR:h,m=Ea(o),y=m?c?vw:vw.filter(function(C){return Ea(C)===m}):Du,S=y.filter(function(C){return d.indexOf(C)>=0});S.length===0&&(S=y);var E=S.reduce(function(C,A){return C[A]=lu(t,{placement:A,boundary:r,rootBoundary:a,padding:u})[Ro(A)],C},{});return Object.keys(E).sort(function(C,A){return E[C]-E[A]})}function DB(t){if(Ro(t)===by)return[];var e=Kf(t);return[Sw(t),e,Sw(e)]}function OB(t){var e=t.state,n=t.options,o=t.name;if(!e.modifiersData[o]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,u=n.altAxis,c=u===void 0?!0:u,h=n.fallbackPlacements,d=n.padding,m=n.boundary,y=n.rootBoundary,S=n.altBoundary,E=n.flipVariations,C=E===void 0?!0:E,A=n.allowedAutoPlacements,x=e.options.placement,M=Ro(x),I=M===x,N=h||(I||!C?[Kf(x)]:DB(x)),D=[x].concat(N).reduce(function(le,me){return le.concat(Ro(me)===by?IB(e,{placement:me,boundary:m,rootBoundary:y,padding:d,flipVariations:C,allowedAutoPlacements:A}):me)},[]),L=e.rects.reference,U=e.rects.popper,O=new Map,q=!0,J=D[0],j=0;j<D.length;j++){var W=D[j],re=Ro(W),oe=Ea(W)===ya,ae=[en,Vn].indexOf(re)>=0,de=ae?"width":"height",F=lu(e,{placement:W,boundary:m,rootBoundary:y,altBoundary:S,padding:d}),Q=ae?oe?zn:tn:oe?Vn:en;L[de]>U[de]&&(Q=Kf(Q));var ee=Kf(Q),ne=[];if(a&&ne.push(F[re]<=0),c&&ne.push(F[Q]<=0,F[ee]<=0),ne.every(function(le){return le})){J=W,q=!1;break}O.set(W,ne)}if(q)for(var ce=C?3:1,k=function(me){var Ee=D.find(function(ve){var ze=O.get(ve);if(ze)return ze.slice(0,me).every(function(qe){return qe})});if(Ee)return J=Ee,"break"},Y=ce;Y>0;Y--){var se=k(Y);if(se==="break")break}e.placement!==J&&(e.modifiersData[o]._skip=!0,e.placement=J,e.reset=!0)}}const PB={name:"flip",enabled:!0,phase:"main",fn:OB,requiresIfExists:["offset"],data:{_skip:!1}};function bw(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ww(t){return[en,zn,Vn,tn].some(function(e){return t[e]>=0})}function kB(t){var e=t.state,n=t.name,o=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,u=lu(e,{elementContext:"reference"}),c=lu(e,{altBoundary:!0}),h=bw(u,o),d=bw(c,r,a),m=ww(h),y=ww(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":y})}const LB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:kB};function UB(t,e,n){var o=Ro(t),r=[tn,en].indexOf(o)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,u=a[0],c=a[1];return u=u||0,c=(c||0)*r,[tn,zn].indexOf(o)>=0?{x:c,y:u}:{x:u,y:c}}function BB(t){var e=t.state,n=t.options,o=t.name,r=n.offset,a=r===void 0?[0,0]:r,u=tR.reduce(function(m,y){return m[y]=UB(y,e.rects,a),m},{}),c=u[e.placement],h=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[o]=u}const FB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:BB};function HB(t){var e=t.state,n=t.name;e.modifiersData[n]=lR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const $B={name:"popperOffsets",enabled:!0,phase:"read",fn:HB,data:{}};function GB(t){return t==="x"?"y":"x"}function VB(t){var e=t.state,n=t.options,o=t.name,r=n.mainAxis,a=r===void 0?!0:r,u=n.altAxis,c=u===void 0?!1:u,h=n.boundary,d=n.rootBoundary,m=n.altBoundary,y=n.padding,S=n.tether,E=S===void 0?!0:S,C=n.tetherOffset,A=C===void 0?0:C,x=lu(e,{boundary:h,rootBoundary:d,padding:y,altBoundary:m}),M=Ro(e.placement),I=Ea(e.placement),N=!I,D=Cy(M),L=GB(D),U=e.modifiersData.popperOffsets,O=e.rects.reference,q=e.rects.popper,J=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,j=typeof J=="number"?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(U){if(a){var oe,ae=D==="y"?en:tn,de=D==="y"?Vn:zn,F=D==="y"?"height":"width",Q=U[D],ee=Q+x[ae],ne=Q-x[de],ce=E?-q[F]/2:0,k=I===ya?O[F]:q[F],Y=I===ya?-q[F]:-O[F],se=e.elements.arrow,le=E&&se?Ty(se):{width:0,height:0},me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:iR(),Ee=me[ae],ve=me[de],ze=Ql(0,O[F],le[F]),qe=N?O[F]/2-ce-ze-Ee-j.mainAxis:k-ze-Ee-j.mainAxis,on=N?-O[F]/2+ce+ze+ve+j.mainAxis:Y+ze+ve+j.mainAxis,wn=e.elements.arrow&&Ou(e.elements.arrow),ho=wn?D==="y"?wn.clientTop||0:wn.clientLeft||0:0,zt=(oe=W?.[D])!=null?oe:0,qt=Q+qe-zt-ho,Qe=Q+on-zt,ko=Ql(E?yd(ee,qt):ee,Q,E?Ur(ne,Qe):ne);U[D]=ko,re[D]=ko-Q}if(c){var _i,Ku=D==="x"?en:tn,ka=D==="x"?Vn:zn,Kn=U[L],Si=L==="y"?"height":"width",Yu=Kn+x[Ku],ju=Kn-x[ka],At=[en,tn].indexOf(M)!==-1,Xu=(_i=W?.[L])!=null?_i:0,La=At?Yu:Kn-O[Si]-q[Si]-Xu+j.altAxis,Ua=At?Kn+O[Si]+q[Si]-Xu-j.altAxis:ju,fr=E&&At?hB(La,Kn,Ua):Ql(E?La:Yu,Kn,E?Ua:ju);U[L]=fr,re[L]=fr-Kn}e.modifiersData[o]=re}}const zB={name:"preventOverflow",enabled:!0,phase:"main",fn:VB,requiresIfExists:["offset"]};function qB(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function JB(t){return t===En(t)||!Mo(t)?Ay(t):qB(t)}function KB(t){var e=t.getBoundingClientRect(),n=_a(e.width)/t.offsetWidth||1,o=_a(e.height)/t.offsetHeight||1;return n!==1||o!==1}function YB(t,e,n){n===void 0&&(n=!1);var o=Mo(e),r=Mo(e)&&KB(e),a=lr(e),u=Sa(t,r,n),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!n)&&((er(e)!=="body"||Ry(a))&&(c=JB(e)),Mo(e)?(h=Sa(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=xy(a))),{x:u.left+c.scrollLeft-h.x,y:u.top+c.scrollTop-h.y,width:u.width,height:u.height}}function jB(t){var e=new Map,n=new Set,o=[];t.forEach(function(a){e.set(a.name,a)});function r(a){n.add(a.name);var u=[].concat(a.requires||[],a.requiresIfExists||[]);u.forEach(function(c){if(!n.has(c)){var h=e.get(c);h&&r(h)}}),o.push(a)}return t.forEach(function(a){n.has(a.name)||r(a)}),o}function XB(t){var e=jB(t);return cB.reduce(function(n,o){return n.concat(e.filter(function(r){return r.phase===o}))},[])}function WB(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function QB(t){var e=t.reduce(function(n,o){var r=n[o.name];return n[o.name]=r?Object.assign({},r,o,{options:Object.assign({},r.options,o.options),data:Object.assign({},r.data,o.data)}):o,n},{});return Object.keys(e).map(function(n){return e[n]})}var Tw={placement:"bottom",modifiers:[],strategy:"absolute"};function Cw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function ZB(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,o=n===void 0?[]:n,r=e.defaultOptions,a=r===void 0?Tw:r;return function(c,h,d){d===void 0&&(d=a);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},Tw,a),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},y=[],S=!1,E={state:m,setOptions:function(M){var I=typeof M=="function"?M(m.options):M;A(),m.options=Object.assign({},a,m.options,I),m.scrollParents={reference:qr(c)?Zl(c):c.contextElement?Zl(c.contextElement):[],popper:Zl(h)};var N=XB(QB([].concat(o,m.options.modifiers)));return m.orderedModifiers=N.filter(function(D){return D.enabled}),C(),E.update()},forceUpdate:function(){if(!S){var M=m.elements,I=M.reference,N=M.popper;if(Cw(I,N)){m.rects={reference:YB(I,Ou(N),m.options.strategy==="fixed"),popper:Ty(N)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(j){return m.modifiersData[j.name]=Object.assign({},j.data)});for(var D=0;D<m.orderedModifiers.length;D++){if(m.reset===!0){m.reset=!1,D=-1;continue}var L=m.orderedModifiers[D],U=L.fn,O=L.options,q=O===void 0?{}:O,J=L.name;typeof U=="function"&&(m=U({state:m,options:q,name:J,instance:E})||m)}}}},update:WB(function(){return new Promise(function(x){E.forceUpdate(),x(m)})}),destroy:function(){A(),S=!0}};if(!Cw(c,h))return E;E.setOptions(d).then(function(x){!S&&d.onFirstUpdate&&d.onFirstUpdate(x)});function C(){m.orderedModifiers.forEach(function(x){var M=x.name,I=x.options,N=I===void 0?{}:I,D=x.effect;if(typeof D=="function"){var L=D({state:m,name:M,instance:E,options:N}),U=function(){};y.push(L||U)}})}function A(){y.forEach(function(x){return x()}),y=[]}return E}}const e2=ZB({defaultModifiers:[LB,$B,EB,wB,FB,PB,zB,vB]}),t2=["enabled","placement","strategy","modifiers"];function n2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}const o2={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},i2={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const o=(e.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);o.length?e.setAttribute("aria-describedby",o.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:o}=t.elements,r=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in o){const a=o.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(n.id)!==-1)return;o.setAttribute("aria-describedby",a?`${a},${n.id}`:n.id)}}},r2=[];function s2(t,e,n={}){let{enabled:o=!0,placement:r="bottom",strategy:a="absolute",modifiers:u=r2}=n,c=n2(n,t2);const h=T.useRef(u),d=T.useRef(),m=T.useCallback(()=>{var x;(x=d.current)==null||x.update()},[]),y=T.useCallback(()=>{var x;(x=d.current)==null||x.forceUpdate()},[]),[S,E]=QU(T.useState({placement:r,update:m,forceUpdate:y,attributes:{},styles:{popper:{},arrow:{}}})),C=T.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:x})=>{const M={},I={};Object.keys(x.elements).forEach(N=>{M[N]=x.styles[N],I[N]=x.attributes[N]}),E({state:x,styles:M,attributes:I,update:m,forceUpdate:y,placement:x.placement})}}),[m,y,E]),A=T.useMemo(()=>(Wl(h.current,u)||(h.current=u),h.current),[u]);return T.useEffect(()=>{!d.current||!o||d.current.setOptions({placement:r,strategy:a,modifiers:[...A,C,o2]})},[a,r,C,o,A]),T.useEffect(()=>{if(!(!o||t==null||e==null))return d.current=e2(t,e,Object.assign({},c,{placement:r,strategy:a,modifiers:[...A,i2,C]})),()=>{d.current!=null&&(d.current.destroy(),d.current=void 0,E(x=>Object.assign({},x,{attributes:{},styles:{popper:{}}})))}},[o,t,e]),S}function _d(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var cg,Aw;function a2(){if(Aw)return cg;Aw=1;var t=function(){};return cg=t,cg}var l2=a2();const u2=_u(l2),xw=()=>{};function c2(t){return t.button===0}function f2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const fg=t=>t&&("current"in t?t.current:t),Rw={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function d2(t,e=xw,{disabled:n,clickTrigger:o="click"}={}){const r=T.useRef(!1),a=T.useRef(!1),u=T.useCallback(d=>{const m=fg(t);u2(!!m,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!m||f2(d)||!c2(d)||!!_d(m,d.target)||a.current,a.current=!1},[t]),c=Lt(d=>{const m=fg(t);m&&_d(m,d.target)?a.current=!0:a.current=!1}),h=Lt(d=>{r.current||e(d)});T.useEffect(()=>{var d,m;if(n||t==null)return;const y=Wd(fg(t)),S=y.defaultView||window;let E=(d=S.event)!=null?d:(m=S.parent)==null?void 0:m.event,C=null;Rw[o]&&(C=Wi(y,Rw[o],c,!0));const A=Wi(y,o,u,!0),x=Wi(y,o,I=>{if(I===E){E=void 0;return}h(I)});let M=[];return"ontouchstart"in y.documentElement&&(M=[].slice.call(y.body.children).map(I=>Wi(I,"mousemove",xw))),()=>{C?.(),A(),x(),M.forEach(I=>I())}},[t,n,o,u,c,h])}function h2(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function p2(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function m2({enabled:t,enableEvents:e,placement:n,flip:o,offset:r,fixed:a,containerPadding:u,arrowElement:c,popperConfig:h={}}){var d,m,y,S,E;const C=h2(h.modifiers);return Object.assign({},h,{placement:n,enabled:t,strategy:a?"fixed":h.strategy,modifiers:p2(Object.assign({},C,{eventListeners:{enabled:e,options:(d=C.eventListeners)==null?void 0:d.options},preventOverflow:Object.assign({},C.preventOverflow,{options:u?Object.assign({padding:u},(m=C.preventOverflow)==null?void 0:m.options):(y=C.preventOverflow)==null?void 0:y.options}),offset:{options:Object.assign({offset:r},(S=C.offset)==null?void 0:S.options)},arrow:Object.assign({},C.arrow,{enabled:!!c,options:Object.assign({},(E=C.arrow)==null?void 0:E.options,{element:c})}),flip:Object.assign({enabled:!!o},C.flip)}))})}const g2=["children","usePopper"];function v2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}const y2=()=>{};function uR(t={}){const e=T.useContext(eh),[n,o]=PU(),r=T.useRef(!1),{flip:a,offset:u,rootCloseEvent:c,fixed:h=!1,placement:d,popperConfig:m={},enableEventListeners:y=!0,usePopper:S=!!e}=t,E=e?.show==null?!!t.show:e.show;E&&!r.current&&(r.current=!0);const C=U=>{e?.toggle(!1,U)},{placement:A,setMenu:x,menuElement:M,toggleElement:I}=e||{},N=s2(I,M,m2({placement:d||A||"bottom-start",enabled:S,enableEvents:y??E,offset:u,flip:a,fixed:h,arrowElement:n,popperConfig:m})),D=Object.assign({ref:x||y2,"aria-labelledby":I?.id},N.attributes.popper,{style:N.styles.popper}),L={show:E,placement:A,hasShown:r.current,toggle:e?.toggle,popper:S?N:null,arrowProps:S?Object.assign({ref:o},N.attributes.arrow,{style:N.styles.arrow}):{}};return d2(M,C,{clickTrigger:c,disabled:!E}),[D,L]}function cR(t){let{children:e,usePopper:n=!0}=t,o=v2(t,g2);const[r,a]=uR(Object.assign({},o,{usePopper:n}));return w.jsx(w.Fragment,{children:e(r,a)})}cR.displayName="DropdownMenu";const fR={prefix:String(Math.round(Math.random()*1e10)),current:0},dR=et.createContext(fR),_2=et.createContext(!1);let dg=new WeakMap;function S2(t=!1){let e=T.useContext(dR),n=T.useRef(null);if(n.current===null&&!t){var o,r;let a=(r=et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(o=r.ReactCurrentOwner)===null||o===void 0?void 0:o.current;if(a){let u=dg.get(a);u==null?dg.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==u.state&&(e.current=u.id,dg.delete(a))}n.current=++e.current}return n.current}function E2(t){let e=T.useContext(dR),n=S2(!!t),o=`react-aria${e.prefix}`;return t||`${o}-${n}`}function b2(t){let e=et.useId(),[n]=T.useState(x2()),o=n?"react-aria":`react-aria${fR.prefix}`;return t||`${o}-${e}`}const w2=typeof et.useId=="function"?b2:E2;function T2(){return!1}function C2(){return!0}function A2(t){return()=>{}}function x2(){return typeof et.useSyncExternalStore=="function"?et.useSyncExternalStore(A2,T2,C2):T.useContext(_2)}const hR=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},Mw=()=>{};function pR(){const t=w2(),{show:e=!1,toggle:n=Mw,setToggle:o,menuElement:r}=T.useContext(eh)||{},a=T.useCallback(c=>{n(!e,c)},[e,n]),u={id:t,ref:o||Mw,onClick:a,"aria-expanded":!!e};return r&&hR(r)&&(u["aria-haspopup"]=!0),[u,{show:e,toggle:n}]}function mR({children:t}){const[e,n]=pR();return w.jsx(w.Fragment,{children:t(e,n)})}mR.displayName="DropdownToggle";const Jr=T.createContext(null),uu=(t,e=null)=>t!=null?String(t):e||null,nh=T.createContext(null);nh.displayName="NavContext";const R2="data-rr-ui-",M2="rrUi";function Aa(t){return`${R2}${t}`}function N2(t){return`${M2}${t}`}const I2=["eventKey","disabled","onClick","active","as"];function D2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}function gR({key:t,href:e,active:n,disabled:o,onClick:r}){const a=T.useContext(Jr),u=T.useContext(nh),{activeKey:c}=u||{},h=uu(t,e),d=n==null&&t!=null?uu(c)===h:n;return[{onClick:Lt(y=>{o||(r?.(y),a&&!y.isPropagationStopped()&&a(h,y))}),"aria-disabled":o||void 0,"aria-selected":d,[Aa("dropdown-item")]:""},{isActive:d}]}const vR=T.forwardRef((t,e)=>{let{eventKey:n,disabled:o,onClick:r,active:a,as:u=vy}=t,c=D2(t,I2);const[h]=gR({key:n,href:c.href,disabled:o,onClick:r,active:a});return w.jsx(u,Object.assign({},c,{ref:e},h))});vR.displayName="DropdownItem";const yR=T.createContext(Qd?window:void 0);yR.Provider;function oh(){return T.useContext(yR)}function Nw(){const t=Zx(),e=T.useRef(null),n=T.useCallback(o=>{e.current=o,t()},[t]);return[e,n]}function Pu({defaultShow:t,show:e,onSelect:n,onToggle:o,itemSelector:r=`* [${Aa("dropdown-item")}]`,focusFirstItemOnShow:a,placement:u="bottom-start",children:c}){const h=oh(),[d,m]=WU(e,t,o),[y,S]=Nw(),E=y.current,[C,A]=Nw(),x=C.current,M=Fx(d),I=T.useRef(null),N=T.useRef(!1),D=T.useContext(Jr),L=T.useCallback((W,re,oe=re?.type)=>{m(W,{originalEvent:re,source:oe})},[m]),U=Lt((W,re)=>{n?.(W,re),L(!1,re,"select"),re.isPropagationStopped()||D?.(W,re)}),O=T.useMemo(()=>({toggle:L,placement:u,show:d,menuElement:E,toggleElement:x,setMenu:S,setToggle:A}),[L,u,d,E,x,S,A]);E&&M&&!d&&(N.current=E.contains(E.ownerDocument.activeElement));const q=Lt(()=>{x&&x.focus&&x.focus()}),J=Lt(()=>{const W=I.current;let re=a;if(re==null&&(re=y.current&&hR(y.current)?"keyboard":!1),re===!1||re==="keyboard"&&!/^key.+$/.test(W))return;const oe=ni(y.current,r)[0];oe&&oe.focus&&oe.focus()});T.useEffect(()=>{d?J():N.current&&(N.current=!1,q())},[d,N,q,J]),T.useEffect(()=>{I.current=null});const j=(W,re)=>{if(!y.current)return null;const oe=ni(y.current,r);let ae=oe.indexOf(W)+re;return ae=Math.max(0,Math.min(ae,oe.length)),oe[ae]};return LU(T.useCallback(()=>h.document,[h]),"keydown",W=>{var re,oe;const{key:ae}=W,de=W.target,F=(re=y.current)==null?void 0:re.contains(de),Q=(oe=C.current)==null?void 0:oe.contains(de);if(/input|textarea/i.test(de.tagName)&&(ae===" "||ae!=="Escape"&&F||ae==="Escape"&&de.type==="search")||!F&&!Q||ae==="Tab"&&(!y.current||!d))return;I.current=W.type;const ne={originalEvent:W,source:W.type};switch(ae){case"ArrowUp":{const ce=j(de,-1);ce&&ce.focus&&ce.focus(),W.preventDefault();return}case"ArrowDown":if(W.preventDefault(),!d)m(!0,ne);else{const ce=j(de,1);ce&&ce.focus&&ce.focus()}return;case"Tab":kx(de.ownerDocument,"keyup",ce=>{var k;(ce.key==="Tab"&&!ce.target||!((k=y.current)!=null&&k.contains(ce.target)))&&m(!1,ne)},{once:!0});break;case"Escape":ae==="Escape"&&(W.preventDefault(),W.stopPropagation()),m(!1,ne);break}}),w.jsx(Jr.Provider,{value:U,children:w.jsx(eh.Provider,{value:O,children:c})})}Pu.displayName="Dropdown";Pu.Menu=cR;Pu.Toggle=mR;Pu.Item=vR;const My=T.createContext({});My.displayName="DropdownContext";const _R=T.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:o="separator",...r},a)=>(e=Ue(e,"dropdown-divider"),w.jsx(n,{ref:a,className:Ne(t,e),role:o,...r})));_R.displayName="DropdownDivider";const SR=T.forwardRef(({className:t,bsPrefix:e,as:n="div",role:o="heading",...r},a)=>(e=Ue(e,"dropdown-header"),w.jsx(n,{ref:a,className:Ne(t,e),role:o,...r})));SR.displayName="DropdownHeader";const ER=T.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:o=!1,onClick:r,active:a,as:u=yy,...c},h)=>{const d=Ue(t,"dropdown-item"),[m,y]=gR({key:n,href:c.href,disabled:o,onClick:r,active:a});return w.jsx(u,{...c,...m,ref:h,className:Ne(e,d,y.isActive&&"active",o&&"disabled")})});ER.displayName="DropdownItem";const bR=T.forwardRef(({className:t,bsPrefix:e,as:n="span",...o},r)=>(e=Ue(e,"dropdown-item-text"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));bR.displayName="DropdownItemText";const O2=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",P2=typeof document<"u",wR=P2||O2?T.useLayoutEffect:T.useEffect,Ny=T.createContext(null);Ny.displayName="InputGroupContext";const ts=T.createContext(null);ts.displayName="NavbarContext";function TR(t,e){return t}function CR(t,e,n){const o=n?"top-end":"top-start",r=n?"top-start":"top-end",a=n?"bottom-end":"bottom-start",u=n?"bottom-start":"bottom-end",c=n?"right-start":"left-start",h=n?"right-end":"left-end",d=n?"left-start":"right-start",m=n?"left-end":"right-end";let y=t?u:a;return e==="up"?y=t?r:o:e==="end"?y=t?m:d:e==="start"?y=t?h:c:e==="down-centered"?y="bottom":e==="up-centered"&&(y="top"),y}const AR=T.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:o,flip:r=!0,show:a,renderOnMount:u,as:c="div",popperConfig:h,variant:d,...m},y)=>{let S=!1;const E=T.useContext(ts),C=Ue(t,"dropdown-menu"),{align:A,drop:x,isRTL:M}=T.useContext(My);n=n||A;const I=T.useContext(Ny),N=[];if(n)if(typeof n=="object"){const W=Object.keys(n);if(W.length){const re=W[0],oe=n[re];S=oe==="start",N.push(`${C}-${re}-${oe}`)}}else n==="end"&&(S=!0);const D=CR(S,x,M),[L,{hasShown:U,popper:O,show:q,toggle:J}]=uR({flip:r,rootCloseEvent:o,show:a,usePopper:!E&&N.length===0,offset:[0,2],popperConfig:h,placement:D});if(L.ref=py(TR(y),L.ref),wR(()=>{q&&O?.update()},[q]),!U&&!u&&!I)return null;typeof c!="string"&&(L.show=q,L.close=()=>J?.(!1),L.align=n);let j=m.style;return O!=null&&O.placement&&(j={...m.style,...L.style},m["x-placement"]=O.placement),w.jsx(c,{...m,...L,style:j,...(N.length||E)&&{"data-bs-popper":"static"},className:Ne(e,C,q&&"show",S&&`${C}-end`,d&&`${C}-${d}`,...N)})});AR.displayName="DropdownMenu";const xR=T.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:o,as:r=$x,...a},u)=>{const c=Ue(t,"dropdown-toggle"),h=T.useContext(eh);o!==void 0&&(a.bsPrefix=o);const[d]=pR();return d.ref=py(d.ref,TR(u)),w.jsx(r,{className:Ne(n,c,e&&`${c}-split`,h?.show&&"show"),...d,...a})});xR.displayName="DropdownToggle";const RR=T.forwardRef((t,e)=>{const{bsPrefix:n,drop:o="down",show:r,className:a,align:u="start",onSelect:c,onToggle:h,focusFirstItemOnShow:d,as:m="div",navbar:y,autoClose:S=!0,...E}=dy(t,{show:"onToggle"}),C=T.useContext(Ny),A=Ue(n,"dropdown"),x=lU(),M=O=>S===!1?O==="click":S==="inside"?O!=="rootClose":S==="outside"?O!=="select":!0,I=Iu((O,q)=>{var J;!((J=q.originalEvent)==null||(J=J.target)==null)&&J.classList.contains("dropdown-toggle")&&q.source==="mousedown"||(q.originalEvent.currentTarget===document&&(q.source!=="keydown"||q.originalEvent.key==="Escape")&&(q.source="rootClose"),M(q.source)&&h?.(O,q))}),D=CR(u==="end",o,x),L=T.useMemo(()=>({align:u,drop:o,isRTL:x}),[u,o,x]),U={down:A,"down-centered":`${A}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return w.jsx(My.Provider,{value:L,children:w.jsx(Pu,{placement:D,show:r,onSelect:c,onToggle:I,focusFirstItemOnShow:d,itemSelector:`.${A}-item:not(.disabled):not(:disabled)`,children:C?E.children:w.jsx(m,{...E,ref:e,className:Ne(a,r&&"show",U[o])})})})});RR.displayName="Dropdown";const Ef=Object.assign(RR,{Toggle:xR,Menu:AR,Item:ER,ItemText:bR,Divider:_R,Header:SR}),Iw=t=>!t||typeof t=="function"?t:e=>{t.current=e};function k2(t,e){const n=Iw(t),o=Iw(e);return r=>{n&&n(r),o&&o(r)}}function ih(t,e){return T.useMemo(()=>k2(t,e),[t,e])}const MR=T.createContext(null),L2=["as","active","eventKey"];function U2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}function NR({key:t,onClick:e,active:n,id:o,role:r,disabled:a}){const u=T.useContext(Jr),c=T.useContext(nh),h=T.useContext(MR);let d=n;const m={role:r};if(c){!r&&c.role==="tablist"&&(m.role="tab");const y=c.getControllerId(t??null),S=c.getControlledId(t??null);m[Aa("event-key")]=t,m.id=y||o,d=n==null&&t!=null?c.activeKey===t:n,(d||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(m["aria-controls"]=S)}return m.role==="tab"&&(m["aria-selected"]=d,d||(m.tabIndex=-1),a&&(m.tabIndex=-1,m["aria-disabled"]=!0)),m.onClick=Lt(y=>{a||(e?.(y),t!=null&&u&&!y.isPropagationStopped()&&u(t,y))}),[m,{isActive:d}]}const IR=T.forwardRef((t,e)=>{let{as:n=vy,active:o,eventKey:r}=t,a=U2(t,L2);const[u,c]=NR(Object.assign({key:uu(r,a.href),active:o},a));return u[Aa("active")]=c.isActive,w.jsx(n,Object.assign({},a,u,{ref:e}))});IR.displayName="NavItem";const B2=["as","onSelect","activeKey","role","onKeyDown"];function F2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}const Dw=()=>{},Ow=Aa("event-key"),DR=T.forwardRef((t,e)=>{let{as:n="div",onSelect:o,activeKey:r,role:a,onKeyDown:u}=t,c=F2(t,B2);const h=Zx(),d=T.useRef(!1),m=T.useContext(Jr),y=T.useContext(MR);let S,E;y&&(a=a||"tablist",r=y.activeKey,S=y.getControlledId,E=y.getControllerId);const C=T.useRef(null),A=N=>{const D=C.current;if(!D)return null;const L=ni(D,`[${Ow}]:not([aria-disabled=true])`),U=D.querySelector("[aria-selected=true]");if(!U||U!==document.activeElement)return null;const O=L.indexOf(U);if(O===-1)return null;let q=O+N;return q>=L.length&&(q=0),q<0&&(q=L.length-1),L[q]},x=(N,D)=>{N!=null&&(o?.(N,D),m?.(N,D))},M=N=>{if(u?.(N),!y)return;let D;switch(N.key){case"ArrowLeft":case"ArrowUp":D=A(-1);break;case"ArrowRight":case"ArrowDown":D=A(1);break;default:return}D&&(N.preventDefault(),x(D.dataset[N2("EventKey")]||null,N),d.current=!0,h())};T.useEffect(()=>{if(C.current&&d.current){const N=C.current.querySelector(`[${Ow}][aria-selected=true]`);N?.focus()}d.current=!1});const I=ih(e,C);return w.jsx(Jr.Provider,{value:x,children:w.jsx(nh.Provider,{value:{role:a,activeKey:uu(r),getControlledId:S||Dw,getControllerId:E||Dw},children:w.jsx(n,Object.assign({},c,{onKeyDown:M,ref:I,role:a}))})})});DR.displayName="Nav";const H2=Object.assign(DR,{Item:IR});function hg(t){t===void 0&&(t=Wd());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function $2(t){const e=T.useRef(t);return e.current=t,e}function G2(t){const e=$2(t);T.useEffect(()=>()=>e.current(),[])}function V2(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Pw=Aa("modal-open");class Iy{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return V2(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[o]:r.style[o]},e.scrollBarWidth&&(n[o]=`${parseInt(li(r,o)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Pw,""),li(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(Pw),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const pg=(t,e)=>Qd?t==null?(e||Wd()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function z2(t,e){const n=oh(),[o,r]=T.useState(()=>pg(t,n?.document));if(!o){const a=pg(t);a&&r(a)}return T.useEffect(()=>{},[e,o]),T.useEffect(()=>{const a=pg(t);a!==o&&r(a)},[t,o]),o}function q2({children:t,in:e,onExited:n,mountOnEnter:o,unmountOnExit:r}){const a=T.useRef(null),u=T.useRef(e),c=Lt(n);T.useEffect(()=>{e?u.current=!0:c(a.current)},[e,c]);const h=ih(a,Ca(t)),d=T.cloneElement(t,{ref:h});return e?d:r||!u.current&&o?null:d}const J2=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function K2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}function Y2(t){let{onEnter:e,onEntering:n,onEntered:o,onExit:r,onExiting:a,onExited:u,addEndListener:c,children:h}=t,d=K2(t,J2);const m=T.useRef(null),y=ih(m,Ca(h)),S=D=>L=>{D&&m.current&&D(m.current,L)},E=T.useCallback(S(e),[e]),C=T.useCallback(S(n),[n]),A=T.useCallback(S(o),[o]),x=T.useCallback(S(r),[r]),M=T.useCallback(S(a),[a]),I=T.useCallback(S(u),[u]),N=T.useCallback(S(c),[c]);return Object.assign({},d,{nodeRef:m},e&&{onEnter:E},n&&{onEntering:C},o&&{onEntered:A},r&&{onExit:x},a&&{onExiting:M},u&&{onExited:I},c&&{addEndListener:N},{children:typeof h=="function"?(D,L)=>h(D,Object.assign({},L,{ref:y})):T.cloneElement(h,{ref:y})})}const j2=["component"];function X2(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}const W2=T.forwardRef((t,e)=>{let{component:n}=t,o=X2(t,j2);const r=Y2(o);return w.jsx(n,Object.assign({ref:e},r))});function Q2({in:t,onTransition:e}){const n=T.useRef(null),o=T.useRef(!0),r=Lt(e);return pw(()=>{if(!n.current)return;let a=!1;return r({in:t,element:n.current,initial:o.current,isStale:()=>a}),()=>{a=!0}},[t,r]),pw(()=>(o.current=!1,()=>{o.current=!0}),[]),n}function Z2({children:t,in:e,onExited:n,onEntered:o,transition:r}){const[a,u]=T.useState(!e);e&&a&&u(!1);const c=Q2({in:!!e,onTransition:d=>{const m=()=>{d.isStale()||(d.in?o?.(d.element,d.initial):(u(!0),n?.(d.element)))};Promise.resolve(r(d)).then(m,y=>{throw d.in||u(!0),y})}}),h=ih(c,Ca(t));return a&&!e?null:T.cloneElement(t,{ref:h})}function kw(t,e,n){return t?w.jsx(W2,Object.assign({},n,{component:t})):e?w.jsx(Z2,Object.assign({},n,{transition:e})):w.jsx(q2,Object.assign({},n))}const eF=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function tF(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}let mg;function nF(t){return mg||(mg=new Iy({ownerDocument:t?.document})),mg}function oF(t){const e=oh(),n=t||nF(e),o=T.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:T.useCallback(r=>{o.current.dialog=r},[]),setBackdropRef:T.useCallback(r=>{o.current.backdrop=r},[])})}const OR=T.forwardRef((t,e)=>{let{show:n=!1,role:o="dialog",className:r,style:a,children:u,backdrop:c=!0,keyboard:h=!0,onBackdropClick:d,onEscapeKeyDown:m,transition:y,runTransition:S,backdropTransition:E,runBackdropTransition:C,autoFocus:A=!0,enforceFocus:x=!0,restoreFocus:M=!0,restoreFocusOptions:I,renderDialog:N,renderBackdrop:D=Qe=>w.jsx("div",Object.assign({},Qe)),manager:L,container:U,onShow:O,onHide:q=()=>{},onExit:J,onExited:j,onExiting:W,onEnter:re,onEntering:oe,onEntered:ae}=t,de=tF(t,eF);const F=oh(),Q=z2(U),ee=oF(L),ne=Bx(),ce=Fx(n),[k,Y]=T.useState(!n),se=T.useRef(null);T.useImperativeHandle(e,()=>ee,[ee]),Qd&&!ce&&n&&(se.current=hg(F?.document)),n&&k&&Y(!1);const le=Lt(()=>{if(ee.add(),on.current=Wi(document,"keydown",ze),qe.current=Wi(document,"focus",()=>setTimeout(Ee),!0),O&&O(),A){var Qe,ko;const _i=hg((Qe=(ko=ee.dialog)==null?void 0:ko.ownerDocument)!=null?Qe:F?.document);ee.dialog&&_i&&!_d(ee.dialog,_i)&&(se.current=_i,ee.dialog.focus())}}),me=Lt(()=>{if(ee.remove(),on.current==null||on.current(),qe.current==null||qe.current(),M){var Qe;(Qe=se.current)==null||Qe.focus==null||Qe.focus(I),se.current=null}});T.useEffect(()=>{!n||!Q||le()},[n,Q,le]),T.useEffect(()=>{k&&me()},[k,me]),G2(()=>{me()});const Ee=Lt(()=>{if(!x||!ne()||!ee.isTopModal())return;const Qe=hg(F?.document);ee.dialog&&Qe&&!_d(ee.dialog,Qe)&&ee.dialog.focus()}),ve=Lt(Qe=>{Qe.target===Qe.currentTarget&&(d?.(Qe),c===!0&&q())}),ze=Lt(Qe=>{h&&EU(Qe)&&ee.isTopModal()&&(m?.(Qe),Qe.defaultPrevented||q())}),qe=T.useRef(),on=T.useRef(),wn=(...Qe)=>{Y(!0),j?.(...Qe)};if(!Q)return null;const ho=Object.assign({role:o,ref:ee.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},de,{style:a,className:r,tabIndex:-1});let zt=N?N(ho):w.jsx("div",Object.assign({},ho,{children:T.cloneElement(u,{role:"document"})}));zt=kw(y,S,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:J,onExiting:W,onExited:wn,onEnter:re,onEntering:oe,onEntered:ae,children:zt});let qt=null;return c&&(qt=D({ref:ee.setBackdropRef,onClick:ve}),qt=kw(E,C,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:qt})),w.jsx(w.Fragment,{children:Pr.createPortal(w.jsxs(w.Fragment,{children:[qt,zt]}),Q)})});OR.displayName="Modal";const iF=Object.assign(OR,{Manager:Iy});function rF(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function sF(t,e){t.classList?t.classList.add(e):rF(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Lw(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function aF(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Lw(t.className,e):t.setAttribute("class",Lw(t.className&&t.className.baseVal||"",e))}const zs={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class PR extends Iy{adjustAndStore(e,n,o){const r=n.style[e];n.dataset[e]=r,li(n,{[e]:`${parseFloat(li(n,e))+o}px`})}restore(e,n){const o=n.dataset[e];o!==void 0&&(delete n.dataset[e],li(n,{[e]:o}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(sF(n,"modal-open"),!e.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ni(n,zs.FIXED_CONTENT).forEach(a=>this.adjustAndStore(o,a,e.scrollBarWidth)),ni(n,zs.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-e.scrollBarWidth)),ni(n,zs.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();aF(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ni(n,zs.FIXED_CONTENT).forEach(a=>this.restore(o,a)),ni(n,zs.STICKY_CONTENT).forEach(a=>this.restore(r,a)),ni(n,zs.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let gg;function lF(t){return gg||(gg=new PR(t)),gg}const kR=T.createContext({onHide(){}}),LR=T.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:o,children:r,...a},u)=>{const c=T.useContext(kR),h=Iu(()=>{c?.onHide(),o?.()});return w.jsxs("div",{ref:u,...a,children:[r,n&&w.jsx(_y,{"aria-label":t,variant:e,onClick:h})]})});LR.displayName="AbstractModalHeader";const UR=T.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=Ue(e,"nav-item"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));UR.displayName="NavItem";const BR=T.forwardRef(({bsPrefix:t,className:e,as:n=yy,active:o,eventKey:r,disabled:a=!1,...u},c)=>{t=Ue(t,"nav-link");const[h,d]=NR({key:uu(r,u.href),active:o,disabled:a,...u});return w.jsx(n,{...u,...h,ref:c,disabled:a,className:Ne(e,t,a&&"disabled",d.isActive&&"active")})});BR.displayName="NavLink";const FR=T.forwardRef((t,e)=>{const{as:n="div",bsPrefix:o,variant:r,fill:a=!1,justify:u=!1,navbar:c,navbarScroll:h,className:d,activeKey:m,...y}=dy(t,{activeKey:"onSelect"}),S=Ue(o,"nav");let E,C,A=!1;const x=T.useContext(ts),M=T.useContext(Ey);return x?(E=x.bsPrefix,A=c??!0):M&&({cardHeaderBsPrefix:C}=M),w.jsx(H2,{as:n,ref:e,activeKey:m,className:Ne(d,{[S]:!A,[`${E}-nav`]:A,[`${E}-nav-scroll`]:A&&h,[`${C}-${r}`]:!!C,[`${S}-${r}`]:!!r,[`${S}-fill`]:a,[`${S}-justified`]:u}),...y})});FR.displayName="Nav";const uF=Object.assign(FR,{Item:UR,Link:BR}),HR=T.forwardRef(({bsPrefix:t,className:e,as:n,...o},r)=>{t=Ue(t,"navbar-brand");const a=n||(o.href?"a":"span");return w.jsx(a,{...o,ref:r,className:Ne(e,t)})});HR.displayName="NavbarBrand";const $R=T.forwardRef(({children:t,bsPrefix:e,...n},o)=>{e=Ue(e,"navbar-collapse");const r=T.useContext(ts);return w.jsx(Ux,{in:!!(r&&r.expanded),...n,children:w.jsx("div",{ref:o,className:e,children:t})})});$R.displayName="NavbarCollapse";const GR=T.forwardRef(({bsPrefix:t,className:e,children:n,label:o="Toggle navigation",as:r="button",onClick:a,...u},c)=>{t=Ue(t,"navbar-toggler");const{onToggle:h,expanded:d}=T.useContext(ts)||{},m=Iu(y=>{a&&a(y),h&&h()});return r==="button"&&(u.type="button"),w.jsx(r,{...u,ref:c,onClick:m,"aria-label":o,className:Ne(e,t,!d&&"collapsed"),children:n||w.jsx("span",{className:`${t}-icon`})})});GR.displayName="NavbarToggle";const fv=new WeakMap,Uw=(t,e)=>{if(!t||!e)return;const n=fv.get(e)||new Map;fv.set(e,n);let o=n.get(t);return o||(o=e.matchMedia(t),o.refCount=0,n.set(o.media,o)),o};function cF(t,e=typeof window>"u"?void 0:window){const n=Uw(t,e),[o,r]=T.useState(()=>n?n.matches:!1);return wR(()=>{let a=Uw(t,e);if(!a)return r(!1);let u=fv.get(e);const c=()=>{r(a.matches)};return a.refCount++,a.addListener(c),c(),()=>{a.removeListener(c),a.refCount--,a.refCount<=0&&u?.delete(a.media),a=void 0}},[t]),o}function fF(t){const e=Object.keys(t);function n(c,h){return c===h?h:c?`${c} and ${h}`:h}function o(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function r(c){const h=o(c);let d=t[h];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function a(c){let h=t[c];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function u(c,h,d){let m;typeof c=="object"?(m=c,d=h,h=!0):(h=h||!0,m={[c]:h});let y=T.useMemo(()=>Object.entries(m).reduce((S,[E,C])=>((C==="up"||C===!0)&&(S=n(S,a(E))),(C==="down"||C===!0)&&(S=n(S,r(E))),S),""),[JSON.stringify(m)]);return cF(y,d)}return u}const dF=fF({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),VR=T.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=Ue(e,"offcanvas-body"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));VR.displayName="OffcanvasBody";const hF={[Qn]:"show",[ri]:"show"},zR=T.forwardRef(({bsPrefix:t,className:e,children:n,in:o=!1,mountOnEnter:r=!1,unmountOnExit:a=!1,appear:u=!1,...c},h)=>(t=Ue(t,"offcanvas"),w.jsx(Zd,{ref:h,addEndListener:hy,in:o,mountOnEnter:r,unmountOnExit:a,appear:u,...c,childRef:Ca(n),children:(d,m)=>T.cloneElement(n,{...m,className:Ne(e,n.props.className,(d===Qn||d===su)&&`${t}-toggling`,hF[d])})})));zR.displayName="OffcanvasToggling";const qR=T.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:o=!1,...r},a)=>(t=Ue(t,"offcanvas-header"),w.jsx(LR,{ref:a,...r,className:Ne(e,t),closeLabel:n,closeButton:o})));qR.displayName="OffcanvasHeader";const pF=my("h5"),JR=T.forwardRef(({className:t,bsPrefix:e,as:n=pF,...o},r)=>(e=Ue(e,"offcanvas-title"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));JR.displayName="OffcanvasTitle";function mF(t){return w.jsx(zR,{...t})}function gF(t){return w.jsx(Hx,{...t})}const KR=T.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":o,placement:r="start",responsive:a,show:u=!1,backdrop:c=!0,keyboard:h=!0,scroll:d=!1,onEscapeKeyDown:m,onShow:y,onHide:S,container:E,autoFocus:C=!0,enforceFocus:A=!0,restoreFocus:x=!0,restoreFocusOptions:M,onEntered:I,onExit:N,onExiting:D,onEnter:L,onEntering:U,onExited:O,backdropClassName:q,manager:J,renderStaticNode:j=!1,...W},re)=>{const oe=T.useRef();t=Ue(t,"offcanvas");const[ae,de]=T.useState(!1),F=Iu(S),Q=dF(a||"xs","up");T.useEffect(()=>{de(a?u&&!Q:u)},[u,a,Q]);const ee=T.useMemo(()=>({onHide:F}),[F]);function ne(){return J||(d?(oe.current||(oe.current=new PR({handleContainerOverflow:!1})),oe.current):lF())}const ce=(le,...me)=>{le&&(le.style.visibility="visible"),L?.(le,...me)},k=(le,...me)=>{le&&(le.style.visibility=""),O?.(...me)},Y=T.useCallback(le=>w.jsx("div",{...le,className:Ne(`${t}-backdrop`,q)}),[q,t]),se=le=>w.jsx("div",{...le,...W,className:Ne(e,a?`${t}-${a}`:t,`${t}-${r}`),"aria-labelledby":o,children:n});return w.jsxs(w.Fragment,{children:[!ae&&(a||j)&&se({}),w.jsx(kR.Provider,{value:ee,children:w.jsx(iF,{show:ae,ref:re,backdrop:c,container:E,keyboard:h,autoFocus:C,enforceFocus:A&&!d,restoreFocus:x,restoreFocusOptions:M,onEscapeKeyDown:m,onShow:y,onHide:F,onEnter:ce,onEntering:U,onEntered:I,onExit:N,onExiting:D,onExited:k,manager:ne(),transition:mF,backdropTransition:gF,renderBackdrop:Y,renderDialog:se})})]})});KR.displayName="Offcanvas";const vF=Object.assign(KR,{Body:VR,Header:qR,Title:JR}),YR=T.forwardRef(({onHide:t,...e},n)=>{const o=T.useContext(ts),r=Iu(()=>{o==null||o.onToggle==null||o.onToggle(),t?.()});return w.jsx(vF,{ref:n,show:!!(o!=null&&o.expanded),...e,renderStaticNode:!0,onHide:r})});YR.displayName="NavbarOffcanvas";const jR=T.forwardRef(({className:t,bsPrefix:e,as:n="span",...o},r)=>(e=Ue(e,"navbar-text"),w.jsx(n,{ref:r,className:Ne(t,e),...o})));jR.displayName="NavbarText";const XR=T.forwardRef((t,e)=>{const{bsPrefix:n,expand:o=!0,variant:r="light",bg:a,fixed:u,sticky:c,className:h,as:d="nav",expanded:m,onToggle:y,onSelect:S,collapseOnSelect:E=!1,...C}=dy(t,{expanded:"onToggle"}),A=Ue(n,"navbar"),x=T.useCallback((...N)=>{S?.(...N),E&&m&&y?.(!1)},[S,E,m,y]);C.role===void 0&&d!=="nav"&&(C.role="navigation");let M=`${A}-expand`;typeof o=="string"&&(M=`${M}-${o}`);const I=T.useMemo(()=>({onToggle:()=>y?.(!m),bsPrefix:A,expanded:!!m,expand:o}),[A,m,o,y]);return w.jsx(ts.Provider,{value:I,children:w.jsx(Jr.Provider,{value:x,children:w.jsx(d,{ref:e,...C,className:Ne(h,A,o&&M,r&&`${A}-${r}`,a&&`bg-${a}`,c&&`sticky-${c}`,u&&`fixed-${u}`)})})})});XR.displayName="Navbar";const Bw=Object.assign(XR,{Brand:HR,Collapse:$R,Offcanvas:YR,Text:jR,Toggle:GR}),WR=T.forwardRef(({bsPrefix:t,className:e,as:n="div",...o},r)=>{const a=Ue(t,"row"),u=Dx(),c=Ox(),h=`${a}-cols`,d=[];return u.forEach(m=>{const y=o[m];delete o[m];let S;y!=null&&typeof y=="object"?{cols:S}=y:S=y;const E=m!==c?`-${m}`:"";S!=null&&d.push(`${h}${E}-${S}`)}),w.jsx(n,{ref:r,...o,className:Ne(e,a,...d)})});WR.displayName="Row";const QR=T.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:o,as:r="div",className:a,...u},c)=>{t=Ue(t,"spinner");const h=`${t}-${n}`;return w.jsx(r,{ref:c,...u,className:Ne(a,h,o&&`${h}-${o}`,e&&`text-${e}`)})});QR.displayName="Spinner";const ZR=({name:t,onClick:e,subItems:n})=>{const[o,r]=T.useState(!1);return w.jsxs("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[w.jsxs("div",{className:"dropdown-item d-flex justify-content-between",style:{cursor:"pointer"},onClick:e,children:[t," ",n?w.jsx("span",{children:""}):null]}),n&&o&&w.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:0,left:"100%",minWidth:"180px",zIndex:1e3},children:n.map((a,u)=>w.jsx(ZR,{name:a.name,onClick:a.onClick,subItems:a.subItems},u))})]})},qs=({title:t,items:e,onClick:n})=>{const[o,r]=T.useState(!1),a=e&&e.length>0;return w.jsxs("div",{className:"nav-item dropdown",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{position:"relative"},children:[w.jsx("span",{className:"nav-link dropdown-toggle",style:{cursor:a||n?"pointer":"default"},onClick:()=>{n&&n()},children:t}),o&&a&&w.jsx("div",{className:"dropdown-menu show",style:{minWidth:"180px"},children:e.map((u,c)=>w.jsx(ZR,{...u},c))})]})};class Kr{fileHandle;data;constructor(e,n){this.fileHandle=e,this.data=wt(n),mi(this)}static async create(e,n,o={}){try{const r=await e.getFileHandle(n,{create:!0}),u=await(await r.getFile()).text(),c=u.trim()===""?{...o}:{...o,...JSON.parse(u)};return new Kr(r,c)}catch(r){console.error("Error loading JSON:",r);const a=await e.getFileHandle(n,{create:!0});return new Kr(a,{...o})}}async save(){try{let e=await this.fileHandle.queryPermission({mode:"readwrite"});if(e!=="granted"&&(e=await this.fileHandle.requestPermission({mode:"readwrite"})),e!=="granted")throw new Error("No permission to write file");const n=await this.fileHandle.createWritable();await n.write(JSON.stringify(this.data,null,2)),await n.close()}catch(e){console.error("Error saving JSON:",e)}}async updateField(e,n,o=!0){Re(()=>{const r=e.split("/").filter(Boolean);let a=this.data;for(let u=0;u<r.length;u++){const c=r[u];u===r.length-1?a[c]=n:((a[c]===void 0||a[c]===null||typeof a[c]!="object")&&(a[c]={}),a=a[c])}}),o&&await this.save()}getField(e){const n=e.split("/").filter(Boolean);let o=this.data;for(const r of n){if(o==null||typeof o!="object")return;o=o[r]}return o}}class Yr{handle;parent;urlObject=null;base64Data=null;constructor(e,n){this.handle=e,this.parent=n}async getUrlObject(){if(!this.urlObject)try{const e=await this.handle.getFile();this.urlObject=URL.createObjectURL(e)}catch(e){console.error("Failed to create object URL for file:",e),this.urlObject=""}return this.urlObject}revokeUrl(){this.urlObject&&(URL.revokeObjectURL(this.urlObject),this.urlObject=null)}static async fromUrl(e,n){try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch image: ${o.statusText}`);const r=await o.blob(),a=e.split("/");let u=a[a.length-1];const c=await n.getFileHandle(u,{create:!0}),h=await c.createWritable();return await h.write(r),await h.close(),new Yr(c,n)}catch(o){throw console.error("Failed to create LocalImage from URL:",o),o}}async delete(e){try{this.revokeUrl(),await e.removeEntry(this.handle.name)}catch(n){throw console.error("Failed to delete image file:",n),n}}async getBase64(){if(this.base64Data)return this.base64Data;try{const e=await this.handle.getFile(),n=await e.arrayBuffer(),o=e.type||"image/png",r=yF(n);return this.base64Data={rawBase64:r,mime:o},this.base64Data}catch(e){return console.error("Failed to create Base64 from file:",e),{rawBase64:"",mime:"image/png"}}}static async fromBase64(e,n,o){try{let r=e.rawBase64;const a=`data:${e.mime};base64,`;r.startsWith(a)&&(r=r.slice(a.length));const u=atob(r),c=u.length,h=new Uint8Array(c);for(let S=0;S<c;S++)h[S]=u.charCodeAt(S);const d=await n.getFileHandle(o,{create:!0}),m=await d.createWritable();await m.write(h),await m.close();const y=new Yr(d,n);return y.base64Data=e,y}catch(r){throw console.error("Failed to create LocalImage from Base64:",r),r}}}function yF(t){let e="";const n=new Uint8Array(t),o=n.byteLength;for(let r=0;r<o;r++)e+=String.fromCharCode(n[r]);return btoa(e)}var _F={};let SF,EF;function bF(){return{geminiUrl:SF,vertexUrl:EF}}function wF(t,e,n,o){var r,a;if(!t?.baseUrl){const u=bF();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(a=u.geminiUrl)!==null&&a!==void 0?a:o}return t.baseUrl}class vi{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const c=u.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(n))for(let d=0;d<h.length;d++){const m=h[d];g(m,e.slice(a+1),n[d])}else for(const d of h)g(d,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const c=u.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];g(h[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(c=>p(c,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function TF(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),a=o.split("."),u=new Set;let c=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const d=a[h];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&u.add(d)}dv(t,r,a,0,u)}}function dv(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const a=e[o];if(a.endsWith("[]")){const u=a.slice(0,-2),c=t;if(u in c&&Array.isArray(c[u]))for(const h of c[u])dv(h,e,n,o+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,c=Object.keys(u).filter(d=>!d.startsWith("_")&&!r.has(d)),h={};for(const d of c)h[d]=u[d];for(const[d,m]of Object.entries(h)){const y=[];for(const S of n.slice(o))S==="*"?y.push(d):y.push(S);g(u,y,m)}for(const d of c)delete u[d]}}else{const u=t;a in u&&dv(u[a],e,n,o+1,r)}}function Dy(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function CF(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const o=p(t,["resourceName"]);return o!=null&&g(e,["_url","resourceName"],o),e}function AF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],RF(u)),e}function xF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],MF(u)),e}function RF(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>NF(u))),g(e,["generatedVideos"],a)}const o=p(t,["raiMediaFilteredCount"]);o!=null&&g(e,["raiMediaFilteredCount"],o);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function MF(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>IF(u))),g(e,["generatedVideos"],a)}const o=p(t,["raiMediaFilteredCount"]);o!=null&&g(e,["raiMediaFilteredCount"],o);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function NF(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],UF(n)),e}function IF(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],BF(n)),e}function DF(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function OF(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function PF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],kF(u)),e}function kF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["parent"]);o!=null&&g(e,["parent"],o);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function eM(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],LF(u)),e}function LF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["parent"]);o!=null&&g(e,["parent"],o);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function UF(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const o=p(t,["encodedVideo"]);o!=null&&g(e,["videoBytes"],Dy(o));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function BF(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const o=p(t,["bytesBase64Encoded"]);o!=null&&g(e,["videoBytes"],Dy(o));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}var Fw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fw||(Fw={}));var Hw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Hw||(Hw={}));var $w;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($w||($w={}));var Qi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Qi||(Qi={}));var Gw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gw||(Gw={}));var Vw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Vw||(Vw={}));var zw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(zw||(zw={}));var qw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(qw||(qw={}));var Jw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jw||(Jw={}));var Kw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Kw||(Kw={}));var Yw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yw||(Yw={}));var jw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(jw||(jw={}));var Xw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xw||(Xw={}));var Ww;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ww||(Ww={}));var Qw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Qw||(Qw={}));var Zw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zw||(Zw={}));var eT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eT||(eT={}));var tT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(tT||(tT={}));var nT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nT||(nT={}));var Sd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Sd||(Sd={}));var oT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(oT||(oT={}));var iT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(iT||(iT={}));var rT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rT||(rT={}));var hv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hv||(hv={}));var sT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(sT||(sT={}));var aT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aT||(aT={}));var lT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(lT||(lT={}));var uT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(uT||(uT={}));var cT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cT||(cT={}));var fT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fT||(fT={}));var dT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(dT||(dT={}));var hT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var pT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pT||(pT={}));var mT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(mT||(mT={}));var gT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gT||(gT={}));var vT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vT||(vT={}));var yT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(yT||(yT={}));var _T;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_T||(_T={}));var ST;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ST||(ST={}));var ET;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ET||(ET={}));var bT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(bT||(bT={}));var wT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(wT||(wT={}));var TT;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TT||(TT={}));var CT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(CT||(CT={}));var AT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(AT||(AT={}));var xT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(xT||(xT={}));var RT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(RT||(RT={}));var MT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MT||(MT={}));var NT;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(NT||(NT={}));var IT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(IT||(IT={}));var DT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(DT||(DT={}));var OT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(OT||(OT={}));var PT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(PT||(PT={}));var kT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kT||(kT={}));var LT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(LT||(LT={}));var aa;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(aa||(aa={}));class pv{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pl{get text(){var e,n,o,r,a,u,c,h;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const y=[];for(const S of(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[E,C]of Object.entries(S))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(C!==null||C!==void 0)&&y.push(E);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;m=!0,d+=S.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,o,r,a,u,c,h;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const y of(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[S,E]of Object.entries(y))S!=="inlineData"&&(E!==null||E!==void 0)&&m.push(S);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,a,u,c,h;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,o,r,a,u,c,h,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,a,u,c,h,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(m?.length!==0)return(d=m?.[0])===null||d===void 0?void 0:d.output}}class UT{}class BT{}class FF{}class HF{}class $F{}class GF{}class FT{}class HT{}class $T{}class VF{}class Ed{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ed;let r;const a=e;return n?r=xF(a):r=AF(a),Object.assign(o,r),o}}class GT{}class VT{}class zT{}class qT{}class zF{}class qF{}class JF{}class Oy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Oy,a=PF(e);return Object.assign(o,a),o}}class KF{}class YF{}class jF{}class JT{}class XF{get text(){var e,n,o;let r="",a=!1;const u=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[h,d]of Object.entries(c))h!=="text"&&h!=="thought"&&d!==null&&u.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,r+=c.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,o;let r="";const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,h]of Object.entries(u))c!=="inlineData"&&h!==null&&a.push(c);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class WF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Py{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Py,a=eM(e);return Object.assign(o,a),o}}function Ve(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tM(t,e){const n=Ve(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function nM(t){return Array.isArray(t)?t.map(e=>bd(e)):[bd(t)]}function bd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function oM(t){const e=bd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iM(t){const e=bd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function rM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>KT(e)):[KT(t)]}function mv(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function YT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function jT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ut(t){if(t==null)throw new Error("ContentUnion is required");return mv(t)?t:{role:"user",parts:rM(t)}}function ky(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Ut(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Ut(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ut(n)):[Ut(e)]}function Hn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(YT(t)||jT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ut(t)]}const e=[],n=[],o=mv(t[0]);for(const r of t){const a=mv(r);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(YT(r)||jT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:rM(n)}),e}function QF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Qi).includes(n[0].toUpperCase())?n[0].toUpperCase():Qi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Qi).includes(o.toUpperCase())?o.toUpperCase():Qi.TYPE_UNSPECIFIED})}}function ca(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&QF(t.type,e);for(const[u,c]of Object.entries(t))if(c!=null)if(u=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Qi).includes(c.toUpperCase())?c.toUpperCase():Qi.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=ca(c);else if(o.includes(u)){const h=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}h.push(ca(d))}e[u]=h}else if(r.includes(u)){const h={};for(const[d,m]of Object.entries(c))h[d]=ca(m);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=c}return e}function Ly(t){return ca(t)}function Uy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function By(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function xa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ca(e.response));return t}function Ra(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ZF(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function yi(t,e){if(typeof e!="string")throw new Error("name must be a string");return ZF(t,e,"cachedContents")}function sM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ur(t){return Dy(t)}function eH(t){return t!=null&&typeof t=="object"&&"name"in t}function tH(t){return t!=null&&typeof t=="object"&&"video"in t}function nH(t){return t!=null&&typeof t=="object"&&"uri"in t}function aM(t){var e;let n;if(eH(t)&&(n=t.name),!(nH(t)&&(n=t.uri,n===void 0))&&!(tH(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function uM(t){for(const e of["models","tunedModels","publisherModels"])if(oH(t,e))return t[e];return[]}function oH(t,e){return t!==null&&typeof t=="object"&&e in t}function iH(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function rH(t,e={}){const n=[],o=new Set;for(const r of t){const a=r.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const u=iH(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function cM(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function sH(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fM(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ma(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function dM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function aH(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const o=p(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>$H(u))),g(e,["inlinedResponses"],a)}const r=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function lH(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const o=p(t,["gcsDestination","outputUriPrefix"]);o!=null&&g(e,["gcsUri"],o);const r=p(t,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function uH(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const o=p(t,["gcsUri"]);o!=null&&g(e,["gcsDestination","outputUriPrefix"],o);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Yf(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata","displayName"]);o!=null&&g(e,["displayName"],o);const r=p(t,["metadata","state"]);r!=null&&g(e,["state"],dM(r));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=p(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const h=p(t,["metadata","model"]);h!=null&&g(e,["model"],h);const d=p(t,["metadata","output"]);return d!=null&&g(e,["dest"],aH(fM(d))),e}function gv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["displayName"]);o!=null&&g(e,["displayName"],o);const r=p(t,["state"]);r!=null&&g(e,["state"],dM(r));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["createTime"]);u!=null&&g(e,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(e,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(e,["updateTime"],d);const m=p(t,["model"]);m!=null&&g(e,["model"],m);const y=p(t,["inputConfig"]);y!=null&&g(e,["src"],cH(y));const S=p(t,["outputConfig"]);S!=null&&g(e,["dest"],lH(fM(S)));const E=p(t,["completionStats"]);return E!=null&&g(e,["completionStats"],E),e}function cH(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const o=p(t,["gcsSource","uris"]);o!=null&&g(e,["gcsUri"],o);const r=p(t,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function fH(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=p(e,["fileName"]);o!=null&&g(n,["fileName"],o);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>HH(t,u))),g(n,["requests","requests"],a)}return n}function dH(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const o=p(t,["gcsUri"]);o!=null&&g(e,["gcsSource","uris"],o);const r=p(t,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function hH(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function pH(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],Ma(t,o)),n}function mH(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],Ma(t,o)),n}function gH(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const o=p(t,["citationMetadata"]);o!=null&&g(e,["citationMetadata"],vH(o));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(E=>E)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function vH(t){const e={},n=p(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),g(e,["citations"],o)}return e}function hM(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>YH(a))),g(e,["parts"],r)}const o=p(t,["role"]);return o!=null&&g(e,["role"],o),e}function yH(t,e){const n={},o=p(t,["displayName"]);if(e!==void 0&&o!=null&&g(e,["batch","displayName"],o),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function _H(t,e){const n={},o=p(t,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const r=p(t,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],uH(sH(r))),n}function XT(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],fH(t,cM(t,r)));const a=p(e,["config"]);return a!=null&&yH(a,n),n}function SH(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["model"],Ve(t,o));const r=p(e,["src"]);r!=null&&g(n,["inputConfig"],dH(cM(t,r)));const a=p(e,["config"]);return a!=null&&_H(a,n),n}function EH(t,e){const n={},o=p(t,["displayName"]);return e!==void 0&&o!=null&&g(e,["batch","displayName"],o),n}function bH(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["src"]);r!=null&&g(n,["batch","inputConfig"],MH(t,r));const a=p(e,["config"]);return a!=null&&EH(a,n),n}function wH(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],Ma(t,o)),n}function TH(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],Ma(t,o)),n}function CH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["name"]);o!=null&&g(e,["name"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function AH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["name"]);o!=null&&g(e,["name"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function xH(t,e){const n={},o=p(e,["contents"]);if(o!=null){let a=ky(t,o);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(g(n,["_self"],RH(r,n)),TF(n,{"requests[].*":"requests[].request.*"})),n}function RH(t,e){const n={},o=p(t,["taskType"]);e!==void 0&&o!=null&&g(e,["requests[]","taskType"],o);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function MH(t,e){const n={},o=p(e,["fileName"]);o!=null&&g(n,["file_name"],o);const r=p(e,["inlinedRequests"]);return r!=null&&g(n,["requests"],xH(t,r)),n}function NH(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function IH(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const o=p(t,["args"]);o!=null&&g(e,["args"],o);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DH(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const o=p(t,["allowedFunctionNames"]);if(o!=null&&g(e,["allowedFunctionNames"],o),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OH(t,e,n){const o={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],hM(Ut(r)));const a=p(e,["temperature"]);a!=null&&g(o,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(o,["topP"],u);const c=p(e,["topK"]);c!=null&&g(o,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(o,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(o,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(o,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(o,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(o,["logprobs"],S);const E=p(e,["presencePenalty"]);E!=null&&g(o,["presencePenalty"],E);const C=p(e,["frequencyPenalty"]);C!=null&&g(o,["frequencyPenalty"],C);const A=p(e,["seed"]);A!=null&&g(o,["seed"],A);const x=p(e,["responseMimeType"]);x!=null&&g(o,["responseMimeType"],x);const M=p(e,["responseSchema"]);M!=null&&g(o,["responseSchema"],Ly(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(o,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let oe=N;Array.isArray(oe)&&(oe=oe.map(ae=>jH(ae))),g(n,["safetySettings"],oe)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let oe=Ra(D);Array.isArray(oe)&&(oe=oe.map(ae=>WH(xa(ae)))),g(n,["tools"],oe)}const L=p(e,["toolConfig"]);if(n!==void 0&&L!=null&&g(n,["toolConfig"],XH(L)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],yi(t,U));const O=p(e,["responseModalities"]);O!=null&&g(o,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(o,["mediaResolution"],q);const J=p(e,["speechConfig"]);if(J!=null&&g(o,["speechConfig"],Uy(J)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=p(e,["thinkingConfig"]);j!=null&&g(o,["thinkingConfig"],j);const W=p(e,["imageConfig"]);W!=null&&g(o,["imageConfig"],FH(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(o,["enableEnhancedCivicAnswers"],re),o}function PH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(d=>gH(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function kH(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],Ma(t,o)),n}function LH(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],Ma(t,o)),n}function UH(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function BH(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function FH(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const o=p(t,["imageSize"]);if(o!=null&&g(e,["imageSize"],o),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HH(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["request","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(h=>hM(h))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(e,["config"]);return u!=null&&g(n,["request","generationConfig"],OH(t,u,p(n,["request"],{}))),n}function $H(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],PH(n));const o=p(t,["error"]);return o!=null&&g(e,["error"],o),e}function GH(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function VH(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function zH(t){const e={},n=p(t,["config"]);return n!=null&&GH(n,e),e}function qH(t){const e={},n=p(t,["config"]);return n!=null&&VH(n,e),e}function JH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Yf(u))),g(e,["batchJobs"],a)}return e}function KH(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>gv(u))),g(e,["batchJobs"],a)}return e}function YH(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const o=p(t,["codeExecutionResult"]);o!=null&&g(e,["codeExecutionResult"],o);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],NH(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],IH(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],hH(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function jH(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=p(t,["threshold"]);return o!=null&&g(e,["threshold"],o),e}function XH(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],DH(n));const o=p(t,["retrievalConfig"]);return o!=null&&g(e,["retrievalConfig"],o),e}function WH(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],UH(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],BH(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}var di;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(di||(di={}));class ns{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}let QH=class extends vi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ns(di.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=XT(this.apiClient,e),o=n._url,r=fe("{model}:batchGenerateContent",o),c=n.batch.inputConfig.requests,h=c.requests,d=[];for(const m of h){const y=Object.assign({},m);if(y.systemInstruction){const S=y.systemInstruction;delete y.systemInstruction;const E=y.request;E.systemInstruction=S,y.request=E}d.push(y)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=SH(this.apiClient,e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>gv(m))}else{const d=XT(this.apiClient,e);return c=fe("{model}:batchGenerateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>Yf(m))}}async createEmbeddingsInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=bH(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Yf(h))}}async get(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=LH(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>gv(m))}else{const d=kH(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>Yf(m))}}async cancel(e){var n,o,r,a;let u="",c={};if(this.apiClient.isVertexAI()){const h=mH(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const h=pH(this.apiClient,e);u=fe("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=qH(e);return c=fe("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=KH(m),S=new JT;return Object.assign(S,y),S})}else{const d=zH(e);return c=fe("batches",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=JH(m),S=new JT;return Object.assign(S,y),S})}}async delete(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=TH(this.apiClient,e);return c=fe("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>AH(m))}else{const d=wH(this.apiClient,e);return c=fe("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>CH(m))}}};function ZH(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function WT(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>b$(a))),g(e,["parts"],r)}const o=p(t,["role"]);return o!=null&&g(e,["role"],o),e}function e$(t,e){const n={},o=p(t,["ttl"]);e!==void 0&&o!=null&&g(e,["ttl"],o);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let m=Hn(u);Array.isArray(m)&&(m=m.map(y=>WT(y))),g(e,["contents"],m)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],WT(Ut(c)));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>T$(y))),g(e,["tools"],m)}const d=p(t,["toolConfig"]);if(e!==void 0&&d!=null&&g(e,["toolConfig"],w$(d)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function t$(t,e){const n={},o=p(t,["ttl"]);e!==void 0&&o!=null&&g(e,["ttl"],o);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let y=Hn(u);Array.isArray(y)&&(y=y.map(S=>S)),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Ut(c));const h=p(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(S=>C$(S))),g(e,["tools"],y)}const d=p(t,["toolConfig"]);e!==void 0&&d!=null&&g(e,["toolConfig"],d);const m=p(t,["kmsKeyName"]);return e!==void 0&&m!=null&&g(e,["encryption_spec","kmsKeyName"],m),n}function n$(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["model"],tM(t,o));const r=p(e,["config"]);return r!=null&&e$(r,n),n}function o$(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["model"],tM(t,o));const r=p(e,["config"]);return r!=null&&t$(r,n),n}function i$(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],yi(t,o)),n}function r$(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],yi(t,o)),n}function s$(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function a$(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function l$(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function u$(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const o=p(t,["args"]);o!=null&&g(e,["args"],o);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function c$(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const o=p(t,["allowedFunctionNames"]);if(o!=null&&g(e,["allowedFunctionNames"],o),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function f$(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const o=p(t,["name"]);o!=null&&g(e,["name"],o);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function d$(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],yi(t,o)),n}function h$(t,e){const n={},o=p(e,["name"]);return o!=null&&g(n,["_url","name"],yi(t,o)),n}function p$(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function m$(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function g$(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function v$(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function y$(t){const e={},n=p(t,["config"]);return n!=null&&g$(n,e),e}function _$(t){const e={},n=p(t,["config"]);return n!=null&&v$(n,e),e}function S$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function E$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function b$(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const o=p(t,["codeExecutionResult"]);o!=null&&g(e,["codeExecutionResult"],o);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],l$(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],u$(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],ZH(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function w$(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],c$(n));const o=p(t,["retrievalConfig"]);return o!=null&&g(e,["retrievalConfig"],o),e}function T$(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],p$(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],m$(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function C$(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>f$(S))),g(e,["functionDeclarations"],y)}const o=p(t,["retrieval"]);o!=null&&g(e,["retrieval"],o);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function A$(t,e){const n={},o=p(t,["ttl"]);e!==void 0&&o!=null&&g(e,["ttl"],o);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function x$(t,e){const n={},o=p(t,["ttl"]);e!==void 0&&o!=null&&g(e,["ttl"],o);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function R$(t,e){const n={},o=p(e,["name"]);o!=null&&g(n,["_url","name"],yi(t,o));const r=p(e,["config"]);return r!=null&&A$(r,n),n}function M$(t,e){const n={},o=p(e,["name"]);o!=null&&g(n,["_url","name"],yi(t,o));const r=p(e,["config"]);return r!=null&&x$(r,n),n}class N$ extends vi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ns(di.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=o$(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=n$(this.apiClient,e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async get(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=h$(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=d$(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async delete(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=r$(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=a$(m),S=new zT;return Object.assign(S,y),S})}else{const d=i$(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=s$(m),S=new zT;return Object.assign(S,y),S})}}async update(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=M$(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>m)}else{const d=R$(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>m)}}async listInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=_$(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=E$(m),S=new qT;return Object.assign(S,y),S})}else{const d=y$(e);return c=fe("cachedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=S$(m),S=new qT;return Object.assign(S,y),S})}}}function wd(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function QT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t){return this instanceof Ce?(this.v=t,this):new Ce(t)}function io(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(E){return function(C){return Promise.resolve(C).then(E,y)}}function c(E,C){o[E]&&(r[E]=function(A){return new Promise(function(x,M){a.push([E,A,x,M])>1||h(E,A)})},C&&(r[E]=C(r[E])))}function h(E,C){try{d(o[E](C))}catch(A){S(a[0][3],A)}}function d(E){E.value instanceof Ce?Promise.resolve(E.value.v).then(m,y):S(a[0][2],E)}function m(E){h("next",E)}function y(E){h("throw",E)}function S(E,C){E(C),a.shift(),a.length&&h(a[0][0],a[0][1])}}function ro(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof QT=="function"?QT(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(u){return new Promise(function(c,h){u=t[a](u),r(c,h,u.done,u.value)})}}function r(a,u,c,h){Promise.resolve(h).then(function(d){a({value:d,done:c})},u)}}function I$(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:pM(n)}function pM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function D$(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let a=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),a&&!pM(t[o])&&(a=!1),o++;a?e.push(...r):e.pop()}return e}class O${constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new P$(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let P$=class{constructor(e,n,o,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),D$(a)}async sendMessage(e){var n;await this.sendPromise;const o=Ut(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,c;const h=await r,d=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,m=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let S=[];m!=null&&(S=(c=m.slice(y))!==null&&c!==void 0?c:[]);const E=d?[d]:[];this.recordHistory(o,E,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Ut(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,o)}getHistory(e=!1){const n=e?ZT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return io(this,arguments,function*(){var r,a,u,c,h,d;const m=[];try{for(var y=!0,S=ro(e),E;E=yield Ce(S.next()),r=E.done,!r;y=!0){c=E.value,y=!1;const C=c;if(I$(C)){const A=(d=(h=C.candidates)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.content;A!==void 0&&m.push(A)}yield yield Ce(C)}}catch(C){a={error:C}}finally{try{!y&&!r&&(u=S.return)&&(yield Ce(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(n,m)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ZT(o)):this.history.push(e),this.history.push(...r)}};class rh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,rh.prototype)}}function k$(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function L$(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function U$(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],aM(n)),e}function B$(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function F$(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],aM(n)),e}function H$(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function $$(t){const e={},n=p(t,["config"]);return n!=null&&H$(n,e),e}function G$(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}let V$=class extends vi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ns(di.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$$(e);return a=fe("files",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=G$(h),m=new KF;return Object.assign(m,d),m})}}async createInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=k$(e);return a=fe("upload/v1beta/files",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=L$(h),m=new YF;return Object.assign(m,d),m})}}async get(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=F$(e);return a=fe("files/{file}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U$(e);return a=fe("files/{file}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=B$(h),m=new jF;return Object.assign(m,d),m})}}};function jf(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function z$(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>sG(a))),g(e,["parts"],r)}const o=p(t,["role"]);return o!=null&&g(e,["role"],o),e}function q$(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function J$(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const o=p(t,["args"]);o!=null&&g(e,["args"],o);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function K$(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const o=p(t,["name"]);o!=null&&g(e,["name"],o);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function Y$(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const o=p(t,["responseJsonSchema"]);o!=null&&g(e,["responseJsonSchema"],o);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const E=p(t,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const C=p(t,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const A=p(t,["responseSchema"]);A!=null&&g(e,["responseSchema"],A);const x=p(t,["routingConfig"]);x!=null&&g(e,["routingConfig"],x);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],mM(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const L=p(t,["thinkingConfig"]);L!=null&&g(e,["thinkingConfig"],L);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function j$(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function X$(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function W$(t,e){const n={},o=p(t,["generationConfig"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig"],o);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],By(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const E=p(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],z$(Ut(C)));const A=p(t,["tools"]);if(e!==void 0&&A!=null){let U=Ra(A);Array.isArray(U)&&(U=U.map(O=>lG(xa(O)))),g(e,["setup","tools"],U)}const x=p(t,["sessionResumption"]);e!==void 0&&x!=null&&g(e,["setup","sessionResumption"],aG(x));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);if(e!==void 0&&L!=null&&g(e,["setup","proactivity"],L),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Q$(t,e){const n={},o=p(t,["generationConfig"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig"],Y$(o));const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],mM(By(y)));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const E=p(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],Ut(C));const A=p(t,["tools"]);if(e!==void 0&&A!=null){let O=Ra(A);Array.isArray(O)&&(O=O.map(q=>uG(xa(q)))),g(e,["setup","tools"],O)}const x=p(t,["sessionResumption"]);e!==void 0&&x!=null&&g(e,["setup","sessionResumption"],x);const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);e!==void 0&&L!=null&&g(e,["setup","proactivity"],L);const U=p(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&g(e,["setup","explicitVadSignal"],U),n}function Z$(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["setup","model"],Ve(t,o));const r=p(e,["config"]);return r!=null&&g(n,["config"],W$(r,n)),n}function eG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["setup","model"],Ve(t,o));const r=p(e,["config"]);return r!=null&&g(n,["config"],Q$(r,n)),n}function tG(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function nG(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),g(e,["weightedPrompts"],o)}return e}function oG(t){const e={},n=p(t,["media"]);if(n!=null){let d=nM(n);Array.isArray(d)&&(d=d.map(m=>jf(m))),g(e,["mediaChunks"],d)}const o=p(t,["audio"]);o!=null&&g(e,["audio"],jf(iM(o)));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],jf(oM(a)));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function iG(t){const e={},n=p(t,["media"]);if(n!=null){let d=nM(n);Array.isArray(d)&&(d=d.map(m=>m)),g(e,["mediaChunks"],d)}const o=p(t,["audio"]);o!=null&&g(e,["audio"],iM(o));const r=p(t,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(t,["video"]);a!=null&&g(e,["video"],oM(a));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const h=p(t,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function rG(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const o=p(t,["serverContent"]);o!=null&&g(e,["serverContent"],o);const r=p(t,["toolCall"]);r!=null&&g(e,["toolCall"],r);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=p(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],cG(u));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const h=p(t,["sessionResumptionUpdate"]);h!=null&&g(e,["sessionResumptionUpdate"],h);const d=p(t,["voiceActivityDetectionSignal"]);return d!=null&&g(e,["voiceActivityDetectionSignal"],d),e}function sG(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const o=p(t,["codeExecutionResult"]);o!=null&&g(e,["codeExecutionResult"],o);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],q$(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],J$(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],jf(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function aG(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mM(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const o=p(t,["languageCode"]);if(o!=null&&g(e,["languageCode"],o),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function lG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],j$(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],X$(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function uG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>K$(S))),g(e,["functionDeclarations"],y)}const o=p(t,["retrieval"]);o!=null&&g(e,["retrieval"],o);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function cG(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const o=p(t,["cachedContentTokenCount"]);o!=null&&g(e,["cachedContentTokenCount"],o);const r=p(t,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=p(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const h=p(t,["promptTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(C=>C)),g(e,["promptTokensDetails"],E)}const d=p(t,["cacheTokensDetails"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(C=>C)),g(e,["cacheTokensDetails"],E)}const m=p(t,["candidatesTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(C=>C)),g(e,["responseTokensDetails"],E)}const y=p(t,["toolUsePromptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(C=>C)),g(e,["toolUsePromptTokensDetails"],E)}const S=p(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}function fG(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function dG(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const o=p(t,["citationMetadata"]);o!=null&&g(e,["citationMetadata"],hG(o));const r=p(t,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const h=p(t,["index"]);h!=null&&g(e,["index"],h);const d=p(t,["logprobsResult"]);d!=null&&g(e,["logprobsResult"],d);const m=p(t,["safetyRatings"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(E=>E)),g(e,["safetyRatings"],S)}const y=p(t,["urlContextMetadata"]);return y!=null&&g(e,["urlContextMetadata"],y),e}function hG(t){const e={},n=p(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),g(e,["citations"],o)}return e}function pG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let a=Hn(r);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function mG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["tokensInfo"],r)}return e}function gG(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const o=p(t,["statistics"]);return o!=null&&g(e,["statistics"],vG(o)),e}function vG(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const o=p(t,["token_count"]);return o!=null&&g(e,["tokenCount"],o),e}function sh(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>AV(a))),g(e,["parts"],r)}const o=p(t,["role"]);return o!=null&&g(e,["role"],o),e}function yG(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const o=p(t,["enableControlImageComputation"]);return o!=null&&g(e,["computeControl"],o),e}function _G(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function SG(t,e){const n={},o=p(t,["systemInstruction"]);e!==void 0&&o!=null&&g(e,["systemInstruction"],Ut(o));const r=p(t,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>SM(c))),g(e,["tools"],u)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],fV(a)),n}function EG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>sh(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&_G(a),n}function bG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&SG(a,n),n}function wG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["totalTokens"]);o!=null&&g(e,["totalTokens"],o);const r=p(t,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function TG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["totalTokens"]);return o!=null&&g(e,["totalTokens"],o),e}function CG(t,e){const n={},o=p(e,["model"]);return o!=null&&g(n,["_url","name"],Ve(t,o)),n}function AG(t,e){const n={},o=p(e,["model"]);return o!=null&&g(n,["_url","name"],Ve(t,o)),n}function xG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function RG(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function MG(t,e){const n={},o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const E=p(t,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const C=p(t,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const A=p(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A);const x=p(t,["addWatermark"]);e!==void 0&&x!=null&&g(e,["parameters","addWatermark"],x);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["editMode"]);e!==void 0&&I!=null&&g(e,["parameters","editMode"],I);const N=p(t,["baseSteps"]);return e!==void 0&&N!=null&&g(e,["parameters","editConfig","baseSteps"],N),n}function NG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>DV(h))),g(n,["instances[0]","referenceImages"],c)}const u=p(e,["config"]);return u!=null&&MG(u,n),n}function IG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>ah(a))),g(e,["generatedImages"],r)}return e}function DG(t,e){const n={},o=p(t,["taskType"]);e!==void 0&&o!=null&&g(e,["requests[]","taskType"],o);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function OG(t,e){const n={},o=p(t,["taskType"]);e!==void 0&&o!=null&&g(e,["instances[]","task_type"],o);const r=p(t,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=p(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function PG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let c=ky(t,r);Array.isArray(c)&&(c=c.map(h=>h)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&DG(a,n);const u=p(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],Ve(t,u)),n}function kG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let u=ky(t,r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["instances[]","content"],u)}const a=p(e,["config"]);return a!=null&&OG(a,n),n}function LG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function UG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>gG(u))),g(e,["embeddings"],a)}const r=p(t,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function BG(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const o=p(t,["deployedModelId"]);return o!=null&&g(e,["deployedModelId"],o),e}function FG(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function HG(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const o=p(t,["args"]);o!=null&&g(e,["args"],o);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $G(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const o=p(t,["allowedFunctionNames"]);if(o!=null&&g(e,["allowedFunctionNames"],o),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GG(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const o=p(t,["name"]);o!=null&&g(e,["name"],o);const r=p(t,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function VG(t,e,n){const o={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],sh(Ut(r)));const a=p(e,["temperature"]);a!=null&&g(o,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(o,["topP"],u);const c=p(e,["topK"]);c!=null&&g(o,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(o,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(o,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(o,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(o,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(o,["logprobs"],S);const E=p(e,["presencePenalty"]);E!=null&&g(o,["presencePenalty"],E);const C=p(e,["frequencyPenalty"]);C!=null&&g(o,["frequencyPenalty"],C);const A=p(e,["seed"]);A!=null&&g(o,["seed"],A);const x=p(e,["responseMimeType"]);x!=null&&g(o,["responseMimeType"],x);const M=p(e,["responseSchema"]);M!=null&&g(o,["responseSchema"],Ly(M));const I=p(e,["responseJsonSchema"]);if(I!=null&&g(o,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let oe=N;Array.isArray(oe)&&(oe=oe.map(ae=>OV(ae))),g(n,["safetySettings"],oe)}const D=p(e,["tools"]);if(n!==void 0&&D!=null){let oe=Ra(D);Array.isArray(oe)&&(oe=oe.map(ae=>HV(xa(ae)))),g(n,["tools"],oe)}const L=p(e,["toolConfig"]);if(n!==void 0&&L!=null&&g(n,["toolConfig"],FV(L)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=p(e,["cachedContent"]);n!==void 0&&U!=null&&g(n,["cachedContent"],yi(t,U));const O=p(e,["responseModalities"]);O!=null&&g(o,["responseModalities"],O);const q=p(e,["mediaResolution"]);q!=null&&g(o,["mediaResolution"],q);const J=p(e,["speechConfig"]);if(J!=null&&g(o,["speechConfig"],Uy(J)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=p(e,["thinkingConfig"]);j!=null&&g(o,["thinkingConfig"],j);const W=p(e,["imageConfig"]);W!=null&&g(o,["imageConfig"],gV(W));const re=p(e,["enableEnhancedCivicAnswers"]);return re!=null&&g(o,["enableEnhancedCivicAnswers"],re),o}function zG(t,e,n){const o={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],Ut(r));const a=p(e,["temperature"]);a!=null&&g(o,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(o,["topP"],u);const c=p(e,["topK"]);c!=null&&g(o,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&g(o,["candidateCount"],h);const d=p(e,["maxOutputTokens"]);d!=null&&g(o,["maxOutputTokens"],d);const m=p(e,["stopSequences"]);m!=null&&g(o,["stopSequences"],m);const y=p(e,["responseLogprobs"]);y!=null&&g(o,["responseLogprobs"],y);const S=p(e,["logprobs"]);S!=null&&g(o,["logprobs"],S);const E=p(e,["presencePenalty"]);E!=null&&g(o,["presencePenalty"],E);const C=p(e,["frequencyPenalty"]);C!=null&&g(o,["frequencyPenalty"],C);const A=p(e,["seed"]);A!=null&&g(o,["seed"],A);const x=p(e,["responseMimeType"]);x!=null&&g(o,["responseMimeType"],x);const M=p(e,["responseSchema"]);M!=null&&g(o,["responseSchema"],Ly(M));const I=p(e,["responseJsonSchema"]);I!=null&&g(o,["responseJsonSchema"],I);const N=p(e,["routingConfig"]);N!=null&&g(o,["routingConfig"],N);const D=p(e,["modelSelectionConfig"]);D!=null&&g(o,["modelConfig"],D);const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let F=L;Array.isArray(F)&&(F=F.map(Q=>Q)),g(n,["safetySettings"],F)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let F=Ra(U);Array.isArray(F)&&(F=F.map(Q=>SM(xa(Q)))),g(n,["tools"],F)}const O=p(e,["toolConfig"]);n!==void 0&&O!=null&&g(n,["toolConfig"],O);const q=p(e,["labels"]);n!==void 0&&q!=null&&g(n,["labels"],q);const J=p(e,["cachedContent"]);n!==void 0&&J!=null&&g(n,["cachedContent"],yi(t,J));const j=p(e,["responseModalities"]);j!=null&&g(o,["responseModalities"],j);const W=p(e,["mediaResolution"]);W!=null&&g(o,["mediaResolution"],W);const re=p(e,["speechConfig"]);re!=null&&g(o,["speechConfig"],_M(Uy(re)));const oe=p(e,["audioTimestamp"]);oe!=null&&g(o,["audioTimestamp"],oe);const ae=p(e,["thinkingConfig"]);ae!=null&&g(o,["thinkingConfig"],ae);const de=p(e,["imageConfig"]);if(de!=null&&g(o,["imageConfig"],vV(de)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function eC(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>sh(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],VG(t,a,n)),n}function tC(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["contents"]);if(r!=null){let u=Hn(r);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],zG(t,a,n)),n}function nC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(d=>dG(d))),g(e,["candidates"],h)}const r=p(t,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function oC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>m)),g(e,["candidates"],d)}const r=p(t,["createTime"]);r!=null&&g(e,["createTime"],r);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=p(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const h=p(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function qG(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const r=p(t,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const h=p(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&g(e,["parameters","includeSafetyAttributes"],h);const d=p(t,["includeRaiReason"]);e!==void 0&&d!=null&&g(e,["parameters","includeRaiReason"],d);const m=p(t,["language"]);e!==void 0&&m!=null&&g(e,["parameters","language"],m);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const S=p(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=p(t,["imageSize"]);if(e!==void 0&&E!=null&&g(e,["parameters","sampleImageSize"],E),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function JG(t,e){const n={},o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const E=p(t,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const C=p(t,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const A=p(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A);const x=p(t,["addWatermark"]);e!==void 0&&x!=null&&g(e,["parameters","addWatermark"],x);const M=p(t,["labels"]);e!==void 0&&M!=null&&g(e,["labels"],M);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I);const N=p(t,["enhancePrompt"]);return e!==void 0&&N!=null&&g(e,["parameters","enhancePrompt"],N),n}function KG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&qG(a,n),n}function YG(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&JG(a,n),n}function jG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>aV(u))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],vM(r)),e}function XG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ah(u))),g(e,["generatedImages"],a)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],yM(r)),e}function WG(t,e){const n={},o=p(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(t,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=p(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=p(t,["negativePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","negativePrompt"],h);const d=p(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&g(e,["parameters","enhancePrompt"],d),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=p(t,["lastFrame"]);e!==void 0&&m!=null&&g(e,["instances[0]","lastFrame"],lh(m));const y=p(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>ZV(E))),g(e,["instances[0]","referenceImages"],S)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function QG(t,e){const n={},o=p(t,["numberOfVideos"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=p(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const h=p(t,["aspectRatio"]);e!==void 0&&h!=null&&g(e,["parameters","aspectRatio"],h);const d=p(t,["resolution"]);e!==void 0&&d!=null&&g(e,["parameters","resolution"],d);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const y=p(t,["pubsubTopic"]);e!==void 0&&y!=null&&g(e,["parameters","pubsubTopic"],y);const S=p(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const E=p(t,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const C=p(t,["generateAudio"]);e!==void 0&&C!=null&&g(e,["parameters","generateAudio"],C);const A=p(t,["lastFrame"]);e!==void 0&&A!=null&&g(e,["instances[0]","lastFrame"],fo(A));const x=p(t,["referenceImages"]);if(e!==void 0&&x!=null){let N=x;Array.isArray(N)&&(N=N.map(D=>ez(D))),g(e,["instances[0]","referenceImages"],N)}const M=p(t,["mask"]);e!==void 0&&M!=null&&g(e,["instances[0]","mask"],QV(M));const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&g(e,["parameters","compressionQuality"],I),n}function ZG(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],oV(u)),e}function eV(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],iV(u)),e}function tV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],lh(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],EM(u));const c=p(e,["source"]);c!=null&&rV(c,n);const h=p(e,["config"]);return h!=null&&WG(h,n),n}function nV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["prompt"]);r!=null&&g(n,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],fo(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],bM(u));const c=p(e,["source"]);c!=null&&sV(c,n);const h=p(e,["config"]);return h!=null&&QG(h,n),n}function oV(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>uV(u))),g(e,["generatedVideos"],a)}const o=p(t,["raiMediaFilteredCount"]);o!=null&&g(e,["raiMediaFilteredCount"],o);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function iV(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>cV(u))),g(e,["generatedVideos"],a)}const o=p(t,["raiMediaFilteredCount"]);o!=null&&g(e,["raiMediaFilteredCount"],o);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function rV(t,e){const n={},o=p(t,["prompt"]);e!==void 0&&o!=null&&g(e,["instances[0]","prompt"],o);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],lh(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],EM(a)),n}function sV(t,e){const n={},o=p(t,["prompt"]);e!==void 0&&o!=null&&g(e,["instances[0]","prompt"],o);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],fo(r));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],bM(a)),n}function aV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],yV(n));const o=p(t,["raiFilteredReason"]);o!=null&&g(e,["raiFilteredReason"],o);const r=p(t,["_self"]);return r!=null&&g(e,["safetyAttributes"],vM(r)),e}function ah(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],gM(n));const o=p(t,["raiFilteredReason"]);o!=null&&g(e,["raiFilteredReason"],o);const r=p(t,["_self"]);r!=null&&g(e,["safetyAttributes"],yM(r));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function lV(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],gM(n));const o=p(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["labels"],r)}return e}function uV(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],XV(n)),e}function cV(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],WV(n)),e}function fV(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const o=p(t,["responseJsonSchema"]);o!=null&&g(e,["responseJsonSchema"],o);const r=p(t,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const h=p(t,["logprobs"]);h!=null&&g(e,["logprobs"],h);const d=p(t,["maxOutputTokens"]);d!=null&&g(e,["maxOutputTokens"],d);const m=p(t,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const y=p(t,["presencePenalty"]);y!=null&&g(e,["presencePenalty"],y);const S=p(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const E=p(t,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const C=p(t,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const A=p(t,["responseSchema"]);A!=null&&g(e,["responseSchema"],A);const x=p(t,["routingConfig"]);x!=null&&g(e,["routingConfig"],x);const M=p(t,["seed"]);M!=null&&g(e,["seed"],M);const I=p(t,["speechConfig"]);I!=null&&g(e,["speechConfig"],_M(I));const N=p(t,["stopSequences"]);N!=null&&g(e,["stopSequences"],N);const D=p(t,["temperature"]);D!=null&&g(e,["temperature"],D);const L=p(t,["thinkingConfig"]);L!=null&&g(e,["thinkingConfig"],L);const U=p(t,["topK"]);U!=null&&g(e,["topK"],U);const O=p(t,["topP"]);if(O!=null&&g(e,["topP"],O),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function dV(t,e){const n={},o=p(e,["model"]);return o!=null&&g(n,["_url","name"],Ve(t,o)),n}function hV(t,e){const n={},o=p(e,["model"]);return o!=null&&g(n,["_url","name"],Ve(t,o)),n}function pV(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function mV(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function gV(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const o=p(t,["imageSize"]);if(o!=null&&g(e,["imageSize"],o),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vV(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const o=p(t,["imageSize"]);o!=null&&g(e,["imageSize"],o);const r=p(t,["outputMimeType"]);r!=null&&g(e,["imageOutputOptions","mimeType"],r);const a=p(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function yV(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],ur(n));const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function gM(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const o=p(t,["bytesBase64Encoded"]);o!=null&&g(e,["imageBytes"],ur(o));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function lh(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],ur(n));const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function fo(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const o=p(t,["imageBytes"]);o!=null&&g(e,["bytesBase64Encoded"],ur(o));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function _V(t,e,n){const o={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],lM(t,c)),o}function SV(t,e,n){const o={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&g(n,["_query","pageSize"],r);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],lM(t,c)),o}function EV(t,e){const n={},o=p(e,["config"]);return o!=null&&_V(t,o,n),n}function bV(t,e){const n={},o=p(e,["config"]);return o!=null&&SV(t,o,n),n}function wV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["_self"]);if(r!=null){let a=uM(r);Array.isArray(a)&&(a=a.map(u=>vv(u))),g(e,["models"],a)}return e}function TV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["_self"]);if(r!=null){let a=uM(r);Array.isArray(a)&&(a=a.map(u=>yv(u))),g(e,["models"],a)}return e}function CV(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const o=p(t,["segmentationClasses"]);o!=null&&g(e,["maskClasses"],o);const r=p(t,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function vv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["displayName"]);o!=null&&g(e,["displayName"],o);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const u=p(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],$V(u));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const h=p(t,["outputTokenLimit"]);h!=null&&g(e,["outputTokenLimit"],h);const d=p(t,["supportedGenerationMethods"]);d!=null&&g(e,["supportedActions"],d);const m=p(t,["temperature"]);m!=null&&g(e,["temperature"],m);const y=p(t,["maxTemperature"]);y!=null&&g(e,["maxTemperature"],y);const S=p(t,["topP"]);S!=null&&g(e,["topP"],S);const E=p(t,["topK"]);E!=null&&g(e,["topK"],E);const C=p(t,["thinking"]);return C!=null&&g(e,["thinking"],C),e}function yv(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["displayName"]);o!=null&&g(e,["displayName"],o);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const u=p(t,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(S=>BG(S))),g(e,["endpoints"],y)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const h=p(t,["_self"]);h!=null&&g(e,["tunedModelInfo"],GV(h));const d=p(t,["defaultCheckpointId"]);d!=null&&g(e,["defaultCheckpointId"],d);const m=p(t,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(S=>S)),g(e,["checkpoints"],y)}return e}function AV(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const o=p(t,["codeExecutionResult"]);o!=null&&g(e,["codeExecutionResult"],o);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],FG(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],HG(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],fG(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function xV(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],fo(n)),e}function RV(t,e){const n={},o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const r=p(t,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const d=p(t,["addWatermark"]);e!==void 0&&d!=null&&g(e,["parameters","addWatermark"],d);const m=p(t,["outputMimeType"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","mimeType"],m);const y=p(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","compressionQuality"],y);const S=p(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const E=p(t,["labels"]);return e!==void 0&&E!=null&&g(e,["labels"],E),n}function MV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["source"]);r!=null&&IV(r,n);const a=p(e,["config"]);return a!=null&&RV(a,n),n}function NV(t){const e={},n=p(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ah(r))),g(e,["generatedImages"],o)}return e}function IV(t,e){const n={},o=p(t,["prompt"]);e!==void 0&&o!=null&&g(e,["instances[0]","prompt"],o);const r=p(t,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],fo(r));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>xV(c))),g(e,["instances[0]","productImages"],u)}return n}function DV(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],fo(n));const o=p(t,["referenceId"]);o!=null&&g(e,["referenceId"],o);const r=p(t,["referenceType"]);r!=null&&g(e,["referenceType"],r);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],CV(a));const u=p(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],yG(u));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const h=p(t,["subjectImageConfig"]);return h!=null&&g(e,["subjectImageConfig"],h),e}function vM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const o=p(t,["safetyAttributes","scores"]);o!=null&&g(e,["scores"],o);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function yM(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const o=p(t,["safetyAttributes","scores"]);o!=null&&g(e,["scores"],o);const r=p(t,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function OV(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=p(t,["threshold"]);return o!=null&&g(e,["threshold"],o),e}function PV(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],fo(n)),e}function kV(t,e){const n={},o=p(t,["mode"]);e!==void 0&&o!=null&&g(e,["parameters","mode"],o);const r=p(t,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=p(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const h=p(t,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),n}function LV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["source"]);r!=null&&BV(r,n);const a=p(e,["config"]);return a!=null&&kV(a,n),n}function UV(t){const e={},n=p(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>lV(r))),g(e,["generatedMasks"],o)}return e}function BV(t,e){const n={},o=p(t,["prompt"]);e!==void 0&&o!=null&&g(e,["instances[0]","prompt"],o);const r=p(t,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],fo(r));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],PV(a)),n}function _M(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],n);const o=p(t,["languageCode"]);if(o!=null&&g(e,["languageCode"],o),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function FV(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],$G(n));const o=p(t,["retrievalConfig"]);return o!=null&&g(e,["retrievalConfig"],o),e}function HV(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],pV(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],mV(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function SM(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(S=>GG(S))),g(e,["functionDeclarations"],y)}const o=p(t,["retrieval"]);o!=null&&g(e,["retrieval"],o);const r=p(t,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],d);const m=p(t,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function $V(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const o=p(t,["createTime"]);o!=null&&g(e,["createTime"],o);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function GV(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const o=p(t,["createTime"]);o!=null&&g(e,["createTime"],o);const r=p(t,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function VV(t,e){const n={},o=p(t,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function zV(t,e){const n={},o=p(t,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const r=p(t,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function qV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","name"],Ve(t,o));const r=p(e,["config"]);return r!=null&&VV(r,n),n}function JV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["config"]);return r!=null&&zV(r,n),n}function KV(t,e){const n={},o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const r=p(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=p(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const h=p(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","compressionQuality"],h);const d=p(t,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=p(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const E=p(t,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),n}function YV(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["_url","model"],Ve(t,o));const r=p(e,["image"]);r!=null&&g(n,["instances[0]","image"],fo(r));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=p(e,["config"]);return u!=null&&KV(u,n),n}function jV(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>ah(a))),g(e,["generatedImages"],r)}return e}function XV(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const o=p(t,["encodedVideo"]);o!=null&&g(e,["videoBytes"],ur(o));const r=p(t,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function WV(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const o=p(t,["bytesBase64Encoded"]);o!=null&&g(e,["videoBytes"],ur(o));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function QV(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],fo(n));const o=p(t,["maskMode"]);return o!=null&&g(e,["maskMode"],o),e}function ZV(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],lh(n));const o=p(t,["referenceType"]);return o!=null&&g(e,["referenceType"],o),e}function ez(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],fo(n));const o=p(t,["referenceType"]);return o!=null&&g(e,["referenceType"],o),e}function EM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const o=p(t,["videoBytes"]);o!=null&&g(e,["encodedVideo"],ur(o));const r=p(t,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function bM(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const o=p(t,["videoBytes"]);o!=null&&g(e,["bytesBase64Encoded"],ur(o));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function tz(t,e){const n={},o=p(t,["displayName"]);return e!==void 0&&o!=null&&g(e,["displayName"],o),n}function nz(t){const e={},n=p(t,["config"]);return n!=null&&tz(n,e),e}function oz(t,e){const n={},o=p(t,["force"]);return e!==void 0&&o!=null&&g(e,["_query","force"],o),n}function iz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const o=p(t,["config"]);return o!=null&&oz(o,e),e}function rz(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function sz(t,e){const n={},o=p(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const r=p(t,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),n}function az(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const o=p(t,["metadata"]);o!=null&&g(e,["metadata"],o);const r=p(t,["done"]);r!=null&&g(e,["done"],r);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],uz(u)),e}function lz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const o=p(t,["fileName"]);o!=null&&g(e,["fileName"],o);const r=p(t,["config"]);return r!=null&&sz(r,e),e}function uz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["parent"]);o!=null&&g(e,["parent"],o);const r=p(t,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function cz(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function fz(t){const e={},n=p(t,["config"]);return n!=null&&cz(n,e),e}function dz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function wM(t,e){const n={},o=p(t,["mimeType"]);e!==void 0&&o!=null&&g(e,["mimeType"],o);const r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),g(e,["customMetadata"],c)}const u=p(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function hz(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const o=p(t,["config"]);return o!=null&&wM(o,e),e}function pz(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}const mz="Content-Type",gz="X-Server-Timeout",vz="User-Agent",_v="x-goog-api-client",yz="1.33.0",_z=`google-genai-sdk/${yz}`,Sz="v1beta1",Ez="v1beta";class bz{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Sz,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Ez,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[u,c]of Object.entries(e.queryParams))r.searchParams.append(u,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?o[r]=Object.assign(Object.assign({},o[r]),a):a!==void 0&&(o[r]=a);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const a=new AbortController,u=a.signal;if(n.timeout&&n?.timeout>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&wz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await iC(r),new pv(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await iC(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return io(this,arguments,function*(){var o;const r=(o=e?.body)===null||o===void 0?void 0:o.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield Ce(r.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=a.decode(m,{stream:!0});try{const C=JSON.parse(y);if("error"in C){const A=JSON.parse(JSON.stringify(C.error)),x=A.status,M=A.code,I=`got status: ${x}. ${JSON.stringify(C)}`;if(M>=400&&M<600)throw new rh({message:I,status:M})}}catch(C){if(C.name==="ApiError")throw C}u+=y;let S=-1,E=0;for(;;){S=-1,E=0;for(const x of h){const M=u.indexOf(x);M!==-1&&(S===-1||M<S)&&(S=M,E=x.length)}if(S===-1)break;const C=u.substring(0,S);u=u.substring(S+E);const A=C.trim();if(A.startsWith(c)){const x=A.substring(c.length).trim();try{const M=new Response(x,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ce(new pv(M))}catch(M){throw new Error(`exception parsing stream chunk ${x}. ${M}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=_z+" "+this.clientOptions.userAgentExtra;return e[vz]=n,e[_v]=n,e[mz]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))o.append(r,a);e.timeout&&e.timeout>0&&o.append(gz,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const c=(o=n?.mimeType)!==null&&o!==void 0?o:u.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const h={file:r},d=this.getFileName(e),m=fe("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,d,h,n?.httpOptions);return a.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,o){var r;const a=this.clientOptions.uploader,u=await a.stat(n),c=String(u.size),h=(r=o?.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),y={};o!=null&&wM(o,y);const S=await this.fetchUploadUrl(d,c,h,m,y,o?.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,a,u){var c;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function iC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new rh({message:r,status:n}):new Error(r)}}function wz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,u){const c=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const d=u[h],m=c[h];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[h]=o(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[h]=d)}return c}const r=o(n,e);t.body=JSON.stringify(r)}const Tz="mcp_used/unknown";let Cz=!1;function TM(t){for(const e of t)if(Az(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Cz}function CM(t){var e;const n=(e=t[_v])!==null&&e!==void 0?e:"";t[_v]=(n+` ${Tz}`).trimStart()}function Az(t){return t!==null&&typeof t=="object"&&t instanceof Fy}function xz(t){return io(this,arguments,function*(n,o=100){let r,a=0;for(;a<o;){const u=yield Ce(n.listTools({cursor:r}));for(const c of u.tools)yield yield Ce(c),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class Fy{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Fy(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const m of this.mcpClients)try{for(var c=!0,h=(n=void 0,ro(xz(m))),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const y=r;u.push(y);const S=y.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=m}}catch(y){n={error:y}}finally{try{!c&&!e&&(o=h.return)&&await o.call(h)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),rH(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,a);n.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return n}}async function Rz(t,e,n){const o=new WF;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class Mz{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=Dz(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(N=>{d=N}),y=e.callbacks,S=function(){d({})},E=this.apiClient,C={onopen:S,onmessage:N=>{Rz(E,y.onmessage,N)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(N){}},A=this.webSocketFactory.create(h,Iz(u),C);A.connect(),await m;const I={setup:{model:Ve(this.apiClient,e.model)}};return A.send(JSON.stringify(I)),new Nz(A,this.apiClient)}}class Nz{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nG(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=tG(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(aa.PLAY)}pause(){this.sendPlaybackControl(aa.PAUSE)}stop(){this.sendPlaybackControl(aa.STOP)}resetContext(){this.sendPlaybackControl(aa.RESET_CONTEXT)}close(){this.conn.close()}}function Iz(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Dz(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}const Oz="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Pz(t,e,n){const o=new XF;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=rG(a);Object.assign(o,u)}else Object.assign(o,a);e(o)}class kz{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Mz(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,a,u,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&TM(e.config.tools)&&CM(y);const S=Fz(y);if(this.apiClient.isVertexAI())m=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,m);else{const J=this.apiClient.getApiKey();let j="BidiGenerateContent",W="key";J?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",W="access_token"),m=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${j}?${W}=${J}`}let E=()=>{};const C=new Promise(J=>{E=J}),A=e.callbacks,x=function(){var J;(J=A?.onopen)===null||J===void 0||J.call(A),E({})},M=this.apiClient,I={onopen:x,onmessage:J=>{Pz(M,A.onmessage,J)},onerror:(n=A?.onerror)!==null&&n!==void 0?n:function(J){},onclose:(o=A?.onclose)!==null&&o!==void 0?o:function(J){}},N=this.webSocketFactory.create(m,Bz(S),I);N.connect(),await C;let D=Ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const J=this.apiClient.getProject(),j=this.apiClient.getLocation();D=`projects/${J}/locations/${j}/`+D}let L={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sd.AUDIO]}:e.config.responseModalities=[Sd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(c=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[],O=[];for(const J of U)if(this.isCallableTool(J)){const j=J;O.push(await j.tool())}else O.push(J);O.length>0&&(e.config.tools=O);const q={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=eG(this.apiClient,q):L=Z$(this.apiClient,q),delete L.config,N.send(JSON.stringify(L)),new Uz(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Lz={turnComplete:!0};class Uz{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Hn(n.turns),e.isVertexAI()||(o=o.map(r=>sh(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Oz)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Lz),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:iG(e)}:n={realtimeInput:oG(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Bz(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Fz(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}const rC=10;function sC(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t?.tools)!==null&&n!==void 0?n:[])if(fa(u)){r=!0;break}if(!r)return!0;const a=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function fa(t){return"callTool"in t&&typeof t.callTool=="function"}function Hz(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>fa(r)))!==null&&o!==void 0?o:!1}function aC(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(fa(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function lC(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}let $z=class extends vi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,a,u,c;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Hz(n)||sC(n.config))return await this.generateContentInternal(h);const d=aC(n);if(d.length>0){const A=d.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let m,y;const S=Hn(h.contents),E=(a=(r=(o=h.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:rC;let C=0;for(;C<E&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const A=m.candidates[0].content,x=[];for(const M of(c=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[])if(fa(M)){const N=await M.callTool(m.functionCalls);x.push(...N)}C++,y={role:"user",parts:x},h.contents=Hn(h.contents),h.contents.push(A),h.contents.push(y),lC(h.config)&&(S.push(A),S.push(y))}return lC(h.config)&&(m.automaticFunctionCallingHistory=S),m},this.generateContentStream=async n=>{var o,r,a,u,c;if(this.maybeMoveToResponseJsonSchem(n),sC(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const h=aC(n);if(h.length>0){const y=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(r=(o=n?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,m=(c=(u=n?.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let a;const u=[];if(o?.generatedImages)for(const h of o.generatedImages)h&&h?.safetyAttributes&&((r=h?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h?.safetyAttributes:u.push(h);let c;return a?c={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:c={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},c}),this.list=async n=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ns(di.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(u),u)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,a,u,c,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(c=n.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>fa(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(c.config.tools=u,e.config&&e.config.tools&&TM(e.config.tools)){const h=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),CM(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,o,r;const a=new Map;for(const u of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(fa(u)){const c=u,h=await c.tool();for(const d of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,o,r;const a=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:rC;let u=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(d,m,y){return io(this,arguments,function*(){for(var S,E,C,A,x,M;c<a;){u&&(c++,u=!1);const L=yield Ce(d.processParamsMaybeAddMcpUsage(y)),U=yield Ce(d.generateContentStreamInternal(L)),O=[],q=[];try{for(var I=!0,N=(E=void 0,ro(U)),D;D=yield Ce(N.next()),S=D.done,!S;I=!0){A=D.value,I=!1;const J=A;if(yield yield Ce(J),J.candidates&&(!((x=J.candidates[0])===null||x===void 0)&&x.content)){q.push(J.candidates[0].content);for(const j of(M=J.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(c<a&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(j.functionCall.name)){const W=yield Ce(m.get(j.functionCall.name).callTool([j.functionCall]));O.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(J){E={error:J}}finally{try{!I&&!S&&(C=N.return)&&(yield Ce(C.call(N)))}finally{if(E)throw E.error}}if(O.length>0){u=!0;const J=new Pl;J.candidates=[{content:{role:"user",parts:O}}],yield yield Ce(J);const j=[];j.push(...q),j.push({role:"user",parts:O});const W=Hn(y.contents).concat(j);y.contents=W}else break}})})(this,h,e)}async generateContentInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=tC(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=oC(m),S=new Pl;return Object.assign(S,y),S})}else{const d=eC(this.apiClient,e);return c=fe("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=nC(m),S=new Pl;return Object.assign(S,y),S})}}async generateContentStreamInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=tC(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(y){return io(this,arguments,function*(){var S,E,C,A;try{for(var x=!0,M=ro(y),I;I=yield Ce(M.next()),S=I.done,!S;x=!0){A=I.value,x=!1;const N=A,D=oC(yield Ce(N.json()));D.sdkHttpResponse={headers:N.headers};const L=new Pl;Object.assign(L,D),yield yield Ce(L)}}catch(N){E={error:N}}finally{try{!x&&!S&&(C=M.return)&&(yield Ce(C.call(M)))}finally{if(E)throw E.error}}})})}else{const d=eC(this.apiClient,e);return c=fe("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(y){return io(this,arguments,function*(){var S,E,C,A;try{for(var x=!0,M=ro(y),I;I=yield Ce(M.next()),S=I.done,!S;x=!0){A=I.value,x=!1;const N=A,D=nC(yield Ce(N.json()));D.sdkHttpResponse={headers:N.headers};const L=new Pl;Object.assign(L,D),yield yield Ce(L)}}catch(N){E={error:N}}finally{try{!x&&!S&&(C=M.return)&&(yield Ce(C.call(M)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=kG(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=UG(m),S=new UT;return Object.assign(S,y),S})}else{const d=PG(this.apiClient,e);return c=fe("{model}:batchEmbedContents",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=LG(m),S=new UT;return Object.assign(S,y),S})}}async generateImagesInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=YG(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=XG(m),S=new BT;return Object.assign(S,y),S})}else{const d=KG(this.apiClient,e);return c=fe("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=jG(m),S=new BT;return Object.assign(S,y),S})}}async editImageInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=NG(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=IG(h),m=new FF;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=YV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=jV(h),m=new HF;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=MV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=NV(h),m=new $F;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=LV(this.apiClient,e);return a=fe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=UV(h),m=new GF;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=hV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>yv(m))}else{const d=dV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>vv(m))}}async listInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=bV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=TV(m),S=new FT;return Object.assign(S,y),S})}else{const d=EV(this.apiClient,e);return c=fe("{models_url}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=wV(m),S=new FT;return Object.assign(S,y),S})}}async update(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=JV(this.apiClient,e);return c=fe("{model}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>yv(m))}else{const d=qV(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>vv(m))}}async delete(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=AG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=RG(m),S=new HT;return Object.assign(S,y),S})}else{const d=CG(this.apiClient,e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=xG(m),S=new HT;return Object.assign(S,y),S})}}async countTokens(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=bG(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=TG(m),S=new $T;return Object.assign(S,y),S})}else{const d=EG(this.apiClient,e);return c=fe("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=wG(m),S=new $T;return Object.assign(S,y),S})}}async computeTokens(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=pG(this.apiClient,e);return a=fe("{model}:computeTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const d=mG(h),m=new VF;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=nV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u.then(m=>{const y=eV(m),S=new Ed;return Object.assign(S,y),S})}else{const d=tV(this.apiClient,e);return c=fe("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u.then(m=>{const y=ZG(m),S=new Ed;return Object.assign(S,y),S})}}};class Gz extends vi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=OF(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),u}else{const d=DF(e);return c=fe("{operationName}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),u}}async fetchPredictVideosOperationInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=CF(e);return a=fe("{resourceName}:fetchPredictOperation",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function Vz(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function zz(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Zz(a))),g(e,["parts"],r)}const o=p(t,["role"]);return o!=null&&g(e,["role"],o),e}function qz(t,e,n){const o={},r=p(e,["expireTime"]);n!==void 0&&r!=null&&g(n,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=p(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],Qz(t,c));const h=p(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&g(n,["fieldMask"],h),o}function Jz(t,e){const n={},o=p(e,["config"]);return o!=null&&g(n,["config"],qz(t,o,n)),n}function Kz(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const o=p(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Yz(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const o=p(t,["args"]);o!=null&&g(e,["args"],o);const r=p(t,["name"]);if(r!=null&&g(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jz(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function Xz(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function Wz(t,e){const n={},o=p(t,["generationConfig"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig"],o);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const h=p(t,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","seed"],m);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","speechConfig"],By(y));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const E=p(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=p(t,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],zz(Ut(C)));const A=p(t,["tools"]);if(e!==void 0&&A!=null){let U=Ra(A);Array.isArray(U)&&(U=U.map(O=>tq(xa(O)))),g(e,["setup","tools"],U)}const x=p(t,["sessionResumption"]);e!==void 0&&x!=null&&g(e,["setup","sessionResumption"],eq(x));const M=p(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","inputAudioTranscription"],M);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],I);const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&g(e,["setup","realtimeInputConfig"],N);const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&g(e,["setup","contextWindowCompression"],D);const L=p(t,["proactivity"]);if(e!==void 0&&L!=null&&g(e,["setup","proactivity"],L),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Qz(t,e){const n={},o=p(e,["model"]);o!=null&&g(n,["setup","model"],Ve(t,o));const r=p(e,["config"]);return r!=null&&g(n,["config"],Wz(r,n)),n}function Zz(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const o=p(t,["codeExecutionResult"]);o!=null&&g(e,["codeExecutionResult"],o);const r=p(t,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],Kz(a));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],Yz(u));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const h=p(t,["inlineData"]);h!=null&&g(e,["inlineData"],Vz(h));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const m=p(t,["thought"]);m!=null&&g(e,["thought"],m);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const S=p(t,["videoMetadata"]);return S!=null&&g(e,["videoMetadata"],S),e}function eq(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tq(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>y)),g(e,["functionDeclarations"],m)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const r=p(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],jz(c));const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],Xz(h));const d=p(t,["urlContext"]);return d!=null&&g(e,["urlContext"],d),e}function nq(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function oq(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=nq(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(d=>u.includes(d)?`generationConfig.${d}`:d));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class iq extends vi{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=Jz(this.apiClient,e);a=fe("auth_tokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query;const h=oq(c,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function rq(t,e){const n={},o=p(t,["force"]);return e!==void 0&&o!=null&&g(e,["_query","force"],o),n}function sq(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const o=p(t,["config"]);return o!=null&&rq(o,e),e}function aq(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function lq(t,e){const n={},o=p(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function uq(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const o=p(t,["config"]);return o!=null&&lq(o,e),e}function cq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const o=p(t,["nextPageToken"]);o!=null&&g(e,["nextPageToken"],o);const r=p(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}class fq extends vi{constructor(e){super(),this.apiClient=e,this.list=async n=>new ns(di.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=aq(e);return a=fe("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sq(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uq(e);return a=fe("{parent}/documents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=cq(h),m=new zF;return Object.assign(m,d),m})}}}class dq extends vi{constructor(e,n=new fq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new ns(di.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nz(e);return a=fe("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rz(e);return a=fe("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iz(e);r=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fz(e);return a=fe("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=dz(h),m=new qF;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=hz(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=pz(h),m=new JF;return Object.assign(m,d),m})}}async importFile(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lz(e);return a=fe("{file_search_store_name}:importFile",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const d=az(h),m=new Oy;return Object.assign(m,d),m})}}}let AM=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return AM=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const hq=()=>AM();function Sv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ev=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class qn extends Error{}let Jn=class bv extends qn{constructor(e,n,o,r){super(`${bv.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new uh({message:o,cause:Ev(n)});const a=n;return e===400?new RM(e,a,o,r):e===401?new MM(e,a,o,r):e===403?new NM(e,a,o,r):e===404?new IM(e,a,o,r):e===409?new DM(e,a,o,r):e===422?new OM(e,a,o,r):e===429?new PM(e,a,o,r):e>=500?new kM(e,a,o,r):new bv(e,a,o,r)}},wv=class extends Jn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},uh=class extends Jn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},xM=class extends uh{constructor({message:e}={}){super({message:e??"Request timed out."})}},RM=class extends Jn{},MM=class extends Jn{},NM=class extends Jn{},IM=class extends Jn{},DM=class extends Jn{},OM=class extends Jn{},PM=class extends Jn{},kM=class extends Jn{};const pq=/^[a-z][a-z0-9+.-]*:/i,mq=t=>pq.test(t);let Tv=t=>(Tv=Array.isArray,Tv(t));const gq=Tv;let vq=gq;const uC=vq;function yq(t){if(!t)return!0;for(const e in t)return!1;return!0}function _q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Sq=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new qn(`${t} must be an integer`);if(e<0)throw new qn(`${t} must be a positive integer`);return e},Eq=t=>{try{return JSON.parse(t)}catch{return}};const bq=t=>new Promise(e=>setTimeout(e,t));const ea="0.0.1";function wq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Tq=()=>{var t,e,n,o,r;const a=wq();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":fC(Deno.build.os),"X-Stainless-Arch":cC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":fC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":cC((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=Cq();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ea,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Cq(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,a=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const cC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",fC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let bf;const Aq=()=>bf??(bf=Tq());function xq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function LM(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Rq(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return LM({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function UM(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Mq(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}const Nq=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const BM=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function vg(t,e,n){return BM(),new File(t,e??"unknown_file",n)}function Iq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Dq=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const FM=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Oq=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&FM(t),Pq=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function kq(t,e,n){if(BM(),t=await t,Oq(t))return t instanceof File?t:vg([await t.arrayBuffer()],t.name);if(Pq(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),vg(await Cv(r),e,n)}const o=await Cv(t);if(e||(e=Iq(t)),!n?.type){const r=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return vg(o,e,n)}async function Cv(t){var e,n,o,r,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(FM(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(Dq(t))try{for(var c=!0,h=ro(t),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const m=r;u.push(...await Cv(m))}}catch(m){n={error:m}}finally{try{!c&&!e&&(o=h.return)&&await o.call(h)}finally{if(n)throw n.error}}else{const m=(a=t?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${Lq(t)}`)}return u}function Lq(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let HM=class{constructor(e){this._client=e}};HM._key=[];function $M(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const dC=Object.freeze(Object.create(null)),Uq=(t=$M)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((m,y,S)=>{var E,C,A;/[?#]/.test(y)&&(r=!0);const x=o[S];let M=(r?encodeURIComponent:t)(""+x);return S!==o.length&&(x==null||typeof x=="object"&&x.toString===((A=Object.getPrototypeOf((C=Object.getPrototypeOf((E=x.hasOwnProperty)!==null&&E!==void 0?E:dC))!==null&&C!==void 0?C:dC))===null||A===void 0?void 0:A.toString))&&(M=x+"",a.push({start:m.length+y.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),m+y+(S===o.length?"":M)},""),c=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,E)=>{const C=" ".repeat(E.start-m),A="^".repeat(E.length);return m=E.start+E.length,S+C+A},"");throw new qn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${y}`)}return u}),wf=Uq($M);class GM extends HM{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,a=wd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new qn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new qn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(wf`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(wf`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(wf`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const a=n??{},{api_version:u=this._client.apiVersion}=a,c=wd(a,["api_version"]);return this._client.get(wf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:c},o),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}}GM._key=Object.freeze(["interactions"]);class VM extends GM{}function Bq(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let Tf;function Hy(t){let e;return(Tf??(e=new globalThis.TextEncoder,Tf=e.encode.bind(e)))(t)}let Cf;function hC(t){let e;return(Cf??(e=new globalThis.TextDecoder,Cf=e.decode.bind(e)))(t)}let ch=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Hy(e):e;this.buffer=Bq([this.buffer,n]);const o=[];let r;for(;(r=Fq(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(hC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=hC(this.buffer.subarray(0,a));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}};ch.NEWLINE_CHARS=new Set([`
`,"\r"]);ch.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Fq(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Hq(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}const Td={off:0,error:200,warn:300,info:400,debug:500},pC=(t,e,n)=>{if(t){if(_q(Td,t))return t;$t(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Td))}`)}};function Ul(){}function Af(t,e,n){return!e||Td[t]>Td[n]?Ul:e[t].bind(e)}const $q={error:Ul,warn:Ul,info:Ul,debug:Ul};let mC=new WeakMap;function $t(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return $q;const r=mC.get(n);if(r&&r[0]===o)return r[1];const a={error:Af("error",n,o),warn:Af("warn",n,o),info:Af("info",n,o),debug:Af("debug",n,o)};return mC.set(n,[o,a]),a}const Ir=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);let Gq=class Bl{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const a=o?$t(o):console;function u(){return io(this,arguments,function*(){var h,d,m,y;if(r)throw new qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var E=!0,C=ro(Vq(e,n)),A;A=yield Ce(C.next()),h=A.done,!h;E=!0){y=A.value,E=!1;const x=y;if(!S)if(x.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ce(JSON.parse(x.data))}catch(M){throw a.error("Could not parse message into JSON:",x.data),a.error("From chunk:",x.raw),M}}}catch(x){d={error:x}}finally{try{!E&&!h&&(m=C.return)&&(yield Ce(m.call(C)))}finally{if(d)throw d.error}}S=!0}catch(x){if(Sv(x))return yield Ce(void 0);throw x}finally{S||n.abort()}})}return new Bl(u,n,o)}static fromReadableStream(e,n,o){let r=!1;function a(){return io(this,arguments,function*(){var h,d,m,y;const S=new ch,E=UM(e);try{for(var C=!0,A=ro(E),x;x=yield Ce(A.next()),h=x.done,!h;C=!0){y=x.value,C=!1;const M=y;for(const I of S.decode(M))yield yield Ce(I)}}catch(M){d={error:M}}finally{try{!C&&!h&&(m=A.return)&&(yield Ce(m.call(A)))}finally{if(d)throw d.error}}for(const M of S.flush())yield yield Ce(M)})}function u(){return io(this,arguments,function*(){var h,d,m,y;if(r)throw new qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var E=!0,C=ro(a()),A;A=yield Ce(C.next()),h=A.done,!h;E=!0){y=A.value,E=!1;const x=y;S||x&&(yield yield Ce(JSON.parse(x)))}}catch(x){d={error:x}}finally{try{!E&&!h&&(m=C.return)&&(yield Ce(m.call(C)))}finally{if(d)throw d.error}}S=!0}catch(x){if(Sv(x))return yield Ce(void 0);throw x}finally{S||n.abort()}})}return new Bl(u,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=o.next();e.push(u),n.push(u)}return a.shift()}});return[new Bl(()=>r(e),this.controller,this.client),new Bl(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return LM({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:a}=await n.next();if(a)return o.close();const u=Hy(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}};function Vq(t,e){return io(this,arguments,function*(){var o,r,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new qn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new qn("Attempted to iterate over a response with no body");const c=new qq,h=new ch,d=UM(t.body);try{for(var m=!0,y=ro(zq(d)),S;S=yield Ce(y.next()),o=S.done,!o;m=!0){u=S.value,m=!1;const E=u;for(const C of h.decode(E)){const A=c.decode(C);A&&(yield yield Ce(A))}}}catch(E){r={error:E}}finally{try{!m&&!o&&(a=y.return)&&(yield Ce(a.call(y)))}finally{if(r)throw r.error}}for(const E of h.flush()){const C=c.decode(E);C&&(yield yield Ce(C))}})}function zq(t){return io(this,arguments,function*(){var n,o,r,a;let u=new Uint8Array;try{for(var c=!0,h=ro(t),d;d=yield Ce(h.next()),n=d.done,!n;c=!0){a=d.value,c=!1;const m=a;if(m==null)continue;const y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?Hy(m):m;let S=new Uint8Array(u.length+y.length);S.set(u),S.set(y,u.length),u=S;let E;for(;(E=Hq(u))!==-1;)yield yield Ce(u.slice(0,E)),u=u.slice(E)}}catch(m){o={error:m}}finally{try{!c&&!n&&(r=h.return)&&(yield Ce(r.call(h)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ce(u))})}let qq=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=Jq(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function Jq(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Kq(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var c;if(e.options.stream)return $t(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Gq.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),d=(c=h?.split(";")[0])===null||c===void 0?void 0:c.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return $t(t).debug(`[${o}] response parsed`,Ir({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}let Yq=class zM extends Promise{constructor(e,n,o=Kq){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new zM(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};const qM=Symbol("brand.privateNullableHeaders");function*jq(t){if(!t)return;if(qM in t){const{values:o,nulls:r}=t;yield*o.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():uC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=uC(o[1])?o[1]:[o[1]];let u=!1;for(const c of a)c!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,c])}}const yg=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[a,u]of jq(o)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),u===null?(e.delete(a),n.add(c)):(e.append(a,u),n.delete(c))}}return{[qM]:!0,values:e,nulls:n}};const _g=t=>{var e,n,o,r,a,u;if(typeof globalThis.process<"u")return(o=(n=(e=_F)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||u===void 0?void 0:u.trim()};var JM;class fh{constructor(e){var n,o,r,a,u,c,h,d=e===void 0?{}:e,{baseURL:m=_g("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=_g("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:S="v1beta"}=d,E=wd(d,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:y,apiVersion:S},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(o=C.timeout)!==null&&o!==void 0?o:fh.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const A="warn";this.logLevel=A,this.logLevel=(u=(a=pC(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:pC(_g("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:A,this.fetchOptions=C.fetchOptions,this.maxRetries=(c=C.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=C.fetch)!==null&&h!==void 0?h:xq(),this.encoder=Nq,this._options=C,this.apiKey=y,this.apiVersion=S}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return yg([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new qn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ea}`}defaultIdempotencyKey(){return`stainless-node-retry-${hq()}`}makeStatusError(e,n,o,r){return Jn.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,a=mq(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return yq(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Yq(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,a,u;const c=await e,h=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=h),await this.prepareOptions(c);const{req:d,url:m,timeout:y}=await this.buildRequest(c,{retryCount:h-n});await this.prepareRequest(d,{url:m,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=o===void 0?"":`, retryOf: ${o}`,C=Date.now();if($t(this).debug(`[${S}] sending request`,Ir({retryOfRequestLogID:o,method:c.method,url:m,options:c,headers:d.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new wv;const A=new AbortController,x=await this.fetchWithTimeout(m,d,y,A).catch(Ev),M=Date.now();if(x instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((u=c.signal)===null||u===void 0)&&u.aborted)throw new wv;const D=Sv(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return $t(this).info(`[${S}] connection ${D?"timed out":"failed"} - ${N}`),$t(this).debug(`[${S}] connection ${D?"timed out":"failed"} (${N})`,Ir({retryOfRequestLogID:o,url:m,durationMs:M-C,message:x.message})),this.retryRequest(c,n,o??S);throw $t(this).info(`[${S}] connection ${D?"timed out":"failed"} - error; no more retries left`),$t(this).debug(`[${S}] connection ${D?"timed out":"failed"} (error; no more retries left)`,Ir({retryOfRequestLogID:o,url:m,durationMs:M-C,message:x.message})),D?new xM:new uh({cause:x})}const I=`[${S}${E}] ${d.method} ${m} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${M-C}ms`;if(!x.ok){const N=await this.shouldRetry(x);if(n&&N){const J=`retrying, ${n} attempts remaining`;return await Mq(x.body),$t(this).info(`${I} - ${J}`),$t(this).debug(`[${S}] response error (${J})`,Ir({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:M-C})),this.retryRequest(c,n,o??S,x.headers)}const D=N?"error; no more retries left":"error; not retryable";$t(this).info(`${I} - ${D}`);const L=await x.text().catch(J=>Ev(J).message),U=Eq(L),O=U?void 0:L;throw $t(this).debug(`[${S}] response error (${D})`,Ir({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,message:O,durationMs:Date.now()-C})),this.makeStatusError(x.status,U,O,x.headers)}return $t(this).info(I),$t(this).debug(`[${S}] response start`,Ir({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:M-C})),{response:x,options:c,controller:A,requestLogID:S,retryOfRequestLogID:o,startTime:C}}async fetchWithTimeout(e,n,o,r){const a=n||{},{signal:u,method:c}=a,h=wd(a,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),o),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},m?{duplex:"half"}:{}),{method:"GET"}),h);c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var a;let u;const c=r?.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(u=d)}const h=r?.get("retry-after");if(h&&!u){const d=parseFloat(h);Number.isNaN(d)?u=Date.parse(h)-Date.now():u=d*1e3}if(!(u&&0<=u&&u<60*1e3)){const d=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,d)}return await bq(u),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,a;const u=Object.assign({},e),{method:c,path:h,query:d,defaultBaseURL:m}=u,y=this.buildURL(h,d,m);"timeout"in u&&Sq("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:E}=this.buildBody({options:u}),C=await this.buildHeaders({options:e,method:c,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:C},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:y,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=yg([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Aq()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=yg([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Rq(e)}:this.encoder({body:e,headers:o})}}fh.DEFAULT_TIMEOUT=6e4;class Ct extends fh{constructor(){super(...arguments),this.interactions=new VM(this)}}JM=Ct;Ct.GeminiNextGenAPIClient=JM;Ct.GeminiNextGenAPIClientError=qn;Ct.APIError=Jn;Ct.APIConnectionError=uh;Ct.APIConnectionTimeoutError=xM;Ct.APIUserAbortError=wv;Ct.NotFoundError=IM;Ct.ConflictError=DM;Ct.RateLimitError=PM;Ct.BadRequestError=RM;Ct.AuthenticationError=MM;Ct.InternalServerError=kM;Ct.PermissionDeniedError=NM;Ct.UnprocessableEntityError=OM;Ct.toFile=kq;Ct.Interactions=VM;function Xq(t,e){const n={},o=p(t,["name"]);return o!=null&&g(n,["_url","name"],o),n}function Wq(t,e){const n={},o=p(t,["name"]);return o!=null&&g(n,["_url","name"],o),n}function Qq(t,e){const n={},o=p(t,["sdkHttpResponse"]);return o!=null&&g(n,["sdkHttpResponse"],o),n}function Zq(t,e){const n={},o=p(t,["sdkHttpResponse"]);return o!=null&&g(n,["sdkHttpResponse"],o),n}function e3(t,e,n){const o={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=p(t,["learningRateMultiplier"]);if(u!=null&&g(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const h=p(t,["learningRate"]);if(e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","learningRate"],h),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function t3(t,e,n){const o={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=p(t,["validationDataset"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec"],gC(E))}else if(r==="PREFERENCE_TUNING"){const E=p(t,["validationDataset"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec"],gC(E))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=p(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const E=p(t,["epochCount"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(c==="PREFERENCE_TUNING"){const E=p(t,["epochCount"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=p(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(h==="PREFERENCE_TUNING"){const E=p(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const E=p(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(d==="PREFERENCE_TUNING"){const E=p(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let m=p(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=p(t,["adapterSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(m==="PREFERENCE_TUNING"){const E=p(t,["adapterSize"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=p(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const S=p(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function n3(t,e){const n={},o=p(t,["baseModel"]);o!=null&&g(n,["baseModel"],o);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&h3(a);const u=p(t,["config"]);return u!=null&&e3(u,n),n}function o3(t,e){const n={},o=p(t,["baseModel"]);o!=null&&g(n,["baseModel"],o);const r=p(t,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const a=p(t,["trainingDataset"]);a!=null&&p3(a,n,e);const u=p(t,["config"]);return u!=null&&t3(u,n,e),n}function i3(t,e){const n={},o=p(t,["name"]);return o!=null&&g(n,["_url","name"],o),n}function r3(t,e){const n={},o=p(t,["name"]);return o!=null&&g(n,["_url","name"],o),n}function s3(t,e,n){const o={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),o}function a3(t,e,n){const o={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),o}function l3(t,e){const n={},o=p(t,["config"]);return o!=null&&s3(o,n),n}function u3(t,e){const n={},o=p(t,["config"]);return o!=null&&a3(o,n),n}function c3(t,e){const n={},o=p(t,["sdkHttpResponse"]);o!=null&&g(n,["sdkHttpResponse"],o);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>KM(c))),g(n,["tuningJobs"],u)}return n}function f3(t,e){const n={},o=p(t,["sdkHttpResponse"]);o!=null&&g(n,["sdkHttpResponse"],o);const r=p(t,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const a=p(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>Av(c))),g(n,["tuningJobs"],u)}return n}function d3(t,e){const n={},o=p(t,["name"]);o!=null&&g(n,["model"],o);const r=p(t,["name"]);return r!=null&&g(n,["endpoint"],r),n}function h3(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=p(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),g(n,["examples","examples"],r)}return n}function p3(t,e,n){const o={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function KM(t,e){const n={},o=p(t,["sdkHttpResponse"]);o!=null&&g(n,["sdkHttpResponse"],o);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],sM(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["tuningTask","completeTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["description"]);m!=null&&g(n,["description"],m);const y=p(t,["baseModel"]);y!=null&&g(n,["baseModel"],y);const S=p(t,["_self"]);return S!=null&&g(n,["tunedModel"],d3(S)),n}function Av(t,e){const n={},o=p(t,["sdkHttpResponse"]);o!=null&&g(n,["sdkHttpResponse"],o);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["state"]);a!=null&&g(n,["state"],sM(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const h=p(t,["endTime"]);h!=null&&g(n,["endTime"],h);const d=p(t,["updateTime"]);d!=null&&g(n,["updateTime"],d);const m=p(t,["error"]);m!=null&&g(n,["error"],m);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const S=p(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const E=p(t,["tunedModel"]);E!=null&&g(n,["tunedModel"],E);const C=p(t,["preTunedModel"]);C!=null&&g(n,["preTunedModel"],C);const A=p(t,["supervisedTuningSpec"]);A!=null&&g(n,["supervisedTuningSpec"],A);const x=p(t,["preferenceOptimizationSpec"]);x!=null&&g(n,["preferenceOptimizationSpec"],x);const M=p(t,["tuningDataStats"]);M!=null&&g(n,["tuningDataStats"],M);const I=p(t,["encryptionSpec"]);I!=null&&g(n,["encryptionSpec"],I);const N=p(t,["partnerModelTuningSpec"]);N!=null&&g(n,["partnerModelTuningSpec"],N);const D=p(t,["customBaseModel"]);D!=null&&g(n,["customBaseModel"],D);const L=p(t,["experiment"]);L!=null&&g(n,["experiment"],L);const U=p(t,["labels"]);U!=null&&g(n,["labels"],U);const O=p(t,["outputUri"]);O!=null&&g(n,["outputUri"],O);const q=p(t,["pipelineJob"]);q!=null&&g(n,["pipelineJob"],q);const J=p(t,["serviceAccount"]);J!=null&&g(n,["serviceAccount"],J);const j=p(t,["tunedModelDisplayName"]);j!=null&&g(n,["tunedModelDisplayName"],j);const W=p(t,["veoTuningSpec"]);return W!=null&&g(n,["veoTuningSpec"],W),n}function m3(t,e){const n={},o=p(t,["sdkHttpResponse"]);o!=null&&g(n,["sdkHttpResponse"],o);const r=p(t,["name"]);r!=null&&g(n,["name"],r);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(t,["done"]);u!=null&&g(n,["done"],u);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function gC(t,e){const n={},o=p(t,["gcsUri"]);o!=null&&g(n,["validationDatasetUri"],o);const r=p(t,["vertexDatasetResource"]);return r!=null&&g(n,["validationDatasetUri"],r),n}class g3 extends vi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ns(di.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:hv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=r3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>Av(m))}else{const d=i3(e);return c=fe("{name}",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>KM(m))}}async listInternal(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=u3(e);return c=fe("tuningJobs",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=f3(m),S=new GT;return Object.assign(S,y),S})}else{const d=l3(e);return c=fe("tunedModels",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=c3(m),S=new GT;return Object.assign(S,y),S})}}async cancel(e){var n,o,r,a;let u,c="",h={};if(this.apiClient.isVertexAI()){const d=Wq(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=Zq(m),S=new VT;return Object.assign(S,y),S})}else{const d=Xq(e);return c=fe("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,u=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:m.headers},S})),u.then(m=>{const y=Qq(m),S=new VT;return Object.assign(S,y),S})}}async tuneInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=o3(e,e);return a=fe("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>Av(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=n3(e);return a=fe("tunedModels",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>m3(h))}}}class v3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const y3=1024*1024*8,_3=3,S3=1e3,E3=2,Cd="x-goog-upload-status";async function b3(t,e,n){var o;const r=await YM(t,e,n),a=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Cd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function w3(t,e,n){var o;const r=await YM(t,e,n),a=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Cd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=eM(a),c=new Py;return Object.assign(c,u),c}async function YM(t,e,n){var o,r;let a=0,u=0,c=new pv(new Response),h="upload";for(a=t.size;u<a;){const d=Math.min(y3,a-u),m=t.slice(u,u+d);u+d>=a&&(h+=", finalize");let y=0,S=S3;for(;y<_3&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(d)}}}),!(!((o=c?.headers)===null||o===void 0)&&o[Cd]));)y++,await C3(S),S=S*E3;if(u+=d,((r=c?.headers)===null||r===void 0?void 0:r[Cd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function T3(t){return{size:t.size,type:t.type}}function C3(t){return new Promise(e=>setTimeout(e,t))}class A3{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b3(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await w3(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T3(e)}}class x3{create(e,n,o){return new R3(e,n,o)}}class R3{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const vC="x-goog-api-key";class M3{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(vC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vC,this.apiKey)}}}const N3="gl-node/";class I3{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ct({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=wF(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new M3(this.apiKey);this.apiClient=new bz({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:N3+"web",uploader:new A3,downloader:new v3}),this.models=new $z(this.apiClient),this.live=new kz(this.apiClient,r,new x3),this.batches=new QH(this.apiClient),this.chats=new O$(this.models,this.apiClient),this.caches=new N$(this.apiClient),this.files=new V$(this.apiClient),this.operations=new Gz(this.apiClient),this.authTokens=new iq(this.apiClient),this.tunings=new g3(this.apiClient),this.fileSearchStores=new dq(this.apiClient)}}let Sg=class extends Error{};const jM=["gemini-2.5-flash-image","gemini-3-pro-image-preview"];class da{static getApiKey=null;static setApiKey=null;static getGenAI(){const e=this.getApiKey?.()||"";if(!e)throw new Sg("No Google API key set");return new I3({apiKey:e})}static async txt2txt(e){try{const n=this.getGenAI(),o={},r=await n.models.generateContent({model:"gemini-2.5-flash",contents:e,config:o});return console.log("RES TEXT",r.text),r.text}catch(n){console.error("Goo Err Response",n);const o=n?.message||"";if(o.includes("API key not valid")||o.includes("API_KEY_INVALID")||n instanceof Sg)return this.showKeyPromptWindow(),null;throw n}}static async img2img(e,n=jM[0],o){try{const r=this.getGenAI(),a=[{text:e}];if(o?.length)for(const m of o)!m?.rawBase64||!m?.mime||(m.description&&a.push({text:m.description}),a.push({inlineData:{data:m.rawBase64,mimeType:m.mime}}));const u={model:n,contents:a,config:{imageConfig:{aspectRatio:"9:16",response_modalities:["Image"]}}};console.log("Gemini Payload",u);const c=await r.models.generateContent(u);console.log("GEMINI RES",c);const d=(c?.candidates??[])[0]?.content?.parts??[];for(const m of d)if(m.inlineData){const y=m.inlineData.data,S=m.inlineData.mimeType||"image/png";return{base64Obj:{rawBase64:y,mime:S},id:c.responseId}}return null}catch(r){const a=r?.message||"";if(a.includes("API key not valid")||a.includes("API_KEY_INVALID")||r instanceof Sg)return this.showKeyPromptWindow(),null;throw console.error("img2img error",r),r}}static showKeyPromptWindow(){const e=window.prompt("Your Google API key is missing or invalid. Please enter a valid key:");e?this.setApiKey?.(e):console.warn("User did not provide a valid API key.")}static async saveResultImage(e,n){return e&&e.base64Obj?.rawBase64?await Yr.fromBase64({rawBase64:e.base64Obj.rawBase64,mime:e.base64Obj.mime},n,`${e.id}.png`):(console.warn("No valid image returned from GoogleAI.img2img"),null)}}async function D3(t,e){const n=Math.floor(Date.now()/1e3),o={alg:"HS256",typ:"JWT"},r={iss:t,exp:n+1800,nbf:n-5},a=Eg(JSON.stringify(o)),u=Eg(JSON.stringify(r)),c=`${a}.${u}`,h=await crypto.subtle.importKey("raw",new TextEncoder().encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),d=await crypto.subtle.sign("HMAC",h,new TextEncoder().encode(c));return`${c}.${Eg(d)}`}function Eg(t){let e;typeof t=="string"?e=new TextEncoder().encode(t):e=new Uint8Array(t);let n="";for(let o=0;o<e.length;o++)n+=String.fromCharCode(e[o]);return btoa(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class ut{static getKeysDict=null;static videoModels=["kling-v1","kling-v1-5","kling-v1-6","kling-v2-master","kling-v2-1","kling-v2-1-master","kling-v2-5-turbo","kling-v2-6"];static options={img2video:{duration:{five:"5",ten:"10"},mode:{std:"std",pro:"pro"},model:{v1:"kling-v1",v1_5:"kling-v1-5",v1_6:"kling-v1-6",v2_0m:"kling-v2-master",v2_1:"kling-v2-1",v2_1m:"kling-v2-1-master",v2_5:"kling-v2-5-turbo",v2_6:"kling-v2-6"}},motion_control:{mode:{std:"std",pro:"pro"},character_orientation:{image:"image",video:"video"},keep_original_sound:{yes:"yes",no:"no"}}};static async getToken(){const e=this.getKeysDict?.();if(!e)throw new Error("No Kling API keys provided or getKeysDict not set");return await D3(e.accessKey,e.secretKey)}static async postToKling(e,n){const r=`http://localhost:4000/proxy/${encodeURIComponent(e)}`,a=await this.getToken();console.log(`Kling API request to ${e}:`,n);const u=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!u.ok){const h=await u.text();throw new Error(`Kling API request failed: ${h}`)}const c=await u.json();return console.log(`Kling API response from ${e}:`,c),c}static async txt2video(e,n="kling-v1"){const o={model_name:n,mode:"std",duration:"5",prompt:e,cfg_scale:.5};return{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/text2video",o)).data.task_id,workflow:"text2video"}}static async img2video(e){const{image:n,prompt:o,model:r=ut.options.img2video.model.v2_6,duration:a=ut.options.img2video.duration,mode:u=ut.options.img2video.mode.std,cfg_scale:c=.5,static_mask:h,dynamic_masks:d,image_tail:m,camera_control:y,voice_list:S,sound:E="off",negative_prompt:C,callback_url:A,external_task_id:x}=e,M={model_name:r,image:n,prompt:o,duration:a,mode:u,cfg_scale:c,sound:E};return h&&(M.static_mask=h),d&&(M.dynamic_masks=d),m&&(M.image_tail=m),y&&(M.camera_control=y),S&&(M.voice_list=S),C&&(M.negative_prompt=C),A&&(M.callback_url=A),x&&(M.external_task_id=x),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/image2video",M)).data.task_id,workflow:"image2video"}}static async motionControl(e){const{image:n,video_url:o,prompt:r,mode:a=ut.options.motion_control.mode.std,character_orientation:u,keep_original_sound:c=ut.options.motion_control.keep_original_sound.yes,callback_url:h,external_task_id:d}=e,m={image_url:n,video_url:o,character_orientation:u,mode:a,keep_original_sound:c};return r&&(m.prompt=r),h&&(m.callback_url=h),d&&(m.external_task_id=d),{id:(await this.postToKling("https://api-singapore.klingai.com/v1/videos/motion-control",m)).data.task_id,workflow:"motion-control"}}static async getStatus(e,n="text2video"){const o=`https://api-singapore.klingai.com/v1/videos/${n}/${e}`,a=`http://localhost:4000/proxy/${encodeURIComponent(o)}`,u=await this.getToken();console.log("KLING_AI Get Status sent");const c=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});if(!c.ok){const d=await c.text();throw new Error(`Task status request failed: ${d}`)}if((c.headers.get("content-type")||"").includes("application/json")){const d=await c.json();return console.log("KLING check status:",d),{status:d?.data?.task_status||"unknown",status_msg:d?.data?.task_status_msg||"",url:d?.data?.task_result?.videos?.[0]?.url||null}}}}const xv={KLING:"kling",GPT:"gpt",GOOGLE:"google"};async function O3(t){try{console.log("[tmpfiles] Uploading:",t.name);const e=new FormData;e.append("file",t);const n=await fetch("https://tmpfiles.org/api/v1/upload",{method:"POST",body:e});if(!n.ok)throw new Error(`HTTP ${n.status}`);const o=await n.json();console.log("[tmpfiles] Response:",o);const r=o?.data?.url;if(!r)throw new Error("No URL returned");return r.replace("tmpfiles.org/","tmpfiles.org/dl/")}catch(e){throw console.error("[tmpfiles] Upload failed:",e),e}}async function P3(t,e){try{if(e&&((r,a)=>{const u=r.name.toLowerCase(),c=decodeURIComponent(a.split("/").pop()||"").toLowerCase();return u===c})(t,e))return console.log("[ensureUploaded] Existing URL is valid:",e),e;console.log("[ensureUploaded] Uploading file because URL is missing or invalid:",t.name);const o=await O3(t);return console.log("[ensureUploaded] Uploaded URL:",o),o}catch(n){throw console.error("[ensureUploaded] Error ensuring file upload:",n),n}}class jr{handle;parent;urlObject=null;web_url="";constructor(e,n){this.handle=e,this.parent=n}async getUrlObject(){if(!this.urlObject)try{const e=await this.handle.getFile();this.urlObject=URL.createObjectURL(e)}catch(e){console.error("Failed to create object URL for video:",e),this.urlObject=""}return this.urlObject}revokeUrl(){this.urlObject&&(URL.revokeObjectURL(this.urlObject),this.urlObject=null)}static async fromUrl(e,n){try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch video: ${o.statusText}`);const r=await o.blob(),a=e.split("/"),u=a[a.length-1].split("?")[0],c=await n.getFileHandle(u,{create:!0}),h=await c.createWritable();return await h.write(r),await h.close(),new jr(c,n)}catch(o){throw console.error("Failed to create LocalVideo from URL:",o),o}}async delete(){try{this.revokeUrl(),await this.parent.removeEntry(this.handle.name)}catch(e){throw console.error("Failed to delete video file:",e),e}}static async fromBase64(e,n,o){try{const r=atob(e),a=r.length,u=new Uint8Array(a);for(let d=0;d<a;d++)u[d]=r.charCodeAt(d);const c=await n.getFileHandle(o,{create:!0}),h=await c.createWritable();return await h.write(u),await h.close(),new jr(c,n)}catch(r){throw console.error("Failed to create LocalVideo from Base64:",r),r}}async getWebUrl(){return console.log("web_url",this.web_url),this.web_url=await P3(await this.handle.getFile(),this.web_url),this.web_url}}class yC{shot;id;is_checking_status=!1;_status_log="";constructor(e,n){this.shot=e,this.id=n,mi(this)}update(e){const o={...this.data||{},...e};this.shot.shotJson?.updateField(`tasks/${this.id}`,o)}log(){console.log({task:zr(this),data:zr(this.data)})}delete(){this.shot.removeTask(this)}get data(){return this.shot.shotJson?.getField(`tasks/${this.id}`)}finish_checking(){Re(()=>{this.is_checking_status=!1}),this._status_log=""}async check_status(e=30,n=5e3){if(this.data.provider===xv.KLING){Re(()=>{this.is_checking_status=!0,this._status_log="start checking"}),console.log("started checking status");for(let o=0;o<=e;o++){try{console.log("new attempt");const r=await ut.getStatus(this.id,this.data.workflow);if(console.log("status",r),this.update(r),r?.status==="succeed"&&r.url){await this.downloadResults(),this.finish_checking();return}if(r?.status==="failed"){console.warn(`Task ${this.id} failed.`),this.finish_checking();return}}catch(r){console.error("Status check failed:",r)}o<e&&(Re(()=>{this._status_log=`(attempt ${o+1}/${e})`}),await new Promise(r=>setTimeout(r,n)))}console.warn(`Task ${this.id} did not finish after ${e} retries.`),this.finish_checking()}}async downloadResults(){const e=this.data?.url,n=this.shot.genVideoFolder;if(!e)return console.warn("No URL found to download."),null;if(!n)return console.warn("No results folder available to save file."),null;try{const o=await jr.fromUrl(e,n);return console.log(`Downloaded result video: ${o.handle.name}`),Re(()=>{this.shot.videos.push(o)}),o}catch(o){return console.error("Failed to download Kling task result:",o),null}}}class _C{folder;scene;shotJson=null;images=[];videos=[];ref_videos=[];srcImage=null;resultsFolder=null;genVideoFolder=null;refVideoFolder=null;is_generating=!1;selected_art=null;tasks=[];is_submitting_video=!1;kling_motion_video=null;constructor(e,n){this.folder=e,this.scene=n,mi(this)}async load(){try{this.shotJson=await Kr.create(this.folder,"shotinfo.json"),this.images=[],this.srcImage=null;try{this.resultsFolder=await this.folder.getDirectoryHandle("results",{create:!0});for await(const[e,n]of this.resultsFolder.entries())if(n.kind==="file"){const o=new Yr(n,this.resultsFolder);this.images.push(o),this.shotJson.data?.srcImage&&e===this.shotJson.data.srcImage&&(this.srcImage=o)}}catch(e){console.warn("No results folder found or failed to read:",e),this.resultsFolder=null}try{this.genVideoFolder=await this.folder.getDirectoryHandle("genVideo",{create:!0});for await(const[,e]of this.genVideoFolder.entries())if(e.kind==="file"){const n=new jr(e,this.genVideoFolder);this.videos.push(n)}}catch(e){console.warn("No genVideo folder found or failed to read:",e),this.genVideoFolder=null}try{this.refVideoFolder=await this.folder.getDirectoryHandle("refVideo",{create:!0});for await(const[e,n]of this.refVideoFolder.entries())if(n.kind==="file"){const o=new jr(n,this.refVideoFolder);this.ref_videos.push(o),this.shotJson.data?.kling_motion_video&&e===this.shotJson.data.kling_motion_video&&(this.kling_motion_video=o)}}catch(e){console.warn("No genVideo folder found or failed to read:",e),this.genVideoFolder=null}this.loadTasks()}catch(e){console.error("Error loading shot:",this.folder.name,e),this.shotJson=null,this.images=[],this.srcImage=null,this.resultsFolder=null}}loadTasks(){const e=this.shotJson?.getField("tasks");Re(()=>{if(this.tasks=[],!(!e||typeof e!="object"))for(const n of Object.keys(e))this.tasks.push(new yC(this,n))})}addTask(e,n){const o=new yC(this,e);return Re(()=>{this.tasks.push(o)}),o.update(n),o}removeTask(e){Re(()=>{this.tasks=this.tasks.filter(o=>o!==e)});const n=this.shotJson?.getField("tasks")??{};delete n[e.id],this.shotJson?.updateField("tasks",n)}setSrcImage(e){this.srcImage=e,this.shotJson?.data&&(this.shotJson.data.srcImage=e?.handle.name,this.shotJson.save())}async delete(){if(!this.scene?.folder){console.error("Cannot delete shot: scene folder not set");return}try{await this.scene.folder.removeEntry(this.folder.name,{recursive:!0}),Re(()=>{this.scene.shots=this.scene.shots.filter(e=>e!==this)})}catch(e){console.error("Failed to delete shot:",e)}}addImage(e){this.images.push(e),this.srcImage||this.setSrcImage(e)}removeImage(e){this.images=this.images.filter(n=>n!==e),this.srcImage===e&&this.setSrcImage(null)}removeVideo(e){this.videos=this.videos.filter(n=>n!==e)}removeReferenceVideo(e){this.ref_videos=this.ref_videos.filter(n=>n!==e)}setKlingMotionReferenceVideo(e){this.kling_motion_video=e,this.shotJson?.updateField("kling_motion_video",e.handle.name)}async GenerateVideo(){Re(()=>{this.is_submitting_video=!0});let e=this.shotJson?.data.prompt||"";try{const n=this.scene.project.workflows.generate_video_kling;if(this.srcImage){const o=(await this.srcImage.getBase64()).rawBase64,r=await ut.img2video({image:o,prompt:e,model:n.model,mode:n.mode,duration:n.duration}),a=this.addTask(r.id,{provider:xv.KLING,workflow:r.workflow});await new Promise(u=>setTimeout(u,100)),console.log("created_task"),a.check_status()}}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{Re(()=>{this.is_submitting_video=!1})}}async GenerateVideo_KlingMotionControl(){Re(()=>{this.is_submitting_video=!0});let e=this.shotJson?.data.prompt||"";try{const n=this.scene.project.workflows.kling_motion_control;if(this.srcImage&&this.kling_motion_video){const o=(await this.srcImage.getBase64()).rawBase64,r=await this.kling_motion_video.getWebUrl(),a=await ut.motionControl({image:o,video_url:r,prompt:e,mode:n.mode,character_orientation:n.character_orientation,keep_original_sound:n.keep_original_sound}),u=this.addTask(a.id,{provider:xv.KLING,workflow:a.workflow});await new Promise(c=>setTimeout(c,100)),u.check_status(),await new Promise(c=>setTimeout(c,2e3))}}catch(n){console.error("Submitting Video Generation Failed:",n)}finally{Re(()=>{this.is_submitting_video=!1})}}async GenerateImage(){Re(()=>{this.is_generating=!0});const e=this.getSkippedTags(),n=[];for(const r of this.scene.getTags())if(!e.includes(r.path))try{const a=await r.image.getBase64();n.push({rawBase64:a.rawBase64,mime:a.mime,description:r.path})}catch(a){console.warn("Failed to load tag image:",r.path,a)}let o=this.shotJson?.data.prompt||"";try{const r=await da.img2img(o||"",this.scene.project.workflows.generate_shot_image.model,n),a=await da.saveResultImage(r,this.resultsFolder);a&&this.addImage(a)}catch(r){console.error("GenerateImage failed:",r)}finally{Re(()=>{this.is_generating=!1})}}selectArt(e=null){Re(()=>{this.selected_art=e})}async saveGoogleResultImage(e,n=!1){const o=await da.saveResultImage(e,this.resultsFolder);o&&(this.addImage(o),n&&this.selectArt(o))}getSkippedTags(){return this.shotJson?.data?.skippedTags||[]}setTagSkipped(e,n){this.shotJson?.data&&(Array.isArray(this.shotJson.data.skippedTags)||(this.shotJson.data.skippedTags=[]),Re(()=>{const o=this.shotJson.data.skippedTags;n?o.includes(e)||o.push(e):this.shotJson.data.skippedTags=o.filter(r=>r!==e)}),this.shotJson.save())}log(){console.log(zr(this))}}function Te(t,e,n,o,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function V(t,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(t):o?o.value:e.get(t)}let XM=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return XM=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};function Rv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Mv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Se extends Error{}class Pt extends Se{constructor(e,n,o,r){super(`${Pt.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,o){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new dh({message:o,cause:Mv(n)});const a=n?.error;return e===400?new WM(e,a,o,r):e===401?new QM(e,a,o,r):e===403?new ZM(e,a,o,r):e===404?new eN(e,a,o,r):e===409?new tN(e,a,o,r):e===422?new nN(e,a,o,r):e===429?new oN(e,a,o,r):e>=500?new iN(e,a,o,r):new Pt(e,a,o,r)}}class Fn extends Pt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class dh extends Pt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class $y extends dh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class WM extends Pt{}class QM extends Pt{}class ZM extends Pt{}class eN extends Pt{}class tN extends Pt{}class nN extends Pt{}class oN extends Pt{}class iN extends Pt{}class rN extends Se{constructor(){super("Could not parse response content as the length limit was reached")}}class sN extends Se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Fl extends Error{constructor(e){super(e)}}const k3=/^[a-z][a-z0-9+.-]*:/i,L3=t=>k3.test(t);let Zt=t=>(Zt=Array.isArray,Zt(t)),SC=Zt;function aN(t){return typeof t!="object"?{}:t??{}}function U3(t){if(!t)return!0;for(const e in t)return!1;return!0}function B3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const F3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Se(`${t} must be an integer`);if(e<0)throw new Se(`${t} must be a positive integer`);return e},H3=t=>{try{return JSON.parse(t)}catch{return}},ku=t=>new Promise(e=>setTimeout(e,t)),ta="6.10.0",$3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function G3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const V3=()=>{const t=G3();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ta,"X-Stainless-OS":bC(Deno.build.os),"X-Stainless-Arch":EC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ta,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ta,"X-Stainless-OS":bC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":EC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=z3();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ta,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ta,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function z3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,a=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const EC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",bC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let wC;const q3=()=>wC??(wC=V3());function J3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lN(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function uN(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return lN({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function cN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function K3(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Y3=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),fN="RFC3986",dN=t=>String(t),TC={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:dN},j3="RFC1738";let Nv=(t,e)=>(Nv=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Nv(t,e));const yo=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),wg=1024,X3=(t,e,n,o,r)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let u="";for(let c=0;c<a.length;c+=wg){const h=a.length>=wg?a.slice(c,c+wg):a,d=[];for(let m=0;m<h.length;++m){let y=h.charCodeAt(m);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||r===j3&&(y===40||y===41)){d[d.length]=h.charAt(m);continue}if(y<128){d[d.length]=yo[y];continue}if(y<2048){d[d.length]=yo[192|y>>6]+yo[128|y&63];continue}if(y<55296||y>=57344){d[d.length]=yo[224|y>>12]+yo[128|y>>6&63]+yo[128|y&63];continue}m+=1,y=65536+((y&1023)<<10|h.charCodeAt(m)&1023),d[d.length]=yo[240|y>>18]+yo[128|y>>12&63]+yo[128|y>>6&63]+yo[128|y&63]}u+=d.join("")}return u};function W3(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function CC(t,e){if(Zt(t)){const n=[];for(let o=0;o<t.length;o+=1)n.push(e(t[o]));return n}return e(t)}const hN={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},pN=function(t,e){Array.prototype.push.apply(t,Zt(e)?e:[e])};let AC;const _t={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:X3,encodeValuesOnly:!1,format:fN,formatter:dN,indices:!1,serializeDate(t){return(AC??(AC=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Q3(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Tg={};function mN(t,e,n,o,r,a,u,c,h,d,m,y,S,E,C,A,x,M){let I=t,N=M,D=0,L=!1;for(;(N=N.get(Tg))!==void 0&&!L;){const j=N.get(t);if(D+=1,typeof j<"u"){if(j===D)throw new RangeError("Cyclic object value");L=!0}typeof N.get(Tg)>"u"&&(D=0)}if(typeof d=="function"?I=d(e,I):I instanceof Date?I=S?.(I):n==="comma"&&Zt(I)&&(I=CC(I,function(j){return j instanceof Date?S?.(j):j})),I===null){if(a)return h&&!A?h(e,_t.encoder,x,"key",E):e;I=""}if(Q3(I)||W3(I)){if(h){const j=A?e:h(e,_t.encoder,x,"key",E);return[C?.(j)+"="+C?.(h(I,_t.encoder,x,"value",E))]}return[C?.(e)+"="+C?.(String(I))]}const U=[];if(typeof I>"u")return U;let O;if(n==="comma"&&Zt(I))A&&h&&(I=CC(I,h)),O=[{value:I.length>0?I.join(",")||null:void 0}];else if(Zt(d))O=d;else{const j=Object.keys(I);O=m?j.sort(m):j}const q=c?String(e).replace(/\./g,"%2E"):String(e),J=o&&Zt(I)&&I.length===1?q+"[]":q;if(r&&Zt(I)&&I.length===0)return J+"[]";for(let j=0;j<O.length;++j){const W=O[j],re=typeof W=="object"&&typeof W.value<"u"?W.value:I[W];if(u&&re===null)continue;const oe=y&&c?W.replace(/\./g,"%2E"):W,ae=Zt(I)?typeof n=="function"?n(J,oe):J:J+(y?"."+oe:"["+oe+"]");M.set(t,D);const de=new WeakMap;de.set(Tg,M),pN(U,mN(re,ae,n,o,r,a,u,c,n==="comma"&&A&&Zt(I)?null:h,d,m,y,S,E,C,A,x,de))}return U}function Z3(t=_t){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||_t.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=fN;if(typeof t.format<"u"){if(!Nv(TC,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const o=TC[n];let r=_t.filter;(typeof t.filter=="function"||Zt(t.filter))&&(r=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in hN?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=_t.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:_t.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:_t.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:_t.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_t.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?_t.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:_t.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:_t.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:_t.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:_t.encodeValuesOnly,filter:r,format:n,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:_t.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:_t.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_t.strictNullHandling}}function e4(t,e={}){let n=t;const o=Z3(e);let r,a;typeof o.filter=="function"?(a=o.filter,n=a("",n)):Zt(o.filter)&&(a=o.filter,r=a);const u=[];if(typeof n!="object"||n===null)return"";const c=hN[o.arrayFormat],h=c==="comma"&&o.commaRoundTrip;r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);const d=new WeakMap;for(let S=0;S<r.length;++S){const E=r[S];o.skipNulls&&n[E]===null||pN(u,mN(n[E],E,c,h,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,d))}const m=u.join(o.delimiter);let y=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""}function t4(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let xC;function Gy(t){let e;return(xC??(e=new globalThis.TextEncoder,xC=e.encode.bind(e)))(t)}let RC;function MC(t){let e;return(RC??(e=new globalThis.TextDecoder,RC=e.decode.bind(e)))(t)}var pn,mn;class hh{constructor(){pn.set(this,void 0),mn.set(this,void 0),Te(this,pn,new Uint8Array),Te(this,mn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Gy(e):e;Te(this,pn,t4([V(this,pn,"f"),n]));const o=[];let r;for(;(r=n4(V(this,pn,"f"),V(this,mn,"f")))!=null;){if(r.carriage&&V(this,mn,"f")==null){Te(this,mn,r.index);continue}if(V(this,mn,"f")!=null&&(r.index!==V(this,mn,"f")+1||r.carriage)){o.push(MC(V(this,pn,"f").subarray(0,V(this,mn,"f")-1))),Te(this,pn,V(this,pn,"f").subarray(V(this,mn,"f"))),Te(this,mn,null);continue}const a=V(this,mn,"f")!==null?r.preceding-1:r.preceding,u=MC(V(this,pn,"f").subarray(0,a));o.push(u),Te(this,pn,V(this,pn,"f").subarray(r.index)),Te(this,mn,null)}return o}flush(){return V(this,pn,"f").length?this.decode(`
`):[]}}pn=new WeakMap,mn=new WeakMap;hh.NEWLINE_CHARS=new Set([`
`,"\r"]);hh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function n4(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function o4(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}const Ad={off:0,error:200,warn:300,info:400,debug:500},NC=(t,e,n)=>{if(t){if(B3(Ad,t))return t;Dt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ad))}`)}};function Hl(){}function xf(t,e,n){return!e||Ad[t]>Ad[n]?Hl:e[t].bind(e)}const i4={error:Hl,warn:Hl,info:Hl,debug:Hl};let IC=new WeakMap;function Dt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return i4;const o=IC.get(e);if(o&&o[0]===n)return o[1];const r={error:xf("error",e,n),warn:xf("warn",e,n),info:xf("info",e,n),debug:xf("debug",e,n)};return IC.set(e,[n,r]),r}const Dr=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var kl;class wo{constructor(e,n,o){this.iterator=e,kl.set(this,void 0),this.controller=n,Te(this,kl,o)}static fromSSEResponse(e,n,o){let r=!1;const a=o?Dt(o):console;async function*u(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of r4(e,n))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(m){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),m}if(d&&d.error)throw new Pt(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(m){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),m}if(h.event=="error")throw new Pt(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(Rv(h))return;throw h}finally{c||n.abort()}}return new wo(u,n,o)}static fromReadableStream(e,n,o){let r=!1;async function*a(){const c=new hh,h=cN(e);for await(const d of h)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*u(){if(r)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(Rv(h))return;throw h}finally{c||n.abort()}}return new wo(u,n,o)}[(kl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=o.next();e.push(u),n.push(u)}return a.shift()}});return[new wo(()=>r(e),this.controller,V(this,kl,"f")),new wo(()=>r(n),this.controller,V(this,kl,"f"))]}toReadableStream(){const e=this;let n;return lN({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:a}=await n.next();if(a)return o.close();const u=Gy(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){await n.return?.()}})}}async function*r4(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");const n=new a4,o=new hh,r=cN(t.body);for await(const a of s4(r))for(const u of o.decode(a)){const c=n.decode(u);c&&(yield c)}for(const a of o.flush()){const u=n.decode(a);u&&(yield u)}}async function*s4(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const o=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Gy(n):n;let r=new Uint8Array(e.length+o.length);r.set(e),r.set(o,e.length),e=r;let a;for(;(a=o4(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class a4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=l4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function l4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function gN(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{if(e.options.stream)return Dt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):wo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const y=await n.json();return vN(y,n)}return await n.text()})();return Dt(t).debug(`[${o}] response parsed`,Dr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}function vN(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var $l;class ph extends Promise{constructor(e,n,o=gN){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,$l.set(this,void 0),Te(this,$l,e)}_thenUnwrap(e){return new ph(V(this,$l,"f"),this.responsePromise,async(n,o)=>vN(e(await this.parseResponse(n,o),o),o.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(V(this,$l,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}$l=new WeakMap;var Rf;class Vy{constructor(e,n,o,r){Rf.set(this,void 0),Te(this,Rf,e),this.options=r,this.response=n,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await V(this,Rf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Rf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class u4 extends ph{constructor(e,n,o){super(e,n,async(r,a)=>new o(r,a.response,await gN(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class mh extends Vy{constructor(e,n,o,r){super(e,n,o,r),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class gt extends Vy{constructor(e,n,o,r){super(e,n,o,r),this.data=o.data||[],this.has_more=o.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...aN(this.options.query),after:n}}:null}}class xd extends Vy{constructor(e,n,o,r){super(e,n,o,r),this.data=o.data||[],this.has_more=o.has_more||!1,this.last_id=o.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...aN(this.options.query),after:e}}:null}}const yN=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function eu(t,e,n){return yN(),new File(t,e??"unknown_file",n)}function Xf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const zy=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",DC=async(t,e)=>Iv(t.body)?{...t,body:await _N(t.body,e)}:t,Xr=async(t,e)=>({...t,body:await _N(t.body,e)}),OC=new WeakMap;function c4(t){const e=typeof t=="function"?t:t.fetch,n=OC.get(e);if(n)return n;const o=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return OC.set(e,o),o}const _N=async(t,e)=>{if(!await c4(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([o,r])=>Dv(n,o,r))),n},SN=t=>t instanceof Blob&&"name"in t,f4=t=>typeof t=="object"&&t!==null&&(t instanceof Response||zy(t)||SN(t)),Iv=t=>{if(f4(t))return!0;if(Array.isArray(t))return t.some(Iv);if(t&&typeof t=="object"){for(const e in t)if(Iv(t[e]))return!0}return!1},Dv=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,eu([await n.blob()],Xf(n)));else if(zy(n))t.append(e,eu([await new Response(uN(n)).blob()],Xf(n)));else if(SN(n))t.append(e,n,Xf(n));else if(Array.isArray(n))await Promise.all(n.map(o=>Dv(t,e+"[]",o)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([o,r])=>Dv(t,`${e}[${o}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},EN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",d4=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&EN(t),h4=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function p4(t,e,n){if(yN(),t=await t,d4(t))return t instanceof File?t:eu([await t.arrayBuffer()],t.name);if(h4(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),eu(await Ov(r),e,n)}const o=await Ov(t);if(e||(e=Xf(t)),!n?.type){const r=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n={...n,type:r})}return eu(o,e,n)}async function Ov(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(EN(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(zy(t))for await(const n of t)e.push(...await Ov(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${m4(t)}`)}return e}function m4(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ye{constructor(e){this._client=e}}function bN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PC=Object.freeze(Object.create(null)),g4=(t=bN)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((m,y,S)=>{/[?#]/.test(y)&&(r=!0);const E=o[S];let C=(r?encodeURIComponent:t)(""+E);return S!==o.length&&(E==null||typeof E=="object"&&E.toString===Object.getPrototypeOf(Object.getPrototypeOf(E.hasOwnProperty??PC)??PC)?.toString)&&(C=E+"",a.push({start:m.length+y.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),m+y+(S===o.length?"":C)},""),c=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,y)=>m.start-y.start),a.length>0){let m=0;const y=a.reduce((S,E)=>{const C=" ".repeat(E.start-m),A="^".repeat(E.length);return m=E.start+E.length,S+C+A},"");throw new Se(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${y}`)}return u},ie=g4(bN);let wN=class extends ye{list(e,n={},o){return this._client.getAPIList(ie`/chat/completions/${e}/messages`,gt,{query:n,...o})}};function Rd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function qy(t){return t?.$brand==="auto-parseable-response-format"}function Lu(t){return t?.$brand==="auto-parseable-tool"}function v4(t,e){return!e||!TN(e)?{...t,choices:t.choices.map(n=>(CN(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Jy(t,e)}function Jy(t,e){const n=t.choices.map(o=>{if(o.finish_reason==="length")throw new rN;if(o.finish_reason==="content_filter")throw new sN;return CN(o.message.tool_calls),{...o,message:{...o.message,...o.message.tool_calls?{tool_calls:o.message.tool_calls?.map(r=>_4(e,r))??void 0}:void 0,parsed:o.message.content&&!o.message.refusal?y4(e,o.message.content):null}}});return{...t,choices:n}}function y4(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function _4(t,e){const n=t.tools?.find(o=>Rd(o)&&o.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Lu(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function S4(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(o=>Rd(o)&&o.function?.name===e.function.name);return Rd(n)&&(Lu(n)||n?.function.strict||!1)}function TN(t){return qy(t.response_format)?!0:t.tools?.some(e=>Lu(e)||e.type==="function"&&e.function.strict===!0)??!1}function CN(t){for(const e of t||[])if(e.type!=="function")throw new Se(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function E4(t){for(const e of t??[]){if(e.type!=="function")throw new Se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Md=t=>t?.role==="assistant",AN=t=>t?.role==="tool";var Pv,Wf,Qf,Gl,Vl,Zf,zl,ti,ql,Nd,Id,na,xN;class Ky{constructor(){Pv.add(this),this.controller=new AbortController,Wf.set(this,void 0),Qf.set(this,()=>{}),Gl.set(this,()=>{}),Vl.set(this,void 0),Zf.set(this,()=>{}),zl.set(this,()=>{}),ti.set(this,{}),ql.set(this,!1),Nd.set(this,!1),Id.set(this,!1),na.set(this,!1),Te(this,Wf,new Promise((e,n)=>{Te(this,Qf,e,"f"),Te(this,Gl,n,"f")})),Te(this,Vl,new Promise((e,n)=>{Te(this,Zf,e,"f"),Te(this,zl,n,"f")})),V(this,Wf,"f").catch(()=>{}),V(this,Vl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},V(this,Pv,"m",xN).bind(this))},0)}_connected(){this.ended||(V(this,Qf,"f").call(this),this._emit("connect"))}get ended(){return V(this,ql,"f")}get errored(){return V(this,Nd,"f")}get aborted(){return V(this,Id,"f")}abort(){this.controller.abort()}on(e,n){return(V(this,ti,"f")[e]||(V(this,ti,"f")[e]=[])).push({listener:n}),this}off(e,n){const o=V(this,ti,"f")[e];if(!o)return this;const r=o.findIndex(a=>a.listener===n);return r>=0&&o.splice(r,1),this}once(e,n){return(V(this,ti,"f")[e]||(V(this,ti,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,o)=>{Te(this,na,!0),e!=="error"&&this.once("error",o),this.once(e,n)})}async done(){Te(this,na,!0),await V(this,Vl,"f")}_emit(e,...n){if(V(this,ql,"f"))return;e==="end"&&(Te(this,ql,!0),V(this,Zf,"f").call(this));const o=V(this,ti,"f")[e];if(o&&(V(this,ti,"f")[e]=o.filter(r=>!r.once),o.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!V(this,na,"f")&&!o?.length&&Promise.reject(r),V(this,Gl,"f").call(this,r),V(this,zl,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!V(this,na,"f")&&!o?.length&&Promise.reject(r),V(this,Gl,"f").call(this,r),V(this,zl,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Wf=new WeakMap,Qf=new WeakMap,Gl=new WeakMap,Vl=new WeakMap,Zf=new WeakMap,zl=new WeakMap,ti=new WeakMap,ql=new WeakMap,Nd=new WeakMap,Id=new WeakMap,na=new WeakMap,Pv=new WeakSet,xN=function(e){if(Te(this,Nd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Fn),e instanceof Fn)return Te(this,Id,!0),this._emit("abort",e);if(e instanceof Se)return this._emit("error",e);if(e instanceof Error){const n=new Se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Se(String(e)))};function b4(t){return typeof t.parse=="function"}var Ht,kv,Dd,Lv,Uv,Bv,RN,MN;const w4=10;class NN extends Ky{constructor(){super(...arguments),Ht.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),AN(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Md(e)&&e.tool_calls)for(const o of e.tool_calls)o.type==="function"&&this._emit("functionToolCall",o.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),V(this,Ht,"m",kv).call(this)}async finalMessage(){return await this.done(),V(this,Ht,"m",Dd).call(this)}async finalFunctionToolCall(){return await this.done(),V(this,Ht,"m",Lv).call(this)}async finalFunctionToolCallResult(){return await this.done(),V(this,Ht,"m",Uv).call(this)}async totalUsage(){return await this.done(),V(this,Ht,"m",Bv).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=V(this,Ht,"m",Dd).call(this);n&&this._emit("finalMessage",n);const o=V(this,Ht,"m",kv).call(this);o&&this._emit("finalContent",o);const r=V(this,Ht,"m",Lv).call(this);r&&this._emit("finalFunctionToolCall",r);const a=V(this,Ht,"m",Uv).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",V(this,Ht,"m",Bv).call(this))}async _createChatCompletion(e,n,o){const r=o?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,Ht,"m",RN).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Jy(a,n))}async _runChatCompletion(e,n,o){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,o)}async _runTools(e,n,o){const r="tool",{tool_choice:a="auto",stream:u,...c}=n,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=w4}=o||{},m=n.tools.map(E=>{if(Lu(E)){if(!E.$callback)throw new Se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:E.$callback,name:E.function.name,description:E.function.description||"",parameters:E.function.parameters,parse:E.$parseRaw,strict:!0}}}return E}),y={};for(const E of m)E.type==="function"&&(y[E.function.name||E.function.function.name]=E.function);const S="tools"in n?m.map(E=>E.type==="function"?{type:"function",function:{name:E.function.name||E.function.function.name,parameters:E.function.parameters,description:E.function.description,strict:E.function.strict}}:E):void 0;for(const E of n.messages)this._addMessage(E,!1);for(let E=0;E<d;++E){const A=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:S,messages:[...this.messages]},o)).choices[0]?.message;if(!A)throw new Se("missing message in ChatCompletion response");if(!A.tool_calls?.length)return;for(const x of A.tool_calls){if(x.type!=="function")continue;const M=x.id,{name:I,arguments:N}=x.function,D=y[I];if(D){if(h&&h!==I){const q=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(y).map(J=>JSON.stringify(J)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:M,content:q});continue}let L;try{L=b4(D)?await D.parse(N):N}catch(q){const J=q instanceof Error?q.message:String(q);this._addMessage({role:r,tool_call_id:M,content:J});continue}const U=await D.function(L,this),O=V(this,Ht,"m",MN).call(this,U);if(this._addMessage({role:r,tool_call_id:M,content:O}),h)return}}}}Ht=new WeakSet,kv=function(){return V(this,Ht,"m",Dd).call(this).content??null},Dd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Md(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},Lv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Md(n)&&n?.tool_calls?.length)return n.tool_calls.filter(o=>o.type==="function").at(-1)?.function}},Uv=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(AN(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(o=>o.role==="assistant"&&o.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},Bv=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},RN=function(e){if(e.n!=null&&e.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},MN=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Yy extends NN{static runTools(e,n,o){const r=new Yy,a={...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}_addMessage(e,n=!0){super._addMessage(e,n),Md(e)&&e.content&&this._emit("content",e.content)}}const IN=1,DN=2,ON=4,PN=8,kN=16,LN=32,UN=64,BN=128,FN=256,HN=BN|FN,$N=kN|LN|HN|UN,GN=IN|DN|$N,VN=ON|PN,T4=GN|VN,bt={STR:IN,NUM:DN,ARR:ON,OBJ:PN,NULL:kN,BOOL:LN,NAN:UN,INFINITY:BN,MINUS_INFINITY:FN,INF:HN,SPECIAL:$N,ATOM:GN,COLLECTION:VN,ALL:T4};class C4 extends Error{}class A4 extends Error{}function x4(t,e=bt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return R4(t.trim(),e)}const R4=(t,e)=>{const n=t.length;let o=0;const r=S=>{throw new C4(`${S} at position ${o}`)},a=S=>{throw new A4(`${S} at position ${o}`)},u=()=>(y(),o>=n&&r("Unexpected end of input"),t[o]==='"'?c():t[o]==="{"?h():t[o]==="["?d():t.substring(o,o+4)==="null"||bt.NULL&e&&n-o<4&&"null".startsWith(t.substring(o))?(o+=4,null):t.substring(o,o+4)==="true"||bt.BOOL&e&&n-o<4&&"true".startsWith(t.substring(o))?(o+=4,!0):t.substring(o,o+5)==="false"||bt.BOOL&e&&n-o<5&&"false".startsWith(t.substring(o))?(o+=5,!1):t.substring(o,o+8)==="Infinity"||bt.INFINITY&e&&n-o<8&&"Infinity".startsWith(t.substring(o))?(o+=8,1/0):t.substring(o,o+9)==="-Infinity"||bt.MINUS_INFINITY&e&&1<n-o&&n-o<9&&"-Infinity".startsWith(t.substring(o))?(o+=9,-1/0):t.substring(o,o+3)==="NaN"||bt.NAN&e&&n-o<3&&"NaN".startsWith(t.substring(o))?(o+=3,NaN):m()),c=()=>{const S=o;let E=!1;for(o++;o<n&&(t[o]!=='"'||E&&t[o-1]==="\\");)E=t[o]==="\\"?!E:!1,o++;if(t.charAt(o)=='"')try{return JSON.parse(t.substring(S,++o-Number(E)))}catch(C){a(String(C))}else if(bt.STR&e)try{return JSON.parse(t.substring(S,o-Number(E))+'"')}catch{return JSON.parse(t.substring(S,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},h=()=>{o++,y();const S={};try{for(;t[o]!=="}";){if(y(),o>=n&&bt.OBJ&e)return S;const E=c();y(),o++;try{const C=u();Object.defineProperty(S,E,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(bt.OBJ&e)return S;throw C}y(),t[o]===","&&o++}}catch{if(bt.OBJ&e)return S;r("Expected '}' at end of object")}return o++,S},d=()=>{o++;const S=[];try{for(;t[o]!=="]";)S.push(u()),y(),t[o]===","&&o++}catch{if(bt.ARR&e)return S;r("Expected ']' at end of array")}return o++,S},m=()=>{if(o===0){t==="-"&&bt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(E){if(bt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(E))}}const S=o;for(t[o]==="-"&&o++;t[o]&&!",]}".includes(t[o]);)o++;o==n&&!(bt.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(S,o))}catch{t.substring(S,o)==="-"&&bt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(S,t.lastIndexOf("e")))}catch(C){a(String(C))}}},y=()=>{for(;o<n&&` 
\r	`.includes(t[o]);)o++};return u()},kC=t=>x4(t,bt.ALL^bt.NUM);var yt,ei,Js,Ji,Cg,Mf,Ag,xg,Rg,Nf,Mg,LC;class cu extends NN{constructor(e){super(),yt.add(this),ei.set(this,void 0),Js.set(this,void 0),Ji.set(this,void 0),Te(this,ei,e),Te(this,Js,[])}get currentChatCompletionSnapshot(){return V(this,Ji,"f")}static fromReadableStream(e){const n=new cu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,o){const r=new cu(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,o){super._createChatCompletion;const r=o?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,yt,"m",Cg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const u of a)V(this,yt,"m",Ag).call(this,u);if(a.controller.signal?.aborted)throw new Fn;return this._addChatCompletion(V(this,yt,"m",Nf).call(this))}async _fromReadableStream(e,n){const o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),V(this,yt,"m",Cg).call(this),this._connected();const r=wo.fromReadableStream(e,this.controller);let a;for await(const u of r)a&&a!==u.id&&this._addChatCompletion(V(this,yt,"m",Nf).call(this)),V(this,yt,"m",Ag).call(this,u),a=u.id;if(r.controller.signal?.aborted)throw new Fn;return this._addChatCompletion(V(this,yt,"m",Nf).call(this))}[(ei=new WeakMap,Js=new WeakMap,Ji=new WeakMap,yt=new WeakSet,Cg=function(){this.ended||Te(this,Ji,void 0)},Mf=function(n){let o=V(this,Js,"f")[n.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},V(this,Js,"f")[n.index]=o,o)},Ag=function(n){if(this.ended)return;const o=V(this,yt,"m",LC).call(this,n);this._emit("chunk",n,o);for(const r of n.choices){const a=o.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const u=V(this,yt,"m",Mf).call(this,a);a.finish_reason&&(V(this,yt,"m",Rg).call(this,a),u.current_tool_call_index!=null&&V(this,yt,"m",xg).call(this,a,u.current_tool_call_index));for(const c of r.delta.tool_calls??[])u.current_tool_call_index!==c.index&&(V(this,yt,"m",Rg).call(this,a),u.current_tool_call_index!=null&&V(this,yt,"m",xg).call(this,a,u.current_tool_call_index)),u.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},xg=function(n,o){if(V(this,yt,"m",Mf).call(this,n).done_tool_calls.has(o))return;const a=n.message.tool_calls?.[o];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const u=V(this,ei,"f")?.tools?.find(c=>Rd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:o,arguments:a.function.arguments,parsed_arguments:Lu(u)?u.$parseRaw(a.function.arguments):u?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Rg=function(n){const o=V(this,yt,"m",Mf).call(this,n);if(n.message.content&&!o.content_done){o.content_done=!0;const r=V(this,yt,"m",Mg).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Nf=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,Ji,"f");if(!n)throw new Se("request ended without sending any chunks");return Te(this,Ji,void 0),Te(this,Js,[]),M4(n,V(this,ei,"f"))},Mg=function(){const n=V(this,ei,"f")?.response_format;return qy(n)?n:null},LC=function(n){var o,r,a,u;let c=V(this,Ji,"f");const{choices:h,...d}=n;c?Object.assign(c,d):c=Te(this,Ji,{...d,choices:[]});for(const{delta:m,finish_reason:y,index:S,logprobs:E=null,...C}of n.choices){let A=c.choices[S];if(A||(A=c.choices[S]={finish_reason:y,index:S,message:{},logprobs:E,...C}),E)if(!A.logprobs)A.logprobs=Object.assign({},E);else{const{content:U,refusal:O,...q}=E;Object.assign(A.logprobs,q),U&&((o=A.logprobs).content??(o.content=[]),A.logprobs.content.push(...U)),O&&((r=A.logprobs).refusal??(r.refusal=[]),A.logprobs.refusal.push(...O))}if(y&&(A.finish_reason=y,V(this,ei,"f")&&TN(V(this,ei,"f")))){if(y==="length")throw new rN;if(y==="content_filter")throw new sN}if(Object.assign(A,C),!m)continue;const{content:x,refusal:M,function_call:I,role:N,tool_calls:D,...L}=m;if(Object.assign(A.message,L),M&&(A.message.refusal=(A.message.refusal||"")+M),N&&(A.message.role=N),I&&(A.message.function_call?(I.name&&(A.message.function_call.name=I.name),I.arguments&&((a=A.message.function_call).arguments??(a.arguments=""),A.message.function_call.arguments+=I.arguments)):A.message.function_call=I),x&&(A.message.content=(A.message.content||"")+x,!A.message.refusal&&V(this,yt,"m",Mg).call(this)&&(A.message.parsed=kC(A.message.content))),D){A.message.tool_calls||(A.message.tool_calls=[]);for(const{index:U,id:O,type:q,function:J,...j}of D){const W=(u=A.message.tool_calls)[U]??(u[U]={});Object.assign(W,j),O&&(W.id=O),q&&(W.type=q),J&&(W.function??(W.function={name:J.name??"",arguments:""})),J?.name&&(W.function.name=J.name),J?.arguments&&(W.function.arguments+=J.arguments,S4(V(this,ei,"f"),W)&&(W.function.parsed_arguments=kC(W.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let o=!1;return this.on("chunk",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{o=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{o=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{o=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new wo(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function M4(t,e){const{id:n,choices:o,created:r,model:a,system_fingerprint:u,...c}=t,h={...c,id:n,choices:o.map(({message:d,finish_reason:m,index:y,logprobs:S,...E})=>{if(!m)throw new Se(`missing finish_reason for choice ${y}`);const{content:C=null,function_call:A,tool_calls:x,...M}=d,I=d.role;if(!I)throw new Se(`missing role for choice ${y}`);if(A){const{arguments:N,name:D}=A;if(N==null)throw new Se(`missing function_call.arguments for choice ${y}`);if(!D)throw new Se(`missing function_call.name for choice ${y}`);return{...E,message:{content:C,function_call:{arguments:N,name:D},role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}return x?{...E,index:y,finish_reason:m,logprobs:S,message:{...M,role:I,content:C,refusal:d.refusal??null,tool_calls:x.map((N,D)=>{const{function:L,type:U,id:O,...q}=N,{arguments:J,name:j,...W}=L||{};if(O==null)throw new Se(`missing choices[${y}].tool_calls[${D}].id
${If(t)}`);if(U==null)throw new Se(`missing choices[${y}].tool_calls[${D}].type
${If(t)}`);if(j==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.name
${If(t)}`);if(J==null)throw new Se(`missing choices[${y}].tool_calls[${D}].function.arguments
${If(t)}`);return{...q,id:O,type:U,function:{...W,name:j,arguments:J}}})}}:{...E,message:{...M,content:C,role:I,refusal:d.refusal??null},finish_reason:m,index:y,logprobs:S}}),created:r,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return v4(h,e)}function If(t){return JSON.stringify(t)}class Od extends cu{static fromReadableStream(e){const n=new Od(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,o){const r=new Od(n),a={...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}}let jy=class extends ye{constructor(){super(...arguments),this.messages=new wN(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ie`/chat/completions/${e}`,n)}update(e,n,o){return this._client.post(ie`/chat/completions/${e}`,{body:n,...o})}list(e={},n){return this._client.getAPIList("/chat/completions",gt,{query:e,...n})}delete(e,n){return this._client.delete(ie`/chat/completions/${e}`,n)}parse(e,n){return E4(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(o=>Jy(o,e))}runTools(e,n){return e.stream?Od.runTools(this._client,e,n):Yy.runTools(this._client,e,n)}stream(e,n){return cu.createChatCompletion(this._client,e,n)}};jy.Messages=wN;class Xy extends ye{constructor(){super(...arguments),this.completions=new jy(this._client)}}Xy.Completions=jy;const zN=Symbol("brand.privateNullableHeaders");function*N4(t){if(!t)return;if(zN in t){const{values:o,nulls:r}=t;yield*o.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():SC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=SC(o[1])?o[1]:[o[1]];let u=!1;for(const c of a)c!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,c])}}const pe=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[a,u]of N4(o)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),u===null?(e.delete(a),n.add(c)):(e.append(a,u),n.delete(c))}}return{[zN]:!0,values:e,nulls:n}};class qN extends ye{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:pe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class JN extends ye{create(e,n){return this._client.post("/audio/transcriptions",Xr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class KN extends ye{create(e,n){return this._client.post("/audio/translations",Xr({body:e,...n,__metadata:{model:e.model}},this._client))}}class Uu extends ye{constructor(){super(...arguments),this.transcriptions=new JN(this._client),this.translations=new KN(this._client),this.speech=new qN(this._client)}}Uu.Transcriptions=JN;Uu.Translations=KN;Uu.Speech=qN;class YN extends ye{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ie`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",gt,{query:e,...n})}cancel(e,n){return this._client.post(ie`/batches/${e}/cancel`,n)}}class jN extends ye{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ie`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,o){return this._client.post(ie`/assistants/${e}`,{body:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",gt,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ie`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let XN=class extends ye{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class WN extends ye{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let gh=class extends ye{constructor(){super(...arguments),this.sessions=new XN(this._client),this.transcriptionSessions=new WN(this._client)}};gh.Sessions=XN;gh.TranscriptionSessions=WN;class QN extends ye{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(ie`/chatkit/sessions/${e}/cancel`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let ZN=class extends ye{retrieve(e,n){return this._client.get(ie`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",xd,{query:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(ie`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},o){return this._client.getAPIList(ie`/chatkit/threads/${e}/items`,xd,{query:n,...o,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},o?.headers])})}};class vh extends ye{constructor(){super(...arguments),this.sessions=new QN(this._client),this.threads=new ZN(this._client)}}vh.Sessions=QN;vh.Threads=ZN;class eI extends ye{create(e,n,o){return this._client.post(ie`/threads/${e}/messages`,{body:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}retrieve(e,n,o){const{thread_id:r}=n;return this._client.get(ie`/threads/${r}/messages/${e}`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}update(e,n,o){const{thread_id:r,...a}=n;return this._client.post(ie`/threads/${r}/messages/${e}`,{body:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}list(e,n={},o){return this._client.getAPIList(ie`/threads/${e}/messages`,gt,{query:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}delete(e,n,o){const{thread_id:r}=n;return this._client.delete(ie`/threads/${r}/messages/${e}`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}}class tI extends ye{retrieve(e,n,o){const{thread_id:r,run_id:a,...u}=n;return this._client.get(ie`/threads/${r}/runs/${a}/steps/${e}`,{query:u,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}list(e,n,o){const{thread_id:r,...a}=n;return this._client.getAPIList(ie`/threads/${r}/runs/${e}/steps`,gt,{query:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}}const I4=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,o=new Uint8Array(n);for(let r=0;r<n;r++)o[r]=e.charCodeAt(r);return Array.from(new Float32Array(o.buffer))}};var D4={};const Ks=t=>{if(typeof globalThis.process<"u")return D4?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Ot,kr,Fv,So,ed,Wn,Lr,la,Or,Pd,gn,td,nd,tu,Jl,Kl,UC,BC,FC,HC,$C,GC,VC;class nu extends Ky{constructor(){super(...arguments),Ot.add(this),Fv.set(this,[]),So.set(this,{}),ed.set(this,{}),Wn.set(this,void 0),Lr.set(this,void 0),la.set(this,void 0),Or.set(this,void 0),Pd.set(this,void 0),gn.set(this,void 0),td.set(this,void 0),nd.set(this,void 0),tu.set(this,void 0)}[(Fv=new WeakMap,So=new WeakMap,ed=new WeakMap,Wn=new WeakMap,Lr=new WeakMap,la=new WeakMap,Or=new WeakMap,Pd=new WeakMap,gn=new WeakMap,td=new WeakMap,nd=new WeakMap,tu=new WeakMap,Ot=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let o=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{o=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{o=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{o=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new kr;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=wo.fromReadableStream(e,this.controller);for await(const a of r)V(this,Ot,"m",Jl).call(this,a);if(r.controller.signal?.aborted)throw new Fn;return this._addRun(V(this,Ot,"m",Kl).call(this))}toReadableStream(){return new wo(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,o,r){const a=new kr;return a._run(()=>a._runToolAssistantStream(e,n,o,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,o,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...o,stream:!0},c=await e.submitToolOutputs(n,u,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,Ot,"m",Jl).call(this,h);if(c.controller.signal?.aborted)throw new Fn;return this._addRun(V(this,Ot,"m",Kl).call(this))}static createThreadAssistantStream(e,n,o){const r=new kr;return r._run(()=>r._threadAssistantStream(e,n,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,o,r){const a=new kr;return a._run(()=>a._runAssistantStream(e,n,o,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return V(this,td,"f")}currentRun(){return V(this,nd,"f")}currentMessageSnapshot(){return V(this,Wn,"f")}currentRunStepSnapshot(){return V(this,tu,"f")}async finalRunSteps(){return await this.done(),Object.values(V(this,So,"f"))}async finalMessages(){return await this.done(),Object.values(V(this,ed,"f"))}async finalRun(){if(await this.done(),!V(this,Lr,"f"))throw Error("Final run was not received.");return V(this,Lr,"f")}async _createThreadAssistantStream(e,n,o){const r=o?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},u=await e.createAndRun(a,{...o,signal:this.controller.signal});this._connected();for await(const c of u)V(this,Ot,"m",Jl).call(this,c);if(u.controller.signal?.aborted)throw new Fn;return this._addRun(V(this,Ot,"m",Kl).call(this))}async _createAssistantStream(e,n,o,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...o,stream:!0},c=await e.create(n,u,{...r,signal:this.controller.signal});this._connected();for await(const h of c)V(this,Ot,"m",Jl).call(this,h);if(c.controller.signal?.aborted)throw new Fn;return this._addRun(V(this,Ot,"m",Kl).call(this))}static accumulateDelta(e,n){for(const[o,r]of Object.entries(n)){if(!e.hasOwnProperty(o)){e[o]=r;continue}let a=e[o];if(a==null){e[o]=r;continue}if(o==="index"||o==="type"){e[o]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(bg(a)&&bg(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...r);continue}for(const u of r){if(!bg(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const c=u.index;if(c==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(u):a[c]=this.accumulateDelta(h,u)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${r}, accValue: ${a}`);e[o]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,o){return await this._createThreadAssistantStream(n,e,o)}async _runAssistantStream(e,n,o,r){return await this._createAssistantStream(n,e,o,r)}async _runToolAssistantStream(e,n,o,r){return await this._createToolAssistantStream(n,e,o,r)}}kr=nu,Jl=function(e){if(!this.ended)switch(Te(this,td,e),V(this,Ot,"m",FC).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":V(this,Ot,"m",VC).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":V(this,Ot,"m",BC).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":V(this,Ot,"m",UC).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Kl=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");if(!V(this,Lr,"f"))throw Error("Final run has not been received");return V(this,Lr,"f")},UC=function(e){const[n,o]=V(this,Ot,"m",$C).call(this,e,V(this,Wn,"f"));Te(this,Wn,n),V(this,ed,"f")[n.id]=n;for(const r of o){const a=n.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,u=n.content[r.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=V(this,la,"f")){if(V(this,Or,"f"))switch(V(this,Or,"f").type){case"text":this._emit("textDone",V(this,Or,"f").text,V(this,Wn,"f"));break;case"image_file":this._emit("imageFileDone",V(this,Or,"f").image_file,V(this,Wn,"f"));break}Te(this,la,r.index)}Te(this,Or,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(V(this,la,"f")!==void 0){const r=e.data.content[V(this,la,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,V(this,Wn,"f"));break;case"text":this._emit("textDone",r.text,V(this,Wn,"f"));break}}V(this,Wn,"f")&&this._emit("messageDone",e.data),Te(this,Wn,void 0)}},BC=function(e){const n=V(this,Ot,"m",HC).call(this,e);switch(Te(this,tu,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const o=e.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of o.step_details.tool_calls)a.index==V(this,Pd,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(V(this,gn,"f")&&this._emit("toolCallDone",V(this,gn,"f")),Te(this,Pd,a.index),Te(this,gn,n.step_details.tool_calls[a.index]),V(this,gn,"f")&&this._emit("toolCallCreated",V(this,gn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Te(this,tu,void 0),e.data.step_details.type=="tool_calls"&&V(this,gn,"f")&&(this._emit("toolCallDone",V(this,gn,"f")),Te(this,gn,void 0)),this._emit("runStepDone",e.data,n);break}},FC=function(e){V(this,Fv,"f").push(e),this._emit("event",e)},HC=function(e){switch(e.event){case"thread.run.step.created":return V(this,So,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=V(this,So,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let o=e.data;if(o.delta){const r=kr.accumulateDelta(n,o.delta);V(this,So,"f")[e.data.id]=r}return V(this,So,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":V(this,So,"f")[e.data.id]=e.data;break}if(V(this,So,"f")[e.data.id])return V(this,So,"f")[e.data.id];throw new Error("No snapshot available")},$C=function(e,n){let o=[];switch(e.event){case"thread.message.created":return[e.data,o];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in n.content){let u=n.content[a.index];n.content[a.index]=V(this,Ot,"m",GC).call(this,a,u)}else n.content[a.index]=a,o.push(a);return[n,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},GC=function(e,n){return kr.accumulateDelta(n,e)},VC=function(e){switch(Te(this,nd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Te(this,Lr,e.data),V(this,gn,"f")&&(this._emit("toolCallDone",V(this,gn,"f")),Te(this,gn,void 0));break}};let Wy=class extends ye{constructor(){super(...arguments),this.steps=new tI(this._client)}create(e,n,o){const{include:r,...a}=n;return this._client.post(ie`/threads/${e}/runs`,{query:{include:r},body:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers]),stream:n.stream??!1})}retrieve(e,n,o){const{thread_id:r}=n;return this._client.get(ie`/threads/${r}/runs/${e}`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}update(e,n,o){const{thread_id:r,...a}=n;return this._client.post(ie`/threads/${r}/runs/${e}`,{body:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}list(e,n={},o){return this._client.getAPIList(ie`/threads/${e}/runs`,gt,{query:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}cancel(e,n,o){const{thread_id:r}=n;return this._client.post(ie`/threads/${r}/runs/${e}/cancel`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}async createAndPoll(e,n,o){const r=await this.create(e,n,o);return await this.poll(r.id,{thread_id:e},o)}createAndStream(e,n,o){return nu.createAssistantStream(e,this._client.beta.threads.runs,n,o)}async poll(e,n,o){const r=pe([o?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":o?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:u}=await this.retrieve(e,n,{...o,headers:{...o?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(o?.pollIntervalMs)c=o.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await ku(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,o){return nu.createAssistantStream(e,this._client.beta.threads.runs,n,o)}submitToolOutputs(e,n,o){const{thread_id:r,...a}=n;return this._client.post(ie`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,o){const r=await this.submitToolOutputs(e,n,o);return await this.poll(r.id,n,o)}submitToolOutputsStream(e,n,o){return nu.createToolAssistantStream(e,this._client.beta.threads.runs,n,o)}};Wy.Steps=tI;class yh extends ye{constructor(){super(...arguments),this.runs=new Wy(this._client),this.messages=new eI(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ie`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,o){return this._client.post(ie`/threads/${e}`,{body:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}delete(e,n){return this._client.delete(ie`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const o=await this.createAndRun(e,n);return await this.runs.poll(o.id,{thread_id:o.thread_id},n)}createAndRunStream(e,n){return nu.createThreadAssistantStream(e,this._client.beta.threads,n)}}yh.Runs=Wy;yh.Messages=eI;class Na extends ye{constructor(){super(...arguments),this.realtime=new gh(this._client),this.chatkit=new vh(this._client),this.assistants=new jN(this._client),this.threads=new yh(this._client)}}Na.Realtime=gh;Na.ChatKit=vh;Na.Assistants=jN;Na.Threads=yh;class nI extends ye{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}let oI=class extends ye{retrieve(e,n,o){const{container_id:r}=n;return this._client.get(ie`/containers/${r}/files/${e}/content`,{...o,headers:pe([{Accept:"application/binary"},o?.headers]),__binaryResponse:!0})}},Qy=class extends ye{constructor(){super(...arguments),this.content=new oI(this._client)}create(e,n,o){return this._client.post(ie`/containers/${e}/files`,Xr({body:n,...o},this._client))}retrieve(e,n,o){const{container_id:r}=n;return this._client.get(ie`/containers/${r}/files/${e}`,o)}list(e,n={},o){return this._client.getAPIList(ie`/containers/${e}/files`,gt,{query:n,...o})}delete(e,n,o){const{container_id:r}=n;return this._client.delete(ie`/containers/${r}/files/${e}`,{...o,headers:pe([{Accept:"*/*"},o?.headers])})}};Qy.Content=oI;class Zy extends ye{constructor(){super(...arguments),this.files=new Qy(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ie`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",gt,{query:e,...n})}delete(e,n){return this._client.delete(ie`/containers/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}}Zy.Files=Qy;class iI extends ye{create(e,n,o){const{include:r,...a}=n;return this._client.post(ie`/conversations/${e}/items`,{query:{include:r},body:a,...o})}retrieve(e,n,o){const{conversation_id:r,...a}=n;return this._client.get(ie`/conversations/${r}/items/${e}`,{query:a,...o})}list(e,n={},o){return this._client.getAPIList(ie`/conversations/${e}/items`,xd,{query:n,...o})}delete(e,n,o){const{conversation_id:r}=n;return this._client.delete(ie`/conversations/${r}/items/${e}`,o)}}class e_ extends ye{constructor(){super(...arguments),this.items=new iI(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ie`/conversations/${e}`,n)}update(e,n,o){return this._client.post(ie`/conversations/${e}`,{body:n,...o})}delete(e,n){return this._client.delete(ie`/conversations/${e}`,n)}}e_.Items=iI;class rI extends ye{create(e,n){const o=!!e.encoding_format;let r=o?e.encoding_format:"base64";o&&Dt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return o?a:(Dt(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(c=>{const h=c.embedding;c.embedding=I4(h)}),u)))}}class sI extends ye{retrieve(e,n,o){const{eval_id:r,run_id:a}=n;return this._client.get(ie`/evals/${r}/runs/${a}/output_items/${e}`,o)}list(e,n,o){const{eval_id:r,...a}=n;return this._client.getAPIList(ie`/evals/${r}/runs/${e}/output_items`,gt,{query:a,...o})}}class t_ extends ye{constructor(){super(...arguments),this.outputItems=new sI(this._client)}create(e,n,o){return this._client.post(ie`/evals/${e}/runs`,{body:n,...o})}retrieve(e,n,o){const{eval_id:r}=n;return this._client.get(ie`/evals/${r}/runs/${e}`,o)}list(e,n={},o){return this._client.getAPIList(ie`/evals/${e}/runs`,gt,{query:n,...o})}delete(e,n,o){const{eval_id:r}=n;return this._client.delete(ie`/evals/${r}/runs/${e}`,o)}cancel(e,n,o){const{eval_id:r}=n;return this._client.post(ie`/evals/${r}/runs/${e}`,o)}}t_.OutputItems=sI;class n_ extends ye{constructor(){super(...arguments),this.runs=new t_(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ie`/evals/${e}`,n)}update(e,n,o){return this._client.post(ie`/evals/${e}`,{body:n,...o})}list(e={},n){return this._client.getAPIList("/evals",gt,{query:e,...n})}delete(e,n){return this._client.delete(ie`/evals/${e}`,n)}}n_.Runs=t_;let aI=class extends ye{create(e,n){return this._client.post("/files",Xr({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ie`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",gt,{query:e,...n})}delete(e,n){return this._client.delete(ie`/files/${e}`,n)}content(e,n){return this._client.get(ie`/files/${e}/content`,{...n,headers:pe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:o=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!r.has(u.status);)if(await ku(n),u=await this.retrieve(e),Date.now()-a>o)throw new $y({message:`Giving up on waiting for file ${e} to finish processing after ${o} milliseconds.`});return u}};class lI extends ye{}let uI=class extends ye{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class o_ extends ye{constructor(){super(...arguments),this.graders=new uI(this._client)}}o_.Graders=uI;class cI extends ye{create(e,n,o){return this._client.getAPIList(ie`/fine_tuning/checkpoints/${e}/permissions`,mh,{body:n,method:"post",...o})}retrieve(e,n={},o){return this._client.get(ie`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...o})}delete(e,n,o){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(ie`/fine_tuning/checkpoints/${r}/permissions/${e}`,o)}}let i_=class extends ye{constructor(){super(...arguments),this.permissions=new cI(this._client)}};i_.Permissions=cI;class fI extends ye{list(e,n={},o){return this._client.getAPIList(ie`/fine_tuning/jobs/${e}/checkpoints`,gt,{query:n,...o})}}class r_ extends ye{constructor(){super(...arguments),this.checkpoints=new fI(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ie`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",gt,{query:e,...n})}cancel(e,n){return this._client.post(ie`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},o){return this._client.getAPIList(ie`/fine_tuning/jobs/${e}/events`,gt,{query:n,...o})}pause(e,n){return this._client.post(ie`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ie`/fine_tuning/jobs/${e}/resume`,n)}}r_.Checkpoints=fI;class Ia extends ye{constructor(){super(...arguments),this.methods=new lI(this._client),this.jobs=new r_(this._client),this.checkpoints=new i_(this._client),this.alpha=new o_(this._client)}}Ia.Methods=lI;Ia.Jobs=r_;Ia.Checkpoints=i_;Ia.Alpha=o_;class dI extends ye{}class s_ extends ye{constructor(){super(...arguments),this.graderModels=new dI(this._client)}}s_.GraderModels=dI;class hI extends ye{createVariation(e,n){return this._client.post("/images/variations",Xr({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Xr({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class pI extends ye{retrieve(e,n){return this._client.get(ie`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",mh,e)}delete(e,n){return this._client.delete(ie`/models/${e}`,n)}}class mI extends ye{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class gI extends ye{accept(e,n,o){return this._client.post(ie`/realtime/calls/${e}/accept`,{body:n,...o,headers:pe([{Accept:"*/*"},o?.headers])})}hangup(e,n){return this._client.post(ie`/realtime/calls/${e}/hangup`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}refer(e,n,o){return this._client.post(ie`/realtime/calls/${e}/refer`,{body:n,...o,headers:pe([{Accept:"*/*"},o?.headers])})}reject(e,n={},o){return this._client.post(ie`/realtime/calls/${e}/reject`,{body:n,...o,headers:pe([{Accept:"*/*"},o?.headers])})}}class vI extends ye{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class _h extends ye{constructor(){super(...arguments),this.clientSecrets=new vI(this._client),this.calls=new gI(this._client)}}_h.ClientSecrets=vI;_h.Calls=gI;function O4(t,e){return!e||!k4(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(o=>({...o,parsed:null}))}:n)}:yI(t,e)}function yI(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:B4(e,r)};if(r.type==="message"){const a=r.content.map(u=>u.type==="output_text"?{...u,parsed:P4(e,u.text)}:u);return{...r,content:a}}return r}),o=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Hv(o),Object.defineProperty(o,"output_parsed",{enumerable:!0,get(){for(const r of o.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),o}function P4(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function k4(t){return!!qy(t.text?.format)}function L4(t){return t?.$brand==="auto-parseable-tool"}function U4(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function B4(t,e){const n=U4(t.tools??[],e.name);return{...e,...e,parsed_arguments:L4(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Hv(t){const e=[];for(const n of t.output)if(n.type==="message")for(const o of n.content)o.type==="output_text"&&e.push(o.text);t.output_text=e.join("")}var Ys,Df,Ki,Of,zC,qC,JC,KC;class a_ extends Ky{constructor(e){super(),Ys.add(this),Df.set(this,void 0),Ki.set(this,void 0),Of.set(this,void 0),Te(this,Df,e)}static createResponse(e,n,o){const r=new a_(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,o){const r=o?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,Ys,"m",zC).call(this);let a,u=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...o,signal:this.controller.signal,stream:!0}),u=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...o,signal:this.controller.signal}),this._connected();for await(const c of a)V(this,Ys,"m",qC).call(this,c,u);if(a.controller.signal?.aborted)throw new Fn;return V(this,Ys,"m",JC).call(this)}[(Df=new WeakMap,Ki=new WeakMap,Of=new WeakMap,Ys=new WeakSet,zC=function(){this.ended||Te(this,Ki,void 0)},qC=function(n,o){if(this.ended)return;const r=(u,c)=>{(o==null||c.sequence_number>o)&&this._emit(u,c)},a=V(this,Ys,"m",KC).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const u=a.output[n.output_index];if(!u)throw new Se(`missing output at index ${n.output_index}`);if(u.type==="message"){const c=u.content[n.content_index];if(!c)throw new Se(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const u=a.output[n.output_index];if(!u)throw new Se(`missing output at index ${n.output_index}`);u.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:u.arguments});break}default:r(n.type,n);break}},JC=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=V(this,Ki,"f");if(!n)throw new Se("request ended without sending any events");Te(this,Ki,void 0);const o=F4(n,V(this,Df,"f"));return Te(this,Of,o),o},KC=function(n){let o=V(this,Ki,"f");if(!o){if(n.type!=="response.created")throw new Se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return o=Te(this,Ki,n.response),o}switch(n.type){case"response.output_item.added":{o.output.push(n.item);break}case"response.content_part.added":{const r=o.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);const a=r.type,u=n.part;a==="message"&&u.type!=="reasoning_text"?r.content.push(u):a==="reasoning"&&u.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(u));break}case"response.output_text.delta":{const r=o.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=o.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=o.output[n.output_index];if(!r)throw new Se(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=r.content?.[n.content_index];if(!a)throw new Se(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Se(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Te(this,Ki,n.response);break}}return o},Symbol.asyncIterator)](){const e=[],n=[];let o=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{o=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{o=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{o=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,u)=>n.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=V(this,Of,"f");if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}}function F4(t,e){return O4(t,e)}class _I extends ye{list(e,n={},o){return this._client.getAPIList(ie`/responses/${e}/input_items`,gt,{query:n,...o})}}class SI extends ye{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Sh extends ye{constructor(){super(...arguments),this.inputItems=new _I(this._client),this.inputTokens=new SI(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&Hv(o),o))}retrieve(e,n={},o){return this._client.get(ie`/responses/${e}`,{query:n,...o,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Hv(r),r))}delete(e,n){return this._client.delete(ie`/responses/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(o=>yI(o,e))}stream(e,n){return a_.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ie`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}Sh.InputItems=_I;Sh.InputTokens=SI;class EI extends ye{create(e,n,o){return this._client.post(ie`/uploads/${e}/parts`,Xr({body:n,...o},this._client))}}class l_ extends ye{constructor(){super(...arguments),this.parts=new EI(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ie`/uploads/${e}/cancel`,n)}complete(e,n,o){return this._client.post(ie`/uploads/${e}/complete`,{body:n,...o})}}l_.Parts=EI;const H4=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const o=[];for(const r of e)r.status==="fulfilled"&&o.push(r.value);return o};class bI extends ye{create(e,n,o){return this._client.post(ie`/vector_stores/${e}/file_batches`,{body:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}retrieve(e,n,o){const{vector_store_id:r}=n;return this._client.get(ie`/vector_stores/${r}/file_batches/${e}`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}cancel(e,n,o){const{vector_store_id:r}=n;return this._client.post(ie`/vector_stores/${r}/file_batches/${e}/cancel`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}async createAndPoll(e,n,o){const r=await this.create(e,n);return await this.poll(e,r.id,o)}listFiles(e,n,o){const{vector_store_id:r,...a}=n;return this._client.getAPIList(ie`/vector_stores/${r}/file_batches/${e}/files`,gt,{query:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}async poll(e,n,o){const r=pe([o?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":o?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:u}=await this.retrieve(n,{vector_store_id:e},{...o,headers:r}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(o?.pollIntervalMs)c=o.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await ku(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:o=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,u=Math.min(a,n.length),c=this._client,h=n.values(),d=[...o];async function m(S){for(let E of S){const C=await c.files.create({file:E,purpose:"assistants"},r);d.push(C.id)}}const y=Array(u).fill(h).map(m);return await H4(y),await this.createAndPoll(e,{file_ids:d})}}class wI extends ye{create(e,n,o){return this._client.post(ie`/vector_stores/${e}/files`,{body:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}retrieve(e,n,o){const{vector_store_id:r}=n;return this._client.get(ie`/vector_stores/${r}/files/${e}`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}update(e,n,o){const{vector_store_id:r,...a}=n;return this._client.post(ie`/vector_stores/${r}/files/${e}`,{body:a,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}list(e,n={},o){return this._client.getAPIList(ie`/vector_stores/${e}/files`,gt,{query:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}delete(e,n,o){const{vector_store_id:r}=n;return this._client.delete(ie`/vector_stores/${r}/files/${e}`,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}async createAndPoll(e,n,o){const r=await this.create(e,n,o);return await this.poll(e,r.id,o)}async poll(e,n,o){const r=pe([o?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":o?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...o,headers:r}).withResponse(),u=a.data;switch(u.status){case"in_progress":let c=5e3;if(o?.pollIntervalMs)c=o.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await ku(c);break;case"failed":case"completed":return u}}}async upload(e,n,o){const r=await this._client.files.create({file:n,purpose:"assistants"},o);return this.create(e,{file_id:r.id},o)}async uploadAndPoll(e,n,o){const r=await this.upload(e,n,o);return await this.poll(e,r.id,o)}content(e,n,o){const{vector_store_id:r}=n;return this._client.getAPIList(ie`/vector_stores/${r}/files/${e}/content`,mh,{...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}}class Eh extends ye{constructor(){super(...arguments),this.files=new wI(this._client),this.fileBatches=new bI(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ie`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,o){return this._client.post(ie`/vector_stores/${e}`,{body:n,...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",gt,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ie`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,o){return this._client.getAPIList(ie`/vector_stores/${e}/search`,mh,{body:n,method:"post",...o,headers:pe([{"OpenAI-Beta":"assistants=v2"},o?.headers])})}}Eh.Files=wI;Eh.FileBatches=bI;class TI extends ye{create(e,n){return this._client.post("/videos",DC({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ie`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",xd,{query:e,...n})}delete(e,n){return this._client.delete(ie`/videos/${e}`,n)}downloadContent(e,n={},o){return this._client.get(ie`/videos/${e}/content`,{query:n,...o,headers:pe([{Accept:"application/binary"},o?.headers]),__binaryResponse:!0})}remix(e,n,o){return this._client.post(ie`/videos/${e}/remix`,DC({body:n,...o},this._client))}}var oa,CI,od;class AI extends ye{constructor(){super(...arguments),oa.add(this)}async unwrap(e,n,o=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,o,r),JSON.parse(e)}async verifySignature(e,n,o=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");V(this,oa,"m",CI).call(this,o);const a=pe([n]).values,u=V(this,oa,"m",od).call(this,a,"webhook-signature"),c=V(this,oa,"m",od).call(this,a,"webhook-timestamp"),h=V(this,oa,"m",od).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new Fl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>r)throw new Fl("Webhook timestamp is too old");if(d>m+r)throw new Fl("Webhook timestamp is too new");const y=u.split(" ").map(A=>A.startsWith("v1,")?A.substring(3):A),S=o.startsWith("whsec_")?Buffer.from(o.replace("whsec_",""),"base64"):Buffer.from(o,"utf-8"),E=h?`${h}.${c}.${e}`:`${c}.${e}`,C=await crypto.subtle.importKey("raw",S,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const A of y)try{const x=Buffer.from(A,"base64");if(await crypto.subtle.verify("HMAC",C,x,new TextEncoder().encode(E)))return}catch{continue}throw new Fl("The given webhook signature does not match the expected signature")}}oa=new WeakSet,CI=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},od=function(e,n){if(!e)throw new Error("Headers are required");const o=e.get(n);if(o==null)throw new Error(`Missing required header: ${n}`);return o};var $v,u_,id,xI;class Ie{constructor({baseURL:e=Ks("OPENAI_BASE_URL"),apiKey:n=Ks("OPENAI_API_KEY"),organization:o=Ks("OPENAI_ORG_ID")??null,project:r=Ks("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ks("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if($v.add(this),id.set(this,void 0),this.completions=new nI(this),this.chat=new Xy(this),this.embeddings=new rI(this),this.files=new aI(this),this.images=new hI(this),this.audio=new Uu(this),this.moderations=new mI(this),this.models=new pI(this),this.fineTuning=new Ia(this),this.graders=new s_(this),this.vectorStores=new Eh(this),this.webhooks=new AI(this),this.beta=new Na(this),this.batches=new YN(this),this.uploads=new l_(this),this.responses=new Sh(this),this.realtime=new _h(this),this.conversations=new e_(this),this.evals=new n_(this),this.containers=new Zy(this),this.videos=new TI(this),n===void 0)throw new Se("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:o,project:r,webhookSecret:a,...u,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&$3())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??u_.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=NC(c.logLevel,"ClientOptions.logLevel",this)??NC(Ks("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??J3(),Te(this,id,Y3),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=o,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return pe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return e4(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ta}`}defaultIdempotencyKey(){return`stainless-node-retry-${XM()}`}makeStatusError(e,n,o,r){return Pt.generate(e,n,o,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(o){throw o instanceof Se?o:new Se(`Failed to get token from 'apiKey' function: ${o.message}`,{cause:o})}if(typeof n!="string"||!n)throw new Se(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,o){const r=!V(this,$v,"m",xI).call(this)&&o||this.baseURL,a=L3(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return U3(u)||(n={...u,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new ph(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:u,url:c,timeout:h}=await this.buildRequest(r,{retryCount:a-n});await this.prepareRequest(u,{url:c,options:r});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=o===void 0?"":`, retryOf: ${o}`,y=Date.now();if(Dt(this).debug(`[${d}] sending request`,Dr({retryOfRequestLogID:o,method:r.method,url:c,options:r,headers:u.headers})),r.signal?.aborted)throw new Fn;const S=new AbortController,E=await this.fetchWithTimeout(c,u,h,S).catch(Mv),C=Date.now();if(E instanceof globalThis.Error){const M=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Fn;const I=Rv(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return Dt(this).info(`[${d}] connection ${I?"timed out":"failed"} - ${M}`),Dt(this).debug(`[${d}] connection ${I?"timed out":"failed"} (${M})`,Dr({retryOfRequestLogID:o,url:c,durationMs:C-y,message:E.message})),this.retryRequest(r,n,o??d);throw Dt(this).info(`[${d}] connection ${I?"timed out":"failed"} - error; no more retries left`),Dt(this).debug(`[${d}] connection ${I?"timed out":"failed"} (error; no more retries left)`,Dr({retryOfRequestLogID:o,url:c,durationMs:C-y,message:E.message})),I?new $y:new dh({cause:E})}const A=[...E.headers.entries()].filter(([M])=>M==="x-request-id").map(([M,I])=>", "+M+": "+JSON.stringify(I)).join(""),x=`[${d}${m}${A}] ${u.method} ${c} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${C-y}ms`;if(!E.ok){const M=await this.shouldRetry(E);if(n&&M){const O=`retrying, ${n} attempts remaining`;return await K3(E.body),Dt(this).info(`${x} - ${O}`),Dt(this).debug(`[${d}] response error (${O})`,Dr({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:C-y})),this.retryRequest(r,n,o??d,E.headers)}const I=M?"error; no more retries left":"error; not retryable";Dt(this).info(`${x} - ${I}`);const N=await E.text().catch(O=>Mv(O).message),D=H3(N),L=D?void 0:N;throw Dt(this).debug(`[${d}] response error (${I})`,Dr({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,message:L,durationMs:Date.now()-y})),this.makeStatusError(E.status,D,L,E.headers)}return Dt(this).info(x),Dt(this).debug(`[${d}] response start`,Dr({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:C-y})),{response:E,options:r,controller:S,requestLogID:d,retryOfRequestLogID:o,startTime:y}}getAPIList(e,n,o){return this.requestAPIList(n,{method:"get",path:e,...o})}requestAPIList(e,n){const o=this.makeRequest(n,null,void 0);return new u4(this,o,e)}async fetchWithTimeout(e,n,o,r){const{signal:a,method:u,...c}=n||{};a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),o),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:r.signal,...d?{duplex:"half"}:{},method:"GET",...c};u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){let a;const u=r?.get("retry-after-ms");if(u){const h=parseFloat(u);Number.isNaN(h)||(a=h)}const c=r?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await ku(a),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return u*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const o={...e},{method:r,path:a,query:u,defaultBaseURL:c}=o,h=this.buildURL(a,u,c);"timeout"in o&&F3("timeout",o.timeout),o.timeout=o.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:o}),y=await this.buildHeaders({options:e,method:r,bodyHeaders:d,retryCount:n});return{req:{method:r,headers:y,...o.signal&&{signal:o.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...o.fetchOptions??{}},url:h,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=pe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...q3(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=pe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:uN(e)}:V(this,id,"f").call(this,{body:e,headers:o})}}u_=Ie,id=new WeakMap,$v=new WeakSet,xI=function(){return this.baseURL!=="https://api.openai.com/v1"};Ie.OpenAI=u_;Ie.DEFAULT_TIMEOUT=6e5;Ie.OpenAIError=Se;Ie.APIError=Pt;Ie.APIConnectionError=dh;Ie.APIConnectionTimeoutError=$y;Ie.APIUserAbortError=Fn;Ie.NotFoundError=eN;Ie.ConflictError=tN;Ie.RateLimitError=oN;Ie.BadRequestError=WM;Ie.AuthenticationError=QM;Ie.InternalServerError=iN;Ie.PermissionDeniedError=ZM;Ie.UnprocessableEntityError=nN;Ie.InvalidWebhookSignatureError=Fl;Ie.toFile=p4;Ie.Completions=nI;Ie.Chat=Xy;Ie.Embeddings=rI;Ie.Files=aI;Ie.Images=hI;Ie.Audio=Uu;Ie.Moderations=mI;Ie.Models=pI;Ie.FineTuning=Ia;Ie.Graders=s_;Ie.VectorStores=Eh;Ie.Webhooks=AI;Ie.Beta=Na;Ie.Batches=YN;Ie.Uploads=l_;Ie.Responses=Sh;Ie.Realtime=_h;Ie.Conversations=e_;Ie.Evals=n_;Ie.Containers=Zy;Ie.Videos=TI;class YC extends Error{}const RI=["gpt-4o-mini","gpt-5.1","gpt-5-mini","gpt-5-nano","gpt-5"];class kd{static getApiKey=null;static setApiKey=null;static getClient(){const e=this.getApiKey?.()||"";if(!e)throw new YC("No OpenAI API key set");return new Ie({apiKey:e,dangerouslyAllowBrowser:!0})}static async txt2txt(e,n,o="gpt-4o-mini",r){try{const a=this.getClient(),u=[];n&&u.push({role:"system",content:n}),e&&u.push({role:"user",content:[{type:"input_text",text:e}]}),r&&console.log(r);const c={model:o,input:u};console.log("GPT Payload:",c);const d=(await a.responses.create(c)).output_text;return console.log("GPT Response TEXT:",{text:d}),d}catch(a){if(console.error("ChatGPT Error:",a),(a?.message||"").includes("Incorrect API key provided")||a instanceof YC){const c=window.prompt("Your OpenAI API key is missing or invalid. Please enter a valid key:");return c?this.setApiKey?.(c):console.warn("User did not provide a valid API key."),null}throw a}}}class $4{rootHandle=null;project=null;data={};constructor(e=null,n=null){this.rootHandle=e,this.project=n,mi(this)}async load(){if(this.rootHandle)try{const e={};for await(const n of this.rootHandle.values()){if(n.kind!=="directory")continue;const o=n.name,r=n,a={};for await(const u of r.values()){if(u.kind!=="directory")continue;const c=u.name,h=u,d=[];for await(const m of h.values()){if(m.kind!=="file"||!m.name.match(/\.(png|jpg|jpeg|webp|gif)$/i))continue;const y=m,S=`${o}/${c}/${y.name}`;d.push(new G4(y,h,S,this))}a[c]=d}e[o]=a}Re(()=>{this.data=e})}catch(e){console.error("Error loading artbook:",e),Re(()=>{this.data={}})}}getTag(e){if(!e)return null;const n=e.split("/");if(n.length<3)return null;const[o,r,a]=n,u=this.data[o];if(!u)return null;const c=u[r];return c&&c.find(d=>d.handle.name===a)||null}log(){console.log(zr(this))}getJson(){const e={};for(const[n,o]of Object.entries(this.data)){e[n]={};for(const[r,a]of Object.entries(o))e[n][r]=a.map(u=>u.handle.name)}return e}}class G4{handle;folder;image;artInfo=null;path;artbook;constructor(e,n,o,r=null){this.handle=e,this.folder=n,this.image=new Yr(e,this.folder),this.path=o,this.artbook=r,mi(this)}async getArtInfo(){if(this.artInfo)return this.artInfo;try{const e=await Kr.create(this.folder,this.handle.name+".json");Re(()=>{this.artInfo=e})}catch(e){console.warn("Unable to load art info for:",this.handle.name,e)}return this.artInfo}}const V4={tags:[],shotsjson:"",script:"",split_shots_prompt:{preset:"split_shots"}};class jC{folder;sceneJson=null;shots=[];project;is_generating_shotsjson=!1;is_generating_tags=!1;is_generating_all_shot_images=!1;split_shots_prompt=null;constructor(e,n){this.folder=e,this.project=n,mi(this)}async load(){try{this.sceneJson=await Kr.create(this.folder,"sceneinfo.json",V4),this.shots=[];for await(const e of this.folder.values())if(e.kind==="directory"){const n=new _C(e,this);await n.load(),this.shots.push(n)}}catch(e){console.error("Error loading scene:",e),this.sceneJson=null,this.shots=[]}}removeTag(e){this.sceneJson?.data?.tags&&(this.sceneJson.data.tags=this.sceneJson.data.tags.filter(n=>n!==e),this.sceneJson.save())}async delete(){if(!this.project?.rootDirHandle){console.error("Cannot delete scene: project root not set");return}try{await(await this.project.rootDirHandle.getDirectoryHandle("SCENES")).removeEntry(this.folder.name,{recursive:!0}),Re(()=>{this.project&&(this.project.scenes=this.project.scenes.filter(n=>n!==this))})}catch(e){console.error("Failed to delete scene:",e)}}async createShot(e){if(!this.folder)return console.error("No scene folder available"),null;const n=this.shots.find(o=>o.folder.name===e);if(n)return n;try{const o=await this.folder.getDirectoryHandle(e,{create:!0}),r=new _C(o,this);return await r.load(),Re(()=>{const a=this.shots.findIndex(u=>u.folder.name.localeCompare(e)>0);a===-1?this.shots.push(r):this.shots.splice(a,0,r)}),r}catch(o){return console.error("Failed to create shot:",o),null}}get finishedShotsNum(){return this.shots.filter(e=>e.shotJson?.data?.finished).length}async generateShotsJson(){if(!this.sceneJson?.data?.script)return null;Re(()=>{this.is_generating_shotsjson=!0});const e=this.sceneJson.data.script,n=`
${this.project.workflows.split_scene_into_shots.prompt}

${this.sceneJson.data.split_prompt}

SCRIPT:
${e}
`,o=this.project.projinfo?.getField("workflows/split_scene_into_shots/system_message");try{return await kd.txt2txt(n,o,this.project?.projinfo?.getField("workflows/split_scene_into_shots/model"))}catch(r){return console.error("Error generating shots JSON:",r),null}finally{Re(()=>{this.is_generating_shotsjson=!1})}}async createShotsFromShotsJson(){if(!this.sceneJson?.data?.shotsjson){console.warn("No shots JSON found in scene.");return}let e;try{e=JSON.parse(this.sceneJson.data.shotsjson)}catch(n){console.error("Invalid shots JSON:",n),alert("Error: The shots JSON is invalid. Please check the format.");return}for(const n of Object.keys(e)){const o=e[n];if(!o||typeof o!="object"){console.warn(`Skipping invalid shot data for key: ${n}`);continue}try{const r=await this.createShot(n);if(!r){console.error(`Failed to create shot ${n}`);continue}r.shotJson&&(Object.assign(r.shotJson.data,o),await r.shotJson.save())}catch(r){console.error(`Error creating shot ${n}:`,r)}}}log(){console.log(zr(this))}getTags(){if(!this.sceneJson?.data?.tags||!this.project?.artbook)return[];const e=[];for(const n of this.sceneJson.data.tags){const o=this.project.artbook.getTag(n);o&&e.push(o)}return e}get tags(){return this.getTags()}async generateTags(){Re(()=>{this.is_generating_tags=!0});const e=`
${this.project?.projinfo?.data?.generate_tags_prompt}

SCRIPT:
${this.sceneJson?.data.script}

SHOTS JSON:
${this.sceneJson?.data.shotsjson}

REFS DICTIONARY:
${JSON.stringify(this.project?.artbook?.getJson(),null,2)}

`,n="You are a helpful assistant. Do not write explanations. ";try{const o=await kd.txt2txt(e,n,this.project?.projinfo?.data.gpt_model);for(const r of o?.split(`
`)||[]){const a=r.trim();a&&(console.log("Adding Tag: ",a),this.addTag(a))}return o}catch(o){return console.error("Error generating tags:",o),null}finally{Re(()=>{this.is_generating_tags=!1})}}addTag(e){Re(()=>{this.sceneJson?.data.tags.includes(e)||(this.project?.artbook?.getTag(e)?(this.sceneJson?.data.tags.push(e),this.sceneJson?.save()):console.log("Tag not found: ",e))})}async generateAllShotImages(){Re(()=>{this.is_generating_all_shot_images=!0});const e=this.shots.filter(n=>!n.srcImage).map(n=>n.GenerateImage());await Promise.all(e),Re(()=>{this.is_generating_all_shot_images=!1})}}const Gv=(t,e)=>e.some(n=>t instanceof n);let XC,WC;function z4(){return XC||(XC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q4(){return WC||(WC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vv=new WeakMap,Ng=new WeakMap,bh=new WeakMap;function J4(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Br(t.result)),r()},u=()=>{o(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return bh.set(e,t),e}function K4(t){if(Vv.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Vv.set(t,e)}let zv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MI(t){zv=t(zv)}function Y4(t){return q4().includes(t)?function(...e){return t.apply(qv(this),e),Br(this.request)}:function(...e){return Br(t.apply(qv(this),e))}}function j4(t){return typeof t=="function"?Y4(t):(t instanceof IDBTransaction&&K4(t),Gv(t,z4())?new Proxy(t,zv):t)}function Br(t){if(t instanceof IDBRequest)return J4(t);if(Ng.has(t))return Ng.get(t);const e=j4(t);return e!==t&&(Ng.set(t,e),bh.set(e,t)),e}const qv=t=>bh.get(t);function X4(t,e,{blocked:n,upgrade:o,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),c=Br(u);return o&&u.addEventListener("upgradeneeded",h=>{o(Br(u.result),h.oldVersion,h.newVersion,Br(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const W4=["get","getKey","getAll","getAllKeys","count"],Q4=["put","add","delete","clear"],Ig=new Map;function QC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=Q4.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||W4.includes(n)))return;const a=async function(u,...c){const h=this.transaction(u,r?"readwrite":"readonly");let d=h.store;return o&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&h.done]))[0]};return Ig.set(e,a),a}MI(t=>({...t,get:(e,n,o)=>QC(e,n)||t.get(e,n,o),has:(e,n)=>!!QC(e,n)||t.has(e,n)}));const Z4=["continue","continuePrimaryKey","advance"],ZC={},Jv=new WeakMap,NI=new WeakMap,e6={get(t,e){if(!Z4.includes(e))return t[e];let n=ZC[e];return n||(n=ZC[e]=function(...o){Jv.set(this,NI.get(this)[e](...o))}),n}};async function*t6(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,e6);for(NI.set(n,e),bh.set(n,qv(e));e;)yield n,e=await(Jv.get(n)||e.continue()),Jv.delete(n)}function eA(t,e){return e===Symbol.asyncIterator&&Gv(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Gv(t,[IDBIndex,IDBObjectStore])}MI(t=>({...t,get(e,n,o){return eA(e,n)?t6:t.get(e,n,o)},has(e,n){return eA(e,n)||t.has(e,n)}}));const n6="ShotMasterRE",Pf="settings";class o6{db=null;data={id:"settings",lastOpenedFolder:null,recentFolders:[],api_keys:{}};constructor(){mi(this.data)}async getDB(){return this.db?this.db:(this.db=await X4(n6,1,{upgrade(e){e.objectStoreNames.contains(Pf)||e.createObjectStore(Pf,{keyPath:"id"})}}),this.db)}async load(){const n=await(await this.getDB()).get(Pf,"settings");return n&&Re(()=>{Object.assign(this.data,n)}),this.data}async save(){const e=await this.getDB(),n=zr(this.data);await e.put(Pf,n)}async update(e){Re(()=>e(this.data)),await this.save()}}class i6{fileHandle;text="";scenes=new Map;project=null;constructor(e,n=null){this.fileHandle=e,this.project=n,mi(this,{},{autoBind:!0})}async load(){const e=await this.fileHandle.getFile();this.text=(await e.text()).replace(/\r\n/g,`
`),this.splitIntoScenes()}async save(){const e=await this.fileHandle.createWritable();await e.write(this.text),await e.close()}setText(e){this.text=e,this.splitIntoScenes()}splitIntoScenes(){this.scenes.clear();const e=/^SC_[^\n]{1,32}$/gm,n=[...this.text.matchAll(e)];if(n.length===0){this.scenes.set("",this.text);return}for(let o=0;o<n.length;o++){const r=n[o][0],a=n[o].index;if(o===0&&a>0){const h=this.text.slice(0,a);this.scenes.set("",h)}const u=o+1<n.length?n[o+1].index:this.text.length,c=this.text.slice(a,u);this.scenes.set(r,c)}}get sortedSceneKeys(){return Array.from(this.scenes.keys()).sort((e,n)=>e.localeCompare(n))}joinScenes(){let e="";for(const n of this.sortedSceneKeys)e+=this.scenes.get(n);return e}setSceneText(e,n){this.scenes.set(e,n),this.text=this.joinScenes(),this.splitIntoScenes()}async createScenes(){if(!this.project){console.error("Script has no project reference");return}for(const e of this.sortedSceneKeys){if(e==="")continue;const n=this.scenes.get(e)??"";try{const o=await this.project.createScene(e);if(!o){console.error(`Failed to create scene ${e}`);continue}o.sceneJson&&(o.sceneJson.data.script=n,await o.sceneJson.save())}catch(o){console.error(`Error creating scene ${e}:`,o)}}}}const r6={gpt_model:"gpt-4o-mini",describe_prompt:"        . ",generate_tags_prompt:`
     (SCRIPT)     (SHOTS JSON)        REFS DICTIONARY     .

     ,        ,      :
  ENV/ROOM1/Night.png
  CHAR/VICTOR/Portrait.png


  `,split_shot_prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,prompt_presets:{split_shots:{model:"gpt-4o",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_tags:{model:"gpt-4o",prompt:"Generate Tags ",system_message:"You are a tagger "}},workflows:{generate_shot_image:{model:"gemini-2.5-flash-image"},split_scene_into_shots:{model:"gpt-4o-mini",prompt:`
       ,            json,     json   :
{
  "SHOT_010" : 
    {
    "prompt" : "     ", 
    "camera" : "focal length, shot type", 
    "action_description" : "     ", 
    },

}`,system_message:"You are a helpful assistant. Always respond using ONLY valid JSON. Do not write explanations. Do not wrap the JSON in backticks. The entire response must be a valid JSON object."},generate_video_kling:{model:ut.options.img2video.model.v2_6,mode:ut.options.img2video.mode.std,duration:ut.options.img2video.duration.five},kling_motion_control:{mode:ut.options.motion_control.mode.std,character_orientation:ut.options.motion_control.character_orientation.image,keep_original_sound:ut.options.motion_control.keep_original_sound.no}}};class s6{rootDirHandle=null;scenes=[];artbook=null;script=null;userSettingsDB=new o6;projinfo=null;currentView={type:"none"};selectedScene=null;constructor(e=null){this.rootDirHandle=e,mi(this)}async loadFromFolder(e){e&&(this.rootDirHandle=e,Re(async()=>{this.userSettingsDB.data.lastOpenedFolder=e,(await Promise.all(this.userSettingsDB.data.recentFolders.map(async o=>{try{return await o.isSameEntry(e)}catch{return!1}}))).includes(!0)||(this.userSettingsDB.data.recentFolders.push(e),this.userSettingsDB.data.recentFolders=this.userSettingsDB.data.recentFolders.slice(-5)),await this.userSettingsDB.save(),this.projinfo=await Kr.create(this.rootDirHandle,"projinfo.json",r6)}),await Promise.all([this.loadScenes(),this.loadArtbook(),this.loadScript()]))}async loadScenes(){if(this.rootDirHandle)try{const e=await this.rootDirHandle.getDirectoryHandle("SCENES",{create:!0}),n=[];for await(const o of e.values())if(o.kind==="directory"){const r=new jC(o,this);await r.load(),n.push(r)}Re(()=>{this.scenes=n})}catch(e){console.error("Error loading scenes:",e),Re(()=>{this.scenes=[]})}}async loadArtbook(){if(this.rootDirHandle)try{const e=await this.rootDirHandle.getDirectoryHandle("REFS",{create:!0}),n=new $4(e,this);await n.load(),Re(()=>{this.artbook=n})}catch(e){console.error("Error loading artbook:",e),Re(()=>{this.artbook=null})}}async loadScript(){if(this.rootDirHandle)try{const e=await this.rootDirHandle.getFileHandle("script.txt",{create:!0}),n=new i6(e,this);await n.load(),Re(()=>{this.script=n})}catch(e){console.error("Error loading script:",e),Re(()=>{this.script=null})}}async loadDB(){await this.userSettingsDB.load(),da.getApiKey=()=>this.userSettingsDB.data.api_keys.Google_API_KEY||null,da.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.Google_API_KEY=e})},kd.getApiKey=()=>this.userSettingsDB.data.api_keys.GPT_API_KEY||null,kd.setApiKey=async e=>{await this.userSettingsDB.update(n=>{n.api_keys.GPT_API_KEY=e})},ut.getKeysDict=()=>({accessKey:this.userSettingsDB.data.api_keys.Kling_Acess_Key,secretKey:this.userSettingsDB.data.api_keys.Kling_Secret_Key})}async createScene(e){if(!this.rootDirHandle)return console.error("No project folder open"),null;const n=this.scenes.find(o=>o.folder.name===e);if(n)return n;try{const r=await(await this.rootDirHandle.getDirectoryHandle("SCENES",{create:!0})).getDirectoryHandle(e,{create:!0}),a=new jC(r,this);return await a.load(),Re(()=>{const u=this.scenes.findIndex(c=>c.folder.name.localeCompare(a.folder.name)>0);u===-1?this.scenes.push(a):this.scenes.splice(u,0,a)}),a}catch(o){return console.error("Failed to create scene:",o),null}}log(){console.log(zr(this))}setView(e,n=null){this.currentView=e,this.selectedScene=n}get promptPresets(){return this.projinfo?this.projinfo.data.prompt_presets:{}}savePromptPreset(e){Re(()=>{this.projinfo&&(this.projinfo.data.prompt_presets[e.preset]=e,this.projinfo?.save())})}get workflows(){return this.projinfo?.data.workflows}updateWorkflow(e,n,o){Re(()=>{this.workflows[e][n]=o,this.projinfo?.save()})}download_asset(e,n){const o=document.createElement("a");o.href=e,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}const a6=({onOpenFolder:t,recentFolders:e,onOpenRecent:n,project:o})=>{const r=[{name:"Open",onClick:t},{name:"Recent",subItems:e.length?e.map(c=>({name:c.name,onClick:()=>n(c)})):[{name:"No Recent"}]}],a=[{name:"Undo"},{name:"Redo"}],u=[{name:"About"}];return w.jsx(Bw,{expand:!0,children:w.jsxs(Qx,{fluid:!0,children:[w.jsx(Bw.Brand,{children:"ShotMasterRT"}),w.jsxs(uF,{className:"me-auto",style:{userSelect:"none"},children:[w.jsx(qs,{title:"File",items:r}),w.jsx(qs,{title:"Edit",items:a}),w.jsx(qs,{title:"Help",items:u}),w.jsx(qs,{title:"Settings",onClick:()=>o.setView({type:"settings"})}),w.jsx(qs,{title:"Script",onClick:()=>o.setView({type:"script"})}),w.jsx(qs,{title:"Artbook",onClick:()=>o.setView({type:"artbook"})})]})]})})},l6=Tt(({scene:t})=>{const e=()=>{!t||!t.sceneJson||t.project?.setView({type:"scene"},t)};return w.jsxs("li",{className:"d-flex justify-content-between align-items-center py-1 px-2",style:{cursor:"pointer"},onClick:e,children:[w.jsx("span",{children:t.folder.name}),w.jsxs("span",{className:"text-muted",children:[t.finishedShotsNum," / ",t.shots.length]})]})}),lt=({onClick:t,label:e="Click",className:n=""})=>w.jsx("button",{className:`btn btn-sm btn-outline-secondary ${n}`,onClick:t,children:e}),u6=Tt(({project:t})=>{if(!t)return w.jsx("div",{children:"No Project Opened"});const e=async()=>{const o=prompt("Enter new scene name");o&&await t.createScene(o)},n=t.rootDirHandle?.name||"No Project Opened";return w.jsxs("div",{style:{width:"200px",minWidth:"200px",borderRight:"1px solid #ced4da",padding:"10px",display:"flex",flexDirection:"column"},children:[w.jsx("h5",{style:{flexShrink:0,marginBottom:8},children:n}),w.jsx(lt,{label:"+ Add Scene",onClick:e,className:"mb-2"}),w.jsx("ul",{className:"list-unstyled",style:{margin:0,padding:0,overflowY:"auto",maxHeight:"calc(100vh - 100px)"},children:t.scenes.map((o,r)=>w.jsx(l6,{scene:o},r))})]})});class kf extends T.Component{constructor(e){super(e),this.state={value:e.value}}handleChange=e=>{const n=e.target.value;this.setState({value:n}),this.props.onChange(n)};render(){const{label:e}=this.props,{value:n}=this.state;return w.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:12},children:[w.jsx("label",{style:{marginRight:8,minWidth:120},children:e}),w.jsx("input",{type:"text",value:n,onChange:this.handleChange,style:{flexGrow:1,padding:6}})]})}}const Bu=({label:t="Section",children:e,defaultCollapsed:n=!1,className:o="",headerExtra:r})=>{const[a,u]=T.useState(n);return w.jsxs("div",{className:`border rounded p-2 mb-2 ${o}`,children:[w.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-0",children:[w.jsxs("div",{className:"d-flex align-items-center",children:[w.jsx("button",{className:"btn btn-sm ",onClick:()=>u(!a),children:a?"":""}),w.jsx("strong",{children:t})]}),r&&!a&&w.jsx("div",{children:r})]}),!a&&w.jsx("div",{className:"mt-2",children:e})]})},Kv=({label:t,initialText:e,onSave:n,onEdit:o,fitHeight:r=!1,headerExtra:a})=>{const[u,c]=T.useState(e),[h,d]=T.useState(e),[m,y]=T.useState(!1),[S,E]=T.useState(!1),C=T.useRef(null);T.useEffect(()=>{c(e),d(e),r&&C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},[e,r]);const A=u!==h,x=N=>{c(N),o&&o(N)},M=async()=>{n&&(E(!0),await n(u),d(u),E(!1))};T.useEffect(()=>{if(!m||!A)return;const N=setTimeout(()=>M(),1e3);return()=>clearTimeout(N)},[u,m,A]),T.useEffect(()=>{r&&C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},[u,r]);const I=w.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a&&w.jsx(w.Fragment,{children:a}),w.jsx("button",{className:"btn btn-primary btn-sm",disabled:S||!A||!n,onClick:M,children:S?"Saving...":A?"Save*":"Save"}),w.jsxs("label",{className:"d-flex align-items-center gap-1 mb-0",children:[w.jsx("input",{type:"checkbox",checked:m,onChange:N=>y(N.target.checked)}),"Auto-save"]})]});return w.jsx(Bu,{label:t,headerExtra:I,children:w.jsx("textarea",{ref:C,className:"form-control",style:{fontFamily:"monospace",overflowY:"auto",maxHeight:"800px"},value:u,onChange:N=>x(N.target.value)})})},eo=Tt(({localJson:t,field:e,fitHeight:n=!1,headerExtra:o})=>{if(!t)return;const r=async a=>{await t.updateField(e,a)};return w.jsx(Kv,{label:e,initialText:t.getField(e)??"",onSave:r,fitHeight:n,headerExtra:o})}),fu=({tabs:t})=>{const e=Object.keys(t),[n,o]=T.useState(e[0]);return w.jsxs("div",{children:[w.jsx("ul",{className:"nav nav-tabs",children:e.map(r=>w.jsx("li",{className:"nav-item",children:w.jsx("button",{className:`nav-link ${n===r?"active":""}`,onClick:()=>o(r),children:r})},r))}),w.jsx("div",{className:"tab-content p-3 border border-top-0",children:w.jsx("div",{className:"tab-pane fade show active",children:t[n]})})]})};function c6({items:t,currentItem:e,onPicked:n,labelRenderer:o,className:r=""}){return w.jsxs(Ef,{className:r,children:[w.jsx(Ef.Toggle,{variant:"outline-secondary",size:"sm",children:o?o(e):String(e)}),w.jsx(Ef.Menu,{children:t.map((a,u)=>w.jsx(Ef.Item,{onClick:()=>n(a),children:o?o(a):String(a)},u))})]})}const f6=Tt(({project:t})=>{const{userSettingsDB:e}=t;if(!e)return null;const n=t.projinfo?{"  ":w.jsx(eo,{localJson:t.projinfo,field:"split_shot_prompt",fitHeight:!0})," ":w.jsx(eo,{localJson:t.projinfo,field:"generate_tags_prompt",fitHeight:!0})}:{};return w.jsxs("div",{style:{padding:20},children:[w.jsx("h3",{children:"API Keys"}),w.jsx(lt,{onClick:()=>{t.log()},label:"LOG Project"}),w.jsx(lt,{onClick:()=>{t.download_asset("assets/server.exe","server.exe")},label:"Download Server"}),w.jsx(kf,{label:"GPT API Key",value:e.data.api_keys.GPT_API_KEY||"",onChange:async o=>{await e.update(r=>{r.api_keys.GPT_API_KEY=o})}}),w.jsx(kf,{label:"Google API Key",value:e.data.api_keys.Google_API_KEY||"",onChange:async o=>{await e.update(r=>{r.api_keys.Google_API_KEY=o})}}),w.jsx(kf,{label:"Kling Acess Key",value:e.data.api_keys.Kling_Acess_Key||"",onChange:async o=>{await e.update(r=>{r.api_keys.Kling_Acess_Key=o})}}),w.jsx(kf,{label:"Kling Secret Key",value:e.data.api_keys.Kling_Secret_Key||"",onChange:async o=>{await e.update(r=>{r.api_keys.Kling_Secret_Key=o})}}),w.jsx("div",{children:w.jsx(c6,{items:RI,currentItem:t.projinfo?.data.gpt_model,onPicked:o=>{t.projinfo?.updateField("gpt_model",o)}})}),w.jsx("h2",{children:"Prompts"}),Object.keys(n).length>0&&w.jsx(fu,{tabs:n})]})}),d6=Tt(({project:t})=>{if(!t.script)return w.jsx("div",{children:"No script loaded in project."});const e=async r=>{t.script.setText(r),await t.script.save()},n={};for(const r of t.script.sortedSceneKeys)n[r||"Intro"]=w.jsx(Kv,{label:r||"Intro",initialText:t.script.scenes.get(r),onSave:async a=>{t.script.setSceneText(r,a),await t.script.save()},fitHeight:!0});const o=async()=>{try{await t.script.createScenes(),alert("Scenes created successfully!")}catch(r){console.error("Error creating scenes:",r),alert("Failed to create scenes. See console for details.")}};return w.jsxs("div",{style:{padding:"1rem"},children:[w.jsx("h4",{children:"Script"}),w.jsx(lt,{label:"Create Scenes from Script",onClick:o,className:"mb-2"}),w.jsx(fu,{tabs:{"Full Script":w.jsx(Kv,{label:"Full Script",initialText:t.script.text,onSave:e,fitHeight:!0}),Scenes:w.jsx(fu,{tabs:n})}})]})}),h6=Tt(({art:t,onClose:e})=>{const[n,o]=T.useState(null),[r,a]=T.useState(!0);T.useEffect(()=>{let c=!0,h=t;a(!0),o(null);async function d(){const m=await h.image.getUrlObject();if(!c||t!==h)return;o(m);const y=await h.getArtInfo();!c||t!==h||(h.artInfo=y,a(!1))}return d(),()=>{c=!1}},[t]);const u=t.handle.name;return r?w.jsx("div",{children:"Loading art info..."}):w.jsxs("div",{className:"art-info-card",style:{border:"1px solid #ccc",padding:"1rem",borderRadius:"8px"},children:[w.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[w.jsx("strong",{children:u}),w.jsx("button",{onClick:e,style:{cursor:"pointer",border:"none",background:"transparent",fontSize:"1.2rem"},children:""})]}),n?w.jsx("img",{src:n,className:"preview-img",style:{maxWidth:"1000px",width:"auto",maxHeight:"1000px",objectFit:"contain",borderRadius:"4px",display:"block",marginBottom:"1rem"}}):w.jsx("div",{style:{padding:"4rem",textAlign:"center"},children:w.jsx("span",{children:"Loading image..."})}),t.artInfo&&w.jsx(eo,{localJson:t.artInfo,field:"prompt",fitHeight:!0})]})}),p6=Tt(({artbook:t})=>{const[e,n]=T.useState(null);if(!Object.keys(t.data).length)return w.jsx("div",{children:"No Artbook content found."});const o=({art:c})=>{const[h,d]=T.useState(null);return T.useEffect(()=>{let m=!0;return c.image.getUrlObject().then(y=>{m&&d(y)}),()=>{m=!1}},[c]),w.jsx(Wx,{xs:6,md:3,lg:2,style:{marginBottom:"1rem"},children:w.jsxs(_f,{onClick:()=>n(c),style:{cursor:"pointer"},children:[h?w.jsx(_f.Img,{variant:"top",src:h}):w.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:w.jsx(QR,{animation:"border"})}),w.jsx(_f.Body,{children:w.jsx(_f.Text,{style:{fontSize:"0.8rem"},children:c.handle.name})})]})})},r=(c,h)=>w.jsxs("div",{style:{marginBottom:"2rem"},children:[w.jsx("h5",{children:c}),w.jsx(WR,{children:h.map(d=>w.jsx(o,{art:d},d.handle.name))}),e&&h.includes(e)&&w.jsx("div",{style:{marginTop:"1rem"},children:w.jsx(h6,{art:e,onClose:()=>n(null)})})]},c),a=c=>w.jsxs("div",{style:{padding:"1rem"},children:[Object.entries(c).map(([h,d])=>r(h,d)),w.jsx("div",{style:{height:"500px"}})]}),u={};for(const c in t.data)u[c]=a(t.data[c]);return w.jsxs("div",{style:{padding:"1rem"},children:[w.jsx("h2",{className:"mb-3",children:"Artbook"}),w.jsx(fu,{tabs:u})]})}),m6=Tt(({art:t,scene:e})=>{const[n,o]=T.useState(null);if(T.useEffect(()=>{t.getArtInfo();let a=!0;return(async()=>{const c=await t.image.getUrlObject();a&&o(c||null)})(),()=>{a=!1,t.image.revokeUrl()}},[t]),!n)return null;const r=()=>{e.removeTag(t.path)};return w.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[w.jsxs("div",{className:"d-flex align-items-center",children:[w.jsx("img",{src:n,alt:t.handle.name,style:{width:40,height:40,objectFit:"cover",marginRight:8}}),w.jsxs("div",{children:[w.jsx("div",{children:t.handle.name}),w.jsx("small",{className:"text-muted",children:t.path}),t.artInfo&&w.jsx("div",{children:w.jsx("small",{children:t.artInfo.data?.description||""})})]})]}),w.jsx(lt,{onClick:r,label:"X"})]})}),g6=({art:t,onClick:e})=>{const[n,o]=T.useState("");return T.useEffect(()=>{let r=!0;return t.image.getUrlObject().then(a=>{r&&o(a)}),()=>{r=!1,t.image.revokeUrl()}},[t]),w.jsxs("div",{className:"px-2 py-1 hover-bg-light d-flex align-items-center",style:{cursor:"pointer",gap:6},onClick:e,children:[n&&w.jsx("img",{src:n,alt:t.handle.name,style:{width:36,height:36,objectFit:"cover",borderRadius:2}}),w.jsx("span",{children:t.handle.name})]})},c_=({onClick:t,label:e="Click",className:n="",is_loading:o=!1})=>w.jsx(lt,{onClick:t,className:`${n} ${o?"disabled":""}`,label:w.jsxs("span",{className:"d-flex align-items-center justify-content-center",children:[w.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true",style:{animation:o?void 0:"none",borderColor:o?void 0:"#6c757d"}}),w.jsx("span",{children:e})]})});function Fe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function tA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wh(...t){return e=>{let n=!1;const o=t.map(r=>{const a=tA(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<o.length;r++){const a=o[r];typeof a=="function"?a():tA(t[r],null)}}}}function nn(...t){return T.useCallback(wh(...t),t)}function Fu(t,e=[]){let n=[];function o(a,u){const c=T.createContext(u),h=n.length;n=[...n,u];const d=y=>{const{scope:S,children:E,...C}=y,A=S?.[t]?.[h]||c,x=T.useMemo(()=>C,Object.values(C));return w.jsx(A.Provider,{value:x,children:E})};d.displayName=a+"Provider";function m(y,S){const E=S?.[t]?.[h]||c,C=T.useContext(E);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[d,m]}const r=()=>{const a=n.map(u=>T.createContext(u));return function(c){const h=c?.[t]||a;return T.useMemo(()=>({[`__scope${t}`]:{...c,[t]:h}}),[c,h])}};return r.scopeName=t,[o,v6(r,...e)]}function v6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const o=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const u=o.reduce((c,{useScope:h,scopeName:d})=>{const y=h(a)[`__scope${d}`];return{...c,...y}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}var tr=globalThis?.document?T.useLayoutEffect:()=>{},y6=UA[" useInsertionEffect ".trim().toString()]||tr;function f_({prop:t,defaultProp:e,onChange:n=()=>{},caller:o}){const[r,a,u]=_6({defaultProp:e,onChange:n}),c=t!==void 0,h=c?t:r;{const m=T.useRef(t!==void 0);T.useEffect(()=>{const y=m.current;y!==c&&console.warn(`${o} is changing from ${y?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,o])}const d=T.useCallback(m=>{if(c){const y=S6(m)?m(t):m;y!==t&&u.current?.(y)}else a(m)},[c,t,a,u]);return[h,d]}function _6({defaultProp:t,onChange:e}){const[n,o]=T.useState(t),r=T.useRef(n),a=T.useRef(e);return y6(()=>{a.current=e},[e]),T.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,o,a]}function S6(t){return typeof t=="function"}function Ld(t){const e=E6(t),n=T.forwardRef((o,r)=>{const{children:a,...u}=o,c=T.Children.toArray(a),h=c.find(w6);if(h){const d=h.props.children,m=c.map(y=>y===h?T.Children.count(d)>1?T.Children.only(null):T.isValidElement(d)?d.props.children:null:y);return w.jsx(e,{...u,ref:r,children:T.isValidElement(d)?T.cloneElement(d,void 0,m):null})}return w.jsx(e,{...u,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function E6(t){const e=T.forwardRef((n,o)=>{const{children:r,...a}=n;if(T.isValidElement(r)){const u=C6(r),c=T6(a,r.props);return r.type!==T.Fragment&&(c.ref=o?wh(o,u):u),T.cloneElement(r,c)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var b6=Symbol("radix.slottable");function w6(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===b6}function T6(t,e){const n={...e};for(const o in e){const r=t[o],a=e[o];/^on[A-Z]/.test(o)?r&&a?n[o]=(...c)=>{const h=a(...c);return r(...c),h}:r&&(n[o]=r):o==="style"?n[o]={...r,...a}:o==="className"&&(n[o]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function C6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var A6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vt=A6.reduce((t,e)=>{const n=Ld(`Primitive.${e}`),o=T.forwardRef((r,a)=>{const{asChild:u,...c}=r,h=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(h,{...c,ref:a})});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{});function II(t,e){t&&Xd.flushSync(()=>t.dispatchEvent(e))}function DI(t){const e=t+"CollectionProvider",[n,o]=Fu(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=A=>{const{scope:x,children:M}=A,I=et.useRef(null),N=et.useRef(new Map).current;return w.jsx(r,{scope:x,itemMap:N,collectionRef:I,children:M})};u.displayName=e;const c=t+"CollectionSlot",h=Ld(c),d=et.forwardRef((A,x)=>{const{scope:M,children:I}=A,N=a(c,M),D=nn(x,N.collectionRef);return w.jsx(h,{ref:D,children:I})});d.displayName=c;const m=t+"CollectionItemSlot",y="data-radix-collection-item",S=Ld(m),E=et.forwardRef((A,x)=>{const{scope:M,children:I,...N}=A,D=et.useRef(null),L=nn(x,D),U=a(m,M);return et.useEffect(()=>(U.itemMap.set(D,{ref:D,...N}),()=>void U.itemMap.delete(D))),w.jsx(S,{[y]:"",ref:L,children:I})});E.displayName=m;function C(A){const x=a(t+"CollectionConsumer",A);return et.useCallback(()=>{const I=x.collectionRef.current;if(!I)return[];const N=Array.from(I.querySelectorAll(`[${y}]`));return Array.from(x.itemMap.values()).sort((U,O)=>N.indexOf(U.ref.current)-N.indexOf(O.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:u,Slot:d,ItemSlot:E},C,o]}var x6=T.createContext(void 0);function OI(t){const e=T.useContext(x6);return t||e||"ltr"}function Io(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>e.current?.(...n),[])}function R6(t,e=globalThis?.document){const n=Io(t);T.useEffect(()=>{const o=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[n,e])}var M6="DismissableLayer",Yv="dismissableLayer.update",N6="dismissableLayer.pointerDownOutside",I6="dismissableLayer.focusOutside",nA,PI=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kI=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:u,onDismiss:c,...h}=t,d=T.useContext(PI),[m,y]=T.useState(null),S=m?.ownerDocument??globalThis?.document,[,E]=T.useState({}),C=nn(e,O=>y(O)),A=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),M=A.indexOf(x),I=m?A.indexOf(m):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,D=I>=M,L=P6(O=>{const q=O.target,J=[...d.branches].some(j=>j.contains(q));!D||J||(r?.(O),u?.(O),O.defaultPrevented||c?.())},S),U=k6(O=>{const q=O.target;[...d.branches].some(j=>j.contains(q))||(a?.(O),u?.(O),O.defaultPrevented||c?.())},S);return R6(O=>{I===d.layers.size-1&&(o?.(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},S),T.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(nA=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),oA(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(S.body.style.pointerEvents=nA)}},[m,S,n,d]),T.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),oA())},[m,d]),T.useEffect(()=>{const O=()=>E({});return document.addEventListener(Yv,O),()=>document.removeEventListener(Yv,O)},[]),w.jsx(Vt.div,{...h,ref:C,style:{pointerEvents:N?D?"auto":"none":void 0,...t.style},onFocusCapture:Fe(t.onFocusCapture,U.onFocusCapture),onBlurCapture:Fe(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Fe(t.onPointerDownCapture,L.onPointerDownCapture)})});kI.displayName=M6;var D6="DismissableLayerBranch",O6=T.forwardRef((t,e)=>{const n=T.useContext(PI),o=T.useRef(null),r=nn(e,o);return T.useEffect(()=>{const a=o.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),w.jsx(Vt.div,{...t,ref:r})});O6.displayName=D6;function P6(t,e=globalThis?.document){const n=Io(t),o=T.useRef(!1),r=T.useRef(()=>{});return T.useEffect(()=>{const a=c=>{if(c.target&&!o.current){let h=function(){LI(N6,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);o.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>o.current=!0}}function k6(t,e=globalThis?.document){const n=Io(t),o=T.useRef(!1);return T.useEffect(()=>{const r=a=>{a.target&&!o.current&&LI(I6,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function oA(){const t=new CustomEvent(Yv);document.dispatchEvent(t)}function LI(t,e,n,{discrete:o}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),o?II(r,a):r.dispatchEvent(a)}var Dg=0;function L6(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??iA()),document.body.insertAdjacentElement("beforeend",t[1]??iA()),Dg++,()=>{Dg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Dg--}},[])}function iA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Og="focusScope.autoFocusOnMount",Pg="focusScope.autoFocusOnUnmount",rA={bubbles:!1,cancelable:!0},U6="FocusScope",UI=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...u}=t,[c,h]=T.useState(null),d=Io(r),m=Io(a),y=T.useRef(null),S=nn(e,A=>h(A)),E=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(o){let A=function(N){if(E.paused||!c)return;const D=N.target;c.contains(D)?y.current=D:Yi(y.current,{select:!0})},x=function(N){if(E.paused||!c)return;const D=N.relatedTarget;D!==null&&(c.contains(D)||Yi(y.current,{select:!0}))},M=function(N){if(document.activeElement===document.body)for(const L of N)L.removedNodes.length>0&&Yi(c)};document.addEventListener("focusin",A),document.addEventListener("focusout",x);const I=new MutationObserver(M);return c&&I.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",x),I.disconnect()}}},[o,c,E.paused]),T.useEffect(()=>{if(c){aA.add(E);const A=document.activeElement;if(!c.contains(A)){const M=new CustomEvent(Og,rA);c.addEventListener(Og,d),c.dispatchEvent(M),M.defaultPrevented||(B6(V6(BI(c)),{select:!0}),document.activeElement===A&&Yi(c))}return()=>{c.removeEventListener(Og,d),setTimeout(()=>{const M=new CustomEvent(Pg,rA);c.addEventListener(Pg,m),c.dispatchEvent(M),M.defaultPrevented||Yi(A??document.body,{select:!0}),c.removeEventListener(Pg,m),aA.remove(E)},0)}}},[c,d,m,E]);const C=T.useCallback(A=>{if(!n&&!o||E.paused)return;const x=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,M=document.activeElement;if(x&&M){const I=A.currentTarget,[N,D]=F6(I);N&&D?!A.shiftKey&&M===D?(A.preventDefault(),n&&Yi(N,{select:!0})):A.shiftKey&&M===N&&(A.preventDefault(),n&&Yi(D,{select:!0})):M===I&&A.preventDefault()}},[n,o,E.paused]);return w.jsx(Vt.div,{tabIndex:-1,...u,ref:S,onKeyDown:C})});UI.displayName=U6;function B6(t,{select:e=!1}={}){const n=document.activeElement;for(const o of t)if(Yi(o,{select:e}),document.activeElement!==n)return}function F6(t){const e=BI(t),n=sA(e,t),o=sA(e.reverse(),t);return[n,o]}function BI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sA(t,e){for(const n of t)if(!H6(n,{upTo:e}))return n}function H6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $6(t){return t instanceof HTMLInputElement&&"select"in t}function Yi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$6(t)&&e&&t.select()}}var aA=G6();function G6(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=lA(t,e),t.unshift(e)},remove(e){t=lA(t,e),t[0]?.resume()}}}function lA(t,e){const n=[...t],o=n.indexOf(e);return o!==-1&&n.splice(o,1),n}function V6(t){return t.filter(e=>e.tagName!=="A")}var z6=UA[" useId ".trim().toString()]||(()=>{}),q6=0;function du(t){const[e,n]=T.useState(z6());return tr(()=>{n(o=>o??String(q6++))},[t]),t||(e?`radix-${e}`:"")}const J6=["top","right","bottom","left"],nr=Math.min,vn=Math.max,Ud=Math.round,Lf=Math.floor,No=t=>({x:t,y:t}),K6={left:"right",right:"left",bottom:"top",top:"bottom"},Y6={start:"end",end:"start"};function jv(t,e,n){return vn(t,nr(e,n))}function hi(t,e){return typeof t=="function"?t(e):t}function pi(t){return t.split("-")[0]}function Da(t){return t.split("-")[1]}function d_(t){return t==="x"?"y":"x"}function h_(t){return t==="y"?"height":"width"}const j6=new Set(["top","bottom"]);function To(t){return j6.has(pi(t))?"y":"x"}function p_(t){return d_(To(t))}function X6(t,e,n){n===void 0&&(n=!1);const o=Da(t),r=p_(t),a=h_(r);let u=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(u=Bd(u)),[u,Bd(u)]}function W6(t){const e=Bd(t);return[Xv(t),e,Xv(e)]}function Xv(t){return t.replace(/start|end/g,e=>Y6[e])}const uA=["left","right"],cA=["right","left"],Q6=["top","bottom"],Z6=["bottom","top"];function e5(t,e,n){switch(t){case"top":case"bottom":return n?e?cA:uA:e?uA:cA;case"left":case"right":return e?Q6:Z6;default:return[]}}function t5(t,e,n,o){const r=Da(t);let a=e5(pi(t),n==="start",o);return r&&(a=a.map(u=>u+"-"+r),e&&(a=a.concat(a.map(Xv)))),a}function Bd(t){return t.replace(/left|right|bottom|top/g,e=>K6[e])}function n5(t){return{top:0,right:0,bottom:0,left:0,...t}}function FI(t){return typeof t!="number"?n5(t):{top:t,right:t,bottom:t,left:t}}function Fd(t){const{x:e,y:n,width:o,height:r}=t;return{width:o,height:r,top:n,left:e,right:e+o,bottom:n+r,x:e,y:n}}function fA(t,e,n){let{reference:o,floating:r}=t;const a=To(e),u=p_(e),c=h_(u),h=pi(e),d=a==="y",m=o.x+o.width/2-r.width/2,y=o.y+o.height/2-r.height/2,S=o[c]/2-r[c]/2;let E;switch(h){case"top":E={x:m,y:o.y-r.height};break;case"bottom":E={x:m,y:o.y+o.height};break;case"right":E={x:o.x+o.width,y};break;case"left":E={x:o.x-r.width,y};break;default:E={x:o.x,y:o.y}}switch(Da(e)){case"start":E[u]-=S*(n&&d?-1:1);break;case"end":E[u]+=S*(n&&d?-1:1);break}return E}const o5=async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:a=[],platform:u}=n,c=a.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(e));let d=await u.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y}=fA(d,o,h),S=o,E={},C=0;for(let A=0;A<c.length;A++){const{name:x,fn:M}=c[A],{x:I,y:N,data:D,reset:L}=await M({x:m,y,initialPlacement:o,placement:S,strategy:r,middlewareData:E,rects:d,platform:u,elements:{reference:t,floating:e}});m=I??m,y=N??y,E={...E,[x]:{...E[x],...D}},L&&C<=50&&(C++,typeof L=="object"&&(L.placement&&(S=L.placement),L.rects&&(d=L.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:r}):L.rects),{x:m,y}=fA(d,S,h)),A=-1)}return{x:m,y,placement:S,strategy:r,middlewareData:E}};async function hu(t,e){var n;e===void 0&&(e={});const{x:o,y:r,platform:a,rects:u,elements:c,strategy:h}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:S=!1,padding:E=0}=hi(e,t),C=FI(E),x=c[S?y==="floating"?"reference":"floating":y],M=Fd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:m,strategy:h})),I=y==="floating"?{x:o,y:r,width:u.floating.width,height:u.floating.height}:u.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),D=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},L=Fd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:I,offsetParent:N,strategy:h}):I);return{top:(M.top-L.top+C.top)/D.y,bottom:(L.bottom-M.bottom+C.bottom)/D.y,left:(M.left-L.left+C.left)/D.x,right:(L.right-M.right+C.right)/D.x}}const i5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:r,rects:a,platform:u,elements:c,middlewareData:h}=e,{element:d,padding:m=0}=hi(t,e)||{};if(d==null)return{};const y=FI(m),S={x:n,y:o},E=p_(r),C=h_(E),A=await u.getDimensions(d),x=E==="y",M=x?"top":"left",I=x?"bottom":"right",N=x?"clientHeight":"clientWidth",D=a.reference[C]+a.reference[E]-S[E]-a.floating[C],L=S[E]-a.reference[E],U=await(u.getOffsetParent==null?void 0:u.getOffsetParent(d));let O=U?U[N]:0;(!O||!await(u.isElement==null?void 0:u.isElement(U)))&&(O=c.floating[N]||a.floating[C]);const q=D/2-L/2,J=O/2-A[C]/2-1,j=nr(y[M],J),W=nr(y[I],J),re=j,oe=O-A[C]-W,ae=O/2-A[C]/2+q,de=jv(re,ae,oe),F=!h.arrow&&Da(r)!=null&&ae!==de&&a.reference[C]/2-(ae<re?j:W)-A[C]/2<0,Q=F?ae<re?ae-re:ae-oe:0;return{[E]:S[E]+Q,data:{[E]:de,centerOffset:ae-de-Q,...F&&{alignmentOffset:Q}},reset:F}}}),r5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:r,middlewareData:a,rects:u,initialPlacement:c,platform:h,elements:d}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:S,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:A=!0,...x}=hi(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const M=pi(r),I=To(c),N=pi(c)===c,D=await(h.isRTL==null?void 0:h.isRTL(d.floating)),L=S||(N||!A?[Bd(c)]:W6(c)),U=C!=="none";!S&&U&&L.push(...t5(c,A,C,D));const O=[c,...L],q=await hu(e,x),J=[];let j=((o=a.flip)==null?void 0:o.overflows)||[];if(m&&J.push(q[M]),y){const ae=X6(r,u,D);J.push(q[ae[0]],q[ae[1]])}if(j=[...j,{placement:r,overflows:J}],!J.every(ae=>ae<=0)){var W,re;const ae=(((W=a.flip)==null?void 0:W.index)||0)+1,de=O[ae];if(de&&(!(y==="alignment"?I!==To(de):!1)||j.every(ee=>To(ee.placement)===I?ee.overflows[0]>0:!0)))return{data:{index:ae,overflows:j},reset:{placement:de}};let F=(re=j.filter(Q=>Q.overflows[0]<=0).sort((Q,ee)=>Q.overflows[1]-ee.overflows[1])[0])==null?void 0:re.placement;if(!F)switch(E){case"bestFit":{var oe;const Q=(oe=j.filter(ee=>{if(U){const ne=To(ee.placement);return ne===I||ne==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(ne=>ne>0).reduce((ne,ce)=>ne+ce,0)]).sort((ee,ne)=>ee[1]-ne[1])[0])==null?void 0:oe[0];Q&&(F=Q);break}case"initialPlacement":F=c;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function dA(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function hA(t){return J6.some(e=>t[e]>=0)}const s5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...r}=hi(t,e);switch(o){case"referenceHidden":{const a=await hu(e,{...r,elementContext:"reference"}),u=dA(a,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:hA(u)}}}case"escaped":{const a=await hu(e,{...r,altBoundary:!0}),u=dA(a,n.floating);return{data:{escapedOffsets:u,escaped:hA(u)}}}default:return{}}}}},HI=new Set(["left","top"]);async function a5(t,e){const{placement:n,platform:o,elements:r}=t,a=await(o.isRTL==null?void 0:o.isRTL(r.floating)),u=pi(n),c=Da(n),h=To(n)==="y",d=HI.has(u)?-1:1,m=a&&h?-1:1,y=hi(e,t);let{mainAxis:S,crossAxis:E,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof C=="number"&&(E=c==="end"?C*-1:C),h?{x:E*m,y:S*d}:{x:S*d,y:E*m}}const l5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:r,y:a,placement:u,middlewareData:c}=e,h=await a5(e,t);return u===((n=c.offset)==null?void 0:n.placement)&&(o=c.arrow)!=null&&o.alignmentOffset?{}:{x:r+h.x,y:a+h.y,data:{...h,placement:u}}}}},u5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:r}=e,{mainAxis:a=!0,crossAxis:u=!1,limiter:c={fn:x=>{let{x:M,y:I}=x;return{x:M,y:I}}},...h}=hi(t,e),d={x:n,y:o},m=await hu(e,h),y=To(pi(r)),S=d_(y);let E=d[S],C=d[y];if(a){const x=S==="y"?"top":"left",M=S==="y"?"bottom":"right",I=E+m[x],N=E-m[M];E=jv(I,E,N)}if(u){const x=y==="y"?"top":"left",M=y==="y"?"bottom":"right",I=C+m[x],N=C-m[M];C=jv(I,C,N)}const A=c.fn({...e,[S]:E,[y]:C});return{...A,data:{x:A.x-n,y:A.y-o,enabled:{[S]:a,[y]:u}}}}}},c5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:o,placement:r,rects:a,middlewareData:u}=e,{offset:c=0,mainAxis:h=!0,crossAxis:d=!0}=hi(t,e),m={x:n,y:o},y=To(r),S=d_(y);let E=m[S],C=m[y];const A=hi(c,e),x=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(h){const N=S==="y"?"height":"width",D=a.reference[S]-a.floating[N]+x.mainAxis,L=a.reference[S]+a.reference[N]-x.mainAxis;E<D?E=D:E>L&&(E=L)}if(d){var M,I;const N=S==="y"?"width":"height",D=HI.has(pi(r)),L=a.reference[y]-a.floating[N]+(D&&((M=u.offset)==null?void 0:M[y])||0)+(D?0:x.crossAxis),U=a.reference[y]+a.reference[N]+(D?0:((I=u.offset)==null?void 0:I[y])||0)-(D?x.crossAxis:0);C<L?C=L:C>U&&(C=U)}return{[S]:E,[y]:C}}}},f5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,o;const{placement:r,rects:a,platform:u,elements:c}=e,{apply:h=()=>{},...d}=hi(t,e),m=await hu(e,d),y=pi(r),S=Da(r),E=To(r)==="y",{width:C,height:A}=a.floating;let x,M;y==="top"||y==="bottom"?(x=y,M=S===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(M=y,x=S==="end"?"top":"bottom");const I=A-m.top-m.bottom,N=C-m.left-m.right,D=nr(A-m[x],I),L=nr(C-m[M],N),U=!e.middlewareData.shift;let O=D,q=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(q=N),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(O=I),U&&!S){const j=vn(m.left,0),W=vn(m.right,0),re=vn(m.top,0),oe=vn(m.bottom,0);E?q=C-2*(j!==0||W!==0?j+W:vn(m.left,m.right)):O=A-2*(re!==0||oe!==0?re+oe:vn(m.top,m.bottom))}await h({...e,availableWidth:q,availableHeight:O});const J=await u.getDimensions(c.floating);return C!==J.width||A!==J.height?{reset:{rects:!0}}:{}}}};function Th(){return typeof window<"u"}function Oa(t){return $I(t)?(t.nodeName||"").toLowerCase():"#document"}function Sn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Oo(t){var e;return(e=($I(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $I(t){return Th()?t instanceof Node||t instanceof Sn(t).Node:!1}function lo(t){return Th()?t instanceof Element||t instanceof Sn(t).Element:!1}function Do(t){return Th()?t instanceof HTMLElement||t instanceof Sn(t).HTMLElement:!1}function pA(t){return!Th()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Sn(t).ShadowRoot}const d5=new Set(["inline","contents"]);function Hu(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=uo(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!d5.has(r)}const h5=new Set(["table","td","th"]);function p5(t){return h5.has(Oa(t))}const m5=[":popover-open",":modal"];function Ch(t){return m5.some(e=>{try{return t.matches(e)}catch{return!1}})}const g5=["transform","translate","scale","rotate","perspective"],v5=["transform","translate","scale","rotate","perspective","filter"],y5=["paint","layout","strict","content"];function m_(t){const e=g_(),n=lo(t)?uo(t):t;return g5.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||v5.some(o=>(n.willChange||"").includes(o))||y5.some(o=>(n.contain||"").includes(o))}function _5(t){let e=or(t);for(;Do(e)&&!ba(e);){if(m_(e))return e;if(Ch(e))return null;e=or(e)}return null}function g_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const S5=new Set(["html","body","#document"]);function ba(t){return S5.has(Oa(t))}function uo(t){return Sn(t).getComputedStyle(t)}function Ah(t){return lo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function or(t){if(Oa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pA(t)&&t.host||Oo(t);return pA(e)?e.host:e}function GI(t){const e=or(t);return ba(e)?t.ownerDocument?t.ownerDocument.body:t.body:Do(e)&&Hu(e)?e:GI(e)}function pu(t,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=GI(t),a=r===((o=t.ownerDocument)==null?void 0:o.body),u=Sn(r);if(a){const c=Wv(u);return e.concat(u,u.visualViewport||[],Hu(r)?r:[],c&&n?pu(c):[])}return e.concat(r,pu(r,[],n))}function Wv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VI(t){const e=uo(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=Do(t),a=r?t.offsetWidth:n,u=r?t.offsetHeight:o,c=Ud(n)!==a||Ud(o)!==u;return c&&(n=a,o=u),{width:n,height:o,$:c}}function v_(t){return lo(t)?t:t.contextElement}function ha(t){const e=v_(t);if(!Do(e))return No(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:a}=VI(e);let u=(a?Ud(n.width):n.width)/o,c=(a?Ud(n.height):n.height)/r;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const E5=No(0);function zI(t){const e=Sn(t);return!g_()||!e.visualViewport?E5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function b5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Sn(t)?!1:e}function Wr(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=v_(t);let u=No(1);e&&(o?lo(o)&&(u=ha(o)):u=ha(t));const c=b5(a,n,o)?zI(a):No(0);let h=(r.left+c.x)/u.x,d=(r.top+c.y)/u.y,m=r.width/u.x,y=r.height/u.y;if(a){const S=Sn(a),E=o&&lo(o)?Sn(o):o;let C=S,A=Wv(C);for(;A&&o&&E!==C;){const x=ha(A),M=A.getBoundingClientRect(),I=uo(A),N=M.left+(A.clientLeft+parseFloat(I.paddingLeft))*x.x,D=M.top+(A.clientTop+parseFloat(I.paddingTop))*x.y;h*=x.x,d*=x.y,m*=x.x,y*=x.y,h+=N,d+=D,C=Sn(A),A=Wv(C)}}return Fd({width:m,height:y,x:h,y:d})}function xh(t,e){const n=Ah(t).scrollLeft;return e?e.left+n:Wr(Oo(t)).left+n}function qI(t,e){const n=t.getBoundingClientRect(),o=n.left+e.scrollLeft-xh(t,n),r=n.top+e.scrollTop;return{x:o,y:r}}function w5(t){let{elements:e,rect:n,offsetParent:o,strategy:r}=t;const a=r==="fixed",u=Oo(o),c=e?Ch(e.floating):!1;if(o===u||c&&a)return n;let h={scrollLeft:0,scrollTop:0},d=No(1);const m=No(0),y=Do(o);if((y||!y&&!a)&&((Oa(o)!=="body"||Hu(u))&&(h=Ah(o)),Do(o))){const E=Wr(o);d=ha(o),m.x=E.x+o.clientLeft,m.y=E.y+o.clientTop}const S=u&&!y&&!a?qI(u,h):No(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-h.scrollLeft*d.x+m.x+S.x,y:n.y*d.y-h.scrollTop*d.y+m.y+S.y}}function T5(t){return Array.from(t.getClientRects())}function C5(t){const e=Oo(t),n=Ah(t),o=t.ownerDocument.body,r=vn(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),a=vn(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let u=-n.scrollLeft+xh(t);const c=-n.scrollTop;return uo(o).direction==="rtl"&&(u+=vn(e.clientWidth,o.clientWidth)-r),{width:r,height:a,x:u,y:c}}const mA=25;function A5(t,e){const n=Sn(t),o=Oo(t),r=n.visualViewport;let a=o.clientWidth,u=o.clientHeight,c=0,h=0;if(r){a=r.width,u=r.height;const m=g_();(!m||m&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}const d=xh(o);if(d<=0){const m=o.ownerDocument,y=m.body,S=getComputedStyle(y),E=m.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,C=Math.abs(o.clientWidth-y.clientWidth-E);C<=mA&&(a-=C)}else d<=mA&&(a+=d);return{width:a,height:u,x:c,y:h}}const x5=new Set(["absolute","fixed"]);function R5(t,e){const n=Wr(t,!0,e==="fixed"),o=n.top+t.clientTop,r=n.left+t.clientLeft,a=Do(t)?ha(t):No(1),u=t.clientWidth*a.x,c=t.clientHeight*a.y,h=r*a.x,d=o*a.y;return{width:u,height:c,x:h,y:d}}function gA(t,e,n){let o;if(e==="viewport")o=A5(t,n);else if(e==="document")o=C5(Oo(t));else if(lo(e))o=R5(e,n);else{const r=zI(t);o={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Fd(o)}function JI(t,e){const n=or(t);return n===e||!lo(n)||ba(n)?!1:uo(n).position==="fixed"||JI(n,e)}function M5(t,e){const n=e.get(t);if(n)return n;let o=pu(t,[],!1).filter(c=>lo(c)&&Oa(c)!=="body"),r=null;const a=uo(t).position==="fixed";let u=a?or(t):t;for(;lo(u)&&!ba(u);){const c=uo(u),h=m_(u);!h&&c.position==="fixed"&&(r=null),(a?!h&&!r:!h&&c.position==="static"&&!!r&&x5.has(r.position)||Hu(u)&&!h&&JI(t,u))?o=o.filter(m=>m!==u):r=c,u=or(u)}return e.set(t,o),o}function N5(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const u=[...n==="clippingAncestors"?Ch(e)?[]:M5(e,this._c):[].concat(n),o],c=u[0],h=u.reduce((d,m)=>{const y=gA(e,m,r);return d.top=vn(y.top,d.top),d.right=nr(y.right,d.right),d.bottom=nr(y.bottom,d.bottom),d.left=vn(y.left,d.left),d},gA(e,c,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function I5(t){const{width:e,height:n}=VI(t);return{width:e,height:n}}function D5(t,e,n){const o=Do(e),r=Oo(e),a=n==="fixed",u=Wr(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const h=No(0);function d(){h.x=xh(r)}if(o||!o&&!a)if((Oa(e)!=="body"||Hu(r))&&(c=Ah(e)),o){const E=Wr(e,!0,a,e);h.x=E.x+e.clientLeft,h.y=E.y+e.clientTop}else r&&d();a&&!o&&r&&d();const m=r&&!o&&!a?qI(r,c):No(0),y=u.left+c.scrollLeft-h.x-m.x,S=u.top+c.scrollTop-h.y-m.y;return{x:y,y:S,width:u.width,height:u.height}}function kg(t){return uo(t).position==="static"}function vA(t,e){if(!Do(t)||uo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Oo(t)===n&&(n=n.ownerDocument.body),n}function KI(t,e){const n=Sn(t);if(Ch(t))return n;if(!Do(t)){let r=or(t);for(;r&&!ba(r);){if(lo(r)&&!kg(r))return r;r=or(r)}return n}let o=vA(t,e);for(;o&&p5(o)&&kg(o);)o=vA(o,e);return o&&ba(o)&&kg(o)&&!m_(o)?n:o||_5(t)||n}const O5=async function(t){const e=this.getOffsetParent||KI,n=this.getDimensions,o=await n(t.floating);return{reference:D5(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function P5(t){return uo(t).direction==="rtl"}const k5={convertOffsetParentRelativeRectToViewportRelativeRect:w5,getDocumentElement:Oo,getClippingRect:N5,getOffsetParent:KI,getElementRects:O5,getClientRects:T5,getDimensions:I5,getScale:ha,isElement:lo,isRTL:P5};function YI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function L5(t,e){let n=null,o;const r=Oo(t);function a(){var c;clearTimeout(o),(c=n)==null||c.disconnect(),n=null}function u(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const d=t.getBoundingClientRect(),{left:m,top:y,width:S,height:E}=d;if(c||e(),!S||!E)return;const C=Lf(y),A=Lf(r.clientWidth-(m+S)),x=Lf(r.clientHeight-(y+E)),M=Lf(m),N={rootMargin:-C+"px "+-A+"px "+-x+"px "+-M+"px",threshold:vn(0,nr(1,h))||1};let D=!0;function L(U){const O=U[0].intersectionRatio;if(O!==h){if(!D)return u();O?u(!1,O):o=setTimeout(()=>{u(!1,1e-7)},1e3)}O===1&&!YI(d,t.getBoundingClientRect())&&u(),D=!1}try{n=new IntersectionObserver(L,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(L,N)}n.observe(t)}return u(!0),a}function U5(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=o,d=v_(t),m=r||a?[...d?pu(d):[],...pu(e)]:[];m.forEach(M=>{r&&M.addEventListener("scroll",n,{passive:!0}),a&&M.addEventListener("resize",n)});const y=d&&c?L5(d,n):null;let S=-1,E=null;u&&(E=new ResizeObserver(M=>{let[I]=M;I&&I.target===d&&E&&(E.unobserve(e),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var N;(N=E)==null||N.observe(e)})),n()}),d&&!h&&E.observe(d),E.observe(e));let C,A=h?Wr(t):null;h&&x();function x(){const M=Wr(t);A&&!YI(A,M)&&n(),A=M,C=requestAnimationFrame(x)}return n(),()=>{var M;m.forEach(I=>{r&&I.removeEventListener("scroll",n),a&&I.removeEventListener("resize",n)}),y?.(),(M=E)==null||M.disconnect(),E=null,h&&cancelAnimationFrame(C)}}const B5=l5,F5=u5,H5=r5,$5=f5,G5=s5,yA=i5,V5=c5,z5=(t,e,n)=>{const o=new Map,r={platform:k5,...n},a={...r.platform,_c:o};return o5(t,e,{...r,platform:a})};var q5=typeof document<"u",J5=function(){},rd=q5?T.useLayoutEffect:J5;function Hd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,o,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(o=n;o--!==0;)if(!Hd(t[o],e[o]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(e,r[o]))return!1;for(o=n;o--!==0;){const a=r[o];if(!(a==="_owner"&&t.$$typeof)&&!Hd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function jI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _A(t,e){const n=jI(t);return Math.round(e*n)/n}function Lg(t){const e=T.useRef(t);return rd(()=>{e.current=t}),e}function K5(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:o=[],platform:r,elements:{reference:a,floating:u}={},transform:c=!0,whileElementsMounted:h,open:d}=t,[m,y]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[S,E]=T.useState(o);Hd(S,o)||E(o);const[C,A]=T.useState(null),[x,M]=T.useState(null),I=T.useCallback(ee=>{ee!==U.current&&(U.current=ee,A(ee))},[]),N=T.useCallback(ee=>{ee!==O.current&&(O.current=ee,M(ee))},[]),D=a||C,L=u||x,U=T.useRef(null),O=T.useRef(null),q=T.useRef(m),J=h!=null,j=Lg(h),W=Lg(r),re=Lg(d),oe=T.useCallback(()=>{if(!U.current||!O.current)return;const ee={placement:e,strategy:n,middleware:S};W.current&&(ee.platform=W.current),z5(U.current,O.current,ee).then(ne=>{const ce={...ne,isPositioned:re.current!==!1};ae.current&&!Hd(q.current,ce)&&(q.current=ce,Xd.flushSync(()=>{y(ce)}))})},[S,e,n,W,re]);rd(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,y(ee=>({...ee,isPositioned:!1})))},[d]);const ae=T.useRef(!1);rd(()=>(ae.current=!0,()=>{ae.current=!1}),[]),rd(()=>{if(D&&(U.current=D),L&&(O.current=L),D&&L){if(j.current)return j.current(D,L,oe);oe()}},[D,L,oe,j,J]);const de=T.useMemo(()=>({reference:U,floating:O,setReference:I,setFloating:N}),[I,N]),F=T.useMemo(()=>({reference:D,floating:L}),[D,L]),Q=T.useMemo(()=>{const ee={position:n,left:0,top:0};if(!F.floating)return ee;const ne=_A(F.floating,m.x),ce=_A(F.floating,m.y);return c?{...ee,transform:"translate("+ne+"px, "+ce+"px)",...jI(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:ce}},[n,c,F.floating,m.x,m.y]);return T.useMemo(()=>({...m,update:oe,refs:de,elements:F,floatingStyles:Q}),[m,oe,de,F,Q])}const Y5=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:o,padding:r}=typeof t=="function"?t(n):t;return o&&e(o)?o.current!=null?yA({element:o.current,padding:r}).fn(n):{}:o?yA({element:o,padding:r}).fn(n):{}}}},j5=(t,e)=>({...B5(t),options:[t,e]}),X5=(t,e)=>({...F5(t),options:[t,e]}),W5=(t,e)=>({...V5(t),options:[t,e]}),Q5=(t,e)=>({...H5(t),options:[t,e]}),Z5=(t,e)=>({...$5(t),options:[t,e]}),e8=(t,e)=>({...G5(t),options:[t,e]}),t8=(t,e)=>({...Y5(t),options:[t,e]});var n8="Arrow",XI=T.forwardRef((t,e)=>{const{children:n,width:o=10,height:r=5,...a}=t;return w.jsx(Vt.svg,{...a,ref:e,width:o,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});XI.displayName=n8;var o8=XI;function i8(t){const[e,n]=T.useState(void 0);return tr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let u,c;if("borderBoxSize"in a){const h=a.borderBoxSize,d=Array.isArray(h)?h[0]:h;u=d.inlineSize,c=d.blockSize}else u=t.offsetWidth,c=t.offsetHeight;n({width:u,height:c})});return o.observe(t,{box:"border-box"}),()=>o.unobserve(t)}else n(void 0)},[t]),e}var y_="Popper",[WI,QI]=Fu(y_),[r8,ZI]=WI(y_),eD=t=>{const{__scopePopper:e,children:n}=t,[o,r]=T.useState(null);return w.jsx(r8,{scope:e,anchor:o,onAnchorChange:r,children:n})};eD.displayName=y_;var tD="PopperAnchor",nD=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:o,...r}=t,a=ZI(tD,n),u=T.useRef(null),c=nn(e,u),h=T.useRef(null);return T.useEffect(()=>{const d=h.current;h.current=o?.current||u.current,d!==h.current&&a.onAnchorChange(h.current)}),o?null:w.jsx(Vt.div,{...r,ref:c})});nD.displayName=tD;var __="PopperContent",[s8,a8]=WI(__),oD=T.forwardRef((t,e)=>{const{__scopePopper:n,side:o="bottom",sideOffset:r=0,align:a="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:S=!1,updatePositionStrategy:E="optimized",onPlaced:C,...A}=t,x=ZI(__,n),[M,I]=T.useState(null),N=nn(e,ve=>I(ve)),[D,L]=T.useState(null),U=i8(D),O=U?.width??0,q=U?.height??0,J=o+(a!=="center"?"-"+a:""),j=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},W=Array.isArray(d)?d:[d],re=W.length>0,oe={padding:j,boundary:W.filter(u8),altBoundary:re},{refs:ae,floatingStyles:de,placement:F,isPositioned:Q,middlewareData:ee}=K5({strategy:"fixed",placement:J,whileElementsMounted:(...ve)=>U5(...ve,{animationFrame:E==="always"}),elements:{reference:x.anchor},middleware:[j5({mainAxis:r+q,alignmentAxis:u}),h&&X5({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?W5():void 0,...oe}),h&&Q5({...oe}),Z5({...oe,apply:({elements:ve,rects:ze,availableWidth:qe,availableHeight:on})=>{const{width:wn,height:ho}=ze.reference,zt=ve.floating.style;zt.setProperty("--radix-popper-available-width",`${qe}px`),zt.setProperty("--radix-popper-available-height",`${on}px`),zt.setProperty("--radix-popper-anchor-width",`${wn}px`),zt.setProperty("--radix-popper-anchor-height",`${ho}px`)}}),D&&t8({element:D,padding:c}),c8({arrowWidth:O,arrowHeight:q}),S&&e8({strategy:"referenceHidden",...oe})]}),[ne,ce]=sD(F),k=Io(C);tr(()=>{Q&&k?.()},[Q,k]);const Y=ee.arrow?.x,se=ee.arrow?.y,le=ee.arrow?.centerOffset!==0,[me,Ee]=T.useState();return tr(()=>{M&&Ee(window.getComputedStyle(M).zIndex)},[M]),w.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:Q?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[ee.transformOrigin?.x,ee.transformOrigin?.y].join(" "),...ee.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx(s8,{scope:n,placedSide:ne,onArrowChange:L,arrowX:Y,arrowY:se,shouldHideArrow:le,children:w.jsx(Vt.div,{"data-side":ne,"data-align":ce,...A,ref:N,style:{...A.style,animation:Q?void 0:"none"}})})})});oD.displayName=__;var iD="PopperArrow",l8={top:"bottom",right:"left",bottom:"top",left:"right"},rD=T.forwardRef(function(e,n){const{__scopePopper:o,...r}=e,a=a8(iD,o),u=l8[a.placedSide];return w.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:w.jsx(o8,{...r,ref:n,style:{...r.style,display:"block"}})})});rD.displayName=iD;function u8(t){return t!==null}var c8=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:o,middlewareData:r}=e,u=r.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,h=u?0:t.arrowHeight,[d,m]=sD(n),y={start:"0%",center:"50%",end:"100%"}[m],S=(r.arrow?.x??0)+c/2,E=(r.arrow?.y??0)+h/2;let C="",A="";return d==="bottom"?(C=u?y:`${S}px`,A=`${-h}px`):d==="top"?(C=u?y:`${S}px`,A=`${o.floating.height+h}px`):d==="right"?(C=`${-h}px`,A=u?y:`${E}px`):d==="left"&&(C=`${o.floating.width+h}px`,A=u?y:`${E}px`),{data:{x:C,y:A}}}});function sD(t){const[e,n="center"]=t.split("-");return[e,n]}var aD=eD,f8=nD,d8=oD,h8=rD,p8="Portal",lD=T.forwardRef((t,e)=>{const{container:n,...o}=t,[r,a]=T.useState(!1);tr(()=>a(!0),[]);const u=n||r&&globalThis?.document?.body;return u?Pr.createPortal(w.jsx(Vt.div,{...o,ref:e}),u):null});lD.displayName=p8;function m8(t,e){return T.useReducer((n,o)=>e[n][o]??n,t)}var $u=t=>{const{present:e,children:n}=t,o=g8(e),r=typeof n=="function"?n({present:o.isPresent}):T.Children.only(n),a=nn(o.ref,v8(r));return typeof n=="function"||o.isPresent?T.cloneElement(r,{ref:a}):null};$u.displayName="Presence";function g8(t){const[e,n]=T.useState(),o=T.useRef(null),r=T.useRef(t),a=T.useRef("none"),u=t?"mounted":"unmounted",[c,h]=m8(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const d=Uf(o.current);a.current=c==="mounted"?d:"none"},[c]),tr(()=>{const d=o.current,m=r.current;if(m!==t){const S=a.current,E=Uf(d);t?h("MOUNT"):E==="none"||d?.display==="none"?h("UNMOUNT"):h(m&&S!==E?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,h]),tr(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,y=E=>{const A=Uf(o.current).includes(CSS.escape(E.animationName));if(E.target===e&&A&&(h("ANIMATION_END"),!r.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},S=E=>{E.target===e&&(a.current=Uf(o.current))};return e.addEventListener("animationstart",S),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",S),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:T.useCallback(d=>{o.current=d?getComputedStyle(d):null,n(d)},[])}}function Uf(t){return t?.animationName||"none"}function v8(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ug="rovingFocusGroup.onEntryFocus",y8={bubbles:!1,cancelable:!0},Gu="RovingFocusGroup",[Qv,uD,_8]=DI(Gu),[S8,cD]=Fu(Gu,[_8]),[E8,b8]=S8(Gu),fD=T.forwardRef((t,e)=>w.jsx(Qv.Provider,{scope:t.__scopeRovingFocusGroup,children:w.jsx(Qv.Slot,{scope:t.__scopeRovingFocusGroup,children:w.jsx(w8,{...t,ref:e})})}));fD.displayName=Gu;var w8=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:r=!1,dir:a,currentTabStopId:u,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:h,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...y}=t,S=T.useRef(null),E=nn(e,S),C=OI(a),[A,x]=f_({prop:u,defaultProp:c??null,onChange:h,caller:Gu}),[M,I]=T.useState(!1),N=Io(d),D=uD(n),L=T.useRef(!1),[U,O]=T.useState(0);return T.useEffect(()=>{const q=S.current;if(q)return q.addEventListener(Ug,N),()=>q.removeEventListener(Ug,N)},[N]),w.jsx(E8,{scope:n,orientation:o,dir:C,loop:r,currentTabStopId:A,onItemFocus:T.useCallback(q=>x(q),[x]),onItemShiftTab:T.useCallback(()=>I(!0),[]),onFocusableItemAdd:T.useCallback(()=>O(q=>q+1),[]),onFocusableItemRemove:T.useCallback(()=>O(q=>q-1),[]),children:w.jsx(Vt.div,{tabIndex:M||U===0?-1:0,"data-orientation":o,...y,ref:E,style:{outline:"none",...t.style},onMouseDown:Fe(t.onMouseDown,()=>{L.current=!0}),onFocus:Fe(t.onFocus,q=>{const J=!L.current;if(q.target===q.currentTarget&&J&&!M){const j=new CustomEvent(Ug,y8);if(q.currentTarget.dispatchEvent(j),!j.defaultPrevented){const W=D().filter(F=>F.focusable),re=W.find(F=>F.active),oe=W.find(F=>F.id===A),de=[re,oe,...W].filter(Boolean).map(F=>F.ref.current);pD(de,m)}}L.current=!1}),onBlur:Fe(t.onBlur,()=>I(!1))})})}),dD="RovingFocusGroupItem",hD=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:r=!1,tabStopId:a,children:u,...c}=t,h=du(),d=a||h,m=b8(dD,n),y=m.currentTabStopId===d,S=uD(n),{onFocusableItemAdd:E,onFocusableItemRemove:C,currentTabStopId:A}=m;return T.useEffect(()=>{if(o)return E(),()=>C()},[o,E,C]),w.jsx(Qv.ItemSlot,{scope:n,id:d,focusable:o,active:r,children:w.jsx(Vt.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:Fe(t.onMouseDown,x=>{o?m.onItemFocus(d):x.preventDefault()}),onFocus:Fe(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:Fe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){m.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const M=A8(x,m.orientation,m.dir);if(M!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let N=S().filter(D=>D.focusable).map(D=>D.ref.current);if(M==="last")N.reverse();else if(M==="prev"||M==="next"){M==="prev"&&N.reverse();const D=N.indexOf(x.currentTarget);N=m.loop?x8(N,D+1):N.slice(D+1)}setTimeout(()=>pD(N))}}),children:typeof u=="function"?u({isCurrentTabStop:y,hasTabStop:A!=null}):u})})});hD.displayName=dD;var T8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function C8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function A8(t,e,n){const o=C8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return T8[o]}function pD(t,e=!1){const n=document.activeElement;for(const o of t)if(o===n||(o.focus({preventScroll:e}),document.activeElement!==n))return}function x8(t,e){return t.map((n,o)=>t[(e+o)%t.length])}var R8=fD,M8=hD,N8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},js=new WeakMap,Bf=new WeakMap,Ff={},Bg=0,mD=function(t){return t&&(t.host||mD(t.parentNode))},I8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var o=mD(n);return o&&t.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},D8=function(t,e,n,o){var r=I8(e,Array.isArray(t)?t:[t]);Ff[n]||(Ff[n]=new WeakMap);var a=Ff[n],u=[],c=new Set,h=new Set(r),d=function(y){!y||c.has(y)||(c.add(y),d(y.parentNode))};r.forEach(d);var m=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(S){if(c.has(S))m(S);else try{var E=S.getAttribute(o),C=E!==null&&E!=="false",A=(js.get(S)||0)+1,x=(a.get(S)||0)+1;js.set(S,A),a.set(S,x),u.push(S),A===1&&C&&Bf.set(S,!0),x===1&&S.setAttribute(n,"true"),C||S.setAttribute(o,"true")}catch(M){console.error("aria-hidden: cannot operate on ",S,M)}})};return m(e),c.clear(),Bg++,function(){u.forEach(function(y){var S=js.get(y)-1,E=a.get(y)-1;js.set(y,S),a.set(y,E),S||(Bf.has(y)||y.removeAttribute(o),Bf.delete(y)),E||y.removeAttribute(n)}),Bg--,Bg||(js=new WeakMap,js=new WeakMap,Bf=new WeakMap,Ff={})}},O8=function(t,e,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(t)?t:[t]),r=N8(t);return r?(o.push.apply(o,Array.from(r.querySelectorAll("[aria-live], script"))),D8(o,r,n,"aria-hidden")):function(){return null}},Eo=function(){return Eo=Object.assign||function(e){for(var n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eo.apply(this,arguments)};function gD(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function P8(t,e,n){if(n||arguments.length===2)for(var o=0,r=e.length,a;o<r;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return t.concat(a||Array.prototype.slice.call(e))}var sd="right-scroll-bar-position",ad="width-before-scroll-bar",k8="with-scroll-bars-hidden",L8="--removed-body-scroll-bar-size";function Fg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function U8(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(o){var r=n.value;r!==o&&(n.value=o,n.callback(o,r))}}}})[0];return n.callback=e,n.facade}var B8=typeof window<"u"?T.useLayoutEffect:T.useEffect,SA=new WeakMap;function F8(t,e){var n=U8(null,function(o){return t.forEach(function(r){return Fg(r,o)})});return B8(function(){var o=SA.get(n);if(o){var r=new Set(o),a=new Set(t),u=n.current;r.forEach(function(c){a.has(c)||Fg(c,null)}),a.forEach(function(c){r.has(c)||Fg(c,u)})}SA.set(n,t)},[t]),n}function H8(t){return t}function $8(t,e){e===void 0&&(e=H8);var n=[],o=!1,r={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var u=e(a,o);return n.push(u),function(){n=n.filter(function(c){return c!==u})}},assignSyncMedium:function(a){for(o=!0;n.length;){var u=n;n=[],u.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){o=!0;var u=[];if(n.length){var c=n;n=[],c.forEach(a),u=n}var h=function(){var m=u;u=[],m.forEach(a)},d=function(){return Promise.resolve().then(h)};d(),n={push:function(m){u.push(m),d()},filter:function(m){return u=u.filter(m),n}}}};return r}function G8(t){t===void 0&&(t={});var e=$8(null);return e.options=Eo({async:!0,ssr:!1},t),e}var vD=function(t){var e=t.sideCar,n=gD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return T.createElement(o,Eo({},n))};vD.isSideCarExport=!0;function V8(t,e){return t.useMedium(e),vD}var yD=G8(),Hg=function(){},Rh=T.forwardRef(function(t,e){var n=T.useRef(null),o=T.useState({onScrollCapture:Hg,onWheelCapture:Hg,onTouchMoveCapture:Hg}),r=o[0],a=o[1],u=t.forwardProps,c=t.children,h=t.className,d=t.removeScrollBar,m=t.enabled,y=t.shards,S=t.sideCar,E=t.noRelative,C=t.noIsolation,A=t.inert,x=t.allowPinchZoom,M=t.as,I=M===void 0?"div":M,N=t.gapMode,D=gD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=S,U=F8([n,e]),O=Eo(Eo({},D),r);return T.createElement(T.Fragment,null,m&&T.createElement(L,{sideCar:yD,removeScrollBar:d,shards:y,noRelative:E,noIsolation:C,inert:A,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:N}),u?T.cloneElement(T.Children.only(c),Eo(Eo({},O),{ref:U})):T.createElement(I,Eo({},O,{className:h,ref:U}),c))});Rh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rh.classNames={fullWidth:ad,zeroRight:sd};var z8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function q8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=z8();return e&&t.setAttribute("nonce",e),t}function J8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function K8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Y8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=q8())&&(J8(e,n),K8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},j8=function(){var t=Y8();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_D=function(){var t=j8(),e=function(n){var o=n.styles,r=n.dynamic;return t(o,r),null};return e},X8={left:0,top:0,right:0,gap:0},$g=function(t){return parseInt(t||"",10)||0},W8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],o=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[$g(n),$g(o),$g(r)]},Q8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return X8;var e=W8(t),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,o-n+e[2]-e[0])}},Z8=_D(),pa="data-scroll-locked",eJ=function(t,e,n,o){var r=t.left,a=t.top,u=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(k8,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(c,"px ").concat(o,`;
  }
  body[`).concat(pa,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sd,` {
    right: `).concat(c,"px ").concat(o,`;
  }
  
  .`).concat(ad,` {
    margin-right: `).concat(c,"px ").concat(o,`;
  }
  
  .`).concat(sd," .").concat(sd,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(ad," .").concat(ad,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(pa,`] {
    `).concat(L8,": ").concat(c,`px;
  }
`)},EA=function(){var t=parseInt(document.body.getAttribute(pa)||"0",10);return isFinite(t)?t:0},tJ=function(){T.useEffect(function(){return document.body.setAttribute(pa,(EA()+1).toString()),function(){var t=EA()-1;t<=0?document.body.removeAttribute(pa):document.body.setAttribute(pa,t.toString())}},[])},nJ=function(t){var e=t.noRelative,n=t.noImportant,o=t.gapMode,r=o===void 0?"margin":o;tJ();var a=T.useMemo(function(){return Q8(r)},[r]);return T.createElement(Z8,{styles:eJ(a,!e,r,n?"":"!important")})},Zv=!1;if(typeof window<"u")try{var Hf=Object.defineProperty({},"passive",{get:function(){return Zv=!0,!0}});window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,Hf)}catch{Zv=!1}var Xs=Zv?{passive:!1}:!1,oJ=function(t){return t.tagName==="TEXTAREA"},SD=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!oJ(t)&&n[e]==="visible")},iJ=function(t){return SD(t,"overflowY")},rJ=function(t){return SD(t,"overflowX")},bA=function(t,e){var n=e.ownerDocument,o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var r=ED(t,o);if(r){var a=bD(t,o),u=a[1],c=a[2];if(u>c)return!0}o=o.parentNode}while(o&&o!==n.body);return!1},sJ=function(t){var e=t.scrollTop,n=t.scrollHeight,o=t.clientHeight;return[e,n,o]},aJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,o=t.clientWidth;return[e,n,o]},ED=function(t,e){return t==="v"?iJ(e):rJ(e)},bD=function(t,e){return t==="v"?sJ(e):aJ(e)},lJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},uJ=function(t,e,n,o,r){var a=lJ(t,window.getComputedStyle(e).direction),u=a*o,c=n.target,h=e.contains(c),d=!1,m=u>0,y=0,S=0;do{if(!c)break;var E=bD(t,c),C=E[0],A=E[1],x=E[2],M=A-x-a*C;(C||M)&&ED(t,c)&&(y+=M,S+=C);var I=c.parentNode;c=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!h&&c!==document.body||h&&(e.contains(c)||e===c));return(m&&Math.abs(y)<1||!m&&Math.abs(S)<1)&&(d=!0),d},$f=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},wA=function(t){return[t.deltaX,t.deltaY]},TA=function(t){return t&&"current"in t?t.current:t},cJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},fJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dJ=0,Ws=[];function hJ(t){var e=T.useRef([]),n=T.useRef([0,0]),o=T.useRef(),r=T.useState(dJ++)[0],a=T.useState(_D)[0],u=T.useRef(t);T.useEffect(function(){u.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var A=P8([t.lockRef.current],(t.shards||[]).map(TA),!0).filter(Boolean);return A.forEach(function(x){return x.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),A.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=T.useCallback(function(A,x){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!u.current.allowPinchZoom;var M=$f(A),I=n.current,N="deltaX"in A?A.deltaX:I[0]-M[0],D="deltaY"in A?A.deltaY:I[1]-M[1],L,U=A.target,O=Math.abs(N)>Math.abs(D)?"h":"v";if("touches"in A&&O==="h"&&U.type==="range")return!1;var q=window.getSelection(),J=q&&q.anchorNode,j=J?J===U||J.contains(U):!1;if(j)return!1;var W=bA(O,U);if(!W)return!0;if(W?L=O:(L=O==="v"?"h":"v",W=bA(O,U)),!W)return!1;if(!o.current&&"changedTouches"in A&&(N||D)&&(o.current=L),!L)return!0;var re=o.current||L;return uJ(re,x,A,re==="h"?N:D)},[]),h=T.useCallback(function(A){var x=A;if(!(!Ws.length||Ws[Ws.length-1]!==a)){var M="deltaY"in x?wA(x):$f(x),I=e.current.filter(function(L){return L.name===x.type&&(L.target===x.target||x.target===L.shadowParent)&&cJ(L.delta,M)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var N=(u.current.shards||[]).map(TA).filter(Boolean).filter(function(L){return L.contains(x.target)}),D=N.length>0?c(x,N[0]):!u.current.noIsolation;D&&x.cancelable&&x.preventDefault()}}},[]),d=T.useCallback(function(A,x,M,I){var N={name:A,delta:x,target:M,should:I,shadowParent:pJ(M)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(D){return D!==N})},1)},[]),m=T.useCallback(function(A){n.current=$f(A),o.current=void 0},[]),y=T.useCallback(function(A){d(A.type,wA(A),A.target,c(A,t.lockRef.current))},[]),S=T.useCallback(function(A){d(A.type,$f(A),A.target,c(A,t.lockRef.current))},[]);T.useEffect(function(){return Ws.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:S}),document.addEventListener("wheel",h,Xs),document.addEventListener("touchmove",h,Xs),document.addEventListener("touchstart",m,Xs),function(){Ws=Ws.filter(function(A){return A!==a}),document.removeEventListener("wheel",h,Xs),document.removeEventListener("touchmove",h,Xs),document.removeEventListener("touchstart",m,Xs)}},[]);var E=t.removeScrollBar,C=t.inert;return T.createElement(T.Fragment,null,C?T.createElement(a,{styles:fJ(r)}):null,E?T.createElement(nJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function pJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const mJ=V8(yD,hJ);var wD=T.forwardRef(function(t,e){return T.createElement(Rh,Eo({},t,{ref:e,sideCar:mJ}))});wD.classNames=Rh.classNames;var ey=["Enter"," "],gJ=["ArrowDown","PageUp","Home"],TD=["ArrowUp","PageDown","End"],vJ=[...gJ,...TD],yJ={ltr:[...ey,"ArrowRight"],rtl:[...ey,"ArrowLeft"]},_J={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Vu="Menu",[mu,SJ,EJ]=DI(Vu),[os,CD]=Fu(Vu,[EJ,QI,cD]),zu=QI(),AD=cD(),[xD,cr]=os(Vu),[bJ,qu]=os(Vu),RD=t=>{const{__scopeMenu:e,open:n=!1,children:o,dir:r,onOpenChange:a,modal:u=!0}=t,c=zu(e),[h,d]=T.useState(null),m=T.useRef(!1),y=Io(a),S=OI(r);return T.useEffect(()=>{const E=()=>{m.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>m.current=!1;return document.addEventListener("keydown",E,{capture:!0}),()=>{document.removeEventListener("keydown",E,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),w.jsx(aD,{...c,children:w.jsx(xD,{scope:e,open:n,onOpenChange:y,content:h,onContentChange:d,children:w.jsx(bJ,{scope:e,onClose:T.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:S,modal:u,children:o})})})};RD.displayName=Vu;var wJ="MenuAnchor",S_=T.forwardRef((t,e)=>{const{__scopeMenu:n,...o}=t,r=zu(n);return w.jsx(f8,{...r,...o,ref:e})});S_.displayName=wJ;var E_="MenuPortal",[TJ,MD]=os(E_,{forceMount:void 0}),ND=t=>{const{__scopeMenu:e,forceMount:n,children:o,container:r}=t,a=cr(E_,e);return w.jsx(TJ,{scope:e,forceMount:n,children:w.jsx($u,{present:n||a.open,children:w.jsx(lD,{asChild:!0,container:r,children:o})})})};ND.displayName=E_;var $n="MenuContent",[CJ,b_]=os($n),ID=T.forwardRef((t,e)=>{const n=MD($n,t.__scopeMenu),{forceMount:o=n.forceMount,...r}=t,a=cr($n,t.__scopeMenu),u=qu($n,t.__scopeMenu);return w.jsx(mu.Provider,{scope:t.__scopeMenu,children:w.jsx($u,{present:o||a.open,children:w.jsx(mu.Slot,{scope:t.__scopeMenu,children:u.modal?w.jsx(AJ,{...r,ref:e}):w.jsx(xJ,{...r,ref:e})})})})}),AJ=T.forwardRef((t,e)=>{const n=cr($n,t.__scopeMenu),o=T.useRef(null),r=nn(e,o);return T.useEffect(()=>{const a=o.current;if(a)return O8(a)},[]),w.jsx(w_,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Fe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),xJ=T.forwardRef((t,e)=>{const n=cr($n,t.__scopeMenu);return w.jsx(w_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),RJ=Ld("MenuContent.ScrollLock"),w_=T.forwardRef((t,e)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:u,disableOutsidePointerEvents:c,onEntryFocus:h,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:E,disableOutsideScroll:C,...A}=t,x=cr($n,n),M=qu($n,n),I=zu(n),N=AD(n),D=SJ(n),[L,U]=T.useState(null),O=T.useRef(null),q=nn(e,O,x.onContentChange),J=T.useRef(0),j=T.useRef(""),W=T.useRef(0),re=T.useRef(null),oe=T.useRef("right"),ae=T.useRef(0),de=C?wD:T.Fragment,F=C?{as:RJ,allowPinchZoom:!0}:void 0,Q=ne=>{const ce=j.current+ne,k=D().filter(ve=>!ve.disabled),Y=document.activeElement,se=k.find(ve=>ve.ref.current===Y)?.textValue,le=k.map(ve=>ve.textValue),me=HJ(le,ce,se),Ee=k.find(ve=>ve.textValue===me)?.ref.current;(function ve(ze){j.current=ze,window.clearTimeout(J.current),ze!==""&&(J.current=window.setTimeout(()=>ve(""),1e3))})(ce),Ee&&setTimeout(()=>Ee.focus())};T.useEffect(()=>()=>window.clearTimeout(J.current),[]),L6();const ee=T.useCallback(ne=>oe.current===re.current?.side&&GJ(ne,re.current?.area),[]);return w.jsx(CJ,{scope:n,searchRef:j,onItemEnter:T.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),onItemLeave:T.useCallback(ne=>{ee(ne)||(O.current?.focus(),U(null))},[ee]),onTriggerLeave:T.useCallback(ne=>{ee(ne)&&ne.preventDefault()},[ee]),pointerGraceTimerRef:W,onPointerGraceIntentChange:T.useCallback(ne=>{re.current=ne},[]),children:w.jsx(de,{...F,children:w.jsx(UI,{asChild:!0,trapped:r,onMountAutoFocus:Fe(a,ne=>{ne.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:w.jsx(kI,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:S,onDismiss:E,children:w.jsx(R8,{asChild:!0,...N,dir:M.dir,orientation:"vertical",loop:o,currentTabStopId:L,onCurrentTabStopIdChange:U,onEntryFocus:Fe(h,ne=>{M.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(d8,{role:"menu","aria-orientation":"vertical","data-state":YD(x.open),"data-radix-menu-content":"",dir:M.dir,...I,...A,ref:q,style:{outline:"none",...A.style},onKeyDown:Fe(A.onKeyDown,ne=>{const k=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,Y=ne.ctrlKey||ne.altKey||ne.metaKey,se=ne.key.length===1;k&&(ne.key==="Tab"&&ne.preventDefault(),!Y&&se&&Q(ne.key));const le=O.current;if(ne.target!==le||!vJ.includes(ne.key))return;ne.preventDefault();const Ee=D().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);TD.includes(ne.key)&&Ee.reverse(),BJ(Ee)}),onBlur:Fe(t.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(J.current),j.current="")}),onPointerMove:Fe(t.onPointerMove,gu(ne=>{const ce=ne.target,k=ae.current!==ne.clientX;if(ne.currentTarget.contains(ce)&&k){const Y=ne.clientX>ae.current?"right":"left";oe.current=Y,ae.current=ne.clientX}}))})})})})})})});ID.displayName=$n;var MJ="MenuGroup",T_=T.forwardRef((t,e)=>{const{__scopeMenu:n,...o}=t;return w.jsx(Vt.div,{role:"group",...o,ref:e})});T_.displayName=MJ;var NJ="MenuLabel",DD=T.forwardRef((t,e)=>{const{__scopeMenu:n,...o}=t;return w.jsx(Vt.div,{...o,ref:e})});DD.displayName=NJ;var $d="MenuItem",CA="menu.itemSelect",Mh=T.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:o,...r}=t,a=T.useRef(null),u=qu($d,t.__scopeMenu),c=b_($d,t.__scopeMenu),h=nn(e,a),d=T.useRef(!1),m=()=>{const y=a.current;if(!n&&y){const S=new CustomEvent(CA,{bubbles:!0,cancelable:!0});y.addEventListener(CA,E=>o?.(E),{once:!0}),II(y,S),S.defaultPrevented?d.current=!1:u.onClose()}};return w.jsx(OD,{...r,ref:h,disabled:n,onClick:Fe(t.onClick,m),onPointerDown:y=>{t.onPointerDown?.(y),d.current=!0},onPointerUp:Fe(t.onPointerUp,y=>{d.current||y.currentTarget?.click()}),onKeyDown:Fe(t.onKeyDown,y=>{const S=c.searchRef.current!=="";n||S&&y.key===" "||ey.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});Mh.displayName=$d;var OD=T.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:o=!1,textValue:r,...a}=t,u=b_($d,n),c=AD(n),h=T.useRef(null),d=nn(e,h),[m,y]=T.useState(!1),[S,E]=T.useState("");return T.useEffect(()=>{const C=h.current;C&&E((C.textContent??"").trim())},[a.children]),w.jsx(mu.ItemSlot,{scope:n,disabled:o,textValue:r??S,children:w.jsx(M8,{asChild:!0,...c,focusable:!o,children:w.jsx(Vt.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...a,ref:d,onPointerMove:Fe(t.onPointerMove,gu(C=>{o?u.onItemLeave(C):(u.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(t.onPointerLeave,gu(C=>u.onItemLeave(C))),onFocus:Fe(t.onFocus,()=>y(!0)),onBlur:Fe(t.onBlur,()=>y(!1))})})})}),IJ="MenuCheckboxItem",PD=T.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:o,...r}=t;return w.jsx(FD,{scope:t.__scopeMenu,checked:n,children:w.jsx(Mh,{role:"menuitemcheckbox","aria-checked":Gd(n)?"mixed":n,...r,ref:e,"data-state":x_(n),onSelect:Fe(r.onSelect,()=>o?.(Gd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});PD.displayName=IJ;var kD="MenuRadioGroup",[DJ,OJ]=os(kD,{value:void 0,onValueChange:()=>{}}),LD=T.forwardRef((t,e)=>{const{value:n,onValueChange:o,...r}=t,a=Io(o);return w.jsx(DJ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:w.jsx(T_,{...r,ref:e})})});LD.displayName=kD;var UD="MenuRadioItem",BD=T.forwardRef((t,e)=>{const{value:n,...o}=t,r=OJ(UD,t.__scopeMenu),a=n===r.value;return w.jsx(FD,{scope:t.__scopeMenu,checked:a,children:w.jsx(Mh,{role:"menuitemradio","aria-checked":a,...o,ref:e,"data-state":x_(a),onSelect:Fe(o.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});BD.displayName=UD;var C_="MenuItemIndicator",[FD,PJ]=os(C_,{checked:!1}),HD=T.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:o,...r}=t,a=PJ(C_,n);return w.jsx($u,{present:o||Gd(a.checked)||a.checked===!0,children:w.jsx(Vt.span,{...r,ref:e,"data-state":x_(a.checked)})})});HD.displayName=C_;var kJ="MenuSeparator",$D=T.forwardRef((t,e)=>{const{__scopeMenu:n,...o}=t;return w.jsx(Vt.div,{role:"separator","aria-orientation":"horizontal",...o,ref:e})});$D.displayName=kJ;var LJ="MenuArrow",GD=T.forwardRef((t,e)=>{const{__scopeMenu:n,...o}=t,r=zu(n);return w.jsx(h8,{...r,...o,ref:e})});GD.displayName=LJ;var A_="MenuSub",[UJ,VD]=os(A_),zD=t=>{const{__scopeMenu:e,children:n,open:o=!1,onOpenChange:r}=t,a=cr(A_,e),u=zu(e),[c,h]=T.useState(null),[d,m]=T.useState(null),y=Io(r);return T.useEffect(()=>(a.open===!1&&y(!1),()=>y(!1)),[a.open,y]),w.jsx(aD,{...u,children:w.jsx(xD,{scope:e,open:o,onOpenChange:y,content:d,onContentChange:m,children:w.jsx(UJ,{scope:e,contentId:du(),triggerId:du(),trigger:c,onTriggerChange:h,children:n})})})};zD.displayName=A_;var Yl="MenuSubTrigger",qD=T.forwardRef((t,e)=>{const n=cr(Yl,t.__scopeMenu),o=qu(Yl,t.__scopeMenu),r=VD(Yl,t.__scopeMenu),a=b_(Yl,t.__scopeMenu),u=T.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:h}=a,d={__scopeMenu:t.__scopeMenu},m=T.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return T.useEffect(()=>m,[m]),T.useEffect(()=>{const y=c.current;return()=>{window.clearTimeout(y),h(null)}},[c,h]),w.jsx(S_,{asChild:!0,...d,children:w.jsx(OD,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":YD(n.open),...t,ref:wh(e,r.onTriggerChange),onClick:y=>{t.onClick?.(y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Fe(t.onPointerMove,gu(y=>{a.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!n.open&&!u.current&&(a.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Fe(t.onPointerLeave,gu(y=>{m();const S=n.content?.getBoundingClientRect();if(S){const E=n.content?.dataset.side,C=E==="right",A=C?-5:5,x=S[C?"left":"right"],M=S[C?"right":"left"];a.onPointerGraceIntentChange({area:[{x:y.clientX+A,y:y.clientY},{x,y:S.top},{x:M,y:S.top},{x:M,y:S.bottom},{x,y:S.bottom}],side:E}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(y),y.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(t.onKeyDown,y=>{const S=a.searchRef.current!=="";t.disabled||S&&y.key===" "||yJ[o.dir].includes(y.key)&&(n.onOpenChange(!0),n.content?.focus(),y.preventDefault())})})})});qD.displayName=Yl;var JD="MenuSubContent",KD=T.forwardRef((t,e)=>{const n=MD($n,t.__scopeMenu),{forceMount:o=n.forceMount,...r}=t,a=cr($n,t.__scopeMenu),u=qu($n,t.__scopeMenu),c=VD(JD,t.__scopeMenu),h=T.useRef(null),d=nn(e,h);return w.jsx(mu.Provider,{scope:t.__scopeMenu,children:w.jsx($u,{present:o||a.open,children:w.jsx(mu.Slot,{scope:t.__scopeMenu,children:w.jsx(w_,{id:c.contentId,"aria-labelledby":c.triggerId,...r,ref:d,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{u.isUsingKeyboardRef.current&&h.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Fe(t.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Fe(t.onEscapeKeyDown,m=>{u.onClose(),m.preventDefault()}),onKeyDown:Fe(t.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),S=_J[u.dir].includes(m.key);y&&S&&(a.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});KD.displayName=JD;function YD(t){return t?"open":"closed"}function Gd(t){return t==="indeterminate"}function x_(t){return Gd(t)?"indeterminate":t?"checked":"unchecked"}function BJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function FJ(t,e){return t.map((n,o)=>t[(e+o)%t.length])}function HJ(t,e,n){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let u=FJ(t,Math.max(a,0));r.length===1&&(u=u.filter(d=>d!==n));const h=u.find(d=>d.toLowerCase().startsWith(r.toLowerCase()));return h!==n?h:void 0}function $J(t,e){const{x:n,y:o}=t;let r=!1;for(let a=0,u=e.length-1;a<e.length;u=a++){const c=e[a],h=e[u],d=c.x,m=c.y,y=h.x,S=h.y;m>o!=S>o&&n<(y-d)*(o-m)/(S-m)+d&&(r=!r)}return r}function GJ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return $J(n,e)}function gu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var VJ=RD,zJ=S_,qJ=ND,JJ=ID,KJ=T_,YJ=DD,jJ=Mh,XJ=PD,WJ=LD,QJ=BD,ZJ=HD,eK=$D,tK=GD,nK=zD,oK=qD,iK=KD,Nh="DropdownMenu",[rK]=Fu(Nh,[CD]),Bt=CD(),[sK,jD]=rK(Nh),XD=t=>{const{__scopeDropdownMenu:e,children:n,dir:o,open:r,defaultOpen:a,onOpenChange:u,modal:c=!0}=t,h=Bt(e),d=T.useRef(null),[m,y]=f_({prop:r,defaultProp:a??!1,onChange:u,caller:Nh});return w.jsx(sK,{scope:e,triggerId:du(),triggerRef:d,contentId:du(),open:m,onOpenChange:y,onOpenToggle:T.useCallback(()=>y(S=>!S),[y]),modal:c,children:w.jsx(VJ,{...h,open:m,onOpenChange:y,dir:o,modal:c,children:n})})};XD.displayName=Nh;var WD="DropdownMenuTrigger",QD=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...r}=t,a=jD(WD,n),u=Bt(n);return w.jsx(zJ,{asChild:!0,...u,children:w.jsx(Vt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...r,ref:wh(e,a.triggerRef),onPointerDown:Fe(t.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Fe(t.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});QD.displayName=WD;var aK="DropdownMenuPortal",ZD=t=>{const{__scopeDropdownMenu:e,...n}=t,o=Bt(e);return w.jsx(qJ,{...o,...n})};ZD.displayName=aK;var eO="DropdownMenuContent",tO=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=jD(eO,n),a=Bt(n),u=T.useRef(!1);return w.jsx(JJ,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...o,ref:e,onCloseAutoFocus:Fe(t.onCloseAutoFocus,c=>{u.current||r.triggerRef.current?.focus(),u.current=!1,c.preventDefault()}),onInteractOutside:Fe(t.onInteractOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,m=h.button===2||d;(!r.modal||m)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tO.displayName=eO;var lK="DropdownMenuGroup",uK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(KJ,{...r,...o,ref:e})});uK.displayName=lK;var cK="DropdownMenuLabel",fK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(YJ,{...r,...o,ref:e})});fK.displayName=cK;var dK="DropdownMenuItem",hK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(jJ,{...r,...o,ref:e})});hK.displayName=dK;var pK="DropdownMenuCheckboxItem",mK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(XJ,{...r,...o,ref:e})});mK.displayName=pK;var gK="DropdownMenuRadioGroup",vK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(WJ,{...r,...o,ref:e})});vK.displayName=gK;var yK="DropdownMenuRadioItem",_K=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(QJ,{...r,...o,ref:e})});_K.displayName=yK;var SK="DropdownMenuItemIndicator",EK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(ZJ,{...r,...o,ref:e})});EK.displayName=SK;var bK="DropdownMenuSeparator",wK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(eK,{...r,...o,ref:e})});wK.displayName=bK;var TK="DropdownMenuArrow",CK=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(tK,{...r,...o,ref:e})});CK.displayName=TK;var AK=t=>{const{__scopeDropdownMenu:e,children:n,open:o,onOpenChange:r,defaultOpen:a}=t,u=Bt(e),[c,h]=f_({prop:o,defaultProp:a??!1,onChange:r,caller:"DropdownMenuSub"});return w.jsx(nK,{...u,open:c,onOpenChange:h,children:n})},xK="DropdownMenuSubTrigger",nO=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(oK,{...r,...o,ref:e})});nO.displayName=xK;var RK="DropdownMenuSubContent",oO=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...o}=t,r=Bt(n);return w.jsx(iK,{...r,...o,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oO.displayName=RK;var MK=XD,NK=QD,IK=ZD,DK=tO,AA=AK,xA=nO,RA=oO;const OK=Tt(({scene:t})=>{if(!t.sceneJson||!t.sceneJson.data)return null;const e=t.sceneJson.data.tags,n=t.project?.artbook,o=a=>{t.addTag(a)};if(!n)return null;const r=a=>w.jsxs(MK,{children:[w.jsx(NK,{className:"dropdown-trigger",children:"Add Tag"}),w.jsx(IK,{children:w.jsx(DK,{className:"dropdown-content",align:"start",children:Object.entries(a).map(([u,c])=>w.jsxs(AA,{children:[w.jsx(xA,{className:"submenu-trigger",children:u}),w.jsx(RA,{className:"dropdown-content",children:Object.entries(c).map(([h,d])=>w.jsxs(AA,{children:[w.jsx(xA,{className:"submenu-trigger",children:h}),w.jsx(RA,{className:"dropdown-content",children:d.map(m=>w.jsx(g6,{art:m,onClick:()=>o(m.path)},m.path))})]},h))})]},u))})})]});return w.jsx(Bu,{label:"Tags",headerExtra:w.jsxs("div",{className:"d-flex align-items-center gap-2",children:[r(n.data),w.jsx(c_,{onClick:()=>{t.generateTags()},className:"btn-outline-success",label:"Generate Tags",is_loading:t.is_generating_tags}),w.jsx(lt,{onClick:()=>t.project?.artbook?.log(),label:"Log"})]}),children:e.length?w.jsx("ul",{className:"list-group list-group-flush",children:e.map((a,u)=>{const c=n.getTag(a);return c?w.jsx("li",{className:"list-group-item",children:w.jsx(m6,{art:c,scene:t})},u):null})}):w.jsx("div",{children:"No tags yet."})})}),Vd=({value:t,options:e,onChange:n,label:o,className:r=""})=>w.jsxs("div",{className:"btn-group",role:"group",children:[o&&w.jsx("span",{className:"btn btn-sm btn-outline-secondary disabled",children:o}),w.jsx("div",{className:`btn btn-sm btn-outline-secondary p-0 ${r}`,children:w.jsx("select",{className:"form-select form-select-sm border-0 rounded-0",value:t,onChange:a=>n?.(a.target.value),children:e.map(a=>w.jsx("option",{value:a,children:a},a))})})]}),ou=({isLoading:t,className:e="",asButton:n=!1})=>{const o=w.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{animation:t?void 0:"none",borderColor:t?void 0:"#6c757d"}});return n?w.jsx("button",{type:"button",className:`btn btn-sm btn-outline-secondary disabled d-flex align-items-center justify-content-center ${e}`,tabIndex:-1,style:{pointerEvents:"none"},children:o}):w.jsx("span",{className:e,children:o})},ty=({buttons:t,content:e,className:n=""})=>{const[o,r]=T.useState(!1);return w.jsxs("div",{className:`w-100 ${n}`,style:{display:"inline-block"},children:[w.jsxs("div",{className:"btn-group",role:"group",children:[t,w.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>r(a=>!a),"aria-label":"Toggle settings",type:"button",style:{borderBottomRightRadius:o?0:void 0},children:""})]}),o&&w.jsx("div",{className:"w-100 border p-2",style:{borderTopLeftRadius:0,borderTopRightRadius:5,borderBottomLeftRadius:5,borderBottomRightRadius:5,backgroundColor:"#383838ff",marginTop:0},children:e})]})},PK=Tt(({scene:t})=>{if(!t.sceneJson)return w.jsx("div",{children:"No scene data available."});const e=async()=>{window.confirm(`Are you sure you want to delete scene "${t.folder.name}"?`)&&await t.delete()},n=async()=>{t.createShotsFromShotsJson()};return w.jsxs("div",{children:[w.jsxs("div",{style:{marginBottom:"10px"},children:[w.jsx(lt,{onClick:e,label:"Delete Scene",className:"btn-outline-danger"}),w.jsx(lt,{onClick:()=>t.log(),label:"LOG"})]}),w.jsx(ty,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{const o=await t.generateShotsJson();t.sceneJson?.updateField("shotsjson",o)},children:" Split Into Shots "}),w.jsx(Vd,{value:t.project.workflows.split_scene_into_shots.model,options:RI,onChange:o=>{t.project.updateWorkflow("split_scene_into_shots","model",o)}}),w.jsx(ou,{isLoading:t.is_generating_shotsjson,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[w.jsx(eo,{localJson:t.sceneJson,field:"split_prompt",fitHeight:!0}),w.jsx(eo,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/system_message",fitHeight:!0}),w.jsx(eo,{localJson:t.project.projinfo,field:"workflows/split_scene_into_shots/prompt",fitHeight:!0})]})}),w.jsx(eo,{localJson:t.sceneJson,field:"script",fitHeight:!0}),w.jsx(eo,{localJson:t.sceneJson,field:"shotsjson",fitHeight:!0,headerExtra:w.jsx(lt,{onClick:n,label:"Create Shots"})}),w.jsx(OK,{scene:t}),w.jsx("div",{style:{height:"500px"}})]})}),iO=({label:t,value:e,onToggle:n,useIndicator:o=!1})=>o?w.jsx("div",{onClick:()=>n(!e),style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:e?"green":"transparent",border:"2px solid green",cursor:"pointer"}}):w.jsx("button",{className:`btn btn-sm ${e?"btn-success":"btn-outline-secondary"}`,onClick:()=>n(!e),children:t}),Gg="https://cdn.pixabay.com/photo/2021/05/09/06/07/dog-6240043_1280.jpg",kK=Tt(({shot:t,isSelected:e,onClick:n})=>{const[o,r]=T.useState(Gg);return T.useEffect(()=>{let a=!1;return(async()=>{if(t.srcImage)try{const c=await t.srcImage.getUrlObject();!a&&c&&r(c)}catch(c){console.error("Failed to load srcImage URL:",c),a||r(Gg)}else r(Gg)})(),()=>{a=!0}},[t.srcImage]),w.jsxs("div",{className:"flex-shrink-0 border rounded position-relative d-flex align-items-center justify-content-center",style:{height:"100%",cursor:"pointer",borderWidth:e?2:1,borderColor:e?"#0d6efd":"#dee2e6"},onClick:()=>n(t),children:[w.jsx("img",{src:o,alt:t.folder.name,className:"img-fluid",style:{height:"100%",width:"auto",objectFit:"contain",display:"block"}}),w.jsx("div",{className:"position-absolute text-white px-1",style:{bottom:0,left:0,backgroundColor:"rgba(0,0,0,0.5)",fontSize:"0.75rem",borderTopRightRadius:"4px"},children:t.folder.name}),w.jsx("div",{className:"position-absolute",style:{top:2,right:2},onClick:a=>a.stopPropagation(),children:w.jsx(iO,{label:"Finished",value:!!t.shotJson?.data?.finished,useIndicator:!0,onToggle:a=>{t.shotJson&&t.shotJson.updateField("finished",a)}})})]})}),LK=({initialHeight:t=80,minHeight:e=30,children:n})=>{const[o,r]=T.useState(t),a=T.useRef(null),u=T.useRef(!1),c=y=>{u.current=!0,y.preventDefault()},h=y=>{if(!u.current||!a.current)return;const S=a.current.getBoundingClientRect(),E=y.clientY-S.top;E>e&&r(E)},d=()=>{u.current=!1};T.useEffect(()=>(window.addEventListener("mousemove",h),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",d)}),[]);const m=6;return w.jsxs("div",{ref:a,className:"position-relative",style:{height:`${o}px`},children:[w.jsx("div",{style:{height:"100%",paddingBottom:`${m}px`,boxSizing:"border-box"},children:n}),w.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:`${m}px`,cursor:"ns-resize",zIndex:10,backgroundColor:"#0d6efd",opacity:.5},onMouseDown:c})]})},Vg=({label:t="Media Gallery",children:e,defaultCollapsed:n=!1,className:o="",headerExtra:r})=>w.jsx(Bu,{label:t,defaultCollapsed:n,className:o,headerExtra:r,children:w.jsx("div",{className:"d-flex flex-wrap gap-2",children:e})}),UK=({localImage:t,height:e=150,topRightExtra:n,onClick:o})=>{const[r,a]=T.useState(null),[u,c]=T.useState(!1);return T.useEffect(()=>{let h=!0;return(async()=>{try{const m=await t.getUrlObject();h&&m&&a(m)}catch(m){console.error("Error loading LocalImage",m)}})(),()=>{h=!1}},[t]),r?w.jsxs("div",{className:"position-relative d-inline-block border rounded",style:{height:`${e}px`,cursor:"pointer"},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[w.jsx("img",{src:r,alt:"Media",className:"img-fluid",onClick:o,style:{height:`${e}px`,width:"auto",objectFit:"contain",display:"block"}}),n&&u&&w.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px",zIndex:10,display:"flex",gap:"5px"},children:n})]}):w.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded p-2",style:{height:`${e}px`,width:"auto"},children:"Loading..."})};function it(t,e="Assertion error"){if(!t)throw Error(e)}function ny(t,e){return e.sort(t==="horizontal"?BK:FK)}function BK(t,e){const n=t.element.offsetLeft-e.element.offsetLeft;return n!==0?n:t.element.offsetWidth-e.element.offsetWidth}function FK(t,e){const n=t.element.offsetTop-e.element.offsetTop;return n!==0?n:t.element.offsetHeight-e.element.offsetHeight}function Ih({group:t}){const{orientation:e,panels:n}=t;return n.reduce((o,r)=>(o+=e==="horizontal"?r.element.offsetWidth:r.element.offsetHeight,o),0)}function rO(t){const{element:e,orientation:n,panels:o,separators:r}=t,a=ny(n,Array.from(e.children).filter(d=>d instanceof HTMLElement).map(d=>({element:d}))).map(({element:d})=>d),u=[];let c,h;for(const d of a){const m=o.find(y=>y.element===d);if(m){if(c){const y=c.element.getBoundingClientRect(),S=d.getBoundingClientRect();u.push({group:t,groupSize:Ih({group:t}),panels:[c,m],separator:h,rect:n==="horizontal"?new DOMRect(y.right,S.top,S.left-y.right,S.height):new DOMRect(S.left,y.bottom,S.width,S.top-y.bottom)})}c=m,h=void 0}else{const y=r.find(S=>S.element===d);y?h=y:(c=void 0,h=void 0)}}return u}function HK(t,e){const n=getComputedStyle(t),o=parseFloat(n.fontSize);return e*o}function $K(t,e){const n=getComputedStyle(t.ownerDocument.body),o=parseFloat(n.fontSize);return e*o}function GK(t){return t/100*window.innerHeight}function VK(t){return t/100*window.innerWidth}function zK(t){switch(typeof t){case"number":return[t,"px"];case"string":{const e=parseFloat(t);return t.endsWith("%")?[e,"%"]:t.endsWith("px")?[e,"px"]:t.endsWith("rem")?[e,"rem"]:t.endsWith("em")?[e,"em"]:t.endsWith("vh")?[e,"vh"]:t.endsWith("vw")?[e,"vw"]:[e,"%"]}}}function Gf({groupSize:t,panelElement:e,styleProp:n}){let o;const[r,a]=zK(n);switch(a){case"%":{o=r/100*t;break}case"px":{o=r;break}case"rem":{o=$K(e,r);break}case"em":{o=HK(e,r);break}case"vh":{o=GK(r);break}case"vw":{o=VK(r);break}}return o}function to(t){return parseFloat(t.toFixed(3))}function MA(t){const{panels:e}=t,n=Ih({group:t});return e.map(o=>{const{element:r,panelConstraints:a}=o;let u=0;if(a.collapsedSize){const m=Gf({groupSize:n,panelElement:r,styleProp:a.collapsedSize});u=to(m/n*100)}let c;if(a.defaultSize){const m=Gf({groupSize:n,panelElement:r,styleProp:a.defaultSize});c=to(m/n*100)}let h=0;if(a.minSize){const m=Gf({groupSize:n,panelElement:r,styleProp:a.minSize});h=to(m/n*100)}let d=100;if(a.maxSize){const m=Gf({groupSize:n,panelElement:r,styleProp:a.maxSize});d=to(m/n*100)}return{collapsedSize:u,collapsible:a.collapsible===!0,defaultSize:c,minSize:h,maxSize:d,panelId:o.id}})}class qK{#e={};addListener(e,n){const o=this.#e[e];return o===void 0?this.#e[e]=[n]:o.includes(n)||o.push(n),()=>{this.removeListener(e,n)}}emit(e,n){const o=this.#e[e];if(o!==void 0)if(o.length===1)o[0].call(null,n);else{let r=!1,a=null;const u=Array.from(o);for(let c=0;c<u.length;c++){const h=u[c];try{h.call(null,n)}catch(d){a===null&&(r=!0,a=d)}}if(r)throw a}}removeAllListeners(){this.#e={}}removeListener(e,n){const o=this.#e[e];if(o!==void 0){const r=o.indexOf(n);r>=0&&o.splice(r,1)}}}function Gt(t,e,n=0){return Math.abs(to(t)-to(e))<=n}let Pn={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const Fr=new qK;function Po(){return Pn}function Gn(t){const e=typeof t=="function"?t(Pn):t;if(Pn===e)return Pn;const n=Pn;return Pn={...Pn,...e},e.cursorFlags!==void 0&&Fr.emit("cursorFlagsChange",Pn.cursorFlags),e.interactionState!==void 0&&Fr.emit("interactionStateChange",Pn.interactionState),e.mountedGroups!==void 0&&(Pn.mountedGroups.forEach((o,r)=>{o.derivedPanelConstraints.forEach(a=>{if(a.collapsible){const{layout:u}=n.mountedGroups.get(r)??{};if(u){const c=Gt(a.collapsedSize,o.layout[a.panelId]),h=Gt(a.collapsedSize,u[a.panelId]);c&&!h&&(r.inMemoryLastExpandedPanelSizes[a.panelId]=u[a.panelId])}}})}),Fr.emit("mountedGroupsChange",Pn.mountedGroups)),Pn}const JK=t=>t,zg=()=>{},sO=1,aO=2,lO=4,uO=8,NA={coarse:10,precise:5};function KK({cursorFlags:t,groups:e,state:n}){let o=0,r=0;switch(n){case"active":case"hover":e.forEach(a=>{if(!a.disableCursor)switch(a.orientation){case"horizontal":{o++;break}case"vertical":{r++;break}}})}if(o===0&&r===0)return null;switch(n){case"active":{const a=(t&sO)!==0,u=(t&aO)!==0,c=(t&lO)!==0,h=(t&uO)!==0;if(t){if(a)return c?"se-resize":h?"ne-resize":"e-resize";if(u)return c?"sw-resize":h?"nw-resize":"w-resize";if(c)return"s-resize";if(h)return"n-resize"}break}}return o>0&&r>0?"move":o>0?"ew-resize":"ns-resize"}let qg,_o;function R_(){_o===void 0&&(_o=new CSSStyleSheet,document.adoptedStyleSheets=[_o]);const{cursorFlags:t,interactionState:e}=Po();switch(e.state){case"active":case"hover":{const n=KK({cursorFlags:t,groups:e.hitRegions.map(r=>r.group),state:e.state}),o=`*{cursor: ${n} !important; ${e.state==="active"?"touch-action: none;":""} }`;if(qg===o)return;qg=o,n?_o.cssRules.length===0?_o.insertRule(o):_o.replaceSync(o):_o.cssRules.length===1&&_o.deleteRule(0);break}case"inactive":{qg=void 0,_o.cssRules.length===1&&_o.deleteRule(0);break}}}function YK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function vu(t,e){return Gt(t,e)?0:t>e?1:-1}function ua({panelConstraints:t,size:e}){const{collapsedSize:n=0,collapsible:o,maxSize:r=100,minSize:a=0}=t;if(vu(e,a)<0)if(o){const u=(n+a)/2;vu(e,u)<0?e=n:e=a}else e=a;return e=Math.min(r,e),e=to(e),e}function yu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:o,prevLayout:r,trigger:a}){if(Gt(t,0))return e;const u=Object.values(e),c=Object.values(r),h=[...u],[d,m]=o;it(d!=null,"Invalid first pivot index"),it(m!=null,"Invalid second pivot index");let y=0;if(a==="keyboard"){{const C=t<0?m:d,A=n[C];it(A,`Panel constraints not found for index ${C}`);const{collapsedSize:x=0,collapsible:M,minSize:I=0}=A;if(M){const N=u[C];if(it(N!=null,`Previous layout not found for panel index ${C}`),Gt(N,x)){const D=I-N;vu(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}{const C=t<0?d:m,A=n[C];it(A,`No panel constraints found for index ${C}`);const{collapsedSize:x=0,collapsible:M,minSize:I=0}=A;if(M){const N=u[C];if(it(N!=null,`Previous layout not found for panel index ${C}`),Gt(N,I)){const D=N-x;vu(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}}{const C=t<0?1:-1;let A=t<0?m:d,x=0;for(;;){const I=u[A];it(I!=null,`Previous layout not found for panel index ${A}`);const N=ua({panelConstraints:n[A],size:100})-I;if(x+=N,A+=C,A<0||A>=n.length)break}const M=Math.min(Math.abs(t),Math.abs(x));t=t<0?0-M:M}{let C=t<0?d:m;for(;C>=0&&C<n.length;){const A=Math.abs(t)-Math.abs(y),x=u[C];it(x!=null,`Previous layout not found for panel index ${C}`);const M=x-A,I=ua({panelConstraints:n[C],size:M});if(!Gt(x,I)&&(y+=x-I,h[C]=I,y.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?C--:C++}}if(YK(c,h))return r;{const C=t<0?m:d,A=u[C];it(A!=null,`Previous layout not found for panel index ${C}`);const x=A+y,M=ua({panelConstraints:n[C],size:x});if(h[C]=M,!Gt(M,x)){let I=x-M,N=t<0?m:d;for(;N>=0&&N<n.length;){const D=h[N];it(D!=null,`Previous layout not found for panel index ${N}`);const L=D+I,U=ua({panelConstraints:n[N],size:L});if(Gt(D,U)||(I-=U-D,h[N]=U),Gt(I,0))break;t>0?N--:N++}}}const S=Object.values(h).reduce((C,A)=>A+C,0);if(!Gt(S,100,.1))return r;const E=Object.keys(r);return h.reduce((C,A,x)=>(C[E[x]]=A,C),{})}function Ju(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(vu(t[n],e[n])!==0)return!1;return!0}function cO({event:t,hitRegions:e,initialLayoutMap:n,mountedGroups:o,pointerDownAtPoint:r}){let a=0;const u=new Map(o);e.forEach(c=>{const{group:h,groupSize:d}=c,{disableCursor:m,orientation:y,panels:S}=h;let E=0;r?y==="horizontal"?E=(t.clientX-r.x)/d*100:E=(t.clientY-r.y)/d*100:y==="horizontal"?E=t.clientX<0?-100:100:E=t.clientY<0?-100:100;const C=n.get(h),{derivedPanelConstraints:A,layout:x,separatorToPanels:M}=o.get(h)??{};if(A&&C&&x&&M){const I=yu({delta:E,initialLayout:C,panelConstraints:A,pivotIndices:c.panels.map(N=>S.indexOf(N)),prevLayout:x,trigger:"mouse-or-touch"});if(Ju(I,x)){if(E!==0&&!m)switch(y){case"horizontal":{a|=E<0?sO:aO;break}case"vertical":{a|=E<0?lO:uO;break}}}else{u.set(c.group,{derivedPanelConstraints:A,layout:I,separatorToPanels:M});const N=c.group.panels.map(({id:D})=>D).join(",");c.group.inMemoryLayouts[N]=I}}}),Gn({cursorFlags:a,mountedGroups:u}),R_()}function IA(t){if(t.defaultPrevented||t.relatedTarget!==null||t.clientX===0&&t.clientY===0)return;const{interactionState:e,mountedGroups:n}=Po();switch(e.state){case"active":e.hitRegions.forEach(o=>{t.currentTarget===o.group.element&&cO({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n})})}}function ld(t){const e=t.parentElement;it(e,"Parent group element not found");const{mountedGroups:n}=Po();for(const[o]of n)if(o.element===e)return o;throw Error("Could not find parent Group for separator element")}function Qr({layout:t,panelConstraints:e}){const n=[...Object.values(t)],o=n.reduce((u,c)=>u+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(u=>`${u}%`).join(", ")}`);if(!Gt(o,100)&&n.length>0)for(let u=0;u<e.length;u++){const c=n[u];it(c!=null,`No layout data found for index ${u}`);const h=100/o*c;n[u]=h}let r=0;for(let u=0;u<e.length;u++){const c=n[u];it(c!=null,`No layout data found for index ${u}`);const h=ua({panelConstraints:e[u],size:c});c!=h&&(r+=c-h,n[u]=h)}if(!Gt(r,0))for(let u=0;u<e.length;u++){const c=n[u];it(c!=null,`No layout data found for index ${u}`);const h=c+r,d=ua({panelConstraints:e[u],size:h});if(c!==d&&(r-=d-c,n[u]=d,Gt(r,0)))break}const a=Object.keys(t);return n.reduce((u,c,h)=>(u[a[h]]=c,u),{})}function fO({groupId:t}){const e=()=>{const{mountedGroups:n}=Po();for(const[o,r]of n)if(o.id===t)return{group:o,...r};throw Error(`Group ${t} not found`)};return{getLayout(){const{layout:n}=e();return n},setLayout(n){const{derivedPanelConstraints:o,group:r,layout:a,separatorToPanels:u}=e(),c=Qr({layout:n,panelConstraints:o});return Ju(a,c)||Gn(h=>({mountedGroups:new Map(h.mountedGroups).set(r,{derivedPanelConstraints:o,layout:c,separatorToPanels:u})})),c}}}function dO(t){const{mountedGroups:e}=Po(),n=e.get(t);return it(n,`Mounted Group ${t.id} not found`),n}function Nr(t,e){const n=ld(t),o=dO(n),r=n.separators.find(m=>m.element===t);it(r,"Matching separator not found");const a=o.separatorToPanels.get(r);it(a,"Matching panels not found");const u=a.map(m=>n.panels.indexOf(m)),c=fO({groupId:n.id}).getLayout(),h=yu({delta:e,initialLayout:c,panelConstraints:o.derivedPanelConstraints,pivotIndices:u,prevLayout:c,trigger:"keyboard"}),d=Qr({layout:h,panelConstraints:o.derivedPanelConstraints});Ju(c,d)||Gn(m=>({mountedGroups:new Map(m.mountedGroups).set(n,{derivedPanelConstraints:o.derivedPanelConstraints,layout:d,separatorToPanels:o.separatorToPanels})}))}function DA(t){if(t.defaultPrevented)return;const e=t.currentTarget,n=ld(e);if(!n.disabled)switch(t.key){case"ArrowDown":{t.preventDefault(),n.orientation==="vertical"&&Nr(e,5);break}case"ArrowLeft":{t.preventDefault(),n.orientation==="horizontal"&&Nr(e,-5);break}case"ArrowRight":{t.preventDefault(),n.orientation==="horizontal"&&Nr(e,5);break}case"ArrowUp":{t.preventDefault(),n.orientation==="vertical"&&Nr(e,-5);break}case"End":{t.preventDefault(),Nr(e,100);break}case"Enter":{t.preventDefault();const o=ld(e),{derivedPanelConstraints:r,layout:a,separatorToPanels:u}=dO(o),c=o.separators.find(y=>y.element===e);it(c,"Matching separator not found");const h=u.get(c);it(h,"Matching panels not found");const d=h[0],m=r.find(y=>y.panelId===d.id);if(it(m,"Panel metadata not found"),m.collapsible){const y=a[d.id],S=m.collapsedSize===y?o.inMemoryLastExpandedPanelSizes[d.id]??m.minSize:m.collapsedSize;Nr(e,S-y)}break}case"F6":{t.preventDefault();const o=ld(e).separators.map(u=>u.element),r=Array.from(o).findIndex(u=>u===t.currentTarget);it(r!==null,"Index not found");const a=t.shiftKey?r>0?r-1:o.length-1:r+1<o.length?r+1:0;o[a].focus();break}case"Home":{t.preventDefault(),Nr(e,-100);break}}}function jK(t,e){return{x:t.x>=e.left&&t.x<=e.right?0:Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),y:t.y>=e.top&&t.y<=e.bottom?0:Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom))}}function XK(t,e,n){let o,r={x:1/0,y:1/0};for(const a of e){const u=jK(n,a.rect);switch(t){case"horizontal":{u.x<=r.x&&(o=a,r=u);break}case"vertical":{u.y<=r.y&&(o=a,r=u);break}}}return o?{distance:r,hitRegion:o}:void 0}let Vf;function WK(){return Vf===void 0&&(typeof matchMedia=="function"?Vf=!!matchMedia("(pointer:coarse)").matches:Vf=!1),Vf}function hO(t,e){const n=[];return e.forEach((o,r)=>{if(r.disabled)return;const a=WK()?NA.coarse:NA.precise,u=rO(r),c=XK(r.orientation,u,{x:t.clientX,y:t.clientY});c&&c.distance.x<=a&&c.distance.y<=a&&n.push(c.hitRegion)}),n}function OA(t){if(t.defaultPrevented)return;const{mountedGroups:e}=Po(),n=hO(t,e),o=new Set,r=new Set,a=new Set,u=new Map;let c=!1;n.forEach(h=>{o.add(h.group),h.panels.forEach(m=>{r.add(m)}),h.separator&&(a.add(h.separator),c||(c=!0,h.separator.element.focus()));const d=e.get(h.group);d&&u.set(h.group,d.layout)}),Gn({interactionState:{hitRegions:n,initialLayoutMap:u,pointerDownAtPoint:{x:t.clientX,y:t.clientY},state:"active"}}),n.length&&t.preventDefault()}function PA(t){if(t.defaultPrevented)return;const{interactionState:e,mountedGroups:n}=Po();switch(e.state){case"active":{if(t.type!=="pointerleave"&&t.buttons===0){Gn(o=>o.interactionState.state==="inactive"?o:{cursorFlags:0,interactionState:{state:"inactive"}});return}cO({event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:e.pointerDownAtPoint});break}default:{const o=hO(t,n);o.length===0?e.state!=="inactive"&&Gn({interactionState:{state:"inactive"}}):Gn({interactionState:{hitRegions:o,state:"hover"}}),R_();break}}}function kA(t){if(t.defaultPrevented)return;t.preventDefault();const{interactionState:e}=Po();switch(e.state){case"active":Gn({cursorFlags:0,interactionState:{state:"inactive"}}),R_()}}function QK(t){let e=0,n=0;const o={};for(const a of t)if(a.defaultSize!==void 0){e++;const u=to(a.defaultSize);n+=u,o[a.panelId]=u}else o[a.panelId]=void 0;const r=t.length-e;if(r!==0){const a=to((100-n)/r);for(const u of t)u.defaultSize===void 0&&(o[u.panelId]=a)}return o}function ZK(t,e,n){const o=n[0];if(!o)return;const r=t.panels.find(u=>u.element===e);if(!r||!r.onResize)return;const a=Ih({group:t});r.onResize({asPercentage:to(o.inlineSize/a*100),inPixels:o.inlineSize},r.id)}function eY(t){let e=!0;it(t.separators.length===0||t.separators.length<t.panels.length,"Invalid Group configuration; too many Separator components");const n=new Set,o=new Set,r=new ResizeObserver(y=>{for(const S of y){const{borderBoxSize:E,target:C}=S;C===t.element?e&&Gn(A=>{const x=A.mountedGroups.get(t);if(x){const M=MA(t),I=x.layout,N=Qr({layout:I,panelConstraints:M});return{mountedGroups:new Map(A.mountedGroups).set(t,{derivedPanelConstraints:M,layout:N,separatorToPanels:x.separatorToPanels})}}return A}):ZK(t,C,E)}});r.observe(t.element),t.panels.forEach(y=>{it(!n.has(y.id),`Panel ids must be unique; id "${y.id}" was used more than once`),n.add(y.id),y.onResize&&r.observe(y.element)});const a=MA(t),u=t.panels.map(({id:y})=>y).join(","),c=t.inMemoryLayouts[u]??t.defaultLayout??QK(a),h=Qr({layout:c,panelConstraints:a}),d=rO(t),m=Gn(y=>({mountedGroups:new Map(y.mountedGroups).set(t,{derivedPanelConstraints:a,layout:h,separatorToPanels:new Map(d.filter(S=>S.separator).map(S=>[S.separator,S.panels]))})}));return t.element.addEventListener("pointerleave",IA),t.separators.forEach(y=>{it(!o.has(y.id),`Separator ids must be unique; id "${y.id}" was used more than once`),o.add(y.id),y.element.addEventListener("keydown",DA)}),m.mountedGroups.size===1&&(window.addEventListener("pointerdown",OA),window.addEventListener("pointermove",PA),window.addEventListener("pointerup",kA)),function(){e=!1;const y=Gn(S=>{const E=new Map(S.mountedGroups);return E.delete(t),{mountedGroups:E}});t.element.removeEventListener("pointerleave",IA),t.separators.forEach(S=>{S.element.removeEventListener("keydown",DA)}),y.mountedGroups.size===0&&(window.removeEventListener("pointerdown",OA),window.removeEventListener("pointermove",PA),window.removeEventListener("pointerup",kA)),r.disconnect()}}function M_(t){const e=T.useId();return`${t??e}`}const Pa=typeof window<"u"?T.useLayoutEffect:T.useEffect;function N_(t){const e=T.useRef(t);return Pa(()=>{e.current=t},[t]),T.useCallback(n=>e.current?.(n),[e])}function I_(...t){return N_(e=>{t.forEach(n=>{if(n)switch(typeof n){case"function":{n(e);break}case"object":{n.current=e;break}}})})}const pO="--react-resizable-panels--panel--pointer-events";function mO(t,e){const n=t.replace(/[^a-zA-Z0-9\-_]/g,""),o=e.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${o}`}const gO=T.createContext(null);function tY(t,e){const n=T.useRef({getLayout:()=>({}),setLayout:JK});T.useImperativeHandle(e,()=>n.current,[]),Pa(()=>{Object.assign(n.current,fO({groupId:t}))})}function nY({children:t,className:e,defaultLayout:n,disableCursor:o,disabled:r,elementRef:a,groupRef:u,id:c,onLayoutChange:h,orientation:d="horizontal",style:m,...y}){const S=T.useRef({}),E=N_(ae=>{Ju(S.current,ae)||(S.current=ae,h?.(ae))}),C=M_(c),[A,x]=T.useState(!1),[M,I]=T.useState(null),[N,D]=T.useState(n??{}),[L,U]=T.useState([]),[O,q]=T.useState([]),J=T.useRef({}),j=T.useRef({}),W=I_(I,a);tY(C,u);const re=T.useMemo(()=>({id:C,orientation:d,registerPanel:ae=>(U(de=>ny(d,[...de,ae])),()=>{U(de=>de.filter(F=>F!==ae))}),registerSeparator:ae=>(q(de=>ny(d,[...de,ae])),()=>{q(de=>de.filter(F=>F!==ae))})}),[C,d]);Pa(()=>{if(M!==null&&L.length>0){const ae={defaultLayout:n,disableCursor:!!o,disabled:!!r,element:M,id:C,inMemoryLastExpandedPanelSizes:J.current,inMemoryLayouts:j.current,orientation:d,panels:L,separators:O},de=eY(ae),F=Po().mountedGroups.get(ae);F&&(D(F.layout),E?.(F.layout));const Q=Fr.addListener("interactionStateChange",ne=>{switch(ne.state){case"active":case"hover":{x(ne.hitRegions.some(ce=>ce.group===ae));break}}}),ee=Fr.addListener("mountedGroupsChange",ne=>{const ce=ne.get(ae);ce&&ce.derivedPanelConstraints.length>0&&(D(ce.layout),E?.(ce.layout))});return()=>{de(),Q(),ee()}}},[n,o,r,M,C,E,d,L,O]);const oe={[pO]:A?"none":void 0};for(const ae in N){const de=mO(C,ae),F=N[ae];oe[de]=F}return w.jsx(gO.Provider,{value:re,children:w.jsx("div",{...y,"aria-orientation":d,className:e,"data-group":!0,"data-testid":C,id:C,ref:W,style:{...m,...oe,display:"flex",flexDirection:d==="horizontal"?"row":"column",flexWrap:"nowrap"},children:t})})}function D_(){const t=T.useContext(gO);return it(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function oY({groupId:t,panelId:e}){const n=()=>{const{mountedGroups:c}=Po();for(const[h,{derivedPanelConstraints:d,layout:m,separatorToPanels:y}]of c)if(h.id===t)return{derivedPanelConstraints:d,group:h,layout:m,separatorToPanels:y};throw Error(`Group ${t} not found`)},o=()=>{const c=n().derivedPanelConstraints.find(h=>h.panelId===e);if(c!==void 0)return c;throw Error(`Panel constraints not found for Panel ${e}`)},r=()=>{const c=n().group.panels.find(h=>h.id===e);if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},a=()=>{const c=n().layout[e];if(c!==void 0)return c;throw Error(`Layout not found for Panel ${e}`)},u=c=>{const h=a();if(c===h)return;const{derivedPanelConstraints:d,group:m,layout:y,separatorToPanels:S}=n(),E=m.panels.findIndex(M=>M.id===e),C=E===m.panels.length-1,A=yu({delta:C?h-c:c-h,initialLayout:y,panelConstraints:d,pivotIndices:C?[E-1,E]:[E,E+1],prevLayout:y,trigger:"imperative-api"}),x=Qr({layout:A,panelConstraints:d});Ju(y,x)||Gn(M=>({mountedGroups:new Map(M.mountedGroups).set(m,{derivedPanelConstraints:d,layout:x,separatorToPanels:S})}))};return{collapse:()=>{const{collapsible:c,collapsedSize:h}=o(),d=a();c&&d!==h&&u(h)},expand:()=>{const{collapsible:c,collapsedSize:h,minSize:d}=o(),m=a();c&&m===h&&u(d)},getSize:()=>{const{group:c}=n(),h=a(),{element:d}=r(),m=c.orientation==="horizontal"?d.offsetWidth:d.offsetHeight;return{asPercentage:h,inPixels:m}},isCollapsed:()=>{const{collapsible:c,collapsedSize:h}=o(),d=a();return c&&Gt(h,d)},resize:c=>{if(a()!==c){let h;switch(typeof c){case"number":{const{group:d}=n(),m=Ih({group:d});h=to(c/m*100);break}case"string":{h=parseFloat(c);break}}u(h)}}}}function iY(t,e){const{id:n}=D_(),o=T.useRef({collapse:zg,expand:zg,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:zg});T.useImperativeHandle(e,()=>o.current,[]),Pa(()=>{Object.assign(o.current,oY({groupId:n,panelId:t}))})}function LA({children:t,className:e,collapsedSize:n="0%",collapsible:o=!1,defaultSize:r,elementRef:a,id:u,maxSize:c="100%",minSize:h="0%",onResize:d,panelRef:m,style:y,...S}){const E=!!u,C=M_(u),[A,x]=T.useState(null),M=I_(x,a),{id:I,registerPanel:N}=D_(),D=d!==null,L=N_(O=>{d?.(O,u)});Pa(()=>{if(A!==null)return N({element:A,id:C,idIsStable:E,onResize:D?L:void 0,panelConstraints:{collapsedSize:n,collapsible:o,defaultSize:r,maxSize:c,minSize:h}})},[n,o,r,A,D,C,E,c,h,L,N]),iY(C,m);const U=mO(I,C);return w.jsx("div",{...S,"data-panel":!0,"data-testid":C,id:C,ref:M,style:{...rY,flexBasis:0,flexGrow:`var(${U}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${pO})`},children:w.jsx("div",{className:e,style:{width:"100%",height:"100%",...y},children:t})})}const rY={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function sY({layout:t,panelConstraints:e,panelId:n,panelIndex:o}){let r,a;const u=t[n],c=e.find(h=>h.panelId===n);if(c){const h=c.maxSize,d=a=c.collapsible?c.collapsedSize:c.minSize,m=[o,o+1];a=Qr({layout:yu({delta:d-u,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n],r=Qr({layout:yu({delta:h-u,initialLayout:t,panelConstraints:e,pivotIndices:m,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n]}return{valueControls:n,valueMax:r,valueMin:a,valueNow:u}}function aY({children:t,className:e,elementRef:n,id:o,style:r,...a}){const u=M_(o),[c,h]=T.useState({}),[d,m]=T.useState("inactive"),[y,S]=T.useState(null),E=I_(S,n),{id:C,orientation:A,registerSeparator:x}=D_(),M=A==="horizontal"?"vertical":"horizontal";return Pa(()=>{if(y!==null){const I={element:y,id:u},N=x(I),D=Fr.addListener("interactionStateChange",U=>{m(U.state!=="inactive"&&U.hitRegions.some(O=>O.separator===I)?U.state:"inactive")}),L=Fr.addListener("mountedGroupsChange",U=>{U.forEach(({derivedPanelConstraints:O,layout:q,separatorToPanels:J},j)=>{if(j.id===C){const W=J.get(I);if(W){const re=W[0],oe=j.panels.indexOf(re);h(sY({layout:q,panelConstraints:O,panelId:re.id,panelIndex:oe}))}}})});return()=>{D(),L(),N()}}},[y,C,u,x]),w.jsx("div",{...a,"aria-controls":c.valueControls,"aria-orientation":M,"aria-valuemax":c.valueMax,"aria-valuemin":c.valueMin,"aria-valuenow":c.valueNow,children:t,className:e,"data-separator":d,"data-testid":u,id:u,ref:E,role:"separator",style:{flexBasis:"auto",...r,flexGrow:0,flexShrink:0},tabIndex:0})}const lY=({localImage:t,initialText:e="",onImageGenerated:n,onClose:o})=>{const[r,a]=T.useState(null),[u,c]=T.useState(e),[h,d]=T.useState(!1);T.useEffect(()=>{let y=!0;return t.getUrlObject().then(S=>{y&&a(S)}),()=>{y=!1}},[t]);const m=async()=>{d(!0);try{const y=await t.getBase64(),S=await da.img2img(u||"","",[{rawBase64:y.rawBase64,mime:y.mime,description:""}]);n&&n(S)}catch(y){console.error("GenerateImage failed:",y)}finally{d(!1)}};return w.jsx("div",{className:"border d-flex flex-column",style:{height:"700px"},children:w.jsxs(nY,{orientation:"horizontal",style:{height:"100%"},children:[w.jsx(LA,{defaultSize:500,minSize:10,children:w.jsx("div",{className:"d-flex align-items-center justify-content-center overflow-hidden",style:{height:"100%"},children:r?w.jsx("img",{src:r,alt:"Preview",className:"img-fluid",style:{objectFit:"contain",maxHeight:"100%",maxWidth:"100%"}}):w.jsx("div",{children:"Loading image"})})}),w.jsx(aY,{style:{cursor:"ew-resize",backgroundColor:"#8f8f8fff",width:"10px"}}),w.jsx(LA,{minSize:10,children:w.jsxs("div",{className:"d-flex flex-column h-100 p-3",style:{height:"100%"},children:[w.jsx("div",{className:"d-flex justify-content-end mb-2",children:o&&w.jsx("button",{type:"button",onClick:o,style:{cursor:"pointer"},children:""})}),w.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[w.jsx("textarea",{value:u,onChange:y=>c(y.target.value),placeholder:"Edit This Image:",style:{flexGrow:1,resize:"none",padding:"8px",fontSize:"14px"}}),w.jsx(c_,{onClick:m,label:"Generate",is_loading:h})]})]})})]})})},uY=Tt(({shot:t})=>{const e=t.scene;if(!e.sceneJson||!e.sceneJson.data)return null;const n=e.sceneJson.data.tags,o=e.project?.artbook;return o?w.jsx(Bu,{label:"Tags",children:n.length?w.jsx("ul",{className:"list-group list-group-flush",children:n.map((r,a)=>{const u=o.getTag(r);if(!u)return null;const c=!t.getSkippedTags().includes(u.path);return w.jsxs("li",{className:"list-group-item p-0 border-0 d-flex align-items-center gap-2",children:[w.jsx("input",{type:"checkbox",className:"form-check-input m-0",checked:c,onChange:h=>{t.setTagSkipped(u.path,!h.target.checked)}}),w.jsx("span",{className:c?"":"text-muted",children:u.path})]},a)})}):w.jsx("div",{children:"No tags."})}):null}),cY={submitted:"gray",processing:"orange",succeed:"green",failed:"red"},fY=Tt(({task:t})=>{const n=t.data?.status??"submitted",o=cY[n]??"gray";return w.jsx("div",{className:"card mb-0",children:w.jsxs("div",{className:"card-body d-flex align-items-center justify-content-between py-0",children:[w.jsxs("div",{className:"d-flex align-items-center gap-2",children:[w.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:o}}),w.jsx("span",{className:"fw-bold",children:t.id}),w.jsx("span",{className:"text-muted",children:n})]}),w.jsxs("div",{className:"d-flex gap-0",children:[w.jsx("span",{className:"text-muted me-2",children:t._status_log}),w.jsx(lt,{label:"Check Status",className:"btn-outline-primary btn-sm rounded-0",onClick:()=>{t.check_status()}}),w.jsx(lt,{label:"Delete",className:"btn-outline-danger btn-sm rounded-0",onClick:()=>{window.confirm(`Delete task ${t.id}?`)&&t.delete()}}),w.jsx(lt,{label:"Log",className:"btn-outline-secondary btn-sm rounded-0",onClick:()=>{t.log()}}),w.jsx(ou,{isLoading:t.is_checking_status,asButton:!0})]})]})})}),dY=Tt(({shot:t})=>!t.tasks||t.tasks.length===0?w.jsx("div",{className:"mt-2 text-muted",children:"No tasks"}):w.jsx(Bu,{label:`Tasks (${t.tasks.length})`,defaultCollapsed:!1,className:"mt-2 mb-2",children:w.jsx("div",{className:"d-flex flex-column gap-0",children:t.tasks.map(e=>w.jsx(fY,{task:e},e.id))})})),Jg=({localVideo:t,height:e=250,topRightExtra:n,onClick:o,autoPlay:r=!0,loop:a=!0,muted:u=!0})=>{const[c,h]=T.useState(null),[d,m]=T.useState(!1);return T.useEffect(()=>{let y=!0;return(async()=>{try{const E=await t.getUrlObject();y&&E&&h(E)}catch(E){console.error("Error loading LocalVideo",E)}})(),()=>{y=!1,t.revokeUrl()}},[t]),c?w.jsxs("div",{className:"position-relative d-inline-block border rounded",style:{height:`${e}px`,cursor:"pointer"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[w.jsx("video",{src:c,height:e,onClick:o,autoPlay:r,loop:a,muted:u,style:{height:`${e}px`,width:"auto",objectFit:"contain",display:"block"}}),n&&d&&w.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px",zIndex:10,display:"flex",gap:"5px"},children:n})]}):w.jsx("div",{className:"d-flex align-items-center justify-content-center border rounded p-2",style:{height:`${e}px`,width:"auto"},children:"Loading..."})};function Qs({workflowName:t,project:e,optionName:n,label:o,values:r}){const a=e?.workflows?.[t]?.[n];return w.jsx(Vd,{value:a,options:r,label:o,onChange:u=>{e.updateWorkflow(t,n,u)}})}const hY=({width:t=400,height:e=200,onDrop:n,children:o})=>{const[r,a]=T.useState(!1),u=d=>{d.preventDefault(),a(!0)},c=()=>{a(!1)},h=d=>{d.preventDefault(),a(!1);const m=d.dataTransfer.files[0];m&&n(m)};return w.jsx("div",{className:`drop-area ${r?"dragging":""}`,style:{width:t,height:e,border:r?"2px solid #42a5f5":"2px dashed #aaa",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:r?"#294457":"#2d2d2d",boxShadow:r?"0 0 10px rgba(66,165,245,0.5)":"none",transition:"all 0.2s ease-in-out"},onDragOver:u,onDragLeave:c,onDrop:h,children:o||w.jsx("span",{style:{display:"block",textAlign:"center",width:"100%"},children:"Drag and Drop Here"})})},pY=Tt(({shot:t})=>{if(!t.shotJson)return w.jsx("div",{children:"Loading shot info..."});const e=200,n=t.images??[],o=t.scene.project,r=async()=>{window.confirm(`Are you sure you want to delete shot "${t.folder.name}"?`)&&await t.delete()};return w.jsx("div",{className:"card mb-2",children:w.jsxs("div",{className:"card-body",children:[w.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[w.jsx("strong",{children:t.folder.name}),w.jsxs("div",{className:"d-flex gap-2",children:[w.jsx(iO,{label:"Finished",value:!!t.shotJson.data?.finished,onToggle:a=>{t.shotJson&&t.shotJson.updateField("finished",a)}}),w.jsx(lt,{onClick:()=>{t.log()},label:"Log Shot"}),w.jsx(lt,{onClick:r,label:"Delete Shot",className:"btn-outline-danger"})]})]}),w.jsx("div",{className:"shot_type-group mb-2",role:"group",children:w.jsx(Vd,{value:t.shotJson.getField("shot_type")||"shot_type",options:["simple shot","actor shot"],onChange:a=>{t.shotJson?.updateField("shot_type",a)}})}),w.jsx("div",{className:"mb-0",children:w.jsxs("div",{className:"btn-group mb-2",role:"group",children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateImage()},children:" Generate Image "}),w.jsx(Vd,{value:t.scene.project.workflows.generate_shot_image.model,options:jM,onChange:a=>{t.scene.project.updateWorkflow("generate_shot_image","model",a)}}),w.jsx(ou,{isLoading:t.is_generating,asButton:!0})]})}),w.jsx(ty,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo()},children:" Generate Video"}),w.jsx(Qs,{project:o,workflowName:"generate_video_kling",optionName:"model",values:Object.values(ut.options.img2video.model)}),w.jsx(Qs,{project:o,workflowName:"generate_video_kling",optionName:"mode",label:"mode:",values:Object.values(ut.options.img2video.mode)}),w.jsx(Qs,{project:o,workflowName:"generate_video_kling",optionName:"duration",label:"Duration:",values:Object.values(ut.options.img2video.duration)}),w.jsx(ou,{isLoading:t.is_submitting_video,asButton:!0})]}),content:w.jsx(w.Fragment,{})}),w.jsx(ty,{className:"mb-2",buttons:w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:async()=>{t.GenerateVideo_KlingMotionControl()},children:" Gen Motion Control Video"}),w.jsx(Qs,{project:o,workflowName:"kling_motion_control",optionName:"character_orientation",label:"Orient:",values:Object.values(ut.options.motion_control.character_orientation)}),w.jsx(Qs,{project:o,workflowName:"kling_motion_control",optionName:"mode",label:"mode:",values:Object.values(ut.options.motion_control.mode)}),w.jsx(Qs,{project:o,label:"Sound:",workflowName:"kling_motion_control",optionName:"keep_original_sound",values:Object.values(ut.options.motion_control.keep_original_sound)}),w.jsx(ou,{isLoading:t.is_submitting_video,asButton:!0})]}),content:w.jsxs(w.Fragment,{children:[t.kling_motion_video&&w.jsx(Jg,{localVideo:t.kling_motion_video,height:400,topRightExtra:w.jsx(w.Fragment,{})}),w.jsxs(Vg,{label:"Reference Videos",children:[t.ref_videos.map((a,u)=>w.jsx(Jg,{localVideo:a,height:200,onClick:()=>{t.setKlingMotionReferenceVideo(a)},topRightExtra:w.jsx(w.Fragment,{children:w.jsx(lt,{label:"Delete",className:"btn-outline-danger btn-sm",onClick:async()=>{await a.delete(),t.removeReferenceVideo(a)}})})},u)),w.jsx(hY,{width:100,onDrop:async a=>{console.log(a);const u=await t.refVideoFolder.getFileHandle(a.name,{create:!0}),c=await u.createWritable();await c.write(a),await c.close(),console.log(`Saved file ${a.name} successfully!`);const h=new jr(u,t.refVideoFolder);Re(()=>{t.ref_videos.push(h)})}})]})]})}),w.jsx(dY,{shot:t}),w.jsx(eo,{localJson:t.shotJson,field:"prompt",fitHeight:!0}),w.jsx(eo,{localJson:t.shotJson,field:"camera",fitHeight:!0}),w.jsx(eo,{localJson:t.shotJson,field:"action_description",fitHeight:!0}),w.jsx(uY,{shot:t}),w.jsx(Vg,{label:"Shot Results",headerExtra:w.jsx(w.Fragment,{children:w.jsx(lt,{label:"Import URL",onClick:async()=>{try{const a=await navigator.clipboard.readText();if(a&&(a.startsWith("http://")||a.startsWith("https://"))){console.log("Importing URL from clipboard:",a);const u=await Yr.fromUrl(a,t.resultsFolder);t.addImage(u)}else alert("Clipboard does not contain a valid URL.")}catch(a){console.error("Failed to read clipboard:",a),alert("Failed to access clipboard.")}}})}),children:n.map((a,u)=>w.jsx(UK,{localImage:a,height:e,onClick:()=>{t.selectArt(a)},topRightExtra:w.jsxs(w.Fragment,{children:[w.jsx(lt,{onClick:()=>t.setSrcImage(a),label:"Pick"}),w.jsx(lt,{onClick:async()=>{if(window.confirm("Delete this image?"))try{await a.delete(t.resultsFolder),t.removeImage(a)}catch(c){console.error("Failed to delete image:",c),alert("Failed to delete image.")}},label:"Delete",className:"btn-outline-danger"})]})},u))}),t.selected_art&&w.jsx(lY,{localImage:t.selected_art,initialText:"Notes for this image",onImageGenerated:async a=>{await t.saveGoogleResultImage(a,!0)},onClose:()=>{t.selectArt()}}),w.jsx(Vg,{label:"Generated Videos",children:t.videos.map((a,u)=>w.jsx(Jg,{localVideo:a,height:500,topRightExtra:w.jsx(w.Fragment,{children:w.jsx(lt,{label:"Delete",className:"btn-outline-danger btn-sm",onClick:async()=>{await a.delete(),t.removeVideo(a)}})})},u))})]})})}),mY=Tt(({scene:t})=>{const[e,n]=T.useState(null);T.useEffect(()=>{n(null)},[t]);const o=async()=>{const r=prompt("Enter new shot name:");if(!r)return;const a=await t.createShot(r);a&&n(a)};return w.jsxs("div",{className:"d-flex flex-column gap-3",children:[w.jsx(LK,{initialHeight:200,children:w.jsxs("div",{className:"d-flex overflow-auto gap-2 h-100",children:[t.shots.map(r=>w.jsx(kK,{shot:r,isSelected:e===r,onClick:n},r.folder.name)),w.jsx("div",{className:"mt-2",children:w.jsx(lt,{label:"+ Add Shot",onClick:o})})]})}),w.jsxs("div",{children:[w.jsx(c_,{onClick:()=>{t.generateAllShotImages()},label:"Generate ALL",is_loading:t.is_generating_all_shot_images}),w.jsx(lt,{label:"+ Add Shot",onClick:o})]}),e&&w.jsx(pY,{shot:e})]})}),gY=Tt(({project:t})=>{switch(t.currentView.type){case"settings":return w.jsx(f6,{project:t});case"script":return w.jsx(d6,{project:t});case"artbook":return t.artbook?w.jsx(p6,{artbook:t.artbook}):w.jsx("div",{children:"No Artbook found."});case"scene":if(!t.selectedScene)return null;const e=t.selectedScene;return w.jsxs("div",{children:[w.jsx("h2",{children:e.folder.name}),w.jsx(fu,{tabs:{Scene:w.jsx(PK,{scene:e}),Shots:w.jsx(mY,{scene:e})}})]});default:return null}}),vY=Tt(()=>{const[t]=T.useState(()=>new s6(null)),e=async()=>{try{const o=await window.showDirectoryPicker();await t.loadFromFolder(o)}catch(o){console.error(o)}},n=async o=>{let r=await o.queryPermission({mode:"readwrite"});r!=="granted"&&(r=await o.requestPermission({mode:"readwrite"})),r==="granted"&&await t.loadFromFolder(o)};return T.useEffect(()=>{(async()=>{if(await t.loadDB(),t.userSettingsDB.data.lastOpenedFolder){const r=t.userSettingsDB.data.lastOpenedFolder;let a=await r.queryPermission({mode:"readwrite"});a!=="granted"&&(a=await r.requestPermission({mode:"readwrite"})),a==="granted"&&await t.loadFromFolder(r)}})()},[]),w.jsxs("div",{style:{minHeight:"100vh"},children:[w.jsx(a6,{onOpenFolder:e,recentFolders:t.userSettingsDB.data.recentFolders,onOpenRecent:n,project:t}),w.jsxs("div",{className:"d-flex",style:{height:"calc(100vh - 56px)",overflow:"hidden"},children:[w.jsx(u6,{project:t}),w.jsx("div",{className:"flex-grow-1 d-flex flex-column overflow-hidden",children:w.jsx("div",{className:"flex-grow-1 overflow-auto p-3",children:w.jsx(gY,{project:t})})})]})]})}),yY=T.createContext(void 0),_Y=({children:t})=>{const[e,n]=T.useState(null);return w.jsx(yY.Provider,{value:{contentArea:e,setContentArea:n},children:t})};qP.createRoot(document.getElementById("root")).render(w.jsx(T.StrictMode,{children:w.jsx(_Y,{children:w.jsx(vY,{})})}));
